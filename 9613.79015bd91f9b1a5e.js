"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9613],{29613:(I,l,n)=>{n.r(l),n.d(l,{NewComponent:()=>W});var g=n(10467),t=n(54438),d=n(88834),p=n(34635),f=n(30046),m=n(99631),D=n(65571),M=n(82798),O=n(99213),v=n(5951),P=n(25596),a=n(89417),h=n(96084),C=n(88020),c=n(53719);let W=(()=>{class i{constructor(){this.fb=(0,t.WQX)(a.ok),this.identity=(0,t.WQX)(p.K),this.protocol=(0,t.WQX)(C.w),this.app=(0,t.WQX)(h.d),this.router=(0,t.WQX)(f.Ix),this.form=this.fb.group({name:["",a.k0.required]})}ngOnInit(){}onSubmit(){var e=this;return(0,g.A)(function*(){e.form.disable(),console.log("Creating account...");const o=e.identity.activeAgent(),s=yield o.identity.create({didOptions:{publish:!0,services:[{id:"dwn",type:"DecentralizedWebNode",serviceEndpoint:["https://dwn.tbddev.org/beta"],enc:"#enc",sig:"#sig"}],verificationMethods:[{algorithm:"Ed25519",id:"sig",purposes:["assertionMethod","authentication"]},{algorithm:"secp256k1",id:"enc",purposes:["keyAgreement"]}]},metadata:{name:e.form.controls.name.value}});console.log("Export...",s);const _=yield s.export(),u=yield e.identity.registerAccount(_.metadata.uri,e.app.account().password),y=u.agent;console.log("Registering DWN endpoints..."),yield e.identity.registerEndpoints(y,s,["https://dwn.tbddev.org/beta"]),console.log(`Register protocols for ${_.metadata.uri}`),yield e.protocol.register(u),yield e.identity.changeAccount(_.metadata.uri),e.router.navigate(["/accounts"])})()}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-new"]],standalone:!0,features:[t.aNF],decls:11,vars:2,consts:[[3,"ngSubmit","formGroup"],["matInput","","formControlName","name","type","text"],["mat-flat-button","",3,"disabled"]],template:function(o,r){1&o&&(t.j41(0,"h1"),t.EFF(1,"Create new account"),t.k0s(),t.j41(2,"form",0),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(3,"p")(4,"mat-form-field")(5,"mat-label"),t.EFF(6,"Enter account name"),t.k0s(),t.nrm(7,"input",1),t.k0s()(),t.j41(8,"p")(9,"button",2),t.EFF(10,"Create account"),t.k0s()()()),2&o&&(t.R7$(2),t.Y8G("formGroup",r.form),t.R7$(7),t.Y8G("disabled",r.form.disabled||r.form.invalid))},dependencies:[m.fS,m.fg,c.rl,c.nJ,d.Hl,d.$z,D.Vg,M.Ve,O.m_,v.Wk,P.Hu,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD]})}}return i})()}}]);