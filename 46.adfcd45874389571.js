"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[46],{37380:(_,s,o)=>{o.r(s),o.d(s,{ProfileEditComponent:()=>T});var m=o(10467),t=o(93953),n=o(89417),u=o(88834),p=o(25596),f=o(99213),h=o(99631),g=o(5951),F=o(82798),v=o(67402),k=o(22312),P=o(18498),j=o(39434),C=o(55619),c=o(53719);function b(i,d){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Title is "),t.j41(2,"strong"),t.EFF(3,"required"),t.k0s()())}function M(i,d){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Status is "),t.j41(2,"strong"),t.EFF(3,"required"),t.k0s()())}function y(i,d){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Bio is "),t.j41(2,"strong"),t.EFF(3,"required"),t.k0s()())}function O(i,d){1&i&&(t.j41(0,"mat-error"),t.EFF(1,"Location is "),t.j41(2,"strong"),t.EFF(3,"required"),t.k0s()())}function D(i,d){if(1&i){const a=t.RV6();t.j41(0,"div",16)(1,"mat-form-field",7),t.nrm(2,"input",20),t.k0s(),t.j41(3,"button",17),t.bIt("click",function(){const e=t.eBV(a).$index,r=t.XpG();return t.Njj(r.removeLink(e))}),t.EFF(4,"Remove"),t.k0s(),t.j41(5,"button",21),t.bIt("click",function(){const e=t.eBV(a).$index,r=t.XpG();return t.Njj(r.removeLink(e))}),t.j41(6,"mat-icon"),t.EFF(7,"clear"),t.k0s()()()}if(2&i){const a=d.$index;t.R7$(2),t.Y8G("formControlName",a)}}let T=(()=>{class i{get links(){return this.form.get("links")}constructor(){var a=this;this.fb=(0,t.WQX)(n.ok),this.identity=(0,t.WQX)(v.K),this.profileService=(0,t.WQX)(j.p),this.router=(0,t.WQX)(P.Ix),this.data=(0,t.vPA)({}),this.form=this.fb.group({name:null,title:[null,n.k0.required],status:[null,n.k0.required],bio:[null,n.k0.required],location:[null,n.k0.required],state:[null,n.k0.required],postalCode:[null,n.k0.compose([n.k0.required,n.k0.minLength(5),n.k0.maxLength(5)])],shipping:["free",n.k0.required],links:this.fb.array([this.fb.control("")])}),this.navigation=(0,t.WQX)(C.o),(0,t.QZP)((0,m.A)(function*(){if(a.identity.initialized()){const l=yield a.profileService.loadProfile(a.identity.did);a.data.set(l),a.updateForm(l.profile)}}))}back(){this.navigation.back()}updateForm(a){console.log("Patching form with:",a),this.form.patchValue({name:a.name,title:a.title,bio:a.bio,status:a.status,location:a.location})}addLink(){this.links.push(this.fb.control(""))}ngOnInit(){}removeLink(a){this.links.removeAt(a)}onSubmit(){var a=this;return(0,m.A)(function*(){const l={name:a.form.value.name,title:a.form.value.title,bio:a.form.value.bio,status:a.form.value.status,location:a.form.value.location};if(a.data().record){const{status:e,record:r}=yield a.data().record.update({data:l});console.log("Update profile status:",e,r)}else{const{status:e,record:r}=yield a.identity.web5.dwn.records.create({data:l,message:{published:!0,protocol:k.ME.uri,protocolPath:"profile",dataFormat:"application/json"}});console.log("Save profile status:",e,r)}a.router.navigate(["/profile",a.identity.did])})()}static#t=this.\u0275fac=function(l){return new(l||i)};static#a=this.\u0275cmp=t.VBU({type:i,selectors:[["app-edit"]],standalone:!0,features:[t.aNF],decls:64,vars:6,consts:[["name",""],["title",""],["bio",""],["novalidate","",3,"ngSubmit","formGroup"],[1,"shipping-card"],[1,"row"],[1,"col"],[1,"full-width"],["matInput","","placeholder","Name","maxlength","200","formControlName","name"],["matInput","","placeholder","Title","formControlName","title"],["matInput","","placeholder","Status","formControlName","status"],["matSuffix",""],["maxlength","300","matInput","","placeholder","Bio","formControlName","bio"],["align","end"],["matInput","","placeholder","Location","formControlName","location"],["formArrayName","links"],[1,"link-input"],["mat-stroked-button","","type","button",3,"click"],["mat-button","","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit"],["matInput","","type","text","placeholder","Enter link (URL)",3,"formControlName"],["mat-icon-button","","type","button",3,"click"]],template:function(l,e){if(1&l){const r=t.RV6();t.j41(0,"h1"),t.EFF(1,"Edit your profile"),t.k0s(),t.j41(2,"form",3),t.bIt("ngSubmit",function(){return t.eBV(r),t.Njj(e.onSubmit())}),t.j41(3,"mat-card",4)(4,"mat-card-content")(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),t.EFF(9,"Name"),t.k0s(),t.nrm(10,"input",8,0),t.k0s()()(),t.j41(12,"div",5)(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"Title"),t.k0s(),t.nrm(17,"input",9,1),t.DNE(19,b,4,0,"mat-error"),t.k0s()(),t.j41(20,"div",6)(21,"mat-form-field",7)(22,"mat-label"),t.EFF(23,"Status"),t.k0s(),t.nrm(24,"input",10),t.DNE(25,M,4,0,"mat-error"),t.j41(26,"mat-icon",11),t.EFF(27,"place"),t.k0s()()()(),t.j41(28,"div",5)(29,"div",6)(30,"mat-form-field",7)(31,"mat-label"),t.EFF(32,"Bio"),t.k0s(),t.nrm(33,"textarea",12,2),t.DNE(35,y,4,0,"mat-error"),t.j41(36,"mat-hint",13),t.EFF(37),t.k0s()()()(),t.j41(38,"div",5),t.nrm(39,"div",6),t.k0s(),t.j41(40,"div",5)(41,"div",6)(42,"mat-form-field",7)(43,"mat-label"),t.EFF(44,"Location"),t.k0s(),t.nrm(45,"input",14),t.DNE(46,O,4,0,"mat-error"),t.j41(47,"mat-icon",11),t.EFF(48,"place"),t.k0s()()(),t.nrm(49,"div",6),t.k0s(),t.j41(50,"div",5)(51,"div",6)(52,"div",15),t.Z7z(53,D,8,1,"div",16,t.fX1),t.k0s(),t.j41(55,"button",17),t.bIt("click",function(){return t.eBV(r),t.Njj(e.addLink())}),t.j41(56,"mat-icon"),t.EFF(57,"add_link"),t.k0s(),t.EFF(58," Add Link"),t.k0s()()()(),t.j41(59,"mat-card-actions",13)(60,"button",18),t.bIt("click",function(){return t.eBV(r),t.Njj(e.back())}),t.EFF(61,"Cancel"),t.k0s(),t.j41(62,"button",19),t.EFF(63,"Save"),t.k0s()()()()}if(2&l){const r=t.sdS(34);t.R7$(2),t.Y8G("formGroup",e.form),t.R7$(17),t.vxM(e.form.controls.title.hasError("required")?19:-1),t.R7$(6),t.vxM(e.form.controls.status.hasError("required")?25:-1),t.R7$(10),t.vxM(e.form.controls.bio.hasError("required")?35:-1),t.R7$(2),t.SpI("",r.value.length," / 300"),t.R7$(9),t.vxM(e.form.controls.location.hasError("required")?46:-1),t.R7$(7),t.Dyx(e.links.controls)}},dependencies:[h.fS,h.fg,c.rl,c.nJ,c.MV,c.TL,c.yw,u.Hl,u.$z,u.iY,F.Ve,f.m_,f.An,g.Wk,p.Hu,p.RN,p.YY,p.m2,n.X1,n.qT,n.me,n.BC,n.cb,n.tU,n.j4,n.JD,n.v8],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}.link-input[_ngcontent-%COMP%]{display:flex;align-items:baseline}.link-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.4em}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1em}"]})}return i})()},4053:(_,s,o)=>{o.d(s,{Q:()=>m});const m={published:!0,protocol:"https://schema.ariton.app/profile/entry",types:{profile:{dataFormats:["application/json"]},bio:{dataFormats:["application/json"]},status:{dataFormats:["application/json"]},location:{dataFormats:["application/json"]},birthDate:{dataFormats:["application/json"]},social:{dataFormats:["application/json"]},messaging:{dataFormats:["application/json"]},phone:{dataFormats:["application/json"]},address:{dataFormats:["application/json"]},career:{dataFormats:["application/json"]},payment:{dataFormats:["application/json"]},avatar:{dataFormats:["image/gif","image/png","image/jpeg"]},hero:{dataFormats:["image/gif","image/png","image/jpeg"]}},structure:{profile:{$actions:[{who:"anyone",can:["read"]}]},bio:{},status:{},location:{},birthDate:{},social:{},career:{},avatar:{},hero:{},messaging:{},address:{},phone:{},payment:{}}}},45189:(_,s,o)=>{o.d(s,{Q:()=>m});const m={protocol:"https://social-media.xyz",published:!0,types:{post:{schema:"https://social-media.xyz/schemas/postSchema",dataFormats:["text/plain"]},reply:{schema:"https://social-media.xyz/schemas/replySchema",dataFormats:["text/plain"]},image:{dataFormats:["image/jpeg"]},caption:{schema:"https://social-media.xyz/schemas/captionSchema",dataFormats:["text/plain"]}},structure:{post:{$actions:[{who:"anyone",can:["create","read"]}],reply:{$actions:[{who:"recipient",of:"post",can:["create"]},{who:"author",of:"post",can:["create"]}]}},image:{$actions:[{who:"anyone",can:["create","read"]}],caption:{$actions:[{who:"anyone",can:["read"]},{who:"author",of:"image",can:["create"]}]},reply:{$actions:[{who:"author",of:"image",can:["read"]},{who:"recipient",of:"image",can:["create"]}]}}}}}}]);