"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9613],{29613:(R,_,n)=>{n.r(_),n.d(_,{NewComponent:()=>I});var p=n(10467),t=n(54438),l=n(88834),M=n(37064),f=n(30046),d=n(99631),D=n(65571),O=n(82798),v=n(99213),P=n(5951),h=n(25596),a=n(89417),C=n(52778),y=n(80865),m=n(53719);let I=(()=>{class i{constructor(){this.fb=(0,t.WQX)(a.ok),this.identity=(0,t.WQX)(M.K),this.protocol=(0,t.WQX)(y.w),this.app=(0,t.WQX)(C.d),this.router=(0,t.WQX)(f.Ix),this.form=this.fb.group({name:["",a.k0.required]})}ngOnInit(){}onSubmit(){var e=this;return(0,p.A)(function*(){e.form.disable(),console.log("Creating account...");const o=e.identity.activeAgent(),E=yield o.identity.create({didOptions:{publish:!0,services:[{id:"dwn",type:"DecentralizedWebNode",serviceEndpoint:["https://dwn.tbddev.org/beta"],enc:"#enc",sig:"#sig"}],verificationMethods:[{algorithm:"Ed25519",id:"sig",purposes:["assertionMethod","authentication"]},{algorithm:"secp256k1",id:"enc",purposes:["keyAgreement"]}]},metadata:{name:e.form.controls.name.value}});console.log("Export...",E);const u=yield E.export();console.log("Manage...");const s=yield o.identity.manage({portableIdentity:u}),g=yield e.identity.registerAccount(s.metadata.uri,e.app.account().password),W=g.agent;console.log("Registering DWN endpoints..."),yield e.identity.registerEndpoints(W,s,["https://dwn.tbddev.org/beta"]),console.log(`Register protocols for ${s.metadata.uri}`),yield e.protocol.register(g),yield e.identity.changeAccount(u.metadata.uri),e.router.navigate(["/accounts"])})()}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-new"]],standalone:!0,features:[t.aNF],decls:11,vars:2,consts:[[3,"ngSubmit","formGroup"],["matInput","","formControlName","name","type","text"],["mat-flat-button","",3,"disabled"]],template:function(o,r){1&o&&(t.j41(0,"h1"),t.EFF(1,"Create new account"),t.k0s(),t.j41(2,"form",0),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(3,"p")(4,"mat-form-field")(5,"mat-label"),t.EFF(6,"Enter account name"),t.k0s(),t.nrm(7,"input",1),t.k0s()(),t.j41(8,"p")(9,"button",2),t.EFF(10,"Create account"),t.k0s()()()),2&o&&(t.R7$(2),t.Y8G("formGroup",r.form),t.R7$(7),t.Y8G("disabled",r.form.disabled||r.form.invalid))},dependencies:[d.fS,d.fg,m.rl,m.nJ,l.Hl,l.$z,D.Vg,O.Ve,v.m_,P.Wk,h.Hu,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD]})}}return i})()}}]);