"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6702],{6702:(q,C,s)=>{s.r(C),s.d(C,{CommunitiesComponent:()=>U});var d=s(10467),t=s(54438),p=s(65571),v=s(99213),F=s(99631),j=s(53719),l=s(89417),R=s(60177),u=s(2042),h=s(96695),m=s(9159),c=s(25596),y=s(88834),S=s(45024),k=s(96354),x=s(57786),E=s(7673);class T extends S.qS{constructor(){super()}connect(){if(this.paginator&&this.sort)return(0,x.h)((0,E.of)(this.data),this.paginator.page,this.sort.sortChange).pipe((0,k.T)(()=>this.getPagedData(this.getSortedData([...this.data]))));throw Error("Please set the paginator and sort on the data source before connecting.")}disconnect(){}getPagedData(a){return this.paginator?a.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize):a}getSortedData(a){return this.sort&&this.sort.active&&""!==this.sort.direction?a.sort((e,n)=>{const o="asc"===this.sort?.direction;switch(this.sort?.active){case"name":return b(e.name,n.name,o);case"id":return b(+e.id,+n.id,o);default:return 0}}):a}}function b(i,a,e){return(i<a?-1:1)*(e?1:-1)}var f=s(30046),$=s(30450),D=s(55911),_=s(96084),I=s(36815),w=s(85297);const G=()=>["/communities","create"],M=i=>["/communities","create",i],z=i=>["/community",i],N=()=>[5,10,20];function B(i,a){if(1&i&&(t.j41(0,"a",11),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&i){const e=a.$implicit;t.Y8G("routerLink",t.eq3(2,M,e.id)),t.R7$(),t.SpI("",e.data.name," - Awaiting approval")}}function V(i,a){if(1&i&&(t.j41(0,"mat-card",1)(1,"mat-card-content",2)(2,"strong"),t.EFF(3,"NOTICE"),t.k0s(),t.j41(4,"div"),t.EFF(5," You have communities in draft mode. Please review any status update on their verification status. "),t.nrm(6,"br")(7,"br"),t.Z7z(8,B,3,4,null,null,t.fX1),t.k0s()()()),2&i){const e=t.XpG();t.R7$(8),t.Dyx(e.drafts())}}function Y(i,a){if(1&i){const e=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title")(3,"a",12),t.EFF(4),t.k0s()()(),t.nrm(5,"br")(6,"img",13),t.j41(7,"mat-card-content"),t.nrm(8,"br"),t.j41(9,"p"),t.EFF(10),t.k0s()(),t.j41(11,"mat-card-actions")(12,"button",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.open(o.id))}),t.EFF(13,"VIEW"),t.k0s(),t.j41(14,"button",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.join(o.id))}),t.EFF(15,"JOIN"),t.k0s()()()}if(2&i){const e=a.$implicit;t.R7$(3),t.Y8G("routerLink",t.eq3(4,z,e.id)),t.R7$(),t.JRh(e.data.name),t.R7$(2),t.Y8G("src",e.data.avatar,t.B4B),t.R7$(4),t.SpI(" ",e.data.bio," ")}}function P(i,a){if(1&i){const e=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.nrm(4,"br")(5,"img",13),t.j41(6,"mat-card-content"),t.nrm(7,"br"),t.j41(8,"p"),t.EFF(9),t.k0s()(),t.j41(10,"mat-card-actions")(11,"button",14),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.open("did:dht:my6nm5s1n9xmuuh5yixe668k7xbkmmuddzatn1fojzgdg5f5to8y"))}),t.EFF(12,"JOIN"),t.k0s(),t.j41(13,"button",14),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.open("did:dht:my6nm5s1n9xmuuh5yixe668k7xbkmmuddzatn1fojzgdg5f5to8y"))}),t.EFF(14,"PREVIEW"),t.k0s()()()}if(2&i){const e=a.$implicit;t.R7$(3),t.SpI("",e.name," "),t.R7$(2),t.Y8G("src",e.thumbnail,t.B4B),t.R7$(4),t.SpI(" ",e.description," ")}}function X(i,a){if(1&i&&(t.j41(0,"div",9),t.Z7z(1,Y,16,6,"mat-card",null,t.fX1),t.Z7z(3,P,15,3,"mat-card",null,t.fX1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Dyx(e.communities()),t.R7$(2),t.Dyx(e.cards())}}function A(i,a){1&i&&(t.j41(0,"th",24),t.EFF(1,"Id"),t.k0s())}function L(i,a){if(1&i&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.JRh(e.id)}}function J(i,a){1&i&&(t.j41(0,"th",24),t.EFF(1,"Name"),t.k0s())}function O(i,a){if(1&i&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.JRh(e.name)}}function Q(i,a){1&i&&(t.j41(0,"th",24),t.EFF(1,"Description"),t.k0s())}function W(i,a){if(1&i&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.JRh(e.description)}}function Z(i,a){1&i&&t.nrm(0,"tr",26)}function H(i,a){1&i&&t.nrm(0,"tr",27)}function K(i,a){if(1&i&&(t.j41(0,"div",10)(1,"table",15),t.qex(2,16),t.DNE(3,A,2,0,"th",17)(4,L,2,1,"td",18),t.bVm(),t.qex(5,19),t.DNE(6,J,2,0,"th",17)(7,O,2,1,"td",18),t.bVm(),t.qex(8,20),t.DNE(9,Q,2,0,"th",17)(10,W,2,1,"td",18),t.bVm(),t.DNE(11,Z,1,0,"tr",21)(12,H,1,0,"tr",22),t.k0s(),t.nrm(13,"mat-paginator",23,0),t.k0s()),2&i){const e=t.XpG();t.R7$(11),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("length",e.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.lJ4(6,N))}}let U=(()=>{class i{constructor(e){var n=this;this.router=e,this.search=new l.MJ(""),this.dataSource=new T,this.cards=(0,t.vPA)([]),this.app=(0,t.WQX)(_.d),this.layout=(0,t.WQX)(I.Y),this.images=["nature","sky","grass","mountains","rivers","glacier","forest"],this.viewStyle=(0,t.geq)("card"),this.checked=(0,t.geq)(!1),this.displayedColumns=["name","description"],this.data=(0,t.WQX)(w.u),this.drafts=(0,t.vPA)([]),this.communities=(0,t.vPA)([]),this.layout.marginOn(),(0,t.QZP)((0,d.A)(function*(){n.app.initialized()&&(setTimeout(()=>{n.table&&(n.dataSource.sort=n.sort,n.dataSource.paginator=n.paginator,n.table.dataSource=n.dataSource)}),yield n.loadCommunities(),yield n.loadDrafts())}));const o=[];for(let r=0;r<this.images.length;r++)o.push({id:"id1",name:`Community ${r+1}`,description:"This is a description of community. We are a great community with many members.",thumbnail:`https://picsum.photos/seed/${this.images[r]}x/200/300`,private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]});o.push({id:"id1",name:"Craft Knitting",description:"Join the craft knitting community to share amazing patterns and socialize with other knitters.",thumbnail:"https://www.studioknitsf.com/wp-content/uploads/2021/02/thumbnails-pattern-book-2021.jpg.webp",private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]}),o.push({id:"id1",name:"Montenegro Liberterian Festival 2024",description:"Join the MTLFest 2024 community group.",thumbnail:"https://optim.tildacdn.one/tild3333-6237-4666-b532-336530656464/-/resize/600x/-/format/webp/FMF_Yellow_Circle.png",private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]}),o.push({id:"id1",name:"Montelibero",description:"Free Society Project Europe.",thumbnail:"https://montelibero.org/wp-content/uploads/2023/04/fspe_logo_3-05-200.png",private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]}),o.push({id:"id1",name:"Liberstad",description:"The Free City of Liberstad",thumbnail:"https://free-communities.org/wp-content/uploads/2023/10/liberstad-flag-10.23.webp",private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]}),this.cards.set(o),this.dataSource.data=o}open(e){this.router.navigate(["/community",e])}join(e){this.router.navigate(["/community",e],{queryParams:{join:!0}})}ngOnInit(){this.layout.resetActions()}ngAfterViewInit(){}loadDrafts(){var e=this;return(0,d.A)(function*(){const n=yield e.data.load({type:"community",status:"draft"});e.drafts.set(n)})()}loadCommunities(){var e=this;return(0,d.A)(function*(){const n=yield e.data.load({type:"community",status:"active"});e.communities.set(n)})()}createTest(){var e=this;return(0,d.A)(function*(){const n={type:"community",status:"draft"},o=yield e.data.save({name:"Test Community",description:"This is a test community."},n);console.log("Community Data Record:",o),yield e.data.update(o.record,{name:"Test Community 2",description:"This is a test community 2."},n);const r=yield e.data.load(n);console.log("Community Data Records:",r)})()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(f.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-communities"]],viewQuery:function(n,o){if(1&n&&(t.GBs(h.iy,5),t.GBs(u.B4,5),t.GBs(m.Zl,5)),2&n){let r;t.mGM(r=t.lsd())&&(o.paginator=r.first),t.mGM(r=t.lsd())&&(o.sort=r.first),t.mGM(r=t.lsd())&&(o.table=r.first)}},inputs:{viewStyle:[1,"viewStyle"],checked:[1,"checked"]},outputs:{viewStyle:"viewStyleChange",checked:"checkedChange"},standalone:!0,features:[t.aNF],decls:16,vars:5,consts:[["paginator",""],[1,"toolbar-actions","margin-bottom"],[1,"flex"],["type","button","mat-button","",3,"routerLink"],[1,"toolbar-spacer"],["type","search","placeholder","Filter communities",1,"search-input"],["hideSingleSelectionIndicator","true",3,"ngModelChange","ngModel"],["value","card"],["value","table"],[1,"container","responsive-grid"],[1,"mat-elevation-z8"],[3,"routerLink"],[1,"link",3,"routerLink"],["mat-card-image","",3,"src"],["mat-button","",3,"click"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.j41(0,"mat-card",1)(1,"mat-card-content",2)(2,"button",3)(3,"mat-icon"),t.EFF(4,"add"),t.k0s(),t.EFF(5," Create "),t.k0s(),t.j41(6,"span",4),t.nrm(7,"input",5),t.k0s(),t.j41(8,"mat-button-toggle-group",6),t.mxI("ngModelChange",function(g){return t.DH7(o.viewStyle,g)||(o.viewStyle=g),g}),t.j41(9,"mat-button-toggle",7),t.EFF(10,"Cards"),t.k0s(),t.j41(11,"mat-button-toggle",8),t.EFF(12,"Table"),t.k0s()()()(),t.DNE(13,V,10,0,"mat-card",1)(14,X,5,0,"div",9)(15,K,15,7,"div",10)),2&n&&(t.R7$(2),t.Y8G("routerLink",t.lJ4(4,G)),t.R7$(6),t.R50("ngModel",o.viewStyle),t.R7$(5),t.vxM(o.drafts().length>0?13:-1),t.R7$(),t.vxM("card"==o.viewStyle()?14:15))},dependencies:[f.iI,f.Wk,p.Vg,p.ec,p.pc,v.m_,v.An,F.fS,j.RG,l.X1,l.BC,R.MD,y.Hl,y.$z,c.Hu,c.RN,c.YY,c.m2,c.MM,c.kF,c.dh,m.tP,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,h.Ou,h.iy,u.NQ,u.B4,u.aE,$.mV,l.YN,l.vS,D.s5],styles:[".search-input[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover}.responsive-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:24px}"]})}}return i})()}}]);