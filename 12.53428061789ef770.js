"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[12],{88012:(C,l,r)=>{r.r(l),r.d(l,{PasswordComponent:()=>g});var d=r(10467),n=r(93953),u=r(88834),s=r(89417),_=r(9183),i=r(53719),p=r(99631),E=r(99213),c=r(27413),P=r(18498);function w(o,m){1&o&&n.nrm(0,"mat-spinner",4)}function v(o,m){1&o&&(n.j41(0,"span"),n.EFF(1,"Save new password"),n.k0s())}function h(o,m){1&o&&(n.j41(0,"mat-error"),n.EFF(1,"Password is "),n.j41(2,"strong"),n.EFF(3,"invalid"),n.k0s()())}let g=(()=>{class o{constructor(t,a){this.identityService=t,this.router=a,this.passwordInputPrevious=new s.MJ("",s.k0.required),this.passwordInput=new s.MJ("",s.k0.required),this.passwordInputRepeat=new s.MJ("",s.k0.required),this.unlocking=(0,n.vPA)(!1),this.invalidPassword=(0,n.vPA)(!1)}changePassword(t,a,e){var f=this;return(0,d.A)(function*(){if(a!=e)throw new Error("Passwords do not match");t||(t="insecure-static-phrase"),yield f.identityService.changePassword(t,a),console.log("Password changed")})()}onSubmit(){var t=this;return(0,d.A)(function*(){if(t.unlocking.set(!0),t.passwordInput.value!==t.passwordInputRepeat.value)throw t.invalidPassword.set(!0),t.unlocking.set(!1),console.error("Passwords do not match"),new Error("Passwords do not match");try{yield t.changePassword(t.passwordInputPrevious.value,t.passwordInput.value,t.passwordInputRepeat.value)}catch(a){return console.error(a),t.invalidPassword.set(!0),void t.unlocking.set(!1)}t.invalidPassword.set(!1),t.unlocking.set(!1),t.router.navigate(["/account","did:dht:umj7apgmkodtrb7mdpjo4h7xinqdnatzgy38j7wi67k9c7sdns1o"])})()}static#n=this.\u0275fac=function(a){return new(a||o)(n.rXU(c.K),n.rXU(P.Ix))};static#t=this.\u0275cmp=n.VBU({type:o,selectors:[["app-password"]],standalone:!0,features:[n.aNF],decls:23,vars:6,consts:[[3,"ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","type","password",3,"formControl"],["mat-flat-button","","type","submit","color","primary",3,"disabled"],["diameter","20"]],template:function(a,e){1&a&&(n.j41(0,"h1"),n.EFF(1,"Change your password"),n.k0s(),n.j41(2,"form",0),n.bIt("ngSubmit",function(){return e.onSubmit()}),n.j41(3,"mat-form-field",1)(4,"mat-label"),n.EFF(5,"Enter your old password"),n.k0s(),n.nrm(6,"input",2),n.k0s(),n.nrm(7,"br"),n.j41(8,"mat-form-field",1)(9,"mat-label"),n.EFF(10,"Enter your new password"),n.k0s(),n.nrm(11,"input",2),n.k0s(),n.nrm(12,"br"),n.j41(13,"mat-form-field",1)(14,"mat-label"),n.EFF(15,"Repeat your new password"),n.k0s(),n.nrm(16,"input",2),n.k0s(),n.EFF(17," \xa0 "),n.j41(18,"button",3),n.DNE(19,w,1,0,"mat-spinner",4)(20,v,2,0,"span"),n.k0s(),n.j41(21,"p"),n.DNE(22,h,4,0,"mat-error"),n.k0s()()),2&a&&(n.R7$(6),n.Y8G("formControl",e.passwordInputPrevious),n.R7$(5),n.Y8G("formControl",e.passwordInput),n.R7$(5),n.Y8G("formControl",e.passwordInputRepeat),n.R7$(2),n.Y8G("disabled",!(e.passwordInput.valid&&!e.unlocking())),n.R7$(),n.vxM(e.unlocking()?19:20),n.R7$(3),n.vxM(e.invalidPassword()?22:-1))},dependencies:[s.YN,s.qT,s.me,s.BC,s.cb,s.cV,_.D6,_.LG,s.X1,s.l_,i.RG,i.rl,i.nJ,i.TL,p.fS,p.fg,u.Hl,u.$z,E.m_],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]})}return o})()}}]);