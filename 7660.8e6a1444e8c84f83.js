"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7660],{47660:(T,m,n)=>{n.r(m),n.d(m,{RolesComponent:()=>v});var s=n(10467),t=n(54438),h=n(60385),f=n(98703),C=n(60177),d=n(25596),u=n(88834),g=n(99213),E=n(30046),P=n(52778),_=n(34635),p=n(69314),O=n(77494);function D(l,M){if(1&l){const e=t.RV6();t.j41(0,"mat-card",0)(1,"mat-card-content")(2,"p"),t.EFF(3),t.nrm(4,"br"),t.EFF(5),t.nrm(6,"br"),t.EFF(7),t.nI1(8,"ago"),t.k0s(),t.nrm(9,"app-profile-header",1),t.k0s(),t.j41(10,"mat-card-actions",2)(11,"button",3),t.bIt("click",function(){const o=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.deleteRole(o))}),t.EFF(12,"DELETE"),t.k0s()()()}if(2&l){const e=M.$implicit;t.R7$(3),t.SpI(" App: ",e.record.protocol,""),t.R7$(2),t.SpI(" Role: ",e.record.protocolPath,""),t.R7$(2),t.SpI(" Assigned: ",t.bMT(8,5,e.record.dateCreated)," "),t.R7$(2),t.Y8G("did",e.record.recipient),t.R7$(2),t.Y8G("disabled",e.loading)}}function R(l,M){1&l&&t.EFF(0," No roles found. ")}let v=(()=>{class l{constructor(){var e=this;this.app=(0,t.WQX)(P.d),this.identity=(0,t.WQX)(_.K),this.roles=(0,t.vPA)([]),(0,t.QZP)((0,s.A)(function*(){e.app.initialized()&&(yield e.loadRoles())}))}deleteRole(e){var a=this;return(0,s.A)(function*(){const o=e.record.recipient;yield e.record.delete(),e.record.send(o),e.record.send(a.identity.did),a.roles.set(a.roles().filter(i=>i.id!==e.id))})()}loadRoles(){var e=this;return(0,s.A)(function*(){const a=[],{records:o}=yield e.identity.web5.dwn.records.query({message:{filter:{tags:{role:!0}},dateSort:O.U0.CreatedDescending}});for(let i of o){const r=yield i.data.json();a.push({record:i,data:r,id:i.id})}return console.log(a),e.roles.set(a),a})()}assignRole(){var e=this;return(0,s.A)(function*(){const a="did:dht:xmwcc957onoxapf4yr61trknii4jga3is4fgtfoin8zdbg9iewro",{record:r,status:c}=yield e.identity.web5.dwn.records.create({data:{},message:{tags:{role:!0},recipient:a,protocol:p.Q.protocol,protocolPath:"collaborator",schema:p.Q.types.collaborator.schema,dataFormat:p.Q.types.collaborator.dataFormats[0]}});r?.send(a),console.log("Status:",c),console.log("Record:",r)})()}static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-roles"]],standalone:!0,features:[t.aNF],decls:9,vars:1,consts:[["appearance","outlined",1,"role-card"],[3,"did"],[1,"full-width-actions"],["mat-button","",1,"full-width-button",3,"click","disabled"]],template:function(a,o){1&a&&(t.j41(0,"h1"),t.EFF(1,"Roles Management"),t.k0s(),t.j41(2,"mat-card")(3,"mat-card-content"),t.EFF(4,"Manage all the roles in every app that you have assigned other users on Ariton."),t.k0s()(),t.nrm(5,"br"),t.Z7z(6,D,13,7,"mat-card",0,t.fX1,!1,R,1,0)),2&a&&(t.R7$(6),t.Dyx(o.roles()))},dependencies:[h.w,f.g,C.MD,d.Hu,d.RN,d.YY,d.m2,u.Hl,u.$z,g.m_,E.iI],styles:[".card-icon[_ngcontent-%COMP%]{font-size:3em}.card-notification[_ngcontent-%COMP%]{margin-bottom:1em}.notifications-title[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}.notifications-card[_ngcontent-%COMP%]{max-width:600px;width:100%}.card-notification[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.notification-description[_ngcontent-%COMP%]{margin-bottom:1em}.full-width-actions[_ngcontent-%COMP%]{width:100%;display:flex}.full-width-button[_ngcontent-%COMP%]{flex-grow:1}.role-card[_ngcontent-%COMP%]{margin-bottom:.5em}"]})}}return l})()},60385:(T,m,n)=>{n.d(m,{w:()=>M});var s=n(10467),t=n(54438),h=n(34635),f=n(25596),C=n(39434),d=n(345),u=n(78013),g=n(33347),E=n(14823),P=n(30046);const _=e=>["/profile",e];function p(e,a){if(1&e&&(t.nrm(0,"img",0),t.nI1(1,"safeResourceUrl")),2&e){const o=t.XpG();t.Y8G("routerLink",t.eq3(4,_,o.did()))("src",t.bMT(1,2,o.data().avatar),t.B4B)}}function O(e,a){if(1&e&&t.nrm(0,"img",1),2&e){const o=t.XpG();t.Y8G("routerLink",t.eq3(2,_,o.did()))("src","/avatar-placeholder.png",t.B4B)}}function D(e,a){if(1&e&&t.EFF(0),2&e){let o;const i=t.XpG(2);t.SpI(" (",null==(o=i.data().profile)?null:o.title,") ")}}function R(e,a){if(1&e&&(t.j41(0,"a",3),t.EFF(1),t.DNE(2,D,1,1),t.k0s()),2&e){let o,i;const r=t.XpG();t.Y8G("routerLink",t.eq3(3,_,r.did())),t.R7$(),t.SpI("",null==(o=r.data().profile)?null:o.name," "),t.R7$(),t.vxM(null!=(i=r.data().profile)&&i.title?2:-1)}}function v(e,a){if(1&e&&t.EFF(0),2&e){let o;const i=t.XpG(2);t.SpI(" (",null==(o=i.data().profile)?null:o.title,") ")}}function l(e,a){if(1&e&&(t.j41(0,"em")(1,"a",3),t.EFF(2,"No name set "),t.DNE(3,v,1,1),t.k0s()()),2&e){let o;const i=t.XpG();t.R7$(),t.Y8G("routerLink",t.eq3(2,_,i.did())),t.R7$(2),t.vxM(null!=(o=i.data().profile)&&o.title?3:-1)}}let M=(()=>{class e{constructor(){this.identity=(0,t.WQX)(h.K),this.profile=(0,t.WQX)(C.p),this.sanitizer=(0,t.WQX)(d.up),this.did=t.hFB.required(),this.data=(0,t.vPA)({})}ngAfterViewInit(){var o=this;return(0,s.A)(function*(){if(o.did()){let i=yield o.profile.loadProfile(o.did());o.data.set(i)}})()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-profile-header"]],inputs:{did:[1,"did"]},standalone:!0,features:[t.aNF],decls:10,vars:9,consts:[["mat-card-avatar","","onerror","this.src='/avatar-placeholder.png';this.onerror='';",1,"profile-thumbnail",3,"routerLink","src"],["mat-card-avatar","",1,"profile-thumbnail",3,"routerLink","src"],[1,"profile-header-title"],[3,"routerLink"],[1,"profile-header-subtitle"],[3,"routerLink","matTooltip"]],template:function(i,r){if(1&i&&(t.DNE(0,p,2,6,"img",0)(1,O,1,4,"img",1),t.j41(2,"div")(3,"div",2),t.DNE(4,R,3,5,"a",3)(5,l,4,4,"em"),t.k0s(),t.j41(6,"div",4)(7,"a",5),t.EFF(8),t.nI1(9,"did"),t.k0s()()()),2&i){let c;t.vxM(r.data().avatar?0:1),t.R7$(4),t.vxM(null!=(c=r.data().profile)&&c.name?4:5),t.R7$(3),t.Y8G("routerLink",t.eq3(7,_,r.did()))("matTooltip",r.did()),t.R7$(),t.JRh(t.bMT(9,5,r.did()))}},dependencies:[P.iI,P.Wk,E.uc,E.oV,f.Hu,f.QG,u.d,g.k],styles:[".profile-thumbnail[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;margin-right:1em}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]{display:flex}.profile-header-title[_ngcontent-%COMP%]{font-size:1.4em}.profile-header-subtitle[_ngcontent-%COMP%]{font-size:1em}"]})}}return e})()}}]);