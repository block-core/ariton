"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7880],{17880:(P,d,o)=>{o.r(d),o.d(d,{AccountComponent:()=>D});var r=o(10467),t=o(54438),l=o(88834),f=o(25596),s=o(30046),y=o(37064),v=o(36815),h=o(52778),m=o(14823),p=o(99213),A=o(53719),u=o(89417),E=o(99631);function g(c,C){if(1&c){const n=t.RV6();t.j41(0,"mat-form-field",4)(1,"input",5),t.mxI("ngModelChange",function(i){t.eBV(n);const a=t.XpG(2);return t.DH7(a.title,i)||(a.title=i),t.Njj(i)}),t.bIt("keydown.enter",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.saveAccount())}),t.k0s()(),t.j41(2,"button",6),t.bIt("click",function(){t.eBV(n);const i=t.XpG(2);return t.Njj(i.saveAccount())}),t.j41(3,"mat-icon"),t.EFF(4,"save"),t.k0s()()}if(2&c){const n=t.XpG(2);t.R7$(),t.R50("ngModel",n.title)}}function I(c,C){if(1&c&&t.EFF(0),2&c){const n=t.XpG(2);t.SpI(" ",n.currentIdentity.metadata.name," ")}}function M(c,C){if(1&c){const n=t.RV6();t.j41(0,"h1"),t.DNE(1,g,5,1)(2,I,1,1),t.k0s(),t.j41(3,"p",0),t.EFF(4),t.k0s(),t.j41(5,"p")(6,"button",1),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.activateAccount())}),t.EFF(7,"Activate account"),t.k0s(),t.EFF(8," \xa0 "),t.j41(9,"button",2),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.backupAccount())}),t.EFF(10,"Backup Account"),t.k0s()(),t.j41(11,"p"),t.nrm(12,"br"),t.j41(13,"button",3),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.deleteAccount())}),t.EFF(14,"Delete Account"),t.k0s()()}if(2&c){const n=t.XpG();t.R7$(),t.vxM(n.editing?1:2),t.R7$(2),t.Y8G("matTooltip",n.currentIdentity.did.uri),t.R7$(),t.JRh(n.currentIdentity.did.uri)}}let D=(()=>{class c{constructor(n){var e=this;this.route=n,this.identity=(0,t.WQX)(y.K),this.layout=(0,t.WQX)(v.Y),this.app=(0,t.WQX)(h.d),this.router=(0,t.WQX)(s.Ix),this.editing=!1,this.layout.marginOn(),(0,t.QZP)((0,r.A)(function*(){e.app.initialized()&&e.route.params.subscribe(function(){var i=(0,r.A)(function*(a){const _=a.id,O=yield e.identity.activeAgent().identity.get({didUri:_});e.currentIdentity=O});return function(a){return i.apply(this,arguments)}}())}))}activateAccount(){var n=this;return(0,r.A)(function*(){yield n.identity.changeAccount(n.currentIdentity.did.uri),n.router.navigate(["/accounts"])})()}editAccount(){this.title=this.currentIdentity?.metadata.name,this.editing=!0}saveAccount(){var n=this;return(0,r.A)(function*(){const e=n.currentIdentity;e.metadata.name=n.title,yield n.identity.store.set({id:e.metadata.uri,data:e.metadata,agent:n.identity.activeAgent(),tenant:e.metadata.tenant,preventDuplicates:!0,useCache:!0}),n.editing=!1})()}backupAccount(){var n=this;return(0,r.A)(function*(){const e=yield n.currentIdentity?.export();if(e){const i=new Blob([JSON.stringify(e)],{type:"application/json"}),a=URL.createObjectURL(i),_=document.createElement("a");_.href=a,_.download="portableIdentity.json",document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(a)}})()}deleteAccount(){var n=this;return(0,r.A)(function*(){yield n.identity.activeAgent().identity.delete({didUri:n.currentIdentity.did.document.id}),n.router.navigate(["/accounts"])})()}static{this.\u0275fac=function(e){return new(e||c)(t.rXU(s.nX))}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["app-account"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[1,"ellipsis",3,"matTooltip"],["mat-flat-button","",3,"click"],["mat-button","",3,"click"],["mat-flat-button","",1,"warning-button",3,"click"],["subscriptSizing","dynamic"],["matInput","",3,"ngModelChange","keydown.enter","ngModel"],["mat-icon-button","",3,"click"]],template:function(e,i){1&e&&t.DNE(0,M,15,3),2&e&&t.vxM(i.currentIdentity?0:-1)},dependencies:[f.Hu,l.Hl,l.$z,l.iY,A.RG,A.rl,u.X1,u.me,u.BC,E.fS,E.fg,u.YN,u.vS,p.m_,p.An,m.uc,m.oV]})}}return c})()}}]);