"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6702],{6702:(K,g,a)=>{a.r(g),a.d(g,{CommunitiesComponent:()=>_});var C=a(10467),t=a(54438),u=a(65571),v=a(99213),F=a(99631),S=a(53719),c=a(89417),T=a(60177),d=a(2042),p=a(96695),r=a(9159),l=a(25596),y=a(88834),E=a(45024),j=a(96354),R=a(57786),x=a(7673);class k extends E.qS{constructor(){super()}connect(){if(this.paginator&&this.sort)return(0,R.h)((0,x.of)(this.data),this.paginator.page,this.sort.sortChange).pipe((0,j.T)(()=>this.getPagedData(this.getSortedData([...this.data]))));throw Error("Please set the paginator and sort on the data source before connecting.")}disconnect(){}getPagedData(o){return this.paginator?o.splice(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize):o}getSortedData(o){return this.sort&&this.sort.active&&""!==this.sort.direction?o.sort((e,n)=>{const s="asc"===this.sort?.direction;switch(this.sort?.active){case"name":return b(e.name,n.name,s);case"id":return b(+e.id,+n.id,s);default:return 0}}):o}}function b(i,o,e){return(i<o?-1:1)*(e?1:-1)}var h=a(30046),D=a(30450),w=a(55911),$=a(5363),M=a(36815),G=a(85297);const I=()=>["/communities","create"],z=i=>["/communities","create",i],N=()=>[5,10,20];function Y(i,o){if(1&i&&(t.j41(0,"a",12),t.EFF(1),t.k0s(),t.EFF(2," - Awaiting approval"),t.nrm(3,"br")),2&i){const e=o.$implicit;t.Y8G("routerLink",t.eq3(2,z,e.id)),t.R7$(),t.JRh(e.data.name)}}function B(i,o){if(1&i&&(t.j41(0,"mat-card",1)(1,"mat-card-content",2)(2,"strong"),t.EFF(3,"NOTICE"),t.k0s(),t.j41(4,"div"),t.EFF(5," You have communities in draft mode. Please review any status update on their verification status. "),t.nrm(6,"br")(7,"br"),t.Z7z(8,Y,4,4,null,null,t.fX1),t.k0s()()()),2&i){const e=t.XpG();t.R7$(8),t.Dyx(e.drafts)}}function P(i,o){if(1&i){const e=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.nrm(4,"br")(5,"img",13),t.j41(6,"mat-card-content"),t.nrm(7,"br"),t.j41(8,"p"),t.EFF(9),t.k0s()(),t.j41(10,"mat-card-actions")(11,"button",14),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.open("did:dht:my6nm5s1n9xmuuh5yixe668k7xbkmmuddzatn1fojzgdg5f5to8y"))}),t.EFF(12,"JOIN"),t.k0s(),t.j41(13,"button",14),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.open("did:dht:my6nm5s1n9xmuuh5yixe668k7xbkmmuddzatn1fojzgdg5f5to8y"))}),t.EFF(14,"PREVIEW"),t.k0s()()()}if(2&i){const e=o.$implicit;t.R7$(3),t.SpI("",e.name," "),t.R7$(2),t.Y8G("src",e.thumbnail,t.B4B),t.R7$(4),t.SpI(" ",e.description," ")}}function V(i,o){if(1&i&&(t.j41(0,"div",10),t.Z7z(1,P,15,3,"mat-card",null,t.fX1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Dyx(e.cards())}}function X(i,o){1&i&&(t.j41(0,"th",24),t.EFF(1,"Id"),t.k0s())}function J(i,o){if(1&i&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&i){const e=o.$implicit;t.R7$(),t.JRh(e.id)}}function L(i,o){1&i&&(t.j41(0,"th",24),t.EFF(1,"Name"),t.k0s())}function O(i,o){if(1&i&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&i){const e=o.$implicit;t.R7$(),t.JRh(e.name)}}function A(i,o){1&i&&(t.j41(0,"th",24),t.EFF(1,"Description"),t.k0s())}function Q(i,o){if(1&i&&(t.j41(0,"td",25),t.EFF(1),t.k0s()),2&i){const e=o.$implicit;t.R7$(),t.JRh(e.description)}}function H(i,o){1&i&&t.nrm(0,"tr",26)}function W(i,o){1&i&&t.nrm(0,"tr",27)}function Z(i,o){if(1&i&&(t.j41(0,"div",11)(1,"table",15),t.qex(2,16),t.DNE(3,X,2,0,"th",17)(4,J,2,1,"td",18),t.bVm(),t.qex(5,19),t.DNE(6,L,2,0,"th",17)(7,O,2,1,"td",18),t.bVm(),t.qex(8,20),t.DNE(9,A,2,0,"th",17)(10,Q,2,1,"td",18),t.bVm(),t.DNE(11,H,1,0,"tr",21)(12,W,1,0,"tr",22),t.k0s(),t.nrm(13,"mat-paginator",23,0),t.k0s()),2&i){const e=t.XpG();t.R7$(11),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(),t.Y8G("length",e.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.lJ4(6,N))}}let _=(()=>{class i{constructor(e){this.router=e,this.search=new c.MJ(""),this.dataSource=new k,this.cards=(0,t.vPA)([]),this.app=(0,t.WQX)($.d),this.layout=(0,t.WQX)(M.Y),this.images=["nature","sky","grass","mountains","rivers","glacier","forest"],this.viewStyle=(0,t.geq)("card"),this.checked=(0,t.geq)(!1),this.displayedColumns=["name","description"],this.data=(0,t.WQX)(G.u),this.drafts=[],this.layout.marginOn(),(0,t.QZP)(()=>{this.app.initialized()&&(setTimeout(()=>{this.table&&(this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.table.dataSource=this.dataSource)}),this.loadDrafts())});const n=[];for(let s=0;s<this.images.length;s++)n.push({id:"id1",name:`Community ${s+1}`,description:"This is a description of community. We are a great community with many members.",thumbnail:`https://picsum.photos/seed/${this.images[s]}x/200/300`,private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]});n.push({id:"id1",name:"Craft Knitting",description:"Join the craft knitting community to share amazing patterns and socialize with other knitters.",thumbnail:"https://www.studioknitsf.com/wp-content/uploads/2021/02/thumbnails-pattern-book-2021.jpg.webp",private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]}),n.push({id:"id1",name:"Montenegro Liberterian Festival 2024",description:"Join the MTLFest 2024 community group.",thumbnail:"https://optim.tildacdn.one/tild3333-6237-4666-b532-336530656464/-/resize/600x/-/format/webp/FMF_Yellow_Circle.png",private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]}),n.push({id:"id1",name:"Montelibero",description:"Free Society Project Europe.",thumbnail:"https://montelibero.org/wp-content/uploads/2023/04/fspe_logo_3-05-200.png",private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]}),n.push({id:"id1",name:"Liberstad",description:"The Free City of Liberstad",thumbnail:"https://free-communities.org/wp-content/uploads/2023/10/liberstad-flag-10.23.webp",private:!1,visibility:"public",type:"generic",features:{discussion:!0,members:!0,events:!0,media:!0,files:!0},apps:["events","media","files"]}),this.cards.set(n),this.dataSource.data=n}open(e){this.router.navigate(["community",e])}ngOnInit(){this.layout.resetActions()}ngAfterViewInit(){}loadDrafts(){var e=this;return(0,C.A)(function*(){const n=yield e.data.load({type:"community",status:"draft"});console.log("Draft Entries:",n),e.drafts=n})()}createTest(){var e=this;return(0,C.A)(function*(){const n={type:"community",status:"draft"},s=yield e.data.save({name:"Test Community",description:"This is a test community."},n);console.log("Community Data Record:",s),yield e.data.update(s.record,{name:"Test Community 2",description:"This is a test community 2."},n);const m=yield e.data.load(n);console.log("Community Data Records:",m)})()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(h.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-communities"]],viewQuery:function(n,s){if(1&n&&(t.GBs(p.iy,5),t.GBs(d.B4,5),t.GBs(r.Zl,5)),2&n){let m;t.mGM(m=t.lsd())&&(s.paginator=m.first),t.mGM(m=t.lsd())&&(s.sort=m.first),t.mGM(m=t.lsd())&&(s.table=m.first)}},inputs:{viewStyle:[1,"viewStyle"],checked:[1,"checked"]},outputs:{viewStyle:"viewStyleChange",checked:"checkedChange"},standalone:!0,features:[t.aNF],decls:20,vars:5,consts:[["paginator",""],[1,"toolbar-actions","margin-bottom"],[1,"flex"],["type","button","mat-button","",3,"routerLink"],["type","button","mat-button","",3,"click"],[1,"toolbar-spacer"],["type","search","placeholder","Filter communities",1,"search-input"],["hideSingleSelectionIndicator","true",3,"ngModelChange","ngModel"],["value","card"],["value","table"],[1,"container","responsive-grid"],[1,"mat-elevation-z8"],[3,"routerLink"],["mat-card-image","",3,"src"],["mat-button","",3,"click"],["mat-table","","matSort","","aria-label","Elements",1,"full-width-table"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(t.j41(0,"mat-card",1)(1,"mat-card-content",2)(2,"button",3)(3,"mat-icon"),t.EFF(4,"add"),t.k0s(),t.EFF(5," Create "),t.k0s(),t.j41(6,"button",4),t.bIt("click",function(){return s.createTest()}),t.j41(7,"mat-icon"),t.EFF(8,"add"),t.k0s(),t.EFF(9," TEST "),t.k0s(),t.j41(10,"span",5),t.nrm(11,"input",6),t.k0s(),t.j41(12,"mat-button-toggle-group",7),t.mxI("ngModelChange",function(f){return t.DH7(s.viewStyle,f)||(s.viewStyle=f),f}),t.j41(13,"mat-button-toggle",8),t.EFF(14,"Cards"),t.k0s(),t.j41(15,"mat-button-toggle",9),t.EFF(16,"Table"),t.k0s()()()(),t.DNE(17,B,10,0,"mat-card",1)(18,V,3,0,"div",10)(19,Z,15,7,"div",11)),2&n&&(t.R7$(2),t.Y8G("routerLink",t.lJ4(4,I)),t.R7$(10),t.R50("ngModel",s.viewStyle),t.R7$(5),t.vxM(s.drafts?17:-1),t.R7$(),t.vxM("card"==s.viewStyle()?18:19))},dependencies:[h.iI,h.Wk,u.Vg,u.ec,u.pc,v.m_,v.An,F.fS,S.RG,c.X1,c.BC,T.MD,y.Hl,y.$z,l.Hu,l.RN,l.YY,l.m2,l.MM,l.kF,l.dh,r.tP,r.Zl,r.tL,r.ji,r.cC,r.YV,r.iL,r.KS,r.$R,r.YZ,r.NB,p.Ou,p.iy,d.NQ,d.B4,d.aE,D.mV,c.YN,c.vS,w.s5],styles:[".search-input[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover}.responsive-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:24px}"]})}}return i})()}}]);