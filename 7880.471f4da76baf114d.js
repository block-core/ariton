"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7880],{17880:(T,s,e)=>{e.r(s),e.d(s,{AccountComponent:()=>I});var _=e(10467),t=e(54438),u=e(88834),y=e(25596),l=e(30046),C=e(34635),f=e(36815),h=e(96084),d=e(14823),m=e(99213),p=e(53719),r=e(89417),E=e(99631),v=e(26703);function M(a,A){if(1&a){const n=t.RV6();t.j41(0,"mat-form-field",2)(1,"input",3),t.mxI("ngModelChange",function(o){t.eBV(n);const c=t.XpG(2);return t.DH7(c.title,o)||(c.title=o),t.Njj(o)}),t.bIt("keydown.enter",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.saveAccount())}),t.k0s()(),t.j41(2,"button",4),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.saveAccount())}),t.j41(3,"mat-icon"),t.EFF(4,"save"),t.k0s()()}if(2&a){const n=t.XpG(2);t.R7$(),t.R50("ngModel",n.title)}}function g(a,A){if(1&a&&t.EFF(0),2&a){const n=t.XpG(2);t.SpI(" ",n.currentIdentity.metadata.name," ")}}function D(a,A){if(1&a){const n=t.RV6();t.j41(0,"h1"),t.DNE(1,M,5,1)(2,g,1,1),t.k0s(),t.j41(3,"p",0),t.EFF(4),t.k0s(),t.j41(5,"p")(6,"button",1),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.backupAccount())}),t.EFF(7,"Backup Account"),t.k0s()()}if(2&a){const n=t.XpG();t.R7$(),t.vxM(n.editing?1:2),t.R7$(2),t.Y8G("matTooltip",n.currentIdentity.did.uri),t.R7$(),t.JRh(n.currentIdentity.did.uri)}}let I=(()=>{class a{constructor(n){var i=this;this.route=n,this.identity=(0,t.WQX)(C.K),this.layout=(0,t.WQX)(f.Y),this.app=(0,t.WQX)(h.d),this.router=(0,t.WQX)(l.Ix),this.utils=(0,t.WQX)(v.Q),this.editing=!1,this.layout.marginOn(),(0,t.QZP)((0,_.A)(function*(){i.app.initialized()&&i.route.params.subscribe(function(){var o=(0,_.A)(function*(c){const O=c.id,P=yield i.identity.activeAgent().identity.get({didUri:O});i.currentIdentity=P});return function(c){return o.apply(this,arguments)}}())}))}activateAccount(){var n=this;return(0,_.A)(function*(){yield n.identity.changeAccount(n.currentIdentity.did.uri),n.router.navigate(["/accounts"])})()}editAccount(){this.title=this.currentIdentity?.metadata.name,this.editing=!0}saveAccount(){var n=this;return(0,_.A)(function*(){const i=n.currentIdentity;i.metadata.name=n.title,yield n.identity.store.set({id:i.metadata.uri,data:i.metadata,agent:n.identity.activeAgent(),tenant:i.metadata.tenant,preventDuplicates:!0,useCache:!0}),n.editing=!1})()}backupAccount(){var n=this;return(0,_.A)(function*(){const i=yield n.currentIdentity?.export();return n.utils.backupAccount({portableIdentity:i})})()}deleteAccount(){var n=this;return(0,_.A)(function*(){const i=n.currentIdentity.did.document.id,c=n.identity.accounts[i].agent;yield c.sync.stopSync(),delete n.identity.accounts[i],yield c.identity.delete({didUri:i}),n.router.navigate(["/accounts"])})()}static{this.\u0275fac=function(i){return new(i||a)(t.rXU(l.nX))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-account"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[1,"ellipsis",3,"matTooltip"],["mat-button","",3,"click"],["subscriptSizing","dynamic"],["matInput","",3,"ngModelChange","keydown.enter","ngModel"],["mat-icon-button","",3,"click"]],template:function(i,o){1&i&&t.DNE(0,D,8,3),2&i&&t.vxM(o.currentIdentity?0:-1)},dependencies:[y.Hu,u.Hl,u.$z,u.iY,p.RG,p.rl,r.X1,r.me,r.BC,E.fS,E.fg,r.YN,r.vS,m.m_,m.An,d.uc,d.oV]})}}return a})()}}]);