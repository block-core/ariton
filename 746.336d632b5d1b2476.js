(self.webpackChunkapp=self.webpackChunkapp||[]).push([[746],{52191:(xe,O,I)=>{var C=I(40573);const H="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,N=()=>H.now(),v=_=>_===1/0||(_=>_&&_===Math.floor(_)&&_>0&&isFinite(_))(_);class B{constructor({max:T=1/0,ttl:D,updateAgeOnGet:$=!1,checkAgeOnGet:M=!1,noUpdateTTL:F=!1,dispose:k,noDisposeOnSet:j=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,void 0!==D&&!v(D))throw new TypeError("ttl must be positive integer or Infinity if set");if(!v(T))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=D,this.max=T,this.updateAgeOnGet=!!$,this.checkAgeOnGet=!!M,this.noUpdateTTL=!!F,this.noDisposeOnSet=!!j,void 0!==k){if("function"!=typeof k)throw new TypeError("dispose must be function if set");this.dispose=k}this.timer=void 0,this.timerExpiration=void 0}setTimer(T,D){if(this.timerExpiration<T)return;this.timer&&clearTimeout(this.timer);const $=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(const M in this.expirations){this.setTimer(M,M-N());break}},D);$.unref&&$.unref(),this.timerExpiration=T,this.timer=$}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return C.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){const T=this.dispose!==B.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(const[D,$]of T)this.dispose($,D,"delete")}setTTL(T,D=this.ttl){const $=this.expirationMap.get(T);if(void 0!==$){const M=this.expirations[$];!M||M.length<=1?delete this.expirations[$]:this.expirations[$]=M.filter(F=>F!==T)}if(D!==1/0){const M=Math.floor(N()+D);this.expirationMap.set(T,M),this.expirations[M]||(this.expirations[M]=[],this.setTimer(M,D)),this.expirations[M].push(T)}else this.expirationMap.set(T,1/0)}set(T,D,{ttl:$=this.ttl,noUpdateTTL:M=this.noUpdateTTL,noDisposeOnSet:F=this.noDisposeOnSet}={}){if(!v($))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(T)){M||this.setTTL(T,$);const k=this.data.get(T);k!==D&&(this.data.set(T,D),F||this.dispose(k,T,"set"))}else this.setTTL(T,$),this.data.set(T,D);for(;this.size>this.max;)this.purgeToCapacity();return this}has(T){return this.data.has(T)}getRemainingTTL(T){const D=this.expirationMap.get(T);return D===1/0?D:void 0!==D?Math.max(0,Math.ceil(D-N())):0}get(T,{updateAgeOnGet:D=this.updateAgeOnGet,ttl:$=this.ttl,checkAgeOnGet:M=this.checkAgeOnGet}={}){const F=this.data.get(T);if(!M||0!==this.getRemainingTTL(T))return D&&this.setTTL(T,$),F;this.delete(T)}dispose(T,D){}delete(T){const D=this.expirationMap.get(T);if(void 0!==D){const $=this.data.get(T);this.data.delete(T),this.expirationMap.delete(T);const M=this.expirations[D];return M&&(M.length<=1?delete this.expirations[D]:this.expirations[D]=M.filter(F=>F!==T)),this.dispose($,T,"delete"),0===this.size&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(const T in this.expirations){const D=this.expirations[T];if(!(this.size-D.length>=this.max)){const $=this.size-this.max,M=[];for(const F of D.splice(0,$))M.push([F,this.data.get(F)]),this.data.delete(F),this.expirationMap.delete(F);for(const[F,k]of M)this.dispose(k,F,"evict");return}{delete this.expirations[T];const $=[];for(const M of D)$.push([M,this.data.get(M)]),this.data.delete(M),this.expirationMap.delete(M);for(const[M,F]of $)this.dispose(F,M,"evict")}}}get size(){return this.data.size}purgeStale(){const T=Math.ceil(N());for(const D in this.expirations){if("Infinity"===D||D>T)return;const $=[...this.expirations[D]||[]],M=[];delete this.expirations[D];for(const F of $)M.push([F,this.data.get(F)]),this.data.delete(F),this.expirationMap.delete(F);for(const[F,k]of M)this.dispose(k,F,"stale")}0===this.size&&this.cancelTimer()}*entries(){for(const T in this.expirations)for(const D of this.expirations[T])yield[D,this.data.get(D)]}*keys(){for(const T in this.expirations)for(const D of this.expirations[T])yield D}*values(){for(const T in this.expirations)for(const D of this.expirations[T])yield this.data.get(D)}[Symbol.iterator](){return this.entries()}}xe.exports=B},83746:(xe,O,I)=>{"use strict";I.d(O,{K:()=>WF});var C={};I.r(C),I.d(C,{OG:()=>dv,My:()=>hu,bytesToNumberBE:()=>pu,lX:()=>fd,Id:()=>yu,fg:()=>w3,qj:()=>Mi,hexToBytes:()=>mf,aY:()=>Wa,lq:()=>Ga,z:()=>gf,Q5:()=>mu});var H={};I.r(H),I.d(H,{base10:()=>QA});var N={};I.r(N),I.d(N,{base16:()=>eM,base16upper:()=>tM});var G={};I.r(G),I.d(G,{base2:()=>rM});var v={};I.r(v),I.d(v,{base256emoji:()=>aM});var B={};I.r(B),I.d(B,{base32:()=>Zl,base32hex:()=>fM,base32hexpad:()=>hM,base32hexpadupper:()=>pM,base32hexupper:()=>lM,base32pad:()=>dM,base32padupper:()=>uM,base32upper:()=>cM,base32z:()=>yM});var _={};I.r(_),I.d(_,{base36:()=>mM,base36upper:()=>gM});var T={};I.r(T),I.d(T,{base58btc:()=>Pc,base58flickr:()=>vM});var D={};I.r(D),I.d(D,{base64:()=>wM,base64pad:()=>bM,base64url:()=>_M,base64urlpad:()=>xM});var $={};I.r($),I.d($,{base8:()=>EM});var M={};I.r(M),I.d(M,{identity:()=>SM});var F={};I.r(F),I.d(F,{code:()=>IM,decode:()=>BM,encode:()=>PM,name:()=>TM});var k={};I.r(k),I.d(k,{code:()=>kM,decode:()=>CM,encode:()=>OM,name:()=>RM});var j={};I.r(j),I.d(j,{identity:()=>rT});var Z={};I.r(Z),I.d(Z,{sha256:()=>iT,sha512:()=>sT});var q={};I.r(q),I.d(q,{Authorization:()=>wT,AuthorizationDelegatedGrant:()=>bT,AuthorizationOwner:()=>ET,Definitions:()=>CT,EventsFilter:()=>BT,EventsGet:()=>RT,EventsQuery:()=>kT,EventsSubscribe:()=>OT,GeneralJwk:()=>DT,GeneralJws:()=>NT,GenericSignaturePayload:()=>rI,JwkVerificationMethod:()=>$T,MessagesGet:()=>UT,NumberRangeFilter:()=>LT,PaginationCursor:()=>FT,PermissionGrantData:()=>KT,PermissionRequestData:()=>zT,PermissionRevocationData:()=>VT,PermissionsDefinitions:()=>HT,PermissionsScopes:()=>WT,ProtocolDefinition:()=>GT,ProtocolRuleSet:()=>JT,ProtocolsConfigure:()=>YT,ProtocolsQuery:()=>XT,PublicJwk:()=>tI,RecordsDelete:()=>ST,RecordsFilter:()=>eI,RecordsQuery:()=>AT,RecordsRead:()=>QT,RecordsSubscribe:()=>MT,RecordsWrite:()=>TT,RecordsWriteDataEncoded:()=>IT,RecordsWriteSignaturePayload:()=>nI,RecordsWriteUnidentified:()=>PT,StringRangeFilter:()=>iI});var W={};I.r(W),I.d(W,{code:()=>qp,decode:()=>N6,encode:()=>p9,name:()=>h9});var K={};I.r(K),I.d(K,{code:()=>o1,createLink:()=>xP,createNode:()=>_P,decode:()=>fh,encode:()=>Md,name:()=>SP,prepare:()=>Ad,validate:()=>o_});var J={};I.r(J),I.d(J,{base10:()=>eB});var X={};I.r(X),I.d(X,{base16:()=>tB,base16upper:()=>rB});var Q={};I.r(Q),I.d(Q,{base2:()=>nB});var oe={};I.r(oe),I.d(oe,{base256emoji:()=>cB});var ne={};I.r(ne),I.d(ne,{base32:()=>mh,base32hex:()=>lB,base32hexpad:()=>pB,base32hexpadupper:()=>yB,base32hexupper:()=>hB,base32pad:()=>uB,base32padupper:()=>fB,base32upper:()=>dB,base32z:()=>mB});var me={};I.r(me),I.d(me,{base36:()=>gB,base36upper:()=>vB});var pe={};I.r(pe),I.d(pe,{base58btc:()=>Oc,base58flickr:()=>wB});var Ie={};I.r(Ie),I.d(Ie,{base64:()=>bB,base64pad:()=>_B,base64url:()=>xB,base64urlpad:()=>EB});var E={};I.r(E),I.d(E,{base8:()=>SB});var a={};I.r(a),I.d(a,{identity:()=>AB});var f={};I.r(f),I.d(f,{code:()=>PB,decode:()=>RB,encode:()=>BB,name:()=>IB});var l={};I.r(l),I.d(l,{code:()=>OB,decode:()=>DB,encode:()=>CB,name:()=>kB});var h={};I.r(h),I.d(h,{identity:()=>iR});var g={};I.r(g),I.d(g,{sha256:()=>oR,sha512:()=>aR});var x={};I.r(x),I.d(x,{code:()=>bh,decode:()=>PR,encode:()=>IR,name:()=>TR});var P={};I.r(P),I.d(P,{base10:()=>Wk});var m={};I.r(m),I.d(m,{base16:()=>Gk,base16upper:()=>qk});var d={};I.r(d),I.d(d,{base2:()=>Zk});var p={};I.r(p),I.d(p,{base256emoji:()=>eO});var V={};I.r(V),I.d(V,{base32:()=>Sh,base32hex:()=>iO,base32hexpad:()=>oO,base32hexpadupper:()=>aO,base32hexupper:()=>sO,base32pad:()=>rO,base32padupper:()=>nO,base32upper:()=>tO,base32z:()=>cO});var L={};I.r(L),I.d(L,{base36:()=>dO,base36upper:()=>uO});var Y={};I.r(Y),I.d(Y,{base58btc:()=>Dc,base58flickr:()=>fO});var le={};I.r(le),I.d(le,{base64:()=>lO,base64pad:()=>hO,base64url:()=>pO,base64urlpad:()=>yO});var Se={};I.r(Se),I.d(Se,{base8:()=>mO});var Oe={};I.r(Oe),I.d(Oe,{identity:()=>gO});var Ve={};I.r(Ve),I.d(Ve,{code:()=>_O,decode:()=>EO,encode:()=>xO,name:()=>bO});var Re={};I.r(Re),I.d(Re,{code:()=>AO,decode:()=>TO,encode:()=>MO,name:()=>SO});var ye={};I.r(ye),I.d(ye,{identity:()=>JO});var ke={};I.r(ke),I.d(ke,{sha256:()=>XO,sha512:()=>QO});var ve=I(49970);const re=function _e(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var c=n.charAt(s),o=c.charCodeAt(0);if(255!==r[o])throw new TypeError(c+" is ambiguous");r[o]=s}var u=n.length,A=n.charAt(0),S=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function ee(te){if("string"!=typeof te)throw new TypeError("Expected String");if(0===te.length)return new Uint8Array;var fe=0;if(" "!==te[fe]){for(var we=0,Pe=0;te[fe]===A;)we++,fe++;for(var Te=(te.length-fe)*S+1>>>0,Ae=new Uint8Array(Te);te[fe];){var Ce=r[te.charCodeAt(fe)];if(255===Ce)return;for(var je=0,Le=Te-1;(0!==Ce||je<Pe)&&-1!==Le;Le--,je++)Ae[Le]=(Ce+=u*Ae[Le]>>>0)%256>>>0,Ce=Ce/256>>>0;if(0!==Ce)throw new Error("Non-zero carry");Pe=je,fe++}if(" "!==te[fe]){for(var ze=Te-Pe;ze!==Te&&0===Ae[ze];)ze++;for(var $e=new Uint8Array(we+(Te-ze)),Ye=we;ze!==Te;)$e[Ye++]=Ae[ze++];return $e}}}return{encode:function R(te){if(te instanceof Uint8Array||(ArrayBuffer.isView(te)?te=new Uint8Array(te.buffer,te.byteOffset,te.byteLength):Array.isArray(te)&&(te=Uint8Array.from(te))),!(te instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===te.length)return"";for(var fe=0,we=0,Pe=0,Te=te.length;Pe!==Te&&0===te[Pe];)Pe++,fe++;for(var Ae=(Te-Pe)*y+1>>>0,Ce=new Uint8Array(Ae);Pe!==Te;){for(var je=te[Pe],Le=0,ze=Ae-1;(0!==je||Le<we)&&-1!==ze;ze--,Le++)Ce[ze]=(je+=256*Ce[ze]>>>0)%u>>>0,je=je/u>>>0;if(0!==je)throw new Error("Non-zero carry");we=Le,Pe++}for(var $e=Ae-we;$e!==Ae&&0===Ce[$e];)$e++;for(var Ye=A.repeat(fe);$e<Ae;++$e)Ye+=n.charAt(Ce[$e]);return Ye},decodeUnsafe:ee,decode:function ae(te){var fe=ee(te);if(fe)return fe;throw new Error(`Non-${t} character`)}}},Be=(new Uint8Array(0),n=>{if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")});class We{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class _t{constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return w(this,t)}}class U{constructor(t){this.decoders=t}or(t){return w(this,t)}decode(t){const i=this.decoders[t[0]];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const w=(n,t)=>new U({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class b{constructor(t,r,i,s){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new We(t,r,i),this.decoder=new _t(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const z=({name:n,prefix:t,encode:r,decode:i})=>new b(n,t,r,i),ie=({prefix:n,name:t,alphabet:r})=>{const{encode:i,decode:s}=re(r,t);return z({prefix:n,name:t,encode:i,decode:c=>Be(s(c))})},qe=({name:n,prefix:t,bitsPerChar:r,alphabet:i})=>z({prefix:t,name:n,encode:s=>((n,t,r)=>{const i="="===t[t.length-1],s=(1<<r)-1;let c="",o=0,u=0;for(let A=0;A<n.length;++A)for(u=u<<8|n[A],o+=8;o>r;)o-=r,c+=t[s&u>>o];if(o&&(c+=t[s&u<<r-o]),i)for(;c.length*r&7;)c+="=";return c})(s,i,r),decode:s=>((n,t,r,i)=>{const s={};for(let y=0;y<t.length;++y)s[t[y]]=y;let c=n.length;for(;"="===n[c-1];)--c;const o=new Uint8Array(c*r/8|0);let u=0,A=0,S=0;for(let y=0;y<c;++y){const R=s[n[y]];if(void 0===R)throw new SyntaxError(`Non-${i} character`);A=A<<r|R,u+=r,u>=8&&(u-=8,o[S++]=255&A>>u)}if(u>=r||255&A<<8-u)throw new SyntaxError("Unexpected end of data");return o})(s,i,r,n)}),rt=(qe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6})),bt=(qe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),new TextEncoder),Mt=new TextDecoder;class Ft{static base64UrlToBytes(t){return rt.baseDecode(t)}static base64UrlToObject(t){const r=rt.baseDecode(t);return Ft.bytesToObject(r)}static bytesToBase64Url(t){return rt.baseEncode(t)}static bytesToString(t){return Mt.decode(t)}static bytesToObject(t){const r=Ft.bytesToString(t);return JSON.parse(r)}static objectToBytes(t){const r=JSON.stringify(t);return bt.encode(r)}static stringToBase64Url(t){const r=bt.encode(t);return rt.baseEncode(r)}static stringToBytes(t){return bt.encode(t)}}var it=I(10467);const mt=2n**255n-19n,Rr=2n**252n+27742317777372353535851937790883648493n,xt=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,It=0x6666666666666666666666666666666666666666666666666666666666666658n,Qr={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:mt,n:Rr,h:8,Gx:xt,Gy:It},Tt=(n="")=>{throw new Error(n)},Pt=n=>"string"==typeof n,kn=(n,t)=>!(n instanceof Uint8Array)||"number"==typeof t&&t>0&&n.length!==t?Tt("Uint8Array expected"):n,Fe=n=>new Uint8Array(n),He=(n,t)=>kn(Pt(n)?wt(n):Fe(n),t),Ze=(n,t=mt)=>{let r=n%t;return r>=0n?r:t+r},Ue=n=>n instanceof pt?n:Tt("Point expected");let Ge;class pt{constructor(t,r,i,s){this.ex=t,this.ey=r,this.ez=i,this.et=s}static fromAffine(t){return new pt(t.x,t.y,1n,Ze(t.x*t.y))}static fromHex(t,r=!0){const{d:i}=Qr,s=(t=He(t,32)).slice();s[31]=-129&t[31];const c=Vt(s);0n===c||(r&&!(0n<c&&c<mt)&&Tt("bad y coord 1"),!r&&!(0n<c&&c<2n**256n)&&Tt("bad y coord 2"));const o=Ze(c*c),u=Ze(o-1n),A=Ze(i*o+1n);let{isValid:S,value:y}=ar(u,A);return S||Tt("bad y coordinate 3"),!!(128&t[31])!=(1n===(1n&y))&&(y=Ze(-y)),new pt(y,c,1n,Ze(y*c))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(t){const{ex:r,ey:i,ez:s}=this,{ex:c,ey:o,ez:u}=Ue(t),A=Ze(r*u),S=Ze(c*s),y=Ze(i*u),R=Ze(o*s);return A===S&&y===R}is0(){return this.equals(dt)}negate(){return new pt(Ze(-this.ex),this.ey,this.ez,Ze(-this.et))}double(){const{ex:t,ey:r,ez:i}=this,{a:s}=Qr,c=Ze(t*t),o=Ze(r*r),u=Ze(2n*Ze(i*i)),A=Ze(s*c),S=t+r,y=Ze(Ze(S*S)-c-o),R=A+o,ee=R-u,ae=A-o,te=Ze(y*ee),fe=Ze(R*ae),we=Ze(y*ae),Pe=Ze(ee*R);return new pt(te,fe,Pe,we)}add(t){const{ex:r,ey:i,ez:s,et:c}=this,{ex:o,ey:u,ez:A,et:S}=Ue(t),{a:y,d:R}=Qr,ee=Ze(r*o),ae=Ze(i*u),te=Ze(c*R*S),fe=Ze(s*A),we=Ze((r+i)*(o+u)-ee-ae),Pe=Ze(fe-te),Te=Ze(fe+te),Ae=Ze(ae-y*ee),Ce=Ze(we*Pe),je=Ze(Te*Ae),Le=Ze(we*Ae),ze=Ze(Pe*Te);return new pt(Ce,je,ze,Le)}mul(t,r=!0){if(0n===t)return!0===r?Tt("cannot multiply by 0"):dt;if("bigint"==typeof t&&0n<t&&t<Rr||Tt("invalid scalar, must be < L"),!r&&this.is0()||1n===t)return this;if(this.equals(Xe))return au(t).p;let i=dt,s=Xe;for(let c=this;t>0n;c=c.double(),t>>=1n)1n&t?i=i.add(c):r&&(s=s.add(c));return i}multiply(t){return this.mul(t)}clearCofactor(){return this.mul(BigInt(Qr.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let t=this.mul(Rr/2n,!1).double();return t=t.add(this),t.is0()}toAffine(){const{ex:t,ey:r,ez:i}=this;if(this.is0())return{x:0n,y:0n};const s=Tr(i);return 1n!==Ze(i*s)&&Tt("invalid inverse"),{x:Ze(t*s),y:Ze(r*s)}}toRawBytes(){const{x:t,y:r}=this.toAffine(),i=Br(r);return i[31]|=1n&t?128:0,i}toHex(){return gt(this.toRawBytes())}}pt.BASE=new pt(xt,It,1n,Ze(xt*It)),pt.ZERO=new pt(0n,1n,1n,0n);const{BASE:Xe,ZERO:dt}=pt,Qt=(n,t)=>n.toString(16).padStart(t,"0"),gt=n=>Array.from(n).map(t=>Qt(t,2)).join(""),wt=n=>{const t=n.length;(!Pt(n)||t%2)&&Tt("hex invalid 1");const r=Fe(t/2);for(let i=0;i<r.length;i++){const s=2*i,c=n.slice(s,s+2),o=Number.parseInt(c,16);(Number.isNaN(o)||o<0)&&Tt("hex invalid 2"),r[i]=o}return r},Br=n=>wt(Qt(n,64)).reverse(),Vt=n=>BigInt("0x"+gt(Fe(kn(n)).reverse())),Zt=(...n)=>{const t=Fe(n.reduce((i,s)=>i+kn(s).length,0));let r=0;return n.forEach(i=>{t.set(i,r),r+=i.length}),t},Tr=(n,t=mt)=>{(0n===n||t<=0n)&&Tt("no inverse n="+n+" mod="+t);let r=Ze(n,t),i=t,s=0n,c=1n,o=1n,u=0n;for(;0n!==r;){const A=i/r,S=i%r,y=s-o*A,R=c-u*A;i=r,r=S,s=o,c=u,o=y,u=R}return 1n===i?Ze(s,t):Tt("no inverse")},dr=(n,t)=>{let r=n;for(;t-- >0n;)r*=r,r%=mt;return r},mr=19681161376707505956807079304988542015446066515923890162744021073123829784752n,ar=(n,t)=>{const r=Ze(t*t*t),s=(n=>{const r=n*n%mt*n%mt,i=dr(r,2n)*r%mt,s=dr(i,1n)*n%mt,c=dr(s,5n)*s%mt,o=dr(c,10n)*c%mt,u=dr(o,20n)*o%mt,A=dr(u,40n)*u%mt,S=dr(A,80n)*A%mt,y=dr(S,80n)*A%mt,R=dr(y,10n)*c%mt;return{pow_p_5_8:dr(R,2n)*n%mt,b2:r}})(n*Ze(r*r*t)).pow_p_5_8;let c=Ze(n*r*s);const o=Ze(t*c*c),u=c,A=Ze(c*mr),S=o===n,y=o===Ze(-n),R=o===Ze(-n*mr);return S&&(c=u),(y||R)&&(c=A),1n===(1n&Ze(c))&&(c=Ze(-c)),{isValid:S||y,value:c}},en=n=>Ze(Vt(n),Rr);let zr;const Wr=(...n)=>ga.sha512Async(...n),_r=(...n)=>"function"==typeof zr?zr(...n):Tt("etc.sha512Sync not set"),Gr=n=>{const t=n.slice(0,32);t[0]&=248,t[31]&=127,t[31]|=64;const r=n.slice(32,64),i=en(t),s=Xe.mul(i),c=s.toRawBytes();return{head:t,prefix:r,scalar:i,point:s,pointBytes:c}},qr=n=>Wr(He(n,32)).then(Gr);function fn(n,t){return n?Wr(t.hashable).then(t.finish):t.finish(_r(t.hashable))}const Fa=function(){var n=(0,it.A)(function*(t,r){const i=He(t),s=yield qr(r);return fn(!0,((n,t,r)=>{const{pointBytes:i,scalar:s}=n,c=en(t),o=Xe.mul(c).toRawBytes();return{hashable:Zt(o,i,r),finish:S=>{const y=Ze(c+en(S)*s,Rr);return kn(Zt(o,Br(y)),64)}}})(s,yield Wr(s.prefix,i),i))});return function(r,i){return n.apply(this,arguments)}}(),ma=function(){var n=(0,it.A)(function*(t,r,i){return fn(!0,((n,t,r)=>{t=He(t),n=He(n,64);const i=pt.fromHex(r,!1),s=pt.fromHex(n.slice(0,32),!1),c=Vt(n.slice(32,64)),o=Xe.mul(c,!1);return{hashable:Zt(s.toRawBytes(),i.toRawBytes(),t),finish:S=>{const y=en(S);return s.add(i.mul(y,!1)).add(o.negate()).clearCofactor().is0()}}})(t,r,i))});return function(r,i,s){return n.apply(this,arguments)}}(),uf=()=>"object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,ga={bytesToHex:gt,hexToBytes:wt,concatBytes:Zt,mod:Ze,invert:Tr,randomBytes:n=>{const t=uf();return t||Tt("crypto.getRandomValues must be defined"),t.getRandomValues(Fe(n))},sha512Async:(n=(0,it.A)(function*(...t){const r=uf();r||Tt("crypto.subtle or etc.sha512Async must be defined");const i=Zt(...t);return Fe(yield r.subtle.digest("SHA-512",i.buffer))}),function(){return n.apply(this,arguments)}),sha512Sync:void 0};var n;Object.defineProperties(ga,{sha512Sync:{configurable:!1,get:()=>zr,set(n){zr||(zr=n)}}});const zg_randomPrivateKey=()=>ga.randomBytes(32),au=n=>{const t=Ge||(Ge=(()=>{const n=[];let r=Xe,i=r;for(let s=0;s<33;s++){i=r,n.push(i);for(let c=1;c<128;c++)i=i.add(r),n.push(i);r=i.double()}return n})()),r=(y,R)=>{let ee=R.negate();return y?ee:R};let i=dt,s=Xe;const u=BigInt(255),S=BigInt(8);for(let y=0;y<33;y++){const R=128*y;let ee=Number(n&u);n>>=S,ee>128&&(ee-=256,n+=1n);const ae=R,te=R+Math.abs(ee)-1,we=ee<0;0===ee?s=s.add(r(y%2!=0,t[ae])):i=i.add(r(we,t[te]))}return{p:i,f:s}};class Ot extends Error{constructor(t,r){super(`${t}: ${r}`),this.code=t,this.name="DwnError"}}var Rt=function(n){return n.AuthenticateJwsMissing="AuthenticateJwsMissing",n.AuthenticateDescriptorCidMismatch="AuthenticateDescriptorCidMismatch",n.AuthenticationMoreThanOneSignatureNotSupported="AuthenticationMoreThanOneSignatureNotSupported",n.AuthorizationAuthorNotOwner="AuthorizationAuthorNotOwner",n.AuthorizationNotGrantedToAuthor="AuthorizationNotGrantedToAuthor",n.ComputeCidCodecNotSupported="ComputeCidCodecNotSupported",n.ComputeCidMultihashNotSupported="ComputeCidMultihashNotSupported",n.DidMethodNotSupported="DidMethodNotSupported",n.DidNotString="DidNotString",n.DidNotValid="DidNotValid",n.DidResolutionFailed="DidResolutionFailed",n.Ed25519InvalidJwk="Ed25519InvalidJwk",n.EventEmitterStreamNotOpenError="EventEmitterStreamNotOpenError",n.EventsSubscribeEventStreamUnimplemented="EventsSubscribeEventStreamUnimplemented",n.GeneralJwsVerifierGetPublicKeyNotFound="GeneralJwsVerifierGetPublicKeyNotFound",n.GeneralJwsVerifierInvalidSignature="GeneralJwsVerifierInvalidSignature",n.GrantAuthorizationGrantExpired="GrantAuthorizationGrantExpired",n.GrantAuthorizationGrantMissing="GrantAuthorizationGrantMissing",n.GrantAuthorizationGrantRevoked="GrantAuthorizationGrantRevoked",n.GrantAuthorizationInterfaceMismatch="GrantAuthorizationInterfaceMismatch",n.GrantAuthorizationMethodMismatch="GrantAuthorizationMethodMismatch",n.GrantAuthorizationNotGrantedForTenant="GrantAuthorizationNotGrantedForTenant",n.GrantAuthorizationNotGrantedToAuthor="GrantAuthorizationNotGrantedToAuthor",n.GrantAuthorizationGrantNotYetActive="GrantAuthorizationGrantNotYetActive",n.HdKeyDerivationPathInvalid="HdKeyDerivationPathInvalid",n.JwsVerifySignatureUnsupportedCrv="JwsVerifySignatureUnsupportedCrv",n.IndexInvalidCursorValueType="IndexInvalidCursorValueType",n.IndexInvalidCursorSortProperty="IndexInvalidCursorSortProperty",n.IndexInvalidSortPropertyInMemory="IndexInvalidSortPropertyInMemory",n.IndexMissingIndexableProperty="IndexMissingIndexableProperty",n.JwsDecodePlainObjectPayloadInvalid="JwsDecodePlainObjectPayloadInvalid",n.MessageGetInvalidCid="MessageGetInvalidCid",n.ParseCidCodecNotSupported="ParseCidCodecNotSupported",n.ParseCidMultihashNotSupported="ParseCidMultihashNotSupported",n.PermissionsProtocolValidateSchemaUnexpectedRecord="PermissionsProtocolValidateSchemaUnexpectedRecord",n.PermissionsProtocolValidateScopeContextIdProhibitedProperties="PermissionsProtocolValidateScopeContextIdProhibitedProperties",n.PermissionsProtocolValidateScopeSchemaProhibitedProperties="PermissionsProtocolValidateScopeSchemaProhibitedProperties",n.PrivateKeySignerUnableToDeduceAlgorithm="PrivateKeySignerUnableToDeduceAlgorithm",n.PrivateKeySignerUnableToDeduceKeyId="PrivateKeySignerUnableToDeduceKeyId",n.PrivateKeySignerUnsupportedCurve="PrivateKeySignerUnsupportedCurve",n.ProtocolAuthorizationActionNotAllowed="ProtocolAuthorizationActionNotAllowed",n.ProtocolAuthorizationActionRulesNotFound="ProtocolAuthorizationActionRulesNotFound",n.ProtocolAuthorizationIncorrectDataFormat="ProtocolAuthorizationIncorrectDataFormat",n.ProtocolAuthorizationIncorrectContextId="ProtocolAuthorizationIncorrectContextId",n.ProtocolAuthorizationIncorrectProtocolPath="ProtocolAuthorizationIncorrectProtocolPath",n.ProtocolAuthorizationDuplicateRoleRecipient="ProtocolAuthorizationDuplicateRoleRecipient",n.ProtocolAuthorizationInvalidSchema="ProtocolAuthorizationInvalidSchema",n.ProtocolAuthorizationInvalidType="ProtocolAuthorizationInvalidType",n.ProtocolAuthorizationMatchingRoleRecordNotFound="ProtocolAuthorizationMatchingRoleRecordNotFound",n.ProtocolAuthorizationMaxSizeInvalid="ProtocolAuthorizationMaxSizeInvalid",n.ProtocolAuthorizationMinSizeInvalid="ProtocolAuthorizationMinSizeInvalid",n.ProtocolAuthorizationMissingContextId="ProtocolAuthorizationMissingContextId",n.ProtocolAuthorizationMissingRuleSet="ProtocolAuthorizationMissingRuleSet",n.ProtocolAuthorizationParentlessIncorrectProtocolPath="ProtocolAuthorizationParentlessIncorrectProtocolPath",n.ProtocolAuthorizationNotARole="ProtocolAuthorizationNotARole",n.ProtocolAuthorizationParentNotFoundConstructingRecordChain="ProtocolAuthorizationParentNotFoundConstructingRecordChain",n.ProtocolAuthorizationProtocolNotFound="ProtocolAuthorizationProtocolNotFound",n.ProtocolAuthorizationQueryWithoutRole="ProtocolAuthorizationQueryWithoutRole",n.ProtocolAuthorizationRoleMissingRecipient="ProtocolAuthorizationRoleMissingRecipient",n.ProtocolAuthorizationTagsInvalidSchema="ProtocolAuthorizationTagsInvalidSchema",n.ProtocolsConfigureDuplicateActorInRuleSet="ProtocolsConfigureDuplicateActorInRuleSet",n.ProtocolsConfigureDuplicateRoleInRuleSet="ProtocolsConfigureDuplicateRoleInRuleSet",n.ProtocolsConfigureInvalidSize="ProtocolsConfigureInvalidSize",n.ProtocolsConfigureInvalidActionMissingOf="ProtocolsConfigureInvalidActionMissingOf",n.ProtocolsConfigureInvalidActionOfNotAllowed="ProtocolsConfigureInvalidActionOfNotAllowed",n.ProtocolsConfigureInvalidActionDeleteWithoutCreate="ProtocolsConfigureInvalidActionDeleteWithoutCreate",n.ProtocolsConfigureInvalidActionUpdateWithoutCreate="ProtocolsConfigureInvalidActionUpdateWithoutCreate",n.ProtocolsConfigureInvalidRecipientOfAction="ProtocolsConfigureInvalidRecipientOfAction",n.ProtocolsConfigureInvalidRuleSetRecordType="ProtocolsConfigureInvalidRuleSetRecordType",n.ProtocolsConfigureInvalidTagSchema="ProtocolsConfigureInvalidTagSchema",n.ProtocolsConfigureQueryNotAllowed="ProtocolsConfigureQueryNotAllowed",n.ProtocolsConfigureRecordNestingDepthExceeded="ProtocolsConfigureRecordNestingDepthExceeded",n.ProtocolsConfigureRoleDoesNotExistAtGivenPath="ProtocolsConfigureRoleDoesNotExistAtGivenPath",n.ProtocolsConfigureUnauthorized="ProtocolsConfigureUnauthorized",n.ProtocolsQueryUnauthorized="ProtocolsQueryUnauthorized",n.RecordsAuthorDelegatedGrantAndIdExistenceMismatch="RecordsAuthorDelegatedGrantAndIdExistenceMismatch",n.RecordsAuthorDelegatedGrantCidMismatch="RecordsAuthorDelegatedGrantCidMismatch",n.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch",n.RecordsAuthorDelegatedGrantNotADelegatedGrant="RecordsAuthorDelegatedGrantNotADelegatedGrant",n.RecordsDecryptNoMatchingKeyEncryptedFound="RecordsDecryptNoMatchingKeyEncryptedFound",n.RecordsDeleteAuthorizationFailed="RecordsDeleteAuthorizationFailed",n.RecordsQueryCreateFilterPublishedSortInvalid="RecordsQueryCreateFilterPublishedSortInvalid",n.RecordsQueryParseFilterPublishedSortInvalid="RecordsQueryParseFilterPublishedSortInvalid",n.RecordsGrantAuthorizationConditionPublicationProhibited="RecordsGrantAuthorizationConditionPublicationProhibited",n.RecordsGrantAuthorizationConditionPublicationRequired="RecordsGrantAuthorizationConditionPublicationRequired",n.RecordsGrantAuthorizationDeleteProtocolScopeMismatch="RecordsGrantAuthorizationDeleteProtocolScopeMismatch",n.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch="RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch",n.RecordsGrantAuthorizationScopeContextIdMismatch="RecordsGrantAuthorizationScopeContextIdMismatch",n.RecordsGrantAuthorizationScopeMissingProtocol="RecordsGrantAuthorizationScopeMissingProtocol",n.RecordsGrantAuthorizationScopeNotRecords="RecordsGrantAuthorizationScopeNotRecords",n.RecordsGrantAuthorizationScopeProtocolMismatch="RecordsGrantAuthorizationScopeProtocolMismatch",n.RecordsGrantAuthorizationScopeProtocolPathMismatch="RecordsGrantAuthorizationScopeProtocolPathMismatch",n.RecordsGrantAuthorizationScopeSchema="RecordsGrantAuthorizationScopeSchema",n.RecordsDerivePrivateKeyUnSupportedCurve="RecordsDerivePrivateKeyUnSupportedCurve",n.RecordsInvalidAncestorKeyDerivationSegment="RecordsInvalidAncestorKeyDerivationSegment",n.RecordsOwnerDelegatedGrantAndIdExistenceMismatch="RecordsOwnerDelegatedGrantAndIdExistenceMismatch",n.RecordsOwnerDelegatedGrantCidMismatch="RecordsOwnerDelegatedGrantCidMismatch",n.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch="RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch",n.RecordsOwnerDelegatedGrantNotADelegatedGrant="RecordsOwnerDelegatedGrantNotADelegatedGrant",n.RecordsProtocolContextDerivationSchemeMissingContextId="RecordsProtocolContextDerivationSchemeMissingContextId",n.RecordsProtocolPathDerivationSchemeMissingProtocol="RecordsProtocolPathDerivationSchemeMissingProtocol",n.RecordsQueryFilterMissingRequiredProperties="RecordsQueryFilterMissingRequiredProperties",n.RecordsReadReturnedMultiple="RecordsReadReturnedMultiple",n.RecordsReadAuthorizationFailed="RecordsReadAuthorizationFailed",n.RecordsSubscribeEventStreamUnimplemented="RecordsSubscribeEventStreamUnimplemented",n.RecordsSubscribeFilterMissingRequiredProperties="RecordsSubscribeFilterMissingRequiredProperties",n.RecordsSchemasDerivationSchemeMissingSchema="RecordsSchemasDerivationSchemeMissingSchema",n.RecordsWriteAttestationIntegrityMoreThanOneSignature="RecordsWriteAttestationIntegrityMoreThanOneSignature",n.RecordsWriteAttestationIntegrityDescriptorCidMismatch="RecordsWriteAttestationIntegrityDescriptorCidMismatch",n.RecordsWriteAttestationIntegrityInvalidPayloadProperty="RecordsWriteAttestationIntegrityInvalidPayloadProperty",n.RecordsWriteAuthorizationFailed="RecordsWriteAuthorizationFailed",n.RecordsWriteCreateMissingSigner="RecordsWriteCreateMissingSigner",n.RecordsWriteCreateDataAndDataCidMutuallyExclusive="RecordsWriteCreateDataAndDataCidMutuallyExclusive",n.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive="RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive",n.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive="RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive",n.RecordsWriteDataCidMismatch="RecordsWriteDataCidMismatch",n.RecordsWriteDataSizeMismatch="RecordsWriteDataSizeMismatch",n.RecordsWriteGetEntryIdUndefinedAuthor="RecordsWriteGetEntryIdUndefinedAuthor",n.RecordsWriteGetInitialWriteNotFound="RecordsWriteGetInitialWriteNotFound",n.RecordsWriteImmutablePropertyChanged="RecordsWriteImmutablePropertyChanged",n.RecordsWriteMissingSigner="RecordsWriteMissingSigner",n.RecordsWriteMissingDataInPrevious="RecordsWriteMissingDataInPrevious",n.RecordsWriteMissingEncodedDataInPrevious="RecordsWriteMissingEncodedDataInPrevious",n.RecordsWriteMissingDataStream="RecordsWriteMissingDataStream",n.RecordsWriteMissingProtocol="RecordsWriteMissingProtocol",n.RecordsWriteMissingSchema="RecordsWriteMissingSchema",n.RecordsWriteOwnerAndTenantMismatch="RecordsWriteOwnerAndTenantMismatch",n.RecordsWriteSignAsOwnerDelegateUnknownAuthor="RecordsWriteSignAsOwnerDelegateUnknownAuthor",n.RecordsWriteSignAsOwnerUnknownAuthor="RecordsWriteSignAsOwnerUnknownAuthor",n.RecordsWriteValidateIntegrityAttestationMismatch="RecordsWriteValidateIntegrityAttestationMismatch",n.RecordsWriteValidateIntegrityContextIdMismatch="RecordsWriteValidateIntegrityContextIdMismatch",n.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload="RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload",n.RecordsWriteValidateIntegrityDateCreatedMismatch="RecordsWriteValidateIntegrityDateCreatedMismatch",n.RecordsWriteValidateIntegrityEncryptionCidMismatch="RecordsWriteValidateIntegrityEncryptionCidMismatch",n.RecordsWriteValidateIntegrityRecordIdUnauthorized="RecordsWriteValidateIntegrityRecordIdUnauthorized",n.SchemaValidatorAdditionalPropertyNotAllowed="SchemaValidatorAdditionalPropertyNotAllowed",n.SchemaValidatorFailure="SchemaValidatorFailure",n.SchemaValidatorSchemaNotFound="SchemaValidatorSchemaNotFound",n.SchemaValidatorUnevaluatedPropertyNotAllowed="SchemaValidatorUnevaluatedPropertyNotAllowed",n.Secp256k1KeyNotValid="Secp256k1KeyNotValid",n.Secp256r1KeyNotValid="Secp256r1KeyNotValid",n.TimestampInvalid="TimestampInvalid",n.UrlProtocolNotNormalized="UrlProtocolNotNormalized",n.UrlProtocolNotNormalizable="UrlProtocolNotNormalizable",n.UrlSchemaNotNormalized="UrlSchemaNotNormalized",n.UrlSchemaNotNormalizable="UrlSchemaNotNormalizable",n}(Rt||{}),Ka=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};function pp(n){if("OKP"!==n.kty||"Ed25519"!==n.crv)throw new Ot(Rt.Ed25519InvalidJwk,"invalid jwk. kty MUST be OKP. crv MUST be Ed25519")}function Cl(n){return{alg:"EdDSA",kty:"OKP",crv:"Ed25519",x:Ft.bytesToBase64Url(n)}}const Vg={sign:(n,t)=>Ka(void 0,void 0,void 0,function*(){pp(t);const r=Ft.base64UrlToBytes(t.d);return Fa(n,r)}),verify:(n,t,r)=>Ka(void 0,void 0,void 0,function*(){pp(r);const i=Ft.base64UrlToBytes(r.x);return ma(t,n,i)}),generateKeyPair:()=>Ka(void 0,void 0,void 0,function*(){const n=zg_randomPrivateKey(),t=yield(n=>qr(n).then(t=>t.pointBytes))(n),r=Ft.bytesToBase64Url(n),i=Cl(t);return{publicJwk:i,privateJwk:Object.assign(Object.assign({},i),{d:r})}}),publicKeyToJwk:n=>Ka(void 0,void 0,void 0,function*(){return Cl(n)})},Eo=2n**256n,Js=Eo-0x1000003d1n,pi=Eo-0x14551231950b75fc4402da1732fc9bebfn,cu=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Sc=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,Hg={p:Js,n:pi,a:0n,b:7n,Gx:cu,Gy:Sc},yi=32,dd=n=>sr(sr(n*n)*n+Hg.b),On=(n="")=>{throw new Error(n)},ff=n=>"bigint"==typeof n,yp=n=>"string"==typeof n,Dl=n=>ff(n)&&0n<n&&n<Js,lf=n=>ff(n)&&0n<n&&n<pi,Wg=(n,t)=>!(n instanceof Uint8Array)||"number"==typeof t&&t>0&&n.length!==t?On("Uint8Array expected"):n,uo=n=>new Uint8Array(n),za=(n,t)=>Wg(yp(n)?Nl(n):uo(n),t),sr=(n,t=Js)=>{let r=n%t;return r>=0n?r:t+r},Gg=n=>n instanceof Fi?n:On("Point expected");let qg;class Fi{constructor(t,r,i){this.px=t,this.py=r,this.pz=i}static fromAffine(t){return new Fi(t.x,t.y,1n)}static fromHex(t){let r;const i=(t=za(t))[0],s=t.subarray(1),c=gp(s,0,yi),o=t.length;if(33===o&&[2,3].includes(i)){Dl(c)||On("Point hex invalid: x not FE");let u=TS(dd(c));!(1&~i)!=(1n===(1n&u))&&(u=sr(-u)),r=new Fi(c,u,1n)}return 65===o&&4===i&&(r=new Fi(c,gp(s,yi,2*yi),1n)),r?r.ok():On("Point is not on curve")}static fromPrivateKey(t){return Ac.mul(Ll(t))}get x(){return this.aff().x}get y(){return this.aff().y}equals(t){const{px:r,py:i,pz:s}=this,{px:c,py:o,pz:u}=Gg(t),A=sr(r*u),S=sr(c*s),y=sr(i*u),R=sr(o*s);return A===S&&y===R}negate(){return new Fi(this.px,sr(-this.py),this.pz)}double(){return this.add(this)}add(t){const{px:r,py:i,pz:s}=this,{px:c,py:o,pz:u}=Gg(t),{a:A,b:S}=Hg;let y=0n,R=0n,ee=0n;const ae=sr(3n*S);let te=sr(r*c),fe=sr(i*o),we=sr(s*u),Pe=sr(r+i),Te=sr(c+o);Pe=sr(Pe*Te),Te=sr(te+fe),Pe=sr(Pe-Te),Te=sr(r+s);let Ae=sr(c+u);return Te=sr(Te*Ae),Ae=sr(te+we),Te=sr(Te-Ae),Ae=sr(i+s),y=sr(o+u),Ae=sr(Ae*y),y=sr(fe+we),Ae=sr(Ae-y),ee=sr(A*Te),y=sr(ae*we),ee=sr(y+ee),y=sr(fe-ee),ee=sr(fe+ee),R=sr(y*ee),fe=sr(te+te),fe=sr(fe+te),we=sr(A*we),Te=sr(ae*Te),fe=sr(fe+we),we=sr(te-we),we=sr(A*we),Te=sr(Te+we),te=sr(fe*Te),R=sr(R+te),te=sr(Ae*Te),y=sr(Pe*y),y=sr(y-te),te=sr(Pe*fe),ee=sr(Ae*ee),ee=sr(ee+te),new Fi(y,R,ee)}mul(t,r=!0){if(!r&&0n===t)return mp;if(lf(t)||On("invalid scalar"),this.equals(Ac))return kS(t).p;let i=mp,s=Ac;for(let c=this;t>0n;c=c.double(),t>>=1n)1n&t?i=i.add(c):r&&(s=s.add(c));return i}mulAddQUns(t,r,i){return this.mul(r,!1).add(t.mul(i,!1)).ok()}toAffine(){const{px:t,py:r,pz:i}=this;if(this.equals(mp))return{x:0n,y:0n};if(1n===i)return{x:t,y:r};const s=Ul(i);return 1n!==sr(i*s)&&On("invalid inverse"),{x:sr(t*s),y:sr(r*s)}}assertValidity(){const{x:t,y:r}=this.aff();return(!Dl(t)||!Dl(r))&&On("Point invalid: x or y"),sr(r*r)===dd(t)?this:On("Point invalid: not on curve")}multiply(t){return this.mul(t)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(t=!0){const{x:r,y:i}=this.aff();return(t?0n===(1n&i)?"02":"03":"04")+jl(r)+(t?"":jl(i))}toRawBytes(t=!0){return Nl(this.toHex(t))}}Fi.BASE=new Fi(cu,Sc,1n),Fi.ZERO=new Fi(0n,1n,0n);const{BASE:Ac,ZERO:mp}=Fi,J2=(n,t)=>n.toString(16).padStart(t,"0"),Zg=n=>Array.from(n).map(t=>J2(t,2)).join(""),Nl=n=>{const t=n.length;(!yp(n)||t%2)&&On("hex invalid 1");const r=uo(t/2);for(let i=0;i<r.length;i++){const s=2*i,c=n.slice(s,s+2),o=Number.parseInt(c,16);(Number.isNaN(o)||o<0)&&On("hex invalid 2"),r[i]=o}return r},$l=n=>BigInt("0x"+(Zg(n)||"0")),gp=(n,t,r)=>$l(n.slice(t,r)),vp=n=>ff(n)&&n>=0n&&n<Eo?Nl(J2(n,2*yi)):On("bigint expected"),jl=n=>Zg(vp(n)),Jg=(...n)=>{const t=uo(n.reduce((i,s)=>i+Wg(s).length,0));let r=0;return n.forEach(i=>{t.set(i,r),r+=i.length}),t},Ul=(n,t=Js)=>{(0n===n||t<=0n)&&On("no inverse n="+n+" mod="+t);let r=sr(n,t),i=t,s=0n,c=1n,o=1n,u=0n;for(;0n!==r;){const A=i/r,S=i%r,y=s-o*A,R=c-u*A;i=r,r=S,s=o,c=u,o=y,u=R}return 1n===i?sr(s,t):On("no inverse")},TS=n=>{let t=1n;for(let r=n,i=(Js+1n)/4n;i>0n;i>>=1n)1n&i&&(t=t*r%Js),r=r*r%Js;return sr(t*t)===n?t:On("sqrt invalid")},Ll=n=>(ff(n)||(n=$l(za(n,yi))),lf(n)?n:On("private key out of range")),Yg=n=>n>pi>>1n;function Xg(n,t=!0){return Fi.fromPrivateKey(n).toRawBytes(t)}class hf{constructor(t,r,i){this.r=t,this.s=r,this.recovery=i,this.assertValidity()}static fromCompact(t){return t=za(t,64),new hf(gp(t,0,yi),gp(t,yi,2*yi))}assertValidity(){return lf(this.r)&&lf(this.s)?this:On()}addRecoveryBit(t){return new hf(this.r,this.s,t)}hasHighS(){return Yg(this.s)}recoverPublicKey(t){const{r,s:i,recovery:s}=this;[0,1,2,3].includes(s)||On("recovery id invalid");const c=Qg(za(t,32)),o=2===s||3===s?r+pi:r;o>=Js&&On("q.x invalid");const A=Fi.fromHex((1&s?"03":"02")+jl(o)),S=Ul(o,pi),y=sr(-c*S,pi),R=sr(i*S,pi);return Ac.mulAddQUns(A,y,R)}toCompactRawBytes(){return Nl(this.toCompactHex())}toCompactHex(){return jl(this.r)+jl(this.s)}}const Y2=n=>{const t=8*n.length-256,r=$l(n);return t>0?r>>BigInt(t):r},Qg=n=>sr(Y2(n),pi),X2=n=>vp(n),Q2=()=>"object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;let Fl;const ev={lowS:!0},IS={lowS:!0};function tv(){return tv=(0,it.A)(function*(n,t,r=ev){const{seed:i,k2sig:s}=function e3(n,t,r=ev){["der","recovered","canonical"].some(R=>R in r)&&On("sign() legacy options not supported");let{lowS:i}=r;null==i&&(i=!0);const s=Qg(za(n)),c=X2(s),o=Ll(t),u=[X2(o),c];let A=r.extraEntropy;if(A){!0===A&&(A=pf.randomBytes(yi));const R=za(A);R.length!==yi&&On(),u.push(R)}const S=s;return{seed:Jg(...u),k2sig:R=>{const ee=Y2(R);if(!lf(ee))return;const ae=Ul(ee,pi),te=Ac.mul(ee).aff(),fe=sr(te.x,pi);if(0n===fe)return;const we=sr(ae*sr(S+sr(o*fe,pi),pi),pi);if(0n===we)return;let Pe=we,Te=(te.x===fe?0:2)|Number(1n&te.y);return i&&Yg(we)&&(Pe=sr(-we,pi),Te^=1),new hf(fe,Pe,Te)}}}(n,t,r);return function t3(n){let t=uo(yi),r=uo(yi),i=0;const s=()=>{t.fill(1),r.fill(0),i=0},c="drbg: tried 1000 values";if(n){const o=(...S)=>pf.hmacSha256Async(r,t,...S),u=function(){var S=(0,it.A)(function*(y=uo()){r=yield o(uo([0]),y),t=yield o(),0!==y.length&&(r=yield o(uo([1]),y),t=yield o())});return function(){return S.apply(this,arguments)}}(),A=function(){var S=(0,it.A)(function*(){return i++>=1e3&&On(c),t=yield o(),t});return function(){return S.apply(this,arguments)}}();return function(){var S=(0,it.A)(function*(y,R){let ee;for(s(),yield u(y);!(ee=R(yield A()));)yield u();return s(),ee});return function(y,R){return S.apply(this,arguments)}}()}{const o=(...S)=>{const y=Fl;return y||On("etc.hmacSha256Sync not set"),y(r,t,...S)},u=(S=uo())=>{r=o(uo([0]),S),t=o(),0!==S.length&&(r=o(uo([1]),S),t=o())},A=()=>(i++>=1e3&&On(c),t=o(),t);return(S,y)=>{let R;for(s(),u(S);!(R=y(A()));)u();return s(),R}}}(!0)(i,s)}),tv.apply(this,arguments)}function r3(n){((n=za(n)).length<yi+8||n.length>1024)&&On("expected proper params");const r=sr($l(n),pi-1n)+1n;return vp(r)}const pf={hexToBytes:Nl,bytesToHex:Zg,concatBytes:Jg,bytesToNumberBE:$l,numberToBytesBE:vp,mod:sr,invert:Ul,hmacSha256Async:function(){var n=(0,it.A)(function*(t,...r){const i=Q2();if(!i)return On("etc.hmacSha256Async not set");const s=i.subtle,c=yield s.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return uo(yield s.sign("HMAC",c,Jg(...r)))});return function(r){return n.apply(this,arguments)}}(),hmacSha256Sync:Fl,hashToPrivateKey:r3,randomBytes:n=>{const t=Q2();return t||On("crypto.getRandomValues must be defined"),t.getRandomValues(uo(n))}},n3_randomPrivateKey=()=>r3(pf.randomBytes(yi+8));Object.defineProperties(pf,{hmacSha256Sync:{configurable:!1,get:()=>Fl,set(n){Fl||(Fl=n)}}});const kS=n=>{const t=qg||(qg=(()=>{const n=[];let r=Ac,i=r;for(let s=0;s<33;s++){i=r,n.push(i);for(let c=1;c<128;c++)i=i.add(r),n.push(i);r=i.double()}return n})()),r=(y,R)=>{let ee=R.negate();return y?ee:R};let i=mp,s=Ac;const u=BigInt(255),S=BigInt(8);for(let y=0;y<33;y++){const R=128*y;let ee=Number(n&u);n>>=S,ee>128&&(ee-=256,n+=1n);const ae=R,te=R+Math.abs(ee)-1,we=ee<0;0===ee?s=s.add(r(y%2!=0,t[ae])):i=i.add(r(we,t[te]))}return{p:i,f:s}};var i3=128,DS=-128,NS=Math.pow(2,31),jS=128,o3=127,US=Math.pow(2,7),LS=Math.pow(2,14),FS=Math.pow(2,21),KS=Math.pow(2,28),zS=Math.pow(2,35),VS=Math.pow(2,42),HS=Math.pow(2,49),WS=Math.pow(2,56),GS=Math.pow(2,63),ZS={encode:function s3(n,t,r){t=t||[];for(var i=r=r||0;n>=NS;)t[r++]=255&n|i3,n/=128;for(;n&DS;)t[r++]=255&n|i3,n>>>=7;return t[r]=0|n,s3.bytes=r-i+1,t},decode:function rv(n,i){var o,r=0,s=0,c=i=i||0,u=n.length;do{if(c>=u)throw rv.bytes=0,new RangeError("Could not decode varint");o=n[c++],r+=s<28?(o&o3)<<s:(o&o3)*Math.pow(2,s),s+=7}while(o>=jS);return rv.bytes=c-i,r},encodingLength:function(n){return n<US?1:n<LS?2:n<FS?3:n<KS?4:n<zS?5:n<VS?6:n<HS?7:n<WS?8:n<GS?9:10}};const wp=ZS,Kl=(n,t=0)=>[wp.decode(n,t),wp.decode.bytes],zl=(n,t,r=0)=>(wp.encode(n,t,r),t),Vl=n=>wp.encodingLength(n),bp=(n,t)=>{const r=t.byteLength,i=Vl(n),s=i+Vl(r),c=new Uint8Array(s+r);return zl(n,c,0),zl(r,c,i),c.set(t,s),new nv(n,r,t,c)},a3=n=>{const t=Be(n),[r,i]=Kl(t),[s,c]=Kl(t.subarray(i)),o=t.subarray(i+c);if(o.byteLength!==s)throw new Error("Incorrect length");return new nv(r,s,o,t)};class nv{constructor(t,r,i,s){this.code=t,this.size=r,this.digest=i,this.bytes=s}}const c3=({name:n,code:t,encode:r})=>new XS(n,t,r);class XS{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?bp(this.code,r):r.then(i=>bp(this.code,i))}throw Error("Unknown type, must be binary type")}}const d3=n=>function(){var t=(0,it.A)(function*(r){return new Uint8Array(yield crypto.subtle.digest(n,r))});return function(r){return t.apply(this,arguments)}}(),Va=c3({name:"sha2-256",code:18,encode:d3("SHA-256")});c3({name:"sha2-512",code:19,encode:d3("SHA-512")});var ud=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Ki{static validateKey(t){if("EC"!==t.kty||"secp256k1"!==t.crv)throw new Ot(Rt.Secp256k1KeyNotValid,"Invalid SECP256K1 JWK: `kty` MUST be `EC`. `crv` MUST be `secp256k1`")}static publicKeyToJwk(t){return ud(this,void 0,void 0,function*(){let r;return r=33===t.byteLength?Fi.fromHex(t).toRawBytes(!1):t,{alg:"ES256K",kty:"EC",crv:"secp256k1",x:Ft.bytesToBase64Url(r.subarray(1,33)),y:Ft.bytesToBase64Url(r.subarray(33,65))}})}static privateKeyToJwk(t){return ud(this,void 0,void 0,function*(){const r=yield Ki.getPublicKey(t),i=yield Ki.publicKeyToJwk(r);return i.d=Ft.bytesToBase64Url(t),i})}static publicJwkToBytes(t){const r=Ft.base64UrlToBytes(t.x),i=Ft.base64UrlToBytes(t.y);return Fi.fromAffine({x:pf.bytesToNumberBE(r),y:pf.bytesToNumberBE(i)}).toRawBytes(!0)}static privateJwkToBytes(t){return Ft.base64UrlToBytes(t.d)}static sign(t,r){return ud(this,void 0,void 0,function*(){Ki.validateKey(r);const i=yield Va.encode(t),s=Ki.privateJwkToBytes(r);return(yield function PS(n,t){return tv.apply(this,arguments)}(i,s)).toCompactRawBytes()})}static verify(t,r,i){return ud(this,void 0,void 0,function*(){Ki.validateKey(i);const s=Ki.publicJwkToBytes(i),c=yield Va.encode(t);return function BS(n,t,r,i=IS){let c,o,u,{lowS:s}=i;null==s&&(s=!0),"strict"in i&&On("verify() legacy options not supported");const A=n&&"object"==typeof n&&"r"in n;!A&&za(n).length!==2*yi&&On("signature must be 64 bytes");try{c=A?new hf(n.r,n.s).assertValidity():hf.fromCompact(n),o=Qg(za(t,yi)),u=r instanceof Fi?r.ok():Fi.fromHex(r)}catch{return!1}if(!c)return!1;const{r:S,s:y}=c;if(s&&Yg(y))return!1;let R;try{const ae=Ul(y,pi),te=sr(o*ae,pi),fe=sr(S*ae,pi);R=Ac.mulAddQUns(u,te,fe).aff()}catch{return!1}return!!R&&sr(R.x,pi)===S}(r,c,s)})}static generateKeyPair(){return ud(this,void 0,void 0,function*(){const t=n3_randomPrivateKey(),r=Xg(t,!1),i=Ft.bytesToBase64Url(t),s=yield Ki.publicKeyToJwk(r);return{publicJwk:s,privateJwk:Object.assign(Object.assign({},s),{d:i})}})}static generateKeyPairRaw(){return ud(this,void 0,void 0,function*(){const t=n3_randomPrivateKey();return{publicKey:Xg(t,!0),privateKey:t}})}static getPublicKey(t){return ud(this,void 0,void 0,function*(){return Xg(t,!0)})}static getPublicJwk(t){return ud(this,void 0,void 0,function*(){return function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["d"])})}}function uu(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function fu(n,...t){if(!function tA(n){return n instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name}(n))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function iv(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");uu(n.outputLen),uu(n.blockLen)}function Hl(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}const _p="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function sv(n){return n instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name}const yf=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ha=(n,t)=>n<<32-t|n>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const rA=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function f3(n){if(!sv(n))throw new Error("Uint8Array expected");let t="";for(let r=0;r<n.length;r++)t+=rA[n[r]];return t}const Mc={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function l3(n){return n>=Mc._0&&n<=Mc._9?n-Mc._0:n>=Mc._A&&n<=Mc._F?n-(Mc._A-10):n>=Mc._a&&n<=Mc._f?n-(Mc._a-10):void 0}const iA=function(){var n=(0,it.A)(function*(){});return function(){return n.apply(this,arguments)}}();function sA(n,t,r){return ov.apply(this,arguments)}function ov(){return ov=(0,it.A)(function*(n,t,r){let i=Date.now();for(let s=0;s<n;s++){r(s);const c=Date.now()-i;c>=0&&c<t||(yield iA(),i+=c)}}),ov.apply(this,arguments)}function av(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function lu(n){if("string"==typeof n&&(n=av(n)),!sv(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function xp(...n){let t=0;for(let i=0;i<n.length;i++){const s=n[i];if(!sv(s))throw new Error("Uint8Array expected");t+=s.length}const r=new Uint8Array(t);for(let i=0,s=0;i<n.length;i++){const c=n[i];r.set(c,s),s+=c.length}return r}class h3{clone(){return this._cloneInto()}}const oA={}.toString;function cv(n){const t=i=>n().update(lu(i)).digest(),r=n();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>n(),t}function Wl(n=32){if(_p&&"function"==typeof _p.getRandomValues)return _p.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class p3 extends h3{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,iv(t);const i=lu(r);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,c=new Uint8Array(s);c.set(i.length>s?t.create().update(i).digest():i);for(let o=0;o<c.length;o++)c[o]^=54;this.iHash.update(c),this.oHash=t.create();for(let o=0;o<c.length;o++)c[o]^=106;this.oHash.update(c),c.fill(0)}update(t){return Hl(this),this.iHash.update(t),this}digestInto(t){Hl(this),fu(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:s,destroyed:c,blockLen:o,outputLen:u}=this;return t.finished=s,t.destroyed=c,t.blockLen=o,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gl=(n,t,r)=>new p3(n,t).update(r).digest();Gl.create=(n,t)=>new p3(n,t),BigInt(0);const Ep=BigInt(1),cA=BigInt(2);function Wa(n){return n instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name}const dA=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function hu(n){if(!Wa(n))throw new Error("Uint8Array expected");let t="";for(let r=0;r<n.length;r++)t+=dA[n[r]];return t}function m3(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);return BigInt(""===n?"0":`0x${n}`)}const Tc={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function g3(n){return n>=Tc._0&&n<=Tc._9?n-Tc._0:n>=Tc._A&&n<=Tc._F?n-(Tc._A-10):n>=Tc._a&&n<=Tc._f?n-(Tc._a-10):void 0}function mf(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const t=n.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let s=0,c=0;s<r;s++,c+=2){const o=g3(n.charCodeAt(c)),u=g3(n.charCodeAt(c+1));if(void 0===o||void 0===u)throw new Error('hex string expected, got non-hex character "'+(n[c]+n[c+1])+'" at index '+c);i[s]=16*o+u}return i}function pu(n){return m3(hu(n))}function fd(n){if(!Wa(n))throw new Error("Uint8Array expected");return m3(hu(Uint8Array.from(n).reverse()))}function Ga(n,t){return mf(n.toString(16).padStart(2*t,"0"))}function gf(n,t){return Ga(n,t).reverse()}function Mi(n,t,r){let i;if("string"==typeof t)try{i=mf(t)}catch(c){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${c}`)}else{if(!Wa(t))throw new Error(`${n} must be hex string or Uint8Array`);i=Uint8Array.from(t)}const s=i.length;if("number"==typeof r&&s!==r)throw new Error(`${n} expected ${r} bytes, got ${s}`);return i}function yu(...n){let t=0;for(let s=0;s<n.length;s++){const c=n[s];if(!Wa(c))throw new Error("Uint8Array expected");t+=c.length}let r=new Uint8Array(t),i=0;for(let s=0;s<n.length;s++){const c=n[s];r.set(c,i),i+=c.length}return r}const dv=n=>(cA<<BigInt(n-1))-Ep,uv=n=>new Uint8Array(n),v3=n=>Uint8Array.from(n);function w3(n,t,r){if("number"!=typeof n||n<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let i=uv(n),s=uv(n),c=0;const o=()=>{i.fill(1),s.fill(0),c=0},u=(...R)=>r(s,i,...R),A=(R=uv())=>{s=u(v3([0]),R),i=u(),0!==R.length&&(s=u(v3([1]),R),i=u())},S=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let R=0;const ee=[];for(;R<t;){i=u();const ae=i.slice();ee.push(ae),R+=i.length}return yu(...ee)};return(R,ee)=>{let ae;for(o(),A(R);!(ae=ee(S()));)A();return o(),ae}}const fA={bigint:n=>"bigint"==typeof n,function:n=>"function"==typeof n,boolean:n=>"boolean"==typeof n,string:n=>"string"==typeof n,stringOrUint8Array:n=>"string"==typeof n||Wa(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>"function"==typeof n&&Number.isSafeInteger(n.outputLen)};function mu(n,t,r={}){const i=(s,c,o)=>{const u=fA[c];if("function"!=typeof u)throw new Error(`Invalid validator "${c}", expected function`);const A=n[s];if(!(o&&void 0===A||u(A,n)))throw new Error(`Invalid param ${String(s)}=${A} (${typeof A}), expected ${c}`)};for(const[s,c]of Object.entries(t))i(s,c,!1);for(const[s,c]of Object.entries(r))i(s,c,!0);return n}const zi=BigInt(0),Zn=BigInt(1),ld=BigInt(2),lA=BigInt(3),fv=BigInt(4),b3=BigInt(5),_3=BigInt(8);function Jn(n,t){const r=n%t;return r>=zi?r:t+r}function x3(n,t,r){if(r<=zi||t<zi)throw new Error("Expected power/modulo > 0");if(r===Zn)return zi;let i=Zn;for(;t>zi;)t&Zn&&(i=i*n%r),n=n*n%r,t>>=Zn;return i}function mi(n,t,r){let i=n;for(;t-- >zi;)i*=i,i%=r;return i}function Sp(n,t){if(n===zi||t<=zi)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let r=Jn(n,t),i=t,s=zi,c=Zn,o=Zn,u=zi;for(;r!==zi;){const S=i/r,y=i%r,R=s-o*S,ee=c-u*S;i=r,r=y,s=o,c=u,o=R,u=ee}if(i!==Zn)throw new Error("invert: does not exist");return Jn(s,t)}BigInt(9),BigInt(16);const vA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lv(n,t){const r=void 0!==t?t:n.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function hv(n,t,r=!1,i={}){if(n<=zi)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:c}=lv(n,t);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=function mA(n){if(n%fv===lA){const t=(n+Zn)/fv;return function(i,s){const c=i.pow(s,t);if(!i.eql(i.sqr(c),s))throw new Error("Cannot find square root");return c}}if(n%_3===b3){const t=(n-b3)/_3;return function(i,s){const c=i.mul(s,ld),o=i.pow(c,t),u=i.mul(s,o),A=i.mul(i.mul(u,ld),o),S=i.mul(u,i.sub(A,i.ONE));if(!i.eql(i.sqr(S),s))throw new Error("Cannot find square root");return S}}return function yA(n){const t=(n-Zn)/ld;let r,i,s;for(r=n-Zn,i=0;r%ld===zi;r/=ld,i++);for(s=ld;s<n&&x3(s,t,n)!==n-Zn;s++);if(1===i){const o=(n+Zn)/fv;return function(A,S){const y=A.pow(S,o);if(!A.eql(A.sqr(y),S))throw new Error("Cannot find square root");return y}}const c=(r+Zn)/ld;return function(u,A){if(u.pow(A,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let S=i,y=u.pow(u.mul(u.ONE,s),r),R=u.pow(A,c),ee=u.pow(A,r);for(;!u.eql(ee,u.ONE);){if(u.eql(ee,u.ZERO))return u.ZERO;let ae=1;for(let fe=u.sqr(ee);ae<S&&!u.eql(fe,u.ONE);ae++)fe=u.sqr(fe);const te=u.pow(y,Zn<<BigInt(S-ae-1));y=u.sqr(te),R=u.mul(R,te),ee=u.mul(ee,y),S=ae}return R}}(n)}(n),u=Object.freeze({ORDER:n,BITS:s,BYTES:c,MASK:dv(s),ZERO:zi,ONE:Zn,create:A=>Jn(A,n),isValid:A=>{if("bigint"!=typeof A)throw new Error("Invalid field element: expected bigint, got "+typeof A);return zi<=A&&A<n},is0:A=>A===zi,isOdd:A=>(A&Zn)===Zn,neg:A=>Jn(-A,n),eql:(A,S)=>A===S,sqr:A=>Jn(A*A,n),add:(A,S)=>Jn(A+S,n),sub:(A,S)=>Jn(A-S,n),mul:(A,S)=>Jn(A*S,n),pow:(A,S)=>function bA(n,t,r){if(r<zi)throw new Error("Expected power > 0");if(r===zi)return n.ONE;if(r===Zn)return t;let i=n.ONE,s=t;for(;r>zi;)r&Zn&&(i=n.mul(i,s)),s=n.sqr(s),r>>=Zn;return i}(u,A,S),div:(A,S)=>Jn(A*Sp(S,n),n),sqrN:A=>A*A,addN:(A,S)=>A+S,subN:(A,S)=>A-S,mulN:(A,S)=>A*S,inv:A=>Sp(A,n),sqrt:i.sqrt||(A=>o(u,A)),invertBatch:A=>function _A(n,t){const r=new Array(t.length),i=t.reduce((c,o,u)=>n.is0(o)?c:(r[u]=c,n.mul(c,o)),n.ONE),s=n.inv(i);return t.reduceRight((c,o,u)=>n.is0(o)?c:(r[u]=n.mul(c,r[u]),n.mul(c,o)),s),r}(u,A),cmov:(A,S,y)=>y?S:A,toBytes:A=>r?gf(A,c):Ga(A,c),fromBytes:A=>{if(A.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${A.length}`);return r?fd(A):pu(A)}});return Object.freeze(u)}function E3(n){if("bigint"!=typeof n)throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function S3(n){const t=E3(n);return t+Math.ceil(t/2)}const SA=BigInt(0),pv=BigInt(1);function A3(n,t){const r=(s,c)=>{const o=c.negate();return s?o:c},i=s=>({windows:Math.ceil(t/s)+1,windowSize:2**(s-1)});return{constTimeNegate:r,unsafeLadder(s,c){let o=n.ZERO,u=s;for(;c>SA;)c&pv&&(o=o.add(u)),u=u.double(),c>>=pv;return o},precomputeWindow(s,c){const{windows:o,windowSize:u}=i(c),A=[];let S=s,y=S;for(let R=0;R<o;R++){y=S,A.push(y);for(let ee=1;ee<u;ee++)y=y.add(S),A.push(y);S=y.double()}return A},wNAF(s,c,o){const{windows:u,windowSize:A}=i(s);let S=n.ZERO,y=n.BASE;const R=BigInt(2**s-1),ee=2**s,ae=BigInt(s);for(let te=0;te<u;te++){const fe=te*A;let we=Number(o&R);o>>=ae,we>A&&(we-=ee,o+=pv);const Pe=fe,Te=fe+Math.abs(we)-1,Ce=we<0;0===we?y=y.add(r(te%2!=0,c[Pe])):S=S.add(r(Ce,c[Te]))}return{p:S,f:y}},wNAFCached(s,c,o,u){const A=s._WINDOW_SIZE||1;let S=c.get(s);return S||(S=this.precomputeWindow(s,A),1!==A&&c.set(s,u(S))),this.wNAF(A,S,o)}}}function yv(n){return function wA(n){mu(n,vA.reduce((i,s)=>(i[s]="function",i),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(n.Fp),mu(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...lv(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const{bytesToNumberBE:MA,hexToBytes:TA}=C,gu={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=gu;if(n.length<2||2!==n[0])throw new t("Invalid signature integer tag");const r=n[1],i=n.subarray(2,r+2);if(!r||i.length!==r)throw new t("Invalid signature integer: wrong length");if(128&i[0])throw new t("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:MA(i),l:n.subarray(r+2)}},toSig(n){const{Err:t}=gu,r="string"==typeof n?TA(n):n;if(!Wa(r))throw new Error("ui8a expected");let i=r.length;if(i<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==i-2)throw new t("Invalid signature: incorrect length");const{d:s,l:c}=gu._parseInt(r.subarray(2)),{d:o,l:u}=gu._parseInt(c);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){const t=S=>8&Number.parseInt(S[0],16)?"00"+S:S,r=S=>{const y=S.toString(16);return 1&y.length?`0${y}`:y},i=t(r(n.s)),s=t(r(n.r)),c=i.length/2,o=s.length/2,u=r(c),A=r(o);return`30${r(o+c+4)}02${A}${s}02${u}${i}`}},va=BigInt(0),_i=BigInt(1),Ap=(BigInt(2),BigInt(3));function BA(n){const t=function PA(n){const t=yv(n);return mu(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(n),{Fp:r,n:i}=t,s=r.BYTES+1,c=2*r.BYTES+1;function u(tt){return Jn(tt,i)}function A(tt){return Sp(tt,i)}const{ProjectivePoint:S,normPrivateKeyToScalar:y,weierstrassEquation:R,isWithinCurveOrder:ee}=function IA(n){const t=function AA(n){const t=yv(n);mu(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:s}=t;if(r){if(!i.eql(s,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(n),{Fp:r}=t,i=t.toBytes||((te,fe,we)=>{const Pe=fe.toAffine();return yu(Uint8Array.from([4]),r.toBytes(Pe.x),r.toBytes(Pe.y))}),s=t.fromBytes||(te=>{const fe=te.subarray(1);return{x:r.fromBytes(fe.subarray(0,r.BYTES)),y:r.fromBytes(fe.subarray(r.BYTES,2*r.BYTES))}});function c(te){const{a:fe,b:we}=t,Pe=r.sqr(te),Te=r.mul(Pe,te);return r.add(r.add(Te,r.mul(te,fe)),we)}if(!r.eql(r.sqr(t.Gy),c(t.Gx)))throw new Error("bad generator point: equation left != right");function o(te){return"bigint"==typeof te&&va<te&&te<t.n}function u(te){if(!o(te))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function A(te){const{allowedPrivateKeyLengths:fe,nByteLength:we,wrapPrivateKey:Pe,n:Te}=t;if(fe&&"bigint"!=typeof te){if(Wa(te)&&(te=hu(te)),"string"!=typeof te||!fe.includes(te.length))throw new Error("Invalid key");te=te.padStart(2*we,"0")}let Ae;try{Ae="bigint"==typeof te?te:pu(Mi("private key",te,we))}catch{throw new Error(`private key must be ${we} bytes, hex or bigint, not ${typeof te}`)}return Pe&&(Ae=Jn(Ae,Te)),u(Ae),Ae}const S=new Map;function y(te){if(!(te instanceof R))throw new Error("ProjectivePoint expected")}class R{constructor(fe,we,Pe){if(this.px=fe,this.py=we,this.pz=Pe,null==fe||!r.isValid(fe))throw new Error("x required");if(null==we||!r.isValid(we))throw new Error("y required");if(null==Pe||!r.isValid(Pe))throw new Error("z required")}static fromAffine(fe){const{x:we,y:Pe}=fe||{};if(!fe||!r.isValid(we)||!r.isValid(Pe))throw new Error("invalid affine point");if(fe instanceof R)throw new Error("projective point not allowed");const Te=Ae=>r.eql(Ae,r.ZERO);return Te(we)&&Te(Pe)?R.ZERO:new R(we,Pe,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(fe){const we=r.invertBatch(fe.map(Pe=>Pe.pz));return fe.map((Pe,Te)=>Pe.toAffine(we[Te])).map(R.fromAffine)}static fromHex(fe){const we=R.fromAffine(s(Mi("pointHex",fe)));return we.assertValidity(),we}static fromPrivateKey(fe){return R.BASE.multiply(A(fe))}_setWindowSize(fe){this._WINDOW_SIZE=fe,S.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:fe,y:we}=this.toAffine();if(!r.isValid(fe)||!r.isValid(we))throw new Error("bad point: x or y not FE");const Pe=r.sqr(we),Te=c(fe);if(!r.eql(Pe,Te))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:fe}=this.toAffine();if(r.isOdd)return!r.isOdd(fe);throw new Error("Field doesn't support isOdd")}equals(fe){y(fe);const{px:we,py:Pe,pz:Te}=this,{px:Ae,py:Ce,pz:je}=fe,Le=r.eql(r.mul(we,je),r.mul(Ae,Te)),ze=r.eql(r.mul(Pe,je),r.mul(Ce,Te));return Le&&ze}negate(){return new R(this.px,r.neg(this.py),this.pz)}double(){const{a:fe,b:we}=t,Pe=r.mul(we,Ap),{px:Te,py:Ae,pz:Ce}=this;let je=r.ZERO,Le=r.ZERO,ze=r.ZERO,$e=r.mul(Te,Te),Ye=r.mul(Ae,Ae),ut=r.mul(Ce,Ce),ct=r.mul(Te,Ae);return ct=r.add(ct,ct),ze=r.mul(Te,Ce),ze=r.add(ze,ze),je=r.mul(fe,ze),Le=r.mul(Pe,ut),Le=r.add(je,Le),je=r.sub(Ye,Le),Le=r.add(Ye,Le),Le=r.mul(je,Le),je=r.mul(ct,je),ze=r.mul(Pe,ze),ut=r.mul(fe,ut),ct=r.sub($e,ut),ct=r.mul(fe,ct),ct=r.add(ct,ze),ze=r.add($e,$e),$e=r.add(ze,$e),$e=r.add($e,ut),$e=r.mul($e,ct),Le=r.add(Le,$e),ut=r.mul(Ae,Ce),ut=r.add(ut,ut),$e=r.mul(ut,ct),je=r.sub(je,$e),ze=r.mul(ut,Ye),ze=r.add(ze,ze),ze=r.add(ze,ze),new R(je,Le,ze)}add(fe){y(fe);const{px:we,py:Pe,pz:Te}=this,{px:Ae,py:Ce,pz:je}=fe;let Le=r.ZERO,ze=r.ZERO,$e=r.ZERO;const Ye=t.a,ut=r.mul(t.b,Ap);let ct=r.mul(we,Ae),vt=r.mul(Pe,Ce),at=r.mul(Te,je),ft=r.add(we,Pe),tt=r.add(Ae,Ce);ft=r.mul(ft,tt),tt=r.add(ct,vt),ft=r.sub(ft,tt),tt=r.add(we,Te);let st=r.add(Ae,je);return tt=r.mul(tt,st),st=r.add(ct,at),tt=r.sub(tt,st),st=r.add(Pe,Te),Le=r.add(Ce,je),st=r.mul(st,Le),Le=r.add(vt,at),st=r.sub(st,Le),$e=r.mul(Ye,tt),Le=r.mul(ut,at),$e=r.add(Le,$e),Le=r.sub(vt,$e),$e=r.add(vt,$e),ze=r.mul(Le,$e),vt=r.add(ct,ct),vt=r.add(vt,ct),at=r.mul(Ye,at),tt=r.mul(ut,tt),vt=r.add(vt,at),at=r.sub(ct,at),at=r.mul(Ye,at),tt=r.add(tt,at),ct=r.mul(vt,tt),ze=r.add(ze,ct),ct=r.mul(st,tt),Le=r.mul(ft,Le),Le=r.sub(Le,ct),ct=r.mul(ft,vt),$e=r.mul(st,$e),$e=r.add($e,ct),new R(Le,ze,$e)}subtract(fe){return this.add(fe.negate())}is0(){return this.equals(R.ZERO)}wNAF(fe){return ae.wNAFCached(this,S,fe,we=>{const Pe=r.invertBatch(we.map(Te=>Te.pz));return we.map((Te,Ae)=>Te.toAffine(Pe[Ae])).map(R.fromAffine)})}multiplyUnsafe(fe){const we=R.ZERO;if(fe===va)return we;if(u(fe),fe===_i)return this;const{endo:Pe}=t;if(!Pe)return ae.unsafeLadder(this,fe);let{k1neg:Te,k1:Ae,k2neg:Ce,k2:je}=Pe.splitScalar(fe),Le=we,ze=we,$e=this;for(;Ae>va||je>va;)Ae&_i&&(Le=Le.add($e)),je&_i&&(ze=ze.add($e)),$e=$e.double(),Ae>>=_i,je>>=_i;return Te&&(Le=Le.negate()),Ce&&(ze=ze.negate()),ze=new R(r.mul(ze.px,Pe.beta),ze.py,ze.pz),Le.add(ze)}multiply(fe){u(fe);let Pe,Te,we=fe;const{endo:Ae}=t;if(Ae){const{k1neg:Ce,k1:je,k2neg:Le,k2:ze}=Ae.splitScalar(we);let{p:$e,f:Ye}=this.wNAF(je),{p:ut,f:ct}=this.wNAF(ze);$e=ae.constTimeNegate(Ce,$e),ut=ae.constTimeNegate(Le,ut),ut=new R(r.mul(ut.px,Ae.beta),ut.py,ut.pz),Pe=$e.add(ut),Te=Ye.add(ct)}else{const{p:Ce,f:je}=this.wNAF(we);Pe=Ce,Te=je}return R.normalizeZ([Pe,Te])[0]}multiplyAndAddUnsafe(fe,we,Pe){const Te=R.BASE,Ae=(je,Le)=>Le!==va&&Le!==_i&&je.equals(Te)?je.multiply(Le):je.multiplyUnsafe(Le),Ce=Ae(this,we).add(Ae(fe,Pe));return Ce.is0()?void 0:Ce}toAffine(fe){const{px:we,py:Pe,pz:Te}=this,Ae=this.is0();null==fe&&(fe=Ae?r.ONE:r.inv(Te));const Ce=r.mul(we,fe),je=r.mul(Pe,fe),Le=r.mul(Te,fe);if(Ae)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Le,r.ONE))throw new Error("invZ was invalid");return{x:Ce,y:je}}isTorsionFree(){const{h:fe,isTorsionFree:we}=t;if(fe===_i)return!0;if(we)return we(R,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:fe,clearCofactor:we}=t;return fe===_i?this:we?we(R,this):this.multiplyUnsafe(t.h)}toRawBytes(fe=!0){return this.assertValidity(),i(R,this,fe)}toHex(fe=!0){return hu(this.toRawBytes(fe))}}R.BASE=new R(t.Gx,t.Gy,r.ONE),R.ZERO=new R(r.ZERO,r.ONE,r.ZERO);const ee=t.nBitLength,ae=A3(R,t.endo?Math.ceil(ee/2):ee);return{CURVE:t,ProjectivePoint:R,normPrivateKeyToScalar:A,weierstrassEquation:c,isWithinCurveOrder:o}}({...t,toBytes(tt,st,Je){const lt=st.toAffine(),ot=r.toBytes(lt.x),yt=yu;return Je?yt(Uint8Array.from([st.hasEvenY()?2:3]),ot):yt(Uint8Array.from([4]),ot,r.toBytes(lt.y))},fromBytes(tt){const st=tt.length,Je=tt[0],lt=tt.subarray(1);if(st!==s||2!==Je&&3!==Je){if(st===c&&4===Je)return{x:r.fromBytes(lt.subarray(0,r.BYTES)),y:r.fromBytes(lt.subarray(r.BYTES,2*r.BYTES))};throw new Error(`Point of length ${st} was invalid. Expected ${s} compressed bytes or ${c} uncompressed bytes`)}{const ot=pu(lt);if(!function o(tt){return va<tt&&tt<r.ORDER}(ot))throw new Error("Point is not on curve");const yt=R(ot);let kt=r.sqrt(yt);return!(1&~Je)!=((kt&_i)===_i)&&(kt=r.neg(kt)),{x:ot,y:kt}}}}),ae=tt=>hu(Ga(tt,t.nByteLength));function te(tt){return tt>i>>_i}const we=(tt,st,Je)=>pu(tt.slice(st,Je));class Pe{constructor(st,Je,lt){this.r=st,this.s=Je,this.recovery=lt,this.assertValidity()}static fromCompact(st){const Je=t.nByteLength;return st=Mi("compactSignature",st,2*Je),new Pe(we(st,0,Je),we(st,Je,2*Je))}static fromDER(st){const{r:Je,s:lt}=gu.toSig(Mi("DER",st));return new Pe(Je,lt)}assertValidity(){if(!ee(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!ee(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(st){return new Pe(this.r,this.s,st)}recoverPublicKey(st){const{r:Je,s:lt,recovery:ot}=this,yt=ze(Mi("msgHash",st));if(null==ot||![0,1,2,3].includes(ot))throw new Error("recovery id invalid");const kt=2===ot||3===ot?Je+t.n:Je;if(kt>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const Qe=S.fromHex((1&ot?"03":"02")+ae(kt)),Ut=A(kt),Gt=u(-yt*Ut),Bt=u(lt*Ut),ht=S.BASE.multiplyAndAddUnsafe(Qe,Gt,Bt);if(!ht)throw new Error("point at infinify");return ht.assertValidity(),ht}hasHighS(){return te(this.s)}normalizeS(){return this.hasHighS()?new Pe(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return mf(this.toDERHex())}toDERHex(){return gu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mf(this.toCompactHex())}toCompactHex(){return ae(this.r)+ae(this.s)}}const Te={isValidPrivateKey(tt){try{return y(tt),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const tt=S3(t.n);return function EA(n,t,r=!1){const i=n.length,s=E3(t),c=S3(t);if(i<16||i<c||i>1024)throw new Error(`expected ${c}-1024 bytes of input, got ${i}`);const u=Jn(r?pu(n):fd(n),t-Zn)+Zn;return r?gf(u,s):Ga(u,s)}(t.randomBytes(tt),t.n)},precompute:(tt=8,st=S.BASE)=>(st._setWindowSize(tt),st.multiply(BigInt(3)),st)};function Ce(tt){const st=Wa(tt),Je="string"==typeof tt,lt=(st||Je)&&tt.length;return st?lt===s||lt===c:Je?lt===2*s||lt===2*c:tt instanceof S}const Le=t.bits2int||function(tt){const st=pu(tt),Je=8*tt.length-t.nBitLength;return Je>0?st>>BigInt(Je):st},ze=t.bits2int_modN||function(tt){return u(Le(tt))},$e=dv(t.nBitLength);function Ye(tt){if("bigint"!=typeof tt)throw new Error("bigint expected");if(!(va<=tt&&tt<$e))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Ga(tt,t.nByteLength)}const ct={lowS:t.lowS,prehash:!1},vt={lowS:t.lowS,prehash:!1};return S.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function Ae(tt,st=!0){return S.fromPrivateKey(tt).toRawBytes(st)},getSharedSecret:function je(tt,st,Je=!0){if(Ce(tt))throw new Error("first arg must be private key");if(!Ce(st))throw new Error("second arg must be public key");return S.fromHex(st).multiply(y(tt)).toRawBytes(Je)},sign:function at(tt,st,Je=ct){const{seed:lt,k2sig:ot}=function ut(tt,st,Je=ct){if(["recovered","canonical"].some(Kt=>Kt in Je))throw new Error("sign() legacy options not supported");const{hash:lt,randomBytes:ot}=t;let{lowS:yt,prehash:kt,extraEntropy:Nt}=Je;null==yt&&(yt=!0),tt=Mi("msgHash",tt),kt&&(tt=Mi("prehashed msgHash",lt(tt)));const Qe=ze(tt),Ut=y(st),Gt=[Ye(Ut),Ye(Qe)];if(null!=Nt){const Kt=!0===Nt?ot(r.BYTES):Nt;Gt.push(Mi("extraEntropy",Kt))}const Bt=yu(...Gt),ht=Qe;return{seed:Bt,k2sig:function Ct(Kt){const er=Le(Kt);if(!ee(er))return;const tr=A(er),Wt=S.BASE.multiply(er).toAffine(),Jt=u(Wt.x);if(Jt===va)return;const Hn=u(tr*u(ht+Jt*Ut));if(Hn===va)return;let co=(Wt.x===Jt?0:2)|Number(Wt.y&_i),jt=Hn;return yt&&te(Hn)&&(jt=function fe(tt){return te(tt)?u(-tt):tt}(Hn),co^=1),new Pe(Jt,jt,co)}}}(tt,st,Je);return w3(t.hash.outputLen,t.nByteLength,t.hmac)(lt,ot)},verify:function ft(tt,st,Je,lt=vt){const ot=tt;if(st=Mi("msgHash",st),Je=Mi("publicKey",Je),"strict"in lt)throw new Error("options.strict was renamed to lowS");const{lowS:yt,prehash:kt}=lt;let Nt,Qe;try{if("string"==typeof ot||Wa(ot))try{Nt=Pe.fromDER(ot)}catch(Wt){if(!(Wt instanceof gu.Err))throw Wt;Nt=Pe.fromCompact(ot)}else{if("object"!=typeof ot||"bigint"!=typeof ot.r||"bigint"!=typeof ot.s)throw new Error("PARSE");{const{r:Wt,s:Jt}=ot;Nt=new Pe(Wt,Jt)}}Qe=S.fromHex(Je)}catch(Wt){if("PARSE"===Wt.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(yt&&Nt.hasHighS())return!1;kt&&(st=t.hash(st));const{r:Ut,s:Gt}=Nt,Bt=ze(st),ht=A(Gt),Ct=u(Bt*ht),Kt=u(Ut*ht),er=S.BASE.multiplyAndAddUnsafe(Qe,Ct,Kt)?.toAffine();return!!er&&u(er.x)===Ut},ProjectivePoint:S,Signature:Pe,utils:Te}}function kA(n){return{hash:n,hmac:(t,...r)=>Gl(n,t,xp(...r)),randomBytes:Wl}}function T3(n,t){const r=i=>BA({...n,...kA(i)});return Object.freeze({...r(t),create:r})}BigInt(4);class mv extends h3{constructor(t,r,i,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=yf(this.buffer)}update(t){Hl(this);const{view:r,buffer:i,blockLen:s}=this,c=(t=lu(t)).length;for(let o=0;o<c;){const u=Math.min(s-this.pos,c-o);if(u!==s)i.set(t.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===s&&(this.process(r,0),this.pos=0);else{const A=yf(t);for(;s<=c-o;o+=s)this.process(A,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Hl(this),function u3(n,t){fu(n);const r=t.outputLen;if(n.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}(t,this),this.finished=!0;const{buffer:r,view:i,blockLen:s,isLE:c}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(i,0),o=0);for(let R=o;R<s;R++)r[R]=0;(function OA(n,t,r,i){if("function"==typeof n.setBigUint64)return n.setBigUint64(t,r,i);const s=BigInt(32),c=BigInt(4294967295),o=Number(r>>s&c),u=Number(r&c),S=i?0:4;n.setUint32(t+(i?4:0),o,i),n.setUint32(t+S,u,i)})(i,s-8,BigInt(8*this.length),c),this.process(i,0);const u=yf(t),A=this.outputLen;if(A%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const S=A/4,y=this.get();if(S>y.length)throw new Error("_sha2: outputLen bigger than state");for(let R=0;R<S;R++)u.setUint32(4*R,y[R],c)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:i,length:s,finished:c,destroyed:o,pos:u}=this;return t.length=s,t.pos=u,t.finished=c,t.destroyed=o,s%r&&t.buffer.set(i),t}}const CA=(n,t,r)=>n&t^~n&r,DA=(n,t,r)=>n&t^n&r^t&r,NA=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yd=new Uint32Array(64);class I3 extends mv{constructor(){super(64,32,8,!1),this.A=0|pd[0],this.B=0|pd[1],this.C=0|pd[2],this.D=0|pd[3],this.E=0|pd[4],this.F=0|pd[5],this.G=0|pd[6],this.H=0|pd[7]}get(){const{A:t,B:r,C:i,D:s,E:c,F:o,G:u,H:A}=this;return[t,r,i,s,c,o,u,A]}set(t,r,i,s,c,o,u,A){this.A=0|t,this.B=0|r,this.C=0|i,this.D=0|s,this.E=0|c,this.F=0|o,this.G=0|u,this.H=0|A}process(t,r){for(let R=0;R<16;R++,r+=4)yd[R]=t.getUint32(r,!1);for(let R=16;R<64;R++){const ee=yd[R-15],ae=yd[R-2],te=Ha(ee,7)^Ha(ee,18)^ee>>>3,fe=Ha(ae,17)^Ha(ae,19)^ae>>>10;yd[R]=fe+yd[R-7]+te+yd[R-16]|0}let{A:i,B:s,C:c,D:o,E:u,F:A,G:S,H:y}=this;for(let R=0;R<64;R++){const ae=y+(Ha(u,6)^Ha(u,11)^Ha(u,25))+CA(u,A,S)+NA[R]+yd[R]|0,fe=(Ha(i,2)^Ha(i,13)^Ha(i,22))+DA(i,s,c)|0;y=S,S=A,A=u,u=o+ae|0,o=c,c=s,s=i,i=ae+fe|0}i=i+this.A|0,s=s+this.B|0,c=c+this.C|0,o=o+this.D|0,u=u+this.E|0,A=A+this.F|0,S=S+this.G|0,y=y+this.H|0,this.set(i,s,c,o,u,A,S,y)}roundClean(){yd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ic=cv(()=>new I3),P3=hv(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),md=T3({a:P3.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:P3,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Ic),So=md;function B3(n){return null!=globalThis.Buffer?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}const KA=function UA(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var c=n.charAt(s),o=c.charCodeAt(0);if(255!==r[o])throw new TypeError(c+" is ambiguous");r[o]=s}var u=n.length,A=n.charAt(0),S=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function ee(te){if("string"!=typeof te)throw new TypeError("Expected String");if(0===te.length)return new Uint8Array;var fe=0;if(" "!==te[fe]){for(var we=0,Pe=0;te[fe]===A;)we++,fe++;for(var Te=(te.length-fe)*S+1>>>0,Ae=new Uint8Array(Te);te[fe];){var Ce=r[te.charCodeAt(fe)];if(255===Ce)return;for(var je=0,Le=Te-1;(0!==Ce||je<Pe)&&-1!==Le;Le--,je++)Ae[Le]=(Ce+=u*Ae[Le]>>>0)%256>>>0,Ce=Ce/256>>>0;if(0!==Ce)throw new Error("Non-zero carry");Pe=je,fe++}if(" "!==te[fe]){for(var ze=Te-Pe;ze!==Te&&0===Ae[ze];)ze++;for(var $e=new Uint8Array(we+(Te-ze)),Ye=we;ze!==Te;)$e[Ye++]=Ae[ze++];return $e}}}return{encode:function R(te){if(te instanceof Uint8Array||(ArrayBuffer.isView(te)?te=new Uint8Array(te.buffer,te.byteOffset,te.byteLength):Array.isArray(te)&&(te=Uint8Array.from(te))),!(te instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===te.length)return"";for(var fe=0,we=0,Pe=0,Te=te.length;Pe!==Te&&0===te[Pe];)Pe++,fe++;for(var Ae=(Te-Pe)*y+1>>>0,Ce=new Uint8Array(Ae);Pe!==Te;){for(var je=te[Pe],Le=0,ze=Ae-1;(0!==je||Le<we)&&-1!==ze;ze--,Le++)Ce[ze]=(je+=256*Ce[ze]>>>0)%u>>>0,je=je/u>>>0;if(0!==je)throw new Error("Non-zero carry");we=Le,Pe++}for(var $e=Ae-we;$e!==Ae&&0===Ce[$e];)$e++;for(var Ye=A.repeat(fe);$e<Ae;++$e)Ye+=n.charAt(Ce[$e]);return Ye},decodeUnsafe:ee,decode:function ae(te){var fe=ee(te);if(fe)return fe;throw new Error(`Non-${t} character`)}}},vf=(new Uint8Array(0),n=>{if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")});class GA{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class qA{constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return R3(this,t)}}class ZA{constructor(t){this.decoders=t}or(t){return R3(this,t)}decode(t){const i=this.decoders[t[0]];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const R3=(n,t)=>new ZA({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class JA{constructor(t,r,i,s){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new GA(t,r,i),this.decoder=new qA(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Mp=({name:n,prefix:t,encode:r,decode:i})=>new JA(n,t,r,i),ql=({prefix:n,name:t,alphabet:r})=>{const{encode:i,decode:s}=KA(r,t);return Mp({prefix:n,name:t,encode:i,decode:c=>vf(s(c))})},ls=({name:n,prefix:t,bitsPerChar:r,alphabet:i})=>Mp({prefix:t,name:n,encode:s=>((n,t,r)=>{const i="="===t[t.length-1],s=(1<<r)-1;let c="",o=0,u=0;for(let A=0;A<n.length;++A)for(u=u<<8|n[A],o+=8;o>r;)o-=r,c+=t[s&u>>o];if(o&&(c+=t[s&u<<r-o]),i)for(;c.length*r&7;)c+="=";return c})(s,i,r),decode:s=>((n,t,r,i)=>{const s={};for(let y=0;y<t.length;++y)s[t[y]]=y;let c=n.length;for(;"="===n[c-1];)--c;const o=new Uint8Array(c*r/8|0);let u=0,A=0,S=0;for(let y=0;y<c;++y){const R=s[n[y]];if(void 0===R)throw new SyntaxError(`Non-${i} character`);A=A<<r|R,u+=r,u>=8&&(u-=8,o[S++]=255&A>>u)}if(u>=r||255&A<<8-u)throw new SyntaxError("Unexpected end of data");return o})(s,i,r,n)}),QA=ql({prefix:"9",name:"base10",alphabet:"0123456789"}),eM=ls({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),tM=ls({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),rM=ls({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),k3=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),nM=k3.reduce((n,t,r)=>(n[r]=t,n),[]),iM=k3.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]),aM=Mp({prefix:"\u{1f680}",name:"base256emoji",encode:function sM(n){return n.reduce((t,r)=>t+nM[r],"")},decode:function oM(n){const t=[];for(const r of n){const i=iM[r.codePointAt(0)];if(void 0===i)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}}),Zl=ls({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cM=ls({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dM=ls({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uM=ls({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fM=ls({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lM=ls({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hM=ls({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pM=ls({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yM=ls({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),mM=ql({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gM=ql({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Pc=ql({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vM=ql({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),wM=ls({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bM=ls({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_M=ls({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xM=ls({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),EM=ls({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),SM=Mp({prefix:"\0",name:"identity",encode:n=>(n=>(new TextDecoder).decode(n))(n),decode:n=>(n=>(new TextEncoder).encode(n))(n)}),AM=new TextEncoder,MM=new TextDecoder,TM="json",IM=512,PM=n=>AM.encode(JSON.stringify(n)),BM=n=>JSON.parse(MM.decode(n)),RM="raw",kM=85,OM=n=>vf(n),CM=n=>vf(n);var O3=128,$M=-128,jM=Math.pow(2,31),LM=128,D3=127,FM=Math.pow(2,7),KM=Math.pow(2,14),zM=Math.pow(2,21),VM=Math.pow(2,28),HM=Math.pow(2,35),WM=Math.pow(2,42),GM=Math.pow(2,49),qM=Math.pow(2,56),ZM=Math.pow(2,63),YM={encode:function C3(n,t,r){t=t||[];for(var i=r=r||0;n>=jM;)t[r++]=255&n|O3,n/=128;for(;n&$M;)t[r++]=255&n|O3,n>>>=7;return t[r]=0|n,C3.bytes=r-i+1,t},decode:function gv(n,i){var o,r=0,s=0,c=i=i||0,u=n.length;do{if(c>=u)throw gv.bytes=0,new RangeError("Could not decode varint");o=n[c++],r+=s<28?(o&D3)<<s:(o&D3)*Math.pow(2,s),s+=7}while(o>=LM);return gv.bytes=c-i,r},encodingLength:function(n){return n<FM?1:n<KM?2:n<zM?3:n<VM?4:n<HM?5:n<WM?6:n<GM?7:n<qM?8:n<ZM?9:10}};const Tp=YM,Ip=(n,t,r=0)=>(Tp.encode(n,t,r),t),Pp=n=>Tp.encodingLength(n),Bp=(n,t)=>{const r=t.byteLength,i=Pp(n),s=i+Pp(r),c=new Uint8Array(s+r);return Ip(n,c,0),Ip(r,c,i),c.set(t,s),new wv(n,r,t,c)};class wv{constructor(t,r,i,s){this.code=t,this.size=r,this.digest=i,this.bytes=s}}const $3=vf,rT={code:0,name:"identity",encode:$3,digest:n=>Bp(0,$3(n))},j3=({name:n,code:t,encode:r})=>new nT(n,t,r);class nT{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Bp(this.code,r):r.then(i=>Bp(this.code,i))}throw Error("Unknown type, must be binary type")}}const U3=n=>function(){var t=(0,it.A)(function*(r){return new Uint8Array(yield crypto.subtle.digest(n,r))});return function(r){return t.apply(this,arguments)}}(),iT=j3({name:"sha2-256",code:18,encode:U3("SHA-256")}),sT=j3({name:"sha2-512",code:19,encode:U3("SHA-512")});Symbol,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const K3={...M,...G,...$,...H,...N,...B,..._,...T,...D,...v};function z3(n,t,r,i){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:i}}}const V3=z3("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>(new TextEncoder).encode(n.substring(1))),xv=z3("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{const t=function fT(n=0){return null!=globalThis.Buffer?.allocUnsafe?B3(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}((n=n.substring(1)).length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),H3={utf8:V3,"utf-8":V3,hex:K3.base16,latin1:xv,ascii:xv,binary:xv,...K3};function W3(n,t="utf8"){const r=H3[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${n}`):B3(globalThis.Buffer.from(n,"utf-8"))}var Rp=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};const hT_toString=function lT(n,t="utf8"){const r=H3[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(n).substring(1):globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8")};class wa{static validateKey(t){if("EC"!==t.kty||"P-256"!==t.crv)throw new Ot(Rt.Secp256r1KeyNotValid,"Invalid SECP256R1 JWK: `kty` MUST be `EC`. `crv` MUST be `P-256`")}static publicKeyToJwk(t){return Rp(this,void 0,void 0,function*(){let r;return r=33===t.byteLength?md.ProjectivePoint.fromHex(t).toRawBytes(!1):t,{alg:"ES256",kty:"EC",crv:"P-256",x:Ft.bytesToBase64Url(r.subarray(1,33)),y:Ft.bytesToBase64Url(r.subarray(33,65))}})}static privateJwkToBytes(t){return Ft.base64UrlToBytes(t.d)}static sign(t,r){return Rp(this,void 0,void 0,function*(){wa.validateKey(r);const i=yield Va.encode(t),s=wa.privateJwkToBytes(r);return Promise.resolve(md.sign(i,s).toCompactRawBytes())})}static verify(t,r,i){return Rp(this,void 0,void 0,function*(){let s;wa.validateKey(i),s=64===r.length?md.Signature.fromCompact(r):md.Signature.fromDER(r);const c=yield Va.encode(t),o=md.ProjectivePoint.fromAffine({x:wa.bytesToBigInt(Ft.base64UrlToBytes(i.x)),y:wa.bytesToBigInt(Ft.base64UrlToBytes(i.y))}).toRawBytes(!1);return md.verify(s,c,o)})}static generateKeyPair(){return Rp(this,void 0,void 0,function*(){const t=md.utils.randomPrivateKey(),r=So.getPublicKey(t,!1),i=Ft.bytesToBase64Url(t),s=yield wa.publicKeyToJwk(r);return{publicJwk:s,privateJwk:Object.assign(Object.assign({},s),{d:i})}})}static bytesToBigInt(t){return BigInt("0x"+hT_toString(t,"base16"))}}const kp={Ed25519:Vg,secp256k1:{sign:Ki.sign,verify:Ki.verify,generateKeyPair:Ki.generateKeyPair,publicKeyToJwk:Ki.publicKeyToJwk},"P-256":{sign:wa.sign,verify:wa.verify,generateKeyPair:wa.generateKeyPair,publicKeyToJwk:wa.publicKeyToJwk}};class yT{constructor(t){var r,i;if(void 0===t.keyId&&void 0===t.privateJwk.kid)throw new Ot(Rt.PrivateKeySignerUnableToDeduceKeyId,"Unable to deduce the key ID");if(void 0===t.algorithm&&void 0===t.privateJwk.alg)throw new Ot(Rt.PrivateKeySignerUnableToDeduceAlgorithm,"Unable to deduce the signature algorithm");if(this.keyId=null!==(r=t.keyId)&&void 0!==r?r:t.privateJwk.kid,this.algorithm=null!==(i=t.algorithm)&&void 0!==i?i:t.privateJwk.alg,this.privateJwk=t.privateJwk,this.signatureAlgorithm=kp[t.privateJwk.crv],!this.signatureAlgorithm)throw new Ot(Rt.PrivateKeySignerUnsupportedCurve,`Unsupported crv ${t.privateJwk.crv}, crv must be one of ${Object.keys(kp)}`)}sign(t){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){return yield this.signatureAlgorithm.sign(t,this.privateJwk)})}}class ci{static getKid(t){const{kid:r}=Ft.base64UrlToObject(t.protected);return r}static getSignerDid(t){const r=ci.getKid(t);return ci.extractDid(r)}static verifySignature(t,r,i){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){const s=kp[i.crv];if(!s)throw new Ot(Rt.JwsVerifySignatureUnsupportedCrv,`unsupported crv. crv must be one of ${Object.keys(kp)}`);const c=Ft.stringToBytes(`${r.protected}.${t}`),o=Ft.base64UrlToBytes(r.signature);return yield s.verify(c,o,i)})}static decodePlainObjectPayload(t){let r;try{r=Ft.base64UrlToObject(t.payload)}catch{throw new Ot(Rt.JwsDecodePlainObjectPayloadInvalid,"payload is not a JSON object")}if(!ve(r))throw new Ot(Rt.JwsDecodePlainObjectPayloadInvalid,"signed payload must be a plain object");return r}static extractDid(t){const[r]=t.split("#");return r}static createSigners(t){return t.map(i=>ci.createSigner(i))}static createSigner(t){return new yT({privateJwk:t.keyPair.privateJwk,keyId:t.keyId})}}var Ev=I(40573);const Yl="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,G3=new Set,Sv="object"==typeof Ev&&Ev?Ev:{},q3=(n,t,r,i)=>{"function"==typeof Sv.emitWarning?Sv.emitWarning(n,t,r,i):console.error(`[${r}] ${t}: ${n}`)};let Op=globalThis.AbortController,Z3=globalThis.AbortSignal;if(typeof Op>"u"){Z3=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,s){this._onabort.push(s)}},Op=class{constructor(){t()}signal=new Z3;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(const s of this.signal._onabort)s(i);this.signal.onabort?.(i)}}};let n="1"!==Sv.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{n&&(n=!1,q3("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");const gd=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),J3=n=>gd(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Cp:null:null;class Cp extends Array{constructor(t){super(t),this.fill(0)}}class wf{heap;length;static#a=!1;static create(t){const r=J3(t);if(!r)return[];wf.#a=!0;const i=new wf(t,r);return wf.#a=!1,i}constructor(t,r){if(!wf.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class Av{#a;#u;#v;#p;#P;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#y;#i;#r;#e;#d;#l;#c;#s;#m;#o;#x;#E;#g;#w;#A;#f;static unsafeExposeInternals(t){return{starts:t.#E,ttls:t.#g,sizes:t.#x,keyMap:t.#i,keyList:t.#r,valList:t.#e,next:t.#d,prev:t.#l,get head(){return t.#c},get tail(){return t.#s},free:t.#m,isBackgroundFetch:r=>t.#t(r),backgroundFetch:(r,i,s,c)=>t.#k(r,i,s,c),moveToTail:r=>t.#I(r),indexes:r=>t.#b(r),rindexes:r=>t.#_(r),isStale:r=>t.#h(r)}}get max(){return this.#a}get maxSize(){return this.#u}get calculatedSize(){return this.#y}get size(){return this.#n}get fetchMethod(){return this.#P}get dispose(){return this.#v}get disposeAfter(){return this.#p}constructor(t){const{max:r=0,ttl:i,ttlResolution:s=1,ttlAutopurge:c,updateAgeOnGet:o,updateAgeOnHas:u,allowStale:A,dispose:S,disposeAfter:y,noDisposeOnSet:R,noUpdateTTL:ee,maxSize:ae=0,maxEntrySize:te=0,sizeCalculation:fe,fetchMethod:we,noDeleteOnFetchRejection:Pe,noDeleteOnStaleGet:Te,allowStaleOnFetchRejection:Ae,allowStaleOnFetchAbort:Ce,ignoreFetchAbort:je}=t;if(0!==r&&!gd(r))throw new TypeError("max option must be a nonnegative integer");const Le=r?J3(r):Array;if(!Le)throw new Error("invalid max value: "+r);if(this.#a=r,this.#u=ae,this.maxEntrySize=te||this.#u,this.sizeCalculation=fe,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==we&&"function"!=typeof we)throw new TypeError("fetchMethod must be a function if specified");if(this.#P=we,this.#A=!!we,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#d=new Le(r),this.#l=new Le(r),this.#c=0,this.#s=0,this.#m=wf.create(r),this.#n=0,this.#y=0,"function"==typeof S&&(this.#v=S),"function"==typeof y?(this.#p=y,this.#o=[]):(this.#p=void 0,this.#o=void 0),this.#w=!!this.#v,this.#f=!!this.#p,this.noDisposeOnSet=!!R,this.noUpdateTTL=!!ee,this.noDeleteOnFetchRejection=!!Pe,this.allowStaleOnFetchRejection=!!Ae,this.allowStaleOnFetchAbort=!!Ce,this.ignoreFetchAbort=!!je,0!==this.maxEntrySize){if(0!==this.#u&&!gd(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!gd(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#j()}if(this.allowStale=!!A,this.noDeleteOnStaleGet=!!Te,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!u,this.ttlResolution=gd(s)||0===s?s:1,this.ttlAutopurge=!!c,this.ttl=i||0,this.ttl){if(!gd(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(0===this.#a&&0===this.ttl&&0===this.#u)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#u){const ze="LRU_CACHE_UNBOUNDED";(n=>!G3.has(n))(ze)&&(G3.add(ze),q3("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ze,Av))}}getRemainingTTL(t){return this.#i.has(t)?1/0:0}#O(){const t=new Cp(this.#a),r=new Cp(this.#a);this.#g=t,this.#E=r,this.#C=(c,o,u=Yl.now())=>{if(r[c]=0!==o?u:0,t[c]=o,0!==o&&this.ttlAutopurge){const A=setTimeout(()=>{this.#h(c)&&this.delete(this.#r[c])},o+1);A.unref&&A.unref()}},this.#M=c=>{r[c]=0!==t[c]?Yl.now():0},this.#S=(c,o)=>{if(t[o]){const u=t[o],A=r[o];c.ttl=u,c.start=A,c.now=i||s(),c.remainingTTL=u-(c.now-A)}};let i=0;const s=()=>{const c=Yl.now();if(this.ttlResolution>0){i=c;const o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return c};this.getRemainingTTL=c=>{const o=this.#i.get(c);if(void 0===o)return 0;const u=t[o],A=r[o];return 0===u||0===A?1/0:u-((i||s())-A)},this.#h=c=>0!==t[c]&&0!==r[c]&&(i||s())-r[c]>t[c]}#M=()=>{};#S=()=>{};#C=()=>{};#h=()=>!1;#j(){const t=new Cp(this.#a);this.#y=0,this.#x=t,this.#T=r=>{this.#y-=t[r],t[r]=0},this.#D=(r,i,s,c)=>{if(this.#t(i))return 0;if(!gd(s)){if(!c)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof c)throw new TypeError("sizeCalculation must be a function");if(s=c(i,r),!gd(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return s},this.#B=(r,i,s)=>{if(t[r]=i,this.#u){const c=this.#u-t[r];for(;this.#y>c;)this.#R(!0)}this.#y+=t[r],s&&(s.entrySize=i,s.totalCalculatedSize=this.#y)}}#T=t=>{};#B=(t,r,i)=>{};#D=(t,r,i,s)=>{if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#b({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#s;this.#N(r)&&((t||!this.#h(r))&&(yield r),r!==this.#c);)r=this.#l[r]}*#_({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#c;this.#N(r)&&((t||!this.#h(r))&&(yield r),r!==this.#s);)r=this.#d[r]}#N(t){return void 0!==t&&this.#i.get(this.#r[t])===t}*entries(){for(const t of this.#b())void 0!==this.#e[t]&&void 0!==this.#r[t]&&!this.#t(this.#e[t])&&(yield[this.#r[t],this.#e[t]])}*rentries(){for(const t of this.#_())void 0!==this.#e[t]&&void 0!==this.#r[t]&&!this.#t(this.#e[t])&&(yield[this.#r[t],this.#e[t]])}*keys(){for(const t of this.#b()){const r=this.#r[t];void 0!==r&&!this.#t(this.#e[t])&&(yield r)}}*rkeys(){for(const t of this.#_()){const r=this.#r[t];void 0!==r&&!this.#t(this.#e[t])&&(yield r)}}*values(){for(const t of this.#b())void 0!==this.#e[t]&&!this.#t(this.#e[t])&&(yield this.#e[t])}*rvalues(){for(const t of this.#_())void 0!==this.#e[t]&&!this.#t(this.#e[t])&&(yield this.#e[t])}[Symbol.iterator](){return this.entries()}find(t,r={}){for(const i of this.#b()){const s=this.#e[i],c=this.#t(s)?s.__staleWhileFetching:s;if(void 0!==c&&t(c,this.#r[i],this))return this.get(this.#r[i],r)}}forEach(t,r=this){for(const i of this.#b()){const s=this.#e[i],c=this.#t(s)?s.__staleWhileFetching:s;void 0!==c&&t.call(r,c,this.#r[i],this)}}rforEach(t,r=this){for(const i of this.#_()){const s=this.#e[i],c=this.#t(s)?s.__staleWhileFetching:s;void 0!==c&&t.call(r,c,this.#r[i],this)}}purgeStale(){let t=!1;for(const r of this.#_({allowStale:!0}))this.#h(r)&&(this.delete(this.#r[r]),t=!0);return t}dump(){const t=[];for(const r of this.#b({allowStale:!0})){const i=this.#r[r],s=this.#e[r],c=this.#t(s)?s.__staleWhileFetching:s;if(void 0===c||void 0===i)continue;const o={value:c};if(this.#g&&this.#E){o.ttl=this.#g[r];const u=Yl.now()-this.#E[r];o.start=Math.floor(Date.now()-u)}this.#x&&(o.size=this.#x[r]),t.unshift([i,o])}return t}load(t){this.clear();for(const[r,i]of t){if(i.start){const s=Date.now()-i.start;i.start=Yl.now()-s}this.set(r,i.value,i)}}set(t,r,i={}){if(void 0===r)return this.delete(t),this;const{ttl:s=this.ttl,start:c,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:A}=i;let{noUpdateTTL:S=this.noUpdateTTL}=i;const y=this.#D(t,r,i.size||0,u);if(this.maxEntrySize&&y>this.maxEntrySize)return A&&(A.set="miss",A.maxEntrySizeExceeded=!0),this.delete(t),this;let R=0===this.#n?void 0:this.#i.get(t);if(void 0===R)R=0===this.#n?this.#s:0!==this.#m.length?this.#m.pop():this.#n===this.#a?this.#R(!1):this.#n,this.#r[R]=t,this.#e[R]=r,this.#i.set(t,R),this.#d[this.#s]=R,this.#l[R]=this.#s,this.#s=R,this.#n++,this.#B(R,y,A),A&&(A.set="add"),S=!1;else{this.#I(R);const ee=this.#e[R];if(r!==ee){if(this.#A&&this.#t(ee)?ee.__abortController.abort(new Error("replaced")):o||(this.#w&&this.#v?.(ee,t,"set"),this.#f&&this.#o?.push([ee,t,"set"])),this.#T(R),this.#B(R,y,A),this.#e[R]=r,A){A.set="replace";const ae=ee&&this.#t(ee)?ee.__staleWhileFetching:ee;void 0!==ae&&(A.oldValue=ae)}}else A&&(A.set="update")}if(0!==s&&!this.#g&&this.#O(),this.#g&&(S||this.#C(R,s,c),A&&this.#S(A,R)),!o&&this.#f&&this.#o){const ee=this.#o;let ae;for(;ae=ee?.shift();)this.#p?.(...ae)}return this}pop(){try{for(;this.#n;){const t=this.#e[this.#c];if(this.#R(!0),this.#t(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#f&&this.#o){const t=this.#o;let r;for(;r=t?.shift();)this.#p?.(...r)}}}#R(t){const r=this.#c,i=this.#r[r],s=this.#e[r];return this.#A&&this.#t(s)?s.__abortController.abort(new Error("evicted")):(this.#w||this.#f)&&(this.#w&&this.#v?.(s,i,"evict"),this.#f&&this.#o?.push([s,i,"evict"])),this.#T(r),t&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#m.push(r)),1===this.#n?(this.#c=this.#s=0,this.#m.length=0):this.#c=this.#d[r],this.#i.delete(i),this.#n--,r}has(t,r={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=r,c=this.#i.get(t);if(void 0!==c){const o=this.#e[c];if(this.#t(o)&&void 0===o.__staleWhileFetching)return!1;if(!this.#h(c))return i&&this.#M(c),s&&(s.has="hit",this.#S(s,c)),!0;s&&(s.has="stale",this.#S(s,c))}else s&&(s.has="miss");return!1}peek(t,r={}){const{allowStale:i=this.allowStale}=r,s=this.#i.get(t);if(void 0!==s&&(i||!this.#h(s))){const c=this.#e[s];return this.#t(c)?c.__staleWhileFetching:c}}#k(t,r,i,s){const c=void 0===r?void 0:this.#e[r];if(this.#t(c))return c;const o=new Op,{signal:u}=i;u?.addEventListener("abort",()=>o.abort(u.reason),{signal:o.signal});const A={signal:o.signal,options:i,context:s},S=(fe,we=!1)=>{const{aborted:Pe}=o.signal,Te=i.ignoreFetchAbort&&void 0!==fe;return i.status&&(Pe&&!we?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,Te&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),!Pe||Te||we?(this.#e[r]===ae&&(void 0===fe?ae.__staleWhileFetching?this.#e[r]=ae.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,fe,A.options))),fe):R(o.signal.reason)},R=fe=>{const{aborted:we}=o.signal,Pe=we&&i.allowStaleOnFetchAbort,Te=Pe||i.allowStaleOnFetchRejection,Ce=ae;if(this.#e[r]===ae&&((Te||i.noDeleteOnFetchRejection)&&void 0!==Ce.__staleWhileFetching?Pe||(this.#e[r]=Ce.__staleWhileFetching):this.delete(t)),Te)return i.status&&void 0!==Ce.__staleWhileFetching&&(i.status.returnedStale=!0),Ce.__staleWhileFetching;if(Ce.__returned===Ce)throw fe};i.status&&(i.status.fetchDispatched=!0);const ae=new Promise((fe,we)=>{const Pe=this.#P?.(t,c,A);Pe&&Pe instanceof Promise&&Pe.then(Te=>fe(Te),we),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(fe(),i.allowStaleOnFetchAbort&&(fe=Te=>S(Te,!0)))})}).then(S,fe=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=fe),R(fe))),te=Object.assign(ae,{__abortController:o,__staleWhileFetching:c,__returned:void 0});return void 0===r?(this.set(t,te,{...A.options,status:void 0}),r=this.#i.get(t)):this.#e[r]=te,te}#t(t){if(!this.#A)return!1;const r=t;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Op}fetch(t,r={}){var i=this;return(0,it.A)(function*(){const{allowStale:s=i.allowStale,updateAgeOnGet:c=i.updateAgeOnGet,noDeleteOnStaleGet:o=i.noDeleteOnStaleGet,ttl:u=i.ttl,noDisposeOnSet:A=i.noDisposeOnSet,size:S=0,sizeCalculation:y=i.sizeCalculation,noUpdateTTL:R=i.noUpdateTTL,noDeleteOnFetchRejection:ee=i.noDeleteOnFetchRejection,allowStaleOnFetchRejection:ae=i.allowStaleOnFetchRejection,ignoreFetchAbort:te=i.ignoreFetchAbort,allowStaleOnFetchAbort:fe=i.allowStaleOnFetchAbort,context:we,forceRefresh:Pe=!1,status:Te,signal:Ae}=r;if(!i.#A)return Te&&(Te.fetch="get"),i.get(t,{allowStale:s,updateAgeOnGet:c,noDeleteOnStaleGet:o,status:Te});const Ce={allowStale:s,updateAgeOnGet:c,noDeleteOnStaleGet:o,ttl:u,noDisposeOnSet:A,size:S,sizeCalculation:y,noUpdateTTL:R,noDeleteOnFetchRejection:ee,allowStaleOnFetchRejection:ae,allowStaleOnFetchAbort:fe,ignoreFetchAbort:te,status:Te,signal:Ae};let je=i.#i.get(t);if(void 0===je){Te&&(Te.fetch="miss");const Le=i.#k(t,je,Ce,we);return Le.__returned=Le}{const Le=i.#e[je];if(i.#t(Le)){const ct=s&&void 0!==Le.__staleWhileFetching;return Te&&(Te.fetch="inflight",ct&&(Te.returnedStale=!0)),ct?Le.__staleWhileFetching:Le.__returned=Le}const ze=i.#h(je);if(!Pe&&!ze)return Te&&(Te.fetch="hit"),i.#I(je),c&&i.#M(je),Te&&i.#S(Te,je),Le;const $e=i.#k(t,je,Ce,we),ut=void 0!==$e.__staleWhileFetching&&s;return Te&&(Te.fetch=ze?"stale":"refresh",ut&&ze&&(Te.returnedStale=!0)),ut?$e.__staleWhileFetching:$e.__returned=$e}})()}get(t,r={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:c=this.noDeleteOnStaleGet,status:o}=r,u=this.#i.get(t);if(void 0!==u){const A=this.#e[u],S=this.#t(A);return o&&this.#S(o,u),this.#h(u)?(o&&(o.get="stale"),S?(o&&i&&void 0!==A.__staleWhileFetching&&(o.returnedStale=!0),i?A.__staleWhileFetching:void 0):(c||this.delete(t),o&&i&&(o.returnedStale=!0),i?A:void 0)):(o&&(o.get="hit"),S?A.__staleWhileFetching:(this.#I(u),s&&this.#M(u),A))}o&&(o.get="miss")}#$(t,r){this.#l[r]=t,this.#d[t]=r}#I(t){t!==this.#s&&(t===this.#c?this.#c=this.#d[t]:this.#$(this.#l[t],this.#d[t]),this.#$(this.#s,t),this.#s=t)}delete(t){let r=!1;if(0!==this.#n){const i=this.#i.get(t);if(void 0!==i)if(r=!0,1===this.#n)this.clear();else{this.#T(i);const s=this.#e[i];this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#w||this.#f)&&(this.#w&&this.#v?.(s,t,"delete"),this.#f&&this.#o?.push([s,t,"delete"])),this.#i.delete(t),this.#r[i]=void 0,this.#e[i]=void 0,i===this.#s?this.#s=this.#l[i]:i===this.#c?this.#c=this.#d[i]:(this.#d[this.#l[i]]=this.#d[i],this.#l[this.#d[i]]=this.#l[i]),this.#n--,this.#m.push(i)}}if(this.#f&&this.#o?.length){const i=this.#o;let s;for(;s=i?.shift();)this.#p?.(...s)}return r}clear(){for(const t of this.#_({allowStale:!0})){const r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{const i=this.#r[t];this.#w&&this.#v?.(r,i,"delete"),this.#f&&this.#o?.push([r,i,"delete"])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#g&&this.#E&&(this.#g.fill(0),this.#E.fill(0)),this.#x&&this.#x.fill(0),this.#c=0,this.#s=0,this.#m.length=0,this.#y=0,this.#n=0,this.#f&&this.#o){const t=this.#o;let r;for(;r=t?.shift();)this.#p?.(...r)}}}var Y3=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class vT{constructor(t){this.timeToLiveInSeconds=t,this.cache=new Av({max:1e5,ttl:1e3*t})}set(t,r){return Y3(this,void 0,void 0,function*(){try{this.cache.set(t,r)}catch{}})}get(t){return Y3(this,void 0,void 0,function*(){return this.cache.get(t)})}}const wT=di,vu=new RegExp("^[A-Za-z0-9_-]+$","u");function Nn(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){const A=Nn.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),!n||"object"!=typeof n||Array.isArray(n))return Nn.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const ee=0;for(const ae in n)if("payload"!==ae&&"signatures"!==ae)return Nn.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ae},message:"must NOT have additional properties"}],!1;if(0===ee){if(void 0!==n.payload){let ae=n.payload;const te=0;if("string"!=typeof ae)return Nn.errors=[{instancePath:t+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!vu.test(ae))return Nn.errors=[{instancePath:t+"/payload",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1;var S=0===te}else S=!0;if(S)if(void 0!==n.signatures){let ae=n.signatures;const te=0;if(0===te){if(!Array.isArray(ae))return Nn.errors=[{instancePath:t+"/signatures",schemaPath:"#/properties/signatures/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(ae.length<1)return Nn.errors=[{instancePath:t+"/signatures",schemaPath:"#/properties/signatures/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{const we=ae.length;for(let Pe=0;Pe<we;Pe++){let Te=ae[Pe];const Ae=0;if(0===Ae){if(!Te||"object"!=typeof Te||Array.isArray(Te))return Nn.errors=[{instancePath:t+"/signatures/"+Pe,schemaPath:"#/properties/signatures/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0!==Te.protected){let je=Te.protected;const Le=0;if("string"!=typeof je)return Nn.errors=[{instancePath:t+"/signatures/"+Pe+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!vu.test(je))return Nn.errors=[{instancePath:t+"/signatures/"+Pe+"/protected",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1;var R=0===Le}else R=!0;if(R)if(void 0!==Te.signature){let je=Te.signature;const Le=0;if("string"!=typeof je)return Nn.errors=[{instancePath:t+"/signatures/"+Pe+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!vu.test(je))return Nn.errors=[{instancePath:t+"/signatures/"+Pe+"/signature",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1;R=0===Le}else R=!0}if(0!==Ae)break}}}S=0===te}else S=!0}}return Nn.errors=null,!0}function di(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=di.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return di.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const S=u;for(const y in n)if("signature"!==y)return di.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;S===u&&void 0!==n.signature&&(Nn(n.signature,{instancePath:t+"/signature",parentData:n,parentDataProperty:"signature",rootData:s,dynamicAnchors:c})||(o=null===o?Nn.errors:o.concat(Nn.errors),u=o.length))}}return di.errors=o,0===u}Nn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1},di.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const bT=Qi,vd={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-write-unidentified.json",type:"object",required:["descriptor"],properties:{recordId:{type:"string"},contextId:{type:"string",pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},attestation:{$ref:"https://identity.foundation/dwn/json-schemas/general-jws.json"},authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-owner.json"},encryption:{type:"object",properties:{algorithm:{type:"string",enum:["A256CTR"]},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},keyEncryption:{type:"array",minItems:1,items:{type:"object",properties:{rootKeyId:{type:"string"},derivationScheme:{type:"string",enum:["dataFormats","protocolContext","protocolPath","schemas"]},derivedPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},algorithm:{type:"string",enum:["ECIES-ES256K"]},encryptedKey:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},initializationVector:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"},ephemeralPublicKey:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"},messageAuthenticationCode:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url"}},additionalProperties:!1,required:["rootKeyId","derivationScheme","algorithm","encryptedKey","initializationVector","ephemeralPublicKey","messageAuthenticationCode"]}}},additionalProperties:!1,required:["algorithm","initializationVector","keyEncryption"]},descriptor:{type:"object",properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Write"],type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},protocol:{type:"string"},protocolPath:{type:"string",pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},schema:{type:"string"},tags:{type:"object",minProperties:1,maxProperties:10,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"array",minItems:1,maxItems:10,items:{type:"string"}},{type:"array",minItems:1,maxItems:10,items:{type:"number"}}]}},parentId:{type:"string"},dataCid:{type:"string"},dataSize:{type:"number"},dateCreated:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},published:{type:"boolean"},datePublished:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},dataFormat:{type:"string"}},additionalProperties:!1,required:["interface","method","dataCid","dataSize","dateCreated","messageTimestamp","dataFormat"],dependencies:{parentId:["protocol"]},allOf:[{$comment:"rule defining `published` and `datePublished` relationship",anyOf:[{properties:{published:{type:"boolean",enum:[!0]}},required:["published","datePublished"]},{properties:{published:{type:"boolean",enum:[!1]}},not:{required:["datePublished"]}},{allOf:[{not:{required:["published"]}},{not:{required:["datePublished"]}}]}]}]}},$comment:"rule defining `protocol` and `contextId` relationship",anyOf:[{properties:{descriptor:{type:"object",required:["protocol","protocolPath"]}},required:["contextId"]},{allOf:[{not:{required:["contextId"]}},{properties:{descriptor:{type:"object",not:{required:["protocol"]}}}},{properties:{descriptor:{type:"object",not:{required:["protocolPath"]}}}}]}]},_T=new RegExp("^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$","u"),wu=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u"),xT=new RegExp("^[a-zA-Z]+(/[a-zA-Z]+)*$","u"),ui=new RegExp("^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$","u"),bf={validate:Go};function qa(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=qa.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return qa.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const y=u;for(const R in n)if("signature"!==R&&"authorDelegatedGrant"!==R&&"ownerSignature"!==R&&"ownerDelegatedGrant"!==R)return qa.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:R},message:"must NOT have additional properties"}],!1;if(y===u){let R;if(void 0!==n.ownerSignature&&void 0===n.signature&&(R="signature"))return qa.errors=[{instancePath:t,schemaPath:"#/dependencies",keyword:"dependencies",params:{property:"ownerSignature",missingProperty:R,depsCount:1,deps:"signature"},message:"must have property signature when property ownerSignature is present"}],!1;if(void 0!==n.signature){const ee=u;Nn(n.signature,{instancePath:t+"/signature",parentData:n,parentDataProperty:"signature",rootData:s,dynamicAnchors:c})||(o=null===o?Nn.errors:o.concat(Nn.errors),u=o.length);var S=ee===u}else S=!0;if(S){if(void 0!==n.authorDelegatedGrant){const ee=u;bf.validate(n.authorDelegatedGrant,{instancePath:t+"/authorDelegatedGrant",parentData:n,parentDataProperty:"authorDelegatedGrant",rootData:s,dynamicAnchors:c})||(o=null===o?bf.validate.errors:o.concat(bf.validate.errors),u=o.length),S=ee===u}else S=!0;if(S){if(void 0!==n.ownerSignature){const ee=u;Nn(n.ownerSignature,{instancePath:t+"/ownerSignature",parentData:n,parentDataProperty:"ownerSignature",rootData:s,dynamicAnchors:c})||(o=null===o?Nn.errors:o.concat(Nn.errors),u=o.length),S=ee===u}else S=!0;if(S)if(void 0!==n.ownerDelegatedGrant){const ee=u;bf.validate(n.ownerDelegatedGrant,{instancePath:t+"/ownerDelegatedGrant",parentData:n,parentDataProperty:"ownerDelegatedGrant",rootData:s,dynamicAnchors:c})||(o=null===o?bf.validate.errors:o.concat(bf.validate.errors),u=o.length),S=ee===u}else S=!0}}}}}return qa.errors=o,0===u}qa.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const X3={$id:"https://identity.foundation/dwn/json-schemas/general-jwk.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",required:["kty"],properties:{alg:{type:"string"},kid:{type:"string"},kty:{enum:["EC","RSA","oct","OKP"]},crv:{type:"string"},use:{type:"string"},key_ops:{type:"string"},x5u:{type:"string"},x5c:{type:"string"},x5t:{type:"string"},"x5t#S256":{type:"string"}},oneOf:[{properties:{kty:{const:"EC"},crv:{type:"string"},x:{type:"string"},y:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"OKP"},crv:{type:"string"},x:{type:"string"},d:{type:"string"}},required:["crv","x"]},{properties:{kty:{const:"RSA"},n:{type:"string"},e:{type:"string"},d:{type:"string"},p:{type:"string"},q:{type:"string"},dp:{type:"string"},dq:{type:"string"},qi:{type:"string"},oth:{type:"object"}},required:["n","e"]},{properties:{kty:{const:"oct"},k:{type:"string"}},required:["k"]}]};function $n(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=$n.evaluated;A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0);const S=u,y=u;let R=!1,ee=null;const ae=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let ft;if(void 0===n.crv&&(ft="crv")||void 0===n.x&&(ft="x")){const tt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/required",keyword:"required",params:{missingProperty:ft},message:"must have required property '"+ft+"'"};null===o?o=[tt]:o.push(tt),u++}else{if(void 0!==n.kty){const tt=u;if("EC"!==n.kty){const st={instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};null===o?o=[st]:o.push(st),u++}var te=tt===u}else te=!0;if(te){if(void 0!==n.crv){const tt=u;if("string"!=typeof n.crv){const Je={instancePath:t+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}te=tt===u}else te=!0;if(te){if(void 0!==n.x){const tt=u;if("string"!=typeof n.x){const Je={instancePath:t+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}te=tt===u}else te=!0;if(te){if(void 0!==n.y){const tt=u;if("string"!=typeof n.y){const Je={instancePath:t+"/y",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}te=tt===u}else te=!0;if(te)if(void 0!==n.d){const tt=u;if("string"!=typeof n.d){const Je={instancePath:t+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}te=tt===u}else te=!0}}}}}if(Te=ae===u){R=!0,ee=0;var fe={kty:!0,crv:!0,x:!0,y:!0,d:!0}}const we=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let ft;if(void 0===n.crv&&(ft="crv")||void 0===n.x&&(ft="x")){const tt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/required",keyword:"required",params:{missingProperty:ft},message:"must have required property '"+ft+"'"};null===o?o=[tt]:o.push(tt),u++}else{if(void 0!==n.kty){const tt=u;if("OKP"!==n.kty){const st={instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};null===o?o=[st]:o.push(st),u++}var Pe=tt===u}else Pe=!0;if(Pe){if(void 0!==n.crv){const tt=u;if("string"!=typeof n.crv){const Je={instancePath:t+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}Pe=tt===u}else Pe=!0;if(Pe){if(void 0!==n.x){const tt=u;if("string"!=typeof n.x){const Je={instancePath:t+"/x",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}Pe=tt===u}else Pe=!0;if(Pe)if(void 0!==n.d){const tt=u;if("string"!=typeof n.d){const Je={instancePath:t+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}Pe=tt===u}else Pe=!0}}}}if((Te=we===u)&&R)R=!1,ee=[ee,1];else{Te&&(R=!0,ee=1,!0!==fe&&((fe=fe||{}).kty=!0,fe.crv=!0,fe.x=!0,fe.d=!0));const ft=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let st;if(void 0===n.n&&(st="n")||void 0===n.e&&(st="e")){const Je={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/required",keyword:"required",params:{missingProperty:st},message:"must have required property '"+st+"'"};null===o?o=[Je]:o.push(Je),u++}else{if(void 0!==n.kty){const Je=u;if("RSA"!==n.kty){const lt={instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};null===o?o=[lt]:o.push(lt),u++}var Ae=Je===u}else Ae=!0;if(Ae){if(void 0!==n.n){const Je=u;if("string"!=typeof n.n){const ot={instancePath:t+"/n",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ot]:o.push(ot),u++}Ae=Je===u}else Ae=!0;if(Ae){if(void 0!==n.e){const Je=u;if("string"!=typeof n.e){const ot={instancePath:t+"/e",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ot]:o.push(ot),u++}Ae=Je===u}else Ae=!0;if(Ae){if(void 0!==n.d){const Je=u;if("string"!=typeof n.d){const ot={instancePath:t+"/d",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ot]:o.push(ot),u++}Ae=Je===u}else Ae=!0;if(Ae){if(void 0!==n.p){const Je=u;if("string"!=typeof n.p){const ot={instancePath:t+"/p",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ot]:o.push(ot),u++}Ae=Je===u}else Ae=!0;if(Ae){if(void 0!==n.q){const Je=u;if("string"!=typeof n.q){const ot={instancePath:t+"/q",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ot]:o.push(ot),u++}Ae=Je===u}else Ae=!0;if(Ae){if(void 0!==n.dp){const Je=u;if("string"!=typeof n.dp){const ot={instancePath:t+"/dp",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ot]:o.push(ot),u++}Ae=Je===u}else Ae=!0;if(Ae){if(void 0!==n.dq){const Je=u;if("string"!=typeof n.dq){const ot={instancePath:t+"/dq",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ot]:o.push(ot),u++}Ae=Je===u}else Ae=!0;if(Ae){if(void 0!==n.qi){const Je=u;if("string"!=typeof n.qi){const ot={instancePath:t+"/qi",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ot]:o.push(ot),u++}Ae=Je===u}else Ae=!0;if(Ae)if(void 0!==n.oth){let Je=n.oth;const lt=u;if(!Je||"object"!=typeof Je||Array.isArray(Je)){const yt={instancePath:t+"/oth",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[yt]:o.push(yt),u++}Ae=lt===u}else Ae=!0}}}}}}}}}}if((Te=ft===u)&&R)R=!1,ee=[ee,2];else{Te&&(R=!0,ee=2,!0!==fe&&((fe=fe||{}).kty=!0,fe.n=!0,fe.e=!0,fe.d=!0,fe.p=!0,fe.q=!0,fe.dp=!0,fe.dq=!0,fe.qi=!0,fe.oth=!0));const st=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let lt;if(void 0===n.k&&(lt="k")){const ot={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/required",keyword:"required",params:{missingProperty:lt},message:"must have required property '"+lt+"'"};null===o?o=[ot]:o.push(ot),u++}else{if(void 0!==n.kty){const ot=u;if("oct"!==n.kty){const yt={instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};null===o?o=[yt]:o.push(yt),u++}var Ce=ot===u}else Ce=!0;if(Ce)if(void 0!==n.k){const ot=u;if("string"!=typeof n.k){const kt={instancePath:t+"/k",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[kt]:o.push(kt),u++}Ce=ot===u}else Ce=!0}}var Te;(Te=st===u)&&R?(R=!1,ee=[ee,3]):Te&&(R=!0,ee=3,!0!==fe&&((fe=fe||{}).kty=!0,fe.k=!0))}}if(!R){const ft={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/oneOf",keyword:"oneOf",params:{passingSchemas:ee},message:"must match exactly one schema in oneOf"};return null===o?o=[ft]:o.push(ft),u++,$n.errors=o,!1}if(u=y,null!==o&&(y?o.length=y:o=null),u===S){if(!n||"object"!=typeof n||Array.isArray(n))return $n.errors=[{instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let ft;if(void 0===n.kty&&(ft="kty"))return $n.errors=[{instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/required",keyword:"required",params:{missingProperty:ft},message:"must have required property '"+ft+"'"}],!1;if(!0!==fe&&((fe=fe||{}).alg=!0,fe.kid=!0,fe.kty=!0,fe.crv=!0,fe.use=!0,fe.key_ops=!0,fe.x5u=!0,fe.x5c=!0,fe.x5t=!0,fe["x5t#S256"]=!0),void 0!==n.alg){const tt=u;if("string"!=typeof n.alg)return $n.errors=[{instancePath:t+"/alg",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var je=tt===u}else je=!0;if(je){if(void 0!==n.kid){const tt=u;if("string"!=typeof n.kid)return $n.errors=[{instancePath:t+"/kid",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;je=tt===u}else je=!0;if(je){if(void 0!==n.kty){let tt=n.kty;const st=u;if("EC"!==tt&&"RSA"!==tt&&"oct"!==tt&&"OKP"!==tt)return $n.errors=[{instancePath:t+"/kty",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/kty/enum",keyword:"enum",params:{allowedValues:X3.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;je=st===u}else je=!0;if(je){if(void 0!==n.crv){const tt=u;if("string"!=typeof n.crv)return $n.errors=[{instancePath:t+"/crv",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;je=tt===u}else je=!0;if(je){if(void 0!==n.use){const tt=u;if("string"!=typeof n.use)return $n.errors=[{instancePath:t+"/use",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;je=tt===u}else je=!0;if(je){if(void 0!==n.key_ops){const tt=u;if("string"!=typeof n.key_ops)return $n.errors=[{instancePath:t+"/key_ops",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;je=tt===u}else je=!0;if(je){if(void 0!==n.x5u){const tt=u;if("string"!=typeof n.x5u)return $n.errors=[{instancePath:t+"/x5u",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;je=tt===u}else je=!0;if(je){if(void 0!==n.x5c){const tt=u;if("string"!=typeof n.x5c)return $n.errors=[{instancePath:t+"/x5c",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;je=tt===u}else je=!0;if(je){if(void 0!==n.x5t){const tt=u;if("string"!=typeof n.x5t)return $n.errors=[{instancePath:t+"/x5t",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;je=tt===u}else je=!0;if(je)if(void 0!==n["x5t#S256"]){const tt=u;if("string"!=typeof n["x5t#S256"])return $n.errors=[{instancePath:t+"/x5t#S256",schemaPath:"https://identity.foundation/dwn/json-schemas/general-jwk.json/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;je=tt===u}else je=!0}}}}}}}}}}if(S===u){const ft=u,tt=u,st=u;let Je=!1;const lt=u,ot=u;let yt=!1;const kt=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.d&&(jt="d")){const br={};null===o?o=[br]:o.push(br),u++}}if(yt=yt||kt===u,yt)u=ot,null!==o&&(ot?o.length=ot:o=null);else{const jt={};null===o?o=[jt]:o.push(jt),u++}if(u===lt)if(n&&"object"==typeof n&&!Array.isArray(n)){if(void 0!==n.kty&&"EC"!==n.kty){const jt={};null===o?o=[jt]:o.push(jt),u++}}else{const jt={};null===o?o=[jt]:o.push(jt),u++}var vt=lt===u;if(Je=Je||vt,vt)var $e={kty:!0};const Nt=u,Qe=u;let Ut=!1;const Gt=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.d&&(jt="d")){const br={};null===o?o=[br]:o.push(br),u++}}if(Ut=Ut||Gt===u,Ut)u=Qe,null!==o&&(Qe?o.length=Qe:o=null);else{const jt={};null===o?o=[jt]:o.push(jt),u++}if(u===Nt)if(n&&"object"==typeof n&&!Array.isArray(n)){if(void 0!==n.kty&&"OKP"!==n.kty){const jt={};null===o?o=[jt]:o.push(jt),u++}}else{const jt={};null===o?o=[jt]:o.push(jt),u++}vt=Nt===u,Je=Je||vt,vt&&!0!==$e&&(($e=$e||{}).kty=!0);const Bt=u,ht=u;let Ct=!1;const Kt=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.d&&(jt="d")){const br={};null===o?o=[br]:o.push(br),u++}}var ut=Kt===u;Ct=Ct||ut;const er=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.p&&(jt="p")){const br={};null===o?o=[br]:o.push(br),u++}}ut=er===u,Ct=Ct||ut;const tr=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.q&&(jt="q")){const br={};null===o?o=[br]:o.push(br),u++}}ut=tr===u,Ct=Ct||ut;const Wt=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.dp&&(jt="dp")){const br={};null===o?o=[br]:o.push(br),u++}}ut=Wt===u,Ct=Ct||ut;const Jt=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.dq&&(jt="dq")){const br={};null===o?o=[br]:o.push(br),u++}}ut=Jt===u,Ct=Ct||ut;const Hn=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.qi&&(jt="qi")){const br={};null===o?o=[br]:o.push(br),u++}}ut=Hn===u,Ct=Ct||ut;const co=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let jt;if(void 0===n.oth&&(jt="oth")){const br={};null===o?o=[br]:o.push(br),u++}}if(ut=co===u,Ct=Ct||ut,Ct)u=ht,null!==o&&(ht?o.length=ht:o=null);else{const jt={};null===o?o=[jt]:o.push(jt),u++}if(u===Bt)if(n&&"object"==typeof n&&!Array.isArray(n)){if(void 0!==n.kty){const jt=u;if("RSA"!==n.kty){const br={};null===o?o=[br]:o.push(br),u++}var ct=jt===u}else ct=!0;if(ct)if(void 0!==n.oth){let jt=n.oth;const br=u;if(!jt||"object"!=typeof jt||Array.isArray(jt)){const fr={};null===o?o=[fr]:o.push(fr),u++}ct=br===u}else ct=!0}else{const jt={};null===o?o=[jt]:o.push(jt),u++}if(vt=Bt===u,Je=Je||vt,vt&&!0!==$e&&(($e=$e||{}).kty=!0,$e.d=!0,$e.p=!0,$e.q=!0,$e.dp=!0,$e.dq=!0,$e.qi=!0,$e.oth=!0),Je)u=st,null!==o&&(st?o.length=st:o=null);else{const jt={};null===o?o=[jt]:o.push(jt),u++}if(tt===u)return $n.errors=[{instancePath:t,schemaPath:"#/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=ft,null!==o&&(ft?o.length=ft:o=null)}return $n.errors=o,A.props=fe,0===u}$n.evaluated={dynamicProps:!0,dynamicItems:!1};const Mv=Object.prototype.hasOwnProperty;function nr(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=nr.evaluated;A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0);const S=u;let y=!1;const R=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Nt;if(void 0===n.contextId&&(Nt="contextId")){const Qe={instancePath:t,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"};null===o?o=[Qe]:o.push(Qe),u++}else if(void 0!==n.descriptor){let Qe=n.descriptor;if(u==u)if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let Gt;if(void 0===Qe.protocol&&(Gt="protocol")||void 0===Qe.protocolPath&&(Gt="protocolPath")){const Bt={instancePath:t+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/required",keyword:"required",params:{missingProperty:Gt},message:"must have required property '"+Gt+"'"};null===o?o=[Bt]:o.push(Bt),u++}}else{const Gt={instancePath:t+"/descriptor",schemaPath:"#/anyOf/0/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[Gt]:o.push(Gt),u++}}}var je=R===u;if(y=y||je,je)var ee={descriptor:!0};const ae=u,te=u,fe=u,we=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Nt;if(void 0===n.contextId&&(Nt="contextId")){const Qe={};null===o?o=[Qe]:o.push(Qe),u++}}if(we===u){const Nt={instancePath:t,schemaPath:"#/anyOf/1/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[Nt]:o.push(Nt),u++}else u=fe,null!==o&&(fe?o.length=fe:o=null);if(te===u){const Nt=u;if(n&&"object"==typeof n&&!Array.isArray(n)&&void 0!==n.descriptor){let Ut=n.descriptor;if(!Ut||"object"!=typeof Ut||Array.isArray(Ut)){const ht={instancePath:t+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[ht]:o.push(ht),u++}const Gt=u,Bt=u;if(Ut&&"object"==typeof Ut&&!Array.isArray(Ut)){let ht;if(void 0===Ut.protocol&&(ht="protocol")){const Ct={};null===o?o=[Ct]:o.push(Ct),u++}}if(Bt===u){const ht={instancePath:t+"/descriptor",schemaPath:"#/anyOf/1/allOf/1/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[ht]:o.push(ht),u++}else u=Gt,null!==o&&(Gt?o.length=Gt:o=null)}if(Nt===u&&n&&"object"==typeof n&&!Array.isArray(n)&&void 0!==n.descriptor){let Bt=n.descriptor;if(!Bt||"object"!=typeof Bt||Array.isArray(Bt)){const Kt={instancePath:t+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[Kt]:o.push(Kt),u++}const ht=u,Ct=u;if(Bt&&"object"==typeof Bt&&!Array.isArray(Bt)){let Kt;if(void 0===Bt.protocolPath&&(Kt="protocolPath")){const er={};null===o?o=[er]:o.push(er),u++}}if(Ct===u){const Kt={instancePath:t+"/descriptor",schemaPath:"#/anyOf/1/allOf/2/properties/descriptor/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[Kt]:o.push(Kt),u++}else u=ht,null!==o&&(ht?o.length=ht:o=null)}}if(je=ae===u,y=y||je,je&&!0!==ee&&((ee=ee||{}).descriptor=!0),!y){const Nt={instancePath:t,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===o?o=[Nt]:o.push(Nt),u++,nr.errors=o,!1}if(u=S,null!==o&&(S?o.length=S:o=null),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return nr.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let Nt;if(void 0===n.descriptor&&(Nt="descriptor"))return nr.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:Nt},message:"must have required property '"+Nt+"'"}],!1;if(!0!==ee&&((ee=ee||{}).recordId=!0,ee.contextId=!0,ee.attestation=!0,ee.authorization=!0,ee.encryption=!0,ee.descriptor=!0),void 0!==n.recordId){const Qe=u;if("string"!=typeof n.recordId)return nr.errors=[{instancePath:t+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Le=Qe===u}else Le=!0;if(Le){if(void 0!==n.contextId){let Qe=n.contextId;const Ut=u;if(u===Ut){if("string"!=typeof Qe)return nr.errors=[{instancePath:t+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!_T.test(Qe))return nr.errors=[{instancePath:t+"/contextId",schemaPath:"#/properties/contextId/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"},message:'must match pattern "^[a-zA-Z0-9]+(/[a-zA-Z0-9]+)*$"'}],!1}Le=Ut===u}else Le=!0;if(Le){if(void 0!==n.attestation){const Qe=u;Nn(n.attestation,{instancePath:t+"/attestation",parentData:n,parentDataProperty:"attestation",rootData:s,dynamicAnchors:c})||(o=null===o?Nn.errors:o.concat(Nn.errors),u=o.length),Le=Qe===u}else Le=!0;if(Le){if(void 0!==n.authorization){const Qe=u;qa(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?qa.errors:o.concat(qa.errors),u=o.length),Le=Qe===u}else Le=!0;if(Le){if(void 0!==n.encryption){let Qe=n.encryption;const Ut=u;if(u===Ut){if(!Qe||"object"!=typeof Qe||Array.isArray(Qe))return nr.errors=[{instancePath:t+"/encryption",schemaPath:"#/properties/encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let Bt;if(void 0===Qe.algorithm&&(Bt="algorithm")||void 0===Qe.initializationVector&&(Bt="initializationVector")||void 0===Qe.keyEncryption&&(Bt="keyEncryption"))return nr.errors=[{instancePath:t+"/encryption",schemaPath:"#/properties/encryption/required",keyword:"required",params:{missingProperty:Bt},message:"must have required property '"+Bt+"'"}],!1;{const ht=u;for(const Ct in Qe)if("algorithm"!==Ct&&"initializationVector"!==Ct&&"keyEncryption"!==Ct)return nr.errors=[{instancePath:t+"/encryption",schemaPath:"#/properties/encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ct},message:"must NOT have additional properties"}],!1;if(ht===u){if(void 0!==Qe.algorithm){let Ct=Qe.algorithm;const Kt=u;if("string"!=typeof Ct)return nr.errors=[{instancePath:t+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("A256CTR"!==Ct)return nr.errors=[{instancePath:t+"/encryption/algorithm",schemaPath:"#/properties/encryption/properties/algorithm/enum",keyword:"enum",params:{allowedValues:vd.properties.encryption.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;var ze=Kt===u}else ze=!0;if(ze){if(void 0!==Qe.initializationVector){let Ct=Qe.initializationVector;const Kt=u;if(u==u){if("string"!=typeof Ct)return nr.errors=[{instancePath:t+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!vu.test(Ct))return nr.errors=[{instancePath:t+"/encryption/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}ze=Kt===u}else ze=!0;if(ze)if(void 0!==Qe.keyEncryption){let Ct=Qe.keyEncryption;const Kt=u;if(u===Kt){if(!Array.isArray(Ct))return nr.errors=[{instancePath:t+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(Ct.length<1)return nr.errors=[{instancePath:t+"/encryption/keyEncryption",schemaPath:"#/properties/encryption/properties/keyEncryption/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{const tr=Ct.length;for(let Wt=0;Wt<tr;Wt++){let Jt=Ct[Wt];const Hn=u;if(u===Hn){if(!Jt||"object"!=typeof Jt||Array.isArray(Jt))return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt,schemaPath:"#/properties/encryption/properties/keyEncryption/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let jt;if(void 0===Jt.rootKeyId&&(jt="rootKeyId")||void 0===Jt.derivationScheme&&(jt="derivationScheme")||void 0===Jt.algorithm&&(jt="algorithm")||void 0===Jt.encryptedKey&&(jt="encryptedKey")||void 0===Jt.initializationVector&&(jt="initializationVector")||void 0===Jt.ephemeralPublicKey&&(jt="ephemeralPublicKey")||void 0===Jt.messageAuthenticationCode&&(jt="messageAuthenticationCode"))return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt,schemaPath:"#/properties/encryption/properties/keyEncryption/items/required",keyword:"required",params:{missingProperty:jt},message:"must have required property '"+jt+"'"}],!1;{const br=u;for(const Er in Jt)if("rootKeyId"!==Er&&"derivationScheme"!==Er&&"derivedPublicKey"!==Er&&"algorithm"!==Er&&"encryptedKey"!==Er&&"initializationVector"!==Er&&"ephemeralPublicKey"!==Er&&"messageAuthenticationCode"!==Er)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt,schemaPath:"#/properties/encryption/properties/keyEncryption/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Er},message:"must NOT have additional properties"}],!1;if(br===u){if(void 0!==Jt.rootKeyId){const Er=u;if("string"!=typeof Jt.rootKeyId)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/rootKeyId",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ye=Er===u}else Ye=!0;if(Ye){if(void 0!==Jt.derivationScheme){let Er=Jt.derivationScheme;const fr=u;if("string"!=typeof Er)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("dataFormats"!==Er&&"protocolContext"!==Er&&"protocolPath"!==Er&&"schemas"!==Er)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/derivationScheme",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/derivationScheme/enum",keyword:"enum",params:{allowedValues:vd.properties.encryption.properties.keyEncryption.items.properties.derivationScheme.enum},message:"must be equal to one of the allowed values"}],!1;Ye=fr===u}else Ye=!0;if(Ye){if(void 0!==Jt.derivedPublicKey){const Er=u;$n(Jt.derivedPublicKey,{instancePath:t+"/encryption/keyEncryption/"+Wt+"/derivedPublicKey",parentData:Jt,parentDataProperty:"derivedPublicKey",rootData:s,dynamicAnchors:c})||(o=null===o?$n.errors:o.concat($n.errors),u=o.length),Ye=Er===u}else Ye=!0;if(Ye){if(void 0!==Jt.algorithm){let Er=Jt.algorithm;const fr=u;if("string"!=typeof Er)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("ECIES-ES256K"!==Er)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/algorithm",schemaPath:"#/properties/encryption/properties/keyEncryption/items/properties/algorithm/enum",keyword:"enum",params:{allowedValues:vd.properties.encryption.properties.keyEncryption.items.properties.algorithm.enum},message:"must be equal to one of the allowed values"}],!1;Ye=fr===u}else Ye=!0;if(Ye){if(void 0!==Jt.encryptedKey){let Er=Jt.encryptedKey;const fr=u;if(u==u){if("string"!=typeof Er)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!vu.test(Er))return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/encryptedKey",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}Ye=fr===u}else Ye=!0;if(Ye){if(void 0!==Jt.initializationVector){let Er=Jt.initializationVector;const fr=u;if(u==u){if("string"!=typeof Er)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!vu.test(Er))return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/initializationVector",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}Ye=fr===u}else Ye=!0;if(Ye){if(void 0!==Jt.ephemeralPublicKey){const Er=u;$n(Jt.ephemeralPublicKey,{instancePath:t+"/encryption/keyEncryption/"+Wt+"/ephemeralPublicKey",parentData:Jt,parentDataProperty:"ephemeralPublicKey",rootData:s,dynamicAnchors:c})||(o=null===o?$n.errors:o.concat($n.errors),u=o.length),Ye=Er===u}else Ye=!0;if(Ye)if(void 0!==Jt.messageAuthenticationCode){let Er=Jt.messageAuthenticationCode;const fr=u;if(u==u){if("string"!=typeof Er)return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!vu.test(Er))return nr.errors=[{instancePath:t+"/encryption/keyEncryption/"+Wt+"/messageAuthenticationCode",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/base64url/pattern",keyword:"pattern",params:{pattern:"^[A-Za-z0-9_-]+$"},message:'must match pattern "^[A-Za-z0-9_-]+$"'}],!1}Ye=fr===u}else Ye=!0}}}}}}}}}}if(Hn!==u)break}}}ze=Kt===u}else ze=!0}}}}}Le=Ut===u}else Le=!0;if(Le)if(void 0!==n.descriptor){let Qe=n.descriptor;const Ut=u,Gt=u;let Bt=!1;const ht=u;if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let jt;if(void 0===Qe.published&&(jt="published")||void 0===Qe.datePublished&&(jt="datePublished")){const br={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/required",keyword:"required",params:{missingProperty:jt},message:"must have required property '"+jt+"'"};null===o?o=[br]:o.push(br),u++}else if(void 0!==Qe.published){let br=Qe.published;if("boolean"!=typeof br){const Er={instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===o?o=[Er]:o.push(Er),u++}if(!0!==br){const Er={instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:vd.properties.descriptor.allOf[0].anyOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};null===o?o=[Er]:o.push(Er),u++}}}var tt=ht===u;if(Bt=Bt||tt,tt)var ut={published:!0};const Ct=u,Kt=u,er=u;if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let jt;if(void 0===Qe.datePublished&&(jt="datePublished")){const br={};null===o?o=[br]:o.push(br),u++}}if(er===u){const jt={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[jt]:o.push(jt),u++}else u=Kt,null!==o&&(Kt?o.length=Kt:o=null);if(u===Ct&&Qe&&"object"==typeof Qe&&!Array.isArray(Qe)&&void 0!==Qe.published){let jt=Qe.published;if("boolean"!=typeof jt){const br={instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===o?o=[br]:o.push(br),u++}if(!1!==jt){const br={instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/allOf/0/anyOf/1/properties/published/enum",keyword:"enum",params:{allowedValues:vd.properties.descriptor.allOf[0].anyOf[1].properties.published.enum},message:"must be equal to one of the allowed values"};null===o?o=[br]:o.push(br),u++}}tt=Ct===u,Bt=Bt||tt,tt&&!0!==ut&&((ut=ut||{}).published=!0);const tr=u,Wt=u,Jt=u,Hn=u;if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let jt;if(void 0===Qe.published&&(jt="published")){const br={};null===o?o=[br]:o.push(br),u++}}if(Hn===u){const jt={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/0/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[jt]:o.push(jt),u++}else u=Jt,null!==o&&(Jt?o.length=Jt:o=null);if(Wt===u){const br=u,Er=u;if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let Rn;if(void 0===Qe.datePublished&&(Rn="datePublished")){const us={};null===o?o=[us]:o.push(us),u++}}if(Er===u){const Rn={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf/2/allOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[Rn]:o.push(Rn),u++}else u=br,null!==o&&(br?o.length=br:o=null)}if(tt=tr===u,Bt=Bt||tt,!Bt){const jt={instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/allOf/0/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return null===o?o=[jt]:o.push(jt),u++,nr.errors=o,!1}if(u=Gt,null!==o&&(Gt?o.length=Gt:o=null),u===Ut){if(!Qe||"object"!=typeof Qe||Array.isArray(Qe))return nr.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let jt;if(void 0===Qe.interface&&(jt="interface")||void 0===Qe.method&&(jt="method")||void 0===Qe.dataCid&&(jt="dataCid")||void 0===Qe.dataSize&&(jt="dataSize")||void 0===Qe.dateCreated&&(jt="dateCreated")||void 0===Qe.messageTimestamp&&(jt="messageTimestamp")||void 0===Qe.dataFormat&&(jt="dataFormat"))return nr.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:jt},message:"must have required property '"+jt+"'"}],!1;{const br=u;for(const Er in Qe)if(!Mv.call(vd.properties.descriptor.properties,Er))return nr.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Er},message:"must NOT have additional properties"}],!1;if(br===u){let Er;if(void 0!==Qe.parentId&&void 0===Qe.protocol&&(Er="protocol"))return nr.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/dependencies",keyword:"dependencies",params:{property:"parentId",missingProperty:Er,depsCount:1,deps:"protocol"},message:"must have property protocol when property parentId is present"}],!1;if(void 0!==Qe.interface){let fr=Qe.interface;const Rn=u;if("string"!=typeof fr)return nr.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==fr)return nr.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:vd.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var st=Rn===u}else st=!0;if(st){if(void 0!==Qe.method){let fr=Qe.method;const Rn=u;if("string"!=typeof fr)return nr.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Write"!==fr)return nr.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:vd.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;st=Rn===u}else st=!0;if(st){if(void 0!==Qe.recipient){let fr=Qe.recipient;const Rn=u;if(u==u){if("string"!=typeof fr)return nr.errors=[{instancePath:t+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!wu.test(fr))return nr.errors=[{instancePath:t+"/descriptor/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}st=Rn===u}else st=!0;if(st){if(void 0!==Qe.protocol){const fr=u;if("string"!=typeof Qe.protocol)return nr.errors=[{instancePath:t+"/descriptor/protocol",schemaPath:"#/properties/descriptor/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;st=fr===u}else st=!0;if(st){if(void 0!==Qe.protocolPath){let fr=Qe.protocolPath;const Rn=u;if(u===Rn){if("string"!=typeof fr)return nr.errors=[{instancePath:t+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!xT.test(fr))return nr.errors=[{instancePath:t+"/descriptor/protocolPath",schemaPath:"#/properties/descriptor/properties/protocolPath/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z]+(/[a-zA-Z]+)*$"},message:'must match pattern "^[a-zA-Z]+(/[a-zA-Z]+)*$"'}],!1}st=Rn===u}else st=!0;if(st){if(void 0!==Qe.schema){const fr=u;if("string"!=typeof Qe.schema)return nr.errors=[{instancePath:t+"/descriptor/schema",schemaPath:"#/properties/descriptor/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;st=fr===u}else st=!0;if(st){if(void 0!==Qe.tags){let fr=Qe.tags;const Rn=u;if(u===Rn){if(!fr||"object"!=typeof fr||Array.isArray(fr))return nr.errors=[{instancePath:t+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(fr).length>10)return nr.errors=[{instancePath:t+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/maxProperties",keyword:"maxProperties",params:{limit:10},message:"must NOT have more than 10 properties"}],!1;if(Object.keys(fr).length<1)return nr.errors=[{instancePath:t+"/descriptor/tags",schemaPath:"#/properties/descriptor/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const cn in fr){let dn=fr[cn];const Kn=u,wn=u;let vr=!1,bn=null;const fs=u;if("string"!=typeof dn){const Ni={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Ni]:o.push(Ni),u++}(Je=fs===u)&&(vr=!0,bn=0);const Ai=u;if("number"!=typeof dn||!isFinite(dn)){const Ni={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};null===o?o=[Ni]:o.push(Ni),u++}if((Je=Ai===u)&&vr)vr=!1,bn=[bn,1];else{Je&&(vr=!0,bn=1);const Ni=u;if("boolean"!=typeof dn){const df={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===o?o=[df]:o.push(df),u++}if((Je=Ni===u)&&vr)vr=!1,bn=[bn,2];else{Je&&(vr=!0,bn=2);const df=u;if(u===df)if(Array.isArray(dn))if(dn.length>10){const Wo={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};null===o?o=[Wo]:o.push(Wo),u++}else if(dn.length<1){const Wo={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===o?o=[Wo]:o.push(Wo),u++}else{const Wo=dn.length;for(let Fg=0;Fg<Wo;Fg++){const pa=u;if("string"!=typeof dn[Fg]){const lp={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+Fg,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[lp]:o.push(lp),u++}if(pa!==u)break}}else{const Wo={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[Wo]:o.push(Wo),u++}if((Je=df===u)&&vr)vr=!1,bn=[bn,3];else{if(Je){vr=!0,bn=3;var ot=!0}const Wo=u;if(u===Wo)if(Array.isArray(dn))if(dn.length>10){const pa={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/maxItems",keyword:"maxItems",params:{limit:10},message:"must NOT have more than 10 items"};null===o?o=[pa]:o.push(pa),u++}else if(dn.length<1){const pa={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===o?o=[pa]:o.push(pa),u++}else{const pa=dn.length;for(let Kg=0;Kg<pa;Kg++){let lp=dn[Kg];const ZF=u;if("number"!=typeof lp||!isFinite(lp)){const MS={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+Kg,schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/items/type",keyword:"type",params:{type:"number"},message:"must be number"};null===o?o=[MS]:o.push(MS),u++}if(ZF!==u)break}}else{const pa={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf/4/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[pa]:o.push(pa),u++}var Je;(Je=Wo===u)&&vr?(vr=!1,bn=[bn,4]):Je&&(vr=!0,bn=4,!0!==ot&&(ot=!0))}}}if(!vr){const Ni={instancePath:t+"/descriptor/tags/"+cn.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/descriptor/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:bn},message:"must match exactly one schema in oneOf"};return null===o?o=[Ni]:o.push(Ni),u++,nr.errors=o,!1}if(u=wn,null!==o&&(wn?o.length=wn:o=null),Kn!==u)break}}st=Rn===u}else st=!0;if(st){if(void 0!==Qe.parentId){const fr=u;if("string"!=typeof Qe.parentId)return nr.errors=[{instancePath:t+"/descriptor/parentId",schemaPath:"#/properties/descriptor/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;st=fr===u}else st=!0;if(st){if(void 0!==Qe.dataCid){const fr=u;if("string"!=typeof Qe.dataCid)return nr.errors=[{instancePath:t+"/descriptor/dataCid",schemaPath:"#/properties/descriptor/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;st=fr===u}else st=!0;if(st){if(void 0!==Qe.dataSize){let fr=Qe.dataSize;const Rn=u;if("number"!=typeof fr||!isFinite(fr))return nr.errors=[{instancePath:t+"/descriptor/dataSize",schemaPath:"#/properties/descriptor/properties/dataSize/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;st=Rn===u}else st=!0;if(st){if(void 0!==Qe.dateCreated){let fr=Qe.dateCreated;const Rn=u;if(u==u){if("string"!=typeof fr)return nr.errors=[{instancePath:t+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(fr))return nr.errors=[{instancePath:t+"/descriptor/dateCreated",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}st=Rn===u}else st=!0;if(st){if(void 0!==Qe.messageTimestamp){let fr=Qe.messageTimestamp;const Rn=u;if(u==u){if("string"!=typeof fr)return nr.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(fr))return nr.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}st=Rn===u}else st=!0;if(st){if(void 0!==Qe.published){const fr=u;if("boolean"!=typeof Qe.published)return nr.errors=[{instancePath:t+"/descriptor/published",schemaPath:"#/properties/descriptor/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;st=fr===u}else st=!0;if(st){if(void 0!==Qe.datePublished){let fr=Qe.datePublished;const Rn=u;if(u==u){if("string"!=typeof fr)return nr.errors=[{instancePath:t+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(fr))return nr.errors=[{instancePath:t+"/descriptor/datePublished",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}st=Rn===u}else st=!0;if(st)if(void 0!==Qe.dataFormat){const fr=u;if("string"!=typeof Qe.dataFormat)return nr.errors=[{instancePath:t+"/descriptor/dataFormat",schemaPath:"#/properties/descriptor/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;st=fr===u}else st=!0}}}}}}}}}}}}}}}}}Le=Ut===u}else Le=!0}}}}}}return nr.errors=o,A.props=ee,0===u}function Go(n,{instancePath:t="",parentData:r,parentDataProperty:i,rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Go.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),nr(n,{instancePath:t,parentData:r,parentDataProperty:i,rootData:s,dynamicAnchors:c}))var S=nr.evaluated.props;else o=null===o?nr.errors:o.concat(nr.errors),u=o.length;if(0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Go.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let R;if(void 0===n.recordId&&(R="recordId")||void 0===n.authorization&&(R="authorization")||void 0===n.encodedData&&(R="encodedData"))return Go.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:R},message:"must have required property '"+R+"'"}],!1;if(!0!==S&&((S=S||{}).encodedData=!0),void 0!==n.encodedData){const ee=u;if("string"!=typeof n.encodedData)return Go.errors=[{instancePath:t+"/encodedData",schemaPath:"#/properties/encodedData/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var y=ee===u}else y=!0;if(y&&!0!==S)for(const ee in n)if(!S||!S[ee])return Go.errors=[{instancePath:t,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:ee},message:"must NOT have unevaluated properties"}],!1}}return Go.errors=o,0===u}function Qi(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Qi.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Qi.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const y=u;for(const R in n)if("signature"!==R&&"authorDelegatedGrant"!==R)return Qi.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:R},message:"must NOT have additional properties"}],!1;if(y===u){if(void 0!==n.signature){const R=u;Nn(n.signature,{instancePath:t+"/signature",parentData:n,parentDataProperty:"signature",rootData:s,dynamicAnchors:c})||(o=null===o?Nn.errors:o.concat(Nn.errors),u=o.length);var S=R===u}else S=!0;if(S)if(void 0!==n.authorDelegatedGrant){const R=u;Go(n.authorDelegatedGrant,{instancePath:t+"/authorDelegatedGrant",parentData:n,parentDataProperty:"authorDelegatedGrant",rootData:s,dynamicAnchors:c})||(o=null===o?Go.errors:o.concat(Go.errors),u=o.length),S=R===u}else S=!0}}}return Qi.errors=o,0===u}nr.evaluated={dynamicProps:!0,dynamicItems:!1},Go.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1},Qi.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const ET=qa,ST=es,Q3={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-delete.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","recordId","prune"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Delete"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},recordId:{type:"string"},prune:{type:"boolean"}}}}};function es(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=es.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return es.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let R;if(void 0===n.authorization&&(R="authorization")||void 0===n.descriptor&&(R="descriptor"))return es.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:R},message:"must have required property '"+R+"'"}],!1;{const ee=u;for(const ae in n)if("authorization"!==ae&&"descriptor"!==ae)return es.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ae},message:"must NOT have additional properties"}],!1;if(ee===u){if(void 0!==n.authorization){const ae=u;Qi(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?Qi.errors:o.concat(Qi.errors),u=o.length);var S=ae===u}else S=!0;if(S)if(void 0!==n.descriptor){let ae=n.descriptor;const te=u;if(u===te){if(!ae||"object"!=typeof ae||Array.isArray(ae))return es.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let we;if(void 0===ae.interface&&(we="interface")||void 0===ae.method&&(we="method")||void 0===ae.messageTimestamp&&(we="messageTimestamp")||void 0===ae.recordId&&(we="recordId")||void 0===ae.prune&&(we="prune"))return es.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:we},message:"must have required property '"+we+"'"}],!1;{const Pe=u;for(const Te in ae)if("interface"!==Te&&"method"!==Te&&"messageTimestamp"!==Te&&"recordId"!==Te&&"prune"!==Te)return es.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Te},message:"must NOT have additional properties"}],!1;if(Pe===u){if(void 0!==ae.interface){let Te=ae.interface;const Ae=u;if("string"!=typeof Te)return es.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==Te)return es.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:Q3.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=Ae===u}else y=!0;if(y){if(void 0!==ae.method){let Te=ae.method;const Ae=u;if("string"!=typeof Te)return es.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Delete"!==Te)return es.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:Q3.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=Ae===u}else y=!0;if(y){if(void 0!==ae.messageTimestamp){let Te=ae.messageTimestamp;const Ae=u;if(u==u){if("string"!=typeof Te)return es.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(Te))return es.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}y=Ae===u}else y=!0;if(y){if(void 0!==ae.recordId){const Te=u;if("string"!=typeof ae.recordId)return es.errors=[{instancePath:t+"/descriptor/recordId",schemaPath:"#/properties/descriptor/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;y=Te===u}else y=!0;if(y)if(void 0!==ae.prune){const Te=u;if("boolean"!=typeof ae.prune)return es.errors=[{instancePath:t+"/descriptor/prune",schemaPath:"#/properties/descriptor/properties/prune/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;y=Te===u}else y=!0}}}}}}}S=te===u}else S=!0}}}}return es.errors=o,0===u}es.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const AT=Wn,Tv={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"},pagination:{type:"object",additionalProperties:!1,properties:{limit:{type:"number",minimum:1},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}},dateSort:{enum:["createdAscending","createdDescending","publishedAscending","publishedDescending"],type:"string"}}}}},Dp={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json",type:"object",minProperties:1,additionalProperties:!1,required:["messageCid","value"],properties:{messageCid:{type:"string"},value:{type:["string","number"]}}},e6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-filter.json",type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},protocolPath:{type:"string"},author:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},attester:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},contextId:{type:"string"},schema:{type:"string"},tags:{type:"object",minProperties:1,additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"object",minProperties:1,additionalProperties:!1,properties:{startsWith:{type:"string"}}},{$ref:"https://identity.foundation/dwn/json-schemas/string-range-filter.json"},{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"}]}},recordId:{type:"string"},parentId:{type:"string"},published:{type:"boolean"},dataFormat:{type:"string"},dataSize:{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"},dataCid:{type:"string"},dateCreated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},datePublished:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},dateUpdated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}},dependencies:{datePublished:{oneOf:[{properties:{published:{enum:[!0]}},required:["published"]},{not:{required:["published"]}}]}}};function ur(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=ur.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return ur.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(n).length<1)return ur.errors=[{instancePath:t,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Nt=u;for(const Qe in n)if(!Mv.call(e6.properties,Qe))return ur.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Qe},message:"must NOT have additional properties"}],!1;if(Nt===u){if(void 0!==n.datePublished){const Qe=u,Ut=u;let Gt=!1,Bt=null;const ht=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let tr;if(void 0===n.published&&(tr="published")){const Wt={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf/0/required",keyword:"required",params:{missingProperty:tr},message:"must have required property '"+tr+"'"};null===o?o=[Wt]:o.push(Wt),u++}else if(void 0!==n.published&&!0!==n.published){const Wt={instancePath:t+"/published",schemaPath:"#/dependencies/datePublished/oneOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:e6.dependencies.datePublished.oneOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};null===o?o=[Wt]:o.push(Wt),u++}}ht===u&&(Gt=!0,Bt=0);const Ct=u,Kt=u,er=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let tr;if(void 0===n.published&&(tr="published")){const Wt={};null===o?o=[Wt]:o.push(Wt),u++}}var R;if(er===u){const tr={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[tr]:o.push(tr),u++}else u=Kt,null!==o&&(Kt?o.length=Kt:o=null);if((R=Ct===u)&&Gt?(Gt=!1,Bt=[Bt,1]):R&&(Gt=!0,Bt=1),!Gt){const tr={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf",keyword:"oneOf",params:{passingSchemas:Bt},message:"must match exactly one schema in oneOf"};return null===o?o=[tr]:o.push(tr),u++,ur.errors=o,!1}u=Ut,null!==o&&(Ut?o.length=Ut:o=null);var ee=Qe===u}else ee=!0;if(ee){if(void 0!==n.protocol){const Qe=u;if("string"!=typeof n.protocol)return ur.errors=[{instancePath:t+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.protocolPath){const Qe=u;if("string"!=typeof n.protocolPath)return ur.errors=[{instancePath:t+"/protocolPath",schemaPath:"#/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.author){let Qe=n.author;const Ut=u;if(u==u){if("string"!=typeof Qe)return ur.errors=[{instancePath:t+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!wu.test(Qe))return ur.errors=[{instancePath:t+"/author",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}ae=Ut===u}else ae=!0;if(ae){if(void 0!==n.attester){let Qe=n.attester;const Ut=u;if(u==u){if("string"!=typeof Qe)return ur.errors=[{instancePath:t+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!wu.test(Qe))return ur.errors=[{instancePath:t+"/attester",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}ae=Ut===u}else ae=!0;if(ae){if(void 0!==n.recipient){let Qe=n.recipient;const Ut=u;if(u==u){if("string"!=typeof Qe)return ur.errors=[{instancePath:t+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!wu.test(Qe))return ur.errors=[{instancePath:t+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}ae=Ut===u}else ae=!0;if(ae){if(void 0!==n.contextId){const Qe=u;if("string"!=typeof n.contextId)return ur.errors=[{instancePath:t+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.schema){const Qe=u;if("string"!=typeof n.schema)return ur.errors=[{instancePath:t+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.tags){let Qe=n.tags;const Ut=u;if(u===Ut){if(!Qe||"object"!=typeof Qe||Array.isArray(Qe))return ur.errors=[{instancePath:t+"/tags",schemaPath:"#/properties/tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(Qe).length<1)return ur.errors=[{instancePath:t+"/tags",schemaPath:"#/properties/tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;for(const Bt in Qe){let ht=Qe[Bt];const Ct=u,Kt=u;let er=!1,tr=null;const Wt=u;if("string"!=typeof ht){const Hn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Hn]:o.push(Hn),u++}(te=Wt===u)&&(er=!0,tr=0);const Jt=u;if("number"!=typeof ht||!isFinite(ht)){const Hn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/1/type",keyword:"type",params:{type:"number"},message:"must be number"};null===o?o=[Hn]:o.push(Hn),u++}if((te=Jt===u)&&er)er=!1,tr=[tr,1];else{te&&(er=!0,tr=1);const Hn=u;if("boolean"!=typeof ht){const jt={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};null===o?o=[jt]:o.push(jt),u++}if((te=Hn===u)&&er)er=!1,tr=[tr,2];else{te&&(er=!0,tr=2);const jt=u;if(u===jt)if(ht&&"object"==typeof ht&&!Array.isArray(ht))if(Object.keys(ht).length<1){const Er={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===o?o=[Er]:o.push(Er),u++}else{const Er=u;for(const fr in ht)if("startsWith"!==fr){const Rn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:fr},message:"must NOT have additional properties"};null===o?o=[Rn]:o.push(Rn),u++;break}if(Er===u&&void 0!==ht.startsWith&&"string"!=typeof ht.startsWith){const fr={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/startsWith",schemaPath:"#/properties/tags/additionalProperties/oneOf/3/properties/startsWith/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[fr]:o.push(fr),u++}}else{const Er={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[Er]:o.push(Er),u++}if((te=jt===u)&&er)er=!1,tr=[tr,3];else{if(te){er=!0,tr=3;var fe=!0}const Er=u;if(u==u)if(ht&&"object"==typeof ht&&!Array.isArray(ht))if(Object.keys(ht).length<1){const us={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===o?o=[us]:o.push(us),u++}else{const us=u;for(const cn in ht)if("gt"!==cn&&"gte"!==cn&&"lt"!==cn&&"lte"!==cn){const dn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:cn},message:"must NOT have additional properties"};null===o?o=[dn]:o.push(dn),u++;break}if(us===u){if(void 0!==ht.gt){const cn=u,dn=u,Kn=u;if(ht&&"object"==typeof ht&&!Array.isArray(ht)){let wn;if(void 0===ht.gte&&(wn="gte")){const vr={};null===o?o=[vr]:o.push(vr),u++}}if(Kn===u){const wn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[wn]:o.push(wn),u++}else u=dn,null!==o&&(dn?o.length=dn:o=null);var Pe=cn===u}else Pe=!0;if(Pe){if(void 0!==ht.gte){const cn=u,dn=u,Kn=u;if(ht&&"object"==typeof ht&&!Array.isArray(ht)){let vr;if(void 0===ht.gt&&(vr="gt")){const bn={};null===o?o=[bn]:o.push(bn),u++}}if(Kn===u){const vr={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[vr]:o.push(vr),u++}else u=dn,null!==o&&(dn?o.length=dn:o=null);Pe=cn===u}else Pe=!0;if(Pe){if(void 0!==ht.lt){const cn=u,dn=u,Kn=u;if(ht&&"object"==typeof ht&&!Array.isArray(ht)){let vr;if(void 0===ht.lte&&(vr="lte")){const bn={};null===o?o=[bn]:o.push(bn),u++}}if(Kn===u){const vr={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[vr]:o.push(vr),u++}else u=dn,null!==o&&(dn?o.length=dn:o=null);Pe=cn===u}else Pe=!0;if(Pe){if(void 0!==ht.lte){const cn=u,dn=u,Kn=u;if(ht&&"object"==typeof ht&&!Array.isArray(ht)){let vr;if(void 0===ht.lt&&(vr="lt")){const bn={};null===o?o=[bn]:o.push(bn),u++}}if(Kn===u){const vr={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[vr]:o.push(vr),u++}else u=dn,null!==o&&(dn?o.length=dn:o=null);Pe=cn===u}else Pe=!0;if(Pe){if(void 0!==ht.gt){const cn=u;if("string"!=typeof ht.gt){const dn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[dn]:o.push(dn),u++}var je=cn===u}else je=!0;if(je){if(void 0!==ht.gte){const cn=u;if("string"!=typeof ht.gte){const Kn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Kn]:o.push(Kn),u++}je=cn===u}else je=!0;if(je){if(void 0!==ht.lt){const cn=u;if("string"!=typeof ht.lt){const Kn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Kn]:o.push(Kn),u++}je=cn===u}else je=!0;if(je)if(void 0!==ht.lte){const cn=u;if("string"!=typeof ht.lte){const Kn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Kn]:o.push(Kn),u++}je=cn===u}else je=!0}}}}}}}}else{const us={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/string-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[us]:o.push(us),u++}if((te=Er===u)&&er)er=!1,tr=[tr,4];else{te&&(er=!0,tr=4,!0!==fe&&(fe=!0));const us=u;if(u==u)if(ht&&"object"==typeof ht&&!Array.isArray(ht))if(Object.keys(ht).length<1){const Kn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"};null===o?o=[Kn]:o.push(Kn),u++}else{const Kn=u;for(const wn in ht)if("gt"!==wn&&"gte"!==wn&&"lt"!==wn&&"lte"!==wn){const vr={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:wn},message:"must NOT have additional properties"};null===o?o=[vr]:o.push(vr),u++;break}if(Kn===u){if(void 0!==ht.gt){const wn=u,vr=u,bn=u;if(ht&&"object"==typeof ht&&!Array.isArray(ht)){let fs;if(void 0===ht.gte&&(fs="gte")){const Ai={};null===o?o=[Ai]:o.push(Ai),u++}}if(bn===u){const fs={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[fs]:o.push(fs),u++}else u=vr,null!==o&&(vr?o.length=vr:o=null);var ze=wn===u}else ze=!0;if(ze){if(void 0!==ht.gte){const wn=u,vr=u,bn=u;if(ht&&"object"==typeof ht&&!Array.isArray(ht)){let Ai;if(void 0===ht.gt&&(Ai="gt")){const Ni={};null===o?o=[Ni]:o.push(Ni),u++}}if(bn===u){const Ai={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[Ai]:o.push(Ai),u++}else u=vr,null!==o&&(vr?o.length=vr:o=null);ze=wn===u}else ze=!0;if(ze){if(void 0!==ht.lt){const wn=u,vr=u,bn=u;if(ht&&"object"==typeof ht&&!Array.isArray(ht)){let Ai;if(void 0===ht.lte&&(Ai="lte")){const Ni={};null===o?o=[Ni]:o.push(Ni),u++}}if(bn===u){const Ai={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[Ai]:o.push(Ai),u++}else u=vr,null!==o&&(vr?o.length=vr:o=null);ze=wn===u}else ze=!0;if(ze){if(void 0!==ht.lte){const wn=u,vr=u,bn=u;if(ht&&"object"==typeof ht&&!Array.isArray(ht)){let Ai;if(void 0===ht.lt&&(Ai="lt")){const Ni={};null===o?o=[Ni]:o.push(Ni),u++}}if(bn===u){const Ai={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[Ai]:o.push(Ai),u++}else u=vr,null!==o&&(vr?o.length=vr:o=null);ze=wn===u}else ze=!0;if(ze){if(void 0!==ht.gt){let wn=ht.gt;const vr=u;if("number"!=typeof wn||!isFinite(wn)){const bn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"};null===o?o=[bn]:o.push(bn),u++}var ct=vr===u}else ct=!0;if(ct){if(void 0!==ht.gte){let wn=ht.gte;const vr=u;if("number"!=typeof wn||!isFinite(wn)){const fs={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"};null===o?o=[fs]:o.push(fs),u++}ct=vr===u}else ct=!0;if(ct){if(void 0!==ht.lt){let wn=ht.lt;const vr=u;if("number"!=typeof wn||!isFinite(wn)){const fs={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"};null===o?o=[fs]:o.push(fs),u++}ct=vr===u}else ct=!0;if(ct)if(void 0!==ht.lte){let wn=ht.lte;const vr=u;if("number"!=typeof wn||!isFinite(wn)){const fs={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1")+"/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"};null===o?o=[fs]:o.push(fs),u++}ct=vr===u}else ct=!0}}}}}}}}else{const Kn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[Kn]:o.push(Kn),u++}var te;(te=us===u)&&er?(er=!1,tr=[tr,5]):te&&(er=!0,tr=5,!0!==fe&&(fe=!0))}}}}if(!er){const Hn={instancePath:t+"/tags/"+Bt.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/tags/additionalProperties/oneOf",keyword:"oneOf",params:{passingSchemas:tr},message:"must match exactly one schema in oneOf"};return null===o?o=[Hn]:o.push(Hn),u++,ur.errors=o,!1}if(u=Kt,null!==o&&(Kt?o.length=Kt:o=null),Ct!==u)break}}ae=Ut===u}else ae=!0;if(ae){if(void 0!==n.recordId){const Qe=u;if("string"!=typeof n.recordId)return ur.errors=[{instancePath:t+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.parentId){const Qe=u;if("string"!=typeof n.parentId)return ur.errors=[{instancePath:t+"/parentId",schemaPath:"#/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.published){const Qe=u;if("boolean"!=typeof n.published)return ur.errors=[{instancePath:t+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.dataFormat){const Qe=u;if("string"!=typeof n.dataFormat)return ur.errors=[{instancePath:t+"/dataFormat",schemaPath:"#/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.dataSize){let Qe=n.dataSize;const Ut=u;if(u==u){if(!Qe||"object"!=typeof Qe||Array.isArray(Qe))return ur.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(Qe).length<1)return ur.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const ht=u;for(const Ct in Qe)if("gt"!==Ct&&"gte"!==Ct&&"lt"!==Ct&&"lte"!==Ct)return ur.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ct},message:"must NOT have additional properties"}],!1;if(ht===u){if(void 0!==Qe.gt){const Ct=u,Kt=u,er=u;if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let tr;if(void 0===Qe.gte&&(tr="gte")){const Wt={};null===o?o=[Wt]:o.push(Wt),u++}}if(er===u)return ur.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Kt,null!==o&&(Kt?o.length=Kt:o=null);var ft=Ct===u}else ft=!0;if(ft){if(void 0!==Qe.gte){const Ct=u,Kt=u,er=u;if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let Wt;if(void 0===Qe.gt&&(Wt="gt")){const Jt={};null===o?o=[Jt]:o.push(Jt),u++}}if(er===u)return ur.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Kt,null!==o&&(Kt?o.length=Kt:o=null),ft=Ct===u}else ft=!0;if(ft){if(void 0!==Qe.lt){const Ct=u,Kt=u,er=u;if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let Wt;if(void 0===Qe.lte&&(Wt="lte")){const Jt={};null===o?o=[Jt]:o.push(Jt),u++}}if(er===u)return ur.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Kt,null!==o&&(Kt?o.length=Kt:o=null),ft=Ct===u}else ft=!0;if(ft){if(void 0!==Qe.lte){const Ct=u,Kt=u,er=u;if(Qe&&"object"==typeof Qe&&!Array.isArray(Qe)){let Wt;if(void 0===Qe.lt&&(Wt="lt")){const Jt={};null===o?o=[Jt]:o.push(Jt),u++}}if(er===u)return ur.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Kt,null!==o&&(Kt?o.length=Kt:o=null),ft=Ct===u}else ft=!0;if(ft){if(void 0!==Qe.gt){let Ct=Qe.gt;const Kt=u;if("number"!=typeof Ct||!isFinite(Ct))return ur.errors=[{instancePath:t+"/dataSize/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var lt=Kt===u}else lt=!0;if(lt){if(void 0!==Qe.gte){let Ct=Qe.gte;const Kt=u;if("number"!=typeof Ct||!isFinite(Ct))return ur.errors=[{instancePath:t+"/dataSize/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;lt=Kt===u}else lt=!0;if(lt){if(void 0!==Qe.lt){let Ct=Qe.lt;const Kt=u;if("number"!=typeof Ct||!isFinite(Ct))return ur.errors=[{instancePath:t+"/dataSize/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;lt=Kt===u}else lt=!0;if(lt)if(void 0!==Qe.lte){let Ct=Qe.lte;const Kt=u;if("number"!=typeof Ct||!isFinite(Ct))return ur.errors=[{instancePath:t+"/dataSize/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;lt=Kt===u}else lt=!0}}}}}}}}}ae=Ut===u}else ae=!0;if(ae){if(void 0!==n.dataCid){const Qe=u;if("string"!=typeof n.dataCid)return ur.errors=[{instancePath:t+"/dataCid",schemaPath:"#/properties/dataCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=Qe===u}else ae=!0;if(ae){if(void 0!==n.dateCreated){let Qe=n.dateCreated;const Ut=u;if(u===Ut){if(!Qe||"object"!=typeof Qe||Array.isArray(Qe))return ur.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(Qe).length<1)return ur.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Bt=u;for(const ht in Qe)if("from"!==ht&&"to"!==ht)return ur.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ht},message:"must NOT have additional properties"}],!1;if(Bt===u){if(void 0!==Qe.from){let ht=Qe.from;const Ct=u;if(u==u){if("string"!=typeof ht)return ur.errors=[{instancePath:t+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(ht))return ur.errors=[{instancePath:t+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var ot=Ct===u}else ot=!0;if(ot)if(void 0!==Qe.to){let ht=Qe.to;const Ct=u;if(u==u){if("string"!=typeof ht)return ur.errors=[{instancePath:t+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(ht))return ur.errors=[{instancePath:t+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}ot=Ct===u}else ot=!0}}}ae=Ut===u}else ae=!0;if(ae){if(void 0!==n.datePublished){let Qe=n.datePublished;const Ut=u;if(u===Ut){if(!Qe||"object"!=typeof Qe||Array.isArray(Qe))return ur.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(Qe).length<1)return ur.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Bt=u;for(const ht in Qe)if("from"!==ht&&"to"!==ht)return ur.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ht},message:"must NOT have additional properties"}],!1;if(Bt===u){if(void 0!==Qe.from){let ht=Qe.from;const Ct=u;if(u==u){if("string"!=typeof ht)return ur.errors=[{instancePath:t+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(ht))return ur.errors=[{instancePath:t+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var yt=Ct===u}else yt=!0;if(yt)if(void 0!==Qe.to){let ht=Qe.to;const Ct=u;if(u==u){if("string"!=typeof ht)return ur.errors=[{instancePath:t+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(ht))return ur.errors=[{instancePath:t+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}yt=Ct===u}else yt=!0}}}ae=Ut===u}else ae=!0;if(ae)if(void 0!==n.dateUpdated){let Qe=n.dateUpdated;const Ut=u;if(u===Ut){if(!Qe||"object"!=typeof Qe||Array.isArray(Qe))return ur.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(Qe).length<1)return ur.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Bt=u;for(const ht in Qe)if("from"!==ht&&"to"!==ht)return ur.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ht},message:"must NOT have additional properties"}],!1;if(Bt===u){if(void 0!==Qe.from){let ht=Qe.from;const Ct=u;if(u==u){if("string"!=typeof ht)return ur.errors=[{instancePath:t+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(ht))return ur.errors=[{instancePath:t+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var kt=Ct===u}else kt=!0;if(kt)if(void 0!==Qe.to){let ht=Qe.to;const Ct=u;if(u==u){if("string"!=typeof ht)return ur.errors=[{instancePath:t+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(ht))return ur.errors=[{instancePath:t+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}kt=Ct===u}else kt=!0}}}ae=Ut===u}else ae=!0}}}}}}}}}}}}}}}}}}}return ur.errors=o,0===u}function Wn(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Wn.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Wn.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let ae;if(void 0===n.descriptor&&(ae="descriptor"))return Wn.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:ae},message:"must have required property '"+ae+"'"}],!1;{const te=u;for(const fe in n)if("authorization"!==fe&&"descriptor"!==fe)return Wn.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:fe},message:"must NOT have additional properties"}],!1;if(te===u){if(void 0!==n.authorization){const fe=u;Qi(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?Qi.errors:o.concat(Qi.errors),u=o.length);var S=fe===u}else S=!0;if(S)if(void 0!==n.descriptor){let fe=n.descriptor;const we=u;if(u===we){if(!fe||"object"!=typeof fe||Array.isArray(fe))return Wn.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let Te;if(void 0===fe.interface&&(Te="interface")||void 0===fe.method&&(Te="method")||void 0===fe.messageTimestamp&&(Te="messageTimestamp")||void 0===fe.filter&&(Te="filter"))return Wn.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Te},message:"must have required property '"+Te+"'"}],!1;{const Ae=u;for(const Ce in fe)if("interface"!==Ce&&"method"!==Ce&&"messageTimestamp"!==Ce&&"filter"!==Ce&&"pagination"!==Ce&&"dateSort"!==Ce)return Wn.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ce},message:"must NOT have additional properties"}],!1;if(Ae===u){if(void 0!==fe.interface){let Ce=fe.interface;const je=u;if("string"!=typeof Ce)return Wn.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==Ce)return Wn.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:Tv.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=je===u}else y=!0;if(y){if(void 0!==fe.method){let Ce=fe.method;const je=u;if("string"!=typeof Ce)return Wn.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Query"!==Ce)return Wn.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:Tv.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=je===u}else y=!0;if(y){if(void 0!==fe.messageTimestamp){let Ce=fe.messageTimestamp;const je=u;if(u==u){if("string"!=typeof Ce)return Wn.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(Ce))return Wn.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}y=je===u}else y=!0;if(y){if(void 0!==fe.filter){const Ce=u;ur(fe.filter,{instancePath:t+"/descriptor/filter",parentData:fe,parentDataProperty:"filter",rootData:s,dynamicAnchors:c})||(o=null===o?ur.errors:o.concat(ur.errors),u=o.length),y=Ce===u}else y=!0;if(y){if(void 0!==fe.pagination){let Ce=fe.pagination;const je=u;if(u===je){if(!Ce||"object"!=typeof Ce||Array.isArray(Ce))return Wn.errors=[{instancePath:t+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const ze=u;for(const $e in Ce)if("limit"!==$e&&"cursor"!==$e)return Wn.errors=[{instancePath:t+"/descriptor/pagination",schemaPath:"#/properties/descriptor/properties/pagination/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:$e},message:"must NOT have additional properties"}],!1;if(ze===u){if(void 0!==Ce.limit){let $e=Ce.limit;const Ye=u;if(u===Ye){if("number"!=typeof $e||!isFinite($e))return Wn.errors=[{instancePath:t+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;if($e<1||isNaN($e))return Wn.errors=[{instancePath:t+"/descriptor/pagination/limit",schemaPath:"#/properties/descriptor/properties/pagination/properties/limit/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"}],!1}var R=Ye===u}else R=!0;if(R)if(void 0!==Ce.cursor){let $e=Ce.cursor;const Ye=u;if(u==u){if(!$e||"object"!=typeof $e||Array.isArray($e))return Wn.errors=[{instancePath:t+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys($e).length<1)return Wn.errors=[{instancePath:t+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let vt;if(void 0===$e.messageCid&&(vt="messageCid")||void 0===$e.value&&(vt="value"))return Wn.errors=[{instancePath:t+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:vt},message:"must have required property '"+vt+"'"}],!1;{const at=u;for(const ft in $e)if("messageCid"!==ft&&"value"!==ft)return Wn.errors=[{instancePath:t+"/descriptor/pagination/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ft},message:"must NOT have additional properties"}],!1;if(at===u){if(void 0!==$e.messageCid){const ft=u;if("string"!=typeof $e.messageCid)return Wn.errors=[{instancePath:t+"/descriptor/pagination/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ee=ft===u}else ee=!0;if(ee)if(void 0!==$e.value){let ft=$e.value;const tt=u;if("string"!=typeof ft&&("number"!=typeof ft||!isFinite(ft)))return Wn.errors=[{instancePath:t+"/descriptor/pagination/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:Dp.properties.value.type},message:"must be string,number"}],!1;ee=tt===u}else ee=!0}}}}R=Ye===u}else R=!0}}}y=je===u}else y=!0;if(y)if(void 0!==fe.dateSort){let Ce=fe.dateSort;const je=u;if("string"!=typeof Ce)return Wn.errors=[{instancePath:t+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("createdAscending"!==Ce&&"createdDescending"!==Ce&&"publishedAscending"!==Ce&&"publishedDescending"!==Ce)return Wn.errors=[{instancePath:t+"/descriptor/dateSort",schemaPath:"#/properties/descriptor/properties/dateSort/enum",keyword:"enum",params:{allowedValues:Tv.properties.descriptor.properties.dateSort.enum},message:"must be equal to one of the allowed values"}],!1;y=je===u}else y=!0}}}}}}}}S=we===u}else S=!0}}}}return Wn.errors=o,0===u}ur.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1},Wn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const MT=Us,t6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function Us(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Us.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Us.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let R;if(void 0===n.descriptor&&(R="descriptor"))return Us.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:R},message:"must have required property '"+R+"'"}],!1;{const ee=u;for(const ae in n)if("authorization"!==ae&&"descriptor"!==ae)return Us.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ae},message:"must NOT have additional properties"}],!1;if(ee===u){if(void 0!==n.authorization){const ae=u;Qi(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?Qi.errors:o.concat(Qi.errors),u=o.length);var S=ae===u}else S=!0;if(S)if(void 0!==n.descriptor){let ae=n.descriptor;const te=u;if(u===te){if(!ae||"object"!=typeof ae||Array.isArray(ae))return Us.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let we;if(void 0===ae.interface&&(we="interface")||void 0===ae.method&&(we="method")||void 0===ae.messageTimestamp&&(we="messageTimestamp")||void 0===ae.filter&&(we="filter"))return Us.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:we},message:"must have required property '"+we+"'"}],!1;{const Pe=u;for(const Te in ae)if("interface"!==Te&&"method"!==Te&&"messageTimestamp"!==Te&&"filter"!==Te)return Us.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Te},message:"must NOT have additional properties"}],!1;if(Pe===u){if(void 0!==ae.interface){let Te=ae.interface;const Ae=u;if("string"!=typeof Te)return Us.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==Te)return Us.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:t6.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=Ae===u}else y=!0;if(y){if(void 0!==ae.method){let Te=ae.method;const Ae=u;if("string"!=typeof Te)return Us.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Subscribe"!==Te)return Us.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:t6.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=Ae===u}else y=!0;if(y){if(void 0!==ae.messageTimestamp){let Te=ae.messageTimestamp;const Ae=u;if(u==u){if("string"!=typeof Te)return Us.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(Te))return Us.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}y=Ae===u}else y=!0;if(y)if(void 0!==ae.filter){const Te=u;ur(ae.filter,{instancePath:t+"/descriptor/filter",parentData:ae,parentDataProperty:"filter",rootData:s,dynamicAnchors:c})||(o=null===o?ur.errors:o.concat(ur.errors),u=o.length),y=Te===u}else y=!0}}}}}}S=te===u}else S=!0}}}}return Us.errors=o,0===u}Us.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const TT=bu;function bu(n,{instancePath:t="",parentData:r,parentDataProperty:i,rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=bu.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),nr(n,{instancePath:t,parentData:r,parentDataProperty:i,rootData:s,dynamicAnchors:c}))var S=nr.evaluated.props;else o=null===o?nr.errors:o.concat(nr.errors),u=o.length;if(0===u){if(!n||"object"!=typeof n||Array.isArray(n))return bu.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let y;if(void 0===n.recordId&&(y="recordId")||void 0===n.authorization&&(y="authorization"))return bu.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;if(!0!==S)for(const R in n)if(!S||!S[R])return bu.errors=[{instancePath:t,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty:R},message:"must NOT have unevaluated properties"}],!1}}return bu.errors=o,0===u}bu.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const IT=Go,PT=nr,BT=xr,Np={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/events-filter.json",type:"object",additionalProperties:!1,minProperties:1,properties:{interface:{enum:["Permissions","Protocols","Records"],type:"string"},method:{enum:["Configure","Delete","Grant","Revoke","Write"],type:"string"},protocol:{type:"string"},protocolPath:{type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},contextId:{type:"string"},schema:{type:"string"},recordId:{type:"string"},parentId:{type:"string"},dataFormat:{type:"string"},dataSize:{$ref:"https://identity.foundation/dwn/json-schemas/number-range-filter.json"},dateCreated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},datePublished:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}},dateUpdated:{type:"object",minProperties:1,additionalProperties:!1,properties:{from:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},to:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"}}}},dependencies:{datePublished:{oneOf:[{properties:{published:{enum:[!0]}},required:["published"]},{not:{required:["published"]}}]}}};function xr(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=xr.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return xr.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(n).length<1)return xr.errors=[{instancePath:t,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const ze=u;for(const $e in n)if(!Mv.call(Np.properties,$e))return xr.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:$e},message:"must NOT have additional properties"}],!1;if(ze===u){if(void 0!==n.datePublished){const $e=u,Ye=u;let ut=!1,ct=null;const vt=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let st;if(void 0===n.published&&(st="published")){const Je={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf/0/required",keyword:"required",params:{missingProperty:st},message:"must have required property '"+st+"'"};null===o?o=[Je]:o.push(Je),u++}else if(void 0!==n.published&&!0!==n.published){const Je={instancePath:t+"/published",schemaPath:"#/dependencies/datePublished/oneOf/0/properties/published/enum",keyword:"enum",params:{allowedValues:Np.dependencies.datePublished.oneOf[0].properties.published.enum},message:"must be equal to one of the allowed values"};null===o?o=[Je]:o.push(Je),u++}}vt===u&&(ut=!0,ct=0);const at=u,ft=u,tt=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let st;if(void 0===n.published&&(st="published")){const Je={};null===o?o=[Je]:o.push(Je),u++}}var R;if(tt===u){const st={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf/1/not",keyword:"not",params:{},message:"must NOT be valid"};null===o?o=[st]:o.push(st),u++}else u=ft,null!==o&&(ft?o.length=ft:o=null);if((R=at===u)&&ut?(ut=!1,ct=[ct,1]):R&&(ut=!0,ct=1),!ut){const st={instancePath:t,schemaPath:"#/dependencies/datePublished/oneOf",keyword:"oneOf",params:{passingSchemas:ct},message:"must match exactly one schema in oneOf"};return null===o?o=[st]:o.push(st),u++,xr.errors=o,!1}u=Ye,null!==o&&(Ye?o.length=Ye:o=null);var ee=$e===u}else ee=!0;if(ee){if(void 0!==n.interface){let $e=n.interface;const Ye=u;if("string"!=typeof $e)return xr.errors=[{instancePath:t+"/interface",schemaPath:"#/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Permissions"!==$e&&"Protocols"!==$e&&"Records"!==$e)return xr.errors=[{instancePath:t+"/interface",schemaPath:"#/properties/interface/enum",keyword:"enum",params:{allowedValues:Np.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var ae=Ye===u}else ae=!0;if(ae){if(void 0!==n.method){let $e=n.method;const Ye=u;if("string"!=typeof $e)return xr.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Configure"!==$e&&"Delete"!==$e&&"Grant"!==$e&&"Revoke"!==$e&&"Write"!==$e)return xr.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:Np.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;ae=Ye===u}else ae=!0;if(ae){if(void 0!==n.protocol){const $e=u;if("string"!=typeof n.protocol)return xr.errors=[{instancePath:t+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=$e===u}else ae=!0;if(ae){if(void 0!==n.protocolPath){const $e=u;if("string"!=typeof n.protocolPath)return xr.errors=[{instancePath:t+"/protocolPath",schemaPath:"#/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=$e===u}else ae=!0;if(ae){if(void 0!==n.recipient){let $e=n.recipient;const Ye=u;if(u==u){if("string"!=typeof $e)return xr.errors=[{instancePath:t+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!wu.test($e))return xr.errors=[{instancePath:t+"/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}ae=Ye===u}else ae=!0;if(ae){if(void 0!==n.contextId){const $e=u;if("string"!=typeof n.contextId)return xr.errors=[{instancePath:t+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=$e===u}else ae=!0;if(ae){if(void 0!==n.schema){const $e=u;if("string"!=typeof n.schema)return xr.errors=[{instancePath:t+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=$e===u}else ae=!0;if(ae){if(void 0!==n.recordId){const $e=u;if("string"!=typeof n.recordId)return xr.errors=[{instancePath:t+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=$e===u}else ae=!0;if(ae){if(void 0!==n.parentId){const $e=u;if("string"!=typeof n.parentId)return xr.errors=[{instancePath:t+"/parentId",schemaPath:"#/properties/parentId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=$e===u}else ae=!0;if(ae){if(void 0!==n.dataFormat){const $e=u;if("string"!=typeof n.dataFormat)return xr.errors=[{instancePath:t+"/dataFormat",schemaPath:"#/properties/dataFormat/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;ae=$e===u}else ae=!0;if(ae){if(void 0!==n.dataSize){let $e=n.dataSize;const Ye=u;if(u==u){if(!$e||"object"!=typeof $e||Array.isArray($e))return xr.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys($e).length<1)return xr.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const vt=u;for(const at in $e)if("gt"!==at&&"gte"!==at&&"lt"!==at&&"lte"!==at)return xr.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:at},message:"must NOT have additional properties"}],!1;if(vt===u){if(void 0!==$e.gt){const at=u,ft=u,tt=u;if($e&&"object"==typeof $e&&!Array.isArray($e)){let st;if(void 0===$e.gte&&(st="gte")){const Je={};null===o?o=[Je]:o.push(Je),u++}}if(tt===u)return xr.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=ft,null!==o&&(ft?o.length=ft:o=null);var fe=at===u}else fe=!0;if(fe){if(void 0!==$e.gte){const at=u,ft=u,tt=u;if($e&&"object"==typeof $e&&!Array.isArray($e)){let Je;if(void 0===$e.gt&&(Je="gt")){const lt={};null===o?o=[lt]:o.push(lt),u++}}if(tt===u)return xr.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=ft,null!==o&&(ft?o.length=ft:o=null),fe=at===u}else fe=!0;if(fe){if(void 0!==$e.lt){const at=u,ft=u,tt=u;if($e&&"object"==typeof $e&&!Array.isArray($e)){let Je;if(void 0===$e.lte&&(Je="lte")){const lt={};null===o?o=[lt]:o.push(lt),u++}}if(tt===u)return xr.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=ft,null!==o&&(ft?o.length=ft:o=null),fe=at===u}else fe=!0;if(fe){if(void 0!==$e.lte){const at=u,ft=u,tt=u;if($e&&"object"==typeof $e&&!Array.isArray($e)){let Je;if(void 0===$e.lt&&(Je="lt")){const lt={};null===o?o=[lt]:o.push(lt),u++}}if(tt===u)return xr.errors=[{instancePath:t+"/dataSize",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=ft,null!==o&&(ft?o.length=ft:o=null),fe=at===u}else fe=!0;if(fe){if(void 0!==$e.gt){let at=$e.gt;const ft=u;if("number"!=typeof at||!isFinite(at))return xr.errors=[{instancePath:t+"/dataSize/gt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ae=ft===u}else Ae=!0;if(Ae){if(void 0!==$e.gte){let at=$e.gte;const ft=u;if("number"!=typeof at||!isFinite(at))return xr.errors=[{instancePath:t+"/dataSize/gte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;Ae=ft===u}else Ae=!0;if(Ae){if(void 0!==$e.lt){let at=$e.lt;const ft=u;if("number"!=typeof at||!isFinite(at))return xr.errors=[{instancePath:t+"/dataSize/lt",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;Ae=ft===u}else Ae=!0;if(Ae)if(void 0!==$e.lte){let at=$e.lte;const ft=u;if("number"!=typeof at||!isFinite(at))return xr.errors=[{instancePath:t+"/dataSize/lte",schemaPath:"https://identity.foundation/dwn/json-schemas/number-range-filter.json/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;Ae=ft===u}else Ae=!0}}}}}}}}}ae=Ye===u}else ae=!0;if(ae){if(void 0!==n.dateCreated){let $e=n.dateCreated;const Ye=u;if(u===Ye){if(!$e||"object"!=typeof $e||Array.isArray($e))return xr.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys($e).length<1)return xr.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const ct=u;for(const vt in $e)if("from"!==vt&&"to"!==vt)return xr.errors=[{instancePath:t+"/dateCreated",schemaPath:"#/properties/dateCreated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:vt},message:"must NOT have additional properties"}],!1;if(ct===u){if(void 0!==$e.from){let vt=$e.from;const at=u;if(u==u){if("string"!=typeof vt)return xr.errors=[{instancePath:t+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(vt))return xr.errors=[{instancePath:t+"/dateCreated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var Ce=at===u}else Ce=!0;if(Ce)if(void 0!==$e.to){let vt=$e.to;const at=u;if(u==u){if("string"!=typeof vt)return xr.errors=[{instancePath:t+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(vt))return xr.errors=[{instancePath:t+"/dateCreated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}Ce=at===u}else Ce=!0}}}ae=Ye===u}else ae=!0;if(ae){if(void 0!==n.datePublished){let $e=n.datePublished;const Ye=u;if(u===Ye){if(!$e||"object"!=typeof $e||Array.isArray($e))return xr.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys($e).length<1)return xr.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const ct=u;for(const vt in $e)if("from"!==vt&&"to"!==vt)return xr.errors=[{instancePath:t+"/datePublished",schemaPath:"#/properties/datePublished/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:vt},message:"must NOT have additional properties"}],!1;if(ct===u){if(void 0!==$e.from){let vt=$e.from;const at=u;if(u==u){if("string"!=typeof vt)return xr.errors=[{instancePath:t+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(vt))return xr.errors=[{instancePath:t+"/datePublished/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var je=at===u}else je=!0;if(je)if(void 0!==$e.to){let vt=$e.to;const at=u;if(u==u){if("string"!=typeof vt)return xr.errors=[{instancePath:t+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(vt))return xr.errors=[{instancePath:t+"/datePublished/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}je=at===u}else je=!0}}}ae=Ye===u}else ae=!0;if(ae)if(void 0!==n.dateUpdated){let $e=n.dateUpdated;const Ye=u;if(u===Ye){if(!$e||"object"!=typeof $e||Array.isArray($e))return xr.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys($e).length<1)return xr.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const ct=u;for(const vt in $e)if("from"!==vt&&"to"!==vt)return xr.errors=[{instancePath:t+"/dateUpdated",schemaPath:"#/properties/dateUpdated/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:vt},message:"must NOT have additional properties"}],!1;if(ct===u){if(void 0!==$e.from){let vt=$e.from;const at=u;if(u==u){if("string"!=typeof vt)return xr.errors=[{instancePath:t+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(vt))return xr.errors=[{instancePath:t+"/dateUpdated/from",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}var Le=at===u}else Le=!0;if(Le)if(void 0!==$e.to){let vt=$e.to;const at=u;if(u==u){if("string"!=typeof vt)return xr.errors=[{instancePath:t+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(vt))return xr.errors=[{instancePath:t+"/dateUpdated/to",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}Le=at===u}else Le=!0}}}ae=Ye===u}else ae=!0}}}}}}}}}}}}}}}}return xr.errors=o,0===u}xr.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const RT=Ti,r6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/events-get.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Events"],type:"string"},method:{enum:["Get"],type:"string"},messageTimestamp:{type:"string"},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}}}};function Ti(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Ti.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Ti.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let ee;if(void 0===n.authorization&&(ee="authorization")||void 0===n.descriptor&&(ee="descriptor"))return Ti.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:ee},message:"must have required property '"+ee+"'"}],!1;{const ae=u;for(const te in n)if("authorization"!==te&&"descriptor"!==te)return Ti.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:te},message:"must NOT have additional properties"}],!1;if(ae===u){if(void 0!==n.authorization){const te=u;di(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?di.errors:o.concat(di.errors),u=o.length);var S=te===u}else S=!0;if(S)if(void 0!==n.descriptor){let te=n.descriptor;const fe=u;if(u===fe){if(!te||"object"!=typeof te||Array.isArray(te))return Ti.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let Pe;if(void 0===te.interface&&(Pe="interface")||void 0===te.method&&(Pe="method")||void 0===te.messageTimestamp&&(Pe="messageTimestamp"))return Ti.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Pe},message:"must have required property '"+Pe+"'"}],!1;{const Te=u;for(const Ae in te)if("interface"!==Ae&&"method"!==Ae&&"messageTimestamp"!==Ae&&"cursor"!==Ae)return Ti.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ae},message:"must NOT have additional properties"}],!1;if(Te===u){if(void 0!==te.interface){let Ae=te.interface;const Ce=u;if("string"!=typeof Ae)return Ti.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Events"!==Ae)return Ti.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:r6.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=Ce===u}else y=!0;if(y){if(void 0!==te.method){let Ae=te.method;const Ce=u;if("string"!=typeof Ae)return Ti.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Get"!==Ae)return Ti.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:r6.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=Ce===u}else y=!0;if(y){if(void 0!==te.messageTimestamp){const Ae=u;if("string"!=typeof te.messageTimestamp)return Ti.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"#/properties/descriptor/properties/messageTimestamp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;y=Ae===u}else y=!0;if(y)if(void 0!==te.cursor){let Ae=te.cursor;const Ce=u;if(u==u){if(!Ae||"object"!=typeof Ae||Array.isArray(Ae))return Ti.errors=[{instancePath:t+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(Ae).length<1)return Ti.errors=[{instancePath:t+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let ze;if(void 0===Ae.messageCid&&(ze="messageCid")||void 0===Ae.value&&(ze="value"))return Ti.errors=[{instancePath:t+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:ze},message:"must have required property '"+ze+"'"}],!1;{const $e=u;for(const Ye in Ae)if("messageCid"!==Ye&&"value"!==Ye)return Ti.errors=[{instancePath:t+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ye},message:"must NOT have additional properties"}],!1;if($e===u){if(void 0!==Ae.messageCid){const Ye=u;if("string"!=typeof Ae.messageCid)return Ti.errors=[{instancePath:t+"/descriptor/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var R=Ye===u}else R=!0;if(R)if(void 0!==Ae.value){let Ye=Ae.value;const ut=u;if("string"!=typeof Ye&&("number"!=typeof Ye||!isFinite(Ye)))return Ti.errors=[{instancePath:t+"/descriptor/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:Dp.properties.value.type},message:"must be string,number"}],!1;R=ut===u}else R=!0}}}}y=Ce===u}else y=!0}}}}}}S=fe===u}else S=!0}}}}return Ti.errors=o,0===u}Ti.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const kT=fi,n6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/events-query.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Events"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filters:{type:"array",minItems:1,items:{$ref:"https://identity.foundation/dwn/json-schemas/events-filter.json"}},cursor:{$ref:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json"}}}}};function fi(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=fi.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return fi.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let ae;if(void 0===n.authorization&&(ae="authorization")||void 0===n.descriptor&&(ae="descriptor"))return fi.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:ae},message:"must have required property '"+ae+"'"}],!1;{const te=u;for(const fe in n)if("authorization"!==fe&&"descriptor"!==fe)return fi.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:fe},message:"must NOT have additional properties"}],!1;if(te===u){if(void 0!==n.authorization){const fe=u;di(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?di.errors:o.concat(di.errors),u=o.length);var S=fe===u}else S=!0;if(S)if(void 0!==n.descriptor){let fe=n.descriptor;const we=u;if(u===we){if(!fe||"object"!=typeof fe||Array.isArray(fe))return fi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let Te;if(void 0===fe.interface&&(Te="interface")||void 0===fe.method&&(Te="method")||void 0===fe.messageTimestamp&&(Te="messageTimestamp")||void 0===fe.filters&&(Te="filters"))return fi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Te},message:"must have required property '"+Te+"'"}],!1;{const Ae=u;for(const Ce in fe)if("interface"!==Ce&&"method"!==Ce&&"messageTimestamp"!==Ce&&"filters"!==Ce&&"cursor"!==Ce)return fi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ce},message:"must NOT have additional properties"}],!1;if(Ae===u){if(void 0!==fe.interface){let Ce=fe.interface;const je=u;if("string"!=typeof Ce)return fi.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Events"!==Ce)return fi.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:n6.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=je===u}else y=!0;if(y){if(void 0!==fe.method){let Ce=fe.method;const je=u;if("string"!=typeof Ce)return fi.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Query"!==Ce)return fi.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:n6.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=je===u}else y=!0;if(y){if(void 0!==fe.messageTimestamp){let Ce=fe.messageTimestamp;const je=u;if(u==u){if("string"!=typeof Ce)return fi.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(Ce))return fi.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}y=je===u}else y=!0;if(y){if(void 0!==fe.filters){let Ce=fe.filters;const je=u;if(u===je){if(!Array.isArray(Ce))return fi.errors=[{instancePath:t+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(Ce.length<1)return fi.errors=[{instancePath:t+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{const ze=Ce.length;for(let $e=0;$e<ze;$e++){const Ye=u;if(xr(Ce[$e],{instancePath:t+"/descriptor/filters/"+$e,parentData:Ce,parentDataProperty:$e,rootData:s,dynamicAnchors:c})||(o=null===o?xr.errors:o.concat(xr.errors),u=o.length),Ye!==u)break}}}y=je===u}else y=!0;if(y)if(void 0!==fe.cursor){let Ce=fe.cursor;const je=u;if(u==u){if(!Ce||"object"!=typeof Ce||Array.isArray(Ce))return fi.errors=[{instancePath:t+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(Ce).length<1)return fi.errors=[{instancePath:t+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let $e;if(void 0===Ce.messageCid&&($e="messageCid")||void 0===Ce.value&&($e="value"))return fi.errors=[{instancePath:t+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/required",keyword:"required",params:{missingProperty:$e},message:"must have required property '"+$e+"'"}],!1;{const Ye=u;for(const ut in Ce)if("messageCid"!==ut&&"value"!==ut)return fi.errors=[{instancePath:t+"/descriptor/cursor",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ut},message:"must NOT have additional properties"}],!1;if(Ye===u){if(void 0!==Ce.messageCid){const ut=u;if("string"!=typeof Ce.messageCid)return fi.errors=[{instancePath:t+"/descriptor/cursor/messageCid",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ee=ut===u}else ee=!0;if(ee)if(void 0!==Ce.value){let ut=Ce.value;const ct=u;if("string"!=typeof ut&&("number"!=typeof ut||!isFinite(ut)))return fi.errors=[{instancePath:t+"/descriptor/cursor/value",schemaPath:"https://identity.foundation/dwn/json-schemas/pagination-cursor.json/properties/value/type",keyword:"type",params:{type:Dp.properties.value.type},message:"must be string,number"}],!1;ee=ct===u}else ee=!0}}}}y=je===u}else y=!0}}}}}}}S=we===u}else S=!0}}}}return fi.errors=o,0===u}fi.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const OT=Ls,i6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/events-subscribe.json",type:"object",additionalProperties:!1,required:["descriptor","authorization"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filters"],properties:{interface:{enum:["Events"],type:"string"},method:{enum:["Subscribe"],type:"string"},messageTimestamp:{type:"string"},filters:{type:"array",items:{$ref:"https://identity.foundation/dwn/json-schemas/events-filter.json"}}}}}};function Ls(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Ls.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Ls.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let ee;if(void 0===n.descriptor&&(ee="descriptor")||void 0===n.authorization&&(ee="authorization"))return Ls.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:ee},message:"must have required property '"+ee+"'"}],!1;{const ae=u;for(const te in n)if("authorization"!==te&&"descriptor"!==te)return Ls.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:te},message:"must NOT have additional properties"}],!1;if(ae===u){if(void 0!==n.authorization){const te=u;di(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?di.errors:o.concat(di.errors),u=o.length);var S=te===u}else S=!0;if(S)if(void 0!==n.descriptor){let te=n.descriptor;const fe=u;if(u===fe){if(!te||"object"!=typeof te||Array.isArray(te))return Ls.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let Pe;if(void 0===te.interface&&(Pe="interface")||void 0===te.method&&(Pe="method")||void 0===te.messageTimestamp&&(Pe="messageTimestamp")||void 0===te.filters&&(Pe="filters"))return Ls.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Pe},message:"must have required property '"+Pe+"'"}],!1;{const Te=u;for(const Ae in te)if("interface"!==Ae&&"method"!==Ae&&"messageTimestamp"!==Ae&&"filters"!==Ae)return Ls.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ae},message:"must NOT have additional properties"}],!1;if(Te===u){if(void 0!==te.interface){let Ae=te.interface;const Ce=u;if("string"!=typeof Ae)return Ls.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Events"!==Ae)return Ls.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:i6.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=Ce===u}else y=!0;if(y){if(void 0!==te.method){let Ae=te.method;const Ce=u;if("string"!=typeof Ae)return Ls.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Subscribe"!==Ae)return Ls.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:i6.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=Ce===u}else y=!0;if(y){if(void 0!==te.messageTimestamp){const Ae=u;if("string"!=typeof te.messageTimestamp)return Ls.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"#/properties/descriptor/properties/messageTimestamp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;y=Ae===u}else y=!0;if(y)if(void 0!==te.filters){let Ae=te.filters;const Ce=u;if(u===Ce){if(!Array.isArray(Ae))return Ls.errors=[{instancePath:t+"/descriptor/filters",schemaPath:"#/properties/descriptor/properties/filters/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{const Le=Ae.length;for(let ze=0;ze<Le;ze++){const $e=u;if(xr(Ae[ze],{instancePath:t+"/descriptor/filters/"+ze,parentData:Ae,parentDataProperty:ze,rootData:s,dynamicAnchors:c})||(o=null===o?xr.errors:o.concat(xr.errors),u=o.length),$e!==u)break}}}y=Ce===u}else y=!0}}}}}}S=fe===u}else S=!0}}}}return Ls.errors=o,0===u}Ls.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const CT=Xl;function Xl(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){const A=Xl.evaluated;return A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),n&&"object"==typeof n&&!Array.isArray(n)?(Xl.errors=null,!0):(Xl.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}Xl.evaluated={dynamicProps:!1,dynamicItems:!1};const DT=ps;function ps(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=ps.evaluated;A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0);const S=u;let y=!1,R=null;const ee=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let je;if(void 0===n.crv&&(je="crv")||void 0===n.x&&(je="x")){const Le={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:je},message:"must have required property '"+je+"'"};null===o?o=[Le]:o.push(Le),u++}else{if(void 0!==n.kty){const Le=u;if("EC"!==n.kty){const ze={instancePath:t+"/kty",schemaPath:"#/oneOf/0/properties/kty/const",keyword:"const",params:{allowedValue:"EC"},message:"must be equal to constant"};null===o?o=[ze]:o.push(ze),u++}var ae=Le===u}else ae=!0;if(ae){if(void 0!==n.crv){const Le=u;if("string"!=typeof n.crv){const $e={instancePath:t+"/crv",schemaPath:"#/oneOf/0/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[$e]:o.push($e),u++}ae=Le===u}else ae=!0;if(ae){if(void 0!==n.x){const Le=u;if("string"!=typeof n.x){const $e={instancePath:t+"/x",schemaPath:"#/oneOf/0/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[$e]:o.push($e),u++}ae=Le===u}else ae=!0;if(ae){if(void 0!==n.y){const Le=u;if("string"!=typeof n.y){const $e={instancePath:t+"/y",schemaPath:"#/oneOf/0/properties/y/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[$e]:o.push($e),u++}ae=Le===u}else ae=!0;if(ae)if(void 0!==n.d){const Le=u;if("string"!=typeof n.d){const $e={instancePath:t+"/d",schemaPath:"#/oneOf/0/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[$e]:o.push($e),u++}ae=Le===u}else ae=!0}}}}}if(Pe=ee===u){y=!0,R=0;var te={kty:!0,crv:!0,x:!0,y:!0,d:!0}}const fe=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let je;if(void 0===n.crv&&(je="crv")||void 0===n.x&&(je="x")){const Le={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:je},message:"must have required property '"+je+"'"};null===o?o=[Le]:o.push(Le),u++}else{if(void 0!==n.kty){const Le=u;if("OKP"!==n.kty){const ze={instancePath:t+"/kty",schemaPath:"#/oneOf/1/properties/kty/const",keyword:"const",params:{allowedValue:"OKP"},message:"must be equal to constant"};null===o?o=[ze]:o.push(ze),u++}var we=Le===u}else we=!0;if(we){if(void 0!==n.crv){const Le=u;if("string"!=typeof n.crv){const $e={instancePath:t+"/crv",schemaPath:"#/oneOf/1/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[$e]:o.push($e),u++}we=Le===u}else we=!0;if(we){if(void 0!==n.x){const Le=u;if("string"!=typeof n.x){const $e={instancePath:t+"/x",schemaPath:"#/oneOf/1/properties/x/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[$e]:o.push($e),u++}we=Le===u}else we=!0;if(we)if(void 0!==n.d){const Le=u;if("string"!=typeof n.d){const $e={instancePath:t+"/d",schemaPath:"#/oneOf/1/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[$e]:o.push($e),u++}we=Le===u}else we=!0}}}}if((Pe=fe===u)&&y)y=!1,R=[R,1];else{Pe&&(y=!0,R=1,!0!==te&&((te=te||{}).kty=!0,te.crv=!0,te.x=!0,te.d=!0));const je=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let ze;if(void 0===n.n&&(ze="n")||void 0===n.e&&(ze="e")){const $e={instancePath:t,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:ze},message:"must have required property '"+ze+"'"};null===o?o=[$e]:o.push($e),u++}else{if(void 0!==n.kty){const $e=u;if("RSA"!==n.kty){const Ye={instancePath:t+"/kty",schemaPath:"#/oneOf/2/properties/kty/const",keyword:"const",params:{allowedValue:"RSA"},message:"must be equal to constant"};null===o?o=[Ye]:o.push(Ye),u++}var Te=$e===u}else Te=!0;if(Te){if(void 0!==n.n){const $e=u;if("string"!=typeof n.n){const ut={instancePath:t+"/n",schemaPath:"#/oneOf/2/properties/n/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ut]:o.push(ut),u++}Te=$e===u}else Te=!0;if(Te){if(void 0!==n.e){const $e=u;if("string"!=typeof n.e){const ut={instancePath:t+"/e",schemaPath:"#/oneOf/2/properties/e/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ut]:o.push(ut),u++}Te=$e===u}else Te=!0;if(Te){if(void 0!==n.d){const $e=u;if("string"!=typeof n.d){const ut={instancePath:t+"/d",schemaPath:"#/oneOf/2/properties/d/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ut]:o.push(ut),u++}Te=$e===u}else Te=!0;if(Te){if(void 0!==n.p){const $e=u;if("string"!=typeof n.p){const ut={instancePath:t+"/p",schemaPath:"#/oneOf/2/properties/p/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ut]:o.push(ut),u++}Te=$e===u}else Te=!0;if(Te){if(void 0!==n.q){const $e=u;if("string"!=typeof n.q){const ut={instancePath:t+"/q",schemaPath:"#/oneOf/2/properties/q/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ut]:o.push(ut),u++}Te=$e===u}else Te=!0;if(Te){if(void 0!==n.dp){const $e=u;if("string"!=typeof n.dp){const ut={instancePath:t+"/dp",schemaPath:"#/oneOf/2/properties/dp/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ut]:o.push(ut),u++}Te=$e===u}else Te=!0;if(Te){if(void 0!==n.dq){const $e=u;if("string"!=typeof n.dq){const ut={instancePath:t+"/dq",schemaPath:"#/oneOf/2/properties/dq/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ut]:o.push(ut),u++}Te=$e===u}else Te=!0;if(Te){if(void 0!==n.qi){const $e=u;if("string"!=typeof n.qi){const ut={instancePath:t+"/qi",schemaPath:"#/oneOf/2/properties/qi/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ut]:o.push(ut),u++}Te=$e===u}else Te=!0;if(Te)if(void 0!==n.oth){let $e=n.oth;const Ye=u;if(!$e||"object"!=typeof $e||Array.isArray($e)){const ct={instancePath:t+"/oth",schemaPath:"#/oneOf/2/properties/oth/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0}}}}}}}}}}if((Pe=je===u)&&y)y=!1,R=[R,2];else{Pe&&(y=!0,R=2,!0!==te&&((te=te||{}).kty=!0,te.n=!0,te.e=!0,te.d=!0,te.p=!0,te.q=!0,te.dp=!0,te.dq=!0,te.qi=!0,te.oth=!0));const ze=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ye;if(void 0===n.k&&(Ye="k")){const ut={instancePath:t,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:Ye},message:"must have required property '"+Ye+"'"};null===o?o=[ut]:o.push(ut),u++}else{if(void 0!==n.kty){const ut=u;if("oct"!==n.kty){const ct={instancePath:t+"/kty",schemaPath:"#/oneOf/3/properties/kty/const",keyword:"const",params:{allowedValue:"oct"},message:"must be equal to constant"};null===o?o=[ct]:o.push(ct),u++}var Ae=ut===u}else Ae=!0;if(Ae)if(void 0!==n.k){const ut=u;if("string"!=typeof n.k){const vt={instancePath:t+"/k",schemaPath:"#/oneOf/3/properties/k/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[vt]:o.push(vt),u++}Ae=ut===u}else Ae=!0}}var Pe;(Pe=ze===u)&&y?(y=!1,R=[R,3]):Pe&&(y=!0,R=3,!0!==te&&((te=te||{}).kty=!0,te.k=!0))}}if(!y){const je={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:R},message:"must match exactly one schema in oneOf"};return null===o?o=[je]:o.push(je),u++,ps.errors=o,!1}if(u=S,null!==o&&(S?o.length=S:o=null),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return ps.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let je;if(void 0===n.kty&&(je="kty"))return ps.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:je},message:"must have required property '"+je+"'"}],!1;if(!0!==te&&((te=te||{}).alg=!0,te.kid=!0,te.kty=!0,te.crv=!0,te.use=!0,te.key_ops=!0,te.x5u=!0,te.x5c=!0,te.x5t=!0,te["x5t#S256"]=!0),void 0!==n.alg){const Le=u;if("string"!=typeof n.alg)return ps.errors=[{instancePath:t+"/alg",schemaPath:"#/properties/alg/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ce=Le===u}else Ce=!0;if(Ce){if(void 0!==n.kid){const Le=u;if("string"!=typeof n.kid)return ps.errors=[{instancePath:t+"/kid",schemaPath:"#/properties/kid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ce=Le===u}else Ce=!0;if(Ce){if(void 0!==n.kty){let Le=n.kty;const ze=u;if("EC"!==Le&&"RSA"!==Le&&"oct"!==Le&&"OKP"!==Le)return ps.errors=[{instancePath:t+"/kty",schemaPath:"#/properties/kty/enum",keyword:"enum",params:{allowedValues:X3.properties.kty.enum},message:"must be equal to one of the allowed values"}],!1;Ce=ze===u}else Ce=!0;if(Ce){if(void 0!==n.crv){const Le=u;if("string"!=typeof n.crv)return ps.errors=[{instancePath:t+"/crv",schemaPath:"#/properties/crv/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ce=Le===u}else Ce=!0;if(Ce){if(void 0!==n.use){const Le=u;if("string"!=typeof n.use)return ps.errors=[{instancePath:t+"/use",schemaPath:"#/properties/use/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ce=Le===u}else Ce=!0;if(Ce){if(void 0!==n.key_ops){const Le=u;if("string"!=typeof n.key_ops)return ps.errors=[{instancePath:t+"/key_ops",schemaPath:"#/properties/key_ops/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ce=Le===u}else Ce=!0;if(Ce){if(void 0!==n.x5u){const Le=u;if("string"!=typeof n.x5u)return ps.errors=[{instancePath:t+"/x5u",schemaPath:"#/properties/x5u/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ce=Le===u}else Ce=!0;if(Ce){if(void 0!==n.x5c){const Le=u;if("string"!=typeof n.x5c)return ps.errors=[{instancePath:t+"/x5c",schemaPath:"#/properties/x5c/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ce=Le===u}else Ce=!0;if(Ce){if(void 0!==n.x5t){const Le=u;if("string"!=typeof n.x5t)return ps.errors=[{instancePath:t+"/x5t",schemaPath:"#/properties/x5t/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ce=Le===u}else Ce=!0;if(Ce)if(void 0!==n["x5t#S256"]){const Le=u;if("string"!=typeof n["x5t#S256"])return ps.errors=[{instancePath:t+"/x5t#S256",schemaPath:"#/properties/x5t%23S256/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Ce=Le===u}else Ce=!0}}}}}}}}}}return ps.errors=o,A.props=te,0===u}ps.evaluated={dynamicProps:!0,dynamicItems:!1};const NT=Nn,$T=ba,jT={$id:"https://identity.foundation/dwn/json-schemas/jwk-verification-method.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,required:["id","type","controller","publicKeyJwk"],properties:{id:{type:"string"},type:{enum:["JsonWebKey","JsonWebKey2020"]},controller:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}}};function ba(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=ba.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return ba.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let y;if(void 0===n.id&&(y="id")||void 0===n.type&&(y="type")||void 0===n.controller&&(y="controller")||void 0===n.publicKeyJwk&&(y="publicKeyJwk"))return ba.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{const R=u;for(const ee in n)if("id"!==ee&&"type"!==ee&&"controller"!==ee&&"publicKeyJwk"!==ee)return ba.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ee},message:"must NOT have additional properties"}],!1;if(R===u){if(void 0!==n.id){const ee=u;if("string"!=typeof n.id)return ba.errors=[{instancePath:t+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=ee===u}else S=!0;if(S){if(void 0!==n.type){let ee=n.type;const ae=u;if("JsonWebKey"!==ee&&"JsonWebKey2020"!==ee)return ba.errors=[{instancePath:t+"/type",schemaPath:"#/properties/type/enum",keyword:"enum",params:{allowedValues:jT.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;S=ae===u}else S=!0;if(S){if(void 0!==n.controller){let ee=n.controller;const ae=u;if(u==u){if("string"!=typeof ee)return ba.errors=[{instancePath:t+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!wu.test(ee))return ba.errors=[{instancePath:t+"/controller",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}S=ae===u}else S=!0;if(S)if(void 0!==n.publicKeyJwk){const ee=u;$n(n.publicKeyJwk,{instancePath:t+"/publicKeyJwk",parentData:n,parentDataProperty:"publicKeyJwk",rootData:s,dynamicAnchors:c})||(o=null===o?$n.errors:o.concat($n.errors),u=o.length),S=ee===u}else S=!0}}}}}}return ba.errors=o,0===u}ba.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const UT=Vi,s6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/messages-get.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Messages"],type:"string"},method:{enum:["Get"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},messageCids:{type:"array",items:{type:"string"},minItems:1}}}}};function Vi(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Vi.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Vi.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let ee;if(void 0===n.authorization&&(ee="authorization")||void 0===n.descriptor&&(ee="descriptor"))return Vi.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:ee},message:"must have required property '"+ee+"'"}],!1;{const ae=u;for(const te in n)if("authorization"!==te&&"descriptor"!==te)return Vi.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:te},message:"must NOT have additional properties"}],!1;if(ae===u){if(void 0!==n.authorization){const te=u;di(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?di.errors:o.concat(di.errors),u=o.length);var S=te===u}else S=!0;if(S)if(void 0!==n.descriptor){let te=n.descriptor;const fe=u;if(u===fe){if(!te||"object"!=typeof te||Array.isArray(te))return Vi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let Pe;if(void 0===te.interface&&(Pe="interface")||void 0===te.method&&(Pe="method")||void 0===te.messageTimestamp&&(Pe="messageTimestamp"))return Vi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Pe},message:"must have required property '"+Pe+"'"}],!1;{const Te=u;for(const Ae in te)if("interface"!==Ae&&"method"!==Ae&&"messageTimestamp"!==Ae&&"messageCids"!==Ae)return Vi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ae},message:"must NOT have additional properties"}],!1;if(Te===u){if(void 0!==te.interface){let Ae=te.interface;const Ce=u;if("string"!=typeof Ae)return Vi.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Messages"!==Ae)return Vi.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:s6.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=Ce===u}else y=!0;if(y){if(void 0!==te.method){let Ae=te.method;const Ce=u;if("string"!=typeof Ae)return Vi.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Get"!==Ae)return Vi.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:s6.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=Ce===u}else y=!0;if(y){if(void 0!==te.messageTimestamp){let Ae=te.messageTimestamp;const Ce=u;if(u==u){if("string"!=typeof Ae)return Vi.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(Ae))return Vi.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}y=Ce===u}else y=!0;if(y)if(void 0!==te.messageCids){let Ae=te.messageCids;const Ce=u;if(u===Ce){if(!Array.isArray(Ae))return Vi.errors=[{instancePath:t+"/descriptor/messageCids",schemaPath:"#/properties/descriptor/properties/messageCids/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(Ae.length<1)return Vi.errors=[{instancePath:t+"/descriptor/messageCids",schemaPath:"#/properties/descriptor/properties/messageCids/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{const Le=Ae.length;for(let ze=0;ze<Le;ze++){const $e=u;if("string"!=typeof Ae[ze])return Vi.errors=[{instancePath:t+"/descriptor/messageCids/"+ze,schemaPath:"#/properties/descriptor/properties/messageCids/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if($e!==u)break}}}y=Ce===u}else y=!0}}}}}}S=fe===u}else S=!0}}}}return Vi.errors=o,0===u}Vi.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const LT=Ys;function Ys(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Ys.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Ys.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(n).length<1)return Ys.errors=[{instancePath:t,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const fe=u;for(const we in n)if("gt"!==we&&"gte"!==we&&"lt"!==we&&"lte"!==we)return Ys.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:we},message:"must NOT have additional properties"}],!1;if(fe===u){if(void 0!==n.gt){const we=u,Pe=u,Te=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ae;if(void 0===n.gte&&(Ae="gte")){const Ce={};null===o?o=[Ce]:o.push(Ce),u++}}if(Te===u)return Ys.errors=[{instancePath:t,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Pe,null!==o&&(Pe?o.length=Pe:o=null);var y=we===u}else y=!0;if(y){if(void 0!==n.gte){const we=u,Pe=u,Te=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ce;if(void 0===n.gt&&(Ce="gt")){const je={};null===o?o=[je]:o.push(je),u++}}if(Te===u)return Ys.errors=[{instancePath:t,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Pe,null!==o&&(Pe?o.length=Pe:o=null),y=we===u}else y=!0;if(y){if(void 0!==n.lt){const we=u,Pe=u,Te=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ce;if(void 0===n.lte&&(Ce="lte")){const je={};null===o?o=[je]:o.push(je),u++}}if(Te===u)return Ys.errors=[{instancePath:t,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Pe,null!==o&&(Pe?o.length=Pe:o=null),y=we===u}else y=!0;if(y){if(void 0!==n.lte){const we=u,Pe=u,Te=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ce;if(void 0===n.lt&&(Ce="lt")){const je={};null===o?o=[je]:o.push(je),u++}}if(Te===u)return Ys.errors=[{instancePath:t,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Pe,null!==o&&(Pe?o.length=Pe:o=null),y=we===u}else y=!0;if(y){if(void 0!==n.gt){let we=n.gt;const Pe=u;if("number"!=typeof we||!isFinite(we))return Ys.errors=[{instancePath:t+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var te=Pe===u}else te=!0;if(te){if(void 0!==n.gte){let we=n.gte;const Pe=u;if("number"!=typeof we||!isFinite(we))return Ys.errors=[{instancePath:t+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;te=Pe===u}else te=!0;if(te){if(void 0!==n.lt){let we=n.lt;const Pe=u;if("number"!=typeof we||!isFinite(we))return Ys.errors=[{instancePath:t+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;te=Pe===u}else te=!0;if(te)if(void 0!==n.lte){let we=n.lte;const Pe=u;if("number"!=typeof we||!isFinite(we))return Ys.errors=[{instancePath:t+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;te=Pe===u}else te=!0}}}}}}}}}return Ys.errors=o,0===u}Ys.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const FT=Za;function Za(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){const A=Za.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),!n||"object"!=typeof n||Array.isArray(n))return Za.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(n).length<1)return Za.errors=[{instancePath:t,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{let y;if(void 0===n.messageCid&&(y="messageCid")||void 0===n.value&&(y="value"))return Za.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{const R=0;for(const ee in n)if("messageCid"!==ee&&"value"!==ee)return Za.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ee},message:"must NOT have additional properties"}],!1;if(0===R){if(void 0!==n.messageCid){const ee=0;if("string"!=typeof n.messageCid)return Za.errors=[{instancePath:t+"/messageCid",schemaPath:"#/properties/messageCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=0===ee}else S=!0;if(S)if(void 0!==n.value){let ee=n.value;const ae=0;if("string"!=typeof ee&&("number"!=typeof ee||!isFinite(ee)))return Za.errors=[{instancePath:t+"/value",schemaPath:"#/properties/value/type",keyword:"type",params:{type:Dp.properties.value.type},message:"must be string,number"}],!1;S=0===ae}else S=!0}}}return Za.errors=null,!0}Za.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const KT=Fs,o6={type:"object",additionalProperties:!1,properties:{publication:{enum:["Required","Prohibited"],type:"string"}}};function _u(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=_u.evaluated;A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0);const S=u;let y=!1,R=null;const ee=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){if(void 0!==n.interface){const $e=u;if("Protocols"!==n.interface){const Ye={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};null===o?o=[Ye]:o.push(Ye),u++}var te=$e===u}else te=!0;if(te)if(void 0!==n.method){const $e=u;if("Query"!==n.method){const ut={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};null===o?o=[ut]:o.push(ut),u++}te=$e===u}else te=!0}else{const $e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[$e]:o.push($e),u++}if(Ae=ee===u){y=!0,R=0;var fe={interface:!0,method:!0}}const we=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let $e;if(void 0===n.interface&&($e="interface")||void 0===n.method&&($e="method")){const Ye={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:$e},message:"must have required property '"+$e+"'"};null===o?o=[Ye]:o.push(Ye),u++}else{if(void 0!==n.interface){const Ye=u;if("Records"!==n.interface){const ut={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[ut]:o.push(ut),u++}var Te=Ye===u}else Te=!0;if(Te){if(void 0!==n.method){const Ye=u;if("Read"!==n.method){const ct={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0;if(Te){if(void 0!==n.schema){const Ye=u;if("string"!=typeof n.schema){const ct={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0;if(Te){if(void 0!==n.protocol){const Ye=u;if("string"!=typeof n.protocol){const ct={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0;if(Te){if(void 0!==n.contextId){const Ye=u;if("string"!=typeof n.contextId){const ct={instancePath:t+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0;if(Te)if(void 0!==n.protocolPath){const Ye=u;if("string"!=typeof n.protocolPath){const ct={instancePath:t+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0}}}}}}else{const $e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[$e]:o.push($e),u++}if((Ae=we===u)&&y)y=!1,R=[R,1];else{Ae&&(y=!0,R=1,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.schema=!0,fe.protocol=!0,fe.contextId=!0,fe.protocolPath=!0));const $e=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let ct;if(void 0===n.interface&&(ct="interface")||void 0===n.method&&(ct="method")){const vt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:ct},message:"must have required property '"+ct+"'"};null===o?o=[vt]:o.push(vt),u++}else{if(void 0!==n.interface){const vt=u;if("Records"!==n.interface){const at={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[at]:o.push(at),u++}var Ce=vt===u}else Ce=!0;if(Ce){if(void 0!==n.method){const vt=u;if("Delete"!==n.method){const ft={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};null===o?o=[ft]:o.push(ft),u++}Ce=vt===u}else Ce=!0;if(Ce){if(void 0!==n.protocol){const vt=u;if("string"!=typeof n.protocol){const ft={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ft]:o.push(ft),u++}Ce=vt===u}else Ce=!0;if(Ce)if(void 0!==n.schema){const vt=u;if("string"!=typeof n.schema){const ft={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ft]:o.push(ft),u++}Ce=vt===u}else Ce=!0}}}}else{const ct={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[ct]:o.push(ct),u++}if((Ae=$e===u)&&y)y=!1,R=[R,2];else{Ae&&(y=!0,R=2,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.protocol=!0,fe.schema=!0));const ct=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let ft;if(void 0===n.interface&&(ft="interface")||void 0===n.method&&(ft="method")){const tt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:ft},message:"must have required property '"+ft+"'"};null===o?o=[tt]:o.push(tt),u++}else{if(void 0!==n.interface){const tt=u;if("Records"!==n.interface){const st={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[st]:o.push(st),u++}var je=tt===u}else je=!0;if(je){if(void 0!==n.method){const tt=u;if("Write"!==n.method){const Je={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0;if(je){if(void 0!==n.schema){const tt=u;if("string"!=typeof n.schema){const Je={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0;if(je){if(void 0!==n.protocol){const tt=u;if("string"!=typeof n.protocol){const Je={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0;if(je){if(void 0!==n.contextId){const tt=u;if("string"!=typeof n.contextId){const Je={instancePath:t+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0;if(je)if(void 0!==n.protocolPath){const tt=u;if("string"!=typeof n.protocolPath){const Je={instancePath:t+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0}}}}}}else{const ft={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[ft]:o.push(ft),u++}if((Ae=ct===u)&&y)y=!1,R=[R,3];else{Ae&&(y=!0,R=3,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.schema=!0,fe.protocol=!0,fe.contextId=!0,fe.protocolPath=!0));const ft=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let Je;if(void 0===n.interface&&(Je="interface")||void 0===n.method&&(Je="method")){const lt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:Je},message:"must have required property '"+Je+"'"};null===o?o=[lt]:o.push(lt),u++}else{if(void 0!==n.interface){const lt=u;if("Records"!==n.interface){const ot={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[ot]:o.push(ot),u++}var Le=lt===u}else Le=!0;if(Le){if(void 0!==n.method){const lt=u;if("Query"!==n.method){const yt={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};null===o?o=[yt]:o.push(yt),u++}Le=lt===u}else Le=!0;if(Le)if(void 0!==n.protocol){const lt=u;if("string"!=typeof n.protocol){const yt={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[yt]:o.push(yt),u++}Le=lt===u}else Le=!0}}}else{const Je={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[Je]:o.push(Je),u++}if((Ae=ft===u)&&y)y=!1,R=[R,4];else{Ae&&(y=!0,R=4,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.protocol=!0));const Je=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let yt;if(void 0===n.interface&&(yt="interface")||void 0===n.method&&(yt="method")){const kt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:yt},message:"must have required property '"+yt+"'"};null===o?o=[kt]:o.push(kt),u++}else{if(void 0!==n.interface){const kt=u;if("Records"!==n.interface){const Nt={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[Nt]:o.push(Nt),u++}var ze=kt===u}else ze=!0;if(ze){if(void 0!==n.method){const kt=u;if("Subscribe"!==n.method){const Qe={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};null===o?o=[Qe]:o.push(Qe),u++}ze=kt===u}else ze=!0;if(ze)if(void 0!==n.protocol){const kt=u;if("string"!=typeof n.protocol){const Qe={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Qe]:o.push(Qe),u++}ze=kt===u}else ze=!0}}}else{const yt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[yt]:o.push(yt),u++}var Ae;(Ae=Je===u)&&y?(y=!1,R=[R,5]):Ae&&(y=!0,R=5,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.protocol=!0))}}}}if(!y){const $e={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:R},message:"must match exactly one schema in oneOf"};return null===o?o=[$e]:o.push($e),u++,_u.errors=o,!1}return u=S,null!==o&&(S?o.length=S:o=null),_u.errors=o,A.props=fe,0===u}function Fs(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Fs.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Fs.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let y;if(void 0===n.dateExpires&&(y="dateExpires")||void 0===n.scope&&(y="scope"))return Fs.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{const R=u;for(const ee in n)if("description"!==ee&&"dateExpires"!==ee&&"requestId"!==ee&&"delegated"!==ee&&"scope"!==ee&&"conditions"!==ee)return Fs.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ee},message:"must NOT have additional properties"}],!1;if(R===u){if(void 0!==n.description){const ee=u;if("string"!=typeof n.description)return Fs.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=ee===u}else S=!0;if(S){if(void 0!==n.dateExpires){let ee=n.dateExpires;const ae=u;if(u==u){if("string"!=typeof ee)return Fs.errors=[{instancePath:t+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(ee))return Fs.errors=[{instancePath:t+"/dateExpires",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}S=ae===u}else S=!0;if(S){if(void 0!==n.requestId){const ee=u;if("string"!=typeof n.requestId)return Fs.errors=[{instancePath:t+"/requestId",schemaPath:"#/properties/requestId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=ee===u}else S=!0;if(S){if(void 0!==n.delegated){const ee=u;if("boolean"!=typeof n.delegated)return Fs.errors=[{instancePath:t+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;S=ee===u}else S=!0;if(S){if(void 0!==n.scope){const ee=u;_u(n.scope,{instancePath:t+"/scope",parentData:n,parentDataProperty:"scope",rootData:s,dynamicAnchors:c})||(o=null===o?_u.errors:o.concat(_u.errors),u=o.length),S=ee===u}else S=!0;if(S)if(void 0!==n.conditions){let ee=n.conditions;const ae=u;if(u==u){if(!ee||"object"!=typeof ee||Array.isArray(ee))return Fs.errors=[{instancePath:t+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const we=u;for(const Pe in ee)if("publication"!==Pe)return Fs.errors=[{instancePath:t+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Pe},message:"must NOT have additional properties"}],!1;if(we===u&&void 0!==ee.publication){let Pe=ee.publication;if("string"!=typeof Pe)return Fs.errors=[{instancePath:t+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Required"!==Pe&&"Prohibited"!==Pe)return Fs.errors=[{instancePath:t+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:o6.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}}S=ae===u}else S=!0}}}}}}}}return Fs.errors=o,0===u}_u.evaluated={dynamicProps:!0,dynamicItems:!1},Fs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const zT=Ao;function xu(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=xu.evaluated;A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0);const S=u;let y=!1,R=null;const ee=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){if(void 0!==n.interface){const $e=u;if("Protocols"!==n.interface){const Ye={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Protocols"},message:"must be equal to constant"};null===o?o=[Ye]:o.push(Ye),u++}var te=$e===u}else te=!0;if(te)if(void 0!==n.method){const $e=u;if("Query"!==n.method){const ut={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};null===o?o=[ut]:o.push(ut),u++}te=$e===u}else te=!0}else{const $e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/protocols-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[$e]:o.push($e),u++}if(Ae=ee===u){y=!0,R=0;var fe={interface:!0,method:!0}}const we=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let $e;if(void 0===n.interface&&($e="interface")||void 0===n.method&&($e="method")){const Ye={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/required",keyword:"required",params:{missingProperty:$e},message:"must have required property '"+$e+"'"};null===o?o=[Ye]:o.push(Ye),u++}else{if(void 0!==n.interface){const Ye=u;if("Records"!==n.interface){const ut={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[ut]:o.push(ut),u++}var Te=Ye===u}else Te=!0;if(Te){if(void 0!==n.method){const Ye=u;if("Read"!==n.method){const ct={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/method/const",keyword:"const",params:{allowedValue:"Read"},message:"must be equal to constant"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0;if(Te){if(void 0!==n.schema){const Ye=u;if("string"!=typeof n.schema){const ct={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0;if(Te){if(void 0!==n.protocol){const Ye=u;if("string"!=typeof n.protocol){const ct={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0;if(Te){if(void 0!==n.contextId){const Ye=u;if("string"!=typeof n.contextId){const ct={instancePath:t+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0;if(Te)if(void 0!==n.protocolPath){const Ye=u;if("string"!=typeof n.protocolPath){const ct={instancePath:t+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ct]:o.push(ct),u++}Te=Ye===u}else Te=!0}}}}}}else{const $e={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-read-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[$e]:o.push($e),u++}if((Ae=we===u)&&y)y=!1,R=[R,1];else{Ae&&(y=!0,R=1,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.schema=!0,fe.protocol=!0,fe.contextId=!0,fe.protocolPath=!0));const $e=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let ct;if(void 0===n.interface&&(ct="interface")||void 0===n.method&&(ct="method")){const vt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/required",keyword:"required",params:{missingProperty:ct},message:"must have required property '"+ct+"'"};null===o?o=[vt]:o.push(vt),u++}else{if(void 0!==n.interface){const vt=u;if("Records"!==n.interface){const at={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[at]:o.push(at),u++}var Ce=vt===u}else Ce=!0;if(Ce){if(void 0!==n.method){const vt=u;if("Delete"!==n.method){const ft={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/method/const",keyword:"const",params:{allowedValue:"Delete"},message:"must be equal to constant"};null===o?o=[ft]:o.push(ft),u++}Ce=vt===u}else Ce=!0;if(Ce){if(void 0!==n.protocol){const vt=u;if("string"!=typeof n.protocol){const ft={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ft]:o.push(ft),u++}Ce=vt===u}else Ce=!0;if(Ce)if(void 0!==n.schema){const vt=u;if("string"!=typeof n.schema){const ft={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[ft]:o.push(ft),u++}Ce=vt===u}else Ce=!0}}}}else{const ct={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-delete-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[ct]:o.push(ct),u++}if((Ae=$e===u)&&y)y=!1,R=[R,2];else{Ae&&(y=!0,R=2,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.protocol=!0,fe.schema=!0));const ct=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let ft;if(void 0===n.interface&&(ft="interface")||void 0===n.method&&(ft="method")){const tt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/required",keyword:"required",params:{missingProperty:ft},message:"must have required property '"+ft+"'"};null===o?o=[tt]:o.push(tt),u++}else{if(void 0!==n.interface){const tt=u;if("Records"!==n.interface){const st={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[st]:o.push(st),u++}var je=tt===u}else je=!0;if(je){if(void 0!==n.method){const tt=u;if("Write"!==n.method){const Je={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/method/const",keyword:"const",params:{allowedValue:"Write"},message:"must be equal to constant"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0;if(je){if(void 0!==n.schema){const tt=u;if("string"!=typeof n.schema){const Je={instancePath:t+"/schema",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0;if(je){if(void 0!==n.protocol){const tt=u;if("string"!=typeof n.protocol){const Je={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0;if(je){if(void 0!==n.contextId){const tt=u;if("string"!=typeof n.contextId){const Je={instancePath:t+"/contextId",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0;if(je)if(void 0!==n.protocolPath){const tt=u;if("string"!=typeof n.protocolPath){const Je={instancePath:t+"/protocolPath",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/properties/protocolPath/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Je]:o.push(Je),u++}je=tt===u}else je=!0}}}}}}else{const ft={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-write-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[ft]:o.push(ft),u++}if((Ae=ct===u)&&y)y=!1,R=[R,3];else{Ae&&(y=!0,R=3,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.schema=!0,fe.protocol=!0,fe.contextId=!0,fe.protocolPath=!0));const ft=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let Je;if(void 0===n.interface&&(Je="interface")||void 0===n.method&&(Je="method")){const lt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/required",keyword:"required",params:{missingProperty:Je},message:"must have required property '"+Je+"'"};null===o?o=[lt]:o.push(lt),u++}else{if(void 0!==n.interface){const lt=u;if("Records"!==n.interface){const ot={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[ot]:o.push(ot),u++}var Le=lt===u}else Le=!0;if(Le){if(void 0!==n.method){const lt=u;if("Query"!==n.method){const yt={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/method/const",keyword:"const",params:{allowedValue:"Query"},message:"must be equal to constant"};null===o?o=[yt]:o.push(yt),u++}Le=lt===u}else Le=!0;if(Le)if(void 0!==n.protocol){const lt=u;if("string"!=typeof n.protocol){const yt={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[yt]:o.push(yt),u++}Le=lt===u}else Le=!0}}}else{const Je={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-query-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[Je]:o.push(Je),u++}if((Ae=ft===u)&&y)y=!1,R=[R,4];else{Ae&&(y=!0,R=4,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.protocol=!0));const Je=u;if(u==u)if(n&&"object"==typeof n&&!Array.isArray(n)){let yt;if(void 0===n.interface&&(yt="interface")||void 0===n.method&&(yt="method")){const kt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/required",keyword:"required",params:{missingProperty:yt},message:"must have required property '"+yt+"'"};null===o?o=[kt]:o.push(kt),u++}else{if(void 0!==n.interface){const kt=u;if("Records"!==n.interface){const Nt={instancePath:t+"/interface",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/interface/const",keyword:"const",params:{allowedValue:"Records"},message:"must be equal to constant"};null===o?o=[Nt]:o.push(Nt),u++}var ze=kt===u}else ze=!0;if(ze){if(void 0!==n.method){const kt=u;if("Subscribe"!==n.method){const Qe={instancePath:t+"/method",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/method/const",keyword:"const",params:{allowedValue:"Subscribe"},message:"must be equal to constant"};null===o?o=[Qe]:o.push(Qe),u++}ze=kt===u}else ze=!0;if(ze)if(void 0!==n.protocol){const kt=u;if("string"!=typeof n.protocol){const Qe={instancePath:t+"/protocol",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Qe]:o.push(Qe),u++}ze=kt===u}else ze=!0}}}else{const yt={instancePath:t,schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/scopes.json#/$defs/records-subscribe-scope/type",keyword:"type",params:{type:"object"},message:"must be object"};null===o?o=[yt]:o.push(yt),u++}var Ae;(Ae=Je===u)&&y?(y=!1,R=[R,5]):Ae&&(y=!0,R=5,!0!==fe&&((fe=fe||{}).interface=!0,fe.method=!0,fe.protocol=!0))}}}}if(!y){const $e={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:R},message:"must match exactly one schema in oneOf"};return null===o?o=[$e]:o.push($e),u++,xu.errors=o,!1}return u=S,null!==o&&(S?o.length=S:o=null),xu.errors=o,A.props=fe,0===u}function Ao(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Ao.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Ao.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let y;if(void 0===n.delegated&&(y="delegated")||void 0===n.scope&&(y="scope"))return Ao.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{const R=u;for(const ee in n)if("description"!==ee&&"delegated"!==ee&&"scope"!==ee&&"conditions"!==ee)return Ao.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ee},message:"must NOT have additional properties"}],!1;if(R===u){if(void 0!==n.description){const ee=u;if("string"!=typeof n.description)return Ao.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=ee===u}else S=!0;if(S){if(void 0!==n.delegated){const ee=u;if("boolean"!=typeof n.delegated)return Ao.errors=[{instancePath:t+"/delegated",schemaPath:"#/properties/delegated/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;S=ee===u}else S=!0;if(S){if(void 0!==n.scope){const ee=u;xu(n.scope,{instancePath:t+"/scope",parentData:n,parentDataProperty:"scope",rootData:s,dynamicAnchors:c})||(o=null===o?xu.errors:o.concat(xu.errors),u=o.length),S=ee===u}else S=!0;if(S)if(void 0!==n.conditions){let ee=n.conditions;const ae=u;if(u==u){if(!ee||"object"!=typeof ee||Array.isArray(ee))return Ao.errors=[{instancePath:t+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const we=u;for(const Pe in ee)if("publication"!==Pe)return Ao.errors=[{instancePath:t+"/conditions",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Pe},message:"must NOT have additional properties"}],!1;if(we===u&&void 0!==ee.publication){let Pe=ee.publication;if("string"!=typeof Pe)return Ao.errors=[{instancePath:t+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Required"!==Pe&&"Prohibited"!==Pe)return Ao.errors=[{instancePath:t+"/conditions/publication",schemaPath:"https://identity.foundation/dwn/json-schemas/permissions/defs.json#/$defs/conditions/properties/publication/enum",keyword:"enum",params:{allowedValues:o6.properties.publication.enum},message:"must be equal to one of the allowed values"}],!1}}}S=ae===u}else S=!0}}}}}}return Ao.errors=o,0===u}xu.evaluated={dynamicProps:!0,dynamicItems:!1},Ao.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const VT=Eu;function Eu(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){const A=Eu.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),!n||"object"!=typeof n||Array.isArray(n))return Eu.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const S=0;for(const y in n)if("description"!==y)return Eu.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(0===S&&void 0!==n.description&&"string"!=typeof n.description)return Eu.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}return Eu.errors=null,!0}Eu.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const HT=Ql;function Ql(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){const A=Ql.evaluated;return A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),n&&"object"==typeof n&&!Array.isArray(n)?(Ql.errors=null,!0):(Ql.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}Ql.evaluated={dynamicProps:!1,dynamicItems:!1};const WT=eh;function eh(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){const A=eh.evaluated;return A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),n&&"object"==typeof n&&!Array.isArray(n)?(eh.errors=null,!0):(eh.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}eh.evaluated={dynamicProps:!1,dynamicItems:!1};const GT=$i,a6=new RegExp(".*","u"),_f={$id:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json",$schema:"https://json-schema.org/draft/2020-12/schema",type:"object",additionalProperties:!1,properties:{$encryption:{type:"object",additionalProperties:!1,properties:{rootKeyId:{type:"string"},publicKeyJwk:{$ref:"https://identity.foundation/dwn/json-schemas/public-jwk.json"}},required:["rootKeyId","publicKeyJwk"]},$actions:{type:"array",minItems:1,items:{type:"object",oneOf:[{required:["who","can"],additionalProperties:!1,properties:{who:{type:"string",enum:["anyone","author","recipient"]},of:{type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-prune","co-update","create","delete","prune","read","update"]}}}},{required:["role","can"],properties:{role:{$comment:"Must be the protocol path of a role record type",type:"string"},can:{type:"array",minItems:1,items:{type:"string",enum:["co-delete","co-update","create","delete","query","subscribe","read","update"]}}}}]}},$role:{$comment:"When `true`, this turns a record into `role` that may be used within a context/sub-context",type:"boolean"},$size:{type:"object",additionalProperties:!1,properties:{min:{type:"number",minimum:0},max:{type:"number",minimum:0}}},$tags:{type:"object",minProperties:1,properties:{$requiredTags:{type:"array",items:{type:"string"}},$allowUndefinedTags:{type:"boolean"}},patternProperties:{"^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$":{type:"object",additionalProperties:!1,properties:{type:{enum:["string","number","integer","boolean","array"]},items:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}},contains:{type:"object",properties:{type:{enum:["string","number","integer"]}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$":{}}}},patternProperties:{"^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$":{}}}}}},patternProperties:{"^[^$].*$":{$ref:"https://identity.foundation/dwn/json-schemas/protocol-rule-set.json"}}},c6=new RegExp("^[^$].*$","u"),qT=new RegExp("^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$","u"),ZT=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength|minItems|maxItems|uniqueItems|minContains|maxContains)$","u"),d6=new RegExp("^(enum|minimum|maximum|exclusiveMinimum|exclusiveMaximum|minLength|maxLength)$","u"),Iv={validate:gn};function gn(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=gn.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return gn.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const vt=u;for(const at in n)if("$encryption"!==at&&"$actions"!==at&&"$role"!==at&&"$size"!==at&&"$tags"!==at&&!c6.test(at))return gn.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:at},message:"must NOT have additional properties"}],!1;if(vt===u){if(void 0!==n.$encryption){let at=n.$encryption;const ft=u;if(u===ft){if(!at||"object"!=typeof at||Array.isArray(at))return gn.errors=[{instancePath:t+"/$encryption",schemaPath:"#/properties/%24encryption/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let tt;if(void 0===at.rootKeyId&&(tt="rootKeyId")||void 0===at.publicKeyJwk&&(tt="publicKeyJwk"))return gn.errors=[{instancePath:t+"/$encryption",schemaPath:"#/properties/%24encryption/required",keyword:"required",params:{missingProperty:tt},message:"must have required property '"+tt+"'"}],!1;{const st=u;for(const Je in at)if("rootKeyId"!==Je&&"publicKeyJwk"!==Je)return gn.errors=[{instancePath:t+"/$encryption",schemaPath:"#/properties/%24encryption/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Je},message:"must NOT have additional properties"}],!1;if(st===u){if(void 0!==at.rootKeyId){const Je=u;if("string"!=typeof at.rootKeyId)return gn.errors=[{instancePath:t+"/$encryption/rootKeyId",schemaPath:"#/properties/%24encryption/properties/rootKeyId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=Je===u}else S=!0;if(S)if(void 0!==at.publicKeyJwk){const Je=u;$n(at.publicKeyJwk,{instancePath:t+"/$encryption/publicKeyJwk",parentData:at,parentDataProperty:"publicKeyJwk",rootData:s,dynamicAnchors:c})||(o=null===o?$n.errors:o.concat($n.errors),u=o.length),S=Je===u}else S=!0}}}}var y=ft===u}else y=!0;if(y){if(void 0!==n.$actions){let at=n.$actions;const ft=u;if(u===ft){if(!Array.isArray(at))return gn.errors=[{instancePath:t+"/$actions",schemaPath:"#/properties/%24actions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(at.length<1)return gn.errors=[{instancePath:t+"/$actions",schemaPath:"#/properties/%24actions/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{const st=at.length;for(let Je=0;Je<st;Je++){let lt=at[Je];const ot=u;if(!lt||"object"!=typeof lt||Array.isArray(lt))return gn.errors=[{instancePath:t+"/$actions/"+Je,schemaPath:"#/properties/%24actions/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;const yt=u;let kt=!1,Nt=null;const Qe=u;if(lt&&"object"==typeof lt&&!Array.isArray(lt)){let Bt;if(void 0===lt.who&&(Bt="who")||void 0===lt.can&&(Bt="can")){const ht={instancePath:t+"/$actions/"+Je,schemaPath:"#/properties/%24actions/items/oneOf/0/required",keyword:"required",params:{missingProperty:Bt},message:"must have required property '"+Bt+"'"};null===o?o=[ht]:o.push(ht),u++}else{const ht=u;for(const Ct in lt)if("who"!==Ct&&"of"!==Ct&&"can"!==Ct){const Kt={instancePath:t+"/$actions/"+Je,schemaPath:"#/properties/%24actions/items/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ct},message:"must NOT have additional properties"};null===o?o=[Kt]:o.push(Kt),u++;break}if(ht===u){if(void 0!==lt.who){let Ct=lt.who;const Kt=u;if("string"!=typeof Ct){const er={instancePath:t+"/$actions/"+Je+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[er]:o.push(er),u++}if("anyone"!==Ct&&"author"!==Ct&&"recipient"!==Ct){const er={instancePath:t+"/$actions/"+Je+"/who",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/who/enum",keyword:"enum",params:{allowedValues:_f.properties.$actions.items.oneOf[0].properties.who.enum},message:"must be equal to one of the allowed values"};null===o?o=[er]:o.push(er),u++}var ee=Kt===u}else ee=!0;if(ee){if(void 0!==lt.of){const Ct=u;if("string"!=typeof lt.of){const er={instancePath:t+"/$actions/"+Je+"/of",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/of/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[er]:o.push(er),u++}ee=Ct===u}else ee=!0;if(ee)if(void 0!==lt.can){let Ct=lt.can;const Kt=u;if(u===Kt)if(Array.isArray(Ct))if(Ct.length<1){const tr={instancePath:t+"/$actions/"+Je+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===o?o=[tr]:o.push(tr),u++}else{const tr=Ct.length;for(let Wt=0;Wt<tr;Wt++){let Jt=Ct[Wt];const Hn=u;if("string"!=typeof Jt){const jt={instancePath:t+"/$actions/"+Je+"/can/"+Wt,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[jt]:o.push(jt),u++}if("co-delete"!==Jt&&"co-prune"!==Jt&&"co-update"!==Jt&&"create"!==Jt&&"delete"!==Jt&&"prune"!==Jt&&"read"!==Jt&&"update"!==Jt){const jt={instancePath:t+"/$actions/"+Je+"/can/"+Wt,schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/items/enum",keyword:"enum",params:{allowedValues:_f.properties.$actions.items.oneOf[0].properties.can.items.enum},message:"must be equal to one of the allowed values"};null===o?o=[jt]:o.push(jt),u++}if(Hn!==u)break}}else{const tr={instancePath:t+"/$actions/"+Je+"/can",schemaPath:"#/properties/%24actions/items/oneOf/0/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[tr]:o.push(tr),u++}ee=Kt===u}else ee=!0}}}}if(Qe===u){kt=!0,Nt=0;var te=!0}const Ut=u;if(lt&&"object"==typeof lt&&!Array.isArray(lt)){let Bt;if(void 0===lt.role&&(Bt="role")||void 0===lt.can&&(Bt="can")){const ht={instancePath:t+"/$actions/"+Je,schemaPath:"#/properties/%24actions/items/oneOf/1/required",keyword:"required",params:{missingProperty:Bt},message:"must have required property '"+Bt+"'"};null===o?o=[ht]:o.push(ht),u++}else{if(void 0!==lt.role){const ht=u;if("string"!=typeof lt.role){const Ct={instancePath:t+"/$actions/"+Je+"/role",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/role/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[Ct]:o.push(Ct),u++}var fe=ht===u}else fe=!0;if(fe)if(void 0!==lt.can){let ht=lt.can;const Ct=u;if(u===Ct)if(Array.isArray(ht))if(ht.length<1){const er={instancePath:t+"/$actions/"+Je+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};null===o?o=[er]:o.push(er),u++}else{const er=ht.length;for(let tr=0;tr<er;tr++){let Wt=ht[tr];const Jt=u;if("string"!=typeof Wt){const co={instancePath:t+"/$actions/"+Je+"/can/"+tr,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/type",keyword:"type",params:{type:"string"},message:"must be string"};null===o?o=[co]:o.push(co),u++}if("co-delete"!==Wt&&"co-update"!==Wt&&"create"!==Wt&&"delete"!==Wt&&"query"!==Wt&&"subscribe"!==Wt&&"read"!==Wt&&"update"!==Wt){const co={instancePath:t+"/$actions/"+Je+"/can/"+tr,schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/items/enum",keyword:"enum",params:{allowedValues:_f.properties.$actions.items.oneOf[1].properties.can.items.enum},message:"must be equal to one of the allowed values"};null===o?o=[co]:o.push(co),u++}if(Jt!==u)break}}else{const er={instancePath:t+"/$actions/"+Je+"/can",schemaPath:"#/properties/%24actions/items/oneOf/1/properties/can/type",keyword:"type",params:{type:"array"},message:"must be array"};null===o?o=[er]:o.push(er),u++}fe=Ct===u}else fe=!0}}var Pe;if((Pe=Ut===u)&&kt?(kt=!1,Nt=[Nt,1]):Pe&&(kt=!0,Nt=1,!0!==te&&((te=te||{}).role=!0,te.can=!0)),!kt){const Bt={instancePath:t+"/$actions/"+Je,schemaPath:"#/properties/%24actions/items/oneOf",keyword:"oneOf",params:{passingSchemas:Nt},message:"must match exactly one schema in oneOf"};return null===o?o=[Bt]:o.push(Bt),u++,gn.errors=o,!1}if(u=yt,null!==o&&(yt?o.length=yt:o=null),ot!==u)break}}}y=ft===u}else y=!0;if(y){if(void 0!==n.$role){const at=u;if("boolean"!=typeof n.$role)return gn.errors=[{instancePath:t+"/$role",schemaPath:"#/properties/%24role/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;y=at===u}else y=!0;if(y){if(void 0!==n.$size){let at=n.$size;const ft=u;if(u===ft){if(!at||"object"!=typeof at||Array.isArray(at))return gn.errors=[{instancePath:t+"/$size",schemaPath:"#/properties/%24size/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const st=u;for(const Je in at)if("min"!==Je&&"max"!==Je)return gn.errors=[{instancePath:t+"/$size",schemaPath:"#/properties/%24size/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Je},message:"must NOT have additional properties"}],!1;if(st===u){if(void 0!==at.min){let Je=at.min;const lt=u;if(u===lt){if("number"!=typeof Je||!isFinite(Je))return gn.errors=[{instancePath:t+"/$size/min",schemaPath:"#/properties/%24size/properties/min/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;if(Je<0||isNaN(Je))return gn.errors=[{instancePath:t+"/$size/min",schemaPath:"#/properties/%24size/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}var Te=lt===u}else Te=!0;if(Te)if(void 0!==at.max){let Je=at.max;const lt=u;if(u===lt){if("number"!=typeof Je||!isFinite(Je))return gn.errors=[{instancePath:t+"/$size/max",schemaPath:"#/properties/%24size/properties/max/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;if(Je<0||isNaN(Je))return gn.errors=[{instancePath:t+"/$size/max",schemaPath:"#/properties/%24size/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}Te=lt===u}else Te=!0}}}y=ft===u}else y=!0;if(y){if(void 0!==n.$tags){let at=n.$tags;const ft=u;if(u===ft){if(!at||"object"!=typeof at||Array.isArray(at))return gn.errors=[{instancePath:t+"/$tags",schemaPath:"#/properties/%24tags/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(at).length<1)return gn.errors=[{instancePath:t+"/$tags",schemaPath:"#/properties/%24tags/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;if(void 0!==at.$requiredTags){let st=at.$requiredTags;const Je=u;if(u===Je){if(!Array.isArray(st))return gn.errors=[{instancePath:t+"/$tags/$requiredTags",schemaPath:"#/properties/%24tags/properties/%24requiredTags/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;{const lt=st.length;for(let ot=0;ot<lt;ot++){const yt=u;if("string"!=typeof st[ot])return gn.errors=[{instancePath:t+"/$tags/$requiredTags/"+ot,schemaPath:"#/properties/%24tags/properties/%24requiredTags/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(yt!==u)break}}}var Ce=Je===u}else Ce=!0;if(Ce){if(void 0!==at.$allowUndefinedTags){const st=u;if("boolean"!=typeof at.$allowUndefinedTags)return gn.errors=[{instancePath:t+"/$tags/$allowUndefinedTags",schemaPath:"#/properties/%24tags/properties/%24allowUndefinedTags/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Ce=st===u}else Ce=!0;if(Ce){var je={$requiredTags:!0,$allowUndefinedTags:!0};for(const st in at)if(qT.test(st)){let Je=at[st];if(u==u){if(!Je||"object"!=typeof Je||Array.isArray(Je))return gn.errors=[{instancePath:t+"/$tags/"+st.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const ot=u;for(const yt in Je)if("type"!==yt&&"items"!==yt&&"contains"!==yt&&!ZT.test(yt))return gn.errors=[{instancePath:t+"/$tags/"+st.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:yt},message:"must NOT have additional properties"}],!1;if(ot===u){if(void 0!==Je.type){let yt=Je.type;const kt=u;if("string"!==yt&&"number"!==yt&&"integer"!==yt&&"boolean"!==yt&&"array"!==yt)return gn.errors=[{instancePath:t+"/$tags/"+st.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/type/enum",keyword:"enum",params:{allowedValues:_f.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var Le=kt===u}else Le=!0;if(Le){if(void 0!==Je.items){let yt=Je.items;const kt=u;if(u===kt){if(!yt||"object"!=typeof yt||Array.isArray(yt))return gn.errors=[{instancePath:t+"/$tags/"+st.replace(/~/g,"~0").replace(/\//g,"~1")+"/items",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0!==yt.type){let Qe=yt.type;const Ut=u;if("string"!==Qe&&"number"!==Qe&&"integer"!==Qe)return gn.errors=[{instancePath:t+"/$tags/"+st.replace(/~/g,"~0").replace(/\//g,"~1")+"/items/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/items/properties/type/enum",keyword:"enum",params:{allowedValues:_f.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.items.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var ze=Ut===u}else ze=!0;if(ze){var $e={type:!0};for(const Qe in yt)d6.test(Qe)&&($e[Qe]=!0)}}Le=kt===u}else Le=!0;if(Le)if(void 0!==Je.contains){let yt=Je.contains;const kt=u;if(u===kt){if(!yt||"object"!=typeof yt||Array.isArray(yt))return gn.errors=[{instancePath:t+"/$tags/"+st.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(void 0!==yt.type){let Qe=yt.type;const Ut=u;if("string"!==Qe&&"number"!==Qe&&"integer"!==Qe)return gn.errors=[{instancePath:t+"/$tags/"+st.replace(/~/g,"~0").replace(/\//g,"~1")+"/contains/type",schemaPath:"#/properties/%24tags/patternProperties/%5E(%3F!%5C%24requiredTags%24%7C%5C%24allowUndefinedTags%24).*%24/properties/contains/properties/type/enum",keyword:"enum",params:{allowedValues:_f.properties.$tags.patternProperties["^(?!\\$requiredTags$|\\$allowUndefinedTags$).*$"].properties.contains.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var Ye=Ut===u}else Ye=!0;if(Ye){var ut={type:!0};for(const Qe in yt)d6.test(Qe)&&(ut[Qe]=!0)}}Le=kt===u}else Le=!0}}}}je[st]=!0}}}}y=ft===u}else y=!0;if(y)for(const at in n)if(c6.test(at)){const ft=u;if(Iv.validate(n[at],{instancePath:t+"/"+at.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:n,parentDataProperty:at,rootData:s,dynamicAnchors:c})||(o=null===o?Iv.validate.errors:o.concat(Iv.validate.errors),u=o.length),ft!==u)break}}}}}}}}return gn.errors=o,0===u}function $i(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=$i.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return $i.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let te;if(void 0===n.protocol&&(te="protocol")||void 0===n.published&&(te="published")||void 0===n.types&&(te="types")||void 0===n.structure&&(te="structure"))return $i.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:te},message:"must have required property '"+te+"'"}],!1;{const fe=u;for(const we in n)if("protocol"!==we&&"published"!==we&&"types"!==we&&"structure"!==we)return $i.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:we},message:"must NOT have additional properties"}],!1;if(fe===u){if(void 0!==n.protocol){const we=u;if("string"!=typeof n.protocol)return $i.errors=[{instancePath:t+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=we===u}else S=!0;if(S){if(void 0!==n.published){const we=u;if("boolean"!=typeof n.published)return $i.errors=[{instancePath:t+"/published",schemaPath:"#/properties/published/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;S=we===u}else S=!0;if(S){if(void 0!==n.types){let we=n.types;const Pe=u;if(u===Pe){if(!we||"object"!=typeof we||Array.isArray(we))return $i.errors=[{instancePath:t+"/types",schemaPath:"#/properties/types/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y={};for(const Ae in we)if(a6.test(Ae)){let Ce=we[Ae];if(u==u){if(!Ce||"object"!=typeof Ce||Array.isArray(Ce))return $i.errors=[{instancePath:t+"/types/"+Ae.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{const Le=u;for(const ze in Ce)if("schema"!==ze&&"dataFormats"!==ze)return $i.errors=[{instancePath:t+"/types/"+Ae.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/types/patternProperties/.*/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ze},message:"must NOT have additional properties"}],!1;if(Le===u){if(void 0!==Ce.schema){const ze=u;if("string"!=typeof Ce.schema)return $i.errors=[{instancePath:t+"/types/"+Ae.replace(/~/g,"~0").replace(/\//g,"~1")+"/schema",schemaPath:"#/properties/types/patternProperties/.*/properties/schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var R=ze===u}else R=!0;if(R)if(void 0!==Ce.dataFormats){let ze=Ce.dataFormats;const $e=u;if(u===$e){if(!Array.isArray(ze))return $i.errors=[{instancePath:t+"/types/"+Ae.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;if(ze.length<1)return $i.errors=[{instancePath:t+"/types/"+Ae.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats",schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{const ut=ze.length;for(let ct=0;ct<ut;ct++){const vt=u;if("string"!=typeof ze[ct])return $i.errors=[{instancePath:t+"/types/"+Ae.replace(/~/g,"~0").replace(/\//g,"~1")+"/dataFormats/"+ct,schemaPath:"#/properties/types/patternProperties/.*/properties/dataFormats/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(vt!==u)break}}}R=$e===u}else R=!0}}}y[Ae]=!0}}S=Pe===u}else S=!0;if(S)if(void 0!==n.structure){let we=n.structure;const Pe=u;if(u===Pe){if(!we||"object"!=typeof we||Array.isArray(we))return $i.errors=[{instancePath:t+"/structure",schemaPath:"#/properties/structure/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ae={};for(const Ae in we)a6.test(Ae)&&(gn(we[Ae],{instancePath:t+"/structure/"+Ae.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:we,parentDataProperty:Ae,rootData:s,dynamicAnchors:c})||(o=null===o?gn.errors:o.concat(gn.errors),u=o.length),ae[Ae]=!0)}S=Pe===u}else S=!0}}}}}}return $i.errors=o,0===u}gn.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1},$i.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const JT=gn,YT=Ks,u6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-configure.json",type:"object",additionalProperties:!1,required:["authorization","descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","definition"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Configure"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},definition:{$ref:"https://identity.foundation/dwn/json-schemas/protocol-definition.json"}}}}};function Ks(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Ks.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Ks.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let R;if(void 0===n.authorization&&(R="authorization")||void 0===n.descriptor&&(R="descriptor"))return Ks.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:R},message:"must have required property '"+R+"'"}],!1;{const ee=u;for(const ae in n)if("authorization"!==ae&&"descriptor"!==ae)return Ks.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ae},message:"must NOT have additional properties"}],!1;if(ee===u){if(void 0!==n.authorization){const ae=u;di(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?di.errors:o.concat(di.errors),u=o.length);var S=ae===u}else S=!0;if(S)if(void 0!==n.descriptor){let ae=n.descriptor;const te=u;if(u===te){if(!ae||"object"!=typeof ae||Array.isArray(ae))return Ks.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let we;if(void 0===ae.interface&&(we="interface")||void 0===ae.method&&(we="method")||void 0===ae.messageTimestamp&&(we="messageTimestamp")||void 0===ae.definition&&(we="definition"))return Ks.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:we},message:"must have required property '"+we+"'"}],!1;{const Pe=u;for(const Te in ae)if("interface"!==Te&&"method"!==Te&&"messageTimestamp"!==Te&&"definition"!==Te)return Ks.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Te},message:"must NOT have additional properties"}],!1;if(Pe===u){if(void 0!==ae.interface){let Te=ae.interface;const Ae=u;if("string"!=typeof Te)return Ks.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Protocols"!==Te)return Ks.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:u6.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=Ae===u}else y=!0;if(y){if(void 0!==ae.method){let Te=ae.method;const Ae=u;if("string"!=typeof Te)return Ks.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Configure"!==Te)return Ks.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:u6.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=Ae===u}else y=!0;if(y){if(void 0!==ae.messageTimestamp){let Te=ae.messageTimestamp;const Ae=u;if(u==u){if("string"!=typeof Te)return Ks.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(Te))return Ks.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}y=Ae===u}else y=!0;if(y)if(void 0!==ae.definition){const Te=u;$i(ae.definition,{instancePath:t+"/descriptor/definition",parentData:ae,parentDataProperty:"definition",rootData:s,dynamicAnchors:c})||(o=null===o?$i.errors:o.concat($i.errors),u=o.length),y=Te===u}else y=!0}}}}}}S=te===u}else S=!0}}}}return Ks.errors=o,0===u}Ks.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const XT=xi,f6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/protocols-query.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp"],properties:{interface:{enum:["Protocols"],type:"string"},method:{enum:["Query"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{type:"object",minProperties:1,additionalProperties:!1,properties:{protocol:{type:"string"},recipient:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did"}}}}}}};function xi(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=xi.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return xi.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let ee;if(void 0===n.descriptor&&(ee="descriptor"))return xi.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:ee},message:"must have required property '"+ee+"'"}],!1;{const ae=u;for(const te in n)if("authorization"!==te&&"descriptor"!==te)return xi.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:te},message:"must NOT have additional properties"}],!1;if(ae===u){if(void 0!==n.authorization){const te=u;di(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?di.errors:o.concat(di.errors),u=o.length);var S=te===u}else S=!0;if(S)if(void 0!==n.descriptor){let te=n.descriptor;const fe=u;if(u===fe){if(!te||"object"!=typeof te||Array.isArray(te))return xi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let Pe;if(void 0===te.interface&&(Pe="interface")||void 0===te.method&&(Pe="method")||void 0===te.messageTimestamp&&(Pe="messageTimestamp"))return xi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:Pe},message:"must have required property '"+Pe+"'"}],!1;{const Te=u;for(const Ae in te)if("interface"!==Ae&&"method"!==Ae&&"messageTimestamp"!==Ae&&"filter"!==Ae)return xi.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ae},message:"must NOT have additional properties"}],!1;if(Te===u){if(void 0!==te.interface){let Ae=te.interface;const Ce=u;if("string"!=typeof Ae)return xi.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Protocols"!==Ae)return xi.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:f6.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=Ce===u}else y=!0;if(y){if(void 0!==te.method){let Ae=te.method;const Ce=u;if("string"!=typeof Ae)return xi.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Query"!==Ae)return xi.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:f6.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=Ce===u}else y=!0;if(y){if(void 0!==te.messageTimestamp){let Ae=te.messageTimestamp;const Ce=u;if(u==u){if("string"!=typeof Ae)return xi.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(Ae))return xi.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}y=Ce===u}else y=!0;if(y)if(void 0!==te.filter){let Ae=te.filter;const Ce=u;if(u===Ce){if(!Ae||"object"!=typeof Ae||Array.isArray(Ae))return xi.errors=[{instancePath:t+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(Ae).length<1)return xi.errors=[{instancePath:t+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const Le=u;for(const ze in Ae)if("protocol"!==ze&&"recipient"!==ze)return xi.errors=[{instancePath:t+"/descriptor/filter",schemaPath:"#/properties/descriptor/properties/filter/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ze},message:"must NOT have additional properties"}],!1;if(Le===u){if(void 0!==Ae.protocol){const ze=u;if("string"!=typeof Ae.protocol)return xi.errors=[{instancePath:t+"/descriptor/filter/protocol",schemaPath:"#/properties/descriptor/properties/filter/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var R=ze===u}else R=!0;if(R)if(void 0!==Ae.recipient){let ze=Ae.recipient;const $e=u;if(u==u){if("string"!=typeof ze)return xi.errors=[{instancePath:t+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!wu.test(ze))return xi.errors=[{instancePath:t+"/descriptor/filter/recipient",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}R=$e===u}else R=!0}}}y=Ce===u}else y=!0}}}}}}S=fe===u}else S=!0}}}}return xi.errors=o,0===u}xi.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const QT=zs,l6={$schema:"https://json-schema.org/draft/2020-12/schema",$id:"https://identity.foundation/dwn/json-schemas/records-read.json",type:"object",additionalProperties:!1,required:["descriptor"],properties:{authorization:{$ref:"https://identity.foundation/dwn/json-schemas/authorization-delegated-grant.json"},descriptor:{type:"object",additionalProperties:!1,required:["interface","method","messageTimestamp","filter"],properties:{interface:{enum:["Records"],type:"string"},method:{enum:["Read"],type:"string"},messageTimestamp:{$ref:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time"},filter:{$ref:"https://identity.foundation/dwn/json-schemas/records-filter.json"}}}}};function zs(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=zs.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return zs.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let R;if(void 0===n.descriptor&&(R="descriptor"))return zs.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:R},message:"must have required property '"+R+"'"}],!1;{const ee=u;for(const ae in n)if("authorization"!==ae&&"descriptor"!==ae)return zs.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ae},message:"must NOT have additional properties"}],!1;if(ee===u){if(void 0!==n.authorization){const ae=u;Qi(n.authorization,{instancePath:t+"/authorization",parentData:n,parentDataProperty:"authorization",rootData:s,dynamicAnchors:c})||(o=null===o?Qi.errors:o.concat(Qi.errors),u=o.length);var S=ae===u}else S=!0;if(S)if(void 0!==n.descriptor){let ae=n.descriptor;const te=u;if(u===te){if(!ae||"object"!=typeof ae||Array.isArray(ae))return zs.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let we;if(void 0===ae.interface&&(we="interface")||void 0===ae.method&&(we="method")||void 0===ae.messageTimestamp&&(we="messageTimestamp")||void 0===ae.filter&&(we="filter"))return zs.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/required",keyword:"required",params:{missingProperty:we},message:"must have required property '"+we+"'"}],!1;{const Pe=u;for(const Te in ae)if("interface"!==Te&&"method"!==Te&&"messageTimestamp"!==Te&&"filter"!==Te)return zs.errors=[{instancePath:t+"/descriptor",schemaPath:"#/properties/descriptor/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Te},message:"must NOT have additional properties"}],!1;if(Pe===u){if(void 0!==ae.interface){let Te=ae.interface;const Ae=u;if("string"!=typeof Te)return zs.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Records"!==Te)return zs.errors=[{instancePath:t+"/descriptor/interface",schemaPath:"#/properties/descriptor/properties/interface/enum",keyword:"enum",params:{allowedValues:l6.properties.descriptor.properties.interface.enum},message:"must be equal to one of the allowed values"}],!1;var y=Ae===u}else y=!0;if(y){if(void 0!==ae.method){let Te=ae.method;const Ae=u;if("string"!=typeof Te)return zs.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if("Read"!==Te)return zs.errors=[{instancePath:t+"/descriptor/method",schemaPath:"#/properties/descriptor/properties/method/enum",keyword:"enum",params:{allowedValues:l6.properties.descriptor.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;y=Ae===u}else y=!0;if(y){if(void 0!==ae.messageTimestamp){let Te=ae.messageTimestamp;const Ae=u;if(u==u){if("string"!=typeof Te)return zs.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!ui.test(Te))return zs.errors=[{instancePath:t+"/descriptor/messageTimestamp",schemaPath:"https://identity.foundation/dwn/json-schemas/defs.json#/$defs/date-time/pattern",keyword:"pattern",params:{pattern:"^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"},message:'must match pattern "^\\d{4}-[0-1]\\d-[0-3]\\dT(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)\\.\\d{6}Z$"'}],!1}y=Ae===u}else y=!0;if(y)if(void 0!==ae.filter){const Te=u;ur(ae.filter,{instancePath:t+"/descriptor/filter",parentData:ae,parentDataProperty:"filter",rootData:s,dynamicAnchors:c})||(o=null===o?ur.errors:o.concat(ur.errors),u=o.length),y=Te===u}else y=!0}}}}}}S=te===u}else S=!0}}}}return zs.errors=o,0===u}zs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const eI=ur,tI=$n,rI=_a;function _a(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){const A=_a.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),!n||"object"!=typeof n||Array.isArray(n))return _a.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let y;if(void 0===n.descriptorCid&&(y="descriptorCid"))return _a.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{const R=0;for(const ee in n)if("descriptorCid"!==ee&&"delegatedGrantId"!==ee&&"permissionGrantId"!==ee&&"protocolRole"!==ee)return _a.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ee},message:"must NOT have additional properties"}],!1;if(0===R){if(void 0!==n.descriptorCid){const ee=0;if("string"!=typeof n.descriptorCid)return _a.errors=[{instancePath:t+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=0===ee}else S=!0;if(S){if(void 0!==n.delegatedGrantId){const ee=0;if("string"!=typeof n.delegatedGrantId)return _a.errors=[{instancePath:t+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0;if(S){if(void 0!==n.permissionGrantId){const ee=0;if("string"!=typeof n.permissionGrantId)return _a.errors=[{instancePath:t+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0;if(S)if(void 0!==n.protocolRole){const ee=0;if("string"!=typeof n.protocolRole)return _a.errors=[{instancePath:t+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0}}}}}return _a.errors=null,!0}_a.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const nI=Xs;function Xs(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){const A=Xs.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),!n||"object"!=typeof n||Array.isArray(n))return Xs.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;{let y;if(void 0===n.descriptorCid&&(y="descriptorCid")||void 0===n.recordId&&(y="recordId"))return Xs.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"}],!1;{const R=0;for(const ee in n)if("descriptorCid"!==ee&&"recordId"!==ee&&"contextId"!==ee&&"attestationCid"!==ee&&"encryptionCid"!==ee&&"delegatedGrantId"!==ee&&"permissionGrantId"!==ee&&"protocolRole"!==ee)return Xs.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ee},message:"must NOT have additional properties"}],!1;if(0===R){if(void 0!==n.descriptorCid){const ee=0;if("string"!=typeof n.descriptorCid)return Xs.errors=[{instancePath:t+"/descriptorCid",schemaPath:"#/properties/descriptorCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=0===ee}else S=!0;if(S){if(void 0!==n.recordId){const ee=0;if("string"!=typeof n.recordId)return Xs.errors=[{instancePath:t+"/recordId",schemaPath:"#/properties/recordId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0;if(S){if(void 0!==n.contextId){const ee=0;if("string"!=typeof n.contextId)return Xs.errors=[{instancePath:t+"/contextId",schemaPath:"#/properties/contextId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0;if(S){if(void 0!==n.attestationCid){const ee=0;if("string"!=typeof n.attestationCid)return Xs.errors=[{instancePath:t+"/attestationCid",schemaPath:"#/properties/attestationCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0;if(S){if(void 0!==n.encryptionCid){const ee=0;if("string"!=typeof n.encryptionCid)return Xs.errors=[{instancePath:t+"/encryptionCid",schemaPath:"#/properties/encryptionCid/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0;if(S){if(void 0!==n.delegatedGrantId){const ee=0;if("string"!=typeof n.delegatedGrantId)return Xs.errors=[{instancePath:t+"/delegatedGrantId",schemaPath:"#/properties/delegatedGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0;if(S){if(void 0!==n.permissionGrantId){const ee=0;if("string"!=typeof n.permissionGrantId)return Xs.errors=[{instancePath:t+"/permissionGrantId",schemaPath:"#/properties/permissionGrantId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0;if(S)if(void 0!==n.protocolRole){const ee=0;if("string"!=typeof n.protocolRole)return Xs.errors=[{instancePath:t+"/protocolRole",schemaPath:"#/properties/protocolRole/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;S=0===ee}else S=!0}}}}}}}}}return Xs.errors=null,!0}Xs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const iI=Qs;function Qs(n,{instancePath:t="",rootData:s=n,dynamicAnchors:c={}}={}){let o=null,u=0;const A=Qs.evaluated;if(A.dynamicProps&&(A.props=void 0),A.dynamicItems&&(A.items=void 0),0===u){if(!n||"object"!=typeof n||Array.isArray(n))return Qs.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;if(Object.keys(n).length<1)return Qs.errors=[{instancePath:t,schemaPath:"#/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties"}],!1;{const fe=u;for(const we in n)if("gt"!==we&&"gte"!==we&&"lt"!==we&&"lte"!==we)return Qs.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:we},message:"must NOT have additional properties"}],!1;if(fe===u){if(void 0!==n.gt){const we=u,Pe=u,Te=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ae;if(void 0===n.gte&&(Ae="gte")){const Ce={};null===o?o=[Ce]:o.push(Ce),u++}}if(Te===u)return Qs.errors=[{instancePath:t,schemaPath:"#/dependencies/gt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Pe,null!==o&&(Pe?o.length=Pe:o=null);var y=we===u}else y=!0;if(y){if(void 0!==n.gte){const we=u,Pe=u,Te=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ce;if(void 0===n.gt&&(Ce="gt")){const je={};null===o?o=[je]:o.push(je),u++}}if(Te===u)return Qs.errors=[{instancePath:t,schemaPath:"#/dependencies/gte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Pe,null!==o&&(Pe?o.length=Pe:o=null),y=we===u}else y=!0;if(y){if(void 0!==n.lt){const we=u,Pe=u,Te=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ce;if(void 0===n.lte&&(Ce="lte")){const je={};null===o?o=[je]:o.push(je),u++}}if(Te===u)return Qs.errors=[{instancePath:t,schemaPath:"#/dependencies/lt/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Pe,null!==o&&(Pe?o.length=Pe:o=null),y=we===u}else y=!0;if(y){if(void 0!==n.lte){const we=u,Pe=u,Te=u;if(n&&"object"==typeof n&&!Array.isArray(n)){let Ce;if(void 0===n.lt&&(Ce="lt")){const je={};null===o?o=[je]:o.push(je),u++}}if(Te===u)return Qs.errors=[{instancePath:t,schemaPath:"#/dependencies/lte/not",keyword:"not",params:{},message:"must NOT be valid"}],!1;u=Pe,null!==o&&(Pe?o.length=Pe:o=null),y=we===u}else y=!0;if(y){if(void 0!==n.gt){const we=u;if("string"!=typeof n.gt)return Qs.errors=[{instancePath:t+"/gt",schemaPath:"#/properties/gt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var te=we===u}else te=!0;if(te){if(void 0!==n.gte){const we=u;if("string"!=typeof n.gte)return Qs.errors=[{instancePath:t+"/gte",schemaPath:"#/properties/gte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;te=we===u}else te=!0;if(te){if(void 0!==n.lt){const we=u;if("string"!=typeof n.lt)return Qs.errors=[{instancePath:t+"/lt",schemaPath:"#/properties/lt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;te=we===u}else te=!0;if(te)if(void 0!==n.lte){const we=u;if("string"!=typeof n.lte)return Qs.errors=[{instancePath:t+"/lte",schemaPath:"#/properties/lte/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;te=we===u}else te=!0}}}}}}}}}return Qs.errors=o,0===u}function xf(n,t){const r=q[n];if(!r)throw new Ot(Rt.SchemaValidatorSchemaNotFound,`schema for ${n} not found.`);if(r(t),!r.errors)return;const[i]=r.errors;let{instancePath:s,message:c,keyword:o}=i;if(s||(s=n),"additionalProperties"===o)throw new Ot(Rt.SchemaValidatorAdditionalPropertyNotAllowed,`${c}: ${s}: ${i.params.additionalProperty}`);if("unevaluatedProperties"===o)throw new Ot(Rt.SchemaValidatorUnevaluatedPropertyNotAllowed,`${c}: ${s}: ${i.params.unevaluatedProperty}`);throw new Ot(Rt.SchemaValidatorFailure,`${s}: ${c}`)}Qs.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};var Pv=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class xa{constructor(t){this.cache=t||new vT(600)}static get singleton(){return void 0===xa._singleton&&(xa._singleton=new xa),xa._singleton}static verifySignatures(t,r){return Pv(this,void 0,void 0,function*(){return yield xa.singleton.verifySignatures(t,r)})}verifySignatures(t,r){return Pv(this,void 0,void 0,function*(){const i=[];for(const s of t.signatures){let c;const o=ci.getKid(s),u=`${s.protected}.${t.payload}.${s.signature}`,A=yield this.cache.get(u);if(void 0===A){const y=yield xa.getPublicKey(o,r);c=yield ci.verifySignature(t.payload,s,y),yield this.cache.set(u,c)}else c=A;const S=ci.extractDid(o);if(!c)throw new Ot(Rt.GeneralJwsVerifierInvalidSignature,`Signature verification failed for ${S}`);i.push(S)}return{signers:i}})}static getPublicKey(t,r){return Pv(this,void 0,void 0,function*(){const i=ci.extractDid(t),{didDocument:s}=yield r.resolve(i),{verificationMethod:c=[]}=s||{};let o;for(const A of c)if(t.endsWith(A.id)){o=A;break}if(!o)throw new Ot(Rt.GeneralJwsVerifierGetPublicKeyNotFound,"public key needed to verify signature not found in DID Document");xf("JwkVerificationMethod",o);const{publicKeyJwk:u}=o;return u})}}const sI=["string","number","bigint","symbol"],oI=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];class $t{constructor(t,r,i){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}$t.uint=new $t(0,"uint",!0),$t.negint=new $t(1,"negint",!0),$t.bytes=new $t(2,"bytes",!0),$t.string=new $t(3,"string",!0),$t.array=new $t(4,"array",!1),$t.map=new $t(5,"map",!1),$t.tag=new $t(6,"tag",!1),$t.float=new $t(7,"float",!0),$t.false=new $t(7,"false",!0),$t.true=new $t(7,"true",!0),$t.null=new $t(7,"null",!0),$t.undefined=new $t(7,"undefined",!0),$t.break=new $t(7,"break",!0);class Sr{constructor(t,r,i){this.type=t,this.value=r,this.encodedLength=i,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ef=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,uI=new TextDecoder,fI=new TextEncoder;function $p(n){return Ef&&globalThis.Buffer.isBuffer(n)}function h6(n){return n instanceof Uint8Array?$p(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n:Uint8Array.from(n)}const lI=Ef?(n,t,r)=>r-t>64?globalThis.Buffer.from(n.subarray(t,r)).toString("utf8"):y6(n,t,r):(n,t,r)=>r-t>64?uI.decode(n.subarray(t,r)):y6(n,t,r),hI=Ef?n=>n.length>64?globalThis.Buffer.from(n):p6(n):n=>n.length>64?fI.encode(n):p6(n),Bc=n=>Uint8Array.from(n),Bv=Ef?(n,t,r)=>$p(n)?new Uint8Array(n.subarray(t,r)):n.slice(t,r):(n,t,r)=>n.slice(t,r),pI=Ef?(n,t)=>(n=n.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),h6(globalThis.Buffer.concat(n,t))):(n,t)=>{const r=new Uint8Array(t);let i=0;for(let s of n)i+s.length>r.length&&(s=s.subarray(0,r.length-i)),r.set(s,i),i+=s.length;return r},yI=Ef?n=>globalThis.Buffer.allocUnsafe(n):n=>new Uint8Array(n);function p6(n,t=1/0){let r;const i=n.length;let s=null;const c=[];for(let o=0;o<i;++o){if(r=n.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&c.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&c.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&c.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(t-=3)>-1&&c.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;c.push(r)}else if(r<2048){if((t-=2)<0)break;c.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;c.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;c.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return c}function y6(n,t,r){const i=[];for(;t<r;){const s=n[t];let c=null,o=s>239?4:s>223?3:s>191?2:1;if(t+o<=r){let u,A,S,y;switch(o){case 1:s<128&&(c=s);break;case 2:u=n[t+1],128==(192&u)&&(y=(31&s)<<6|63&u,y>127&&(c=y));break;case 3:u=n[t+1],A=n[t+2],128==(192&u)&&128==(192&A)&&(y=(15&s)<<12|(63&u)<<6|63&A,y>2047&&(y<55296||y>57343)&&(c=y));break;case 4:u=n[t+1],A=n[t+2],S=n[t+3],128==(192&u)&&128==(192&A)&&128==(192&S)&&(y=(15&s)<<18|(63&u)<<12|(63&A)<<6|63&S,y>65535&&y<1114112&&(c=y))}}null===c?(c=65533,o=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),t+=o}return function gI(n){const t=n.length;if(t<=m6)return String.fromCharCode.apply(String,n);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,n.slice(i,i+=m6));return r}(i)}const m6=4096;class g6{constructor(t=256){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1)r.set(t,r.length-(this.maxCursor-this.cursor)-1);else{if(r){const s=r.length-(this.maxCursor-this.cursor)-1;s<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,s),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=yI(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,null===this._initReuseChunk&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(1===this.chunks.length){const i=this.chunks[0];t&&this.cursor>i.length/2?(r=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Bv(i,0,this.cursor)}else r=pI(this.chunks,this.cursor);return t&&this.reset(),r}}const _n="CBOR decode error:",v6="CBOR encode error:",th=[];function Sf(n,t,r){if(n.length-t<r)throw new Error(`${_n} not enough data for type`)}th[23]=1,th[24]=2,th[25]=3,th[26]=5,th[27]=9;const ys=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Su(n,t,r){Sf(n,t,1);const i=n[t];if(!0===r.strict&&i<ys[0])throw new Error(`${_n} integer encoded in more bytes than necessary (strict decode)`);return i}function Au(n,t,r){Sf(n,t,2);const i=n[t]<<8|n[t+1];if(!0===r.strict&&i<ys[1])throw new Error(`${_n} integer encoded in more bytes than necessary (strict decode)`);return i}function Mu(n,t,r){Sf(n,t,4);const i=16777216*n[t]+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3];if(!0===r.strict&&i<ys[2])throw new Error(`${_n} integer encoded in more bytes than necessary (strict decode)`);return i}function Tu(n,t,r){Sf(n,t,8);const s=16777216*n[t+4]+(n[t+5]<<16)+(n[t+6]<<8)+n[t+7],c=(BigInt(16777216*n[t]+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3])<<BigInt(32))+BigInt(s);if(!0===r.strict&&c<ys[3])throw new Error(`${_n} integer encoded in more bytes than necessary (strict decode)`);if(c<=Number.MAX_SAFE_INTEGER)return Number(c);if(!0===r.allowBigInt)return c;throw new Error(`${_n} integers outside of the safe integer range are not supported`)}function Iu(n,t){return qo(n,0,t.value)}function qo(n,t,r){if(r<ys[0]){const i=Number(r);n.push([t|i])}else if(r<ys[1]){const i=Number(r);n.push([24|t,i])}else if(r<ys[2]){const i=Number(r);n.push([25|t,i>>>8,255&i])}else if(r<ys[3]){const i=Number(r);n.push([26|t,i>>>24&255,i>>>16&255,i>>>8&255,255&i])}else{const i=BigInt(r);if(!(i<ys[4]))throw new Error(`${_n} encountered BigInt larger than allowable range`);{const s=[27|t,0,0,0,0,0,0,0];let c=Number(i&BigInt(4294967295)),o=Number(i>>BigInt(32)&BigInt(4294967295));s[8]=255&c,c>>=8,s[7]=255&c,c>>=8,s[6]=255&c,c>>=8,s[5]=255&c,s[4]=255&o,o>>=8,s[3]=255&o,o>>=8,s[2]=255&o,o>>=8,s[1]=255&o,n.push(s)}}}Iu.encodedSize=function(t){return qo.encodedSize(t.value)},qo.encodedSize=function(t){return t<ys[0]?1:t<ys[1]?2:t<ys[2]?3:t<ys[3]?5:9},Iu.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};const Rv=BigInt(-1),w6=BigInt(1);function kv(n,t){const r=t.value;qo(n,t.type.majorEncoded,"bigint"==typeof r?r*Rv-w6:-1*r-1)}function rh(n,t,r,i){Sf(n,t,r+i);const s=Bv(n,t+r,t+r+i);return new Sr($t.bytes,s,r+i)}function TI(n,t,r,i){return rh(n,t,1,r)}function jp(n){return void 0===n.encodedBytes&&(n.encodedBytes=n.type===$t.string?hI(n.value):n.value),n.encodedBytes}function Up(n,t){const r=jp(t);qo(n,t.type.majorEncoded,r.length),n.push(r)}function nh(n,t,r,i,s){const c=r+i;Sf(n,t,c);const o=new Sr($t.string,lI(n,t+r,t+c),c);return!0===s.retainStringBytes&&(o.byteValue=Bv(n,t+r,t+c)),o}function OI(n,t,r,i){return nh(n,t,1,r,i)}kv.encodedSize=function(t){const r=t.value,i="bigint"==typeof r?r*Rv-w6:-1*r-1;return i<ys[0]?1:i<ys[1]?2:i<ys[2]?3:i<ys[3]?5:9},kv.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0},Up.encodedSize=function(t){const r=jp(t);return qo.encodedSize(r.length)+r.length},Up.compareTokens=function(t,r){return function kI(n,t){return n.length<t.length?-1:n.length>t.length?1:function mI(n,t){if($p(n)&&$p(t))return n.compare(t);for(let r=0;r<n.length;r++)if(n[r]!==t[r])return n[r]<t[r]?-1:1;return 0}(n,t)}(jp(t),jp(r))};const jI=Up;function Af(n,t,r,i){return new Sr($t.array,i,r)}function UI(n,t,r,i){return Af(0,0,1,r)}function Ov(n,t){qo(n,$t.array.majorEncoded,t.value)}function Mf(n,t,r,i){return new Sr($t.map,i,r)}function HI(n,t,r,i){return Mf(0,0,1,r)}function Cv(n,t){qo(n,$t.map.majorEncoded,t.value)}function YI(n,t,r,i){return new Sr($t.tag,r,1)}function Dv(n,t){qo(n,$t.tag.majorEncoded,t.value)}Ov.compareTokens=Iu.compareTokens,Ov.encodedSize=function(t){return qo.encodedSize(t.value)},Cv.compareTokens=Iu.compareTokens,Cv.encodedSize=function(t){return qo.encodedSize(t.value)},Dv.compareTokens=Iu.compareTokens,Dv.encodedSize=function(t){return qo.encodedSize(t.value)};function Nv(n,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(n))throw new Error(`${_n} NaN values are not supported`);if(!1===r.allowInfinity&&(n===1/0||n===-1/0))throw new Error(`${_n} Infinity values are not supported`)}return new Sr($t.float,n,t)}function $v(n,t,r){const i=t.value;if(!1===i)n.push([20|$t.float.majorEncoded]);else if(!0===i)n.push([21|$t.float.majorEncoded]);else if(null===i)n.push([22|$t.float.majorEncoded]);else if(void 0===i)n.push([23|$t.float.majorEncoded]);else{let s,c=!1;(!r||!0!==r.float64)&&(_6(i),s=jv(Ea,1),i===s||Number.isNaN(i)?(Ea[0]=249,n.push(Ea.slice(0,3)),c=!0):(x6(i),s=Uv(Ea,1),i===s&&(Ea[0]=250,n.push(Ea.slice(0,5)),c=!0))),c||(function f7(n){Zo.setFloat64(0,n,!1)}(i),s=E6(Ea,1),Ea[0]=251,n.push(Ea.slice(0,9)))}}$v.encodedSize=function(t,r){const i=t.value;if(!1===i||!0===i||null==i)return 1;if(!r||!0!==r.float64){_6(i);let s=jv(Ea,1);if(i===s||Number.isNaN(i))return 3;if(x6(i),s=Uv(Ea,1),i===s)return 5}return 9};const b6=new ArrayBuffer(9),Zo=new DataView(b6,1),Ea=new Uint8Array(b6,0);function _6(n){if(n===1/0)Zo.setUint16(0,31744,!1);else if(n===-1/0)Zo.setUint16(0,64512,!1);else if(Number.isNaN(n))Zo.setUint16(0,32256,!1);else{Zo.setFloat32(0,n);const t=Zo.getUint32(0),r=(2139095040&t)>>23,i=8388607&t;if(255===r)Zo.setUint16(0,31744,!1);else if(0===r)Zo.setUint16(0,(2147483648&n)>>16|i>>13,!1);else{const s=r-127;s<-24?Zo.setUint16(0,0):Zo.setUint16(0,s<-14?(2147483648&t)>>16|1<<24+s:(2147483648&t)>>16|s+15<<10|i>>13,!1)}}}function jv(n,t){if(n.length-t<2)throw new Error(`${_n} not enough data for float16`);const r=(n[t]<<8)+n[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const i=r>>10&31,s=1023&r;let c;return c=0===i?s*2**-24:31!==i?(s+1024)*2**(i-25):0===s?1/0:NaN,32768&r?-c:c}function x6(n){Zo.setFloat32(0,n,!1)}function Uv(n,t){if(n.length-t<4)throw new Error(`${_n} not enough data for float32`);return new DataView(n.buffer,(n.byteOffset||0)+t,4).getFloat32(0,!1)}function E6(n,t){if(n.length-t<8)throw new Error(`${_n} not enough data for float64`);return new DataView(n.buffer,(n.byteOffset||0)+t,8).getFloat64(0,!1)}function Tn(n,t,r){throw new Error(`${_n} encountered invalid minor (${r}) for major ${n[t]>>>5}`)}function Lp(n){return()=>{throw new Error(`${_n} ${n}`)}}$v.compareTokens=Iu.compareTokens;const Yt=[];for(let n=0;n<=23;n++)Yt[n]=Tn;Yt[24]=function wI(n,t,r,i){return new Sr($t.uint,Su(n,t+1,i),2)},Yt[25]=function bI(n,t,r,i){return new Sr($t.uint,Au(n,t+1,i),3)},Yt[26]=function _I(n,t,r,i){return new Sr($t.uint,Mu(n,t+1,i),5)},Yt[27]=function xI(n,t,r,i){return new Sr($t.uint,Tu(n,t+1,i),9)},Yt[28]=Tn,Yt[29]=Tn,Yt[30]=Tn,Yt[31]=Tn;for(let n=32;n<=55;n++)Yt[n]=Tn;Yt[56]=function EI(n,t,r,i){return new Sr($t.negint,-1-Su(n,t+1,i),2)},Yt[57]=function SI(n,t,r,i){return new Sr($t.negint,-1-Au(n,t+1,i),3)},Yt[58]=function AI(n,t,r,i){return new Sr($t.negint,-1-Mu(n,t+1,i),5)},Yt[59]=function MI(n,t,r,i){const s=Tu(n,t+1,i);if("bigint"!=typeof s){const c=-1-s;if(c>=Number.MIN_SAFE_INTEGER)return new Sr($t.negint,c,9)}if(!0!==i.allowBigInt)throw new Error(`${_n} integers outside of the safe integer range are not supported`);return new Sr($t.negint,Rv-BigInt(s),9)},Yt[60]=Tn,Yt[61]=Tn,Yt[62]=Tn,Yt[63]=Tn;for(let n=64;n<=87;n++)Yt[n]=TI;Yt[88]=function II(n,t,r,i){return rh(n,t,2,Su(n,t+1,i))},Yt[89]=function PI(n,t,r,i){return rh(n,t,3,Au(n,t+1,i))},Yt[90]=function BI(n,t,r,i){return rh(n,t,5,Mu(n,t+1,i))},Yt[91]=function RI(n,t,r,i){const s=Tu(n,t+1,i);if("bigint"==typeof s)throw new Error(`${_n} 64-bit integer bytes lengths not supported`);return rh(n,t,9,s)},Yt[92]=Tn,Yt[93]=Tn,Yt[94]=Tn,Yt[95]=Lp("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)Yt[n]=OI;Yt[120]=function CI(n,t,r,i){return nh(n,t,2,Su(n,t+1,i),i)},Yt[121]=function DI(n,t,r,i){return nh(n,t,3,Au(n,t+1,i),i)},Yt[122]=function NI(n,t,r,i){return nh(n,t,5,Mu(n,t+1,i),i)},Yt[123]=function $I(n,t,r,i){const s=Tu(n,t+1,i);if("bigint"==typeof s)throw new Error(`${_n} 64-bit integer string lengths not supported`);return nh(n,t,9,s,i)},Yt[124]=Tn,Yt[125]=Tn,Yt[126]=Tn,Yt[127]=Lp("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)Yt[n]=UI;Yt[152]=function LI(n,t,r,i){return Af(0,0,2,Su(n,t+1,i))},Yt[153]=function FI(n,t,r,i){return Af(0,0,3,Au(n,t+1,i))},Yt[154]=function KI(n,t,r,i){return Af(0,0,5,Mu(n,t+1,i))},Yt[155]=function zI(n,t,r,i){const s=Tu(n,t+1,i);if("bigint"==typeof s)throw new Error(`${_n} 64-bit integer array lengths not supported`);return Af(0,0,9,s)},Yt[156]=Tn,Yt[157]=Tn,Yt[158]=Tn,Yt[159]=function VI(n,t,r,i){if(!1===i.allowIndefinite)throw new Error(`${_n} indefinite length items not allowed`);return Af(0,0,1,1/0)};for(let n=160;n<=183;n++)Yt[n]=HI;Yt[184]=function WI(n,t,r,i){return Mf(0,0,2,Su(n,t+1,i))},Yt[185]=function GI(n,t,r,i){return Mf(0,0,3,Au(n,t+1,i))},Yt[186]=function qI(n,t,r,i){return Mf(0,0,5,Mu(n,t+1,i))},Yt[187]=function ZI(n,t,r,i){const s=Tu(n,t+1,i);if("bigint"==typeof s)throw new Error(`${_n} 64-bit integer map lengths not supported`);return Mf(0,0,9,s)},Yt[188]=Tn,Yt[189]=Tn,Yt[190]=Tn,Yt[191]=function JI(n,t,r,i){if(!1===i.allowIndefinite)throw new Error(`${_n} indefinite length items not allowed`);return Mf(0,0,1,1/0)};for(let n=192;n<=215;n++)Yt[n]=YI;Yt[216]=function XI(n,t,r,i){return new Sr($t.tag,Su(n,t+1,i),2)},Yt[217]=function QI(n,t,r,i){return new Sr($t.tag,Au(n,t+1,i),3)},Yt[218]=function e7(n,t,r,i){return new Sr($t.tag,Mu(n,t+1,i),5)},Yt[219]=function t7(n,t,r,i){return new Sr($t.tag,Tu(n,t+1,i),9)},Yt[220]=Tn,Yt[221]=Tn,Yt[222]=Tn,Yt[223]=Tn;for(let n=224;n<=243;n++)Yt[n]=Lp("simple values are not supported");Yt[244]=Tn,Yt[245]=Tn,Yt[246]=Tn,Yt[247]=function o7(n,t,r,i){if(!1===i.allowUndefined)throw new Error(`${_n} undefined values are not supported`);return!0===i.coerceUndefinedToNull?new Sr($t.null,null,1):new Sr($t.undefined,void 0,1)},Yt[248]=Lp("simple values are not supported"),Yt[249]=function c7(n,t,r,i){return Nv(jv(n,t+1),3,i)},Yt[250]=function d7(n,t,r,i){return Nv(Uv(n,t+1),5,i)},Yt[251]=function u7(n,t,r,i){return Nv(E6(n,t+1),9,i)},Yt[252]=Tn,Yt[253]=Tn,Yt[254]=Tn,Yt[255]=function a7(n,t,r,i){if(!1===i.allowIndefinite)throw new Error(`${_n} indefinite length items not allowed`);return new Sr($t.break,void 0,1)};const Ja=[];for(let n=0;n<24;n++)Ja[n]=new Sr($t.uint,n,1);for(let n=-1;n>=-24;n--)Ja[31-n]=new Sr($t.negint,n,1);Ja[64]=new Sr($t.bytes,new Uint8Array(0),1),Ja[96]=new Sr($t.string,"",1),Ja[128]=new Sr($t.array,0,1),Ja[160]=new Sr($t.map,0,1),Ja[244]=new Sr($t.false,!1,1),Ja[245]=new Sr($t.true,!0,1),Ja[246]=new Sr($t.null,null,1);const h7={float64:!1,mapSorter:function m7(n,t){const r=Array.isArray(n[0])?n[0][0]:n[0],i=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==i.type)return r.type.compare(i.type);const c=S6[r.type.major].compareTokens(r,i);return 0===c&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),c},quickEncodeToken:function l7(n){switch(n.type){case $t.false:return Bc([244]);case $t.true:return Bc([245]);case $t.null:return Bc([246]);case $t.bytes:return n.value.length?void 0:Bc([64]);case $t.string:return""===n.value?Bc([96]):void 0;case $t.array:return 0===n.value?Bc([128]):void 0;case $t.map:return 0===n.value?Bc([160]):void 0;case $t.uint:return n.value<24?Bc([Number(n.value)]):void 0;case $t.negint:if(n.value>=-24)return Bc([31-Number(n.value)])}}},S6=function p7(){const n=[];return n[$t.uint.major]=Iu,n[$t.negint.major]=kv,n[$t.bytes.major]=Up,n[$t.string.major]=jI,n[$t.array.major]=Ov,n[$t.map.major]=Cv,n[$t.tag.major]=Dv,n[$t.float.major]=$v,n}(),Lv=new g6;class Fp{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do{if(r.obj===t)return!0}while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${v6} object contains circular references`);return new Fp(r,t)}}const wd={null:new Sr($t.null,null),undefined:new Sr($t.undefined,void 0),true:new Sr($t.true,!0),false:new Sr($t.false,!1),emptyArray:new Sr($t.array,0),emptyMap:new Sr($t.map,0)},bd={number:(n,t,r,i)=>Number.isInteger(n)&&Number.isSafeInteger(n)?new Sr(n>=0?$t.uint:$t.negint,n):new Sr($t.float,n),bigint:(n,t,r,i)=>n>=BigInt(0)?new Sr($t.uint,n):new Sr($t.negint,n),Uint8Array:(n,t,r,i)=>new Sr($t.bytes,n),string:(n,t,r,i)=>new Sr($t.string,n),boolean:(n,t,r,i)=>n?wd.true:wd.false,null:(n,t,r,i)=>wd.null,undefined:(n,t,r,i)=>wd.undefined,ArrayBuffer:(n,t,r,i)=>new Sr($t.bytes,new Uint8Array(n)),DataView:(n,t,r,i)=>new Sr($t.bytes,new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),Array(n,t,r,i){if(!n.length)return!0===r.addBreakTokens?[wd.emptyArray,new Sr($t.break)]:wd.emptyArray;i=Fp.createCheck(i,n);const s=[];let c=0;for(const o of n)s[c++]=Kp(o,r,i);return r.addBreakTokens?[new Sr($t.array,n.length),s,new Sr($t.break)]:[new Sr($t.array,n.length),s]},Object(n,t,r,i){const s="Object"!==t,c=s?n.keys():Object.keys(n),o=s?n.size:c.length;if(!o)return!0===r.addBreakTokens?[wd.emptyMap,new Sr($t.break)]:wd.emptyMap;i=Fp.createCheck(i,n);const u=[];let A=0;for(const S of c)u[A++]=[Kp(S,r,i),Kp(s?n.get(S):n[S],r,i)];return function y7(n,t){t.mapSorter&&n.sort(t.mapSorter)}(u,r),r.addBreakTokens?[new Sr($t.map,o),u,new Sr($t.break)]:[new Sr($t.map,o),u]}};bd.Map=bd.Object,bd.Buffer=bd.Uint8Array;for(const n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))bd[`${n}Array`]=bd.DataView;function Kp(n,t={},r){const i=function aI(n){if(null===n)return"null";if(void 0===n)return"undefined";if(!0===n||!1===n)return"boolean";const t=typeof n;if(sI.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(n))return"Array";if(function cI(n){return n&&n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer.call(null,n)}(n))return"Buffer";const r=function dI(n){const t=Object.prototype.toString.call(n).slice(8,-1);if(oI.includes(t))return t}(n);return r||"Object"}(n),s=t&&t.typeEncoders&&t.typeEncoders[i]||bd[i];if("function"==typeof s){const o=s(n,i,t,r);if(null!=o)return o}const c=bd[i];if(!c)throw new Error(`${v6} unsupported type: ${i}`);return c(n,i,t,r)}function A6(n,t,r,i){if(Array.isArray(t))for(const s of t)A6(n,s,r,i);else r[t.type.major](n,t,i)}function g7(n,t,r){const i=Kp(n,r);if(!Array.isArray(i)&&r.quickEncodeToken){const s=r.quickEncodeToken(i);if(s)return s;const c=t[i.type.major];if(c.encodedSize){const o=c.encodedSize(i,r),u=new g6(o);if(c(u,i,r),1!==u.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${i} was wrong`);return h6(u.chunks[0])}}return Lv.reset(),A6(Lv,i,t,r),Lv.toBytes(!0)}const w7={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class b7{constructor(t,r={}){this.pos=0,this.data=t,this.options=r}done(){return this.pos>=this.data.length}next(){const t=this.data[this.pos];let r=Ja[t];if(void 0===r){const i=Yt[t];if(!i)throw new Error(`${_n} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);r=i(this.data,this.pos,31&t,this.options)}return this.pos+=r.encodedLength,r}}const ih=Symbol.for("DONE"),zp=Symbol.for("BREAK");function sh(n,t){if(n.done())return ih;const r=n.next();if(r.type===$t.break)return zp;if(r.type.terminal)return r.value;if(r.type===$t.array)return function _7(n,t,r){const i=[];for(let s=0;s<n.value;s++){const c=sh(t,r);if(c===zp){if(n.value===1/0)break;throw new Error(`${_n} got unexpected break to lengthed array`)}if(c===ih)throw new Error(`${_n} found array but not enough entries (got ${s}, expected ${n.value})`);i[s]=c}return i}(r,n,t);if(r.type===$t.map)return function x7(n,t,r){const i=!0===r.useMaps,s=i?void 0:{},c=i?new Map:void 0;for(let o=0;o<n.value;o++){const u=sh(t,r);if(u===zp){if(n.value===1/0)break;throw new Error(`${_n} got unexpected break to lengthed map`)}if(u===ih)throw new Error(`${_n} found map but not enough entries (got ${o} [no key], expected ${n.value})`);if(!0!==i&&"string"!=typeof u)throw new Error(`${_n} non-string keys not supported (got ${typeof u})`);if(!0===r.rejectDuplicateMapKeys&&(i&&c.has(u)||!i&&u in s))throw new Error(`${_n} found repeat map key "${u}"`);const A=sh(t,r);if(A===ih)throw new Error(`${_n} found map but not enough entries (got ${o} [no value], expected ${n.value})`);i?c.set(u,A):s[u]=A}return i?c:s}(r,n,t);if(r.type===$t.tag){if(t.tags&&"function"==typeof t.tags[r.value]){const i=sh(n,t);return t.tags[r.value](i)}throw new Error(`${_n} tag not supported (${r.value})`)}throw new Error("unsupported")}const T7=function S7(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var c=n.charAt(s),o=c.charCodeAt(0);if(255!==r[o])throw new TypeError(c+" is ambiguous");r[o]=s}var u=n.length,A=n.charAt(0),S=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function ee(te){if("string"!=typeof te)throw new TypeError("Expected String");if(0===te.length)return new Uint8Array;var fe=0;if(" "!==te[fe]){for(var we=0,Pe=0;te[fe]===A;)we++,fe++;for(var Te=(te.length-fe)*S+1>>>0,Ae=new Uint8Array(Te);te[fe];){var Ce=r[te.charCodeAt(fe)];if(255===Ce)return;for(var je=0,Le=Te-1;(0!==Ce||je<Pe)&&-1!==Le;Le--,je++)Ae[Le]=(Ce+=u*Ae[Le]>>>0)%256>>>0,Ce=Ce/256>>>0;if(0!==Ce)throw new Error("Non-zero carry");Pe=je,fe++}if(" "!==te[fe]){for(var ze=Te-Pe;ze!==Te&&0===Ae[ze];)ze++;for(var $e=new Uint8Array(we+(Te-ze)),Ye=we;ze!==Te;)$e[Ye++]=Ae[ze++];return $e}}}return{encode:function R(te){if(te instanceof Uint8Array||(ArrayBuffer.isView(te)?te=new Uint8Array(te.buffer,te.byteOffset,te.byteLength):Array.isArray(te)&&(te=Uint8Array.from(te))),!(te instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===te.length)return"";for(var fe=0,we=0,Pe=0,Te=te.length;Pe!==Te&&0===te[Pe];)Pe++,fe++;for(var Ae=(Te-Pe)*y+1>>>0,Ce=new Uint8Array(Ae);Pe!==Te;){for(var je=te[Pe],Le=0,ze=Ae-1;(0!==je||Le<we)&&-1!==ze;ze--,Le++)Ce[ze]=(je+=256*Ce[ze]>>>0)%u>>>0,je=je/u>>>0;if(0!==je)throw new Error("Non-zero carry");we=Le,Pe++}for(var $e=Ae-we;$e!==Ae&&0===Ce[$e];)$e++;for(var Ye=A.repeat(fe);$e<Ae;++$e)Ye+=n.charAt(Ce[$e]);return Ye},decodeUnsafe:ee,decode:function ae(te){var fe=ee(te);if(fe)return fe;throw new Error(`Non-${t} character`)}}},Fv=(new Uint8Array(0),n=>{if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")});class B7{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class R7{constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return M6(this,t)}}class k7{constructor(t){this.decoders=t}or(t){return M6(this,t)}decode(t){const i=this.decoders[t[0]];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const M6=(n,t)=>new k7({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class O7{constructor(t,r,i,s){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new B7(t,r,i),this.decoder=new R7(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const T6=({name:n,prefix:t,encode:r,decode:i})=>new O7(n,t,r,i),I6=({prefix:n,name:t,alphabet:r})=>{const{encode:i,decode:s}=T7(r,t);return T6({prefix:n,name:t,encode:i,decode:c=>Fv(s(c))})},Rc=({name:n,prefix:t,bitsPerChar:r,alphabet:i})=>T6({prefix:t,name:n,encode:s=>((n,t,r)=>{const i="="===t[t.length-1],s=(1<<r)-1;let c="",o=0,u=0;for(let A=0;A<n.length;++A)for(u=u<<8|n[A],o+=8;o>r;)o-=r,c+=t[s&u>>o];if(o&&(c+=t[s&u<<r-o]),i)for(;c.length*r&7;)c+="=";return c})(s,i,r),decode:s=>((n,t,r,i)=>{const s={};for(let y=0;y<t.length;++y)s[t[y]]=y;let c=n.length;for(;"="===n[c-1];)--c;const o=new Uint8Array(c*r/8|0);let u=0,A=0,S=0;for(let y=0;y<c;++y){const R=s[n[y]];if(void 0===R)throw new SyntaxError(`Non-${i} character`);A=A<<r|R,u+=r,u>=8&&(u-=8,o[S++]=255&A>>u)}if(u>=r||255&A<<8-u)throw new SyntaxError("Unexpected end of data");return o})(s,i,r,n)}),Vp=Rc({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_d=(Rc({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Rc({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rc({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rc({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rc({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rc({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Rc({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Rc({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),I6({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));I6({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var P6=128,j7=-128,U7=Math.pow(2,31),F7=128,R6=127,K7=Math.pow(2,7),z7=Math.pow(2,14),V7=Math.pow(2,21),H7=Math.pow(2,28),W7=Math.pow(2,35),G7=Math.pow(2,42),q7=Math.pow(2,49),Z7=Math.pow(2,56),J7=Math.pow(2,63),X7={encode:function B6(n,t,r){t=t||[];for(var i=r=r||0;n>=U7;)t[r++]=255&n|P6,n/=128;for(;n&j7;)t[r++]=255&n|P6,n>>>=7;return t[r]=0|n,B6.bytes=r-i+1,t},decode:function Kv(n,i){var o,r=0,s=0,c=i=i||0,u=n.length;do{if(c>=u)throw Kv.bytes=0,new RangeError("Could not decode varint");o=n[c++],r+=s<28?(o&R6)<<s:(o&R6)*Math.pow(2,s),s+=7}while(o>=F7);return Kv.bytes=c-i,r},encodingLength:function(n){return n<K7?1:n<z7?2:n<V7?3:n<H7?4:n<W7?5:n<G7?6:n<q7?7:n<Z7?8:n<J7?9:10}};const Hp=X7,zv=(n,t=0)=>[Hp.decode(n,t),Hp.decode.bytes],Wp=(n,t,r=0)=>(Hp.encode(n,t,r),t),Gp=n=>Hp.encodingLength(n);class Vv{constructor(t,r,i,s){this.code=t,this.size=r,this.digest=i,this.bytes=s}}const Hv=(n,t)=>{const{bytes:r,version:i}=n;return 0===i?i9(r,Wv(n),t||_d.encoder):s9(r,Wv(n),t||Vp.encoder)},k6=new WeakMap,Wv=n=>{const t=k6.get(n);if(null==t){const r=new Map;return k6.set(n,r),r}return t};class Hi{constructor(t,r,i,s){this.code=r,this.version=t,this.multihash=i,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:r}=this;if(t!==oh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==o9)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Hi.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:r}=this.multihash,i=((n,t)=>{const r=t.byteLength,i=Gp(n),s=i+Gp(r),c=new Uint8Array(s+r);return Wp(n,c,0),Wp(r,c,i),c.set(t,s),new Vv(n,r,t,c)})(t,r);return Hi.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return Hi.equals(this,t)}static equals(t,r){return r&&t.code===r.code&&t.version===r.version&&((n,t)=>n===t||n.code===t.code&&n.size===t.size&&t.bytes instanceof Uint8Array&&((n,t)=>{if(n===t)return!0;if(n.byteLength!==t.byteLength)return!1;for(let r=0;r<n.byteLength;r++)if(n[r]!==t[r])return!1;return!0})(n.bytes,t.bytes))(t.multihash,r.multihash)}toString(t){return Hv(this,t)}toJSON(){return{"/":Hv(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const r=t;if(r instanceof Hi)return r;if(null!=r["/"]&&r["/"]===r.bytes||r.asCID===r){const{version:i,code:s,multihash:c,bytes:o}=r;return new Hi(i,s,c,o||O6(i,s,c.bytes))}if(!0===r[a9]){const{version:i,multihash:s,code:c}=r,o=(n=>{const t=Fv(n),[r,i]=zv(t),[s,c]=zv(t.subarray(i)),o=t.subarray(i+c);if(o.byteLength!==s)throw new Error("Incorrect length");return new Vv(r,s,o,t)})(s);return Hi.create(i,c,o)}return null}static create(t,r,i){if("number"!=typeof r)throw new Error("String codecs are no longer supported");if(!(i.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(r!==oh)throw new Error(`Version 0 CID must use dag-pb (code: ${oh}) block encoding`);return new Hi(t,r,i,i.bytes);case 1:{const s=O6(t,r,i.bytes);return new Hi(t,r,i,s)}default:throw new Error("Invalid version")}}static createV0(t){return Hi.create(0,oh,t)}static createV1(t,r){return Hi.create(1,t,r)}static decode(t){const[r,i]=Hi.decodeFirst(t);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(t){const r=Hi.inspectBytes(t),i=r.size-r.multihashSize,s=Fv(t.subarray(i,i+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const c=s.subarray(r.multihashSize-r.digestSize),o=new Vv(r.multihashCode,r.digestSize,c,s);return[0===r.version?Hi.createV0(o):Hi.createV1(r.codec,o),t.subarray(r.size)]}static inspectBytes(t){let r=0;const i=()=>{const[R,ee]=zv(t.subarray(r));return r+=ee,R};let s=i(),c=oh;if(18===s?(s=0,r=0):c=i(),0!==s&&1!==s)throw new RangeError(`Invalid CID version ${s}`);const o=r,u=i(),A=i(),S=r+A;return{version:s,codec:c,multihashCode:u,digestSize:A,multihashSize:S-o,size:S}}static parse(t,r){const[i,s]=n9(t,r),c=Hi.decode(s);if(0===c.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return Wv(c).set(i,t),c}}const n9=(n,t)=>{switch(n[0]){case"Q":return[_d.prefix,(t||_d).decode(`${_d.prefix}${n}`)];case _d.prefix:return[_d.prefix,(t||_d).decode(n)];case Vp.prefix:return[Vp.prefix,(t||Vp).decode(n)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],t.decode(n)]}},i9=(n,t,r)=>{const{prefix:i}=r;if(i!==_d.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=t.get(i);if(null==s){const c=r.encode(n).slice(1);return t.set(i,c),c}return s},s9=(n,t,r)=>{const{prefix:i}=r,s=t.get(i);if(null==s){const c=r.encode(n);return t.set(i,c),c}return s},oh=112,o9=18,O6=(n,t,r)=>{const i=Gp(n),s=i+Gp(t),c=new Uint8Array(s+r.byteLength);return Wp(n,c,0),Wp(t,c,i),c.set(r,s),c},a9=Symbol.for("@ipld/js-cid/CID"),f9={float64:!0,typeEncoders:{Object:function c9(n){if(n.asCID!==n&&n["/"]!==n.bytes)return null;const t=Hi.asCID(n);if(!t)return null;const r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new Sr($t.tag,42),new Sr($t.bytes,r)]},undefined:function d9(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function u9(n){if(Number.isNaN(n))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(n===1/0||n===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},D6={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};D6.tags[42]=function l9(n){if(0!==n[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Hi.decode(n.subarray(1))};const h9="dag-cbor",qp=113,p9=n=>function v7(n,t){return t=Object.assign({},h7,t),g7(n,S6,t)}(n,f9),N6=n=>function E7(n,t){if(!(n instanceof Uint8Array))throw new Error(`${_n} data to decode must be a Uint8Array`);const r=(t=Object.assign({},w7,t)).tokenizer||new b7(n,t),i=sh(r,t);if(i===ih)throw new Error(`${_n} did not find any content to decode`);if(i===zp)throw new Error(`${_n} got unexpected break`);if(!r.done())throw new Error(`${_n} too many terminals, data makes no sense`);return i}(n,D6),Jo=ie({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Zp=(ie({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),qe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),$6=(qe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})),Gv=(n,t)=>{const{bytes:r,version:i}=n;return 0===i?m9(r,qv(n),t||Jo.encoder):g9(r,qv(n),t||Zp.encoder)},j6=new WeakMap,qv=n=>{const t=j6.get(n);if(null==t){const r=new Map;return j6.set(n,r),r}return t};class on{constructor(t,r,i,s){this.code=r,this.version=t,this.multihash=i,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:r}=this;if(t!==ah)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==v9)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return on.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:r}=this.multihash,i=bp(t,r);return on.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return on.equals(this,t)}static equals(t,r){return r&&t.code===r.code&&t.version===r.version&&((n,t)=>n===t||n.code===t.code&&n.size===t.size&&t.bytes instanceof Uint8Array&&((n,t)=>{if(n===t)return!0;if(n.byteLength!==t.byteLength)return!1;for(let r=0;r<n.byteLength;r++)if(n[r]!==t[r])return!1;return!0})(n.bytes,t.bytes))(t.multihash,r.multihash)}toString(t){return Gv(this,t)}toJSON(){return{"/":Gv(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const r=t;if(r instanceof on)return r;if(null!=r["/"]&&r["/"]===r.bytes||r.asCID===r){const{version:i,code:s,multihash:c,bytes:o}=r;return new on(i,s,c,o||U6(i,s,c.bytes))}if(!0===r[w9]){const{version:i,multihash:s,code:c}=r,o=a3(s);return on.create(i,c,o)}return null}static create(t,r,i){if("number"!=typeof r)throw new Error("String codecs are no longer supported");if(!(i.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(r!==ah)throw new Error(`Version 0 CID must use dag-pb (code: ${ah}) block encoding`);return new on(t,r,i,i.bytes);case 1:{const s=U6(t,r,i.bytes);return new on(t,r,i,s)}default:throw new Error("Invalid version")}}static createV0(t){return on.create(0,ah,t)}static createV1(t,r){return on.create(1,t,r)}static decode(t){const[r,i]=on.decodeFirst(t);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(t){const r=on.inspectBytes(t),i=r.size-r.multihashSize,s=Be(t.subarray(i,i+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const c=s.subarray(r.multihashSize-r.digestSize),o=new nv(r.multihashCode,r.digestSize,c,s);return[0===r.version?on.createV0(o):on.createV1(r.codec,o),t.subarray(r.size)]}static inspectBytes(t){let r=0;const i=()=>{const[R,ee]=Kl(t.subarray(r));return r+=ee,R};let s=i(),c=ah;if(18===s?(s=0,r=0):c=i(),0!==s&&1!==s)throw new RangeError(`Invalid CID version ${s}`);const o=r,u=i(),A=i(),S=r+A;return{version:s,codec:c,multihashCode:u,digestSize:A,multihashSize:S-o,size:S}}static parse(t,r){const[i,s]=y9(t,r),c=on.decode(s);if(0===c.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return qv(c).set(i,t),c}}const y9=(n,t)=>{switch(n[0]){case"Q":return[Jo.prefix,(t||Jo).decode(`${Jo.prefix}${n}`)];case Jo.prefix:return[Jo.prefix,(t||Jo).decode(n)];case Zp.prefix:return[Zp.prefix,(t||Zp).decode(n)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],t.decode(n)]}},m9=(n,t,r)=>{const{prefix:i}=r;if(i!==Jo.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=t.get(i);if(null==s){const c=r.encode(n).slice(1);return t.set(i,c),c}return s},g9=(n,t,r)=>{const{prefix:i}=r,s=t.get(i);if(null==s){const c=r.encode(n);return t.set(i,c),c}return s},ah=112,v9=18,U6=(n,t,r)=>{const i=Vl(n),s=i+Vl(t),c=new Uint8Array(s+r.byteLength);return zl(n,c,0),zl(t,c,i),c.set(r,s),c},w9=Symbol.for("@ipld/js-cid/CID");var xd=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},Jp=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=n[Symbol.asyncIterator];return t?t.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(c){r[c]=n[c]&&function(o){return new Promise(function(u,A){!function s(c,o,u,A){Promise.resolve(A).then(function(S){c({value:S,done:u})},o)}(u,A,(o=n[c](o)).done,o.value)})}}},ts=function(n){return this instanceof ts?(this.v=n,this):new ts(n)},Yp=function(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=r.apply(n,t||[]),c=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(ee){i[ee]&&(s[ee]=function(ae){return new Promise(function(te,fe){c.push([ee,ae,te,fe])>1||u(ee,ae)})})}function u(ee,ae){try{!function A(ee){ee.value instanceof ts?Promise.resolve(ee.value.v).then(S,y):R(c[0][2],ee)}(i[ee](ae))}catch(te){R(c[0][3],te)}}function S(ee){u("next",ee)}function y(ee){u("throw",ee)}function R(ee,ae){ee(ae),c.shift(),c.length&&u(c[0][0],c[0][1])}};class L6{open(){return xd(this,void 0,void 0,function*(){})}close(){return xd(this,void 0,void 0,function*(){})}put(t,r,i){return xd(this,void 0,void 0,function*(){return t})}get(t,r){return xd(this,void 0,void 0,function*(){return new Uint8Array})}has(t,r){return xd(this,void 0,void 0,function*(){return!1})}delete(t,r){return xd(this,void 0,void 0,function*(){})}isEmpty(t){return xd(this,void 0,void 0,function*(){return!0})}putMany(t,r){return Yp(this,arguments,function*(){var s,c,o;try{for(var y,A=!0,S=Jp(t);!(s=(y=yield ts(S.next())).done);A=!0){A=!1;const R=y.value;yield ts(this.put(R.cid,R.block,r)),yield yield ts(R.cid)}}catch(R){c={error:R}}finally{try{!A&&!s&&(o=S.return)&&(yield ts(o.call(S)))}finally{if(c)throw c.error}}})}getMany(t,r){return Yp(this,arguments,function*(){var s,c,o;try{for(var y,A=!0,S=Jp(t);!(s=(y=yield ts(S.next())).done);A=!0){A=!1;const R=y.value;yield yield ts({cid:R,block:yield ts(this.get(R,r))})}}catch(R){c={error:R}}finally{try{!A&&!s&&(o=S.return)&&(yield ts(o.call(S)))}finally{if(c)throw c.error}}})}getAll(t){return Yp(this,arguments,function*(){var i,s,c,o;const u=this.db.iterator({keys:!0,keyEncoding:"buffer"},t);try{for(var y,A=!0,S=Jp(u);!(i=(y=yield ts(S.next())).done);A=!0){o=y.value,A=!1;const[R,ee]=o;yield yield ts({cid:on.decode(R),block:ee})}}catch(R){s={error:R}}finally{try{!A&&!i&&(c=S.return)&&(yield ts(c.call(S)))}finally{if(s)throw s.error}}})}deleteMany(t,r){return Yp(this,arguments,function*(){var s,c,o;try{for(var y,A=!0,S=Jp(t);!(s=(y=yield ts(S.next())).done);A=!0){A=!1;const R=y.value;yield ts(this.delete(R,r)),yield yield ts(R)}}catch(R){c={error:R}}finally{try{!A&&!s&&(o=S.return)&&(yield ts(o.call(S)))}finally{if(c)throw c.error}}})}clear(){return xd(this,void 0,void 0,function*(){})}}function Zv(n,t){this.v=n,this.k=t}function lr(n){return new Zv(n,0)}function ch(n){var t,r;function i(c,o){try{var u=n[c](o),A=u.value,S=A instanceof Zv;Promise.resolve(S?A.v:A).then(function(y){if(S){var R="return"===c?"return":"next";if(!A.k||y.done)return i(R,y);y=n[R](y).value}s(u.done?"return":"normal",y)},function(y){i("throw",y)})}catch(y){s("throw",y)}}function s(c,o){switch(c){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?i(t.key,t.arg):r=null}this._invoke=function(c,o){return new Promise(function(u,A){var S={key:c,arg:o,resolve:u,reject:A,next:null};r?r=r.next=S:(t=r=S,i(c,o))})},"function"!=typeof n.return&&(this.return=void 0)}function An(n){return function(){return new ch(n.apply(this,arguments))}}function ln(n){var t,r,i,s=2;for(typeof Symbol<"u"&&(r=Symbol.asyncIterator,i=Symbol.iterator);s--;){if(r&&null!=(t=n[r]))return t.call(n);if(i&&null!=(t=n[i]))return new Xp(t.call(n));r="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function Xp(n){function t(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var i=r.done;return Promise.resolve(r.value).then(function(s){return{value:s,done:i}})}return(Xp=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(i){var s=this.s.return;return void 0===s?Promise.resolve({value:i,done:!0}):t(s.apply(this.s,arguments))},throw:function(i){var s=this.s.return;return void 0===s?Promise.reject(i):t(s.apply(this.s,arguments))}},new Xp(n)}ch.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ch.prototype.next=function(n){return this._invoke("next",n)},ch.prototype.throw=function(n){return this._invoke("throw",n)},ch.prototype.return=function(n){return this._invoke("return",n)};var Qp=I(5014);const F6=function _9(n,t=1){return t=Number(t),function b9(n){return null!=n[Symbol.asyncIterator]}(n)?An(function*(){let r=[];if(t<1&&(t=1),t!==Math.round(t))throw new Error("Batch size must be an integer");var c,i=!1,s=!1;try{for(var u,o=ln(n);i=!(u=yield lr(o.next())).done;i=!1)for(r.push(u.value);r.length>=t;)yield r.slice(0,t),r=r.slice(t)}catch(A){s=!0,c=A}finally{try{i&&null!=o.return&&(yield lr(o.return()))}finally{if(s)throw c}}for(;r.length>0;)yield r.slice(0,t),r=r.slice(t)})():function*(){let r=[];if(t<1&&(t=1),t!==Math.round(t))throw new Error("Batch size must be an integer");for(const i of n)for(r.push(i);r.length>=t;)yield r.slice(0,t),r=r.slice(t);for(;r.length>0;)yield r.slice(0,t),r=r.slice(t)}()};function K6(n){return Jv.apply(this,arguments)}function Jv(){return Jv=An(function*(n,t=1){var s,r=!1,i=!1;try{for(var o,c=ln(F6(n,t));r=!(o=yield lr(c.next())).done;r=!1){const A=o.value.map(function(){var S=(0,it.A)(function*(y){return y().then(R=>({ok:!0,value:R}),R=>({ok:!1,err:R}))});return function(y){return S.apply(this,arguments)}}());for(let S=0;S<A.length;S++){const y=yield lr(A[S]);if(!y.ok)throw y.err;yield y.value}}}catch(u){i=!0,s=u}finally{try{r&&null!=c.return&&(yield lr(c.return()))}finally{if(i)throw s}}}),Jv.apply(this,arguments)}function Ed(n=0){return new Uint8Array(n)}function Yv(n=0){return new Uint8Array(n)}function z6(n,t){null==t&&(t=n.reduce((s,c)=>s+c.length,0));const r=Yv(t);let i=0;for(const s of n)r.set(s,i),i+=s.length;return r}function x9(n,t){if(n===t)return!0;if(n.byteLength!==t.byteLength)return!1;for(let r=0;r<n.byteLength;r++)if(n[r]!==t[r])return!1;return!0}const V6=Symbol.for("@achingbrain/uint8arraylist");function H6(n,t){if(null==t||t<0)throw new RangeError("index is out of bounds");let r=0;for(const i of n){const s=r+i.byteLength;if(t<s)return{buf:i,index:t-r};r=s}throw new RangeError("index is out of bounds")}function ey(n){return!!n?.[V6]}class Pu{bufs;length;[V6]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(const i of t)if(i instanceof Uint8Array)r+=i.byteLength,this.bufs.push(i);else{if(!ey(i))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");r+=i.byteLength,this.bufs.push(...i.bufs)}this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(const i of t.reverse())if(i instanceof Uint8Array)r+=i.byteLength,this.bufs.unshift(i);else{if(!ey(i))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");r+=i.byteLength,this.bufs.unshift(...i.bufs)}this.length+=r}get(t){const r=H6(this.bufs,t);return r.buf[r.index]}set(t,r){const i=H6(this.bufs,t);i.buf[i.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let i=0;i<t.length;i++)this.set(r+i,t[i]);else{if(!ey(t))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let i=0;i<t.length;i++)this.set(r+i,t.get(i))}}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength)return this.bufs=[],void(this.length=0);for(;this.bufs.length>0;){if(!(t>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(t,r){const{bufs:i,length:s}=this._subList(t,r);return z6(i,s)}subarray(t,r){const{bufs:i,length:s}=this._subList(t,r);return 1===i.length?i[0]:z6(i,s)}sublist(t,r){const{bufs:i,length:s}=this._subList(t,r),c=new Pu;return c.length=s,c.bufs=[...i],c}_subList(t,r){if((t=t??0)<0&&(t=this.length+t),(r=r??this.length)<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(0===t&&r===this.length)return{bufs:this.bufs,length:this.length};const i=[];let s=0;for(let c=0;c<this.bufs.length;c++){const o=this.bufs[c],u=s,A=u+o.byteLength;if(s=A,t>=A)continue;const S=t>=u&&t<A,y=r>u&&r<=A;if(S&&y){if(t===u&&r===A){i.push(o);break}const R=t-u;i.push(o.subarray(R,R+(r-t)));break}if(S){if(0===t){i.push(o);continue}i.push(o.subarray(t-u))}else{if(y){if(r===A){i.push(o);break}i.push(o.subarray(0,r-u));break}i.push(o)}}return{bufs:i,length:r-t}}indexOf(t,r=0){if(!(ey(t)||t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const i=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),0===t.length)return r>this.length?this.length:r;const s=i.byteLength;if(0===s)throw new TypeError("search must be at least 1 byte long");const o=new Int32Array(256);for(let R=0;R<256;R++)o[R]=-1;for(let R=0;R<s;R++)o[i[R]]=R;const u=o,A=this.byteLength-i.byteLength,S=i.byteLength-1;let y;for(let R=r;R<=A;R+=y){y=0;for(let ee=S;ee>=0;ee--){const ae=this.get(R+ee);if(i[ee]!==ae){y=Math.max(1,ee-u[ae]);break}}if(0===y)return R}return-1}getInt8(t){const r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){const i=Yv(1);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt8(0,r),this.write(i,t)}getInt16(t,r){const i=this.subarray(t,t+2);return new DataView(i.buffer,i.byteOffset,i.byteLength).getInt16(0,r)}setInt16(t,r,i){const s=Ed(2);new DataView(s.buffer,s.byteOffset,s.byteLength).setInt16(0,r,i),this.write(s,t)}getInt32(t,r){const i=this.subarray(t,t+4);return new DataView(i.buffer,i.byteOffset,i.byteLength).getInt32(0,r)}setInt32(t,r,i){const s=Ed(4);new DataView(s.buffer,s.byteOffset,s.byteLength).setInt32(0,r,i),this.write(s,t)}getBigInt64(t,r){const i=this.subarray(t,t+8);return new DataView(i.buffer,i.byteOffset,i.byteLength).getBigInt64(0,r)}setBigInt64(t,r,i){const s=Ed(8);new DataView(s.buffer,s.byteOffset,s.byteLength).setBigInt64(0,r,i),this.write(s,t)}getUint8(t){const r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){const i=Yv(1);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint8(0,r),this.write(i,t)}getUint16(t,r){const i=this.subarray(t,t+2);return new DataView(i.buffer,i.byteOffset,i.byteLength).getUint16(0,r)}setUint16(t,r,i){const s=Ed(2);new DataView(s.buffer,s.byteOffset,s.byteLength).setUint16(0,r,i),this.write(s,t)}getUint32(t,r){const i=this.subarray(t,t+4);return new DataView(i.buffer,i.byteOffset,i.byteLength).getUint32(0,r)}setUint32(t,r,i){const s=Ed(4);new DataView(s.buffer,s.byteOffset,s.byteLength).setUint32(0,r,i),this.write(s,t)}getBigUint64(t,r){const i=this.subarray(t,t+8);return new DataView(i.buffer,i.byteOffset,i.byteLength).getBigUint64(0,r)}setBigUint64(t,r,i){const s=Ed(8);new DataView(s.buffer,s.byteOffset,s.byteLength).setBigUint64(0,r,i),this.write(s,t)}getFloat32(t,r){const i=this.subarray(t,t+4);return new DataView(i.buffer,i.byteOffset,i.byteLength).getFloat32(0,r)}setFloat32(t,r,i){const s=Ed(4);new DataView(s.buffer,s.byteOffset,s.byteLength).setFloat32(0,r,i),this.write(s,t)}getFloat64(t,r){const i=this.subarray(t,t+8);return new DataView(i.buffer,i.byteOffset,i.byteLength).getFloat64(0,r)}setFloat64(t,r,i){const s=Ed(8);new DataView(s.buffer,s.byteOffset,s.byteLength).setFloat64(0,r,i),this.write(s,t)}equals(t){if(null==t||!(t instanceof Pu)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!x9(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){const i=new Pu;return i.bufs=t,null==r&&(r=t.reduce((s,c)=>s+c.byteLength,0)),i.length=r,i}}const S9=(n={})=>{const t=n.chunkSize??262144;return function(){var r=An(function*(s){let c=new Pu,o=0,u=!1;var y,A=!1,S=!1;try{for(var ee,R=ln(s);A=!(ee=yield lr(R.next())).done;A=!1){const ae=ee.value;for(c.append(ae),o+=ae.length;o>=t;)if(yield c.slice(0,t),u=!0,t===c.length)c=new Pu,o=0;else{const te=new Pu;te.append(c.sublist(t)),c=te,o-=t}}}catch(ae){S=!0,y=ae}finally{try{A&&null!=R.return&&(yield lr(R.return()))}finally{if(S)throw y}}(!u||o>0)&&(yield c.subarray(0,o))});return function i(s){return r.apply(this,arguments)}}()};function Xv(n){if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")}new Uint8Array(0);const B9=function T9(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var c=n.charAt(s),o=c.charCodeAt(0);if(255!==r[o])throw new TypeError(c+" is ambiguous");r[o]=s}var u=n.length,A=n.charAt(0),S=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function ee(te){if("string"!=typeof te)throw new TypeError("Expected String");if(0===te.length)return new Uint8Array;var fe=0;if(" "!==te[fe]){for(var we=0,Pe=0;te[fe]===A;)we++,fe++;for(var Te=(te.length-fe)*S+1>>>0,Ae=new Uint8Array(Te);te[fe];){var Ce=r[te.charCodeAt(fe)];if(255===Ce)return;for(var je=0,Le=Te-1;(0!==Ce||je<Pe)&&-1!==Le;Le--,je++)Ae[Le]=(Ce+=u*Ae[Le]>>>0)%256>>>0,Ce=Ce/256>>>0;if(0!==Ce)throw new Error("Non-zero carry");Pe=je,fe++}if(" "!==te[fe]){for(var ze=Te-Pe;ze!==Te&&0===Ae[ze];)ze++;for(var $e=new Uint8Array(we+(Te-ze)),Ye=we;ze!==Te;)$e[Ye++]=Ae[ze++];return $e}}}return{encode:function R(te){if(te instanceof Uint8Array||(ArrayBuffer.isView(te)?te=new Uint8Array(te.buffer,te.byteOffset,te.byteLength):Array.isArray(te)&&(te=Uint8Array.from(te))),!(te instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===te.length)return"";for(var fe=0,we=0,Pe=0,Te=te.length;Pe!==Te&&0===te[Pe];)Pe++,fe++;for(var Ae=(Te-Pe)*y+1>>>0,Ce=new Uint8Array(Ae);Pe!==Te;){for(var je=te[Pe],Le=0,ze=Ae-1;(0!==je||Le<we)&&-1!==ze;ze--,Le++)Ce[ze]=(je+=256*Ce[ze]>>>0)%u>>>0,je=je/u>>>0;if(0!==je)throw new Error("Non-zero carry");we=Le,Pe++}for(var $e=Ae-we;$e!==Ae&&0===Ce[$e];)$e++;for(var Ye=A.repeat(fe);$e<Ae;++$e)Ye+=n.charAt(Ce[$e]);return Ye},decodeUnsafe:ee,decode:function ae(te){var fe=ee(te);if(fe)return fe;throw new Error(`Non-${t} character`)}}};class R9{name;prefix;baseEncode;constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class k9{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return W6(this,t)}}class O9{decoders;constructor(t){this.decoders=t}or(t){return W6(this,t)}decode(t){const i=this.decoders[t[0]];if(null!=i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function W6(n,t){return new O9({...n.decoders??{[n.prefix]:n},...t.decoders??{[t.prefix]:t}})}class C9{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,i,s){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new R9(t,r,i),this.decoder=new k9(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function G6({name:n,prefix:t,encode:r,decode:i}){return new C9(n,t,r,i)}function q6({name:n,prefix:t,alphabet:r}){const{encode:i,decode:s}=B9(r,n);return G6({prefix:t,name:n,encode:i,decode:c=>Xv(s(c))})}function kc({name:n,prefix:t,bitsPerChar:r,alphabet:i}){return G6({prefix:t,name:n,encode:s=>function N9(n,t,r){const i="="===t[t.length-1],s=(1<<r)-1;let c="",o=0,u=0;for(let A=0;A<n.length;++A)for(u=u<<8|n[A],o+=8;o>r;)o-=r,c+=t[s&u>>o];if(0!==o&&(c+=t[s&u<<r-o]),i)for(;c.length*r&7;)c+="=";return c}(s,i,r),decode:s=>function D9(n,t,r,i){const s={};for(let y=0;y<t.length;++y)s[t[y]]=y;let c=n.length;for(;"="===n[c-1];)--c;const o=new Uint8Array(c*r/8|0);let u=0,A=0,S=0;for(let y=0;y<c;++y){const R=s[n[y]];if(void 0===R)throw new SyntaxError(`Non-${i} character`);A=A<<r|R,u+=r,u>=8&&(u-=8,o[S++]=255&A>>u)}if(u>=r||255&A<<8-u)throw new SyntaxError("Unexpected end of data");return o}(s,i,r,n)})}const ty=kc({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Sd=(kc({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),kc({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kc({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kc({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kc({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kc({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kc({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),kc({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),q6({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));q6({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Z6=128,U9=-128,L9=Math.pow(2,31),K9=128,Y6=127,z9=Math.pow(2,7),V9=Math.pow(2,14),H9=Math.pow(2,21),W9=Math.pow(2,28),G9=Math.pow(2,35),q9=Math.pow(2,42),Z9=Math.pow(2,49),J9=Math.pow(2,56),Y9=Math.pow(2,63),Q9={encode:function J6(n,t,r){t=t||[];for(var i=r=r||0;n>=L9;)t[r++]=255&n|Z6,n/=128;for(;n&U9;)t[r++]=255&n|Z6,n>>>=7;return t[r]=0|n,J6.bytes=r-i+1,t},decode:function Qv(n,i){var o,r=0,s=0,c=i=i||0,u=n.length;do{if(c>=u)throw Qv.bytes=0,new RangeError("Could not decode varint");o=n[c++],r+=s<28?(o&Y6)<<s:(o&Y6)*Math.pow(2,s),s+=7}while(o>=K9);return Qv.bytes=c-i,r},encodingLength:function(n){return n<z9?1:n<V9?2:n<H9?3:n<W9?4:n<G9?5:n<q9?6:n<Z9?7:n<J9?8:n<Y9?9:10}};const ry=Q9;function e1(n,t=0){return[ry.decode(n,t),ry.decode.bytes]}function ny(n,t,r=0){return ry.encode(n,t,r),t}function iy(n){return ry.encodingLength(n)}class t1{code;size;digest;bytes;constructor(t,r,i,s){this.code=t,this.size=r,this.digest=i,this.bytes=s}}function r1(n,t){const{bytes:r,version:i}=n;return 0===i?function sP(n,t,r){const{prefix:i}=r;if(i!==Sd.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=t.get(i);if(null==s){const c=r.encode(n).slice(1);return t.set(i,c),c}return s}(r,n1(n),t??Sd.encoder):function oP(n,t,r){const{prefix:i}=r,s=t.get(i);if(null==s){const c=r.encode(n);return t.set(i,c),c}return s}(r,n1(n),t??ty.encoder)}const X6=new WeakMap;function n1(n){const t=X6.get(n);if(null==t){const r=new Map;return X6.set(n,r),r}return t}class Ei{code;version;multihash;bytes;"/";constructor(t,r,i,s){this.code=r,this.version=t,this.multihash=i,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:r}=this;if(t!==dh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==aP)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ei.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:r}=this.multihash,i=function tP(n,t){const r=t.byteLength,i=iy(n),s=i+iy(r),c=new Uint8Array(s+r);return ny(n,c,0),ny(r,c,i),c.set(t,s),new t1(n,r,t,c)}(t,r);return Ei.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return Ei.equals(this,t)}static equals(t,r){return null!=r&&t.code===r.code&&t.version===r.version&&function nP(n,t){return n===t||n.code===t.code&&n.size===t.size&&t.bytes instanceof Uint8Array&&function M9(n,t){if(n===t)return!0;if(n.byteLength!==t.byteLength)return!1;for(let r=0;r<n.byteLength;r++)if(n[r]!==t[r])return!1;return!0}(n.bytes,t.bytes)}(t.multihash,r.multihash)}toString(t){return r1(this,t)}toJSON(){return{"/":r1(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(null==t)return null;const r=t;if(r instanceof Ei)return r;if(null!=r["/"]&&r["/"]===r.bytes||r.asCID===r){const{version:i,code:s,multihash:c,bytes:o}=r;return new Ei(i,s,c,o??Q6(i,s,c.bytes))}if(!0===r[cP]){const{version:i,multihash:s,code:c}=r,o=function rP(n){const t=Xv(n),[r,i]=e1(t),[s,c]=e1(t.subarray(i)),o=t.subarray(i+c);if(o.byteLength!==s)throw new Error("Incorrect length");return new t1(r,s,o,t)}(s);return Ei.create(i,c,o)}return null}static create(t,r,i){if("number"!=typeof r)throw new Error("String codecs are no longer supported");if(!(i.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:if(r!==dh)throw new Error(`Version 0 CID must use dag-pb (code: ${dh}) block encoding`);return new Ei(t,r,i,i.bytes);case 1:{const s=Q6(t,r,i.bytes);return new Ei(t,r,i,s)}default:throw new Error("Invalid version")}}static createV0(t){return Ei.create(0,dh,t)}static createV1(t,r){return Ei.create(1,t,r)}static decode(t){const[r,i]=Ei.decodeFirst(t);if(0!==i.length)throw new Error("Incorrect length");return r}static decodeFirst(t){const r=Ei.inspectBytes(t),i=r.size-r.multihashSize,s=Xv(t.subarray(i,i+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const c=s.subarray(r.multihashSize-r.digestSize),o=new t1(r.multihashCode,r.digestSize,c,s);return[0===r.version?Ei.createV0(o):Ei.createV1(r.codec,o),t.subarray(r.size)]}static inspectBytes(t){let r=0;const i=()=>{const[R,ee]=e1(t.subarray(r));return r+=ee,R};let s=i(),c=dh;if(18===s?(s=0,r=0):c=i(),0!==s&&1!==s)throw new RangeError(`Invalid CID version ${s}`);const o=r,u=i(),A=i(),S=r+A;return{version:s,codec:c,multihashCode:u,digestSize:A,multihashSize:S-o,size:S}}static parse(t,r){const[i,s]=function iP(n,t){switch(n[0]){case"Q":return[Sd.prefix,(t??Sd).decode(`${Sd.prefix}${n}`)];case Sd.prefix:return[Sd.prefix,(t??Sd).decode(n)];case ty.prefix:return[ty.prefix,(t??ty).decode(n)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],t.decode(n)]}}(t,r),c=Ei.decode(s);if(0===c.version&&"Q"!==t[0])throw Error("Version 0 CID string must not include multibase prefix");return n1(c).set(i,t),c}}const dh=112,aP=18;function Q6(n,t,r){const i=iy(n),s=i+iy(t),c=new Uint8Array(s+r.byteLength);return ny(n,c,0),ny(t,c,i),c.set(r,s),c}const cP=Symbol.for("@ipld/js-cid/CID"),dP=new TextDecoder;function i1(n,t){let r=0;for(let i=0;;i+=7){if(i>=64)throw new Error("protobuf: varint overflow");if(t>=n.length)throw new Error("protobuf: unexpected end of data");const s=n[t++];if(r+=i<28?(127&s)<<i:(127&s)*2**i,s<128)break}return[r,t]}function sy(n,t){let r;[r,t]=i1(n,t);const i=t+r;if(r<0||i<0)throw new Error("protobuf: invalid length");if(i>n.length)throw new Error("protobuf: unexpected end of data");return[n.subarray(t,i),i]}function e_(n,t){let r;return[r,t]=i1(n,t),[7&r,r>>3,t]}function uP(n){const t={},r=n.length;let i=0;for(;i<r;){let s,c;if([s,c,i]=e_(n,i),1===c){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==s)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,i]=sy(n,i)}else if(2===c){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==s)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,i]=sy(n,i),t.Name=dP.decode(o)}else{if(3!==c)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${c}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==s)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Tsize`);[t.Tsize,i]=i1(n,i)}}if(i>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}const t_=new TextEncoder,r_=2**32,lP=2**31;function hP(n,t){let r=t.length;if("number"==typeof n.Tsize){if(n.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(n.Tsize))throw new Error("Tsize too large for encoding");r=uh(t,r,n.Tsize)-1,t[r]=24}if("string"==typeof n.Name){const i=t_.encode(n.Name);r-=i.length,t.set(i,r),r=uh(t,r,i.length)-1,t[r]=18}return n.Hash&&(r-=n.Hash.length,t.set(n.Hash,r),r=uh(t,r,n.Hash.length)-1,t[r]=10),t.length-r}function yP(n){let t=0;if(n.Hash){const r=n.Hash.length;t+=1+r+Tf(r)}if("string"==typeof n.Name){const r=t_.encode(n.Name).length;t+=1+r+Tf(r)}return"number"==typeof n.Tsize&&(t+=1+Tf(n.Tsize)),t}function uh(n,t,r){const i=t-=Tf(r);for(;r>=lP;)n[t++]=127&r|128,r/=128;for(;r>=128;)n[t++]=127&r|128,r>>>=7;return n[t]=r,i}function Tf(n){return n%2==0&&n++,Math.floor((function gP(n){let t=0;return n>=r_&&(n=Math.floor(n/r_),t=32),n>=65536&&(n>>>=16,t+=16),n>=256&&(n>>>=8,t+=8),t+vP[n]}(n)+6)/7)}const vP=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],wP=["Data","Links"],bP=["Hash","Name","Tsize"],s1=new TextEncoder;function n_(n,t){if(n===t)return 0;const r=n.Name?s1.encode(n.Name):[],i=t.Name?s1.encode(t.Name):[];let s=r.length,c=i.length;for(let o=0,u=Math.min(s,c);o<u;++o)if(r[o]!==i[o]){s=r[o],c=i[o];break}return s<c?-1:c<s?1:0}function i_(n,t){return!Object.keys(n).some(r=>!t.includes(r))}function s_(n){if("object"==typeof n.asCID){const r=Ei.asCID(n);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if("object"!=typeof n||Array.isArray(n))throw new TypeError("Invalid DAG-PB form");const t={};if(n.Hash){let r=Ei.asCID(n.Hash);try{r||("string"==typeof n.Hash?r=Ei.parse(n.Hash):n.Hash instanceof Uint8Array&&(r=Ei.decode(n.Hash)))}catch(i){throw new TypeError(`Invalid DAG-PB form: ${i.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"==typeof n.Name&&(t.Name=n.Name),"number"==typeof n.Tsize&&(t.Tsize=n.Tsize),t}function Ad(n){if((n instanceof Uint8Array||"string"==typeof n)&&(n={Data:n}),"object"!=typeof n||Array.isArray(n))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==n.Data)if("string"==typeof n.Data)t.Data=s1.encode(n.Data);else{if(!(n.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=n.Data}if(void 0!==n.Links){if(!Array.isArray(n.Links))throw new TypeError("Invalid DAG-PB form");t.Links=n.Links.map(s_),t.Links.sort(n_)}else t.Links=[];return t}function o_(n){if(!n||"object"!=typeof n||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form");if(!i_(n,wP))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==n.Data&&!(n.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(n.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<n.Links.length;t++){const r=n.Links[t];if(!r||"object"!=typeof r||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!i_(r,bP))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==r.Hash||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!=typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize){if("number"!=typeof r.Tsize||r.Tsize%1!=0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&-1===n_(r,n.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function _P(n,t=[]){return Ad({Data:n,Links:t})}function xP(n,t,r){return s_({Hash:r,Name:n,Tsize:t})}const SP="dag-pb",o1=112;function Md(n){o_(n);const t={};return n.Links&&(t.Links=n.Links.map(r=>{const i={};return r.Hash&&(i.Hash=r.Hash.bytes),void 0!==r.Name&&(i.Name=r.Name),void 0!==r.Tsize&&(i.Tsize=r.Tsize),i})),n.Data&&(t.Data=n.Data),function pP(n){const t=function mP(n){let t=0;if(n.Data){const r=n.Data.length;t+=1+r+Tf(r)}if(n.Links)for(const r of n.Links){const i=yP(r);t+=1+i+Tf(i)}return t}(n),r=new Uint8Array(t);let i=t;if(n.Data&&(i-=n.Data.length,r.set(n.Data,i),i=uh(r,i,n.Data.length)-1,r[i]=10),n.Links)for(let s=n.Links.length-1;s>=0;s--){const c=hP(n.Links[s],r.subarray(0,i));i-=c,i=uh(r,i,c)-1,r[i]=18}return r}(t)}function fh(n){const t=function EP(n){return n instanceof ArrayBuffer?new Uint8Array(n,0,n.byteLength):n}(n),r=function fP(n){const t=n.length;let i,c,r=0,s=!1;for(;r<t;){let u,A;if([u,A,r]=e_(n,r),2!==u)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(1===A){if(c)throw new Error("protobuf: (PBNode) duplicate Data section");[c,r]=sy(n,r),i&&(s=!0)}else{if(2!==A)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${A}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let S;i||(i=[]),[S,r]=sy(n,r),i.push(uP(S))}}}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return c&&(o.Data=c),o.Links=i||[],o}(t),i={};return r.Data&&(i.Data=r.Data),r.Links&&(i.Links=r.Links.map(s=>{const c={};try{c.Hash=Ei.decode(s.Hash)}catch{}if(!c.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==s.Name&&(c.Name=s.Name),void 0!==s.Tsize&&(c.Tsize=s.Tsize),c})),i}var a_=I(3087);const AP=Math.pow(2,7),MP=Math.pow(2,14),TP=Math.pow(2,21),a1=Math.pow(2,28),c1=Math.pow(2,35),d1=Math.pow(2,42),u1=Math.pow(2,49),jn=128,Vs=127;function lh(n){if(n<AP)return 1;if(n<MP)return 2;if(n<TP)return 3;if(n<a1)return 4;if(n<c1)return 5;if(n<d1)return 6;if(n<u1)return 7;if(null!=Number.MAX_SAFE_INTEGER&&n>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function c_(n,t,r=0){switch(lh(n)){case 8:t[r++]=255&n|jn,n/=128;case 7:t[r++]=255&n|jn,n/=128;case 6:t[r++]=255&n|jn,n/=128;case 5:t[r++]=255&n|jn,n/=128;case 4:t[r++]=255&n|jn,n>>>=7;case 3:t[r++]=255&n|jn,n>>>=7;case 2:t[r++]=255&n|jn,n>>>=7;case 1:t[r++]=255&n,n>>>=7;break;default:throw new Error("unreachable")}return t}const hh=new Float32Array([-0]),Hs=new Uint8Array(hh.buffer);function BP(n,t,r){hh[0]=n,t[r]=Hs[0],t[r+1]=Hs[1],t[r+2]=Hs[2],t[r+3]=Hs[3]}const ph=new Float64Array([-0]),In=new Uint8Array(ph.buffer);function kP(n,t,r){ph[0]=n,t[r]=In[0],t[r+1]=In[1],t[r+2]=In[2],t[r+3]=In[3],t[r+4]=In[4],t[r+5]=In[5],t[r+6]=In[6],t[r+7]=In[7]}const CP=BigInt(Number.MAX_SAFE_INTEGER),DP=BigInt(Number.MIN_SAFE_INTEGER);class Ws{lo;hi;constructor(t,r){this.lo=0|t,this.hi=0|r}toNumber(t=!1){if(!t&&this.hi>>>31>0){const r=1+~this.lo>>>0;let i=~this.hi>>>0;return 0===r&&(i=i+1>>>0),-(r+4294967296*i)}return this.lo+4294967296*this.hi}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=1+~this.lo>>>0;let i=~this.hi>>>0;return 0===r&&(i=i+1>>>0),-(BigInt(r)+(BigInt(i)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){const t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){const t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){const t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===r?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}static fromBigInt(t){if(0n===t)return Bu;if(t<CP&&t>DP)return this.fromNumber(Number(t));const r=t<0n;r&&(t=-t);let i=t>>32n,s=t-(i<<32n);return r&&(i=0n|~i,s=0n|~s,++s>u_&&(s=0n,++i>u_&&(i=0n))),new Ws(Number(s),Number(i))}static fromNumber(t){if(0===t)return Bu;const r=t<0;r&&(t=-t);let i=t>>>0,s=(t-i)/4294967296>>>0;return r&&(s=~s>>>0,i=~i>>>0,++i>4294967295&&(i=0,++s>4294967295&&(s=0))),new Ws(i,s)}static from(t){return"number"==typeof t?Ws.fromNumber(t):"bigint"==typeof t?Ws.fromBigInt(t):"string"==typeof t?Ws.fromBigInt(BigInt(t)):null!=t.low||null!=t.high?new Ws(t.low>>>0,t.high>>>0):Bu}}const Bu=new Ws(0,0);Bu.toBigInt=function(){return 0n},Bu.zzEncode=Bu.zzDecode=function(){return this},Bu.length=function(){return 1};const u_=4294967296n;function f_(n,t,r){const i=r;let s,c;for(let o=0;o<n.length;++o)s=n.charCodeAt(o),s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=63&s|128):55296==(64512&s)&&56320==(64512&(c=n.charCodeAt(o+1)))?(s=65536+((1023&s)<<10)+(1023&c),++o,t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=63&s|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=63&s|128);return r-i}function Sa(n,t){return RangeError(`index out of range: ${n.pos} + ${t??1} > ${n.len}`)}function oy(n,t){return(n[t-4]|n[t-3]<<8|n[t-2]<<16|n[t-1]<<24)>>>0}class jP{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Sa(this,10);return t}int32(){return 0|this.uint32()}sint32(){const t=this.uint32();return t>>>1^-(1&t)}bool(){return 0!==this.uint32()}fixed32(){if(this.pos+4>this.len)throw Sa(this,4);return oy(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Sa(this,4);return 0|oy(this.buf,this.pos+=4)}float(){if(this.pos+4>this.len)throw Sa(this,4);const t=function RP(n,t){return Hs[0]=n[t],Hs[1]=n[t+1],Hs[2]=n[t+2],Hs[3]=n[t+3],hh[0]}(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw Sa(this,4);const t=function OP(n,t){return In[0]=n[t],In[1]=n[t+1],In[2]=n[t+2],In[3]=n[t+3],In[4]=n[t+4],In[5]=n[t+5],In[6]=n[t+6],In[7]=n[t+7],ph[0]}(this.buf,this.pos);return this.pos+=8,t}bytes(){const t=this.uint32(),r=this.pos,i=this.pos+t;if(i>this.len)throw Sa(this,t);return this.pos+=t,r===i?new Uint8Array(0):this.buf.subarray(r,i)}string(){const t=this.bytes();return function $P(n,t,r){if(r-t<1)return"";let s;const c=[];let u,o=0;for(;t<r;)u=n[t++],u<128?c[o++]=u:u>191&&u<224?c[o++]=(31&u)<<6|63&n[t++]:u>239&&u<365?(u=((7&u)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536,c[o++]=55296+(u>>10),c[o++]=56320+(1023&u)):c[o++]=(15&u)<<12|(63&n[t++])<<6|63&n[t++],o>8191&&((s??(s=[])).push(String.fromCharCode.apply(String,c)),o=0);return null!=s?(o>0&&s.push(String.fromCharCode.apply(String,c.slice(0,o))),s.join("")):String.fromCharCode.apply(String,c.slice(0,o))}(t,0,t.length)}skip(t){if("number"==typeof t){if(this.pos+t>this.len)throw Sa(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw Sa(this)}while(128&this.buf[this.pos++]);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){const t=new Ws(0,0);let r=0;if(!(this.len-this.pos>4)){for(;r<3;++r){if(this.pos>=this.len)throw Sa(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*r)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*r)>>>0,t}for(;r<4;++r)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*r)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(r=0,this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*r+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw Sa(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*r+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Sa(this,8);const t=oy(this.buf,this.pos+=4),r=oy(this.buf,this.pos+=4);return new Ws(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const t=function d_(n,t){let r=n[t],i=0;if(i+=r&Vs,r<jn||(r=n[t+1],i+=(r&Vs)<<7,r<jn)||(r=n[t+2],i+=(r&Vs)<<14,r<jn)||(r=n[t+3],i+=(r&Vs)<<21,r<jn)||(r=n[t+4],i+=(r&Vs)*a1,r<jn)||(r=n[t+5],i+=(r&Vs)*c1,r<jn)||(r=n[t+6],i+=(r&Vs)*d1,r<jn)||(r=n[t+7],i+=(r&Vs)*u1,r<jn))return i;throw new RangeError("Could not decode varint")}(this.buf,this.pos);return this.pos+=lh(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function f1(n,t,r){const i=function UP(n){return new jP(n instanceof Uint8Array?n:n.subarray())}(n);return t.decode(i,void 0,r)}function ay(n=0){return new Uint8Array(n)}function If(n){if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")}new Uint8Array(0);const GP=function VP(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var c=n.charAt(s),o=c.charCodeAt(0);if(255!==r[o])throw new TypeError(c+" is ambiguous");r[o]=s}var u=n.length,A=n.charAt(0),S=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function ee(te){if("string"!=typeof te)throw new TypeError("Expected String");if(0===te.length)return new Uint8Array;var fe=0;if(" "!==te[fe]){for(var we=0,Pe=0;te[fe]===A;)we++,fe++;for(var Te=(te.length-fe)*S+1>>>0,Ae=new Uint8Array(Te);te[fe];){var Ce=r[te.charCodeAt(fe)];if(255===Ce)return;for(var je=0,Le=Te-1;(0!==Ce||je<Pe)&&-1!==Le;Le--,je++)Ae[Le]=(Ce+=u*Ae[Le]>>>0)%256>>>0,Ce=Ce/256>>>0;if(0!==Ce)throw new Error("Non-zero carry");Pe=je,fe++}if(" "!==te[fe]){for(var ze=Te-Pe;ze!==Te&&0===Ae[ze];)ze++;for(var $e=new Uint8Array(we+(Te-ze)),Ye=we;ze!==Te;)$e[Ye++]=Ae[ze++];return $e}}}return{encode:function R(te){if(te instanceof Uint8Array||(ArrayBuffer.isView(te)?te=new Uint8Array(te.buffer,te.byteOffset,te.byteLength):Array.isArray(te)&&(te=Uint8Array.from(te))),!(te instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===te.length)return"";for(var fe=0,we=0,Pe=0,Te=te.length;Pe!==Te&&0===te[Pe];)Pe++,fe++;for(var Ae=(Te-Pe)*y+1>>>0,Ce=new Uint8Array(Ae);Pe!==Te;){for(var je=te[Pe],Le=0,ze=Ae-1;(0!==je||Le<we)&&-1!==ze;ze--,Le++)Ce[ze]=(je+=256*Ce[ze]>>>0)%u>>>0,je=je/u>>>0;if(0!==je)throw new Error("Non-zero carry");we=Le,Pe++}for(var $e=Ae-we;$e!==Ae&&0===Ce[$e];)$e++;for(var Ye=A.repeat(fe);$e<Ae;++$e)Ye+=n.charAt(Ce[$e]);return Ye},decodeUnsafe:ee,decode:function ae(te){var fe=ee(te);if(fe)return fe;throw new Error(`Non-${t} character`)}}};class qP{name;prefix;baseEncode;constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class ZP{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return l_(this,t)}}class JP{decoders;constructor(t){this.decoders=t}or(t){return l_(this,t)}decode(t){const i=this.decoders[t[0]];if(null!=i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function l_(n,t){return new JP({...n.decoders??{[n.prefix]:n},...t.decoders??{[t.prefix]:t}})}class YP{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,i,s){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new qP(t,r,i),this.decoder=new ZP(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function cy({name:n,prefix:t,encode:r,decode:i}){return new YP(n,t,r,i)}function yh({name:n,prefix:t,alphabet:r}){const{encode:i,decode:s}=GP(r,n);return cy({prefix:t,name:n,encode:i,decode:c=>If(s(c))})}function ms({name:n,prefix:t,bitsPerChar:r,alphabet:i}){return cy({prefix:t,name:n,encode:s=>function QP(n,t,r){const i="="===t[t.length-1],s=(1<<r)-1;let c="",o=0,u=0;for(let A=0;A<n.length;++A)for(u=u<<8|n[A],o+=8;o>r;)o-=r,c+=t[s&u>>o];if(0!==o&&(c+=t[s&u<<r-o]),i)for(;c.length*r&7;)c+="=";return c}(s,i,r),decode:s=>function XP(n,t,r,i){const s={};for(let y=0;y<t.length;++y)s[t[y]]=y;let c=n.length;for(;"="===n[c-1];)--c;const o=new Uint8Array(c*r/8|0);let u=0,A=0,S=0;for(let y=0;y<c;++y){const R=s[n[y]];if(void 0===R)throw new SyntaxError(`Non-${i} character`);A=A<<r|R,u+=r,u>=8&&(u-=8,o[S++]=255&A>>u)}if(u>=r||255&A<<8-u)throw new SyntaxError("Unexpected end of data");return o}(s,i,r,n)})}const eB=yh({prefix:"9",name:"base10",alphabet:"0123456789"}),tB=ms({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rB=ms({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nB=ms({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),h_=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),iB=h_.reduce((n,t,r)=>(n[r]=t,n),[]),sB=h_.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]),cB=cy({prefix:"\u{1f680}",name:"base256emoji",encode:function oB(n){return n.reduce((t,r)=>t+iB[r],"")},decode:function aB(n){const t=[];for(const r of n){const i=sB[r.codePointAt(0)];if(void 0===i)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}}),mh=ms({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dB=ms({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),uB=ms({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fB=ms({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lB=ms({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hB=ms({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pB=ms({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yB=ms({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),mB=ms({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),gB=yh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vB=yh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Oc=yh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),wB=yh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),bB=ms({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_B=ms({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xB=ms({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),EB=ms({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),SB=ms({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),AB=cy({prefix:"\0",name:"identity",encode:n=>function zP(n){return(new TextDecoder).decode(n)}(n),decode:n=>function KP(n){return(new TextEncoder).encode(n)}(n)}),MB=new TextEncoder,TB=new TextDecoder,IB="json",PB=512;function BB(n){return MB.encode(JSON.stringify(n))}function RB(n){return JSON.parse(TB.decode(n))}const kB="raw",OB=85;function CB(n){return If(n)}function DB(n){return If(n)}var p_=128,jB=-128,UB=Math.pow(2,31),FB=128,m_=127,KB=Math.pow(2,7),zB=Math.pow(2,14),VB=Math.pow(2,21),HB=Math.pow(2,28),WB=Math.pow(2,35),GB=Math.pow(2,42),qB=Math.pow(2,49),ZB=Math.pow(2,56),JB=Math.pow(2,63),XB={encode:function y_(n,t,r){t=t||[];for(var i=r=r||0;n>=UB;)t[r++]=255&n|p_,n/=128;for(;n&jB;)t[r++]=255&n|p_,n>>>=7;return t[r]=0|n,y_.bytes=r-i+1,t},decode:function l1(n,i){var o,r=0,s=0,c=i=i||0,u=n.length;do{if(c>=u)throw l1.bytes=0,new RangeError("Could not decode varint");o=n[c++],r+=s<28?(o&m_)<<s:(o&m_)*Math.pow(2,s),s+=7}while(o>=FB);return l1.bytes=c-i,r},encodingLength:function(n){return n<KB?1:n<zB?2:n<VB?3:n<HB?4:n<WB?5:n<GB?6:n<qB?7:n<ZB?8:n<JB?9:10}};const dy=XB;function uy(n,t,r=0){return dy.encode(n,t,r),t}function fy(n){return dy.encodingLength(n)}function ly(n,t){const r=t.byteLength,i=fy(n),s=i+fy(r),c=new Uint8Array(s+r);return uy(n,c,0),uy(r,c,i),c.set(t,s),new p1(n,r,t,c)}class p1{code;size;digest;bytes;constructor(t,r,i,s){this.code=t,this.size=r,this.digest=i,this.bytes=s}}const v_=If,iR={code:0,name:"identity",encode:v_,digest:function nR(n){return ly(0,v_(n))}};function w_({name:n,code:t,encode:r}){return new sR(n,t,r)}class sR{name;code;encode;constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?ly(this.code,r):r.then(i=>ly(this.code,i))}throw Error("Unknown type, must be binary type")}}function b_(n){return function(){var t=(0,it.A)(function*(r){return new Uint8Array(yield crypto.subtle.digest(n,r))});return function(r){return t.apply(this,arguments)}}()}const oR=w_({name:"sha2-256",code:18,encode:b_("SHA-256")}),aR=w_({name:"sha2-512",code:19,encode:b_("SHA-512")});Symbol,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const E_={...a,...Q,...E,...J,...X,...ne,...me,...pe,...Ie,...oe};function S_(n,t,r,i){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:i}}}const A_=S_("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>(new TextEncoder).encode(n.substring(1))),g1=S_("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{const t=ay((n=n.substring(1)).length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),hR={utf8:A_,"utf-8":A_,hex:E_.base16,latin1:g1,ascii:g1,binary:g1,...E_};class vh{fn;len;next;val;constructor(t,r,i){this.fn=t,this.len=r,this.next=void 0,this.val=i}}function v1(){}class mR{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}}const gR=function yR(n){const t=n??8192,r=t>>>1;let i,s=t;return function(o){if(o<1||o>r)return ay(o);s+o>t&&(i=ay(t),s=0);const u=i.subarray(s,s+=o);return 7&s&&(s=1+(7|s)),u}}();class w1{len;head;tail;states;constructor(){this.len=0,this.head=new vh(v1,0,0),this.tail=this.head,this.states=null}_push(t,r,i){return this.tail=this.tail.next=new vh(t,r,i),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new bR((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(hy,10,Ws.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){const r=Ws.fromBigInt(t);return this._push(hy,r.length(),r)}uint64Number(t){return this._push(c_,lh(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){const r=Ws.fromBigInt(t).zzEncode();return this._push(hy,r.length(),r)}sint64Number(t){const r=Ws.fromNumber(t).zzEncode();return this._push(hy,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(b1,1,t?1:0)}fixed32(t){return this._push(wh,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){const r=Ws.fromBigInt(t);return this._push(wh,4,r.lo)._push(wh,4,r.hi)}fixed64Number(t){const r=Ws.fromNumber(t);return this._push(wh,4,r.lo)._push(wh,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(BP,4,t)}double(t){return this._push(kP,8,t)}bytes(t){const r=t.length>>>0;return 0===r?this._push(b1,1,0):this.uint32(r)._push(_R,r,t)}string(t){const r=function NP(n){let t=0,r=0;for(let i=0;i<n.length;++i)r=n.charCodeAt(i),r<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&n.charCodeAt(i+1))?(++i,t+=4):t+=3;return t}(t);return 0!==r?this.uint32(r)._push(f_,r,t):this._push(b1,1,0)}fork(){return this.states=new mR(this),this.head=this.tail=new vh(v1,0,0),this.len=0,this}reset(){return null!=this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new vh(v1,0,0),this.len=0),this}ldelim(){const t=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),0!==i&&(this.tail.next=t.next,this.tail=r,this.len+=i),this}finish(){let t=this.head.next;const r=function vR(n){return null!=globalThis.Buffer?ay(n):gR(n)}(this.len);let i=0;for(;null!=t;)t.fn(t.val,r,i),i+=t.len,t=t.next;return r}}function b1(n,t,r){t[r]=255&n}function wR(n,t,r){for(;n>127;)t[r++]=127&n|128,n>>>=7;t[r]=n}class bR extends vh{next;constructor(t,r){super(wR,t,r),this.next=void 0}}function hy(n,t,r){for(;0!==n.hi;)t[r++]=127&n.lo|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)t[r++]=127&n.lo|128,n.lo=n.lo>>>7;t[r++]=n.lo}function wh(n,t,r){t[r]=255&n,t[r+1]=n>>>8&255,t[r+2]=n>>>16&255,t[r+3]=n>>>24}function _R(n,t,r){t.set(n,r)}function xR(n,t,r){t.set(n,r)}function ER(n,t,r){n.length<40?f_(n,t,r):null!=t.utf8Write?t.utf8Write(n,r):t.set(function pR(n,t="utf8"){const r=hR[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${n}`)}(n),r)}function _1(n,t){const r=function SR(){return new w1}();return t.encode(n,r,{lengthDelimited:!1}),r.finish()}null!=globalThis.Buffer&&(w1.prototype.bytes=function(n){const t=n.length>>>0;return this.uint32(t),t>0&&this._push(xR,t,n),this},w1.prototype.string=function(n){const t=globalThis.Buffer.byteLength(n);return this.uint32(t),t>0&&this._push(ER,t,n),this});var Ya,py,T_,x1=function(n){return n[n.VARINT=0]="VARINT",n[n.BIT64=1]="BIT64",n[n.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",n[n.START_GROUP=3]="START_GROUP",n[n.END_GROUP=4]="END_GROUP",n[n.BIT32=5]="BIT32",n}(x1||{});function M_(n,t,r,i){return{name:n,type:t,encode:r,decode:i}}function E1(n,t){return M_("message",x1.LENGTH_DELIMITED,n,t)}Error,function(n){let t;var s;let r,i;(s=t=n.DataType||(n.DataType={})).Raw="Raw",s.Directory="Directory",s.File="File",s.Metadata="Metadata",s.Symlink="Symlink",s.HAMTShard="HAMTShard",function(s){s[s.Raw=0]="Raw",s[s.Directory=1]="Directory",s[s.File=2]="File",s[s.Metadata=3]="Metadata",s[s.Symlink=4]="Symlink",s[s.HAMTShard=5]="HAMTShard"}(r||(r={})),function(s){s.codec=()=>function AR(n){function t(s){if(null==n[s.toString()])throw new Error("Invalid enum value");return n[s]}return M_("enum",x1.VARINT,function(c,o){const u=t(c);o.int32(u)},function(c){return t(c.int32())})}(r)}(t=n.DataType||(n.DataType={})),n.codec=()=>(null==i&&(i=E1((s,c,o={})=>{if(!1!==o.lengthDelimited&&c.fork(),null!=s.Type&&(c.uint32(8),n.DataType.codec().encode(s.Type,c)),null!=s.Data&&(c.uint32(18),c.bytes(s.Data)),null!=s.filesize&&(c.uint32(24),c.uint64(s.filesize)),null!=s.blocksizes)for(const u of s.blocksizes)c.uint32(32),c.uint64(u);null!=s.hashType&&(c.uint32(40),c.uint64(s.hashType)),null!=s.fanout&&(c.uint32(48),c.uint64(s.fanout)),null!=s.mode&&(c.uint32(56),c.uint32(s.mode)),null!=s.mtime&&(c.uint32(66),py.codec().encode(s.mtime,c)),!1!==o.lengthDelimited&&c.ldelim()},(s,c)=>{const o={blocksizes:[]},u=null==c?s.len:s.pos+c;for(;s.pos<u;){const A=s.uint32();switch(A>>>3){case 1:o.Type=n.DataType.codec().decode(s);break;case 2:o.Data=s.bytes();break;case 3:o.filesize=s.uint64();break;case 4:o.blocksizes.push(s.uint64());break;case 5:o.hashType=s.uint64();break;case 6:o.fanout=s.uint64();break;case 7:o.mode=s.uint32();break;case 8:o.mtime=py.codec().decode(s,s.uint32());break;default:s.skipType(7&A)}}return o})),i),n.encode=s=>_1(s,n.codec()),n.decode=s=>f1(s,n.codec())}(Ya||(Ya={})),function(n){let t;n.codec=()=>(null==t&&(t=E1((r,i,s={})=>{!1!==s.lengthDelimited&&i.fork(),null!=r.Seconds&&(i.uint32(8),i.int64(r.Seconds)),null!=r.FractionalNanoseconds&&(i.uint32(21),i.fixed32(r.FractionalNanoseconds)),!1!==s.lengthDelimited&&i.ldelim()},(r,i)=>{const s={},c=null==i?r.len:r.pos+i;for(;r.pos<c;){const o=r.uint32();switch(o>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(7&o)}}return s})),t),n.encode=r=>_1(r,n.codec()),n.decode=r=>f1(r,n.codec())}(py||(py={})),function(n){let t;n.codec=()=>(null==t&&(t=E1((r,i,s={})=>{!1!==s.lengthDelimited&&i.fork(),null!=r.MimeType&&(i.uint32(10),i.string(r.MimeType)),!1!==s.lengthDelimited&&i.ldelim()},(r,i)=>{const s={},c=null==i?r.len:r.pos+i;for(;r.pos<c;){const o=r.uint32();o>>>3==1?s.MimeType=r.string():r.skipType(7&o)}return s})),t),n.encode=r=>_1(r,n.codec()),n.decode=r=>f1(r,n.codec())}(T_||(T_={}));const I_={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},MR=["directory","hamt-sharded-directory"],P_=parseInt("0644",8),B_=parseInt("0755",8);class Aa{static unmarshal(t){const r=Ya.decode(t),i=new Aa({type:I_[null!=r.Type?r.Type.toString():"File"],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:null!=r.mtime?{secs:r.mtime.Seconds??0n,nsecs:r.mtime.FractionalNanoseconds}:void 0,fanout:r.fanout});return i._originalMode=r.mode??0,i}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(t={type:"file"}){const{type:r,data:i,blockSizes:s,hashType:c,fanout:o,mtime:u,mode:A}=t;if(null!=r&&!Object.values(I_).includes(r))throw a_(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r??"file",this.data=i,this.hashType=c,this.fanout=o,this.blockSizes=s??[],this._originalMode=0,this.mode=A,this.mtime=u}set mode(t){this._mode=null==t?this.isDirectory()?B_:P_:4095&t}get mode(){return this._mode}isDirectory(){return MR.includes(this.type)}addBlockSize(t){this.blockSizes.push(t)}removeBlockSize(t){this.blockSizes.splice(t,1)}fileSize(){if(this.isDirectory())return 0n;let t=0n;return this.blockSizes.forEach(r=>{t+=r}),null!=this.data&&(t+=BigInt(this.data.length)),t}marshal(){let t;switch(this.type){case"raw":t=Ya.DataType.Raw;break;case"directory":t=Ya.DataType.Directory;break;case"file":t=Ya.DataType.File;break;case"metadata":t=Ya.DataType.Metadata;break;case"symlink":t=Ya.DataType.Symlink;break;case"hamt-sharded-directory":t=Ya.DataType.HAMTShard;break;default:throw a_(new Error(`Type: ${t} is not valid`),"ERR_INVALID_TYPE")}let i,s,r=this.data;return(null==this.data||0===this.data.length)&&(r=void 0),null!=this.mode&&(i=4294963200&this._originalMode|(this.mode??0),i===P_&&!this.isDirectory()&&(i=void 0),i===B_&&this.isDirectory()&&(i=void 0)),null!=this.mtime&&(s={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Ya.encode({Type:t,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:i,mtime:s})}}const TR="raw",bh=85,IR=n=>Be(n),PR=n=>Be(n);class Yo extends Event{constructor(t,r){super(t),this.detail=r}}const Pf=function(){var n=(0,it.A)(function*(t,r,i){null==i.codec&&(i.codec=K);const s=yield Va.digest(t),c=on.create(i.cidVersion,i.codec.code,s);return yield r.put(c,t,i),c});return function(r,i,s){return n.apply(this,arguments)}}();function BR(n){return function(){var t=An(function*(i,s){let c=0n;var A,o=!1,u=!1;try{for(var y,S=ln(i.content);o=!(y=yield lr(S.next())).done;o=!1){let R=y.value;yield(0,it.A)(function*(){let ee;const ae={codec:K,cidVersion:n.cidVersion,onProgress:n.onProgress};n.rawLeaves?(ae.codec=x,ae.cidVersion=1):(ee=new Aa({type:n.leafType,data:R}),R=Md({Data:ee.marshal(),Links:[]}));const te=yield Pf(R,s,ae);return c+=BigInt(R.byteLength),n.onProgress?.(new Yo("unixfs:importer:progress:file:write",{bytesWritten:c,cid:te,path:i.path})),{cid:te,unixfs:ee,size:BigInt(R.length),block:R}})}}catch(R){u=!0,A=R}finally{try{o&&null!=S.return&&(yield lr(S.return()))}finally{if(u)throw A}}});return function r(i,s){return t.apply(this,arguments)}}()}function Xa(n){var t={},r=!1;function i(s,c){return r=!0,{done:!1,value:new Zv(c=new Promise(function(o){o(n[s](c))}),1)}}return t[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(s){return r?(r=!1,s):i("next",s)},"function"==typeof n.throw&&(t.throw=function(s){if(r)throw r=!1,s;return i("throw",s)}),"function"==typeof n.return&&(t.return=function(s){return r?(r=!1,s):i("return",s)}),t}const RR=function(){var n=(0,it.A)(function*(t,r,i){const s=new Aa({type:"directory",mtime:t.mtime,mode:t.mode}),c=Md(Ad({Data:s.marshal()}));return{cid:yield Pf(c,r,i),path:t.path,unixfs:s,size:BigInt(c.length),originalPath:t.originalPath,block:c}});return function(r,i,s){return n.apply(this,arguments)}}();function S1(){return S1=An(function*(n,t,r){let s,i=-1;var u,c=!1,o=!1;try{for(var S,A=ln(K6(r.bufferImporter(n,t),r.blockWriteConcurrency));c=!(S=yield lr(A.next())).done;c=!1){const y=S.value;i++,0!==i?(1===i&&null!=s&&(yield{...s,block:void 0,single:void 0},s=void 0),yield{...y,block:void 0}):s={...y,single:!0}}}catch(y){o=!0,u=y}finally{try{c&&null!=A.return&&(yield lr(A.return()))}finally{if(o)throw u}}null!=s&&(yield s)}),S1.apply(this,arguments)}function R_(n){return!0===n.single}const OR=(n,t,r)=>function(){var s=(0,it.A)(function*(c){if(1===c.length&&R_(c[0])&&r.reduceSingleLeafToSelf){const R=c[0];let ee=R.block;return R_(R)&&(void 0!==n.mtime||void 0!==n.mode)&&(R.unixfs=new Aa({type:"file",mtime:n.mtime,mode:n.mode,data:R.block}),ee={Data:R.unixfs.marshal(),Links:[]},R.block=Md(Ad(ee)),R.cid=yield Pf(R.block,t,{...r,cidVersion:r.cidVersion}),R.size=BigInt(R.block.length)),r.onProgress?.(new Yo("unixfs:importer:progress:file:layout",{cid:R.cid,path:R.originalPath})),{cid:R.cid,path:n.path,unixfs:R.unixfs,size:R.size,originalPath:R.originalPath}}const o=new Aa({type:"file",mtime:n.mtime,mode:n.mode}),u=c.filter(R=>R.cid.code===bh&&R.size>0||null!=R.unixfs&&null==R.unixfs.data&&R.unixfs.fileSize()>0n||!!R.unixfs?.data?.length).map(R=>R.cid.code===bh?(o.addBlockSize(R.size),{Name:"",Tsize:Number(R.size),Hash:R.cid}):(o.addBlockSize(null==R.unixfs||null==R.unixfs.data?R.unixfs?.fileSize()??0n:BigInt(R.unixfs.data.length)),{Name:"",Tsize:Number(R.size),Hash:R.cid})),A={Data:o.marshal(),Links:u},S=Md(Ad(A)),y=yield Pf(S,t,r);return r.onProgress?.(new Yo("unixfs:importer:progress:file:layout",{cid:y,path:n.originalPath})),{cid:y,path:n.path,unixfs:o,size:BigInt(S.length+A.Links.reduce((R,ee)=>R+(ee.Tsize??0),0)),originalPath:n.originalPath,block:S}});return function(o){return s.apply(this,arguments)}}(),CR=function(){var n=(0,it.A)(function*(t,r,i){return i.layout(function kR(n,t,r){return S1.apply(this,arguments)}(t,r,i),OR(t,r,i))});return function(r,i,s){return n.apply(this,arguments)}}();function $R(n){try{if(n instanceof Uint8Array)return An(function*(){yield n})();if(function DR(n){return Symbol.iterator in n}(n))return An(function*(){yield*Xa(ln(n))})();if(function NR(n){return Symbol.asyncIterator in n}(n))return n}catch{throw Qp(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw Qp(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function UR(n){return null!=n.content}const LR=()=>function(){var n=An(function*(r){var c,i=!1,s=!1;try{for(var u,o=ln(r);i=!(u=yield lr(o.next())).done;i=!1){const A=u.value;if(void 0===A.length)throw Qp(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"==typeof A||A instanceof String)yield W3(A.toString());else if(Array.isArray(A))yield Uint8Array.from(A);else{if(!(A instanceof Uint8Array))throw Qp(new Error("Content was invalid"),"ERR_INVALID_CONTENT");yield A}}}catch(A){s=!0,c=A}finally{try{i&&null!=o.return&&(yield lr(o.return()))}finally{if(s)throw c}}});return function t(r){return n.apply(this,arguments)}}(),FR=174;function KR(n){const t=n?.maxChildrenPerNode??FR;return function(){var r=(0,it.A)(function*(s,c){const o=[];var S,u=!1,A=!1;try{for(var R,y=ln(F6(s,t));u=!(R=yield y.next()).done;u=!1){const ee=R.value;o.push(yield c(ee))}}catch(ee){A=!0,S=ee}finally{try{u&&null!=y.return&&(yield y.return())}finally{if(A)throw S}}return o.length>1?i(o,c):o[0]});function i(s,c){return r.apply(this,arguments)}return i}()}class _h{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(t,r){this.options=r??{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime}}const A1=on.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),M1=on.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");class T1 extends _h{_children;constructor(t,r){super(t,r),this._children=new Map}put(t,r){var i=this;return(0,it.A)(function*(){i.cid=void 0,i.size=void 0,i.nodeSize=void 0,i._children.set(t,r)})()}get(t){var r=this;return(0,it.A)(function*(){return Promise.resolve(r._children.get(t))})()}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}eachChildSeries(){var t=this;return An(function*(){for(const[r,i]of t._children.entries())yield{key:r,child:i}})()}estimateNodeSize(){if(void 0!==this.nodeSize)return this.nodeSize;this.nodeSize=0;for(const[t,r]of this._children.entries())null!=r.size&&null!=r.cid&&(this.nodeSize+=t.length+(1===this.options.cidVersion?M1.bytes.byteLength:A1.bytes.byteLength));return this.nodeSize}flush(t){var r=this;return An(function*(){const i=[];for(const[te,fe]of r._children.entries()){let we=fe;if(fe instanceof _h){var o,s=!1,c=!1;try{for(var A,u=ln(fe.flush(t));s=!(A=yield lr(u.next())).done;s=!1){const Pe=A.value;we=Pe,yield Pe}}catch(Pe){c=!0,o=Pe}finally{try{s&&null!=u.return&&(yield lr(u.return()))}finally{if(c)throw o}}}null!=we.size&&null!=we.cid&&i.push({Name:te,Tsize:Number(we.size),Hash:we.cid})}const S=new Aa({type:"directory",mtime:r.mtime,mode:r.mode}),y={Data:S.marshal(),Links:i},R=Md(Ad(y)),ee=yield lr(Pf(R,t,r.options)),ae=R.length+y.Links.reduce((te,fe)=>te+(null==fe.Tsize?0:fe.Tsize),0);r.cid=ee,r.size=ae,yield{cid:ee,unixfs:S,path:r.path,size:BigInt(ae)}})()}}const WR=new Uint8Array(0);function O_(n){const t=n.match(/../g);return null!=t?new Uint8Array(t.map(r=>parseInt(r,16))):WR}const YR=function qR(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var c=n.charAt(s),o=c.charCodeAt(0);if(255!==r[o])throw new TypeError(c+" is ambiguous");r[o]=s}var u=n.length,A=n.charAt(0),S=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function ee(te){if("string"!=typeof te)throw new TypeError("Expected String");if(0===te.length)return new Uint8Array;var fe=0;if(" "!==te[fe]){for(var we=0,Pe=0;te[fe]===A;)we++,fe++;for(var Te=(te.length-fe)*S+1>>>0,Ae=new Uint8Array(Te);te[fe];){var Ce=r[te.charCodeAt(fe)];if(255===Ce)return;for(var je=0,Le=Te-1;(0!==Ce||je<Pe)&&-1!==Le;Le--,je++)Ae[Le]=(Ce+=u*Ae[Le]>>>0)%256>>>0,Ce=Ce/256>>>0;if(0!==Ce)throw new Error("Non-zero carry");Pe=je,fe++}if(" "!==te[fe]){for(var ze=Te-Pe;ze!==Te&&0===Ae[ze];)ze++;for(var $e=new Uint8Array(we+(Te-ze)),Ye=we;ze!==Te;)$e[Ye++]=Ae[ze++];return $e}}}return{encode:function R(te){if(te instanceof Uint8Array||(ArrayBuffer.isView(te)?te=new Uint8Array(te.buffer,te.byteOffset,te.byteLength):Array.isArray(te)&&(te=Uint8Array.from(te))),!(te instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===te.length)return"";for(var fe=0,we=0,Pe=0,Te=te.length;Pe!==Te&&0===te[Pe];)Pe++,fe++;for(var Ae=(Te-Pe)*y+1>>>0,Ce=new Uint8Array(Ae);Pe!==Te;){for(var je=te[Pe],Le=0,ze=Ae-1;(0!==je||Le<we)&&-1!==ze;ze--,Le++)Ce[ze]=(je+=256*Ce[ze]>>>0)%u>>>0,je=je/u>>>0;if(0!==je)throw new Error("Non-zero carry");we=Le,Pe++}for(var $e=Ae-we;$e!==Ae&&0===Ce[$e];)$e++;for(var Ye=A.repeat(fe);$e<Ae;++$e)Ye+=n.charAt(Ce[$e]);return Ye},decodeUnsafe:ee,decode:function ae(te){var fe=ee(te);if(fe)return fe;throw new Error(`Non-${t} character`)}}};class XR{name;prefix;baseEncode;constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class QR{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return C_(this,t)}}class ek{decoders;constructor(t){this.decoders=t}or(t){return C_(this,t)}decode(t){const i=this.decoders[t[0]];if(null!=i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function C_(n,t){return new ek({...n.decoders??{[n.prefix]:n},...t.decoders??{[t.prefix]:t}})}class tk{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,i,s){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new XR(t,r,i),this.decoder=new QR(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function D_({name:n,prefix:t,encode:r,decode:i}){return new tk(n,t,r,i)}function N_({name:n,prefix:t,alphabet:r}){const{encode:i,decode:s}=YR(r,n);return D_({prefix:t,name:n,encode:i,decode:c=>function I1(n){if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")}(s(c))})}function Cc({name:n,prefix:t,bitsPerChar:r,alphabet:i}){return D_({prefix:t,name:n,encode:s=>function nk(n,t,r){const i="="===t[t.length-1],s=(1<<r)-1;let c="",o=0,u=0;for(let A=0;A<n.length;++A)for(u=u<<8|n[A],o+=8;o>r;)o-=r,c+=t[s&u>>o];if(0!==o&&(c+=t[s&u<<r-o]),i)for(;c.length*r&7;)c+="=";return c}(s,i,r),decode:s=>function rk(n,t,r,i){const s={};for(let y=0;y<t.length;++y)s[t[y]]=y;let c=n.length;for(;"="===n[c-1];)--c;const o=new Uint8Array(c*r/8|0);let u=0,A=0,S=0;for(let y=0;y<c;++y){const R=s[n[y]];if(void 0===R)throw new SyntaxError(`Non-${i} character`);A=A<<r|R,u+=r,u>=8&&(u-=8,o[S++]=255&A>>u)}if(u>=r||255&A<<8-u)throw new SyntaxError("Unexpected end of data");return o}(s,i,r,n)})}Cc({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Cc({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Cc({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Cc({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Cc({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Cc({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cc({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Cc({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Cc({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),N_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),N_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $_=128,ok=-128,ak=Math.pow(2,31),dk=128,U_=127,uk=Math.pow(2,7),fk=Math.pow(2,14),lk=Math.pow(2,21),hk=Math.pow(2,28),pk=Math.pow(2,35),yk=Math.pow(2,42),mk=Math.pow(2,49),gk=Math.pow(2,56),vk=Math.pow(2,63),bk={encode:function j_(n,t,r){t=t||[];for(var i=r=r||0;n>=ak;)t[r++]=255&n|$_,n/=128;for(;n&ok;)t[r++]=255&n|$_,n>>>=7;return t[r]=0|n,j_.bytes=r-i+1,t},decode:function P1(n,i){var o,r=0,s=0,c=i=i||0,u=n.length;do{if(c>=u)throw P1.bytes=0,new RangeError("Could not decode varint");o=n[c++],r+=s<28?(o&U_)<<s:(o&U_)*Math.pow(2,s),s+=7}while(o>=dk);return P1.bytes=c-i,r},encodingLength:function(n){return n<uk?1:n<fk?2:n<lk?3:n<hk?4:n<pk?5:n<yk?6:n<mk?7:n<gk?8:n<vk?9:10}};const my=bk;function gy(n,t,r=0){return my.encode(n,t,r),t}function vy(n){return my.encodingLength(n)}function R1(n,t){const r=t.byteLength,i=vy(n),s=i+vy(r),c=new Uint8Array(s+r);return gy(n,c,0),gy(r,c,i),c.set(t,s),new k1(n,r,t,c)}class k1{code;size;digest;bytes;constructor(t,r,i,s){this.code=t,this.size=r,this.digest=i,this.bytes=s}}function D1({name:n,code:t,encode:r}){return new Pk(n,t,r)}Symbol,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");class Pk{name;code;encode;constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?R1(this.code,r):r.then(i=>R1(this.code,i))}throw Error("Unknown type, must be binary type")}}var N1=I(13026);D1({name:"murmur3-32",code:35,encode:n=>function Bk(n){const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&n,n>>=8;return new Uint8Array(t)}(N1.x86.hash32(n))});const K_=D1({name:"murmur3-128",code:34,encode:n=>O_(N1.x64.hash128(n))});D1({name:"murmur3-x64-64",code:34,encode:n=>O_(N1.x64.hash128(n)).subarray(0,8)});var Rk=I(18876);function Bf(n){if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")}new Uint8Array(0);const Uk=function Nk(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var c=n.charAt(s),o=c.charCodeAt(0);if(255!==r[o])throw new TypeError(c+" is ambiguous");r[o]=s}var u=n.length,A=n.charAt(0),S=Math.log(u)/Math.log(256),y=Math.log(256)/Math.log(u);function ee(te){if("string"!=typeof te)throw new TypeError("Expected String");if(0===te.length)return new Uint8Array;var fe=0;if(" "!==te[fe]){for(var we=0,Pe=0;te[fe]===A;)we++,fe++;for(var Te=(te.length-fe)*S+1>>>0,Ae=new Uint8Array(Te);te[fe];){var Ce=r[te.charCodeAt(fe)];if(255===Ce)return;for(var je=0,Le=Te-1;(0!==Ce||je<Pe)&&-1!==Le;Le--,je++)Ae[Le]=(Ce+=u*Ae[Le]>>>0)%256>>>0,Ce=Ce/256>>>0;if(0!==Ce)throw new Error("Non-zero carry");Pe=je,fe++}if(" "!==te[fe]){for(var ze=Te-Pe;ze!==Te&&0===Ae[ze];)ze++;for(var $e=new Uint8Array(we+(Te-ze)),Ye=we;ze!==Te;)$e[Ye++]=Ae[ze++];return $e}}}return{encode:function R(te){if(te instanceof Uint8Array||(ArrayBuffer.isView(te)?te=new Uint8Array(te.buffer,te.byteOffset,te.byteLength):Array.isArray(te)&&(te=Uint8Array.from(te))),!(te instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===te.length)return"";for(var fe=0,we=0,Pe=0,Te=te.length;Pe!==Te&&0===te[Pe];)Pe++,fe++;for(var Ae=(Te-Pe)*y+1>>>0,Ce=new Uint8Array(Ae);Pe!==Te;){for(var je=te[Pe],Le=0,ze=Ae-1;(0!==je||Le<we)&&-1!==ze;ze--,Le++)Ce[ze]=(je+=256*Ce[ze]>>>0)%u>>>0,je=je/u>>>0;if(0!==je)throw new Error("Non-zero carry");we=Le,Pe++}for(var $e=Ae-we;$e!==Ae&&0===Ce[$e];)$e++;for(var Ye=A.repeat(fe);$e<Ae;++$e)Ye+=n.charAt(Ce[$e]);return Ye},decodeUnsafe:ee,decode:function ae(te){var fe=ee(te);if(fe)return fe;throw new Error(`Non-${t} character`)}}};class Lk{name;prefix;baseEncode;constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Fk{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return z_(this,t)}}class Kk{decoders;constructor(t){this.decoders=t}or(t){return z_(this,t)}decode(t){const i=this.decoders[t[0]];if(null!=i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function z_(n,t){return new Kk({...n.decoders??{[n.prefix]:n},...t.decoders??{[t.prefix]:t}})}class zk{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,i,s){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new Lk(t,r,i),this.decoder=new Fk(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function wy({name:n,prefix:t,encode:r,decode:i}){return new zk(n,t,r,i)}function Eh({name:n,prefix:t,alphabet:r}){const{encode:i,decode:s}=Uk(r,n);return wy({prefix:t,name:n,encode:i,decode:c=>Bf(s(c))})}function ws({name:n,prefix:t,bitsPerChar:r,alphabet:i}){return wy({prefix:t,name:n,encode:s=>function Hk(n,t,r){const i="="===t[t.length-1],s=(1<<r)-1;let c="",o=0,u=0;for(let A=0;A<n.length;++A)for(u=u<<8|n[A],o+=8;o>r;)o-=r,c+=t[s&u>>o];if(0!==o&&(c+=t[s&u<<r-o]),i)for(;c.length*r&7;)c+="=";return c}(s,i,r),decode:s=>function Vk(n,t,r,i){const s={};for(let y=0;y<t.length;++y)s[t[y]]=y;let c=n.length;for(;"="===n[c-1];)--c;const o=new Uint8Array(c*r/8|0);let u=0,A=0,S=0;for(let y=0;y<c;++y){const R=s[n[y]];if(void 0===R)throw new SyntaxError(`Non-${i} character`);A=A<<r|R,u+=r,u>=8&&(u-=8,o[S++]=255&A>>u)}if(u>=r||255&A<<8-u)throw new SyntaxError("Unexpected end of data");return o}(s,i,r,n)})}const Wk=Eh({prefix:"9",name:"base10",alphabet:"0123456789"}),Gk=ws({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qk=ws({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Zk=ws({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),V_=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),Jk=V_.reduce((n,t,r)=>(n[r]=t,n),[]),Yk=V_.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]),eO=wy({prefix:"\u{1f680}",name:"base256emoji",encode:function Xk(n){return n.reduce((t,r)=>t+Jk[r],"")},decode:function Qk(n){const t=[];for(const r of n){const i=Yk[r.codePointAt(0)];if(void 0===i)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}}),Sh=ws({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),tO=ws({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rO=ws({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nO=ws({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),iO=ws({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),sO=ws({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),oO=ws({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),aO=ws({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),cO=ws({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dO=Eh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),uO=Eh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Dc=Eh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fO=Eh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),lO=ws({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hO=ws({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pO=ws({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yO=ws({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),mO=ws({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),gO=wy({prefix:"\0",name:"identity",encode:n=>function Dk(n){return(new TextDecoder).decode(n)}(n),decode:n=>function Ck(n){return(new TextEncoder).encode(n)}(n)}),vO=new TextEncoder,wO=new TextDecoder,bO="json",_O=512;function xO(n){return vO.encode(JSON.stringify(n))}function EO(n){return JSON.parse(wO.decode(n))}const SO="raw",AO=85;function MO(n){return Bf(n)}function TO(n){return Bf(n)}var H_=128,BO=-128,RO=Math.pow(2,31),OO=128,G_=127,CO=Math.pow(2,7),DO=Math.pow(2,14),NO=Math.pow(2,21),$O=Math.pow(2,28),jO=Math.pow(2,35),UO=Math.pow(2,42),LO=Math.pow(2,49),FO=Math.pow(2,56),KO=Math.pow(2,63),VO={encode:function W_(n,t,r){t=t||[];for(var i=r=r||0;n>=RO;)t[r++]=255&n|H_,n/=128;for(;n&BO;)t[r++]=255&n|H_,n>>>=7;return t[r]=0|n,W_.bytes=r-i+1,t},decode:function $1(n,i){var o,r=0,s=0,c=i=i||0,u=n.length;do{if(c>=u)throw $1.bytes=0,new RangeError("Could not decode varint");o=n[c++],r+=s<28?(o&G_)<<s:(o&G_)*Math.pow(2,s),s+=7}while(o>=OO);return $1.bytes=c-i,r},encodingLength:function(n){return n<CO?1:n<DO?2:n<NO?3:n<$O?4:n<jO?5:n<UO?6:n<LO?7:n<FO?8:n<KO?9:10}};const by=VO;function _y(n,t,r=0){return by.encode(n,t,r),t}function xy(n){return by.encodingLength(n)}function Ey(n,t){const r=t.byteLength,i=xy(n),s=i+xy(r),c=new Uint8Array(s+r);return _y(n,c,0),_y(r,c,i),c.set(t,s),new U1(n,r,t,c)}class U1{code;size;digest;bytes;constructor(t,r,i,s){this.code=t,this.size=r,this.digest=i,this.bytes=s}}const Z_=Bf,JO={code:0,name:"identity",encode:Z_,digest:function ZO(n){return Ey(0,Z_(n))}};function J_({name:n,code:t,encode:r}){return new YO(n,t,r)}class YO{name;code;encode;constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Ey(this.code,r):r.then(i=>Ey(this.code,i))}throw Error("Unknown type, must be binary type")}}function Y_(n){return function(){var t=(0,it.A)(function*(r){return new Uint8Array(yield crypto.subtle.digest(n,r))});return function(r){return t.apply(this,arguments)}}()}const XO=J_({name:"sha2-256",code:18,encode:Y_("SHA-256")}),QO=J_({name:"sha2-512",code:19,encode:Y_("SHA-512")});Symbol,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const ex={...Oe,...d,...Se,...P,...m,...V,...L,...Y,...le,...p};function tx(n=0){return new Uint8Array(n)}function rx(n,t,r,i){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:i}}}const nx=rx("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>(new TextEncoder).encode(n.substring(1))),K1=rx("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{const t=tx((n=n.substring(1)).length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),sC={utf8:nx,"utf-8":nx,hex:ex.base16,latin1:K1,ascii:K1,binary:K1,...ex};class Mo{_options;_popCount;_parent;_posAtParent;_children;key;constructor(t,r,i=0){this._options=t,this._popCount=0,this._parent=r,this._posAtParent=i,this._children=new Rk,this.key=null}put(t,r){var i=this;return(0,it.A)(function*(){const s=yield i._findNewBucketAndPos(t);s.bucket._putAt(s,t,r)})()}get(t){var r=this;return(0,it.A)(function*(){const i=yield r._findChild(t);if(null!=i)return i.value})()}del(t){var r=this;return(0,it.A)(function*(){const i=yield r._findPlace(t),s=i.bucket._at(i.pos);null!=s&&s.key===t&&i.bucket._delAt(i.pos)})()}leafCount(){return this._children.compactArray().reduce((r,i)=>i instanceof Mo?r+i.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const t=this._children.compactArray();for(const r of t)r instanceof Mo?yield*r.eachLeafSeries():yield r}serialize(t,r){return r(this._children.reduce((s,c,o)=>(null!=c&&s.push(c instanceof Mo?c.serialize(t,r):t(c,o)),s),[]))}asyncTransform(t,r){var i=this;return(0,it.A)(function*(){return ix(i,t,r)})()}toJSON(){return this.serialize(cC,dC)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}_findChild(t){var r=this;return(0,it.A)(function*(){const i=yield r._findPlace(t),s=i.bucket._at(i.pos);if(!(s instanceof Mo)&&null!=s&&s.key===t)return s})()}_findPlace(t){var r=this;return(0,it.A)(function*(){const i=r._options.hash("string"==typeof t?function oC(n,t="utf8"){const r=sC[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${n}`)}(t):t),s=yield i.take(r._options.bits),c=r._children.get(s);return c instanceof Mo?c._findPlace(i):{bucket:r,pos:s,hash:i,existingChild:c}})()}_findNewBucketAndPos(t){var r=this;return(0,it.A)(function*(){const i=yield r._findPlace(t);if(null!=i.existingChild&&i.existingChild.key!==t){const s=new Mo(r._options,i.bucket,i.pos);i.bucket._putObjectAt(i.pos,s);const c=yield s._findPlace(i.existingChild.hash);return c.bucket._putAt(c,i.existingChild.key,i.existingChild.value),s._findNewBucketAndPos(i.hash)}return i})()}_putAt(t,r,i){this._putObjectAt(t.pos,{key:r,value:i,hash:t.hash})}_putObjectAt(t,r){null==this._children.get(t)&&this._popCount++,this._children.set(t,r)}_delAt(t){if(-1===t)throw new Error("Invalid position");null!=this._children.get(t)&&this._popCount--,this._children.unset(t),this._level()}_level(){if(null!=this._parent&&this._popCount<=1)if(1===this._popCount){const t=this._children.find(aC);if(null!=t&&!(t instanceof Mo)){const r=t.hash;r.untake(this._options.bits),this._parent._putAt({pos:this._posAtParent,hash:r,bucket:this._parent},t.key,t.value)}}else this._parent._delAt(this._posAtParent)}_at(t){return this._children.get(t)}}function aC(n){return!!n}function cC(n,t){return n.key}function dC(n){return n}function ix(n,t,r){return z1.apply(this,arguments)}function z1(){return z1=(0,it.A)(function*(n,t,r){const i=[];for(const s of n._children.compactArray())if(s instanceof Mo)yield ix(s,t,r);else{const c=yield t(s);i.push({bitField:n._children.bitField(),children:c})}return r(i)}),z1.apply(this,arguments)}const fC=[255,254,252,248,240,224,192,128],lC=[1,3,7,15,31,63,127,255];class hC{_value;_currentBytePos;_currentBitPos;constructor(t){this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(t){let r=t,i=0;for(;r>0&&this._haveBits();){const s=this._value[this._currentBytePos],c=this._currentBitPos+1,o=Math.min(c,r);i=(i<<o)+pC(s,c-o,o),r-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return i}untake(t){for(this._currentBitPos+=t;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function pC(n,t,r){const i=function yC(n,t){return fC[n]&lC[Math.min(t+n-1,7)]}(t,r);return(n&i)>>>t}function mC(n){return function t(r){return r instanceof sx?r:new sx(r,n)}}class sx{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(t,r){if(!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}take(t){var r=this;return(0,it.A)(function*(){let i=t;for(;r._availableBits<i;)yield r._produceMoreBits();let s=0;for(;i>0;){const c=r._buffers[r._currentBufferIndex],o=Math.min(c.availableBits(),i);s=(s<<o)+c.take(o),i-=o,r._availableBits-=o,0===c.availableBits()&&r._currentBufferIndex++}return s})()}untake(t){let r=t;for(;r>0;){const i=this._buffers[this._currentBufferIndex],s=Math.min(i.totalBits()-i.availableBits(),r);i.untake(s),r-=s,this._availableBits+=s,this._currentBufferIndex>0&&i.totalBits()===i.availableBits()&&(this._depth--,this._currentBufferIndex--)}}_produceMoreBits(){var t=this;return(0,it.A)(function*(){t._depth++;const r=t._depth>0?function uC(n,t){null==t&&(t=n.reduce((s,c)=>s+c.length,0));const r=tx(t);let i=0;for(const s of n)r.set(s,i),i+=s.length;return r}([t._value,Uint8Array.from([t._depth])]):t._value,i=yield t._hashFn(r),s=new hC(i);t._buffers.push(s),t._availableBits+=s.availableBits()})()}}function ox(n){if(null==n||null==n.hashFn)throw new Error("please define an options.hashFn");const t={bits:n.bits??8,hash:mC(n.hashFn)};return new Mo(t)}function gC(n){return V1.apply(this,arguments)}function V1(){return V1=(0,it.A)(function*(n){return(yield K_.encode(n)).slice(0,8).reverse()}),V1.apply(this,arguments)}const ax=BigInt(34),wC=class vC extends _h{_bucket;constructor(t,r){super(t,r),this._bucket=ox({hashFn:gC,bits:8})}put(t,r){var i=this;return(0,it.A)(function*(){i.cid=void 0,i.size=void 0,i.nodeSize=void 0,yield i._bucket.put(t,r)})()}get(t){var r=this;return(0,it.A)(function*(){return r._bucket.get(t)})()}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}eachChildSeries(){var t=this;return An(function*(){var s,r=!1,i=!1;try{for(var o,c=ln(t._bucket.eachLeafSeries());r=!(o=yield lr(c.next())).done;r=!1){const{key:u,value:A}=o.value;yield{key:u,child:A}}}catch(u){i=!0,s=u}finally{try{r&&null!=c.return&&(yield lr(c.return()))}finally{if(i)throw s}}})()}estimateNodeSize(){return void 0!==this.nodeSize||(this.nodeSize=dx(this._bucket,this,this.options)),this.nodeSize}flush(t){var r=this;return An(function*(){var c,i=!1,s=!1;try{for(var u,o=ln(cx(r._bucket,t,r,r.options));i=!(u=yield lr(o.next())).done;i=!1)yield{...u.value,path:r.path}}catch(A){s=!0,c=A}finally{try{i&&null!=o.return&&(yield lr(o.return()))}finally{if(s)throw c}}})()}};function cx(n,t,r,i){return H1.apply(this,arguments)}function H1(){return H1=An(function*(n,t,r,i){const s=n._children,c=[];let o=0n;for(let ze=0;ze<s.length;ze++){const $e=s.get(ze);if(null==$e)continue;const Ye=ze.toString(16).toUpperCase().padStart(2,"0");if($e instanceof Mo){let ut;var S,u=!1,A=!1;try{for(var R,y=ln(cx($e,t,null,i));u=!(R=yield lr(y.next())).done;u=!1)ut=R.value}catch(ct){A=!0,S=ct}finally{try{u&&null!=y.return&&(yield lr(y.return()))}finally{if(A)throw S}}if(null==ut)throw new Error("Could not flush sharded directory, no subshard found");c.push({Name:Ye,Tsize:Number(ut.size),Hash:ut.cid}),o+=ut.size}else if(bC($e.value)){const ut=$e.value;let ct;var te,ee=!1,ae=!1;try{for(var we,fe=ln(ut.flush(t));ee=!(we=yield lr(fe.next())).done;ee=!1)ct=we.value,yield ct}catch(at){ae=!0,te=at}finally{try{ee&&null!=fe.return&&(yield lr(fe.return()))}finally{if(ae)throw te}}if(null==ct)throw new Error("Did not flush dir");c.push({Name:Ye+$e.key,Tsize:Number(ct.size),Hash:ct.cid}),o+=ct.size}else{const ut=$e.value;if(null==ut.cid)continue;const vt=ut.size;c.push({Name:Ye+$e.key,Tsize:Number(vt),Hash:ut.cid}),o+=BigInt(vt??0)}}const Pe=Uint8Array.from(s.bitField().reverse()),Te=new Aa({type:"hamt-sharded-directory",data:Pe,fanout:BigInt(n.tableSize()),hashType:ax,mtime:r?.mtime,mode:r?.mode}),Ce=Md(Ad({Data:Te.marshal(),Links:c})),je=yield lr(Pf(Ce,t,i)),Le=BigInt(Ce.byteLength)+o;yield{cid:je,unixfs:Te,size:Le}}),H1.apply(this,arguments)}function bC(n){return"function"==typeof n.flush}function dx(n,t,r){const i=n._children,s=[];for(let A=0;A<i.length;A++){const S=i.get(A);if(null==S)continue;const y=A.toString(16).toUpperCase().padStart(2,"0");if(S instanceof Mo){const R=dx(S,null,r);s.push({Name:y,Tsize:Number(R),Hash:0===r.cidVersion?A1:M1})}else if("function"==typeof S.value.flush){const ee=S.value.nodeSize();s.push({Name:y+S.key,Tsize:Number(ee),Hash:0===r.cidVersion?A1:M1})}else{const R=S.value;if(null==R.cid)continue;s.push({Name:y+S.key,Tsize:Number(R.size),Hash:R.cid})}}const c=Uint8Array.from(i.bitField().reverse());return Md(Ad({Data:new Aa({type:"hamt-sharded-directory",data:c,fanout:BigInt(n.tableSize()),hashType:ax,mtime:t?.mtime,mode:t?.mode}).marshal(),Links:s})).length}function ux(n,t,r,i){return W1.apply(this,arguments)}function W1(){return W1=(0,it.A)(function*(n,t,r,i){let s=t;t instanceof T1&&t.estimateNodeSize()>r&&(s=yield function _C(n,t){return G1.apply(this,arguments)}(t,i));const c=s.parent;if(null!=c){if(s!==t){if(null!=n&&(n.parent=s),null==s.parentKey)throw new Error("No parent key found");yield c.put(s.parentKey,s)}return ux(s,c,r,i)}return s}),W1.apply(this,arguments)}function G1(){return G1=(0,it.A)(function*(n,t){const r=new wC({root:n.root,dir:!0,parent:n.parent,parentKey:n.parentKey,path:n.path,dirty:n.dirty,flat:!1,mtime:n.mtime,mode:n.mode},t);var c,i=!1,s=!1;try{for(var u,o=ln(n.eachChildSeries());i=!(u=yield o.next()).done;i=!1){const{key:A,child:S}=u.value;yield r.put(A,S)}}catch(A){s=!0,c=A}finally{try{i&&null!=o.return&&(yield o.return())}finally{if(s)throw c}}return r}),G1.apply(this,arguments)}const xC=(n="")=>(n.trim().match(/([^\\/]|\\\/)+/g)??[]).filter(Boolean);function EC(n,t,r){return q1.apply(this,arguments)}function q1(){return q1=(0,it.A)(function*(n,t,r){const i=xC(n.path??""),s=i.length-1;let c=t,o="";for(let u=0;u<i.length;u++){const A=i[u];o+=`${""!==o?"/":""}${A}`;const S=u===s;if(c.dirty=!0,c.cid=void 0,c.size=void 0,S)yield c.put(A,n),t=yield ux(null,c,r.shardSplitThresholdBytes,r);else{let y=yield c.get(A);(null==y||!(y instanceof _h))&&(y=new T1({root:!1,dir:!0,parent:c,parentKey:A,path:o,dirty:!0,flat:!0,mtime:y?.unixfs?.mtime,mode:y?.unixfs?.mode},r)),yield c.put(A,y),c=y}}return t}),q1.apply(this,arguments)}function fx(n,t){return Z1.apply(this,arguments)}function Z1(){return Z1=An(function*(n,t){n instanceof _h?yield*Xa(ln(n.flush(t))):!0===n.unixfs?.isDirectory()&&(yield n)}),Z1.apply(this,arguments)}function Mh(n,t){return J1.apply(this,arguments)}function J1(){return J1=An(function*(n,t,r={}){let i;i=Symbol.asyncIterator in n||Symbol.iterator in n?n:[n];const s=r.wrapWithDirectory??!1,c=r.shardSplitThresholdBytes??262144,o=r.cidVersion??1,u=r.rawLeaves??!0,A=r.leafType??"file",S=r.fileImportConcurrency??50,y=r.blockWriteConcurrency??10,R=r.reduceSingleLeafToSelf??!0,ee=r.chunker??S9(),ae=r.chunkValidator??LR(),te=r.dagBuilder??function jR(n){return function(){var t=An(function*(i,s){var u,c=!1,o=!1;try{for(var S,A=ln(i);c=!(S=yield lr(A.next())).done;c=!1){const y=S.value;{let R;if(null!=y.path&&(R=y.path,y.path=y.path.split("/").filter(ee=>null!=ee&&"."!==ee).join("/")),UR(y)){const ee={path:y.path,mtime:y.mtime,mode:y.mode,content:An(function*(){let ae=0n;var we,te=!1,fe=!1;try{for(var Te,Pe=ln(n.chunker(n.chunkValidator($R(y.content))));te=!(Te=yield lr(Pe.next())).done;te=!1){const Ae=Te.value;{const Ce=BigInt(Ae.byteLength);ae+=Ce,n.onProgress?.(new Yo("unixfs:importer:progress:file:read",{bytesRead:ae,chunkSize:Ce,path:y.path})),yield Ae}}}catch(Ae){fe=!0,we=Ae}finally{try{te&&null!=Pe.return&&(yield lr(Pe.return()))}finally{if(fe)throw we}}})(),originalPath:R};yield(0,it.A)(function*(){return CR(ee,s,n)})}else{if(null==y.path)throw new Error("Import candidate must have content or path or both");{const ee={path:y.path,mtime:y.mtime,mode:y.mode,originalPath:R};yield(0,it.A)(function*(){return RR(ee,s,n)})}}}}}catch(y){o=!0,u=y}finally{try{c&&null!=A.return&&(yield lr(A.return()))}finally{if(o)throw u}}});return function r(i,s){return t.apply(this,arguments)}}()}({chunker:ee,chunkValidator:ae,wrapWithDirectory:s,layout:r.layout??KR(),bufferImporter:r.bufferImporter??BR({cidVersion:o,rawLeaves:u,leafType:A,onProgress:r.onProgress}),blockWriteConcurrency:y,reduceSingleLeafToSelf:R,cidVersion:o,onProgress:r.onProgress}),fe=r.treeBuilder??function SC(n){return function(){var t=An(function*(i,s){let o,c=new T1({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n),u=!1;var y,A=!1,S=!1;try{for(var ee,R=ln(i);A=!(ee=yield lr(R.next())).done;A=!1){const Te=ee.value;{if(null==Te)continue;const Ae=`${Te.originalPath??""}`.split("/")[0];null!=Ae&&""!==Ae&&(null==o?(o=Ae,u=!0):o!==Ae&&(u=!1)),c=yield lr(EC(Te,c,n)),(null==Te.unixfs||!Te.unixfs.isDirectory())&&(yield Te)}}}catch(Te){S=!0,y=Te}finally{try{A&&null!=R.return&&(yield lr(R.return()))}finally{if(S)throw y}}if(n.wrapWithDirectory||u&&c.childCount()>1)yield*Xa(ln(fx(c,s)));else{var fe,ae=!1,te=!1;try{for(var Pe,we=ln(c.eachChildSeries());ae=!(Pe=yield lr(we.next())).done;ae=!1){const Te=Pe.value;null!=Te&&(yield*Xa(ln(fx(Te.child,s))))}}catch(Te){te=!0,fe=Te}finally{try{ae&&null!=we.return&&(yield lr(we.return()))}finally{if(te)throw fe}}}});return function r(i,s){return t.apply(this,arguments)}}()}({wrapWithDirectory:s,shardSplitThresholdBytes:c,cidVersion:o,onProgress:r.onProgress});var Te,we=!1,Pe=!1;try{for(var Ce,Ae=ln(fe(K6(te(i,t),S),t));we=!(Ce=yield lr(Ae.next())).done;we=!1){const je=Ce.value;yield{cid:je.cid,path:je.path,unixfs:je.unixfs,size:je.size}}}catch(je){Pe=!0,Te=je}finally{try{we&&null!=Ae.return&&(yield lr(Ae.return()))}finally{if(Pe)throw Te}}}),J1.apply(this,arguments)}var tw=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},hx=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=n[Symbol.asyncIterator];return t?t.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(c){r[c]=n[c]&&function(o){return new Promise(function(u,A){!function s(c,o,u,A){Promise.resolve(A).then(function(S){c({value:S,done:u})},o)}(u,A,(o=n[c](o)).done,o.value)})}}};const px={[Va.code]:Va},yx={[qp]:W};class _s{static computeCid(t,r=qp,i=Va.code){return tw(this,void 0,void 0,function*(){const s=yx[r];if(!s)throw new Ot(Rt.ComputeCidCodecNotSupported,`codec [${r}] not supported`);const c=px[i];if(!c)throw new Ot(Rt.ComputeCidMultihashNotSupported,`multihash code [${i}] not supported`);const o=s.encode(t),u=yield c.digest(o);return(yield on.createV1(s.code,u)).toString()})}static parseCid(t){const r=on.parse(t).toV1();if(!yx[r.code])throw new Ot(Rt.ParseCidCodecNotSupported,`codec [${r.code}] not supported`);if(!px[r.multihash.code])throw new Ot(Rt.ParseCidMultihashNotSupported,`multihash code [${r.multihash.code}] not supported`);return r}static computeDagPbCidFromBytes(t){var r,i,s;return tw(this,void 0,void 0,function*(){const o=Mh([{content:t}],new L6,{cidVersion:1});let u;try{for(var y,A=!0,S=hx(o);y=yield S.next(),!(r=y.done);A=!0)A=!1,u=y.value}catch(R){i={error:R}}finally{try{!A&&!r&&(s=S.return)&&(yield s.call(S))}finally{if(i)throw i.error}}return u?u.cid.toString():""})}static computeDagPbCidFromStream(t){var r,i,s;return tw(this,void 0,void 0,function*(){const o=Mh([{content:t}],new L6,{cidVersion:1});let u;try{for(var y,A=!0,S=hx(o);y=yield S.next(),!(r=y.done);A=!0)A=!1,u=y.value}catch(R){i={error:R}}finally{try{!A&&!r&&(s=S.return)&&(yield s.call(S))}finally{if(i)throw i.error}}return u?u.cid.toString():""})}}var mx=I(91426),Th=I(63397),Ih=I(65797),Sy=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};Th.VV.isEphemeralKeyCompressed=!0;class Ph{static aes256CtrEncrypt(t,r,i){return Sy(this,void 0,void 0,function*(){const s=mx.createCipheriv("aes-256-ctr",t,r),c=new Ih.Readable({read(){}});return i.on("data",o=>{const u=s.update(o);c.push(u)}),i.on("end",()=>{const o=s.final();c.push(o),c.push(null)}),i.on("error",o=>{c.emit("error",o)}),c})}static aes256CtrDecrypt(t,r,i){return Sy(this,void 0,void 0,function*(){const s=mx.createDecipheriv("aes-256-ctr",t,r),c=new Ih.Readable({read(){}});return i.on("data",o=>{const u=s.update(o);c.push(u)}),i.on("end",()=>{const o=s.final();c.push(o),c.push(null)}),i.on("error",o=>{c.emit("error",o)}),c})}static eciesSecp256k1Encrypt(t,r){return Sy(this,void 0,void 0,function*(){const i=Buffer.from(t),s=Buffer.from(r),c=Th.w(i,s);let o=0,u=Ph.isEphemeralKeyCompressed?33:65;const A=c.subarray(o,u);o=u,u+=Th.VV.symmetricNonceLength;const S=c.subarray(o,u);o=u,u+=16;const y=c.subarray(o,u);return{ciphertext:c.subarray(u),ephemeralPublicKey:A,initializationVector:S,messageAuthenticationCode:y}})}static eciesSecp256k1Decrypt(t){return Sy(this,void 0,void 0,function*(){const r=Buffer.from(t.privateKey),i=Buffer.concat([t.ephemeralPublicKey,t.initializationVector,t.messageAuthenticationCode,t.ciphertext]);return Th.Yc(r,i)})}static get isEphemeralKeyCompressed(){return Th.VV.isEphemeralKeyCompressed}}var rw=function(n){return n.Aes256Ctr="A256CTR",n.EciesSecp256k1="ECIES-ES256K",n}(rw||{}),gx=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Bh{constructor(t){this.jws=t}static create(t,r=[]){return gx(this,void 0,void 0,function*(){const i={payload:Ft.bytesToBase64Url(t),signatures:[]},s=new Bh(i);for(const c of r)yield s.addSignature(c);return s})}addSignature(t){return gx(this,void 0,void 0,function*(){const i=JSON.stringify({kid:t.keyId,alg:t.algorithm}),s=Ft.stringToBase64Url(i),o=Ft.stringToBytes(`${s}.${this.jws.payload}`),u=yield t.sign(o),A=Ft.bytesToBase64Url(u);this.jws.signatures.push({protected:s,signature:A})})}getJws(){return this.jws}}const Ru="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var Ay=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},Xo=function(n){return n.DataFormats="dataFormats",n.ProtocolContext="protocolContext",n.ProtocolPath="protocolPath",n.Schemas="schemas",n}(Xo||{});class Rf{static derivePrivateKey(t,r){var i;return Ay(this,void 0,void 0,function*(){const s=Ki.privateJwkToBytes(t.derivedPrivateKey),c=null!==(i=t.derivationPath)&&void 0!==i?i:[],o=yield Rf.derivePrivateKeyBytes(s,r),u=yield Ki.privateKeyToJwk(o);return{rootKeyId:t.rootKeyId,derivationScheme:t.derivationScheme,derivationPath:[...c,...r],derivedPrivateKey:u}})}static derivePublicKey(t,r){return Ay(this,void 0,void 0,function*(){const i=yield Rf.derivePrivateKey(t,r);return yield Ki.getPublicJwk(i.derivedPrivateKey)})}static derivePrivateKeyBytes(t,r){return Ay(this,void 0,void 0,function*(){Rf.validateKeyDerivationPath(r);let i=t;for(const s of r){const c=Ft.stringToBytes(s);i=yield Rf.deriveKeyUsingHkdf({hashAlgorithm:"SHA-256",initialKeyMaterial:i,info:c,keyLengthInBytes:32})}return i})}static deriveKeyUsingHkdf(t){return Ay(this,void 0,void 0,function*(){const{hashAlgorithm:r,initialKeyMaterial:i,info:s,keyLengthInBytes:c}=t,u=yield function AC(){if(Ru&&"object"==typeof Ru.subtle&&null!=Ru.subtle)return Ru.subtle;throw new Error("crypto.subtle must be defined")}().importKey("raw",i,{name:"HKDF"},!1,["deriveBits"]),A=yield crypto.subtle.deriveBits({name:"HKDF",hash:r,salt:new Uint8Array(0),info:s},u,8*c);return new Uint8Array(A)})}static validateKeyDerivationPath(t){if(t.includes(""))throw new Ot(Rt.HdKeyDerivationPathInvalid,`Invalid key derivation path: ${t}`)}}function nw(n,t){return n>t?1:n<t?-1:0}function My(n){if("object"!=typeof n)return!1;for(const t in n)return!1;return!0}function fo(n){Object.keys(n).forEach(t=>{void 0===n[t]?delete n[t]:"object"==typeof n[t]&&fo(n[t])})}var Qa=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class zt{static validateJsonSchema(t){xf(t.descriptor.interface+t.descriptor.method,t)}static getSigner(t){return void 0===t.authorization?void 0:ci.getSignerDid(t.authorization.signature.signatures[0])}static getCid(t){return Qa(this,void 0,void 0,function*(){const r=Object.assign({},t);return r.encodedData&&delete r.encodedData,yield _s.computeCid(r)})}static compareCid(t,r){return Qa(this,void 0,void 0,function*(){return nw(yield zt.getCid(t),yield zt.getCid(r))})}static createAuthorization(t){return Qa(this,void 0,void 0,function*(){const{descriptor:r,signer:i,delegatedGrant:s,permissionGrantId:c,protocolRole:o}=t;let u;void 0!==s&&(u=yield zt.getCid(s));const S={signature:yield zt.createSignature(r,i,{delegatedGrantId:u,permissionGrantId:c,protocolRole:o})};return void 0!==s&&(S.authorDelegatedGrant=s),S})}static createSignature(t,r,i){return Qa(this,void 0,void 0,function*(){const s=yield _s.computeCid(t),c=Object.assign({descriptorCid:s},i);fo(c);const o=Ft.objectToBytes(c);return(yield Bh.create(o,[r])).getJws()})}static getNewestMessage(t){return Qa(this,void 0,void 0,function*(){let r;for(const i of t)(void 0===r||(yield zt.isNewer(i,r)))&&(r=i);return r})}static getOldestMessage(t){return Qa(this,void 0,void 0,function*(){let r;for(const i of t)(void 0===r||(yield zt.isOlder(i,r)))&&(r=i);return r})}static isNewer(t,r){return Qa(this,void 0,void 0,function*(){return(yield zt.compareMessageTimestamp(t,r))>0})}static isOlder(t,r){return Qa(this,void 0,void 0,function*(){return(yield zt.compareMessageTimestamp(t,r))<0})}static isSignedByAuthorDelegate(t){var r;return void 0!==(null===(r=t.authorization)||void 0===r?void 0:r.authorDelegatedGrant)}static isSignedByOwnerDelegate(t){var r;return void 0!==(null===(r=t.authorization)||void 0===r?void 0:r.ownerDelegatedGrant)}static compareMessageTimestamp(t,r){return Qa(this,void 0,void 0,function*(){return t.descriptor.messageTimestamp>r.descriptor.messageTimestamp?1:t.descriptor.messageTimestamp<r.descriptor.messageTimestamp?-1:zt.compareCid(t,r)})}static validateSignatureStructure(t,r,i="GenericSignaturePayload"){return Qa(this,void 0,void 0,function*(){if(1!==t.signatures.length)throw new Ot(Rt.AuthenticationMoreThanOneSignatureNotSupported,"expected no more than 1 signature for authorization purpose");const s=ci.decodePlainObjectPayload(t);xf(i,s);const{descriptorCid:c}=s,o=yield _s.computeCid(r);if(c!==o)throw new Ot(Rt.AuthenticateDescriptorCidMismatch,`provided descriptorCid ${c} does not match expected CID ${o}`);return s})}}class Ma{static parse(t){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){return new Ma(t)})}constructor(t){this.id=t.recordId,this.grantor=zt.getSigner(t),this.grantee=t.descriptor.recipient,this.dateGranted=t.descriptor.dateCreated;const i=Ft.base64UrlToObject(t.encodedData);this.dateExpires=i.dateExpires,this.delegated=i.delegated,this.description=i.description,this.requestId=i.requestId,this.scope=i.scope,this.conditions=i.conditions}}var To=function(n){return n.CreatedAscending="createdAscending",n.CreatedDescending="createdDescending",n.PublishedAscending="publishedAscending",n.PublishedDescending="publishedDescending",n}(To||{});class eo{static matchAnyFilter(t,r){if(0===r.length)return!0;for(const i of r)if(this.matchFilter(t,i))return!0;return!1}static matchFilter(t,r){for(const i in r){const s=r[i],c=t[i];if(void 0===c||!(Array.isArray(c)?this.matchAnyIndexValue(s,c):this.matchIndexValue(s,c)))return!1}return!0}static matchAnyIndexValue(t,r){for(const i of r)if(this.matchIndexValue(t,i))return!0;return!1}static matchIndexValue(t,r){if("object"==typeof t){if(Array.isArray(t)){if(this.matchOneOf(t,r))return!0}else if(this.matchRange(t,r))return!0}else if(r===t)return!0;return!1}static matchOneOf(t,r){for(const i of t)if(r===i)return!0;return!1}static matchRange(t,r){return!(void 0!==t.lt&&r>=t.lt||void 0!==t.lte&&r>t.lte||void 0!==t.gt&&r<=t.gt||void 0!==t.gte&&r<t.gte)}static isEqualFilter(t){return"object"!=typeof t}static isRangeFilter(t){return"object"==typeof t&&!Array.isArray(t)&&("gt"in t||"lt"in t||"lte"in t||"gte"in t)}static isOneOfFilter(t){return!("object"!=typeof t||!Array.isArray(t))}static convertRangeCriterion(t){let r;return void 0!==t.to&&void 0!==t.from?r={gte:t.from,lt:t.to}:void 0!==t.to?r={lt:t.to}:void 0!==t.from&&(r={gte:t.from}),r}static constructPrefixFilterAsRangeFilter(t){return{gte:t,lt:t+"\uffff"}}}class PC{static reduceFilter(t){if(Object.keys(t).length<=1)return t;const{recordId:i,attester:s,parentId:c,recipient:o,contextId:u,protocolPath:S,schema:y,protocol:R}=t,ee=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["recordId","attester","parentId","recipient","contextId","author","protocolPath","schema","protocol"]);if(void 0!==i)return{recordId:i};if(void 0!==s)return{attester:s};if(void 0!==c)return{parentId:c};if(void 0!==o)return{recipient:o};if(void 0!==u)return{contextId:u};if(void 0!==S)return{protocolPath:S};if(void 0!==y)return{schema:y};if(void 0!==R)return{protocol:R};const te=Object.keys(ee)[0],fe={};return fe[te]=t[te],fe}}var Cr=function(n){return n.Events="Events",n.Messages="Messages",n.Protocols="Protocols",n.Records="Records",n}(Cr||{}),hr=function(n){return n.Configure="Configure",n.Create="Create",n.Get="Get",n.Grant="Grant",n.Query="Query",n.Read="Read",n.Request="Request",n.Revoke="Revoke",n.Write="Write",n.Delete="Delete",n.Subscribe="Subscribe",n}(hr||{});function ku(n){let t;try{t=kf(n)}catch{t=void 0}if(n!==t)throw new Ot(Rt.UrlProtocolNotNormalized,`Protocol URI ${n} must be normalized.`)}function kf(n){return vx(n)}function Of(n){let t;try{t=Rh(n)}catch{t=void 0}if(n!==t)throw new Ot(Rt.UrlSchemaNotNormalized,`Schema URI ${n} must be normalized.`)}function Rh(n){return vx(n)}function vx(n){let t;t=/^[^:]+:(\/{2})?[^\/].*/.test(n)?n:`http://${n}`;try{const r=new URL(t);return r.search="",r.hash="",function BC(n){return n.endsWith("/")?n.slice(0,-1):n}(r.href)}catch{throw new Ot(Rt.UrlProtocolNotNormalizable,"Could not normalize protocol URI")}}var iw=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Hr{static isRecordsWrite(t){return t.descriptor.interface===Cr.Records&&t.descriptor.method===hr.Write}static getAuthor(t){let r;return r=zt.getSigner(void 0!==t.authorization.authorDelegatedGrant?t.authorization.authorDelegatedGrant:t),r}static decrypt(t,r,i){return iw(this,void 0,void 0,function*(){const{encryption:s}=t,c=s.keyEncryption.find(fe=>fe.rootKeyId===r.rootKeyId&&fe.derivationScheme===r.derivationScheme);if(void 0===c)throw new Ot(Rt.RecordsDecryptNoMatchingKeyEncryptedFound,`Unable to find a symmetric key encrypted using key         with ID '${r.rootKeyId}' and '${r.derivationScheme}' derivation scheme.`);const o=Hr.constructKeyDerivationPath(c.derivationScheme,t),u=yield Hr.derivePrivateKey(r,o),A=Ft.base64UrlToBytes(c.encryptedKey),S=Ki.publicJwkToBytes(c.ephemeralPublicKey),y=Ft.base64UrlToBytes(c.initializationVector),R=Ft.base64UrlToBytes(c.messageAuthenticationCode),ee=yield Ph.eciesSecp256k1Decrypt({ciphertext:A,ephemeralPublicKey:S,initializationVector:y,messageAuthenticationCode:R,privateKey:u}),ae=Ft.base64UrlToBytes(s.initializationVector);return yield Ph.aes256CtrDecrypt(ee,ae,i)})}static constructKeyDerivationPath(t,r){const i=r.descriptor,s=r.contextId;let c;return c=t===Xo.DataFormats?Hr.constructKeyDerivationPathUsingDataFormatsScheme(i.schema,i.dataFormat):t===Xo.ProtocolPath?Hr.constructKeyDerivationPathUsingProtocolPathScheme(i):t===Xo.ProtocolContext?Hr.constructKeyDerivationPathUsingProtocolContextScheme(s):Hr.constructKeyDerivationPathUsingSchemasScheme(i.schema),c}static constructKeyDerivationPathUsingDataFormatsScheme(t,r){return void 0!==t?[Xo.DataFormats,t,r]:[Xo.DataFormats,r]}static constructKeyDerivationPathUsingProtocolPathScheme(t){if(void 0===t.protocol)throw new Ot(Rt.RecordsProtocolPathDerivationSchemeMissingProtocol,"Unable to construct key derivation path using `protocols` scheme because `protocol` is missing.");const r=t.protocolPath.split("/");return[Xo.ProtocolPath,t.protocol,...r]}static constructKeyDerivationPathUsingProtocolContextScheme(t){if(void 0===t)throw new Ot(Rt.RecordsProtocolContextDerivationSchemeMissingContextId,"Unable to construct key derivation path using `protocolContext` scheme because `contextId` is missing.");const r=t.split("/")[0];return[Xo.ProtocolContext,r]}static constructKeyDerivationPathUsingSchemasScheme(t){if(void 0===t)throw new Ot(Rt.RecordsSchemasDerivationSchemeMissingSchema,"Unable to construct key derivation path using `schemas` scheme because `schema` is missing.");return[Xo.Schemas,t]}static derivePrivateKey(t,r){var i;return iw(this,void 0,void 0,function*(){if("secp256k1"!==t.derivedPrivateKey.crv)throw new Ot(Rt.RecordsDerivePrivateKeyUnSupportedCurve,`Curve ${t.derivedPrivateKey.crv} is not supported.`);const s=null!==(i=t.derivationPath)&&void 0!==i?i:[];Hr.validateAncestorKeyAndDescentKeyDerivationPathsMatch(s,r);const c=r.slice(s.length),o=Ki.privateJwkToBytes(t.derivedPrivateKey);return yield Rf.derivePrivateKeyBytes(o,c)})}static validateAncestorKeyAndDescentKeyDerivationPathsMatch(t,r){for(let i=0;i<t.length;i++){const s=t[i],c=r[i];if(s!==c)throw new Ot(Rt.RecordsInvalidAncestorKeyDerivationSegment,`Ancestor key derivation segment '${s}' mismatches against the descendant key derivation segment '${c}'.`)}}static getParentContextFromOfContextId(t){if(void 0===t)return;const r=t.lastIndexOf("/");return-1===r?"":t.substring(0,r)}static normalizeFilter(t){let r,i;r=void 0===t.protocol?void 0:kf(t.protocol),i=void 0===t.schema?void 0:Rh(t.schema);const s=Object.assign(Object.assign({},t),{protocol:r,schema:i});return fo(s),s}static isStartsWithFilter(t){return"object"==typeof t&&"startsWith"in t&&"string"==typeof t.startsWith}static buildTagIndexes(t){const r={};for(const i in t)r[`tag.${i}`]=t[i];return r}static convertTagsFilter(t){const r={};for(const i in t){const s=t[i];r[`tag.${i}`]=this.isStartsWithFilter(s)?eo.constructPrefixFilterAsRangeFilter(s.startsWith):s}return r}static convertFilter(t,r){const{tags:i}=t,s=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["tags"]);let c={};void 0!==i&&(c=Object.assign({},this.convertTagsFilter(i)));const o=Object.assign(Object.assign({},s),c),{dateCreated:u,datePublished:A,dateUpdated:S,contextId:y}=t,R=u?eo.convertRangeCriterion(u):void 0;R&&(o.dateCreated=R);const ee=A?eo.convertRangeCriterion(A):void 0;ee&&(o.published=!0,o.datePublished=ee),!0!==o.published&&(r===To.PublishedAscending||r===To.PublishedDescending)&&(o.published=!0);const ae=S?eo.convertRangeCriterion(S):void 0;ae&&(o.messageTimestamp=ae,delete o.dateUpdated);const te=y?eo.constructPrefixFilterAsRangeFilter(y):void 0;return te&&(o.contextId=te),o}static validateDelegatedGrantReferentialIntegrity(t,r,i){var s,c;return iw(this,void 0,void 0,function*(){const o=void 0!==r?.delegatedGrantId,u=void 0!==(null===(s=t.authorization)||void 0===s?void 0:s.authorDelegatedGrant);if(o!==u)throw new Ot(Rt.RecordsAuthorDelegatedGrantAndIdExistenceMismatch,`delegatedGrantId in message (author) signature and authorDelegatedGrant must both exist or be undefined.          delegatedGrantId in message (author) signature defined: ${o},          authorDelegatedGrant defined: ${u}`);if(u){const y=t.authorization.authorDelegatedGrant;if(!0!==(yield Ma.parse(y)).delegated)throw new Ot(Rt.RecordsAuthorDelegatedGrantNotADelegatedGrant,"The owner delegated grant given is not a delegated grant.");const ee=y.descriptor.recipient,ae=zt.getSigner(t);if(ee!==ae)throw new Ot(Rt.RecordsAuthorDelegatedGrantGrantedToAndOwnerSignatureMismatch,`grantedTo ${ee} in author delegated grant must be the same as the signer ${ae} of the message signature.`);const te=yield zt.getCid(y);if(te!==r.delegatedGrantId)throw new Ot(Rt.RecordsAuthorDelegatedGrantCidMismatch,`CID of the author delegated grant ${te} must be the same as           the delegatedGrantId ${r.delegatedGrantId} in the message signature.`)}const A=void 0!==i?.delegatedGrantId,S=void 0!==(null===(c=t.authorization)||void 0===c?void 0:c.ownerDelegatedGrant);if(A!==S)throw new Ot(Rt.RecordsOwnerDelegatedGrantAndIdExistenceMismatch,`delegatedGrantId in owner signature and ownerDelegatedGrant must both exist or be undefined.          delegatedGrantId in owner signature defined: ${A},          ownerDelegatedGrant defined: ${S}`);if(S){const y=t.authorization.ownerDelegatedGrant;if(!0!==(yield Ma.parse(y)).delegated)throw new Ot(Rt.RecordsOwnerDelegatedGrantNotADelegatedGrant,"The owner delegated grant given is not a delegated grant.");const ee=y.descriptor.recipient,ae=ci.getSignerDid(t.authorization.ownerSignature.signatures[0]);if(ee!==ae)throw new Ot(Rt.RecordsOwnerDelegatedGrantGrantedToAndOwnerSignatureMismatch,`grantedTo ${ee} in owner delegated grant must be the same as the signer ${ae} of the owner signature.`);const te=yield zt.getCid(y);if(te!==i.delegatedGrantId)throw new Ot(Rt.RecordsOwnerDelegatedGrantCidMismatch,`CID of the owner delegated grant ${te} must be the same as           the delegatedGrantId ${i.delegatedGrantId} in the owner signature.`)}})}static shouldProtocolAuthorize(t){return void 0!==t.protocolRole}static filterIncludesPublishedRecords(t){return void 0!==t.datePublished||!1!==t.published}static filterIncludesUnpublishedRecords(t){return void 0===t.datePublished&&void 0===t.published||!1===t.published}}var sw=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Nc{static performBaseValidation(t){return sw(this,void 0,void 0,function*(){const{incomingMessage:r,expectedGrantor:i,expectedGrantee:s,permissionGrant:c,messageStore:o}=t,u=r.descriptor;Nc.verifyExpectedGrantorAndGrantee(i,s,c);const A=i;yield Nc.verifyGrantActive(A,u.messageTimestamp,c,o),yield Nc.verifyGrantScopeInterfaceAndMethod(u.interface,u.method,c)})}static verifyExpectedGrantorAndGrantee(t,r,i){const s=i.grantee;if(r!==s)throw new Ot(Rt.GrantAuthorizationNotGrantedToAuthor,`Permission grant is granted to ${s}, but need to be granted to ${r}`);const c=i.grantor;if(t!==c)throw new Ot(Rt.GrantAuthorizationNotGrantedForTenant,`Permission grant is granted by ${c}, but need to be granted by ${t}`)}static verifyGrantActive(t,r,i,s){return sw(this,void 0,void 0,function*(){if(r<i.dateGranted)throw new Ot(Rt.GrantAuthorizationGrantNotYetActive,"The message has a timestamp before the associated permission grant becomes active");if(r>=i.dateExpires)throw new Ot(Rt.GrantAuthorizationGrantExpired,"The message has timestamp after the expiry of the associated permission grant");const c={parentId:i.id,protocolPath:"grant/revocation",isLatestBaseState:!0},{messages:o}=yield s.query(t,[c]),u=yield zt.getOldestMessage(o);if(void 0!==u&&u.descriptor.messageTimestamp<=r)throw new Ot(Rt.GrantAuthorizationGrantRevoked,`Permission grant with CID ${i.id} has been revoked`)})}static verifyGrantScopeInterfaceAndMethod(t,r,i){return sw(this,void 0,void 0,function*(){if(t!==i.scope.interface)throw new Ot(Rt.GrantAuthorizationInterfaceMismatch,`DWN Interface of incoming message is outside the scope of permission grant with ID ${i.id}`);if(r!==i.scope.method)throw new Ot(Rt.GrantAuthorizationMethodMismatch,`DWN Method of incoming message is outside the scope of permission grant with ID ${i.id}`)})}}var ow=function(n){return n.Required="Required",n.Prohibited="Prohibited",n}(ow||{}),Ty=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class to{static authorizeWrite(t){return Ty(this,void 0,void 0,function*(){const{recordsWriteMessage:r,expectedGrantor:i,expectedGrantee:s,permissionGrant:c,messageStore:o}=t;yield Nc.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:s,permissionGrant:c,messageStore:o}),to.verifyScope(r,c.scope),to.verifyConditions(r,c.conditions)})}static authorizeRead(t){return Ty(this,void 0,void 0,function*(){const{recordsReadMessage:r,recordsWriteMessageToBeRead:i,expectedGrantor:s,expectedGrantee:c,permissionGrant:o,messageStore:u}=t;yield Nc.performBaseValidation({incomingMessage:r,expectedGrantor:s,expectedGrantee:c,permissionGrant:o,messageStore:u}),to.verifyScope(i,o.scope)})}static authorizeQueryOrSubscribe(t){return Ty(this,void 0,void 0,function*(){const{incomingMessage:r,expectedGrantor:i,expectedGrantee:s,permissionGrant:c,messageStore:o}=t;yield Nc.performBaseValidation({incomingMessage:r,expectedGrantor:i,expectedGrantee:s,permissionGrant:c,messageStore:o});const A=c.scope.protocol,S=r.descriptor.filter.protocol;if(void 0!==A&&S!==A)throw new Ot(Rt.RecordsGrantAuthorizationQueryOrSubscribeProtocolScopeMismatch,`Grant protocol scope ${A} does not match protocol in message ${S}`)})}static authorizeDelete(t){return Ty(this,void 0,void 0,function*(){const{recordsDeleteMessage:r,recordsWriteToDelete:i,expectedGrantor:s,expectedGrantee:c,permissionGrant:o,messageStore:u}=t;yield Nc.performBaseValidation({incomingMessage:r,expectedGrantor:s,expectedGrantee:c,permissionGrant:o,messageStore:u});const S=o.scope.protocol,y=i.descriptor.protocol;if(void 0!==S&&y!==S)throw new Ot(Rt.RecordsGrantAuthorizationDeleteProtocolScopeMismatch,`Grant protocol scope ${S} does not match protocol in record to delete ${y}`)})}static verifyScope(t,r){to.isUnrestrictedScope(r)||(void 0!==t.descriptor.protocol?to.verifyProtocolRecordScope(t,r):to.verifyFlatRecordScope(t,r))}static verifyProtocolRecordScope(t,r){if(void 0===r.protocol)throw new Ot(Rt.RecordsGrantAuthorizationScopeMissingProtocol,"Grant for protocol record must specify protocol in its scope");if(r.protocol!==t.descriptor.protocol)throw new Ot(Rt.RecordsGrantAuthorizationScopeProtocolMismatch,"Grant scope specifies different protocol than what appears in the record");if(void 0!==r.contextId&&(void 0===t.contextId||!t.contextId.startsWith(r.contextId)))throw new Ot(Rt.RecordsGrantAuthorizationScopeContextIdMismatch,"Grant scope specifies different contextId than what appears in the record");if(void 0!==r.protocolPath&&r.protocolPath!==t.descriptor.protocolPath)throw new Ot(Rt.RecordsGrantAuthorizationScopeProtocolPathMismatch,"Grant scope specifies different protocolPath than what appears in the record")}static verifyFlatRecordScope(t,r){if(void 0!==r.schema&&r.schema!==t.descriptor.schema)throw new Ot(Rt.RecordsGrantAuthorizationScopeSchema,`Record does not have schema in permission grant scope with schema '${r.schema}'`)}static verifyConditions(t,r){if(r?.publication===ow.Required&&!t.descriptor.published)throw new Ot(Rt.RecordsGrantAuthorizationConditionPublicationRequired,"Permission grant requires message to be published");if(r?.publication===ow.Prohibited&&t.descriptor.published)throw new Ot(Rt.RecordsGrantAuthorizationConditionPublicationProhibited,"Permission grant prohibits message from being published")}static isUnrestrictedScope(t){return void 0===t.protocol&&void 0===t.schema}}var Ne=I(89994);const aw={};function ec(n,t){Object.defineProperty(n.prototype,Symbol.toStringTag,{value:t,writable:!1,enumerable:!1,configurable:!0});for(const r of Object.getOwnPropertyNames(n)){const i=Object.getOwnPropertyDescriptor(n,r);i.configurable&&i.enumerable&&(i.enumerable=!1,Object.defineProperty(n,r,i))}for(const r of Object.getOwnPropertyNames(n.prototype)){const i=Object.getOwnPropertyDescriptor(n.prototype,r);i.configurable&&i.enumerable&&(i.enumerable=!1,Object.defineProperty(n.prototype,r,i))}Yn(t,n),Yn(`${t}.prototype`,n.prototype)}function Yn(n,t){const r=`%${n}%`;if(void 0!==aw[r])throw new Error(`intrinsic ${n} already exists`);aw[r]=t}function Lt(n){return aw[n]}var wx,bx;const wr="slot-epochNanoSeconds",tc="slot-timezone-identifier",Ht="slot-year",qt="slot-month",Xt="slot-day",Dr="slot-hour",Nr="slot-minute",$r="slot-second",jr="slot-millisecond",Ur="slot-microsecond",Lr="slot-nanosecond",Et="slot-calendar",_x="slot-date-brand",xx="slot-year-month-brand",Ex="slot-month-day-brand",rs="slot-cached-instant",En="slot-time-zone",xs="slot-years",ji="slot-months",Gs="slot-weeks",Es="slot-days",Ss="slot-hours",As="slot-minutes",Ms="slot-seconds",Ts="slot-milliseconds",Is="slot-microseconds",Ps="slot-nanoseconds",Xn="slot-calendar-identifier",Sx=new WeakMap,cw=Symbol.for("@@Temporal__GetSlots");(wx=globalThis)[cw]||(wx[cw]=function(t){return Sx.get(t)});const dw=globalThis[cw],uw=Symbol.for("@@Temporal__CreateSlots");(bx=globalThis)[uw]||(bx[uw]=function(t){Sx.set(t,Object.create(null))});const rc=globalThis[uw];function Ii(n,...t){if(!n||"object"!=typeof n)return!1;const r=dw(n);return!!r&&t.every(i=>i in r)}function he(n,t){const r=dw(n)?.[t];if(void 0===r)throw new TypeError(`Missing internal slot ${t}`);return r}function Kr(n,t,r){const i=dw(n);if(void 0===i)throw new TypeError("Missing slots for the given container");if(i[t])throw new TypeError(`${t} already has set`);i[t]=r}const Ax=/\.[-A-Za-z_]|\.\.[-A-Za-z._]{1,12}|\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/,kh=new RegExp("(?:"+[`(?:${Ax.source})(?:\\/(?:${Ax.source}))*`,"Etc/GMT(?:0|[-+]\\d{1,2})","GMT[-+]?0","EST5EDT","CST6CDT","MST7MDT","PST8PDT",/(?:[+\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\d{1,9})?)?)?)/.source].join("|")+")"),Mx=/(?:[+\u2212-]\d{6}|\d{4})/,Iy=/(?:0[1-9]|1[0-2])/,fw=/(?:0[1-9]|[12]\d|3[01])/,kC=new RegExp(`(${Mx.source})(?:-(${Iy.source})-(${fw.source})|(${Iy.source})(${fw.source}))`),Tx=/(\d{2})(?::(\d{2})(?::(\d{2})(?:[.,](\d{1,9}))?)?|(\d{2})(?:(\d{2})(?:[.,](\d{1,9}))?)?)?/,Ix=/([+\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\d{1,9}))?)?)?/,Px=new RegExp(`([zZ])|${Ix.source}?`),Id=/\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\]/g,OC=new RegExp([`^${kC.source}`,`(?:(?:T|\\s+)${Tx.source}(?:${Px.source})?)?`,`(?:\\[!?(${kh.source})\\])?`,`((?:${Id.source})*)$`].join(""),"i"),CC=new RegExp([`^T?${Tx.source}`,`(?:${Px.source})?`,`(?:\\[!?${kh.source}\\])?`,`((?:${Id.source})*)$`].join(""),"i"),DC=new RegExp(`^(${Mx.source})-?(${Iy.source})(?:\\[!?${kh.source}\\])?((?:${Id.source})*)$`),NC=new RegExp(`^(?:--)?(${Iy.source})-?(${fw.source})(?:\\[!?${kh.source}\\])?((?:${Id.source})*)$`),lw=/(\d+)(?:[.,](\d{1,9}))?/,$C=new RegExp(`(?:${lw.source}H)?(?:${lw.source}M)?(?:${lw.source}S)?`),jC=new RegExp(`^([+\u2212-])?P${/(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?/.source}(?:T(?!$)${$C.source})?$`,"i"),UC=Array.prototype.includes,Bx=Array.prototype.push,Rx=globalThis.Intl.DateTimeFormat,LC=Math.min,FC=Math.max,zn=Math.abs,ro=Math.floor,Cf=Math.sign,Ou=Math.trunc,Py=Number.isNaN,Bs=Number.isFinite,KC=Number,Oh=String,zC=Number.MAX_SAFE_INTEGER,ns=Object.create,VC=Object.getOwnPropertyDescriptor,By=Reflect.apply,HC=Reflect.ownKeys,ni=Ne.BigInt(0),Df=Ne.BigInt(1),nc=Ne.BigInt(60),kx=Ne.BigInt(24),hn=Ne.BigInt(1e3),lo=Ne.BigInt(1e6),ic=Ne.BigInt(1e9),WC=Ne.BigInt(-1),Ox=Ne.multiply(Ne.BigInt(3600),ic),Cx=Ne.multiply(nc,ic),sc=Ne.multiply(Ox,kx),Ch=Ne.multiply(Ne.BigInt(-86400),Ne.BigInt(1e17)),Nf=Ne.multiply(Ne.BigInt(86400),Ne.BigInt(1e17)),Ry=-271821,ky=275760,$f=Ne.multiply(Ne.BigInt(-388152),Ne.BigInt(1e13)),GC=Ne.multiply(sc,Ne.BigInt(3660)),Dx=Ne.multiply(sc,Ne.BigInt(366)),Nx=Ne.multiply(sc,Ne.BigInt(14)),qC=["iso8601","hebrew","islamic","islamic-umalqura","islamic-tbla","islamic-civil","islamic-rgsa","islamicc","persian","ethiopic","ethioaa","coptic","chinese","dangi","roc","indian","buddhist","japanese","gregory"];function Io(n){return Ne.equal(n,ni)}function vn(n,t){const r=n[t];if(void 0!==r)return r}function cr(n,t,r){return By(n,t,arguments.length>2?r:[])}function Vn(n){return"object"==typeof n&&null!==n||"function"==typeof n}function jf(n){if("bigint"==typeof n)throw new TypeError("Cannot convert BigInt to number");return KC(n)}function gi(n){const t=jf(n);if(Py(t)||0===t)return 0;if(!Bs(t))return t;const r=ro(zn(t));return 0===r?0:Cf(t)*r}function ho(n){if("number"!=typeof n||Py(n)||!Bs(n))return!1;const t=zn(n);return ro(t)===t}function Rs(n){if("symbol"==typeof n)throw new TypeError("Cannot convert a Symbol value to a String");return Oh(n)}function an(n){const t=jf(n);if(0===t)return 0;if(Py(t)||!Bs(t))throw new RangeError("invalid number value");const r=Ou(t);return 0===r?0:r}function $x(n,t){const r=an(n);if(r<=0)throw void 0!==t?new RangeError(`property '${t}' cannot be a a number less than one`):new RangeError("Cannot convert a number less than one to a positive integer");return r}function Pi(n){const t=jf(n);if(!Bs(t))throw new RangeError("infinity is out of range");if(!ho(t))throw new RangeError(`unsupported fractional value ${n}`);return 0===t?0:t}function li(n,t){return{quotient:Ne.divide(n,t),remainder:Ne.remainder(n,t)}}function Oy(n){return Ne.lessThan(n,ni)}function jx(n){return Io(n)?0:Oy(n)?-1:1}function Ta(n){return Ne.lessThan(n,ni)?Ne.multiply(n,WC):n}const Ux=new Map([["year",an],["month",$x],["monthCode",Rs],["day",$x],["hour",an],["minute",an],["second",an],["millisecond",an],["microsecond",an],["nanosecond",an],["years",Pi],["months",Pi],["weeks",Pi],["days",Pi],["hours",Pi],["minutes",Pi],["seconds",Pi],["milliseconds",Pi],["microseconds",Pi],["nanoseconds",Pi],["era",Rs],["eraYear",gi],["offset",Rs]]),ZC=new Map([["hour",0],["minute",0],["second",0],["millisecond",0],["microsecond",0],["nanosecond",0]]),Dh=[["years","year","date"],["months","month","date"],["weeks","week","date"],["days","day","date"],["hours","hour","time"],["minutes","minute","time"],["seconds","second","time"],["milliseconds","millisecond","time"],["microseconds","microsecond","time"],["nanoseconds","nanosecond","time"]],Cy=new Map(Dh.map(n=>[n[0],n[1]])),JC=new Map(Dh.map(([n,t])=>[t,n])),Lx=Dh.map(([,n])=>n),Fx=Array.from(Cy.keys()).sort(),Kx=new Map;function zx(n){let t=Kx.get(n);return void 0===t&&(t=new Rx("en-us",{timeZone:Oh(n),hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),Kx.set(n,t)),t}function Vx(n){if(null==n)throw new TypeError(`Expected object not ${n}`);return Object(n)}function Uf(n,t,r,i){if(null==t)return;const s=HC(t);for(const c of s)if(!r.some(o=>Object.is(o,c))&&Object.prototype.propertyIsEnumerable.call(t,c)){const o=t[c];if(i&&i.some(u=>Object.is(u,o)))continue;n[c]=o}}function Si(n){return Ii(n,wr)&&!Ii(n,En,Et)}function Po(n){return Ii(n,tc)}function ii(n){return Ii(n,Xn)}function si(n){return Ii(n,xs,ji,Es,Ss,As,Ms,Ts,Is,Ps)}function Zr(n){return Ii(n,_x)}function oi(n){return Ii(n,Dr,Nr,$r,jr,Ur,Lr)&&!Ii(n,Ht,qt,Xt)}function Or(n){return Ii(n,Ht,qt,Xt,Dr,Nr,$r,jr,Ur,Lr)}function pn(n){return Ii(n,xx)}function Bi(n){return Ii(n,Ex)}function rr(n){return Ii(n,wr,En,Et)}function Lf(n){if(Ii(n,Et)||Ii(n,En))throw new TypeError("with() does not support a calendar or timeZone property");if(oi(n))throw new TypeError("with() does not accept Temporal.PlainTime, use withPlainTime() instead");if(void 0!==n.calendar)throw new TypeError("with() does not support a calendar property");if(void 0!==n.timeZone)throw new TypeError("with() does not support a timeZone property")}function hw(n,t){return"never"===t?"":pw(qi(n),t)}function pw(n,t){return"never"===t||"auto"===t&&"iso8601"===n?"":`[${"critical"===t?"!":""}u-ca=${n}]`}function oc(n){const t=OC.exec(n);if(!t)throw new RangeError(`invalid ISO 8601 string: ${n}`);let r=t[1];if("\u2212"===r[0]&&(r=`-${r.slice(1)}`),"-000000"===r)throw new RangeError(`invalid ISO 8601 string: ${n}`);const i=gi(r),s=gi(t[2]||t[4]),c=gi(t[3]||t[5]),o=gi(t[6]),u=void 0!==t[6],A=gi(t[7]||t[10]);let S=gi(t[8]||t[11]);60===S&&(S=59);const y=(t[9]||t[12])+"000000000",R=gi(y.slice(0,3)),ee=gi(y.slice(3,6)),ae=gi(y.slice(6,9));let te,fe=!1;if(t[13])te=void 0,fe=!0;else if(t[14]&&t[15]){const Le=t[17]||"00";let ze=t[18]||"0";if(te=`${"-"===t[14]||"\u2212"===t[14]?"-":"+"}${t[15]||"00"}:${t[16]||"00"}`,+ze){for(;ze.endsWith("0");)ze=ze.slice(0,-1);te+=`:${Le}.${ze}`}else+Le&&(te+=`:${Le}`);"-00:00"===te&&(te="+00:00")}const we=t[19],Pe=t[20];let Te;for(const[,Ae,Ce,je]of Pe.matchAll(Id))if("u-ca"===Ce)void 0===Te&&(Te=je);else if("!"===Ae)throw new RangeError(`Unrecognized annotation: !${Ce}=${je}`);return Rw(i,s,c,o,A,S,R,ee,ae),{year:i,month:s,day:c,hasTime:u,hour:o,minute:A,second:S,millisecond:R,microsecond:ee,nanosecond:ae,ianaName:we,offset:te,z:fe,calendar:Te}}function yw(n){const t=DC.exec(n);let r,i,s,c;if(t){let o=t[1];if("\u2212"===o[0]&&(o=`-${o.slice(1)}`),"-000000"===o)throw new RangeError(`invalid ISO 8601 string: ${n}`);r=gi(o),i=gi(t[2]);const u=t[3];for(const[,A,S,y]of u.matchAll(Id))if("u-ca"===S)void 0===s&&(s=y);else if("!"===A)throw new RangeError(`Unrecognized annotation: !${S}=${y}`);if(void 0!==s&&"iso8601"!==s)throw new RangeError("YYYY-MM format is only valid with iso8601 calendar")}else{let o;if(({year:r,month:i,calendar:s,day:c,z:o}=oc(n)),o)throw new RangeError("Z designator not supported for PlainYearMonth")}return{year:r,month:i,calendar:s,referenceISODay:c}}function mw(n){const t=NC.exec(n);let r,i,s,c;if(t){r=gi(t[1]),i=gi(t[2]);const o=t[3];for(const[,u,A,S]of o.matchAll(Id))if("u-ca"===A)void 0===s&&(s=S);else if("!"===u)throw new RangeError(`Unrecognized annotation: !${A}=${S}`);if(void 0!==s&&"iso8601"!==s)throw new RangeError("MM-DD format is only valid with iso8601 calendar")}else{let o;if(({month:r,day:i,calendar:s,year:c,z:o}=oc(n)),o)throw new RangeError("Z designator not supported for PlainMonthDay")}return{month:r,day:i,calendar:s,referenceISOYear:c}}function Dy(n,t,r,i){let s=n,c=t,o=r;switch(i){case"reject":cc(s,c,o);break;case"constrain":({year:s,month:c,day:o}=g8(s,c,o))}return{year:s,month:c,day:o}}function Ny(n,t,r,i,s,c,o){let u=n,A=t,S=r,y=i,R=s,ee=c;switch(o){case"reject":nm(u,A,S,y,R,ee);break;case"constrain":({hour:u,minute:A,second:S,millisecond:y,microsecond:R,nanosecond:ee}=(fe=A,we=S,Pe=y,Te=R,Ae=ee,{hour:oo(u,0,23),minute:oo(fe,0,59),second:oo(we,0,59),millisecond:oo(Pe,0,999),microsecond:oo(Te,0,999),nanosecond:oo(Ae,0,999)}))}var fe,we,Pe,Te,Ae;return{hour:u,minute:A,second:S,millisecond:y,microsecond:R,nanosecond:ee}}function Cu(n){if(!Vn(n))return function(te){const fe=jC.exec(te);if(!fe)throw new RangeError(`invalid duration: ${te}`);if(fe.slice(2).every(Je=>void 0===Je))throw new RangeError(`invalid duration: ${te}`);const we="-"===fe[1]||"\u2212"===fe[1]?-1:1,Pe=void 0===fe[2]?0:an(fe[2])*we,Te=void 0===fe[3]?0:an(fe[3])*we,Ae=void 0===fe[4]?0:an(fe[4])*we,Ce=void 0===fe[5]?0:an(fe[5])*we,je=void 0===fe[6]?0:an(fe[6])*we,Le=fe[7],ze=fe[8],$e=fe[9],Ye=fe[10],ut=fe[11];let ct=0,vt=0,at=0;if(void 0!==Le){if(ze??$e??Ye??ut)throw new RangeError("only the smallest unit can be fractional");at=3600*gi((Le+"000000000").slice(0,9))*we}else if(ct=void 0===ze?0:an(ze)*we,void 0!==$e){if(Ye??ut)throw new RangeError("only the smallest unit can be fractional");at=60*gi(($e+"000000000").slice(0,9))*we}else vt=void 0===Ye?0:an(Ye)*we,void 0!==ut&&(at=gi((ut+"000000000").slice(0,9))*we);const ft=at%1e3,tt=Ou(at/1e3)%1e3,st=Ou(at/1e6)%1e3;return vt+=Ou(at/1e9)%60,ct+=Ou(at/6e10),im(Pe,Te,Ae,Ce,je,ct,vt,st,tt,ft),{years:Pe,months:Te,weeks:Ae,days:Ce,hours:je,minutes:ct,seconds:vt,milliseconds:st,microseconds:tt,nanoseconds:ft}}(Rs(n));if(si(n))return{years:he(n,xs),months:he(n,ji),weeks:he(n,Gs),days:he(n,Es),hours:he(n,Ss),minutes:he(n,As),seconds:he(n,Ms),milliseconds:he(n,Ts),microseconds:he(n,Is),nanoseconds:he(n,Ps)};const t={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};let r=function(te){if(!Vn(te))throw new TypeError("invalid duration-like");const fe={years:void 0,months:void 0,weeks:void 0,days:void 0,hours:void 0,minutes:void 0,seconds:void 0,milliseconds:void 0,microseconds:void 0,nanoseconds:void 0};let we=!1;for(const Pe of Fx){const Te=te[Pe];void 0!==Te&&(we=!0,fe[Pe]=Pi(Te))}if(!we)throw new TypeError("invalid duration-like");return fe}(n);for(const ae of Fx){const te=r[ae];void 0!==te&&(t[ae]=te)}let{years:i,months:s,weeks:c,days:o,hours:u,minutes:A,seconds:S,milliseconds:y,microseconds:R,nanoseconds:ee}=t;return im(i,s,c,o,u,A,S,y,R,ee),{years:i,months:s,weeks:c,days:o,hours:u,minutes:A,seconds:S,milliseconds:y,microseconds:R,nanoseconds:ee}}function hi(n){return void 0===n?"constrain":Nd(n,"overflow",["constrain","reject"],"constrain")}function Ff(n){return void 0===n?"compatible":Nd(n,"disambiguation",["compatible","earlier","later","reject"],"compatible")}function Ia(n,t){return Nd(n,"roundingMode",["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"],t)}function $y(n,t){return void 0===n?t:Nd(n,"offset",["prefer","use","ignore","reject"],t)}function Nh(n){return Nd(n,"calendarName",["auto","always","never","critical"],"auto")}function Kf(n){let t=n.roundingIncrement;if(void 0===t)return 1;if(t=jf(t),!Bs(t))throw new RangeError("roundingIncrement must be finite");const r=Ou(t);if(r<1||r>1e9)throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${t}`);return r}function zf(n,t,r){const i=r?t:t-1;if(n>i)throw new RangeError(`roundingIncrement must be at least 1 and less than ${i}, not ${n}`);if(t%n!=0)throw new RangeError(`Rounding increment must divide evenly into ${t}`)}function $h(n){const t=n.fractionalSecondDigits;if(void 0===t)return"auto";if("number"!=typeof t){if("auto"!==Rs(t))throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);return"auto"}const r=ro(t);if(!Bs(r)||r<0||r>9)throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`);return r}function jh(n,t){switch(n){case"minute":return{precision:"minute",unit:"minute",increment:1};case"second":return{precision:0,unit:"second",increment:1};case"millisecond":return{precision:3,unit:"millisecond",increment:1};case"microsecond":return{precision:6,unit:"microsecond",increment:1};case"nanosecond":return{precision:9,unit:"nanosecond",increment:1}}switch(t){case"auto":return{precision:t,unit:"nanosecond",increment:1};case 0:return{precision:t,unit:"second",increment:1};case 1:case 2:case 3:return{precision:t,unit:"millisecond",increment:10**(3-t)};case 4:case 5:case 6:return{precision:t,unit:"microsecond",increment:10**(6-t)};case 7:case 8:case 9:return{precision:t,unit:"nanosecond",increment:10**(9-t)};default:throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${t}`)}}const Du=Symbol("~required~");function no(n,t,r,i,s=[]){const c=[];for(const[,S,y]of Dh)"datetime"!==r&&r!==y||c.push(S);c.push(...s);let o=i;o===Du?o=void 0:void 0!==o&&c.push(o);const u=[...c];for(const S of c){const y=JC.get(S);void 0!==y&&u.push(y)}let A=Nd(n,t,u,o);if(void 0===A&&i===Du)throw new RangeError(`${t} is required`);return Cy.has(A)?Cy.get(A):A}function jy(n){const t=n.relativeTo;if(void 0===t)return t;let r,i,s,c,o,u,A,S,y,R,ee,ae,te="option",fe=!1;if(Vn(t)){if(rr(t)||Zr(t))return t;if(Or(t))return Gf(t);R=Wh(t);const we=vi(R,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);we.push("timeZone","offset");const Pe=Vr(t,we,[]),Te=ns(null);Te.overflow="constrain",({year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S,nanosecond:y}=Uh(R,Pe,Te)),ae=Pe.offset,void 0===ae&&(te="wall"),ee=Pe.timeZone,void 0!==ee&&(ee=is(ee))}else{let we,Pe;if(({year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S,nanosecond:y,calendar:R,ianaName:we,offset:ae,z:Pe}=oc(Rs(t))),we)ee=is(we),Pe?te="exact":ae||(te="wall"),fe=!0;else if(Pe)throw new RangeError("Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone");if(R||(R="iso8601"),!zc(R))throw new RangeError(`invalid calendar identifier ${R}`);R=uc(R)}return void 0===ee?Bo(r,i,s,R):Wi(Ly(r,i,s,c,o,u,A,S,y,te,"option"===te?Bd(ae):0,ee,"compatible","reject",fe),ee,R)}function gw(n,t,r,i,s,c,o,u,A,S){for(const[y,R]of[["years",n],["months",t],["weeks",r],["days",i],["hours",s],["minutes",c],["seconds",o],["milliseconds",u],["microseconds",A],["nanoseconds",S]])if(0!==R)return Cy.get(y);return"nanosecond"}function Nu(n,t){return Lx.indexOf(n)>Lx.indexOf(t)?t:n}function Vr(n,t,r,{emptySourceErrorMessage:i}={emptySourceErrorMessage:"no supported properties found"}){const s=ns(null);let c=!1;t.sort();for(const o of t){let u=n[o];if(void 0!==u)c=!0,Ux.has(o)&&(u=Ux.get(o)(u)),s[o]=u;else if("partial"!==r){if(UC.call(r,o))throw new TypeError(`required property '${o}' missing or undefined`);u=ZC.get(o),s[o]=u}}if("partial"===r&&!c)throw new TypeError(i);return s}function Uy(n,t="complete"){const r=["hour","microsecond","millisecond","minute","nanosecond","second"],i=Vr(n,r,"partial",{emptySourceErrorMessage:"invalid time-like"}),s={};for(const c of r){const o=VC(i,c);void 0!==o?s[c]=o.value:"complete"===t&&(s[c]=0)}return s}function Sn(n,t){let r=n;if(Vn(r)){if(Zr(r))return r;if(rr(r)&&(hi(t),r=po(he(r,En),he(r,rs),he(r,Et))),Or(r))return hi(t),Bo(he(r,Ht),he(r,qt),he(r,Xt),he(r,Et));const A=Wh(r);return jc(A,Vr(r,vi(A,["day","month","monthCode","year"]),[]),t)}hi(t);let{year:i,month:s,day:c,calendar:o,z:u}=oc(Rs(r));if(u)throw new RangeError("Z designator not supported for PlainDate");if(o||(o="iso8601"),!zc(o))throw new RangeError(`invalid calendar identifier ${o}`);return o=uc(o),Bo(i,s,c,o)}function Uh(n,t,r){let{hour:i,minute:s,second:c,millisecond:o,microsecond:u,nanosecond:A}=Uy(t);const S=hi(r),y=jc(n,t,r),R=he(y,Ht),ee=he(y,qt),ae=he(y,Xt);return({hour:i,minute:s,second:c,millisecond:o,microsecond:u,nanosecond:A}=Ny(i,s,c,o,u,A,S)),{year:R,month:ee,day:ae,hour:i,minute:s,second:c,millisecond:o,microsecond:u,nanosecond:A}}function $u(n,t){let r,i,s,c,o,u,A,S,y,R;if(Vn(n)){if(Or(n))return n;if(rr(n))return hi(t),po(he(n,En),he(n,rs),he(n,Et));if(Zr(n))return hi(t),io(he(n,Ht),he(n,qt),he(n,Xt),0,0,0,0,0,0,he(n,Et));R=Wh(n);const ee=Vr(n,vi(R,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]),[]);({year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S,nanosecond:y}=Uh(R,ee,t))}else{let ee;if(hi(t),({year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S,nanosecond:y,calendar:R,z:ee}=oc(Rs(n))),ee)throw new RangeError("Z designator not supported for PlainDateTime");if(Rw(r,i,s,c,o,u,A,S,y),R||(R="iso8601"),!zc(R))throw new RangeError(`invalid calendar identifier ${R}`);R=uc(R)}return io(r,i,s,c,o,u,A,S,y,R)}function Vf(n){if(si(n))return n;let{years:t,months:r,weeks:i,days:s,hours:c,minutes:o,seconds:u,milliseconds:A,microseconds:S,nanoseconds:y}=Cu(n);return new(Lt("%Temporal.Duration%"))(t,r,i,s,c,o,u,A,S,y)}function Pa(n){if(Si(n))return n;if(rr(n))return new(Lt("%Temporal.Instant%"))(he(n,wr));const t=function XC(n){let{year:t,month:r,day:i,hour:s,minute:c,second:o,millisecond:u,microsecond:A,nanosecond:S,offset:y,z:R}=function(fe){const we=oc(fe);if(!we.z&&!we.offset)throw new RangeError("Temporal.Instant requires a time zone offset");return we}(n);if(!R&&!y)throw new RangeError("Temporal.Instant requires a time zone offset");const ee=R?0:Bd(y);({year:t,month:r,day:i,hour:s,minute:c,second:o,millisecond:u,microsecond:A,nanosecond:S}=Pw(t,r,i,s,c,o,u,A,S-ee));const ae=Rd(t,r,i,s,c,o,u,A,S);if(null===ae)throw new RangeError("DateTime outside of supported range");return ae}(Rs(n));return new(Lt("%Temporal.Instant%"))(t)}function Hx(n,t){let r=n;if(Vn(r)){if(Bi(r))return r;let u,A;if(Ii(r,Et))u=he(r,Et),A=!1;else{let y=r.calendar;A=void 0===y,void 0===y&&(y="iso8601"),u=so(y)}const S=Vr(r,vi(u,["day","month","monthCode","year"]),[]);return A&&void 0!==S.month&&void 0===S.monthCode&&void 0===S.year&&(S.year=1972),Wf(u,S,t)}hi(t);let{month:i,day:s,referenceISOYear:c,calendar:o}=mw(Rs(r));if(void 0===o&&(o="iso8601"),!zc(o))throw new RangeError(`invalid calendar identifier ${o}`);return o=uc(o),void 0===c?(cc(1972,i,s),Kh(i,s,o)):Wf(o,Kh(i,s,o,c))}function $c(n,t="constrain"){let r,i,s,c,o,u,A=n;if(Vn(A)){if(oi(A))return A;if(rr(A)&&(A=po(he(A,En),he(A,rs),he(A,Et))),Or(A))return new(Lt("%Temporal.PlainTime%"))(he(A,Dr),he(A,Nr),he(A,$r),he(A,jr),he(A,Ur),he(A,Lr));({hour:r,minute:i,second:s,millisecond:c,microsecond:o,nanosecond:u}=Uy(A)),({hour:r,minute:i,second:s,millisecond:c,microsecond:o,nanosecond:u}=Ny(r,i,s,c,o,u,t))}else({hour:r,minute:i,second:s,millisecond:c,microsecond:o,nanosecond:u}=function(y){const R=CC.exec(y);let ee,ae,te,fe,we,Pe,Te;if(R){ee=gi(R[1]),ae=gi(R[2]||R[5]),te=gi(R[3]||R[6]),60===te&&(te=59);const Ae=(R[4]||R[7])+"000000000";fe=gi(Ae.slice(0,3)),we=gi(Ae.slice(3,6)),Pe=gi(Ae.slice(6,9)),Te=R[14];for(const[,Ce,je,Le]of Te.matchAll(Id))if("u-ca"!==je&&"!"===Ce)throw new RangeError(`Unrecognized annotation: !${je}=${Le}`);if(R[8])throw new RangeError("Z designator not supported for PlainTime")}else{let Ae,Ce;if(({hasTime:Ce,hour:ee,minute:ae,second:te,millisecond:fe,microsecond:we,nanosecond:Pe,z:Ae}=oc(y)),!Ce)throw new RangeError(`time is missing in string: ${y}`);if(Ae)throw new RangeError("Z designator not supported for PlainTime")}if(/[tT ][0-9][0-9]/.test(y))return{hour:ee,minute:ae,second:te,millisecond:fe,microsecond:we,nanosecond:Pe};try{const{month:Ae,day:Ce}=mw(y);cc(1972,Ae,Ce)}catch{try{const{year:Ae,month:Ce}=yw(y);cc(Ae,Ce,1)}catch{return{hour:ee,minute:ae,second:te,millisecond:fe,microsecond:we,nanosecond:Pe}}}throw new RangeError(`invalid ISO 8601 time-only string ${y}; may need a T prefix`)}(Rs(A))),nm(r,i,s,c,o,u);return new(Lt("%Temporal.PlainTime%"))(r,i,s,c,o,u)}function Lh(n,t){if(Vn(n)){if(pn(n))return n;const o=Wh(n);return Uu(o,Vr(n,vi(o,["month","monthCode","year"]),[]),t)}hi(t);let{year:r,month:i,referenceISODay:s,calendar:c}=yw(Rs(n));if(void 0===c&&(c="iso8601"),!zc(c))throw new RangeError(`invalid calendar identifier ${c}`);return c=uc(c),void 0===s?(cc(r,i,1),zh(r,i,c)):Uu(c,zh(r,i,c,s))}function Ly(n,t,r,i,s,c,o,u,A,S,y,R,ee,ae,te){const fe=new(Lt("%Temporal.PlainDateTime%"))(n,t,r,i,s,c,o,u,A);if("wall"===S||"ignore"===ae)return he(ks(R,fe,ee),wr);if("exact"===S||"use"===ae){const Pe=Rd(n,t,r,i,s,c,o,u,A);if(null===Pe)throw new RangeError("ZonedDateTime outside of supported range");return Ne.subtract(Pe,Ne.BigInt(y))}const we=Jy(R,fe);for(const Pe of we){const Te=Ba(R,Pe),Ae=Ne.toNumber(yo(Ne.BigInt(Te),Cx,"halfExpand"));if(Te===y||te&&Ae===y)return he(Pe,wr)}if("reject"===ae){const Pe=Xy(y),Te=Po(R)?he(R,tc):"time zone";throw new RangeError(`Offset ${Pe} is invalid for ${fe.toString()} in ${Te}`)}return he(e8(we,R,fe,ee),wr)}function Fh(n,t){let r,i,s,c,o,u,A,S,y,R,ee,ae,te,fe,we=!1,Pe="option";if(Vn(n)){if(rr(n))return n;ae=Wh(n);const Ae=vi(ae,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);Ae.push("timeZone","offset");const Ce=Vr(n,Ae,["timeZone"]);R=is(Ce.timeZone),ee=Ce.offset,void 0===ee&&(Pe="wall"),te=Ff(t),fe=$y(t,"reject"),({year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S,nanosecond:y}=Uh(ae,Ce,t))}else{let Ae,Ce;if(({year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S,nanosecond:y,ianaName:Ae,offset:ee,z:Ce,calendar:ae}=function(Le){const ze=oc(Le);if(!ze.ianaName)throw new RangeError("Temporal.ZonedDateTime requires a time zone ID in brackets");return ze}(Rs(n))),R=is(Ae),Ce?Pe="exact":ee||(Pe="wall"),ae||(ae="iso8601"),!zc(ae))throw new RangeError(`invalid calendar identifier ${ae}`);ae=uc(ae),we=!0,te=Ff(t),fe=$y(t,"reject"),hi(t)}let Te=0;return"option"===Pe&&(Te=Bd(ee)),Wi(Ly(r,i,s,c,o,u,A,S,y,Pe,Te,R,te,fe,we),R,ae)}function Wx(n,t,r,i,s){cc(t,r,i),v8(t,r,i),rc(n),Kr(n,Ht,t),Kr(n,qt,r),Kr(n,Xt,i),Kr(n,Et,s),Kr(n,_x,!0)}function Bo(n,t,r,i="iso8601"){const s=Lt("%Temporal.PlainDate%"),c=ns(s.prototype);return Wx(c,n,t,r,i),c}function Gx(n,t,r,i,s,c,o,u,A,S,y){Rw(t,r,i,s,c,o,u,A,S),w8(t,r,i,s,c,o,u,A,S),rc(n),Kr(n,Ht,t),Kr(n,qt,r),Kr(n,Xt,i),Kr(n,Dr,s),Kr(n,Nr,c),Kr(n,$r,o),Kr(n,jr,u),Kr(n,Ur,A),Kr(n,Lr,S),Kr(n,Et,y)}function io(n,t,r,i,s,c,o,u,A,S="iso8601"){const y=Lt("%Temporal.PlainDateTime%"),R=ns(y.prototype);return Gx(R,n,t,r,i,s,c,o,u,A,S),R}function qx(n,t,r,i,s){cc(s,t,r),v8(s,t,r),rc(n),Kr(n,qt,t),Kr(n,Xt,r),Kr(n,Ht,s),Kr(n,Et,i),Kr(n,Ex,!0)}function Kh(n,t,r="iso8601",i=1972){const s=Lt("%Temporal.PlainMonthDay%"),c=ns(s.prototype);return qx(c,n,t,r,i),c}function Zx(n,t,r,i,s){var o,u;cc(t,r,s),u=r,Zi(o=t,Ry,ky),o===Ry?Zi(u,4,12):o===ky&&Zi(u,1,9),rc(n),Kr(n,Ht,t),Kr(n,qt,r),Kr(n,Xt,s),Kr(n,Et,i),Kr(n,xx,!0)}function zh(n,t,r="iso8601",i=1){const s=Lt("%Temporal.PlainYearMonth%"),c=ns(s.prototype);return Zx(c,n,t,r,i),c}function Jx(n,t,r,i){Fu(t),rc(n),Kr(n,wr,t),Kr(n,En,r),Kr(n,Et,i);const s=new(Lt("%Temporal.Instant%"))(he(n,wr));Kr(n,rs,s)}function Wi(n,t,r="iso8601"){const i=Lt("%Temporal.ZonedDateTime%"),s=ns(i.prototype);return Jx(s,n,t,r),s}function vi(n,t){if("string"==typeof n){const s=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.fields%"),s,[t])}const r=cr(vn(n,"fields"),n,[t]),i=[];for(const s of r){if("string"!=typeof s)throw new TypeError("bad return from calendar.fields()");Bx.call(i,s)}return i}function ju(n,t,r){if("string"==typeof n){const s=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.mergeFields%"),s,[t,r])}const i=cr(vn(n,"mergeFields"),n,[t,r]);if(!Vn(i))throw new TypeError("bad return from calendar.mergeFields()");return i}function Gi(n,t,r,i,s){let c=s;if("string"==typeof n){const u=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.dateAdd%"),u,[t,r,i])}void 0===c&&(c=vn(n,"dateAdd"));const o=By(c,n,[t,r,i]);if(!Zr(o))throw new TypeError("invalid result");return o}function Pd(n,t,r,i,s){let c=s;if("string"==typeof n){const u=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.dateUntil%"),u,[t,r,i])}void 0===c&&(c=vn(n,"dateUntil"));const o=By(c,n,[t,r,i]);if(!si(o))throw new TypeError("invalid result");return o}function Fy(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.year%"),i,[t])}let r=cr(vn(n,"year"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar year result must be an integer");if(!ho(r))throw new RangeError("calendar year result must be an integer");return r}function Ky(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.month%"),i,[t])}let r=cr(vn(n,"month"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar month result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar month result must be a positive integer");return r}function Vh(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.monthCode%"),i,[t])}let r=cr(vn(n,"monthCode"),n,[t]);if("string"!=typeof r)throw new TypeError("calendar monthCode result must be a string");return r}function Hh(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.day%"),i,[t])}const r=cr(vn(n,"day"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar day result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar day result must be a positive integer");return r}function zy(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.era%"),i,[t])}let r=cr(vn(n,"era"),n,[t]);if(void 0===r)return r;if("string"!=typeof r)throw new TypeError("calendar era result must be a string or undefined");return r}function Vy(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.eraYear%"),i,[t])}let r=cr(vn(n,"eraYear"),n,[t]);if(void 0===r)return r;if("number"!=typeof r)throw new TypeError("calendar eraYear result must be an integer or undefined");if(!ho(r))throw new RangeError("calendar eraYear result must be an integer or undefined");return r}function vw(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.dayOfWeek%"),i,[t])}const r=cr(vn(n,"dayOfWeek"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar dayOfWeek result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar dayOfWeek result must be a positive integer");return r}function ww(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.dayOfYear%"),i,[t])}const r=cr(vn(n,"dayOfYear"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar dayOfYear result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar dayOfYear result must be a positive integer");return r}function bw(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.weekOfYear%"),i,[t])}const r=cr(vn(n,"weekOfYear"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar weekOfYear result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar weekOfYear result must be a positive integer");return r}function _w(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.yearOfWeek%"),i,[t])}const r=cr(vn(n,"yearOfWeek"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar yearOfWeek result must be an integer");if(!ho(r))throw new RangeError("calendar yearOfWeek result must be an integer");return r}function xw(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.daysInWeek%"),i,[t])}const r=cr(vn(n,"daysInWeek"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar daysInWeek result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar daysInWeek result must be a positive integer");return r}function Hy(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.daysInMonth%"),i,[t])}const r=cr(vn(n,"daysInMonth"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar daysInMonth result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar daysInMonth result must be a positive integer");return r}function Wy(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.daysInYear%"),i,[t])}const r=cr(vn(n,"daysInYear"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar daysInYear result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar daysInYear result must be a positive integer");return r}function Gy(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.monthsInYear%"),i,[t])}const r=cr(vn(n,"monthsInYear"),n,[t]);if("number"!=typeof r)throw new TypeError("calendar monthsInYear result must be a positive integer");if(!ho(r)||r<1)throw new RangeError("calendar monthsInYear result must be a positive integer");return r}function qy(n,t){if("string"==typeof n){const i=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.inLeapYear%"),i,[t])}const r=cr(vn(n,"inLeapYear"),n,[t]);if("boolean"!=typeof r)throw new TypeError("calendar inLeapYear result must be a boolean");return r}function so(n){if(Vn(n)){if(Ii(n,Et))return he(n,Et);if(!(ii(s=n)||"dateAdd"in s&&"dateFromFields"in s&&"dateUntil"in s&&"day"in s&&"dayOfWeek"in s&&"dayOfYear"in s&&"daysInMonth"in s&&"daysInWeek"in s&&"daysInYear"in s&&"fields"in s&&"id"in s&&"inLeapYear"in s&&"mergeFields"in s&&"month"in s&&"monthCode"in s&&"monthDayFromFields"in s&&"monthsInYear"in s&&"weekOfYear"in s&&"year"in s&&"yearMonthFromFields"in s&&"yearOfWeek"in s))throw new TypeError("expected a Temporal.Calendar or object implementing the Temporal.Calendar protocol");return n}var s;const t=Rs(n);if(zc(t))return uc(t);let r;try{({calendar:r}=oc(t))}catch{try{({calendar:r}=yw(t))}catch{({calendar:r}=mw(t))}}if(r||(r="iso8601"),!zc(r))throw new RangeError(`invalid calendar identifier ${r}`);return uc(r)}function Wh(n){if(Ii(n,Et))return he(n,Et);const{calendar:t}=n;return void 0===t?"iso8601":so(t)}function qi(n){if("string"==typeof n)return n;const t=n.id;if("string"!=typeof t)throw new TypeError("calendar.id should be a string");return t}function Hf(n){return Vn(n)?n:new(Lt("%Temporal.Calendar%"))(n)}function Gh(n,t){return n===t||qi(n)===qi(t)}function Zy(n,t,r){if(n===t)return;const i=qi(n),s=qi(t);if(i!==s)throw new RangeError(`cannot ${r} of ${i} and ${s} calendars`)}function Yx(n,t){if(n===t)return t;const r=qi(n),i=qi(t);if(r===i||"iso8601"===r)return t;if("iso8601"===i)return n;throw new RangeError("irreconcilable calendars")}function jc(n,t,r,i){if("string"==typeof n){const c=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.dateFromFields%"),c,[t,r])}const s=cr(i??vn(n,"dateFromFields"),n,[t,r]);if(!Zr(s))throw new TypeError("invalid result");return s}function Uu(n,t,r){if("string"==typeof n){const s=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.yearMonthFromFields%"),s,[t,r])}let i=cr(vn(n,"yearMonthFromFields"),n,[t,r]);if(!pn(i))throw new TypeError("invalid result");return i}function Wf(n,t,r){if("string"==typeof n){const s=new(Lt("%Temporal.Calendar%"))(n);return cr(Lt("%Temporal.Calendar.prototype.monthDayFromFields%"),s,[t,r])}let i=cr(vn(n,"monthDayFromFields"),n,[t,r]);if(!Bi(i))throw new TypeError("invalid result");return i}function is(n){if(Vn(n)){if(rr(n))return he(n,En);if(!(Po(r=n)||"getOffsetNanosecondsFor"in r&&"getPossibleInstantsFor"in r&&"id"in r))throw new TypeError("expected a Temporal.TimeZone or object implementing the Temporal.TimeZone protocol");return n}var r;return function YC(n){const{ianaName:t,offset:r,z:i}=function(c){if(new RegExp(`^${kh.source}$`,"i").test(c))return{ianaName:c};try{const o=oc(c);if(o.z||o.offset||o.ianaName)return o}catch{}throw new RangeError(`Invalid time zone: ${c}`)}(n);return t?Mw(t):i?"UTC":Xy(Bd(r))}(Rs(n))}function qh(n){if("string"==typeof n)return n;const t=n.id;if("string"!=typeof t)throw new TypeError("timeZone.id should be a string");return t}function Xx(n){return Vn(n)?n:new(Lt("%Temporal.TimeZone%"))(n)}function Qx(n,t){return n===t||qh(n)===qh(t)}function Gf(n){return Bo(he(n,Ht),he(n,qt),he(n,Xt),he(n,Et))}function Ew(n){return new(Lt("%Temporal.PlainTime%"))(he(n,Dr),he(n,Nr),he(n,$r),he(n,jr),he(n,Ur),he(n,Lr))}function Ba(n,t,r){if("string"==typeof n){const s=new(Lt("%Temporal.TimeZone%"))(n);return cr(Lt("%Temporal.TimeZone.prototype.getOffsetNanosecondsFor%"),s,[t])}const i=cr(r??vn(n,"getOffsetNanosecondsFor"),n,[t]);if("number"!=typeof i)throw new TypeError("bad return from getOffsetNanosecondsFor");if(!ho(i)||zn(i)>=864e11)throw new RangeError("out-of-range return from getOffsetNanosecondsFor");return i}function Sw(n,t){return Xy(Ba(n,t))}function po(n,t,r){const i=he(t,wr),s=Ba(n,t);let{year:c,month:o,day:u,hour:A,minute:S,second:y,millisecond:R,microsecond:ee,nanosecond:ae}=c8(i);return({year:c,month:o,day:u,hour:A,minute:S,second:y,millisecond:R,microsecond:ee,nanosecond:ae}=Pw(c,o,u,A,S,y,R,ee,ae+s)),io(c,o,u,A,S,y,R,ee,ae,r)}function ks(n,t,r){return e8(Jy(n,t),n,t,r)}function e8(n,t,r,i){const s=Lt("%Temporal.Instant%"),c=n.length;if(1===c)return n[0];if(c)switch(i){case"compatible":case"earlier":return n[0];case"later":return n[c-1];case"reject":throw new RangeError("multiple instants found")}const o=he(r,Ht),u=he(r,qt),A=he(r,Xt),S=he(r,Dr),y=he(r,Nr),R=he(r,$r),ee=he(r,jr),ae=he(r,Ur),te=he(r,Lr),fe=Rd(o,u,A,S,y,R,ee,ae,te);if(null===fe)throw new RangeError("DateTime outside of supported range");const we=new s(Ne.subtract(fe,sc)),Pe=new s(Ne.add(fe,sc)),Te=Ba(t,we),Ae=Ba(t,Pe)-Te;switch(i){case"earlier":{const Ce=he(r,Et),je=Lt("%Temporal.PlainDateTime%"),Le=Nw(o,u,A,S,y,R,ee,ae,te,Ce,0,0,0,0,0,0,0,0,0,-Ae,void 0);return Jy(t,new je(Le.year,Le.month,Le.day,Le.hour,Le.minute,Le.second,Le.millisecond,Le.microsecond,Le.nanosecond,Ce))[0]}case"compatible":case"later":{const Ce=he(r,Et),je=Lt("%Temporal.PlainDateTime%"),Le=Nw(o,u,A,S,y,R,ee,ae,te,Ce,0,0,0,0,0,0,0,0,0,Ae,void 0),ze=Jy(t,new je(Le.year,Le.month,Le.day,Le.hour,Le.minute,Le.second,Le.millisecond,Le.microsecond,Le.nanosecond,Ce));return ze[ze.length-1]}case"reject":throw new RangeError("no such instant found")}}function Jy(n,t,r){if("string"==typeof n){const c=new(Lt("%Temporal.TimeZone%"))(n);return cr(Lt("%Temporal.TimeZone.prototype.getPossibleInstantsFor%"),c,[t])}const i=cr(r??vn(n,"getPossibleInstantsFor"),n,[t]),s=[];for(const c of i){if(!Si(c))throw new TypeError("bad return from getPossibleInstantsFor");Bx.call(s,c)}return s}function Lu(n){let t;return t=n<0||n>9999?(n<0?"-":"+")+`000000${zn(n)}`.slice(-6):`0000${n}`.slice(-4),t}function Gn(n){return`00${n}`.slice(-2)}function Yy(n,t,r,i,s){if("minute"===s)return"";const c=`:${Gn(n)}`;let o,u=1e6*t+1e3*r+i;if("auto"===s){if(0===u)return c;for(o=`${u}`.padStart(9,"0");"0"===o[o.length-1];)o=o.slice(0,-1)}else{if(0===s)return c;o=`${u}`.padStart(9,"0").slice(0,s)}return`${c}.${o}`}function t8(n,t,r){let i=t;void 0===i&&(i="UTC");const s=po(i,n,"iso8601"),c=Lu(he(s,Ht)),o=Gn(he(s,qt)),u=Gn(he(s,Xt)),A=Gn(he(s,Dr)),S=Gn(he(s,Nr)),y=Yy(he(s,$r),he(s,jr),he(s,Ur),he(s,Lr),r);let R="Z";return void 0!==t&&(R=a8(Ba(i,n))),`${c}-${o}-${u}T${A}:${S}${y}${R}`}function Aw(n,t="auto",r){function i(Ye){return Ye<=zC?Ye.toString(10):Ne.BigInt(Ye).toString(10)}const s=he(n,xs),c=he(n,ji),o=he(n,Gs),u=he(n,Es),A=he(n,Ss),S=he(n,As);let y=he(n,Ms),R=he(n,Ts),ee=he(n,Is),ae=he(n,Ps);const te=ac(s,c,o,u,A,S,y,R,ee,ae);if(r){const{unit:Ye,increment:ut,roundingMode:ct}=r;({seconds:y,milliseconds:R,microseconds:ee,nanoseconds:ae}=Kc(0,0,0,0,0,0,y,R,ee,ae,ut,Ye,ct))}const fe=[];s&&fe.push(`${i(zn(s))}Y`),c&&fe.push(`${i(zn(c))}M`),o&&fe.push(`${i(zn(o))}W`),u&&fe.push(`${i(zn(u))}D`);const we=[];A&&we.push(`${i(zn(A))}H`),S&&we.push(`${i(zn(S))}M`);const Pe=[];let Te,Ae,Ce,je,Le=Zf(0,0,0,y,R,ee,ae,0);({quotient:Le,remainder:Te}=li(Le,hn)),({quotient:Le,remainder:Ae}=li(Le,hn)),({quotient:je,remainder:Ce}=li(Le,hn));const ze=1e6*zn(Ne.toNumber(Ce))+1e3*zn(Ne.toNumber(Ae))+zn(Ne.toNumber(Te));let $e;if("auto"===t){if(0!==ze)for($e=`${ze}`.padStart(9,"0");"0"===$e[$e.length-1];)$e=$e.slice(0,-1)}else 0!==t&&($e=`${ze}`.padStart(9,"0").slice(0,t));return $e&&Pe.unshift(".",$e),Ne.equal(je,ni)&&!Pe.length&&"auto"===t||Pe.unshift(Ta(je).toString()),Pe.length&&we.push(`${Pe.join("")}S`),we.length&&we.unshift("T"),fe.length||we.length?`${te<0?"-":""}P${fe.join("")}${we.join("")}`:"PT0S"}function r8(n,t="auto"){return`${Lu(he(n,Ht))}-${Gn(he(n,qt))}-${Gn(he(n,Xt))}${hw(he(n,Et),t)}`}function n8(n,t,r="auto",i){let s=he(n,Ht),c=he(n,qt),o=he(n,Xt),u=he(n,Dr),A=he(n,Nr),S=he(n,$r),y=he(n,jr),R=he(n,Ur),ee=he(n,Lr);if(i){const{unit:ae,increment:te,roundingMode:fe}=i;({year:s,month:c,day:o,hour:u,minute:A,second:S,millisecond:y,microsecond:R,nanosecond:ee}=$w(s,c,o,u,A,S,y,R,ee,te,ae,fe))}return`${Lu(s)}-${Gn(c)}-${Gn(o)}T${Gn(u)}:${Gn(A)}${Yy(S,y,R,ee,t)}${hw(he(n,Et),r)}`}function i8(n,t="auto"){let r=`${Gn(he(n,qt))}-${Gn(he(n,Xt))}`;const i=qi(he(n,Et));("always"===t||"critical"===t||"iso8601"!==i)&&(r=`${Lu(he(n,Ht))}-${r}`);const s=pw(i,t);return s&&(r+=s),r}function s8(n,t="auto"){let r=`${Lu(he(n,Ht))}-${Gn(he(n,qt))}`;const i=qi(he(n,Et));("always"===t||"critical"===t||"iso8601"!==i)&&(r+=`-${Gn(he(n,Xt))}`);const s=pw(i,t);return s&&(r+=s),r}function o8(n,t,r="auto",i="auto",s="auto",c){let o=he(n,rs);if(c){const{unit:y,increment:R,roundingMode:ee}=c,ae=sm(he(n,wr),R,y,ee);o=new(Lt("%Temporal.Instant%"))(ae)}const u=he(n,En),A=po(u,o,"iso8601");let S=`${Lu(he(A,Ht))}-${Gn(he(A,qt))}-${Gn(he(A,Xt))}T${Gn(he(A,Dr))}:${Gn(he(A,Nr))}${Yy(he(A,$r),he(A,jr),he(A,Ur),he(A,Lr),t)}`;return"never"!==s&&(S+=a8(Ba(u,o))),"never"!==i&&(S+=`[${"critical"===i?"!":""}${qh(u)}]`),S+=hw(he(n,Et),r),S}function qf(n){return j8.test(Oh(n))}function Bd(n){const t=j8.exec(Oh(n));if(!t)throw new RangeError(`invalid time zone offset: ${n}`);return("-"===t[1]||"\u2212"===t[1]?-1:1)*(1e9*(60*(60*+t[2]+ +(t[3]||0))+ +(t[4]||0))+ +((t[5]||0)+"000000000").slice(0,9))}function Mw(n){return qf(n)?Xy(Bd(n)):zx(Oh(n)).resolvedOptions().timeZone}function Uc(n,t){const{year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S,nanosecond:y}=d8(n,t),R=r%400,ee=(r-R)/400,ae=Ne.multiply(Ne.BigInt(146097),sc),te=Rd(R,i,s,c,o,u,A,S,y),fe=Ne.add(te,Ne.multiply(ae,Ne.BigInt(ee)));return Ne.toNumber(Ne.subtract(fe,t))}function Xy(n){const t=n<0?"-":"+",r=zn(n),i=r%1e9,s=ro(r/1e9)%60,c=ro(r/6e10)%60,o=Gn(ro(r/36e11)),u=Gn(c),A=Gn(s);let S="";if(i){let y=`${i}`.padStart(9,"0");for(;"0"===y[y.length-1];)y=y.slice(0,-1);S=`:${A}.${y}`}else s&&(S=`:${A}`);return`${t}${o}:${u}${S}`}function a8(n){let t=Ne.toNumber(yo(Ne.BigInt(n),Cx,"halfExpand"));const r=t<0?"-":"+";t=zn(t);const i=t/6e10%60;return`${r}${Gn(ro(t/36e11))}:${Gn(i)}`}function Rd(n,t,r,i,s,c,o,u,A){const S=new Date;S.setUTCHours(i,s,c,o),S.setUTCFullYear(n,t-1,r);const y=S.getTime();if(Py(y))return null;let R=Ne.multiply(Ne.BigInt(y),lo);return R=Ne.add(R,Ne.multiply(Ne.BigInt(u),hn)),R=Ne.add(R,Ne.BigInt(A)),Ne.lessThan(R,Ch)||Ne.greaterThan(R,Nf)?null:R}function c8(n){const{quotient:t,remainder:r}=li(n,lo);let i=Ne.toNumber(t),s=Ne.toNumber(r);s<0&&(s+=1e6,i-=1);const c=ro(s/1e3)%1e3,o=s%1e3,u=new Date(i);return{epochMilliseconds:i,year:u.getUTCFullYear(),month:u.getUTCMonth()+1,day:u.getUTCDate(),hour:u.getUTCHours(),minute:u.getUTCMinutes(),second:u.getUTCSeconds(),millisecond:u.getUTCMilliseconds(),microsecond:c,nanosecond:o}}function d8(n,t){const{epochMilliseconds:r,millisecond:i,microsecond:s,nanosecond:c}=c8(t),{year:o,month:u,day:A,hour:S,minute:y,second:R}=(te=r,function(Pe){const Te=Pe.split(/[^\w]+/);if(7!==Te.length)throw new RangeError(`expected 7 parts in "${Pe}`);const Ae=+Te[0],Ce=+Te[1];let je=+Te[2];const Le=Te[3].toUpperCase();if("B"===Le||"BC"===Le)je=1-je;else if("A"!==Le&&"AD"!==Le)throw new RangeError(`Unknown era ${Le} in "${Pe}`);let ze=+Te[4];24===ze&&(ze=0);const $e=+Te[5],Ye=+Te[6];if(!(Bs(je)&&Bs(Ae)&&Bs(Ce)&&Bs(ze)&&Bs($e)&&Bs(Ye)))throw new RangeError(`Invalid number in "${Pe}`);return{year:je,month:Ae,day:Ce,hour:ze,minute:$e,second:Ye}}(zx(n).format(new Date(te))));var te;return Pw(o,u,A,S,y,R,i,s,c)}function u8(n,t){return Ne.lessThan(n,t)?t:n}function f8(){return Ne.add(Uw(),GC)}function l8(n,t){if(Ne.lessThan(t,$f))return l8(n,$f);const r=Ne.add(t,Dx),i=u8(f8(),r);let s=u8($f,t);const c=Uc(n,s);let o=s,u=c;for(;c===u&&Ne.lessThan(Ne.BigInt(s),i);){if(o=Ne.add(s,Nx),Ne.greaterThan(o,Nf))return null;u=Uc(n,o),c===u&&(s=o)}return c===u?null:U8(A=>Uc(n,A),s,o,c,u)}function Tw(n,t){const r=f8(),i=Ne.greaterThan(t,r),s=i?Ne.subtract(t,Dx):$f;if("Africa/Casablanca"===n||"Africa/El_Aaiun"===n){const S=he(Pa("2088-01-01T00Z"),wr);if(Ne.lessThan(S,t))return Tw(n,S)}let c=Ne.subtract(t,Df);if(Ne.lessThan(c,$f))return null;const o=Uc(n,c);let u=c,A=o;for(;o===A&&Ne.greaterThan(c,s);){if(u=Ne.subtract(c,Nx),Ne.lessThan(u,$f))return null;A=Uc(n,u),o===A&&(c=u)}if(o===A){if(i){const S=Ne.subtract(r,sc);return Tw(n,S)}return null}return U8(S=>Uc(n,S),u,c,A,o)}function kd(n){return void 0!==n&&n%4==0&&(n%100!=0||n%400==0)}function Lc(n,t){return{standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]}[kd(n)?"leapyear":"standard"][t-1]}function Iw(n,t,r){const i=t+(t<3?10:-2),s=n-(t<3?1:0),c=ro(s/100),o=s-100*c,u=(r+ro(2.6*i-.2)+(o+ro(o/4))+(ro(c/4)-2*c))%7;return u+(u<=0?7:0)}function Qy(n,t,r){let i=r;for(let s=t-1;s>0;s--)i+=Lc(n,s);return i}function h8(n,t,r){const i=Qy(n,t,r),s=Iw(n,t,r)||7,c=Iw(n,1,1),o=ro((i-s+10)/7);return o<1?5===c||6===c&&kd(n-1)?{week:53,year:n-1}:{week:52,year:n-1}:53===o&&(kd(n)?366:365)-i<4-s?{week:1,year:n+1}:{week:o,year:n}}function ac(n,t,r,i,s,c,o,u,A,S){for(const y of[n,t,r,i,s,c,o,u,A,S])if(0!==y)return y<0?-1:1;return 0}function em(n,t){let r=n,i=t;if(!Bs(r)||!Bs(i))throw new RangeError("infinity is out of range");return i-=1,r+=ro(i/12),i%=12,i<0&&(i+=12),i+=1,{year:r,month:i}}function tm(n,t,r){let i=n,s=t,c=r;if(!Bs(c))throw new RangeError("infinity is out of range");({year:i,month:s}=em(i,s));const o=146097;if(zn(c)>o){const S=Ou(c/o);i+=400*S,c-=S*o}let u=0,A=s>2?i:i-1;for(;u=kd(A)?366:365,c<-u;)i-=1,A-=1,c+=u;for(A+=1;u=kd(A)?366:365,c>u;)i+=1,A+=1,c-=u;for(;c<1;)({year:i,month:s}=em(i,s-1)),c+=Lc(i,s);for(;c>Lc(i,s);)c-=Lc(i,s),({year:i,month:s}=em(i,s+1));return{year:i,month:s,day:c}}function Pw(n,t,r,i,s,c,o,u,A){const{deltaDays:S,hour:y,minute:R,second:ee,millisecond:ae,microsecond:te,nanosecond:fe}=Fc(i,s,c,o,u,A),{year:we,month:Pe,day:Te}=tm(n,t,r+S);return{year:we,month:Pe,day:Te,hour:y,minute:R,second:ee,millisecond:ae,microsecond:te,nanosecond:fe}}function Fc(n,t,r,i,s,c){let o,u=Ne.BigInt(n),A=Ne.BigInt(t),S=Ne.BigInt(r),y=Ne.BigInt(i),R=Ne.BigInt(s),ee=Ne.BigInt(c);return({quotient:o,remainder:ee}=zu(ee,hn)),R=Ne.add(R,o),({quotient:o,remainder:R}=zu(R,hn)),y=Ne.add(y,o),({quotient:o,remainder:y}=zu(y,hn)),S=Ne.add(S,o),({quotient:o,remainder:S}=zu(S,nc)),A=Ne.add(A,o),({quotient:o,remainder:A}=zu(A,nc)),u=Ne.add(u,o),({quotient:o,remainder:u}=zu(u,kx)),{deltaDays:Ne.toNumber(o),hour:Ne.toNumber(u),minute:Ne.toNumber(A),second:Ne.toNumber(S),millisecond:Ne.toNumber(y),microsecond:Ne.toNumber(R),nanosecond:Ne.toNumber(ee)}}function Zf(n,t,r,i,s,c,o,u){const A=Ne.BigInt(n);let S=Ne.BigInt(o);0!==n&&(S=Ne.subtract(Ne.BigInt(o),Ne.BigInt(u)));const y=Ne.add(Ne.BigInt(t),Ne.multiply(A,Ne.BigInt(24))),R=Ne.add(Ne.BigInt(r),Ne.multiply(y,nc)),ee=Ne.add(Ne.BigInt(i),Ne.multiply(R,nc)),ae=Ne.add(Ne.BigInt(s),Ne.multiply(ee,hn)),te=Ne.add(Ne.BigInt(c),Ne.multiply(ae,hn));return Ne.add(Ne.BigInt(S),Ne.multiply(te,hn))}function Bw(n,t){const r=Lt("%Temporal.Instant%"),i=Cf(Ne.toNumber(n));let s=Ne.BigInt(n),c=864e11;if(0===i)return{days:0,nanoseconds:ni,dayLengthNs:c};if(!rr(t)){let Ae;return({quotient:Ae,remainder:s}=li(s,Ne.BigInt(c))),{days:Ne.toNumber(Ae),nanoseconds:s,dayLengthNs:c}}const o=he(t,wr),u=he(t,rs),A=Ne.add(o,s),S=new r(A),y=he(t,En),R=he(t,Et),ee=po(y,u,R),ae=po(y,S,R);let{days:te}=Cw(he(ee,Ht),he(ee,qt),he(ee,Xt),he(ee,Dr),he(ee,Nr),he(ee,$r),he(ee,jr),he(ee,Ur),he(ee,Lr),he(ae,Ht),he(ae,qt),he(ae,Xt),he(ae,Dr),he(ae,Nr),he(ae,$r),he(ae,jr),he(ae,Ur),he(ae,Lr),R,"day",ns(null)),fe=Ro(u,y,R,0,0,0,te,0,0,0,0,0,0),we=Ne.BigInt(te);if(1===i)for(;Ne.greaterThan(we,ni)&&Ne.greaterThan(fe,A);)we=Ne.subtract(we,Df),fe=Ro(u,y,R,0,0,0,Ne.toNumber(we),0,0,0,0,0,0);s=Ne.subtract(A,fe);let Pe=!1,Te=new r(fe);do{const Ae=Ro(Te,y,R,0,0,0,i,0,0,0,0,0,0),Ce=he(Te,wr);c=Ne.toNumber(Ne.subtract(Ae,Ce)),Pe=Ne.greaterThanOrEqual(Ne.multiply(Ne.subtract(s,Ne.BigInt(c)),Ne.BigInt(i)),ni),Pe&&(s=Ne.subtract(s,Ne.BigInt(c)),Te=new r(Ae),we=Ne.add(we,Ne.BigInt(i)))}while(Pe);if(!Io(we)&&jx(we)!==i)throw new RangeError("Time zone or calendar converted nanoseconds into a number of days with the opposite sign");if(!Io(s)&&jx(s)!==i)throw Oy(s)&&1===i?new Error("assert not reached"):new RangeError("Time zone or calendar ended up with a remainder of nanoseconds with the opposite sign");if(Ne.greaterThanOrEqual(Ta(s),Ta(Ne.BigInt(c))))throw new Error("assert not reached");return{days:Ne.toNumber(we),nanoseconds:s,dayLengthNs:zn(c)}}function Qo(n,t,r,i,s,c,o,u,A){let S=p8(n,t,r,i,s,c,o,u,A);if("positive overflow"===S||"negative overflow"===S)throw new RangeError("Duration out of range");return S}function p8(n,t,r,i,s,c,o,u,A){let S,y,R,ee,ae,te,fe=n;if(rr(A)){const ze=Ro(he(A,rs),he(A,En),he(A,Et),0,0,0,fe,t,r,i,s,c,o),$e=he(A,wr);S=Ne.subtract(ze,$e)}else S=Zf(fe,t,r,i,s,c,o,0);"year"===u||"month"===u||"week"===u||"day"===u?({days:fe,nanoseconds:S}=Bw(S,A)):fe=0;const we=Ne.lessThan(S,ni)?-1:1;switch(S=Ta(S),y=R=ee=ae=te=ni,u){case"year":case"month":case"week":case"day":case"hour":({quotient:y,remainder:S}=li(S,hn)),({quotient:R,remainder:y}=li(y,hn)),({quotient:ee,remainder:R}=li(R,hn)),({quotient:ae,remainder:ee}=li(ee,nc)),({quotient:te,remainder:ae}=li(ae,nc));break;case"minute":({quotient:y,remainder:S}=li(S,hn)),({quotient:R,remainder:y}=li(y,hn)),({quotient:ee,remainder:R}=li(R,hn)),({quotient:ae,remainder:ee}=li(ee,nc));break;case"second":({quotient:y,remainder:S}=li(S,hn)),({quotient:R,remainder:y}=li(y,hn)),({quotient:ee,remainder:R}=li(R,hn));break;case"millisecond":({quotient:y,remainder:S}=li(S,hn)),({quotient:R,remainder:y}=li(y,hn));break;case"microsecond":({quotient:y,remainder:S}=li(S,hn));break;case"nanosecond":break;default:throw new Error("assert not reached")}const Pe=Ne.toNumber(te)*we,Te=Ne.toNumber(ae)*we,Ae=Ne.toNumber(ee)*we,Ce=Ne.toNumber(R)*we,je=Ne.toNumber(y)*we,Le=Ne.toNumber(S)*we;for(const ze of[fe,Pe,Te,Ae,Ce,je,Le])if(!Bs(ze))return 1===we?"positive overflow":"negative overflow";return{days:fe,hours:Pe,minutes:Te,seconds:Ae,milliseconds:Ce,microseconds:je,nanoseconds:Le}}function rm(n,t,r,i,s,c){const o=Lt("%Temporal.Duration%"),u=ac(n,t,r,i,0,0,0,0,0,0);if(0===u)return{years:n,months:t,weeks:r,days:i};const A=Ne.BigInt(u);let S,y,R=Ne.BigInt(n),ee=Ne.BigInt(t),ae=Ne.BigInt(r),te=Ne.BigInt(i);c&&(y=Sn(c),S=he(y,Et));const fe=new o(u),we=new o(0,u),Pe=new o(0,0,u);switch(s){case"year":break;case"month":{if(!S)throw new RangeError("a starting point is required for months balancing");let Te,Ae;for("string"!=typeof S&&(Te=vn(S,"dateAdd"),Ae=vn(S,"dateUntil"));!Io(R);){const Ce=Gi(S,y,fe,void 0,Te),je=ns(null);je.largestUnit="month";const Le=Pd(S,y,Ce,je,Ae),ze=Ne.BigInt(he(Le,ji));y=Ce,ee=Ne.add(ee,ze),R=Ne.subtract(R,A)}}break;case"week":{if(!S)throw new RangeError("a starting point is required for weeks balancing");const Te="string"!=typeof S?vn(S,"dateAdd"):void 0;for(;!Io(R);){let Ae;({relativeTo:y,days:Ae}=ss(S,y,fe,Te)),te=Ne.add(te,Ne.BigInt(Ae)),R=Ne.subtract(R,A)}for(;!Io(ee);){let Ae;({relativeTo:y,days:Ae}=ss(S,y,we,Te)),te=Ne.add(te,Ne.BigInt(Ae)),ee=Ne.subtract(ee,A)}break}default:{if(Io(R)&&Io(ee)&&Io(ae))break;if(!S)throw new RangeError("a starting point is required for balancing calendar units");const Te="string"!=typeof S?vn(S,"dateAdd"):void 0;for(;!Io(R);){let Ae;({relativeTo:y,days:Ae}=ss(S,y,fe,Te)),te=Ne.add(te,Ne.BigInt(Ae)),R=Ne.subtract(R,A)}for(;!Io(ee);){let Ae;({relativeTo:y,days:Ae}=ss(S,y,we,Te)),te=Ne.add(te,Ne.BigInt(Ae)),ee=Ne.subtract(ee,A)}for(;!Io(ae);){let Ae;({relativeTo:y,days:Ae}=ss(S,y,Pe,Te)),te=Ne.add(te,Ne.BigInt(Ae)),ae=Ne.subtract(ae,A)}break}}return{years:Ne.toNumber(R),months:Ne.toNumber(ee),weeks:Ne.toNumber(ae),days:Ne.toNumber(te)}}function y8(n,t,r,i,s){if(rr(n)){const c=he(n,rs),o=he(n,En),u=he(n,Et),A=Ba(o,c),S=Ro(c,o,u,t,r,i,s,0,0,0,0,0,0);return Ba(o,new(Lt("%Temporal.Instant%"))(S))-A}return 0}function m8(n){return new(Lt("%Temporal.Duration%"))(-he(n,xs),-he(n,ji),-he(n,Gs),-he(n,Es),-he(n,Ss),-he(n,As),-he(n,Ms),-he(n,Ts),-he(n,Is),-he(n,Ps))}function oo(n,t,r){return LC(r,FC(t,n))}function g8(n,t,r){const i=oo(t,1,12);return{year:n,month:i,day:oo(r,1,Lc(n,i))}}function Zi(n,t,r){if(n<t||n>r)throw new RangeError(`value out of range: ${t} <= ${n} <= ${r}`)}function cc(n,t,r){Zi(t,1,12),Zi(r,1,Lc(n,t))}function v8(n,t,r){w8(n,t,r,12,0,0,0,0,0)}function nm(n,t,r,i,s,c){Zi(n,0,23),Zi(t,0,59),Zi(r,0,59),Zi(i,0,999),Zi(s,0,999),Zi(c,0,999)}function Rw(n,t,r,i,s,c,o,u,A){cc(n,t,r),nm(i,s,c,o,u,A)}function w8(n,t,r,i,s,c,o,u,A){if(Zi(n,Ry,ky),n===Ry&&null==Rd(n,t,r+1,i,s,c,o,u,A-1)||n===ky&&null==Rd(n,t,r-1,i,s,c,o,u,A+1))throw new RangeError("DateTime outside of supported range")}function Fu(n){if(Ne.lessThan(n,Ch)||Ne.greaterThan(n,Nf))throw new RangeError("Instant outside of supported range")}function im(n,t,r,i,s,c,o,u,A,S){const y=ac(n,t,r,i,s,c,o,u,A,S);for(const R of[n,t,r,i,s,c,o,u,A,S]){if(!Bs(R))throw new RangeError("infinite values not allowed as duration fields");const ee=Cf(R);if(0!==ee&&ee!==y)throw new RangeError("mixed-sign values not allowed as duration fields")}}function kw(n,t,r,i,s,c,o){switch(o){case"year":case"month":{const u=-Od(n,t,r,i,s,c);if(0===u)return{years:0,months:0,weeks:0,days:0};const A={year:n,month:t,day:r},S={year:i,month:s,day:c};let y=S.year-A.year,R=Ku(n,t,r,y,0,0,0,"constrain"),ee=-Od(R.year,R.month,R.day,i,s,c);if(0===ee)return"year"===o?{years:y,months:0,weeks:0,days:0}:{years:0,months:12*y,weeks:0,days:0};let ae=S.month-A.month;if(ee!==u&&(y-=u,ae+=12*u),R=Ku(n,t,r,y,ae,0,0,"constrain"),ee=-Od(R.year,R.month,R.day,i,s,c),0===ee)return"year"===o?{years:y,months:ae,weeks:0,days:0}:{years:0,months:ae+12*y,weeks:0,days:0};ee!==u&&(ae-=u,ae===-u&&(y-=u,ae=11*u),R=Ku(n,t,r,y,ae,0,0,"constrain"));let te=0;return te=R.month===S.month?S.day-R.day:u<0?-R.day-(Lc(S.year,S.month)-S.day):S.day+(Lc(R.year,R.month)-R.day),"month"===o&&(ae+=12*y,y=0),{years:y,months:ae,weeks:0,days:te}}case"week":case"day":{let u,A,S;Od(n,t,r,i,s,c)<0?(A={year:n,month:t,day:r},u={year:i,month:s,day:c},S=1):(A={year:i,month:s,day:c},u={year:n,month:t,day:r},S=-1);let y=Qy(u.year,u.month,u.day)-Qy(A.year,A.month,A.day);for(let ee=A.year;ee<u.year;++ee)y+=kd(ee)?366:365;let R=0;return"week"===o&&(R=ro(y/7),y%=7),R*=S,y*=S,{years:0,months:0,weeks:R,days:y}}default:throw new Error("assert not reached")}}function b8(n,t,r,i,s,c,o,u,A,S,y,R){let ee=o-n,ae=u-t,te=A-r,fe=S-i,we=y-s,Pe=R-c;const Te=ac(0,0,0,0,ee,ae,te,fe,we,Pe);ee*=Te,ae*=Te,te*=Te,fe*=Te,we*=Te,Pe*=Te;let Ae=0;if(({deltaDays:Ae,hour:ee,minute:ae,second:te,millisecond:fe,microsecond:we,nanosecond:Pe}=Fc(ee,ae,te,fe,we,Pe)),0!=Ae)throw new Error("assertion failure in DifferenceTime: _bt_.[[Days]] should be 0");return ee*=Te,ae*=Te,te*=Te,fe*=Te,we*=Te,Pe*=Te,{hours:ee,minutes:ae,seconds:te,milliseconds:fe,microseconds:we,nanoseconds:Pe}}function Ow(n,t,r,i,s,c){const o=Ne.subtract(t,n);let u=0,A=0,S=Ne.toNumber(Ne.remainder(o,hn)),y=Ne.toNumber(Ne.remainder(Ne.divide(o,hn),hn)),R=Ne.toNumber(Ne.remainder(Ne.divide(o,lo),hn)),ee=Ne.toNumber(Ne.divide(o,ic));return({hours:u,minutes:A,seconds:ee,milliseconds:R,microseconds:y,nanoseconds:S}=Kc(0,0,0,0,0,0,ee,R,y,S,r,i,c)),Qo(0,u,A,ee,R,y,S,s)}function Cw(n,t,r,i,s,c,o,u,A,S,y,R,ee,ae,te,fe,we,Pe,Te,Ae,Ce){let je=n,Le=t,ze=r,{hours:$e,minutes:Ye,seconds:ut,milliseconds:ct,microseconds:vt,nanoseconds:at}=b8(i,s,c,o,u,A,ee,ae,te,fe,we,Pe);const ft=ac(0,0,0,0,$e,Ye,ut,ct,vt,at);Od(S,y,R,je,Le,ze)===-ft&&(({year:je,month:Le,day:ze}=tm(je,Le,ze-ft)),({hours:$e,minutes:Ye,seconds:ut,milliseconds:ct,microseconds:vt,nanoseconds:at}=Qo(-ft,$e,Ye,ut,ct,vt,at,Ae)));const tt=Bo(je,Le,ze,Te),st=Bo(S,y,R,Te),Je=Nu("day",Ae),lt=Dd(Ce);lt.largestUnit=Je;let{years:ot,months:yt,weeks:kt,days:Nt}=Pd(Te,tt,st,lt);return({days:Nt,hours:$e,minutes:Ye,seconds:ut,milliseconds:ct,microseconds:vt,nanoseconds:at}=Qo(Nt,$e,Ye,ut,ct,vt,at,Ae)),{years:ot,months:yt,weeks:kt,days:Nt,hours:$e,minutes:Ye,seconds:ut,milliseconds:ct,microseconds:vt,nanoseconds:at}}function _8(n,t,r,i,s,c){const o=Ne.subtract(t,n);if(Ne.equal(o,ni))return{years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0,milliseconds:0,microseconds:0,nanoseconds:0};const u=Lt("%Temporal.Instant%"),A=new u(n),S=new u(t),y=po(r,A,i),R=po(r,S,i);let{years:ee,months:ae,weeks:te,days:fe}=Cw(he(y,Ht),he(y,qt),he(y,Xt),he(y,Dr),he(y,Nr),he(y,$r),he(y,jr),he(y,Ur),he(y,Lr),he(R,Ht),he(R,qt),he(R,Xt),he(R,Dr),he(R,Nr),he(R,$r),he(R,jr),he(R,Ur),he(R,Lr),i,s,c);const we=Ro(A,r,i,ee,ae,te,0,0,0,0,0,0,0);let Pe=Ne.subtract(t,we);const Te=Wi(we,r,i);({nanoseconds:Pe,days:fe}=Bw(Pe,Te));const{hours:Ae,minutes:Ce,seconds:je,milliseconds:Le,microseconds:ze,nanoseconds:$e}=Qo(0,0,0,0,0,0,Ne.toNumber(Pe),"hour");return{years:ee,months:ae,weeks:te,days:fe,hours:Ae,minutes:Ce,seconds:je,milliseconds:Le,microseconds:ze,nanoseconds:$e}}function Jf(n,t,r,i,s,c){const o=Dh.reduce((ae,te)=>{const fe=te[0],we=te[1];return"datetime"!==r&&te[2]!==r||i.includes(we)||ae.push(we,fe),ae},[]);let u=no(t,"largestUnit",r,"auto");if(i.includes(u))throw new RangeError(`largestUnit must be one of ${o.join(", ")}, not ${u}`);const A=Kf(t);let S=Ia(t,"trunc");"since"===n&&(S=function(te){switch(te){case"ceil":return"floor";case"floor":return"ceil";case"halfCeil":return"halfFloor";case"halfFloor":return"halfCeil";default:return te}}(S));const y=no(t,"smallestUnit",r,s);if(i.includes(y))throw new RangeError(`smallestUnit must be one of ${o.join(", ")}, not ${y}`);const R=Nu(c,y);if("auto"===u&&(u=R),Nu(u,y)!==u)throw new RangeError(`largestUnit ${u} cannot be smaller than smallestUnit ${y}`);const ee={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[y];return void 0!==ee&&zf(A,ee,!1),{largestUnit:u,roundingIncrement:A,roundingMode:S,smallestUnit:y}}function x8(n,t,r,i){const s="since"===n?-1:1,c=Pa(r),o=Jf(n,Dd(i),"time",[],"nanosecond","second"),u=he(t,wr),A=he(c,wr);let{hours:S,minutes:y,seconds:R,milliseconds:ee,microseconds:ae,nanoseconds:te}=Ow(u,A,o.roundingIncrement,o.smallestUnit,o.largestUnit,o.roundingMode);return new(Lt("%Temporal.Duration%"))(0,0,0,0,s*S,s*y,s*R,s*ee,s*ae,s*te)}function E8(n,t,r,i){const s="since"===n?-1:1,c=Sn(r),o=he(t,Et);Zy(o,he(c,Et),"compute difference between dates");const u=Dd(i),A=Jf(n,u,"date",[],"day","day");u.largestUnit=A.largestUnit;let{years:S,months:y,weeks:R,days:ee}=Pd(o,t,c,u);return"day"===A.smallestUnit&&1===A.roundingIncrement||({years:S,months:y,weeks:R,days:ee}=Kc(S,y,R,ee,0,0,0,0,0,0,A.roundingIncrement,A.smallestUnit,A.roundingMode,t)),new(Lt("%Temporal.Duration%"))(s*S,s*y,s*R,s*ee,0,0,0,0,0,0)}function S8(n,t,r,i){const s="since"===n?-1:1,c=$u(r),o=he(t,Et);Zy(o,he(c,Et),"compute difference between dates");const u=Dd(i),A=Jf(n,u,"datetime",[],"nanosecond","day");let{years:S,months:y,weeks:R,days:ee,hours:ae,minutes:te,seconds:fe,milliseconds:we,microseconds:Pe,nanoseconds:Te}=Cw(he(t,Ht),he(t,qt),he(t,Xt),he(t,Dr),he(t,Nr),he(t,$r),he(t,jr),he(t,Ur),he(t,Lr),he(c,Ht),he(c,qt),he(c,Xt),he(c,Dr),he(c,Nr),he(c,$r),he(c,jr),he(c,Ur),he(c,Lr),o,A.largestUnit,u);const Ae=Gf(t);return({years:S,months:y,weeks:R,days:ee,hours:ae,minutes:te,seconds:fe,milliseconds:we,microseconds:Pe,nanoseconds:Te}=Kc(S,y,R,ee,ae,te,fe,we,Pe,Te,A.roundingIncrement,A.smallestUnit,A.roundingMode,Ae)),({days:ee,hours:ae,minutes:te,seconds:fe,milliseconds:we,microseconds:Pe,nanoseconds:Te}=Qo(ee,ae,te,fe,we,Pe,Te,A.largestUnit)),new(Lt("%Temporal.Duration%"))(s*S,s*y,s*R,s*ee,s*ae,s*te,s*fe,s*we,s*Pe,s*Te)}function A8(n,t,r,i){const s="since"===n?-1:1,c=$c(r),o=Jf(n,Dd(i),"time",[],"nanosecond","hour");let{hours:u,minutes:A,seconds:S,milliseconds:y,microseconds:R,nanoseconds:ee}=b8(he(t,Dr),he(t,Nr),he(t,$r),he(t,jr),he(t,Ur),he(t,Lr),he(c,Dr),he(c,Nr),he(c,$r),he(c,jr),he(c,Ur),he(c,Lr));return({hours:u,minutes:A,seconds:S,milliseconds:y,microseconds:R,nanoseconds:ee}=Kc(0,0,0,0,u,A,S,y,R,ee,o.roundingIncrement,o.smallestUnit,o.roundingMode)),({hours:u,minutes:A,seconds:S,milliseconds:y,microseconds:R,nanoseconds:ee}=Qo(0,u,A,S,y,R,ee,o.largestUnit)),new(Lt("%Temporal.Duration%"))(0,0,0,0,s*u,s*A,s*S,s*y,s*R,s*ee)}function M8(n,t,r,i){const s="since"===n?-1:1,c=Lh(r),o=he(t,Et);Zy(o,he(c,Et),"compute difference between months");const u=Dd(i),A=Jf(n,u,"date",["week","day"],"month","year");u.largestUnit=A.largestUnit;const S=vi(o,["monthCode","year"]),y=Vr(t,S,[]);y.day=1;const R=jc(o,y),ee=Vr(c,S,[]);ee.day=1;const ae=jc(o,ee);let{years:te,months:fe}=Pd(o,R,ae,u);return"month"===A.smallestUnit&&1===A.roundingIncrement||({years:te,months:fe}=Kc(te,fe,0,0,0,0,0,0,0,0,A.roundingIncrement,A.smallestUnit,A.roundingMode,R)),new(Lt("%Temporal.Duration%"))(s*te,s*fe,0,0,0,0,0,0,0,0)}function T8(n,t,r,i){const s="since"===n?-1:1,c=Fh(r),o=he(t,Et);Zy(o,he(c,Et),"compute difference between dates");const u=Dd(i),A=Jf(n,u,"datetime",[],"nanosecond","hour");u.largestUnit=A.largestUnit;const S=he(t,wr),y=he(c,wr);let R,ee,ae,te,fe,we,Pe,Te,Ae,Ce;if("year"!==A.largestUnit&&"month"!==A.largestUnit&&"week"!==A.largestUnit&&"day"!==A.largestUnit)R=0,ee=0,ae=0,te=0,({hours:fe,minutes:we,seconds:Pe,milliseconds:Te,microseconds:Ae,nanoseconds:Ce}=Ow(S,y,A.roundingIncrement,A.smallestUnit,A.largestUnit,A.roundingMode));else{const je=he(t,En);if(!Qx(je,he(c,En)))throw new RangeError("When calculating difference between time zones, largestUnit must be 'hours' or smaller because day lengths can vary between time zones due to DST or time zone offset changes.");({years:R,months:ee,weeks:ae,days:te,hours:fe,minutes:we,seconds:Pe,milliseconds:Te,microseconds:Ae,nanoseconds:Ce}=_8(S,y,je,o,A.largestUnit,u)),({years:R,months:ee,weeks:ae,days:te,hours:fe,minutes:we,seconds:Pe,milliseconds:Te,microseconds:Ae,nanoseconds:Ce}=Kc(R,ee,ae,te,fe,we,Pe,Te,Ae,Ce,A.roundingIncrement,A.smallestUnit,A.roundingMode,t)),({years:R,months:ee,weeks:ae,days:te,hours:fe,minutes:we,seconds:Pe,milliseconds:Te,microseconds:Ae,nanoseconds:Ce}=$8(R,ee,ae,te,fe,we,Pe,Te,Ae,Ce,A.roundingIncrement,A.smallestUnit,A.roundingMode,t))}return new(Lt("%Temporal.Duration%"))(s*R,s*ee,s*ae,s*te,s*fe,s*we,s*Pe,s*Te,s*Ae,s*Ce)}function Ku(n,t,r,i,s,c,o,u){let A=n,S=t,y=r,R=c,ee=o;return A+=i,S+=s,({year:A,month:S}=em(A,S)),({year:A,month:S,day:y}=Dy(A,S,y,u)),ee+=7*R,y+=ee,({year:A,month:S,day:y}=tm(A,S,y)),{year:A,month:S,day:y}}function I8(n,t,r,i,s,c,o,u,A,S,y,R){let ee=n,ae=t,te=r,fe=i,we=s,Pe=c;ee+=o,ae+=u,te+=A,fe+=S,we+=y,Pe+=R;let Te=0;return({deltaDays:Te,hour:ee,minute:ae,second:te,millisecond:fe,microsecond:we,nanosecond:Pe}=Fc(ee,ae,te,fe,we,Pe)),{deltaDays:Te,hour:ee,minute:ae,second:te,millisecond:fe,microsecond:we,nanosecond:Pe}}function P8(n,t,r,i,s,c,o,u,A,S,y,R,ee,ae,te,fe,we,Pe,Te,Ae,Ce){const je=Nu(gw(n,t,r,i,s,c,o,u,A,S),gw(y,R,ee,ae,te,fe,we,Pe,Te,Ae));let Le,ze,$e,Ye,ut,ct,vt,at,ft,tt;if(Ce)if(Zr(Ce)){const st=Lt("%Temporal.Duration%"),Je=he(Ce,Et),lt=new st(n,t,r,i,0,0,0,0,0,0),ot=new st(y,R,ee,ae,0,0,0,0,0,0),yt="string"!=typeof Je?vn(Je,"dateAdd"):void 0,kt=Gi(Je,Ce,lt,void 0,yt),Nt=Gi(Je,kt,ot,void 0,yt),Qe=Nu("day",je),Ut=ns(null);Ut.largestUnit=Qe,({years:Le,months:ze,weeks:$e,days:Ye}=Pd(Je,Ce,Nt,Ut)),({days:Ye,hours:ut,minutes:ct,seconds:vt,milliseconds:at,microseconds:ft,nanoseconds:tt}=Qo(Ye,Ne.add(Ne.BigInt(s),Ne.BigInt(te)),Ne.add(Ne.BigInt(c),Ne.BigInt(fe)),Ne.add(Ne.BigInt(o),Ne.BigInt(we)),Ne.add(Ne.BigInt(u),Ne.BigInt(Pe)),Ne.add(Ne.BigInt(A),Ne.BigInt(Te)),Ne.add(Ne.BigInt(S),Ne.BigInt(Ae)),je))}else{const st=Lt("%Temporal.Instant%"),Je=he(Ce,En),lt=he(Ce,Et),ot=Ro(he(Ce,rs),Je,lt,n,t,r,i,s,c,o,u,A,S),yt=Ro(new st(ot),Je,lt,y,R,ee,ae,te,fe,we,Pe,Te,Ae);"year"!==je&&"month"!==je&&"week"!==je&&"day"!==je?(Le=0,ze=0,$e=0,Ye=0,({hours:ut,minutes:ct,seconds:vt,milliseconds:at,microseconds:ft,nanoseconds:tt}=Ow(he(Ce,wr),yt,1,"nanosecond",je,"halfExpand"))):({years:Le,months:ze,weeks:$e,days:Ye,hours:ut,minutes:ct,seconds:vt,milliseconds:at,microseconds:ft,nanoseconds:tt}=_8(he(Ce,wr),yt,Je,lt,je,ns(null)))}else{if("year"===je||"month"===je||"week"===je)throw new RangeError("relativeTo is required for years, months, or weeks arithmetic");Le=ze=$e=0,({days:Ye,hours:ut,minutes:ct,seconds:vt,milliseconds:at,microseconds:ft,nanoseconds:tt}=Qo(i+ae,Ne.add(Ne.BigInt(s),Ne.BigInt(te)),Ne.add(Ne.BigInt(c),Ne.BigInt(fe)),Ne.add(Ne.BigInt(o),Ne.BigInt(we)),Ne.add(Ne.BigInt(u),Ne.BigInt(Pe)),Ne.add(Ne.BigInt(A),Ne.BigInt(Te)),Ne.add(Ne.BigInt(S),Ne.BigInt(Ae)),je))}return im(Le,ze,$e,Ye,ut,ct,vt,at,ft,tt),{years:Le,months:ze,weeks:$e,days:Ye,hours:ut,minutes:ct,seconds:vt,milliseconds:at,microseconds:ft,nanoseconds:tt}}function Dw(n,t,r,i,s,c,o){let u=ni;u=Ne.add(u,Ne.BigInt(o)),u=Ne.add(u,Ne.multiply(Ne.BigInt(c),hn)),u=Ne.add(u,Ne.multiply(Ne.BigInt(s),lo)),u=Ne.add(u,Ne.multiply(Ne.BigInt(i),ic)),u=Ne.add(u,Ne.multiply(Ne.BigInt(r),Ne.BigInt(6e10))),u=Ne.add(u,Ne.multiply(Ne.BigInt(t),Ne.BigInt(36e11)));const A=Ne.add(n,u);return Fu(A),A}function Nw(n,t,r,i,s,c,o,u,A,S,y,R,ee,ae,te,fe,we,Pe,Te,Ae,Ce){let je=ae,{deltaDays:Le,hour:ze,minute:$e,second:Ye,millisecond:ut,microsecond:ct,nanosecond:vt}=I8(i,s,c,o,u,A,te,fe,we,Pe,Te,Ae);je+=Le;const at=Lt("%Temporal.Duration%"),ft=Gi(S,Bo(n,t,r,S),new at(y,R,ee,je,0,0,0,0,0,0),Ce);return{year:he(ft,Ht),month:he(ft,qt),day:he(ft,Xt),hour:ze,minute:$e,second:Ye,millisecond:ut,microsecond:ct,nanosecond:vt}}function Ro(n,t,r,i,s,c,o,u,A,S,y,R,ee,ae){const te=Lt("%Temporal.Duration%");if(0===ac(i,s,c,o,0,0,0,0,0,0))return Dw(he(n,wr),u,A,S,y,R,ee);const fe=po(t,n,r),we=Gi(r,Bo(he(fe,Ht),he(fe,qt),he(fe,Xt),r),new te(i,s,c,o,0,0,0,0,0,0),ae),Pe=io(he(we,Ht),he(we,qt),he(we,Xt),he(fe,Dr),he(fe,Nr),he(fe,$r),he(fe,jr),he(fe,Ur),he(fe,Lr),r);return Dw(he(ks(t,Pe,"compatible"),wr),u,A,S,y,R,ee)}function B8(n,t,r,i){const s="subtract"===n?-1:1;let{years:c,months:o,weeks:u,days:A,hours:S,minutes:y,seconds:R,milliseconds:ee,microseconds:ae,nanoseconds:te}=Cu(r);const fe=jy(Xr(i));return({years:c,months:o,weeks:u,days:A,hours:S,minutes:y,seconds:R,milliseconds:ee,microseconds:ae,nanoseconds:te}=P8(he(t,xs),he(t,ji),he(t,Gs),he(t,Es),he(t,Ss),he(t,As),he(t,Ms),he(t,Ts),he(t,Is),he(t,Ps),s*c,s*o,s*u,s*A,s*S,s*y,s*R,s*ee,s*ae,s*te,fe)),new(Lt("%Temporal.Duration%"))(c,o,u,A,S,y,R,ee,ae,te)}function R8(n,t,r){const i="subtract"===n?-1:1,{hours:s,minutes:c,seconds:o,milliseconds:u,microseconds:A,nanoseconds:S}=function(ee,ae){let te=Cu(ee);for(const fe of["years","months","weeks","days"])if(0!==te[fe])throw new RangeError(`Duration field ${fe} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`);return te}(r),y=Dw(he(t,wr),i*s,i*c,i*o,i*u,i*A,i*S);return new(Lt("%Temporal.Instant%"))(y)}function k8(n,t,r,i){const s="subtract"===n?-1:1,{years:c,months:o,weeks:u,days:A,hours:S,minutes:y,seconds:R,milliseconds:ee,microseconds:ae,nanoseconds:te}=Cu(r),fe=Xr(i),we=he(t,Et),{year:Pe,month:Te,day:Ae,hour:Ce,minute:je,second:Le,millisecond:ze,microsecond:$e,nanosecond:Ye}=Nw(he(t,Ht),he(t,qt),he(t,Xt),he(t,Dr),he(t,Nr),he(t,$r),he(t,jr),he(t,Ur),he(t,Lr),we,s*c,s*o,s*u,s*A,s*S,s*y,s*R,s*ee,s*ae,s*te,fe);return io(Pe,Te,Ae,Ce,je,Le,ze,$e,Ye,we)}function O8(n,t,r){const i="subtract"===n?-1:1,{hours:s,minutes:c,seconds:o,milliseconds:u,microseconds:A,nanoseconds:S}=Cu(r);let{hour:y,minute:R,second:ee,millisecond:ae,microsecond:te,nanosecond:fe}=I8(he(t,Dr),he(t,Nr),he(t,$r),he(t,jr),he(t,Ur),he(t,Lr),i*s,i*c,i*o,i*u,i*A,i*S);return({hour:y,minute:R,second:ee,millisecond:ae,microsecond:te,nanosecond:fe}=Ny(y,R,ee,ae,te,fe,"reject")),new(Lt("%Temporal.PlainTime%"))(y,R,ee,ae,te,fe)}function C8(n,t,r,i){let s=Cu(r);"subtract"===n&&(s={years:-s.years,months:-s.months,weeks:-s.weeks,days:-s.days,hours:-s.hours,minutes:-s.minutes,seconds:-s.seconds,milliseconds:-s.milliseconds,microseconds:-s.microseconds,nanoseconds:-s.nanoseconds});let{years:c,months:o,weeks:u,days:A,hours:S,minutes:y,seconds:R,milliseconds:ee,microseconds:ae,nanoseconds:te}=s;({days:A}=Qo(A,S,y,R,ee,ae,te,"day"));const fe=Xr(i),we=he(t,Et),Pe=vi(we,["monthCode","year"]),Te=Vr(t,Pe,[]),Ae=ns(null);Uf(Ae,Te,[]),Te.day=1;let Ce=jc(we,Te);const je=ac(c,o,u,A,0,0,0,0,0,0),Le=vn(we,"dateAdd"),ze=Lt("%Temporal.Duration%");if(je<0){const ut=Gi(we,Ce,new ze(0,1,0,0,0,0,0,0,0,0),void 0,Le),ct=Gi(we,ut,new ze(0,0,0,-1,0,0,0,0,0,0),void 0,Le);Ae.day=Hh(we,ct),Ce=jc(we,Ae)}const $e=new ze(c,o,u,A,0,0,0,0,0,0),Ye=Dd(fe);return Uu(we,Vr(Gi(we,Ce,$e,fe,Le),Pe,[]),Ye)}function D8(n,t,r,i){const s="subtract"===n?-1:1,{years:c,months:o,weeks:u,days:A,hours:S,minutes:y,seconds:R,milliseconds:ee,microseconds:ae,nanoseconds:te}=Cu(r),fe=Xr(i),we=he(t,En),Pe=he(t,Et);return Wi(Ro(he(t,rs),we,Pe,s*c,s*o,s*u,s*A,s*S,s*y,s*R,s*ee,s*ae,s*te,fe),we,Pe)}function yo(n,t,r){if(Ne.equal(t,Df))return n;let{quotient:i,remainder:s}=li(n,t);if(Ne.equal(s,ni))return n;const c=Ne.lessThan(s,ni)?-1:1,o=Ta(Ne.multiply(s,Ne.BigInt(2))),u=Ne.equal(o,t),A=Ne.greaterThan(o,t);switch(r){case"ceil":c>0&&(i=Ne.add(i,Ne.BigInt(c)));break;case"floor":c<0&&(i=Ne.add(i,Ne.BigInt(c)));break;case"expand":i=Ne.add(i,Ne.BigInt(c));break;case"trunc":break;case"halfCeil":(A||u&&c>0)&&(i=Ne.add(i,Ne.BigInt(c)));break;case"halfFloor":(A||u&&c<0)&&(i=Ne.add(i,Ne.BigInt(c)));break;case"halfExpand":(A||u)&&(i=Ne.add(i,Ne.BigInt(c)));break;case"halfTrunc":A&&(i=Ne.add(i,Ne.BigInt(c)));break;case"halfEven":(A||u&&1===Ne.toNumber(Ne.remainder(Ta(i),Ne.BigInt(2))))&&(i=Ne.add(i,Ne.BigInt(c)))}return Ne.multiply(i,t)}function sm(n,t,r,i){let{remainder:s}=zu(n,sc);const c=Ne.subtract(n,s),o=yo(s,Ne.BigInt(L8[r]*t),i);return Ne.add(c,o)}function $w(n,t,r,i,s,c,o,u,A,S,y,R,ee=864e11){const{deltaDays:ae,hour:te,minute:fe,second:we,millisecond:Pe,microsecond:Te,nanosecond:Ae}=jw(i,s,c,o,u,A,S,y,R,ee),{year:Ce,month:je,day:Le}=tm(n,t,r+ae);return{year:Ce,month:je,day:Le,hour:te,minute:fe,second:we,millisecond:Pe,microsecond:Te,nanosecond:Ae}}function jw(n,t,r,i,s,c,o,u,A,S=864e11){let y=ni;switch(u){case"day":case"hour":y=Ne.BigInt(n);case"minute":y=Ne.add(Ne.multiply(y,nc),Ne.BigInt(t));case"second":y=Ne.add(Ne.multiply(y,nc),Ne.BigInt(r));case"millisecond":y=Ne.add(Ne.multiply(y,hn),Ne.BigInt(i));case"microsecond":y=Ne.add(Ne.multiply(y,hn),Ne.BigInt(s));case"nanosecond":y=Ne.add(Ne.multiply(y,hn),Ne.BigInt(c))}const R="day"===u?S:L8[u],ee=yo(y,Ne.BigInt(R*o),A),ae=Ne.toNumber(Ne.divide(ee,Ne.BigInt(R)));switch(u){case"day":return{deltaDays:ae,hour:0,minute:0,second:0,millisecond:0,microsecond:0,nanosecond:0};case"hour":return Fc(ae,0,0,0,0,0);case"minute":return Fc(n,ae,0,0,0,0);case"second":return Fc(n,t,ae,0,0,0);case"millisecond":return Fc(n,t,r,ae,0,0);case"microsecond":return Fc(n,t,r,i,ae,0);case"nanosecond":return Fc(n,t,r,i,s,ae);default:throw new Error(`Invalid unit ${u}`)}}function om(n,t){return kw(he(n,Ht),he(n,qt),he(n,Xt),he(t,Ht),he(t,qt),he(t,Xt),"day").days}function ss(n,t,r,i){const s=Gi(n,t,r,void 0,i);return{relativeTo:s,days:om(t,s)}}function N8(n,t,r,i,s){const c=he(n,En),o=he(n,Et);return Wi(Ro(he(n,rs),c,o,t,r,i,s,0,0,0,0,0,0),c,o)}function $8(n,t,r,i,s,c,o,u,A,S,y,R,ee,ae){let te=n,fe=t,we=r,Pe=i,Te=s,Ae=c,Ce=o,je=u,Le=A,ze=S;if(!rr(ae)||"year"===R||"month"===R||"week"===R||"day"===R||"nanosecond"===R&&1===y)return{years:te,months:fe,weeks:we,days:Pe,hours:Te,minutes:Ae,seconds:Ce,milliseconds:je,microseconds:Le,nanoseconds:ze};let $e=Zf(0,Te,Ae,Ce,je,Le,ze,0);const Ye=Cf(Ne.toNumber($e)),ut=he(ae,En),ct=he(ae,Et),vt=Ro(he(ae,rs),ut,ct,te,fe,we,Pe,0,0,0,0,0,0),at=Ro(new(Lt("%Temporal.Instant%"))(vt),ut,ct,0,0,0,Ye,0,0,0,0,0,0),ft=Ne.subtract(at,vt);return Ne.greaterThanOrEqual(Ne.multiply(Ne.subtract($e,ft),Ne.BigInt(Ye)),ni)&&(({years:te,months:fe,weeks:we,days:Pe}=P8(te,fe,we,Pe,0,0,0,0,0,0,0,0,0,Ye,0,0,0,0,0,0,ae)),$e=sm(Ne.subtract($e,ft),y,R,ee),({hours:Te,minutes:Ae,seconds:Ce,milliseconds:je,microseconds:Le,nanoseconds:ze}=Qo(0,0,0,0,0,0,Ne.toNumber($e),"hour"))),{years:te,months:fe,weeks:we,days:Pe,hours:Te,minutes:Ae,seconds:Ce,milliseconds:je,microseconds:Le,nanoseconds:ze}}function Kc(n,t,r,i,s,c,o,u,A,S,y,R,ee,ae){let te=n,fe=t,we=r,Pe=i,Te=s,Ae=c,Ce=o,je=u,Le=A,ze=Ne.BigInt(S);const $e=Lt("%Temporal.Duration%");let Ye,ut,ct,vt,at=ae;if(at){if(rr(at))ut=at,at=Sn(at);else if(!Zr(at))throw new TypeError("starting point must be PlainDate or ZonedDateTime");Ye=he(at,Et)}if("year"===R||"month"===R||"week"===R||"day"===R){let ft,tt,st;ze=Zf(0,Te,Ae,Ce,je,Le,S,0),ut&&(ft=N8(ut,te,fe,we,Pe)),({days:tt,nanoseconds:ze,dayLengthNs:st}=Bw(ze,ft)),ct=Ne.BigInt(st),Pe+=tt,Te=Ae=Ce=je=Le=0}switch(R){case"year":{if(!Ye)throw new RangeError("A starting point is required for years rounding");const ft=new $e(te),tt="string"!=typeof Ye?vn(Ye,"dateAdd"):void 0,st=Gi(Ye,at,ft,void 0,tt),Je=Gi(Ye,at,new $e(te,fe,we),void 0,tt);at=st,Pe+=om(st,Je);const lt=Gi(Ye,at,new $e(0,0,0,Pe),void 0,tt),ot=ns(null);ot.largestUnit="year";const yt=Pd(Ye,at,lt,ot).years;te+=yt;const kt=at;at=Gi(Ye,at,new $e(yt),void 0,tt),Pe-=om(kt,at);const Nt=new $e(Pe<0?-1:1);let{days:Qe}=ss(Ye,at,Nt,tt);Qe=zn(Qe);const Ut=Ne.multiply(Ne.BigInt(Qe),ct);ze=Ne.add(Ne.add(Ne.multiply(Ut,Ne.BigInt(te)),Ne.multiply(Ne.BigInt(Pe),ct)),ze);const Gt=yo(ze,Ne.multiply(Ut,Ne.BigInt(y)),ee);vt=dc(ze,Ut),te=Ne.toNumber(Ne.divide(Gt,Ut)),ze=ni,fe=we=Pe=0;break}case"month":{if(!Ye)throw new RangeError("A starting point is required for months rounding");const ft=new $e(te,fe),tt="string"!=typeof Ye?vn(Ye,"dateAdd"):void 0,st=Gi(Ye,at,ft,void 0,tt),Je=Gi(Ye,at,new $e(te,fe,we),void 0,tt);at=st,Pe+=om(st,Je);const lt=Cf(Pe),ot=new $e(0,Pe<0?-1:1);let yt;for(({relativeTo:at,days:yt}=ss(Ye,at,ot,tt));zn(Pe)>=zn(yt);)fe+=lt,Pe-=yt,({relativeTo:at,days:yt}=ss(Ye,at,ot,tt));yt=zn(yt);const kt=Ne.multiply(Ne.BigInt(yt),ct);ze=Ne.add(Ne.add(Ne.multiply(kt,Ne.BigInt(fe)),Ne.multiply(Ne.BigInt(Pe),ct)),ze);const Nt=yo(ze,Ne.multiply(kt,Ne.BigInt(y)),ee);vt=dc(ze,kt),fe=Ne.toNumber(Ne.divide(Nt,kt)),ze=ni,we=Pe=0;break}case"week":{if(!Ye)throw new RangeError("A starting point is required for weeks rounding");const ft=Cf(Pe),tt=new $e(0,0,Pe<0?-1:1),st="string"!=typeof Ye?vn(Ye,"dateAdd"):void 0;let Je;for(({relativeTo:at,days:Je}=ss(Ye,at,tt,st));zn(Pe)>=zn(Je);)we+=ft,Pe-=Je,({relativeTo:at,days:Je}=ss(Ye,at,tt,st));Je=zn(Je);const lt=Ne.multiply(Ne.BigInt(Je),ct);ze=Ne.add(Ne.add(Ne.multiply(lt,Ne.BigInt(we)),Ne.multiply(Ne.BigInt(Pe),ct)),ze);const ot=yo(ze,Ne.multiply(lt,Ne.BigInt(y)),ee);vt=dc(ze,lt),we=Ne.toNumber(Ne.divide(ot,lt)),ze=ni,Pe=0;break}case"day":{const ft=ct;ze=Ne.add(Ne.multiply(ft,Ne.BigInt(Pe)),ze);const tt=yo(ze,Ne.multiply(ft,Ne.BigInt(y)),ee);vt=dc(ze,ft),Pe=Ne.toNumber(Ne.divide(tt,ft)),ze=ni;break}case"hour":{let tt=Ne.multiply(Ne.BigInt(Te),Ne.BigInt(36e11));tt=Ne.add(tt,Ne.multiply(Ne.BigInt(Ae),Ne.BigInt(6e10))),tt=Ne.add(tt,Ne.multiply(Ne.BigInt(Ce),ic)),tt=Ne.add(tt,Ne.multiply(Ne.BigInt(je),lo)),tt=Ne.add(tt,Ne.multiply(Ne.BigInt(Le),hn)),tt=Ne.add(tt,ze),vt=dc(tt,Ne.BigInt(36e11));const st=yo(tt,Ne.BigInt(36e11*y),ee);Te=Ne.toNumber(Ne.divide(st,Ne.BigInt(36e11))),ze=ni,Ae=Ce=je=Le=0;break}case"minute":{let tt=Ne.multiply(Ne.BigInt(Ae),Ne.BigInt(6e10));tt=Ne.add(tt,Ne.multiply(Ne.BigInt(Ce),ic)),tt=Ne.add(tt,Ne.multiply(Ne.BigInt(je),lo)),tt=Ne.add(tt,Ne.multiply(Ne.BigInt(Le),hn)),tt=Ne.add(tt,ze),vt=dc(tt,Ne.BigInt(6e10));const st=yo(tt,Ne.BigInt(6e10*y),ee);Ae=Ne.toNumber(Ne.divide(st,Ne.BigInt(6e10))),ze=ni,Ce=je=Le=0;break}case"second":{let tt=Ne.multiply(Ne.BigInt(Ce),ic);tt=Ne.add(tt,Ne.multiply(Ne.BigInt(je),lo)),tt=Ne.add(tt,Ne.multiply(Ne.BigInt(Le),hn)),tt=Ne.add(tt,ze),vt=dc(tt,Ne.BigInt(1e9));const st=yo(tt,Ne.BigInt(1e9*y),ee);Ce=Ne.toNumber(Ne.divide(st,Ne.BigInt(1e9))),ze=ni,je=Le=0;break}case"millisecond":{let tt=Ne.multiply(Ne.BigInt(je),lo);tt=Ne.add(tt,Ne.multiply(Ne.BigInt(Le),hn)),tt=Ne.add(tt,ze),vt=dc(tt,Ne.BigInt(1e6));const st=yo(tt,Ne.BigInt(1e6*y),ee);je=Ne.toNumber(Ne.divide(st,Ne.BigInt(1e6))),ze=ni,Le=0;break}case"microsecond":{let tt=Ne.multiply(Ne.BigInt(Le),hn);tt=Ne.add(tt,ze),vt=dc(tt,Ne.BigInt(1e3));const st=yo(tt,Ne.BigInt(1e3*y),ee);Le=Ne.toNumber(Ne.divide(st,Ne.BigInt(1e3))),ze=ni;break}case"nanosecond":vt=Ne.toNumber(ze),ze=yo(Ne.BigInt(ze),Ne.BigInt(y),ee)}return{years:te,months:fe,weeks:we,days:Pe,hours:Te,minutes:Ae,seconds:Ce,milliseconds:je,microseconds:Le,nanoseconds:Ne.toNumber(ze),total:vt}}function Od(n,t,r,i,s,c){for(const[o,u]of[[n,i],[t,s],[r,c]])if(o!==u)return Vu(o-u);return 0}function zu(n,t){let{quotient:r,remainder:i}=li(n,t);return Ne.lessThan(i,ni)&&(r=Ne.subtract(r,Df),i=Ne.add(i,t)),{quotient:r,remainder:i}}function Yf(n,t){const{quotient:r,remainder:i}=li(n,t);return Io(i)||!Oy(n)==!Oy(t)?r:Ne.subtract(r,Df)}function dc(n,t){const{quotient:r,remainder:i}=li(n,t);return Ne.toNumber(r)+Ne.toNumber(i)/Ne.toNumber(t)}function am(n){const t=Zh(n);return void 0!==globalThis.BigInt?globalThis.BigInt(t.toString(10)):t}function Zh(n){let t=n;if("object"==typeof n){const r=n[Symbol.toPrimitive];r&&"function"==typeof r&&(t=By(r,n,["number"]))}if("number"==typeof t)throw new TypeError("cannot convert number to bigint");return Ne.BigInt("bigint"==typeof t?t.toString(10):t)}const Uw=(()=>{let n=Ne.BigInt(Date.now()%1e6);return()=>{const t=Ne.BigInt(Date.now()),r=Ne.add(Ne.multiply(t,lo),n);return n=Ne.remainder(t,lo),Ne.greaterThan(r,Nf)?Nf:Ne.lessThan(r,Ch)?Ch:r}})();function Cd(){return(new Rx).resolvedOptions().timeZone}function Vu(n){return n<0?-1:n>0?1:n}function Xr(n){if(void 0===n)return ns(null);if(Vn(n)&&null!==n)return n;throw new TypeError("Options parameter must be an object, not "+(null===n?"null":typeof n))}function Xf(n,t){const r=ns(null);return r[n]=t,r}function Dd(n){const t=ns(null);return Uf(t,Xr(n),[]),t}function Nd(n,t,r,i){let s=n[t];if(void 0!==s){if(s=Rs(s),!r.includes(s))throw new RangeError(`${t} must be one of ${r.join(", ")}, not ${s}`);return s}return i}function zc(n){return qC.includes(uc(n))}function uc(n){return n.replace(/[A-Z]/g,t=>{const r=t.charCodeAt(0);return String.fromCharCode(r+32)})}const j8=new RegExp(`^${Ix.source}$`);function U8(n,t,r,i=n(t),s=n(r)){let c=Ne.BigInt(t),o=Ne.BigInt(r),u=i,A=s;for(;Ne.greaterThan(Ne.subtract(o,c),Df);){const S=Ne.divide(Ne.add(c,o),Ne.BigInt(2)),y=n(S);if(y===u)c=S,u=y;else{if(y!==A)throw new Error(`invalid state in bisection ${u} - ${y} - ${A}`);o=S,A=y}}return o}const L8={hour:36e11,minute:6e10,second:1e9,millisecond:1e6,microsecond:1e3,nanosecond:1},F8=Symbol("date"),K8=Symbol("ym"),z8=Symbol("md"),V8=Symbol("time"),H8=Symbol("datetime"),W8=Symbol("instant"),Qf=Symbol("original"),el=Symbol("timezone"),ea=Symbol("calendar-id"),G8=Symbol("locale"),Lw=Symbol("options"),Jh=n=>({value:n,enumerable:!0,writable:!1,configurable:!0}),tl=globalThis.Intl.DateTimeFormat,Vc=Object.assign,QC=Object.prototype.hasOwnProperty,eD=Reflect.apply;function rl(n,t){let r=n[t];return"function"==typeof r&&(r=new tl(n[G8],r(n[Lw])),n[t]=r),r}function Hu(n,t={}){if(!(this instanceof Hu))return new Hu(n,t);const r=void 0!==t,i=r?Vc({},t):{},s=new tl(n,i),c=s.resolvedOptions();if(r){const o=Vc({},c);for(const u in o)eD(QC,i,[u])||delete o[u];this[Lw]=o}else this[Lw]=i;this[G8]=c.locale,this[Qf]=s,this[el]=c.timeZone,this[ea]=c.calendar,this[F8]=iD,this[K8]=rD,this[z8]=nD,this[V8]=tD,this[H8]=sD,this[W8]=oD}Object.defineProperty(Hu,"name",{writable:!0,value:"DateTimeFormat"}),Hu.supportedLocalesOf=function(n,t){return tl.supportedLocalesOf(n,t)};const Fw={resolvedOptions:Jh(function(){return this[Qf].resolvedOptions()}),format:Jh(function(t,...r){let{instant:i,formatter:s}=il(t,this);return i&&s?s.format(i.epochMilliseconds):this[Qf].format(t,...r)}),formatRange:Jh(function(t,r){if(nl(t)||nl(r)){if(!q8(t,r))throw new TypeError("Intl.DateTimeFormat.formatRange accepts two values of the same type");const{instant:i,formatter:s}=il(t,this),{instant:c,formatter:o}=il(r,this);if(i&&c&&s&&o&&s===o)return s.formatRange(i.epochMilliseconds,c.epochMilliseconds)}return this[Qf].formatRange(t,r)})};"formatToParts"in tl.prototype&&(Fw.formatToParts=Jh(function(t,...r){let{instant:i,formatter:s}=il(t,this);return i&&s?s.formatToParts(i.epochMilliseconds):this[Qf].formatToParts(t,...r)})),"formatRangeToParts"in tl.prototype&&(Fw.formatRangeToParts=Jh(function(t,r){if(nl(t)||nl(r)){if(!q8(t,r))throw new TypeError("Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type");const{instant:i,formatter:s}=il(t,this),{instant:c,formatter:o}=il(r,this);if(i&&c&&s&&o&&s===o)return s.formatRangeToParts(i.epochMilliseconds,c.epochMilliseconds)}return this[Qf].formatRangeToParts(t,r)})),Hu.prototype=Object.create(tl.prototype,Fw),Object.defineProperty(Hu,"prototype",{writable:!1,enumerable:!1,configurable:!1});const Hc=Hu;function Yh(n={},t={}){const r=Vc({},n);for(const i of["year","month","day","hour","minute","second","weekday","dayPeriod","timeZoneName","dateStyle","timeStyle"])r[i]=i in t?t[i]:r[i],!1!==r[i]&&void 0!==r[i]||delete r[i];return r}function tD(n){let t=Yh(n,{year:!1,month:!1,day:!1,weekday:!1,timeZoneName:!1,dateStyle:!1});return zw(t)||(t=Vc({},t,{hour:"numeric",minute:"numeric",second:"numeric"})),t}function rD(n){let t=Yh(n,{day:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"year"in t||"month"in t||(t=Vc(t,{year:"numeric",month:"numeric"})),t}function nD(n){let t=Yh(n,{year:!1,hour:!1,minute:!1,second:!1,weekday:!1,dayPeriod:!1,timeZoneName:!1,dateStyle:!1,timeStyle:!1});return"month"in t||"day"in t||(t=Vc({},t,{month:"numeric",day:"numeric"})),t}function iD(n){let t=Yh(n,{hour:!1,minute:!1,second:!1,dayPeriod:!1,timeZoneName:!1,timeStyle:!1});return Kw(t)||(t=Vc({},t,{year:"numeric",month:"numeric",day:"numeric"})),t}function sD(n){let t=Yh(n,{timeZoneName:!1});return zw(t)||Kw(t)||(t=Vc({},t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),t}function oD(n){let t=n;return zw(t)||Kw(t)||(t=Vc({},t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),t}function Kw(n){return"year"in n||"month"in n||"day"in n||"weekday"in n||"dateStyle"in n}function zw(n){return"hour"in n||"minute"in n||"second"in n||"timeStyle"in n||"dayPeriod"in n}function nl(n){return Zr(n)||oi(n)||Or(n)||rr(n)||pn(n)||Bi(n)||Si(n)}function q8(n,t){return!(!nl(n)||!nl(t)||oi(n)&&!oi(t)||Zr(n)&&!Zr(t)||Or(n)&&!Or(t)||rr(n)&&!rr(t)||pn(n)&&!pn(t)||Bi(n)&&!Bi(t)||Si(n)&&!Si(t))}function il(n,t){const r=Lt("%Temporal.PlainDateTime%");if(oi(n)){const i=new r(1970,1,1,he(n,Dr),he(n,Nr),he(n,$r),he(n,jr),he(n,Ur),he(n,Lr),t[ea]);return{instant:ks(t[el],i,"compatible"),formatter:rl(t,V8)}}if(pn(n)){const i=he(n,Ht),s=he(n,qt),c=he(n,Xt),o=qi(he(n,Et));if(o!==t[ea])throw new RangeError(`cannot format PlainYearMonth with calendar ${o} in locale with calendar ${t[ea]}`);const u=new r(i,s,c,12,0,0,0,0,0,o);return{instant:ks(t[el],u,"compatible"),formatter:rl(t,K8)}}if(Bi(n)){const i=he(n,Ht),s=he(n,qt),c=he(n,Xt),o=qi(he(n,Et));if(o!==t[ea])throw new RangeError(`cannot format PlainMonthDay with calendar ${o} in locale with calendar ${t[ea]}`);const u=new r(i,s,c,12,0,0,0,0,0,o);return{instant:ks(t[el],u,"compatible"),formatter:rl(t,z8)}}if(Zr(n)){const i=he(n,Ht),s=he(n,qt),c=he(n,Xt),o=qi(he(n,Et));if("iso8601"!==o&&o!==t[ea])throw new RangeError(`cannot format PlainDate with calendar ${o} in locale with calendar ${t[ea]}`);const u=new r(i,s,c,12,0,0,0,0,0,t[ea]);return{instant:ks(t[el],u,"compatible"),formatter:rl(t,F8)}}if(Or(n)){const i=he(n,Ht),s=he(n,qt),c=he(n,Xt),o=he(n,Dr),u=he(n,Nr),A=he(n,$r),S=he(n,jr),y=he(n,Ur),R=he(n,Lr),ee=qi(he(n,Et));if("iso8601"!==ee&&ee!==t[ea])throw new RangeError(`cannot format PlainDateTime with calendar ${ee} in locale with calendar ${t[ea]}`);let ae=n;return"iso8601"===ee&&(ae=new r(i,s,c,o,u,A,S,y,R,t[ea])),{instant:ks(t[el],ae,"compatible"),formatter:rl(t,H8)}}if(rr(n))throw new TypeError("Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.");return Si(n)?{instant:n,formatter:rl(t,W8)}:{}}Object.freeze({__proto__:null,DateTimeFormat:Hc});class ta{constructor(t){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");const r=Zh(t);Fu(r),rc(this),Kr(this,wr,r)}get epochSeconds(){if(!Si(this))throw new TypeError("invalid receiver");const t=he(this,wr);return Ne.toNumber(Yf(t,ic))}get epochMilliseconds(){if(!Si(this))throw new TypeError("invalid receiver");const t=Ne.BigInt(he(this,wr));return Ne.toNumber(Yf(t,lo))}get epochMicroseconds(){if(!Si(this))throw new TypeError("invalid receiver");return am(Yf(Ne.BigInt(he(this,wr)),hn))}get epochNanoseconds(){if(!Si(this))throw new TypeError("invalid receiver");return am(Ne.BigInt(he(this,wr)))}add(t){if(!Si(this))throw new TypeError("invalid receiver");return R8("add",this,t)}subtract(t){if(!Si(this))throw new TypeError("invalid receiver");return R8("subtract",this,t)}until(t,r){if(!Si(this))throw new TypeError("invalid receiver");return x8("until",this,t,r)}since(t,r){if(!Si(this))throw new TypeError("invalid receiver");return x8("since",this,t,r)}round(t){if(!Si(this))throw new TypeError("invalid receiver");if(void 0===t)throw new TypeError("options parameter is required");const r="string"==typeof t?Xf("smallestUnit",t):Xr(t),i=Kf(r),s=Ia(r,"halfExpand"),c=no(r,"smallestUnit","time",Du);zf(i,{hour:24,minute:1440,second:86400,millisecond:864e5,microsecond:864e8,nanosecond:864e11}[c],!0);const o=sm(he(this,wr),i,c,s);return new ta(o)}equals(t){if(!Si(this))throw new TypeError("invalid receiver");const r=Pa(t),i=he(this,wr),s=he(r,wr);return Ne.equal(Ne.BigInt(i),Ne.BigInt(s))}toString(t){if(!Si(this))throw new TypeError("invalid receiver");const r=Xr(t),i=$h(r),s=Ia(r,"trunc"),c=no(r,"smallestUnit","time",void 0);if("hour"===c)throw new RangeError('smallestUnit must be a time unit other than "hour"');let o=r.timeZone;void 0!==o&&(o=is(o));const{precision:u,unit:A,increment:S}=jh(c,i),y=sm(he(this,wr),S,A,s);return t8(new ta(y),o,u)}toJSON(){if(!Si(this))throw new TypeError("invalid receiver");return t8(this,void 0,"auto")}toLocaleString(t,r){if(!Si(this))throw new TypeError("invalid receiver");return new Hc(t,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.Instant")}toZonedDateTime(t){if(!Si(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid argument in toZonedDateTime");const r=t.calendar;if(void 0===r)throw new TypeError("missing calendar property in toZonedDateTime");const i=so(r),s=t.timeZone;if(void 0===s)throw new TypeError("missing timeZone property in toZonedDateTime");const c=is(s);return Wi(he(this,wr),c,i)}toZonedDateTimeISO(t){if(!Si(this))throw new TypeError("invalid receiver");const r=is(t);return Wi(he(this,wr),r,"iso8601")}static fromEpochSeconds(t){const r=jf(t),i=Ne.multiply(Ne.BigInt(r),ic);return Fu(i),new ta(i)}static fromEpochMilliseconds(t){const r=jf(t),i=Ne.multiply(Ne.BigInt(r),lo);return Fu(i),new ta(i)}static fromEpochMicroseconds(t){const r=Zh(t),i=Ne.multiply(r,hn);return Fu(i),new ta(i)}static fromEpochNanoseconds(t){const r=Zh(t);return Fu(r),new ta(r)}static from(t){return Si(t)?new ta(he(t,wr)):Pa(t)}static compare(t,r){const i=Pa(t),s=Pa(r),c=he(i,wr),o=he(s,wr);return Ne.lessThan(c,o)?-1:Ne.greaterThan(c,o)?1:0}}ec(ta,"Temporal.Instant");const Z8=Array.prototype.includes,aD=Array.prototype.push,cD=globalThis.Intl.DateTimeFormat,dD=Array.prototype.sort,uD=Math.abs,fD=Math.floor,Vw=Object.create,Hw=Object.entries,J8=Set,Y8=Reflect.ownKeys,os=Set.prototype.add,X8=Set.prototype.values,qn={};class ai{constructor(t){if(arguments.length<1)throw new RangeError("missing argument: id is required");const r=Rs(t);if(!zc(r))throw new RangeError(`invalid calendar identifier ${r}`);rc(this),Kr(this,Xn,uc(r))}get id(){if(!ii(this))throw new TypeError("invalid receiver");return he(this,Xn)}dateFromFields(t,r){if(!ii(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid fields");const i=Xr(r),s=he(this,Xn);return qn[s].dateFromFields(t,i,s)}yearMonthFromFields(t,r){if(!ii(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid fields");const i=Xr(r),s=he(this,Xn);return qn[s].yearMonthFromFields(t,i,s)}monthDayFromFields(t,r){if(!ii(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid fields");const i=Xr(r),s=he(this,Xn);return qn[s].monthDayFromFields(t,i,s)}fields(t){if(!ii(this))throw new TypeError("invalid receiver");const r=[],i=new Set(["year","month","monthCode","day","hour","minute","second","millisecond","microsecond","nanosecond"]);for(const s of t){if("string"!=typeof s)throw new TypeError("invalid fields");if(!i.has(s))throw new RangeError(`invalid field name ${s}`);i.delete(s),aD.call(r,s)}return qn[he(this,Xn)].fields(r)}mergeFields(t,r){if(!ii(this))throw new TypeError("invalid receiver");const i=Vx(t),s=Vw(null);Uf(s,i,[],[void 0]);const c=Vx(r),o=Vw(null);Uf(o,c,[],[void 0]);const u=Y8(o),A=qn[he(this,Xn)].fieldKeysToIgnore(u),S=Vw(null),y=Y8(s);for(const R of y){let ee;ee=cr(Z8,A,[R])?o[R]:s[R],void 0!==ee&&(S[R]=ee)}return Uf(S,o,[]),S}dateAdd(t,r,i){if(!ii(this))throw new TypeError("invalid receiver");const s=Sn(t),c=Vf(r),o=hi(Xr(i)),{days:u}=Qo(he(c,Es),he(c,Ss),he(c,As),he(c,Ms),he(c,Ts),he(c,Is),he(c,Ps),"day"),A=he(this,Xn);return qn[A].dateAdd(s,he(c,xs),he(c,ji),he(c,Gs),u,o,A)}dateUntil(t,r,i){if(!ii(this))throw new TypeError("invalid receiver");const s=Sn(t),c=Sn(r);let o=no(Xr(i),"largestUnit","date","auto");"auto"===o&&(o="day");const{years:u,months:A,weeks:S,days:y}=qn[he(this,Xn)].dateUntil(s,c,o);return new(Lt("%Temporal.Duration%"))(u,A,S,y,0,0,0,0,0,0)}year(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return pn(r)||(r=Sn(r)),qn[he(this,Xn)].year(r)}month(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");if(Bi(r))throw new TypeError("use monthCode on PlainMonthDay instead");return pn(r)||(r=Sn(r)),qn[he(this,Xn)].month(r)}monthCode(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return pn(r)||Bi(r)||(r=Sn(r)),qn[he(this,Xn)].monthCode(r)}day(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return Bi(r)||(r=Sn(r)),qn[he(this,Xn)].day(r)}era(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return pn(r)||(r=Sn(r)),qn[he(this,Xn)].era(r)}eraYear(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return pn(r)||(r=Sn(r)),qn[he(this,Xn)].eraYear(r)}dayOfWeek(t){if(!ii(this))throw new TypeError("invalid receiver");const r=Sn(t);return qn[he(this,Xn)].dayOfWeek(r)}dayOfYear(t){if(!ii(this))throw new TypeError("invalid receiver");const r=Sn(t);return qn[he(this,Xn)].dayOfYear(r)}weekOfYear(t){if(!ii(this))throw new TypeError("invalid receiver");const r=Sn(t);return qn[he(this,Xn)].weekOfYear(r)}yearOfWeek(t){if(!ii(this))throw new TypeError("invalid receiver");const r=Sn(t);return qn[he(this,Xn)].yearOfWeek(r)}daysInWeek(t){if(!ii(this))throw new TypeError("invalid receiver");const r=Sn(t);return qn[he(this,Xn)].daysInWeek(r)}daysInMonth(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return pn(r)||(r=Sn(r)),qn[he(this,Xn)].daysInMonth(r)}daysInYear(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return pn(r)||(r=Sn(r)),qn[he(this,Xn)].daysInYear(r)}monthsInYear(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return pn(r)||(r=Sn(r)),qn[he(this,Xn)].monthsInYear(r)}inLeapYear(t){let r=t;if(!ii(this))throw new TypeError("invalid receiver");return pn(r)||(r=Sn(r)),qn[he(this,Xn)].inLeapYear(r)}toString(){if(!ii(this))throw new TypeError("invalid receiver");return he(this,Xn)}toJSON(){if(!ii(this))throw new TypeError("invalid receiver");return he(this,Xn)}static from(t){return Hf(so(t))}}function Ww(n){if(!n.startsWith("M"))throw new RangeError(`Invalid month code: ${n}.  Month codes must start with M.`);const t=+n.slice(1);if(isNaN(t))throw new RangeError(`Invalid month code: ${n}`);return t}function Wc(n,t=!1){return`M${n.toString().padStart(2,"0")}${t?"L":""}`}function cm(n,t,r=12){let{month:i,monthCode:s}=n;if(void 0===s){if(void 0===i)throw new TypeError("Either month or monthCode are required");"reject"===t&&Zi(i,1,r),"constrain"===t&&(i=oo(i,1,r)),s=Wc(i)}else{const c=Ww(s);if(void 0!==i&&i!==c)throw new RangeError(`monthCode ${s} and month ${i} must match if both are present`);if(s!==Wc(c))throw new RangeError(`Invalid month code: ${s}`);if(i=c,i<1||i>r)throw new RangeError(`Invalid monthCode: ${s}`)}return{...n,month:i,monthCode:s}}ec(ai,"Temporal.Calendar"),Yn("Temporal.Calendar.from",ai.from),Yn("Temporal.Calendar.prototype.dateAdd",ai.prototype.dateAdd),Yn("Temporal.Calendar.prototype.dateFromFields",ai.prototype.dateFromFields),Yn("Temporal.Calendar.prototype.dateUntil",ai.prototype.dateUntil),Yn("Temporal.Calendar.prototype.day",ai.prototype.day),Yn("Temporal.Calendar.prototype.dayOfWeek",ai.prototype.dayOfWeek),Yn("Temporal.Calendar.prototype.dayOfYear",ai.prototype.dayOfYear),Yn("Temporal.Calendar.prototype.daysInMonth",ai.prototype.daysInMonth),Yn("Temporal.Calendar.prototype.daysInWeek",ai.prototype.daysInWeek),Yn("Temporal.Calendar.prototype.daysInYear",ai.prototype.daysInYear),Yn("Temporal.Calendar.prototype.era",ai.prototype.era),Yn("Temporal.Calendar.prototype.eraYear",ai.prototype.eraYear),Yn("Temporal.Calendar.prototype.fields",ai.prototype.fields),Yn("Temporal.Calendar.prototype.inLeapYear",ai.prototype.inLeapYear),Yn("Temporal.Calendar.prototype.mergeFields",ai.prototype.mergeFields),Yn("Temporal.Calendar.prototype.month",ai.prototype.month),Yn("Temporal.Calendar.prototype.monthCode",ai.prototype.monthCode),Yn("Temporal.Calendar.prototype.monthDayFromFields",ai.prototype.monthDayFromFields),Yn("Temporal.Calendar.prototype.monthsInYear",ai.prototype.monthsInYear),Yn("Temporal.Calendar.prototype.weekOfYear",ai.prototype.weekOfYear),Yn("Temporal.Calendar.prototype.year",ai.prototype.year),Yn("Temporal.Calendar.prototype.yearMonthFromFields",ai.prototype.yearMonthFromFields),Yn("Temporal.Calendar.prototype.yearOfWeek",ai.prototype.yearOfWeek),qn.iso8601={dateFromFields(n,t,r){let i=Vr(n,["day","month","monthCode","year"],["year","day"]);const s=hi(t);i=cm(i);let{year:c,month:o,day:u}=i;return({year:c,month:o,day:u}=Dy(c,o,u,s)),Bo(c,o,u,r)},yearMonthFromFields(n,t,r){let i=Vr(n,["month","monthCode","year"],["year"]);const s=hi(t);i=cm(i);let{year:c,month:o}=i;return({year:c,month:o}=function(A,S,y){let R=A,ee=S;switch(y){case"reject":cc(R,ee,1);break;case"constrain":({year:R,month:ee}=g8(R,ee))}return{year:R,month:ee}}(c,o,s)),zh(c,o,r,1)},monthDayFromFields(n,t,r){let i=Vr(n,["day","month","monthCode","year"],["day"]);const s=hi(t);if(void 0!==i.month&&void 0===i.year&&void 0===i.monthCode)throw new TypeError("either year or monthCode required with month");const c=void 0===i.monthCode;i=cm(i);let{month:o,day:u,year:A}=i;return({month:o,day:u}=Dy(c?A:1972,o,u,s)),Kh(o,u,r,1972)},fields:n=>n,fieldKeysToIgnore(n){const t=new J8;for(let r=0;r<n.length;r++){const i=n[r];cr(os,t,[i]),"month"===i?cr(os,t,["monthCode"]):"monthCode"===i&&cr(os,t,["month"])}return[...cr(X8,t,[])]},dateAdd(n,t,r,i,s,c,o){let u=he(n,Ht),A=he(n,qt),S=he(n,Xt);return({year:u,month:A,day:S}=Ku(u,A,S,t,r,i,s,c)),Bo(u,A,S,o)},dateUntil:(n,t,r)=>kw(he(n,Ht),he(n,qt),he(n,Xt),he(t,Ht),he(t,qt),he(t,Xt),r),year:n=>he(n,Ht),era(){},eraYear(){},month:n=>he(n,qt),monthCode:n=>Wc(he(n,qt)),day:n=>he(n,Xt),dayOfWeek:n=>Iw(he(n,Ht),he(n,qt),he(n,Xt)),dayOfYear:n=>Qy(he(n,Ht),he(n,qt),he(n,Xt)),weekOfYear:n=>h8(he(n,Ht),he(n,qt),he(n,Xt)).week,yearOfWeek:n=>h8(he(n,Ht),he(n,qt),he(n,Xt)).year,daysInWeek:()=>7,daysInMonth:n=>Lc(he(n,Ht),he(n,qt)),daysInYear(n){let t=n;return Ii(t,Ht)||(t=Sn(t)),kd(he(t,Ht))?366:365},monthsInYear:()=>12,inLeapYear(n){let t=n;return Ii(t,Ht)||(t=Sn(t)),kd(he(t,Ht))}};class Qn{constructor(t){if(this.map=new Map,this.calls=0,this.hits=0,this.misses=0,this.now=globalThis.performance?globalThis.performance.now():Date.now(),void 0!==t){let r=0;for(const i of t.map.entries()){if(++r>Qn.MAX_CACHE_ENTRIES)break;this.map.set(...i)}}}get(t){const r=this.map.get(t);return r&&(this.hits++,this.report()),this.calls++,r}set(t,r){this.map.set(t,r),this.misses++,this.report()}report(){}setObject(t){if(Qn.objectMap.get(t))throw new RangeError("object already cached");Qn.objectMap.set(t,this),this.report()}static getCacheForObject(t){let r=Qn.objectMap.get(t);return r||(r=new Qn,Qn.objectMap.set(t,r)),r}}function Q8({isoYear:n,isoMonth:t,isoDay:r}){return`${Lu(n)}-${Gn(t)}-${Gn(r)}T00:00Z`}function Gw(n,t){return{years:n.year-t.year,months:n.month-t.month,days:n.day-t.day}}Qn.objectMap=new WeakMap,Qn.MAX_CACHE_ENTRIES=1e3;class sl{constructor(){this.eraLength="short",this.hasEra=!0,this.erasBeginMidYear=!1}getFormatter(){return void 0===this.formatter&&(this.formatter=new cD(`en-US-u-ca-${this.id}`,{day:"numeric",month:"numeric",year:"numeric",era:this.eraLength,timeZone:"UTC"})),this.formatter}isoToCalendarDate(t,r){const{year:i,month:s,day:c}=t,o=JSON.stringify({func:"isoToCalendarDate",isoYear:i,isoMonth:s,isoDay:c,id:this.id}),u=r.get(o);if(u)return u;const A=this.getFormatter();let S,y;try{y=Q8({isoYear:i,isoMonth:s,isoDay:c}),S=A.formatToParts(new Date(y))}catch{throw new RangeError(`Invalid ISO date: ${JSON.stringify({isoYear:i,isoMonth:s,isoDay:c})}`)}const R={};for(let{type:ae,value:te}of S){if("year"===ae&&(R.eraYear=+te),"relatedYear"===ae&&(R.eraYear=+te),"month"===ae){const fe=/^([0-9]*)(.*?)$/.exec(te);if(!fe||3!=fe.length||!fe[1]&&!fe[2])throw new RangeError(`Unexpected month: ${te}`);if(R.month=fe[1]?+fe[1]:1,R.month<1)throw new RangeError(`Invalid month ${te} from ${y}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)`);if(R.month>13)throw new RangeError(`Invalid month ${te} from ${y}[u-ca-${this.id}] (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)`);fe[2]&&(R.monthExtra=fe[2])}"day"===ae&&(R.day=+te),this.hasEra&&"era"===ae&&null!=te&&""!==te&&(te=te.split(" (")[0],R.era=te.normalize("NFD").replace(/[^-0-9 \p{L}]/gu,"").replace(" ","-").toLowerCase())}if(void 0===R.eraYear)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);if(this.reviseIntlEra){const{era:ae,eraYear:te}=this.reviseIntlEra(R,t);R.era=ae,R.eraYear=te}this.checkIcuBugs&&this.checkIcuBugs(t);const ee=this.adjustCalendarDate(R,r,"constrain",!0);if(void 0===ee.year)throw new RangeError(`Missing year converting ${JSON.stringify(t)}`);if(void 0===ee.month)throw new RangeError(`Missing month converting ${JSON.stringify(t)}`);if(void 0===ee.day)throw new RangeError(`Missing day converting ${JSON.stringify(t)}`);return r.set(o,ee),["constrain","reject"].forEach(ae=>{const te=JSON.stringify({func:"calendarToIsoDate",year:ee.year,month:ee.month,day:ee.day,overflow:ae,id:this.id});r.set(te,t)}),ee}validateCalendarDate(t){const{era:r,month:i,year:s,day:c,eraYear:o,monthCode:u,monthExtra:A}=t;if(void 0!==A)throw new RangeError("Unexpected `monthExtra` value");if(void 0===s&&void 0===o)throw new TypeError("year or eraYear is required");if(void 0===i&&void 0===u)throw new TypeError("month or monthCode is required");if(void 0===c)throw new RangeError("Missing day");if(void 0!==u){if("string"!=typeof u)throw new RangeError("monthCode must be a string, not "+typeof u);if(!/^M([01]?\d)(L?)$/.test(u))throw new RangeError(`Invalid monthCode: ${u}`)}if(this.constantEra){if(void 0!==r&&r!==this.constantEra)throw new RangeError(`era must be ${this.constantEra}, not ${r}`);if(void 0!==o&&void 0!==s&&o!==s)throw new RangeError(`eraYear ${o} does not match year ${s}`)}if(this.hasEra&&void 0===t.era!=(void 0===t.eraYear))throw new RangeError("properties 'era' and 'eraYear' must be provided together")}adjustCalendarDate(t,r,i="constrain",s=!1){if("lunisolar"===this.calendarType)throw new RangeError("Override required for lunisolar calendars");let c=t;if(this.validateCalendarDate(c),this.constantEra){const{year:S,eraYear:y}=c;c={...c,era:this.constantEra,year:void 0!==S?S:y,eraYear:void 0!==y?y:S}}const o=this.monthsInYear(c,r);let{month:u,monthCode:A}=c;return({month:u,monthCode:A}=cm(c,i,o)),{...c,month:u,monthCode:A}}regulateMonthDayNaive(t,r,i){const s=this.monthsInYear(t,i);let{month:c,day:o}=t;return"reject"===r?(Zi(c,1,s),Zi(o,1,this.maximumMonthLength(t))):(c=oo(c,1,s),o=oo(o,1,this.maximumMonthLength({...t,month:c}))),{...t,month:c,day:o}}calendarToIsoDate(t,r="constrain",i){const s=t;let c=this.adjustCalendarDate(t,i,r,!1);c=this.regulateMonthDayNaive(c,r,i);const{year:o,month:u,day:A}=c,S=JSON.stringify({func:"calendarToIsoDate",year:o,month:u,day:A,overflow:r,id:this.id});let y,R=i.get(S);if(R||void 0!==s.year&&void 0!==s.month&&void 0!==s.day&&(s.year!==c.year||s.month!==c.month||s.day!==c.day)&&(y=JSON.stringify({func:"calendarToIsoDate",year:s.year,month:s.month,day:s.day,overflow:r,id:this.id}),R=i.get(y),R))return R;let ee=this.estimateIsoDate({year:o,month:u,day:A});const ae=Te=>{let Ae=this.addDaysIso(ee,Te);if(c.day>this.minimumMonthLength(c)){let Ce=this.isoToCalendarDate(Ae,i);for(;Ce.month!==u||Ce.year!==o;){if("reject"===r)throw new RangeError(`day ${A} does not exist in month ${u} of year ${o}`);Ae=this.addDaysIso(Ae,-1),Ce=this.isoToCalendarDate(Ae,i)}}return Ae};let te=0,fe=this.isoToCalendarDate(ee,i),we=Gw(c,fe);0===we.years&&0===we.months&&0===we.days||(ee=this.addDaysIso(ee,365*we.years+30*we.months+we.days),fe=this.isoToCalendarDate(ee,i),we=Gw(c,fe),0===we.years&&0===we.months?ee=ae(we.days):te=this.compareCalendarDates(c,fe));let Pe=8;for(;te;){ee=this.addDaysIso(ee,te*Pe);const Te=fe;fe=this.isoToCalendarDate(ee,i);const Ae=te;if(te=this.compareCalendarDates(c,fe),te)if(we=Gw(c,fe),0===we.years&&0===we.months)ee=ae(we.days),te=0;else if(Ae&&te!==Ae)if(Pe>1)Pe/=2;else{if("reject"===r)throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({...s})}`);this.compareCalendarDates(fe,Te)>0&&(ee=this.addDaysIso(ee,-1)),te=0}}if(i.set(S,ee),y&&i.set(y,ee),void 0===c.year||void 0===c.month||void 0===c.day||void 0===c.monthCode||this.hasEra&&(void 0===c.era||void 0===c.eraYear))throw new RangeError("Unexpected missing property");return ee}temporalToCalendarDate(t,r){const i={year:he(t,Ht),month:he(t,qt),day:he(t,Xt)};return this.isoToCalendarDate(i,r)}compareCalendarDates(t,r){const i=Vr(t,["day","month","year"],["day","month","year"]),s=Vr(r,["day","month","year"],["day","month","year"]);return i.year!==s.year?Vu(i.year-s.year):i.month!==s.month?Vu(i.month-s.month):i.day!==s.day?Vu(i.day-s.day):0}regulateDate(t,r="constrain",i){const s=this.calendarToIsoDate(t,r,i);return this.isoToCalendarDate(s,i)}addDaysIso(t,r){return Ku(t.year,t.month,t.day,0,0,0,r,"constrain")}addDaysCalendar(t,r,i){const s=this.calendarToIsoDate(t,"constrain",i),c=this.addDaysIso(s,r);return this.isoToCalendarDate(c,i)}addMonthsCalendar(t,r,i,s){let c=t;const{day:o}=c;for(let u=0,A=uD(r);u<A;u++){const{month:S}=c,y=c,R=r<0?-Math.max(o,this.daysInPreviousMonth(c,s)):this.daysInMonth(c,s),ee=this.calendarToIsoDate(c,"constrain",s);let ae=this.addDaysIso(ee,R);if(c=this.isoToCalendarDate(ae,s),r>0){const te=this.monthsInYear(y,s);for(;c.month-1!=S%te;)ae=this.addDaysIso(ae,-1),c=this.isoToCalendarDate(ae,s)}c.day!==o&&(c=this.regulateDate({...c,day:o},"constrain",s))}if("reject"===i&&c.day!==o)throw new RangeError(`Day ${o} does not exist in resulting calendar month`);return c}addCalendar(t,{years:r=0,months:i=0,weeks:s=0,days:c=0},o,u){const{year:A,day:S,monthCode:y}=t,R=this.adjustCalendarDate({year:A+r,monthCode:y,day:S},u),ee=this.addMonthsCalendar(R,i,o,u);return this.addDaysCalendar(ee,c+7*s,u)}untilCalendar(t,r,i,s){let c=0,o=0,u=0,A=0;switch(i){case"day":c=this.calendarDaysUntil(t,r,s);break;case"week":{const S=this.calendarDaysUntil(t,r,s);c=S%7,o=(S-c)/7;break}case"month":case"year":{const S=this.compareCalendarDates(r,t);if(!S)return{years:0,months:0,weeks:0,days:0};const y=r.year-t.year;if("year"===i&&y){let te=0;r.monthCode>t.monthCode&&(te=1),r.monthCode<t.monthCode&&(te=-1),te||(te=Math.sign(r.day-t.day)),A=te*S<0?y-S:y}let ee,ae=A?this.addCalendar(t,{years:A},"constrain",s):t;do{u+=S,ee=ae,ae=this.addMonthsCalendar(ee,S,"constrain",s),ae.day!==t.day&&(ae=this.regulateDate({...ae,day:t.day},"constrain",s))}while(this.compareCalendarDates(r,ae)*S>=0);u-=S,c=this.calendarDaysUntil(ee,r,s);break}}return{years:A,months:u,weeks:o,days:c}}daysInMonth(t,r){const{day:i}=t,s=this.maximumMonthLength(t),c=this.minimumMonthLength(t);if(c===s)return c;const o=i<=s-c?s:c,u=this.calendarToIsoDate(t,"constrain",r),A=this.addDaysIso(u,o),S=this.isoToCalendarDate(A,r),y=this.addDaysIso(A,-S.day);return this.isoToCalendarDate(y,r).day}daysInPreviousMonth(t,r){const{day:i,month:s,year:c}=t;let o={year:s>1?c:c-1,month:s,day:1};const u=s>1?s-1:this.monthsInYear(o,r);o={...o,month:u};const A=this.minimumMonthLength(o),S=this.maximumMonthLength(o);if(A===S)return S;const y=this.calendarToIsoDate(t,"constrain",r),R=this.addDaysIso(y,-i);return this.isoToCalendarDate(R,r).day}startOfCalendarYear(t){return{year:t.year,month:1,monthCode:"M01",day:1}}startOfCalendarMonth(t){return{year:t.year,month:t.month,day:1}}calendarDaysUntil(t,r,i){const s=this.calendarToIsoDate(t,"constrain",i),c=this.calendarToIsoDate(r,"constrain",i);return this.isoDaysUntil(s,c)}isoDaysUntil(t,r){return kw(t.year,t.month,t.day,r.year,r.month,r.day,"day").days}monthDayFromFields(t,r,i){let s,c,o,u,A,{monthCode:S,day:y}=t;if(void 0===S){let{year:ae,era:te,eraYear:fe}=t;if(void 0===ae&&(void 0===te||void 0===fe))throw new TypeError("when `monthCode` is omitted, `year` (or `era` and `eraYear`) and `month` are required");({monthCode:S,day:y}=this.isoToCalendarDate(this.calendarToIsoDate(t,r,i),i))}const R=this.isoToCalendarDate({year:1972,month:12,day:31},i),ee=R.monthCode>S||R.monthCode===S&&R.day>=y?R.year:R.year-1;for(let ae=0;ae<100;ae++){const te=this.adjustCalendarDate({day:y,monthCode:S,year:ee-ae},i),fe=this.calendarToIsoDate(te,"constrain",i),we=this.isoToCalendarDate(fe,i);if(({year:s,month:c,day:o}=fe),we.monthCode===S&&we.day===y)return{month:c,day:o,year:s};"constrain"===r&&(void 0===u||we.monthCode===u.monthCode&&we.day>u.day)&&(u=we,A=fe)}if("constrain"===r&&void 0!==A)return A;throw new RangeError(`No recent ${this.id} year with monthCode ${S} and day ${y}`)}}class lD extends sl{constructor(){super(...arguments),this.id="hebrew",this.calendarType="lunisolar",this.months={Tishri:{leap:1,regular:1,monthCode:"M01",days:30},Heshvan:{leap:2,regular:2,monthCode:"M02",days:{min:29,max:30}},Kislev:{leap:3,regular:3,monthCode:"M03",days:{min:29,max:30}},Tevet:{leap:4,regular:4,monthCode:"M04",days:29},Shevat:{leap:5,regular:5,monthCode:"M05",days:30},Adar:{leap:void 0,regular:6,monthCode:"M06",days:29},"Adar I":{leap:6,regular:void 0,monthCode:"M05L",days:30},"Adar II":{leap:7,regular:void 0,monthCode:"M06",days:29},Nisan:{leap:8,regular:7,monthCode:"M07",days:30},Iyar:{leap:9,regular:8,monthCode:"M08",days:29},Sivan:{leap:10,regular:9,monthCode:"M09",days:30},Tamuz:{leap:11,regular:10,monthCode:"M10",days:29},Av:{leap:12,regular:11,monthCode:"M11",days:30},Elul:{leap:13,regular:12,monthCode:"M12",days:29}},this.hasEra=!1}inLeapYear(t){const{year:r}=t;return(7*r+1)%19<7}monthsInYear(t){return this.inLeapYear(t)?13:12}minimumMonthLength(t){return this.minMaxMonthLength(t,"min")}maximumMonthLength(t){return this.minMaxMonthLength(t,"max")}minMaxMonthLength(t,r){const{month:i,year:s}=t,c=this.getMonthCode(s,i),o=Hw(this.months).find(A=>A[1].monthCode===c);if(void 0===o)throw new RangeError(`unmatched Hebrew month: ${i}`);const u=o[1].days;return"number"==typeof u?u:u[r]}estimateIsoDate(t){const{year:r}=t;return{year:r-3760,month:1,day:1}}getMonthCode(t,r){return this.inLeapYear({year:t})?6===r?Wc(5,!0):Wc(r<6?r:r-1):Wc(r)}adjustCalendarDate(t,r,i="constrain",s=!1){let{year:c,eraYear:o,month:u,monthCode:A,day:S,monthExtra:y}=t;if(void 0===c&&void 0!==o&&(c=o),void 0===o&&void 0!==c&&(o=c),s){if(y){const R=this.months[y];if(!R)throw new RangeError(`Unrecognized month from formatToParts: ${y}`);u=this.inLeapYear({year:c})?R.leap:R.regular}return A=this.getMonthCode(c,u),{year:c,month:u,day:S,era:void 0,eraYear:o,monthCode:A}}if(this.validateCalendarDate(t),void 0===u)if(A.endsWith("L")){if("M05L"!==A)throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${A}`);if(u=6,!this.inLeapYear({year:c})){if("reject"===i)throw new RangeError(`Hebrew monthCode M05L is invalid in year ${c} which is not a leap year`);u=6,A="M06"}}else{u=Ww(A),this.inLeapYear({year:c})&&u>=6&&u++;const R=this.monthsInYear({year:c});if(u<1||u>R)throw new RangeError(`Invalid monthCode: ${A}`)}else if("reject"===i?(Zi(u,1,this.monthsInYear({year:c})),Zi(S,1,this.maximumMonthLength({year:c,month:u}))):(u=oo(u,1,this.monthsInYear({year:c})),S=oo(S,1,this.maximumMonthLength({year:c,month:u}))),void 0===A)A=this.getMonthCode(c,u);else if(this.getMonthCode(c,u)!==A)throw new RangeError(`monthCode ${A} doesn't correspond to month ${u} in Hebrew year ${c}`);return{...t,day:S,month:u,monthCode:A,year:c,eraYear:o}}}class ol extends sl{constructor(){super(...arguments),this.calendarType="lunar",this.DAYS_PER_ISLAMIC_YEAR=354+11/30,this.DAYS_PER_ISO_YEAR=365.2425,this.constantEra="ah"}inLeapYear(t,r){return 30===this.daysInMonth({year:t.year,month:12,day:1},r)}monthsInYear(){return 12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}estimateIsoDate(t){const{year:r}=this.adjustCalendarDate(t);return{year:fD(r*this.DAYS_PER_ISLAMIC_YEAR/this.DAYS_PER_ISO_YEAR)+622,month:1,day:1}}}class eE extends ol{constructor(){super(...arguments),this.id="islamic"}}class hD extends ol{constructor(){super(...arguments),this.id="islamic-umalqura"}}class pD extends ol{constructor(){super(...arguments),this.id="islamic-tbla"}}class yD extends ol{constructor(){super(...arguments),this.id="islamic-civil"}}class mD extends ol{constructor(){super(...arguments),this.id="islamic-rgsa"}}class gD extends ol{constructor(){super(...arguments),this.id="islamicc"}}class vD extends sl{constructor(){super(...arguments),this.id="persian",this.calendarType="solar",this.constantEra="ap"}inLeapYear(t,r){return eE.prototype.inLeapYear.call(this,t,r)}monthsInYear(){return 12}minimumMonthLength(t){const{month:r}=t;return 12===r?29:r<=6?31:30}maximumMonthLength(t){const{month:r}=t;return 12===r?30:r<=6?31:30}estimateIsoDate(t){const{year:r}=this.adjustCalendarDate(t);return{year:r+621,month:1,day:1}}}class wD extends sl{constructor(){super(...arguments),this.id="indian",this.calendarType="solar",this.constantEra="saka",this.months={1:{length:30,month:3,day:22,leap:{length:31,month:3,day:21}},2:{length:31,month:4,day:21},3:{length:31,month:5,day:22},4:{length:31,month:6,day:22},5:{length:31,month:7,day:23},6:{length:31,month:8,day:23},7:{length:30,month:9,day:23},8:{length:30,month:10,day:23},9:{length:30,month:11,day:22},10:{length:30,month:12,day:22},11:{length:30,month:1,nextYear:!0,day:21},12:{length:30,month:2,nextYear:!0,day:20}},this.vulnerableToBceBug="10/11/-79 Saka"!==new Date("0000-01-01T00:00Z").toLocaleDateString("en-US-u-ca-indian",{timeZone:"UTC"})}inLeapYear(t){return tE(t.year+78)}monthsInYear(){return 12}minimumMonthLength(t){return this.getMonthInfo(t).length}maximumMonthLength(t){return this.getMonthInfo(t).length}getMonthInfo(t){const{month:r}=t;let i=this.months[r];if(void 0===i)throw new RangeError(`Invalid month: ${r}`);return this.inLeapYear(t)&&i.leap&&(i=i.leap),i}estimateIsoDate(t){const r=this.adjustCalendarDate(t),i=this.getMonthInfo(r);return Ku(r.year+78+(i.nextYear?1:0),i.month,i.day,0,0,0,r.day-1,"constrain")}checkIcuBugs(t){if(this.vulnerableToBceBug&&t.year<1)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 0001-01-01 (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)`)}}function tE(n){return n%4==0&&(n%100!=0||n%400==0)}class Xh extends sl{constructor(t,r){super(),this.calendarType="solar",this.v8IsVulnerableToJulianBug=new Date("+001001-01-01T00:00Z").toLocaleDateString("en-US-u-ca-japanese",{timeZone:"UTC"}).startsWith("12"),this.calendarIsVulnerableToJulianBug=!1,this.id=t;const{eras:i,anchorEra:s}=function(o){let u,A=o;if(0===A.length)throw new RangeError("Invalid era data: eras are required");if(1===A.length&&A[0].reverseOf)throw new RangeError("Invalid era data: anchor era cannot count years backwards");if(1===A.length&&!A[0].name)throw new RangeError("Invalid era data: at least one named era is required");if(A.filter(y=>null!=y.reverseOf).length>1)throw new RangeError("Invalid era data: only one era can count years backwards");A.forEach(y=>{if(y.isAnchor||!y.anchorEpoch&&!y.reverseOf){if(u)throw new RangeError("Invalid era data: cannot have multiple anchor eras");u=y,y.anchorEpoch={year:y.hasYearZero?0:1}}else if(!y.name)throw new RangeError("If era name is blank, it must be the anchor era")}),A=A.filter(y=>y.name),A.forEach(y=>{const{reverseOf:R}=y;if(R){const ee=A.find(ae=>ae.name===R);if(void 0===ee)throw new RangeError(`Invalid era data: unmatched reverseOf era: ${R}`);y.reverseOf=ee,y.anchorEpoch=ee.anchorEpoch,y.isoEpoch=ee.isoEpoch}void 0===y.anchorEpoch.month&&(y.anchorEpoch.month=1),void 0===y.anchorEpoch.day&&(y.anchorEpoch.day=1)}),dD.call(A,(y,R)=>{if(y.reverseOf)return 1;if(R.reverseOf)return-1;if(!y.isoEpoch||!R.isoEpoch)throw new RangeError("Invalid era data: missing ISO epoch");return R.isoEpoch.year-y.isoEpoch.year});const S=A[A.length-1].reverseOf;if(S&&S!==A[A.length-2])throw new RangeError("Invalid era data: invalid reverse-sign era");return A.forEach((y,R)=>{y.genericName="era"+(A.length-1-R)}),{eras:A,anchorEra:u||A[0]}}(r);this.anchorEra=s,this.eras=i}inLeapYear(t){const{year:r}=this.estimateIsoDate({month:1,day:1,year:t.year});return tE(r)}monthsInYear(){return 12}minimumMonthLength(t){const{month:r}=t;return 2===r?this.inLeapYear(t)?29:28:[4,6,9,11].indexOf(r)>=0?30:31}maximumMonthLength(t){return this.minimumMonthLength(t)}completeEraYear(t){const r=(u,A)=>{const S=t[u];if(null!=S&&S!=A)throw new RangeError(`Input ${u} ${S} doesn't match calculated value ${A}`)},i=u=>{let A;const S={...t,year:u},y=this.eras.find((R,ee)=>{if(ee===this.eras.length-1){if(R.reverseOf){if(u>0)throw new RangeError(`Signed year ${u} is invalid for era ${R.name}`);return A=R.anchorEpoch.year-u,!0}return A=u-R.anchorEpoch.year+(R.hasYearZero?0:1),!0}return this.compareCalendarDates(S,R.anchorEpoch)>=0&&(A=u-R.anchorEpoch.year+(R.hasYearZero?0:1),!0)});if(!y)throw new RangeError(`Year ${u} was not matched by any era`);return{eraYear:A,era:y.name}};let{year:s,eraYear:c,era:o}=t;if(null!=s)({eraYear:c,era:o}=i(s)),r("era",o),r("eraYear",c);else{if(null==c)throw new RangeError("Either `year` or `eraYear` and `era` are required");{const u=void 0===o?void 0:this.eras.find(A=>A.name===o||A.genericName===o);if(!u)throw new RangeError(`Era ${o} (ISO year ${c}) was not matched by any era`);if(c<1&&u.reverseOf)throw new RangeError(`Years in ${o} era must be positive, not ${s}`);s=u.reverseOf?u.anchorEpoch.year-c:c+u.anchorEpoch.year-(u.hasYearZero?0:1),r("year",s),({eraYear:c,era:o}=i(s))}}return{...t,year:s,eraYear:c,era:o}}adjustCalendarDate(t,r,i="constrain"){let s=t;const{month:c,monthCode:o}=s;return void 0===c&&(s={...s,month:Ww(o)}),this.validateCalendarDate(s),s=this.completeEraYear(s),super.adjustCalendarDate(s,r,i)}estimateIsoDate(t){const r=this.adjustCalendarDate(t),{year:i,month:s,day:c}=r,{anchorEra:o}=this;return Dy(i+o.isoEpoch.year-(o.hasYearZero?0:1),s,c,"constrain")}checkIcuBugs(t){if(this.calendarIsVulnerableToJulianBug&&this.v8IsVulnerableToJulianBug&&Od(t.year,t.month,t.day,1582,10,15)<0)throw new RangeError(`calendar '${this.id}' is broken for ISO dates before 1582-10-15 (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)`)}}class qw extends Xh{constructor(t,r){super(t,r)}inLeapYear(t){const{year:r}=t;return(r+1)%4==0}monthsInYear(){return 13}minimumMonthLength(t){const{month:r}=t;return 13===r?this.inLeapYear(t)?6:5:30}maximumMonthLength(t){return this.minimumMonthLength(t)}}class bD extends qw{constructor(){super("ethioaa",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}}])}}class _D extends qw{constructor(){super("coptic",[{name:"era1",isoEpoch:{year:284,month:8,day:29}},{name:"era0",reverseOf:"era1"}])}}class xD extends qw{constructor(){super("ethiopic",[{name:"era0",isoEpoch:{year:-5492,month:7,day:17}},{name:"era1",isoEpoch:{year:8,month:8,day:27},anchorEpoch:{year:5501}}])}}class ED extends Xh{constructor(){super("roc",[{name:"minguo",isoEpoch:{year:1912,month:1,day:1}},{name:"before-roc",reverseOf:"minguo"}]),this.calendarIsVulnerableToJulianBug=!0}}class SD extends Xh{constructor(){super("buddhist",[{name:"be",hasYearZero:!0,isoEpoch:{year:-543,month:1,day:1}}]),this.calendarIsVulnerableToJulianBug=!0}}class AD extends Xh{constructor(){super("gregory",[{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}])}reviseIntlEra(t){let{era:r,eraYear:i}=t;return"bc"!==r&&"b"!==r||(r="bce"),"ad"!==r&&"a"!==r||(r="ce"),{era:r,eraYear:i}}}class MD extends Xh{constructor(){super("japanese",[{name:"reiwa",isoEpoch:{year:2019,month:5,day:1},anchorEpoch:{year:2019,month:5,day:1}},{name:"heisei",isoEpoch:{year:1989,month:1,day:8},anchorEpoch:{year:1989,month:1,day:8}},{name:"showa",isoEpoch:{year:1926,month:12,day:25},anchorEpoch:{year:1926,month:12,day:25}},{name:"taisho",isoEpoch:{year:1912,month:7,day:30},anchorEpoch:{year:1912,month:7,day:30}},{name:"meiji",isoEpoch:{year:1868,month:9,day:8},anchorEpoch:{year:1868,month:9,day:8}},{name:"ce",isoEpoch:{year:1,month:1,day:1}},{name:"bce",reverseOf:"ce"}]),this.calendarIsVulnerableToJulianBug=!0,this.eraLength="long",this.erasBeginMidYear=!0}reviseIntlEra(t,r){const{era:i,eraYear:s}=t,{year:c}=r;return this.eras.find(o=>o.name===i)?{era:i,eraYear:s}:c<1?{era:"bce",eraYear:1-c}:{era:"ce",eraYear:c}}}class rE extends sl{constructor(){super(...arguments),this.calendarType="lunisolar",this.hasEra=!1}inLeapYear(t,r){const i=this.getMonthList(t.year,r);return 13===Hw(i).length}monthsInYear(t,r){return this.inLeapYear(t,r)?13:12}minimumMonthLength(){return 29}maximumMonthLength(){return 30}getMonthList(t,r){if(void 0===t)throw new TypeError("Missing year");const i=JSON.stringify({func:"getMonthList",calendarYear:t,id:this.id}),s=r.get(i);if(s)return s;const c=this.getFormatter(),o=(we,Pe)=>{const Te=Q8({isoYear:we,isoMonth:2,isoDay:1}),Ae=new Date(Te);Ae.setUTCDate(Pe+1);const Ce=c.formatToParts(Ae),je=Ce.find($e=>"month"===$e.type).value,Le=+Ce.find($e=>"day"===$e.type).value;let ze=Ce.find($e=>"relatedYear"===$e.type);if(void 0===ze)throw new RangeError(`Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`);return ze=+ze.value,{calendarMonthString:je,calendarDay:Le,calendarYearToVerify:ze}};let u=17,{calendarMonthString:A,calendarDay:S,calendarYearToVerify:y}=o(t,u);"1"!==A&&(u+=29,({calendarMonthString:A,calendarDay:S}=o(t,u))),u-=S-5;const R={};let ee,ae,te=1,fe=!1;do{({calendarMonthString:A,calendarDay:S,calendarYearToVerify:y}=o(t,u)),ee&&(R[ae].daysInMonth=ee+30-S),y!==t?fe=!0:(R[A]={monthIndex:te++},u+=30),ee=S,ae=A}while(!fe);return R[ae].daysInMonth=ee+30-S,r.set(i,R),R}estimateIsoDate(t){const{year:r,month:i}=t;return{year:r,month:i>=12?12:i+1,day:1}}adjustCalendarDate(t,r,i="constrain",s=!1){let{year:c,month:o,monthExtra:u,day:A,monthCode:S,eraYear:y}=t;if(s){if(c=y,u&&"bis"!==u)throw new RangeError(`Unexpected leap month suffix: ${u}`);const R=Wc(o,void 0!==u),ee=`${o}${u||""}`,ae=this.getMonthList(c,r)[ee];if(void 0===ae)throw new RangeError(`Unmatched month ${ee} in Chinese year ${c}`);return o=ae.monthIndex,{year:c,month:o,day:A,era:void 0,eraYear:y,monthCode:R}}if(this.validateCalendarDate(t),void 0===c&&(c=y),void 0===y&&(y=c),void 0===o){const R=this.getMonthList(c,r);let ee=S.replace("L","bis").slice(1);"0"===ee[0]&&(ee=ee.slice(1));let ae=R[ee];if(o=ae&&ae.monthIndex,void 0===o&&S.endsWith("L")&&"M13L"!=S&&"constrain"===i){let te=S.slice(1,-1);"0"===te[0]&&(te=te.slice(1)),ae=R[te],ae&&(o=ae.monthIndex,S=Wc(te))}if(void 0===o)throw new RangeError(`Unmatched month ${S} in Chinese year ${c}`)}else if(void 0===S){const R=this.getMonthList(c,r),ee=Hw(R),ae=ee.length;"reject"===i?(Zi(o,1,ae),Zi(A,1,this.maximumMonthLength())):(o=oo(o,1,ae),A=oo(A,1,this.maximumMonthLength()));const te=ee.find(([,fe])=>fe.monthIndex===o);if(void 0===te)throw new RangeError(`Invalid month ${o} in Chinese year ${c}`);S=Wc(te[0].replace("bis",""),-1!==te[0].indexOf("bis"))}else{const R=this.getMonthList(c,r);let ee=S.replace("L","bis").slice(1);"0"===ee[0]&&(ee=ee.slice(1));const ae=R[ee];if(!ae)throw new RangeError(`Unmatched monthCode ${S} in Chinese year ${c}`);if(o!==ae.monthIndex)throw new RangeError(`monthCode ${S} doesn't correspond to month ${o} in Chinese year ${c}`)}return{...t,year:c,eraYear:y,month:o,monthCode:S,day:A}}}class TD extends rE{constructor(){super(...arguments),this.id="chinese"}}class ID extends rE{constructor(){super(...arguments),this.id="dangi"}}class PD{constructor(t){this.helper=t}dateFromFields(t,r,i){const s=new Qn,c=Vr(t,this.fields(["day","month","monthCode","year"]),[]),o=hi(r),{year:u,month:A,day:S}=this.helper.calendarToIsoDate(c,o,s),y=Bo(u,A,S,i);return s.setObject(y),y}yearMonthFromFields(t,r,i){const s=new Qn,c=Vr(t,this.fields(["month","monthCode","year"]),[]),o=hi(r),{year:u,month:A,day:S}=this.helper.calendarToIsoDate({...c,day:1},o,s),y=zh(u,A,i,S);return s.setObject(y),y}monthDayFromFields(t,r,i){const s=new Qn,c=Vr(t,this.fields(["day","month","monthCode","year"]),[]),o=hi(r),{year:u,month:A,day:S}=this.helper.monthDayFromFields(c,o,s),y=Kh(A,S,i,u);return s.setObject(y),y}fields(t){let r=t;return Z8.call(r,"year")&&(r=[...r,"era","eraYear"]),r}fieldKeysToIgnore(t){const r=new J8;for(let i=0;i<t.length;i++){const s=t[i];switch(cr(os,r,[s]),s){case"era":cr(os,r,["eraYear"]),cr(os,r,["year"]);break;case"eraYear":cr(os,r,["era"]),cr(os,r,["year"]);break;case"year":cr(os,r,["era"]),cr(os,r,["eraYear"]);break;case"month":cr(os,r,["monthCode"]),this.helper.erasBeginMidYear&&(cr(os,r,["era"]),cr(os,r,["eraYear"]));break;case"monthCode":cr(os,r,["month"]),this.helper.erasBeginMidYear&&(cr(os,r,["era"]),cr(os,r,["eraYear"]));break;case"day":this.helper.erasBeginMidYear&&(cr(os,r,["era"]),cr(os,r,["eraYear"]))}}return[...cr(X8,r,[])]}dateAdd(t,r,i,s,c,o,u){const A=Qn.getCacheForObject(t),S=this.helper.temporalToCalendarDate(t,A),y=this.helper.addCalendar(S,{years:r,months:i,weeks:s,days:c},o,A),R=this.helper.calendarToIsoDate(y,"constrain",A),{year:ee,month:ae,day:te}=R,fe=Bo(ee,ae,te,u);return new Qn(A).setObject(fe),fe}dateUntil(t,r,i){const s=Qn.getCacheForObject(t),c=Qn.getCacheForObject(r),o=this.helper.temporalToCalendarDate(t,s),u=this.helper.temporalToCalendarDate(r,c);return this.helper.untilCalendar(o,u,i,s)}year(t){const r=Qn.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,r).year}month(t){const r=Qn.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,r).month}day(t){const r=Qn.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,r).day}era(t){if(!this.helper.hasEra)return;const r=Qn.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,r).era}eraYear(t){if(!this.helper.hasEra)return;const r=Qn.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,r).eraYear}monthCode(t){const r=Qn.getCacheForObject(t);return this.helper.temporalToCalendarDate(t,r).monthCode}dayOfWeek(t){return qn.iso8601.dayOfWeek(t)}dayOfYear(t){const r=Qn.getCacheForObject(t),i=this.helper.isoToCalendarDate(t,r),s=this.helper.startOfCalendarYear(i);return this.helper.calendarDaysUntil(s,i,r)+1}weekOfYear(t){return qn.iso8601.weekOfYear(t)}yearOfWeek(t){return qn.iso8601.yearOfWeek(t)}daysInWeek(t){return qn.iso8601.daysInWeek(t)}daysInMonth(t){const r=Qn.getCacheForObject(t),i=this.helper.temporalToCalendarDate(t,r),s=this.helper.maximumMonthLength(i);if(s===this.helper.minimumMonthLength(i))return s;const c=this.helper.startOfCalendarMonth(i),o=this.helper.addMonthsCalendar(c,1,"constrain",r);return this.helper.calendarDaysUntil(c,o,r)}daysInYear(t){let r=t;Ii(r,Ht)||(r=Sn(r));const i=Qn.getCacheForObject(r),s=this.helper.temporalToCalendarDate(r,i),c=this.helper.startOfCalendarYear(s),o=this.helper.addCalendar(c,{years:1},"constrain",i);return this.helper.calendarDaysUntil(c,o,i)}monthsInYear(t){const r=Qn.getCacheForObject(t),i=this.helper.temporalToCalendarDate(t,r);return this.helper.monthsInYear(i,r)}inLeapYear(t){let r=t;Ii(r,Ht)||(r=Sn(r));const i=Qn.getCacheForObject(r),s=this.helper.temporalToCalendarDate(r,i);return this.helper.inLeapYear(s,i)}}for(const n of[lD,vD,xD,bD,_D,TD,ID,ED,wD,SD,AD,MD,eE,hD,pD,yD,mD,gD]){const t=new n;qn[t.id]=new PD(t)}class Qh{constructor(t,r,i,s="iso8601"){Wx(this,an(t),an(r),an(i),so(s))}get calendarId(){if(!Zr(this))throw new TypeError("invalid receiver");return qi(he(this,Et))}get era(){if(!Zr(this))throw new TypeError("invalid receiver");return zy(he(this,Et),this)}get eraYear(){if(!Zr(this))throw new TypeError("invalid receiver");return Vy(he(this,Et),this)}get year(){if(!Zr(this))throw new TypeError("invalid receiver");return Fy(he(this,Et),this)}get month(){if(!Zr(this))throw new TypeError("invalid receiver");return Ky(he(this,Et),this)}get monthCode(){if(!Zr(this))throw new TypeError("invalid receiver");return Vh(he(this,Et),this)}get day(){if(!Zr(this))throw new TypeError("invalid receiver");return Hh(he(this,Et),this)}get dayOfWeek(){if(!Zr(this))throw new TypeError("invalid receiver");return vw(he(this,Et),this)}get dayOfYear(){if(!Zr(this))throw new TypeError("invalid receiver");return ww(he(this,Et),this)}get weekOfYear(){if(!Zr(this))throw new TypeError("invalid receiver");return bw(he(this,Et),this)}get yearOfWeek(){if(!Zr(this))throw new TypeError("invalid receiver");return _w(he(this,Et),this)}get daysInWeek(){if(!Zr(this))throw new TypeError("invalid receiver");return xw(he(this,Et),this)}get daysInMonth(){if(!Zr(this))throw new TypeError("invalid receiver");return Hy(he(this,Et),this)}get daysInYear(){if(!Zr(this))throw new TypeError("invalid receiver");return Wy(he(this,Et),this)}get monthsInYear(){if(!Zr(this))throw new TypeError("invalid receiver");return Gy(he(this,Et),this)}get inLeapYear(){if(!Zr(this))throw new TypeError("invalid receiver");return qy(he(this,Et),this)}with(t,r){if(!Zr(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid argument");Lf(t);const i=Xr(r),s=he(this,Et),c=vi(s,["day","month","monthCode","year"]);let o=Vr(this,c,[]);return o=ju(s,o,Vr(t,c,"partial")),o=Vr(o,c,[]),jc(s,o,i)}withCalendar(t){if(!Zr(this))throw new TypeError("invalid receiver");const r=so(t);return new Qh(he(this,Ht),he(this,qt),he(this,Xt),r)}add(t,r){if(!Zr(this))throw new TypeError("invalid receiver");const i=Vf(t),s=Xr(r);return Gi(he(this,Et),this,i,s)}subtract(t,r){if(!Zr(this))throw new TypeError("invalid receiver");const i=m8(Vf(t)),s=Xr(r);return Gi(he(this,Et),this,i,s)}until(t,r){if(!Zr(this))throw new TypeError("invalid receiver");return E8("until",this,t,r)}since(t,r){if(!Zr(this))throw new TypeError("invalid receiver");return E8("since",this,t,r)}equals(t){if(!Zr(this))throw new TypeError("invalid receiver");const r=Sn(t);for(const i of[Ht,qt,Xt])if(he(this,i)!==he(r,i))return!1;return Gh(he(this,Et),he(r,Et))}toString(t){if(!Zr(this))throw new TypeError("invalid receiver");return r8(this,Nh(Xr(t)))}toJSON(){if(!Zr(this))throw new TypeError("invalid receiver");return r8(this)}toLocaleString(t,r){if(!Zr(this))throw new TypeError("invalid receiver");return new Hc(t,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDate")}toPlainDateTime(t){if(!Zr(this))throw new TypeError("invalid receiver");const r=he(this,Ht),i=he(this,qt),s=he(this,Xt),c=he(this,Et);if(void 0===t)return io(r,i,s,0,0,0,0,0,0,c);const o=$c(t);return io(r,i,s,he(o,Dr),he(o,Nr),he(o,$r),he(o,jr),he(o,Ur),he(o,Lr),c)}toZonedDateTime(t){if(!Zr(this))throw new TypeError("invalid receiver");let r,i;if(Vn(t))if(Po(t))r=t;else{const te=t.timeZone;void 0===te?r=is(t):(r=is(te),i=t.plainTime)}else r=is(t);const s=he(this,Ht),c=he(this,qt),o=he(this,Xt),u=he(this,Et);let A=0,S=0,y=0,R=0,ee=0,ae=0;return void 0!==i&&(i=$c(i),A=he(i,Dr),S=he(i,Nr),y=he(i,$r),R=he(i,jr),ee=he(i,Ur),ae=he(i,Lr)),Wi(he(ks(r,io(s,c,o,A,S,y,R,ee,ae,u),"compatible"),wr),r,u)}toPlainYearMonth(){if(!Zr(this))throw new TypeError("invalid receiver");const t=he(this,Et);return Uu(t,Vr(this,vi(t,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Zr(this))throw new TypeError("invalid receiver");const t=he(this,Et);return Wf(t,Vr(this,vi(t,["day","monthCode"]),[]))}getISOFields(){if(!Zr(this))throw new TypeError("invalid receiver");return{calendar:he(this,Et),isoDay:he(this,Xt),isoMonth:he(this,qt),isoYear:he(this,Ht)}}getCalendar(){if(!Zr(this))throw new TypeError("invalid receiver");return Hf(he(this,Et))}static from(t,r){const i=Xr(r);return Zr(t)?(hi(i),Bo(he(t,Ht),he(t,qt),he(t,Xt),he(t,Et))):Sn(t,i)}static compare(t,r){const i=Sn(t),s=Sn(r);return Od(he(i,Ht),he(i,qt),he(i,Xt),he(s,Ht),he(s,qt),he(s,Xt))}}ec(Qh,"Temporal.PlainDate");class e0{constructor(t,r,i,s=0,c=0,o=0,u=0,A=0,S=0,y="iso8601"){Gx(this,an(t),an(r),an(i),void 0===s?0:an(s),void 0===c?0:an(c),void 0===o?0:an(o),void 0===u?0:an(u),void 0===A?0:an(A),void 0===S?0:an(S),so(y))}get calendarId(){if(!Or(this))throw new TypeError("invalid receiver");return qi(he(this,Et))}get year(){if(!Or(this))throw new TypeError("invalid receiver");return Fy(he(this,Et),this)}get month(){if(!Or(this))throw new TypeError("invalid receiver");return Ky(he(this,Et),this)}get monthCode(){if(!Or(this))throw new TypeError("invalid receiver");return Vh(he(this,Et),this)}get day(){if(!Or(this))throw new TypeError("invalid receiver");return Hh(he(this,Et),this)}get hour(){if(!Or(this))throw new TypeError("invalid receiver");return he(this,Dr)}get minute(){if(!Or(this))throw new TypeError("invalid receiver");return he(this,Nr)}get second(){if(!Or(this))throw new TypeError("invalid receiver");return he(this,$r)}get millisecond(){if(!Or(this))throw new TypeError("invalid receiver");return he(this,jr)}get microsecond(){if(!Or(this))throw new TypeError("invalid receiver");return he(this,Ur)}get nanosecond(){if(!Or(this))throw new TypeError("invalid receiver");return he(this,Lr)}get era(){if(!Or(this))throw new TypeError("invalid receiver");return zy(he(this,Et),this)}get eraYear(){if(!Or(this))throw new TypeError("invalid receiver");return Vy(he(this,Et),this)}get dayOfWeek(){if(!Or(this))throw new TypeError("invalid receiver");return vw(he(this,Et),this)}get dayOfYear(){if(!Or(this))throw new TypeError("invalid receiver");return ww(he(this,Et),this)}get weekOfYear(){if(!Or(this))throw new TypeError("invalid receiver");return bw(he(this,Et),this)}get yearOfWeek(){if(!Or(this))throw new TypeError("invalid receiver");return _w(he(this,Et),this)}get daysInWeek(){if(!Or(this))throw new TypeError("invalid receiver");return xw(he(this,Et),this)}get daysInYear(){if(!Or(this))throw new TypeError("invalid receiver");return Wy(he(this,Et),this)}get daysInMonth(){if(!Or(this))throw new TypeError("invalid receiver");return Hy(he(this,Et),this)}get monthsInYear(){if(!Or(this))throw new TypeError("invalid receiver");return Gy(he(this,Et),this)}get inLeapYear(){if(!Or(this))throw new TypeError("invalid receiver");return qy(he(this,Et),this)}with(t,r){if(!Or(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid argument");Lf(t);const i=Xr(r),s=he(this,Et),c=vi(s,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);let o=Vr(this,c,[]);o=ju(s,o,Vr(t,c,"partial")),o=Vr(o,c,[]);const{year:u,month:A,day:S,hour:y,minute:R,second:ee,millisecond:ae,microsecond:te,nanosecond:fe}=Uh(s,o,i);return io(u,A,S,y,R,ee,ae,te,fe,s)}withPlainTime(t){if(!Or(this))throw new TypeError("invalid receiver");const r=he(this,Ht),i=he(this,qt),s=he(this,Xt),c=he(this,Et);if(void 0===t)return io(r,i,s,0,0,0,0,0,0,c);const o=$c(t);return io(r,i,s,he(o,Dr),he(o,Nr),he(o,$r),he(o,jr),he(o,Ur),he(o,Lr),c)}withPlainDate(t){if(!Or(this))throw new TypeError("invalid receiver");const r=Sn(t),i=he(r,Ht),s=he(r,qt),c=he(r,Xt);let o=he(r,Et);const u=he(this,Dr),A=he(this,Nr),S=he(this,$r),y=he(this,jr),R=he(this,Ur),ee=he(this,Lr);return o=Yx(he(this,Et),o),io(i,s,c,u,A,S,y,R,ee,o)}withCalendar(t){if(!Or(this))throw new TypeError("invalid receiver");const r=so(t);return new e0(he(this,Ht),he(this,qt),he(this,Xt),he(this,Dr),he(this,Nr),he(this,$r),he(this,jr),he(this,Ur),he(this,Lr),r)}add(t,r){if(!Or(this))throw new TypeError("invalid receiver");return k8("add",this,t,r)}subtract(t,r){if(!Or(this))throw new TypeError("invalid receiver");return k8("subtract",this,t,r)}until(t,r){if(!Or(this))throw new TypeError("invalid receiver");return S8("until",this,t,r)}since(t,r){if(!Or(this))throw new TypeError("invalid receiver");return S8("since",this,t,r)}round(t){if(!Or(this))throw new TypeError("invalid receiver");if(void 0===t)throw new TypeError("options parameter is required");const r="string"==typeof t?Xf("smallestUnit",t):Xr(t),i=Kf(r),s=Ia(r,"halfExpand"),c=no(r,"smallestUnit","time",Du,["day"]),o={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[c];zf(i,o,1===o);let u=he(this,Ht),A=he(this,qt),S=he(this,Xt),y=he(this,Dr),R=he(this,Nr),ee=he(this,$r),ae=he(this,jr),te=he(this,Ur),fe=he(this,Lr);return({year:u,month:A,day:S,hour:y,minute:R,second:ee,millisecond:ae,microsecond:te,nanosecond:fe}=$w(u,A,S,y,R,ee,ae,te,fe,i,c,s)),io(u,A,S,y,R,ee,ae,te,fe,he(this,Et))}equals(t){if(!Or(this))throw new TypeError("invalid receiver");const r=$u(t);for(const i of[Ht,qt,Xt,Dr,Nr,$r,jr,Ur,Lr])if(he(this,i)!==he(r,i))return!1;return Gh(he(this,Et),he(r,Et))}toString(t){if(!Or(this))throw new TypeError("invalid receiver");const r=Xr(t),i=Nh(r),s=$h(r),c=Ia(r,"trunc"),o=no(r,"smallestUnit","time",void 0);if("hour"===o)throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:u,unit:A,increment:S}=jh(o,s);return n8(this,u,i,{unit:A,increment:S,roundingMode:c})}toJSON(){if(!Or(this))throw new TypeError("invalid receiver");return n8(this,"auto")}toLocaleString(t,r){if(!Or(this))throw new TypeError("invalid receiver");return new Hc(t,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainDateTime")}toZonedDateTime(t,r){if(!Or(this))throw new TypeError("invalid receiver");const i=is(t);return Wi(he(ks(i,this,Ff(Xr(r))),wr),i,he(this,Et))}toPlainDate(){if(!Or(this))throw new TypeError("invalid receiver");return Gf(this)}toPlainYearMonth(){if(!Or(this))throw new TypeError("invalid receiver");const t=he(this,Et);return Uu(t,Vr(this,vi(t,["monthCode","year"]),[]))}toPlainMonthDay(){if(!Or(this))throw new TypeError("invalid receiver");const t=he(this,Et);return Wf(t,Vr(this,vi(t,["day","monthCode"]),[]))}toPlainTime(){if(!Or(this))throw new TypeError("invalid receiver");return Ew(this)}getISOFields(){if(!Or(this))throw new TypeError("invalid receiver");return{calendar:he(this,Et),isoDay:he(this,Xt),isoHour:he(this,Dr),isoMicrosecond:he(this,Ur),isoMillisecond:he(this,jr),isoMinute:he(this,Nr),isoMonth:he(this,qt),isoNanosecond:he(this,Lr),isoSecond:he(this,$r),isoYear:he(this,Ht)}}getCalendar(){if(!Or(this))throw new TypeError("invalid receiver");return Hf(he(this,Et))}static from(t,r){const i=Xr(r);return Or(t)?(hi(i),io(he(t,Ht),he(t,qt),he(t,Xt),he(t,Dr),he(t,Nr),he(t,$r),he(t,jr),he(t,Ur),he(t,Lr),he(t,Et))):$u(t,i)}static compare(t,r){const i=$u(t),s=$u(r);for(const c of[Ht,qt,Xt,Dr,Nr,$r,jr,Ur,Lr]){const o=he(i,c),u=he(s,c);if(o!==u)return Vu(o-u)}return 0}}ec(e0,"Temporal.PlainDateTime");class $d{constructor(t=0,r=0,i=0,s=0,c=0,o=0,u=0,A=0,S=0,y=0){const R=void 0===t?0:Pi(t),ee=void 0===r?0:Pi(r),ae=void 0===i?0:Pi(i),te=void 0===s?0:Pi(s),fe=void 0===c?0:Pi(c),we=void 0===o?0:Pi(o),Pe=void 0===u?0:Pi(u),Te=void 0===A?0:Pi(A),Ae=void 0===S?0:Pi(S),Ce=void 0===y?0:Pi(y);im(R,ee,ae,te,fe,we,Pe,Te,Ae,Ce),rc(this),Kr(this,xs,R),Kr(this,ji,ee),Kr(this,Gs,ae),Kr(this,Es,te),Kr(this,Ss,fe),Kr(this,As,we),Kr(this,Ms,Pe),Kr(this,Ts,Te),Kr(this,Is,Ae),Kr(this,Ps,Ce)}get years(){if(!si(this))throw new TypeError("invalid receiver");return he(this,xs)}get months(){if(!si(this))throw new TypeError("invalid receiver");return he(this,ji)}get weeks(){if(!si(this))throw new TypeError("invalid receiver");return he(this,Gs)}get days(){if(!si(this))throw new TypeError("invalid receiver");return he(this,Es)}get hours(){if(!si(this))throw new TypeError("invalid receiver");return he(this,Ss)}get minutes(){if(!si(this))throw new TypeError("invalid receiver");return he(this,As)}get seconds(){if(!si(this))throw new TypeError("invalid receiver");return he(this,Ms)}get milliseconds(){if(!si(this))throw new TypeError("invalid receiver");return he(this,Ts)}get microseconds(){if(!si(this))throw new TypeError("invalid receiver");return he(this,Is)}get nanoseconds(){if(!si(this))throw new TypeError("invalid receiver");return he(this,Ps)}get sign(){if(!si(this))throw new TypeError("invalid receiver");return ac(he(this,xs),he(this,ji),he(this,Gs),he(this,Es),he(this,Ss),he(this,As),he(this,Ms),he(this,Ts),he(this,Is),he(this,Ps))}get blank(){if(!si(this))throw new TypeError("invalid receiver");return 0===ac(he(this,xs),he(this,ji),he(this,Gs),he(this,Es),he(this,Ss),he(this,As),he(this,Ms),he(this,Ts),he(this,Is),he(this,Ps))}with(t){if(!si(this))throw new TypeError("invalid receiver");const r=Vr(t,["days","hours","microseconds","milliseconds","minutes","months","nanoseconds","seconds","weeks","years"],"partial"),{years:i=he(this,xs),months:s=he(this,ji),weeks:c=he(this,Gs),days:o=he(this,Es),hours:u=he(this,Ss),minutes:A=he(this,As),seconds:S=he(this,Ms),milliseconds:y=he(this,Ts),microseconds:R=he(this,Is),nanoseconds:ee=he(this,Ps)}=r;return new $d(i,s,c,o,u,A,S,y,R,ee)}negated(){if(!si(this))throw new TypeError("invalid receiver");return m8(this)}abs(){if(!si(this))throw new TypeError("invalid receiver");return new $d(Math.abs(he(this,xs)),Math.abs(he(this,ji)),Math.abs(he(this,Gs)),Math.abs(he(this,Es)),Math.abs(he(this,Ss)),Math.abs(he(this,As)),Math.abs(he(this,Ms)),Math.abs(he(this,Ts)),Math.abs(he(this,Is)),Math.abs(he(this,Ps)))}add(t,r){if(!si(this))throw new TypeError("invalid receiver");return B8("add",this,t,r)}subtract(t,r){if(!si(this))throw new TypeError("invalid receiver");return B8("subtract",this,t,r)}round(t){if(!si(this))throw new TypeError("invalid receiver");if(void 0===t)throw new TypeError("options parameter is required");let r=he(this,xs),i=he(this,ji),s=he(this,Gs),c=he(this,Es),o=he(this,Ss),u=he(this,As),A=he(this,Ms),S=he(this,Ts),y=he(this,Is),R=he(this,Ps),ee=gw(r,i,s,c,o,u,A,S,y,R);const ae="string"==typeof t?Xf("smallestUnit",t):Xr(t);let te=no(ae,"largestUnit","datetime",void 0,["auto"]),fe=jy(ae);const we=Kf(ae),Pe=Ia(ae,"halfExpand");let Te=no(ae,"smallestUnit","datetime",void 0),Ae=!0;Te||(Ae=!1,Te="nanosecond"),ee=Nu(ee,Te);let Ce=!0;if(te||(Ce=!1,te=ee),"auto"===te&&(te=ee),!Ae&&!Ce)throw new RangeError("at least one of smallestUnit or largestUnit is required");if(Nu(te,Te)!==te)throw new RangeError(`largestUnit ${te} cannot be smaller than smallestUnit ${Te}`);const je={hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[Te];return void 0!==je&&zf(we,je,!1),({years:r,months:i,weeks:s,days:c}=rm(r,i,s,c,te,fe)),({years:r,months:i,weeks:s,days:c,hours:o,minutes:u,seconds:A,milliseconds:S,microseconds:y,nanoseconds:R}=Kc(r,i,s,c,o,u,A,S,y,R,we,Te,Pe,fe)),({years:r,months:i,weeks:s,days:c,hours:o,minutes:u,seconds:A,milliseconds:S,microseconds:y,nanoseconds:R}=$8(r,i,s,c,o,u,A,S,y,R,we,Te,Pe,fe)),({days:c,hours:o,minutes:u,seconds:A,milliseconds:S,microseconds:y,nanoseconds:R}=Qo(c,o,u,A,S,y,R,te,fe)),({years:r,months:i,weeks:s,days:c}=function(ze,$e,Ye,ut,ct,vt){const at=Lt("%Temporal.Duration%"),ft=ac(ze,$e,Ye,ut,0,0,0,0,0,0);if(0===ft)return{years:ze,months:$e,weeks:Ye,days:ut};const tt=Ne.BigInt(ft);let st,Je,lt=Ne.BigInt(ze),ot=Ne.BigInt($e),yt=Ne.BigInt(Ye),kt=Ne.BigInt(ut);vt&&(Je=Sn(vt),st=he(Je,Et));const Nt=new at(ft),Qe=new at(0,ft),Ut=new at(0,0,ft);switch(ct){case"year":{if(!st)throw new RangeError("a starting point is required for years balancing");const Gt="string"!=typeof st?vn(st,"dateAdd"):void 0;let Bt,ht,Ct;for(({relativeTo:Bt,days:ht}=ss(st,Je,Nt,Gt));Ne.greaterThanOrEqual(Ta(kt),Ne.BigInt(zn(ht)));)kt=Ne.subtract(kt,Ne.BigInt(ht)),lt=Ne.add(lt,tt),Je=Bt,({relativeTo:Bt,days:ht}=ss(st,Je,Nt,Gt));for(({relativeTo:Bt,days:Ct}=ss(st,Je,Qe,Gt));Ne.greaterThanOrEqual(Ta(kt),Ne.BigInt(zn(Ct)));)kt=Ne.subtract(kt,Ne.BigInt(Ct)),ot=Ne.add(ot,tt),Je=Bt,({relativeTo:Bt,days:Ct}=ss(st,Je,Qe,Gt));Bt=Gi(st,Je,Nt,void 0,Gt);const Kt="string"!=typeof st?vn(st,"dateUntil"):void 0,er=ns(null);er.largestUnit="month";let tr=Pd(st,Je,Bt,er,Kt),Wt=he(tr,ji);for(;Ne.greaterThanOrEqual(Ta(ot),Ne.BigInt(zn(Wt)));){ot=Ne.subtract(ot,Ne.BigInt(Wt)),lt=Ne.add(lt,tt),Je=Bt,Bt=Gi(st,Je,Nt,void 0,Gt);const Jt=ns(null);Jt.largestUnit="month",tr=Pd(st,Je,Bt,Jt,Kt),Wt=he(tr,ji)}break}case"month":{if(!st)throw new RangeError("a starting point is required for months balancing");const Gt="string"!=typeof st?vn(st,"dateAdd"):void 0;let Bt,ht;for(({relativeTo:Bt,days:ht}=ss(st,Je,Qe,Gt));Ne.greaterThanOrEqual(Ta(kt),Ne.BigInt(zn(ht)));)kt=Ne.subtract(kt,Ne.BigInt(ht)),ot=Ne.add(ot,tt),Je=Bt,({relativeTo:Bt,days:ht}=ss(st,Je,Qe,Gt));break}case"week":{if(!st)throw new RangeError("a starting point is required for weeks balancing");const Gt="string"!=typeof st?vn(st,"dateAdd"):void 0;let Bt,ht;for(({relativeTo:Bt,days:ht}=ss(st,Je,Ut,Gt));Ne.greaterThanOrEqual(Ta(kt),Ne.BigInt(zn(ht)));)kt=Ne.subtract(kt,Ne.BigInt(ht)),yt=Ne.add(yt,tt),Je=Bt,({relativeTo:Bt,days:ht}=ss(st,Je,Ut,Gt));break}}return{years:Ne.toNumber(lt),months:Ne.toNumber(ot),weeks:Ne.toNumber(yt),days:Ne.toNumber(kt)}}(r,i,s,c,te,fe)),new $d(r,i,s,c,o,u,A,S,y,R)}total(t){if(!si(this))throw new TypeError("invalid receiver");let r=he(this,xs),i=he(this,ji),s=he(this,Gs),c=he(this,Es),o=he(this,Ss),u=he(this,As),A=he(this,Ms),S=he(this,Ts),y=he(this,Is),R=he(this,Ps);if(void 0===t)throw new TypeError("options argument is required");const ee="string"==typeof t?Xf("unit",t):Xr(t),ae=jy(ee),te=no(ee,"unit","datetime",Du);let fe;({years:r,months:i,weeks:s,days:c}=rm(r,i,s,c,te,ae)),rr(ae)&&(fe=N8(ae,r,i,s,0));let we=p8(c,o,u,A,S,y,R,te,fe);if("positive overflow"===we)return 1/0;if("negative overflow"===we)return-1/0;({days:c,hours:o,minutes:u,seconds:A,milliseconds:S,microseconds:y,nanoseconds:R}=we);const{total:Pe}=Kc(r,i,s,c,o,u,A,S,y,R,1,te,"trunc",ae);return Pe}toString(t){if(!si(this))throw new TypeError("invalid receiver");const r=Xr(t),i=$h(r),s=Ia(r,"trunc"),c=no(r,"smallestUnit","time",void 0);if("hour"===c||"minute"===c)throw new RangeError('smallestUnit must be a time unit other than "hours" or "minutes"');const{precision:o,unit:u,increment:A}=jh(c,i);return Aw(this,o,{unit:u,increment:A,roundingMode:s})}toJSON(){if(!si(this))throw new TypeError("invalid receiver");return Aw(this)}toLocaleString(t,r){if(!si(this))throw new TypeError("invalid receiver");return typeof Intl<"u"&&void 0!==Intl.DurationFormat?new Intl.DurationFormat(t,r).format(this):(console.warn("Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat."),Aw(this))}valueOf(){throw new TypeError("use compare() to compare Temporal.Duration")}static from(t){return si(t)?new $d(he(t,xs),he(t,ji),he(t,Gs),he(t,Es),he(t,Ss),he(t,As),he(t,Ms),he(t,Ts),he(t,Is),he(t,Ps)):Vf(t)}static compare(t,r,i){const s=Vf(t),c=Vf(r),o=jy(Xr(i)),u=he(s,xs),A=he(s,ji),S=he(s,Gs);let y=he(s,Es);const R=he(s,Ss),ee=he(s,As),ae=he(s,Ms),te=he(s,Ts),fe=he(s,Is);let we=he(s,Ps);const Pe=he(c,xs),Te=he(c,ji),Ae=he(c,Gs);let Ce=he(c,Es);const je=he(c,Ss),Le=he(c,As),ze=he(c,Ms),$e=he(c,Ts),Ye=he(c,Is);let ut=he(c,Ps);const ct=y8(o,u,A,S,y),vt=y8(o,Pe,Te,Ae,Ce);0===u&&0===Pe&&0===A&&0===Te&&0===S&&0===Ae||(({days:y}=rm(u,A,S,y,"day",o)),({days:Ce}=rm(Pe,Te,Ae,Ce,"day",o)));const at=Zf(y,R,ee,ae,te,fe,we,ct),ft=Zf(Ce,je,Le,ze,$e,Ye,ut,vt);return Vu(Ne.toNumber(Ne.subtract(at,ft)))}}ec($d,"Temporal.Duration");const BD=Object.create;class Zw{constructor(t,r,i="iso8601",s=1972){qx(this,an(t),an(r),so(i),an(s))}get monthCode(){if(!Bi(this))throw new TypeError("invalid receiver");return Vh(he(this,Et),this)}get day(){if(!Bi(this))throw new TypeError("invalid receiver");return Hh(he(this,Et),this)}get calendarId(){if(!Bi(this))throw new TypeError("invalid receiver");return qi(he(this,Et))}with(t,r){if(!Bi(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid argument");Lf(t);const i=Xr(r),s=he(this,Et),c=vi(s,["day","month","monthCode","year"]);let o=Vr(this,c,[]);return o=ju(s,o,Vr(t,c,"partial")),o=Vr(o,c,[]),Wf(s,o,i)}equals(t){if(!Bi(this))throw new TypeError("invalid receiver");const r=Hx(t);for(const i of[qt,Xt,Ht])if(he(this,i)!==he(r,i))return!1;return Gh(he(this,Et),he(r,Et))}toString(t){if(!Bi(this))throw new TypeError("invalid receiver");return i8(this,Nh(Xr(t)))}toJSON(){if(!Bi(this))throw new TypeError("invalid receiver");return i8(this)}toLocaleString(t,r){if(!Bi(this))throw new TypeError("invalid receiver");return new Hc(t,r).format(this)}valueOf(){throw new TypeError("use equals() to compare Temporal.PlainMonthDay")}toPlainDate(t){if(!Bi(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("argument should be an object");const r=he(this,Et),i=vi(r,["day","monthCode"]),s=Vr(this,i,[]),c=vi(r,["year"]);let o=ju(r,s,Vr(t,c,[]));o=Vr(o,[...new Set([...i,...c])],[]);const u=BD(null);return u.overflow="reject",jc(r,o,u)}getISOFields(){if(!Bi(this))throw new TypeError("invalid receiver");return{calendar:he(this,Et),isoDay:he(this,Xt),isoMonth:he(this,qt),isoYear:he(this,Ht)}}getCalendar(){if(!Bi(this))throw new TypeError("invalid receiver");return Hf(he(this,Et))}static from(t,r){const i=Xr(r);return Bi(t)?(hi(i),Kh(he(t,qt),he(t,Xt),he(t,Et),he(t,Ht))):Hx(t,i)}}ec(Zw,"Temporal.PlainMonthDay");const Jw=()=>new(Lt("%Temporal.Instant%"))(Uw()),nE=(n,t=Cd())=>{const r=is(t),i=so(n);return po(r,Jw(),i)},Yw=(n=Cd())=>po(is(n),Jw(),"iso8601"),iE=(n,t=Cd())=>{const r=is(t),i=so(n);return Wi(Uw(),r,i)},sE={instant:Jw,plainDateTime:nE,plainDateTimeISO:Yw,plainDate:(n,t=Cd())=>Gf(nE(n,t)),plainDateISO:(n=Cd())=>Gf(Yw(n)),plainTimeISO:(n=Cd())=>Ew(Yw(n)),timeZoneId:()=>Cd(),zonedDateTime:iE,zonedDateTimeISO:(n=Cd())=>iE("iso8601",n),[Symbol.toStringTag]:"Temporal.Now"};Object.defineProperty(sE,Symbol.toStringTag,{value:"Temporal.Now",writable:!1,enumerable:!1,configurable:!0});const RD=Object.assign;function oE(n,t,r){let i=he(n,Dr),s=he(n,Nr),c=he(n,$r),o=he(n,jr),u=he(n,Ur),A=he(n,Lr);if(r){const{unit:S,increment:y,roundingMode:R}=r;({hour:i,minute:s,second:c,millisecond:o,microsecond:u,nanosecond:A}=jw(i,s,c,o,u,A,y,S,R))}return`${Gn(i)}:${Gn(s)}${Yy(c,o,u,A,t)}`}class Wu{constructor(t=0,r=0,i=0,s=0,c=0,o=0){const u=void 0===t?0:an(t),A=void 0===r?0:an(r),S=void 0===i?0:an(i),y=void 0===s?0:an(s),R=void 0===c?0:an(c),ee=void 0===o?0:an(o);nm(u,A,S,y,R,ee),rc(this),Kr(this,Dr,u),Kr(this,Nr,A),Kr(this,$r,S),Kr(this,jr,y),Kr(this,Ur,R),Kr(this,Lr,ee)}get hour(){if(!oi(this))throw new TypeError("invalid receiver");return he(this,Dr)}get minute(){if(!oi(this))throw new TypeError("invalid receiver");return he(this,Nr)}get second(){if(!oi(this))throw new TypeError("invalid receiver");return he(this,$r)}get millisecond(){if(!oi(this))throw new TypeError("invalid receiver");return he(this,jr)}get microsecond(){if(!oi(this))throw new TypeError("invalid receiver");return he(this,Ur)}get nanosecond(){if(!oi(this))throw new TypeError("invalid receiver");return he(this,Lr)}with(t,r){if(!oi(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid argument");Lf(t);const i=hi(Xr(r)),s=Uy(t,"partial"),c=Uy(this);let{hour:o,minute:u,second:A,millisecond:S,microsecond:y,nanosecond:R}=RD(c,s);return({hour:o,minute:u,second:A,millisecond:S,microsecond:y,nanosecond:R}=Ny(o,u,A,S,y,R,i)),new Wu(o,u,A,S,y,R)}add(t){if(!oi(this))throw new TypeError("invalid receiver");return O8("add",this,t)}subtract(t){if(!oi(this))throw new TypeError("invalid receiver");return O8("subtract",this,t)}until(t,r){if(!oi(this))throw new TypeError("invalid receiver");return A8("until",this,t,r)}since(t,r){if(!oi(this))throw new TypeError("invalid receiver");return A8("since",this,t,r)}round(t){if(!oi(this))throw new TypeError("invalid receiver");if(void 0===t)throw new TypeError("options parameter is required");const r="string"==typeof t?Xf("smallestUnit",t):Xr(t),i=Kf(r),s=Ia(r,"halfExpand"),c=no(r,"smallestUnit","time",Du);zf(i,{hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[c],!1);let o=he(this,Dr),u=he(this,Nr),A=he(this,$r),S=he(this,jr),y=he(this,Ur),R=he(this,Lr);return({hour:o,minute:u,second:A,millisecond:S,microsecond:y,nanosecond:R}=jw(o,u,A,S,y,R,i,c,s)),new Wu(o,u,A,S,y,R)}equals(t){if(!oi(this))throw new TypeError("invalid receiver");const r=$c(t);for(const i of[Dr,Nr,$r,jr,Ur,Lr])if(he(this,i)!==he(r,i))return!1;return!0}toString(t){if(!oi(this))throw new TypeError("invalid receiver");const r=Xr(t),i=$h(r),s=Ia(r,"trunc"),c=no(r,"smallestUnit","time",void 0);if("hour"===c)throw new RangeError('smallestUnit must be a time unit other than "hour"');const{precision:o,unit:u,increment:A}=jh(c,i);return oE(this,o,{unit:u,increment:A,roundingMode:s})}toJSON(){if(!oi(this))throw new TypeError("invalid receiver");return oE(this,"auto")}toLocaleString(t,r){if(!oi(this))throw new TypeError("invalid receiver");return new Hc(t,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainTime")}toPlainDateTime(t){if(!oi(this))throw new TypeError("invalid receiver");const r=Sn(t),i=he(r,Ht),s=he(r,qt),c=he(r,Xt),o=he(r,Et);return io(i,s,c,he(this,Dr),he(this,Nr),he(this,$r),he(this,jr),he(this,Ur),he(this,Lr),o)}toZonedDateTime(t){if(!oi(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid argument");const r=t.plainDate;if(void 0===r)throw new TypeError("missing date property");const i=Sn(r),s=t.timeZone;if(void 0===s)throw new TypeError("missing timeZone property");const c=is(s),o=he(i,Ht),u=he(i,qt),A=he(i,Xt),S=he(i,Et),y=he(this,Dr),R=he(this,Nr),ee=he(this,$r),ae=he(this,jr),te=he(this,Ur),fe=he(this,Lr);return Wi(he(ks(c,new(Lt("%Temporal.PlainDateTime%"))(o,u,A,y,R,ee,ae,te,fe,S),"compatible"),wr),c,S)}getISOFields(){if(!oi(this))throw new TypeError("invalid receiver");return{isoHour:he(this,Dr),isoMicrosecond:he(this,Ur),isoMillisecond:he(this,jr),isoMinute:he(this,Nr),isoNanosecond:he(this,Lr),isoSecond:he(this,$r)}}static from(t,r){const i=hi(Xr(r));return oi(t)?new Wu(he(t,Dr),he(t,Nr),he(t,$r),he(t,jr),he(t,Ur),he(t,Lr)):$c(t,i)}static compare(t,r){const i=$c(t),s=$c(r);for(const c of[Dr,Nr,$r,jr,Ur,Lr]){const o=he(i,c),u=he(s,c);if(o!==u)return Vu(o-u)}return 0}}ec(Wu,"Temporal.PlainTime");class t0{constructor(t){if(arguments.length<1)throw new RangeError("missing argument: identifier is required");const r=Mw(t);rc(this),Kr(this,tc,r)}get id(){if(!Po(this))throw new TypeError("invalid receiver");return he(this,tc)}getOffsetNanosecondsFor(t){if(!Po(this))throw new TypeError("invalid receiver");const r=Pa(t),i=he(this,tc);return qf(i)?Bd(i):Uc(i,he(r,wr))}getOffsetStringFor(t){if(!Po(this))throw new TypeError("invalid receiver");return Sw(this,Pa(t))}getPlainDateTimeFor(t,r="iso8601"){if(!Po(this))throw new TypeError("invalid receiver");return po(this,Pa(t),so(r))}getInstantFor(t,r){if(!Po(this))throw new TypeError("invalid receiver");return ks(this,$u(t),Ff(Xr(r)))}getPossibleInstantsFor(t){if(!Po(this))throw new TypeError("invalid receiver");const r=$u(t),i=Lt("%Temporal.Instant%"),s=he(this,tc);if(qf(s)){const o=Rd(he(r,Ht),he(r,qt),he(r,Xt),he(r,Dr),he(r,Nr),he(r,$r),he(r,jr),he(r,Ur),he(r,Lr));if(null===o)throw new RangeError("DateTime outside of supported range");const u=Bd(s);return[new i(Ne.subtract(o,Ne.BigInt(u)))]}return function(u,A,S,y,R,ee,ae,te,fe,we){const Pe=Rd(A,S,y,R,ee,ae,te,fe,we);if(null===Pe)throw new RangeError("DateTime outside of supported range");let Te=Ne.subtract(Pe,sc);Ne.lessThan(Te,Ch)&&(Te=Pe);let Ae=Ne.add(Pe,sc);Ne.greaterThan(Ae,Nf)&&(Ae=Pe);const Ce=Uc(u,Te),je=Uc(u,Ae);return(Ce===je?[Ce]:[Ce,je]).map(Le=>{const ze=Ne.subtract(Pe,Ne.BigInt(Le)),$e=d8(u,ze);if(A===$e.year&&S===$e.month&&y===$e.day&&R===$e.hour&&ee===$e.minute&&ae===$e.second&&te===$e.millisecond&&fe===$e.microsecond&&we===$e.nanosecond)return ze}).filter(Le=>void 0!==Le)}(s,he(r,Ht),he(r,qt),he(r,Xt),he(r,Dr),he(r,Nr),he(r,$r),he(r,jr),he(r,Ur),he(r,Lr)).map(o=>new i(o))}getNextTransition(t){if(!Po(this))throw new TypeError("invalid receiver");const r=Pa(t),i=he(this,tc);if(qf(i)||"UTC"===i)return null;let s=he(r,wr);const c=Lt("%Temporal.Instant%");return s=l8(i,s),null===s?null:new c(s)}getPreviousTransition(t){if(!Po(this))throw new TypeError("invalid receiver");const r=Pa(t),i=he(this,tc);if(qf(i)||"UTC"===i)return null;let s=he(r,wr);const c=Lt("%Temporal.Instant%");return s=Tw(i,s),null===s?null:new c(s)}toString(){if(!Po(this))throw new TypeError("invalid receiver");return he(this,tc)}toJSON(){if(!Po(this))throw new TypeError("invalid receiver");return he(this,tc)}static from(t){return Xx(is(t))}}ec(t0,"Temporal.TimeZone"),Yn("Temporal.TimeZone.prototype.getOffsetNanosecondsFor",t0.prototype.getOffsetNanosecondsFor),Yn("Temporal.TimeZone.prototype.getPossibleInstantsFor",t0.prototype.getPossibleInstantsFor);const kD=Object.create;class Xw{constructor(t,r,i="iso8601",s=1){Zx(this,an(t),an(r),so(i),an(s))}get year(){if(!pn(this))throw new TypeError("invalid receiver");return Fy(he(this,Et),this)}get month(){if(!pn(this))throw new TypeError("invalid receiver");return Ky(he(this,Et),this)}get monthCode(){if(!pn(this))throw new TypeError("invalid receiver");return Vh(he(this,Et),this)}get calendarId(){if(!pn(this))throw new TypeError("invalid receiver");return qi(he(this,Et))}get era(){if(!pn(this))throw new TypeError("invalid receiver");return zy(he(this,Et),this)}get eraYear(){if(!pn(this))throw new TypeError("invalid receiver");return Vy(he(this,Et),this)}get daysInMonth(){if(!pn(this))throw new TypeError("invalid receiver");return Hy(he(this,Et),this)}get daysInYear(){if(!pn(this))throw new TypeError("invalid receiver");return Wy(he(this,Et),this)}get monthsInYear(){if(!pn(this))throw new TypeError("invalid receiver");return Gy(he(this,Et),this)}get inLeapYear(){if(!pn(this))throw new TypeError("invalid receiver");return qy(he(this,Et),this)}with(t,r){if(!pn(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid argument");Lf(t);const i=Xr(r),s=he(this,Et),c=vi(s,["month","monthCode","year"]);let o=Vr(this,c,[]);return o=ju(s,o,Vr(t,c,"partial")),o=Vr(o,c,[]),Uu(s,o,i)}add(t,r){if(!pn(this))throw new TypeError("invalid receiver");return C8("add",this,t,r)}subtract(t,r){if(!pn(this))throw new TypeError("invalid receiver");return C8("subtract",this,t,r)}until(t,r){if(!pn(this))throw new TypeError("invalid receiver");return M8("until",this,t,r)}since(t,r){if(!pn(this))throw new TypeError("invalid receiver");return M8("since",this,t,r)}equals(t){if(!pn(this))throw new TypeError("invalid receiver");const r=Lh(t);for(const i of[Ht,qt,Xt])if(he(this,i)!==he(r,i))return!1;return Gh(he(this,Et),he(r,Et))}toString(t){if(!pn(this))throw new TypeError("invalid receiver");return s8(this,Nh(Xr(t)))}toJSON(){if(!pn(this))throw new TypeError("invalid receiver");return s8(this)}toLocaleString(t,r){if(!pn(this))throw new TypeError("invalid receiver");return new Hc(t,r).format(this)}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.PlainYearMonth")}toPlainDate(t){if(!pn(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("argument should be an object");const r=he(this,Et),i=vi(r,["monthCode","year"]),s=Vr(this,i,[]),c=vi(r,["day"]);let o=ju(r,s,Vr(t,c,[]));o=Vr(o,[...new Set([...i,...c])],[]);const u=kD(null);return u.overflow="reject",jc(r,o,u)}getISOFields(){if(!pn(this))throw new TypeError("invalid receiver");return{calendar:he(this,Et),isoDay:he(this,Xt),isoMonth:he(this,qt),isoYear:he(this,Ht)}}getCalendar(){if(!pn(this))throw new TypeError("invalid receiver");return Hf(he(this,Et))}static from(t,r){const i=Xr(r);return pn(t)?(hi(i),zh(he(t,Ht),he(t,qt),he(t,Et),he(t,Xt))):Lh(t,i)}static compare(t,r){const i=Lh(t),s=Lh(r);return Od(he(i,Ht),he(i,qt),he(i,Xt),he(s,Ht),he(s,qt),he(s,Xt))}}ec(Xw,"Temporal.PlainYearMonth");const OD=Hc.prototype.resolvedOptions,CD=Object.create;class Qw{constructor(t,r,i="iso8601"){if(arguments.length<1)throw new TypeError("missing argument: epochNanoseconds is required");Jx(this,Zh(t),is(r),so(i))}get calendarId(){if(!rr(this))throw new TypeError("invalid receiver");return qi(he(this,Et))}get timeZoneId(){if(!rr(this))throw new TypeError("invalid receiver");return qh(he(this,En))}get year(){if(!rr(this))throw new TypeError("invalid receiver");return Fy(he(this,Et),Un(this))}get month(){if(!rr(this))throw new TypeError("invalid receiver");return Ky(he(this,Et),Un(this))}get monthCode(){if(!rr(this))throw new TypeError("invalid receiver");return Vh(he(this,Et),Un(this))}get day(){if(!rr(this))throw new TypeError("invalid receiver");return Hh(he(this,Et),Un(this))}get hour(){if(!rr(this))throw new TypeError("invalid receiver");return he(Un(this),Dr)}get minute(){if(!rr(this))throw new TypeError("invalid receiver");return he(Un(this),Nr)}get second(){if(!rr(this))throw new TypeError("invalid receiver");return he(Un(this),$r)}get millisecond(){if(!rr(this))throw new TypeError("invalid receiver");return he(Un(this),jr)}get microsecond(){if(!rr(this))throw new TypeError("invalid receiver");return he(Un(this),Ur)}get nanosecond(){if(!rr(this))throw new TypeError("invalid receiver");return he(Un(this),Lr)}get era(){if(!rr(this))throw new TypeError("invalid receiver");return zy(he(this,Et),Un(this))}get eraYear(){if(!rr(this))throw new TypeError("invalid receiver");return Vy(he(this,Et),Un(this))}get epochSeconds(){if(!rr(this))throw new TypeError("invalid receiver");const t=he(this,wr);return Ne.toNumber(Yf(t,ic))}get epochMilliseconds(){if(!rr(this))throw new TypeError("invalid receiver");const t=he(this,wr);return Ne.toNumber(Yf(t,lo))}get epochMicroseconds(){if(!rr(this))throw new TypeError("invalid receiver");return am(Yf(he(this,wr),hn))}get epochNanoseconds(){if(!rr(this))throw new TypeError("invalid receiver");return am(he(this,wr))}get dayOfWeek(){if(!rr(this))throw new TypeError("invalid receiver");return vw(he(this,Et),Un(this))}get dayOfYear(){if(!rr(this))throw new TypeError("invalid receiver");return ww(he(this,Et),Un(this))}get weekOfYear(){if(!rr(this))throw new TypeError("invalid receiver");return bw(he(this,Et),Un(this))}get yearOfWeek(){if(!rr(this))throw new TypeError("invalid receiver");return _w(he(this,Et),Un(this))}get hoursInDay(){if(!rr(this))throw new TypeError("invalid receiver");const t=Un(this),r=Lt("%Temporal.PlainDateTime%"),i=he(t,Ht),s=he(t,qt),c=he(t,Xt),o=new r(i,s,c,0,0,0,0,0,0),u=Ku(i,s,c,0,0,0,1,"reject"),A=new r(u.year,u.month,u.day,0,0,0,0,0,0),S=he(this,En),y=he(ks(S,o,"compatible"),wr),R=he(ks(S,A,"compatible"),wr);return dc(Ne.subtract(R,y),Ox)}get daysInWeek(){if(!rr(this))throw new TypeError("invalid receiver");return xw(he(this,Et),Un(this))}get daysInMonth(){if(!rr(this))throw new TypeError("invalid receiver");return Hy(he(this,Et),Un(this))}get daysInYear(){if(!rr(this))throw new TypeError("invalid receiver");return Wy(he(this,Et),Un(this))}get monthsInYear(){if(!rr(this))throw new TypeError("invalid receiver");return Gy(he(this,Et),Un(this))}get inLeapYear(){if(!rr(this))throw new TypeError("invalid receiver");return qy(he(this,Et),Un(this))}get offset(){if(!rr(this))throw new TypeError("invalid receiver");return Sw(he(this,En),he(this,rs))}get offsetNanoseconds(){if(!rr(this))throw new TypeError("invalid receiver");return Ba(he(this,En),he(this,rs))}with(t,r){if(!rr(this))throw new TypeError("invalid receiver");if(!Vn(t))throw new TypeError("invalid zoned-date-time-like");Lf(t);const i=Xr(r),s=he(this,Et);let c=vi(s,["day","hour","microsecond","millisecond","minute","month","monthCode","nanosecond","second","year"]);c.push("offset");let o=Vr(this,c,["offset"]);o=ju(s,o,Vr(t,c,"partial")),o=Vr(o,c,["offset"]);const u=Ff(i),A=$y(i,"prefer");let{year:S,month:y,day:R,hour:ee,minute:ae,second:te,millisecond:fe,microsecond:we,nanosecond:Pe}=Uh(s,o,i);const Te=Bd(o.offset),Ae=he(this,En);return Wi(Ly(S,y,R,ee,ae,te,fe,we,Pe,"option",Te,Ae,u,A,!1),Ae,s)}withPlainDate(t){if(!rr(this))throw new TypeError("invalid receiver");const r=Sn(t),i=he(r,Ht),s=he(r,qt),c=he(r,Xt);let o=he(r,Et);const u=Un(this),A=he(u,Dr),S=he(u,Nr),y=he(u,$r),R=he(u,jr),ee=he(u,Ur),ae=he(u,Lr);o=Yx(he(this,Et),o);const te=he(this,En);return Wi(he(ks(te,new(Lt("%Temporal.PlainDateTime%"))(i,s,c,A,S,y,R,ee,ae,o),"compatible"),wr),te,o)}withPlainTime(t){if(!rr(this))throw new TypeError("invalid receiver");const r=Lt("%Temporal.PlainTime%"),i=void 0===t?new r:$c(t),s=Un(this),c=he(s,Ht),o=he(s,qt),u=he(s,Xt),A=he(this,Et),S=he(i,Dr),y=he(i,Nr),R=he(i,$r),ee=he(i,jr),ae=he(i,Ur),te=he(i,Lr),fe=he(this,En);return Wi(he(ks(fe,new(Lt("%Temporal.PlainDateTime%"))(c,o,u,S,y,R,ee,ae,te,A),"compatible"),wr),fe,A)}withTimeZone(t){if(!rr(this))throw new TypeError("invalid receiver");const r=is(t);return Wi(he(this,wr),r,he(this,Et))}withCalendar(t){if(!rr(this))throw new TypeError("invalid receiver");const r=so(t);return Wi(he(this,wr),he(this,En),r)}add(t,r){if(!rr(this))throw new TypeError("invalid receiver");return D8("add",this,t,r)}subtract(t,r){if(!rr(this))throw new TypeError("invalid receiver");return D8("subtract",this,t,r)}until(t,r){if(!rr(this))throw new TypeError("invalid receiver");return T8("until",this,t,r)}since(t,r){if(!rr(this))throw new TypeError("invalid receiver");return T8("since",this,t,r)}round(t){if(!rr(this))throw new TypeError("invalid receiver");if(void 0===t)throw new TypeError("options parameter is required");const r="string"==typeof t?Xf("smallestUnit",t):Xr(t),i=Kf(r),s=Ia(r,"halfExpand"),c=no(r,"smallestUnit","time",Du,["day"]),o={day:1,hour:24,minute:60,second:60,millisecond:1e3,microsecond:1e3,nanosecond:1e3}[c];zf(i,o,1===o);const u=Un(this);let A=he(u,Ht),S=he(u,qt),y=he(u,Xt),R=he(u,Dr),ee=he(u,Nr),ae=he(u,$r),te=he(u,jr),fe=he(u,Ur),we=he(u,Lr);const Pe=Lt("%Temporal.PlainDateTime%"),Te=he(this,En),Ae=he(this,Et),Ce=ks(Te,new Pe(he(u,Ht),he(u,qt),he(u,Xt),0,0,0,0,0,0),"compatible"),je=Ro(Ce,Te,Ae,0,0,0,1,0,0,0,0,0,0),Le=Ne.subtract(je,Ne.BigInt(he(Ce,wr)));if(Ne.lessThanOrEqual(Le,ni))throw new RangeError("cannot round a ZonedDateTime in a calendar with zero or negative length days");return({year:A,month:S,day:y,hour:R,minute:ee,second:ae,millisecond:te,microsecond:fe,nanosecond:we}=$w(A,S,y,R,ee,ae,te,fe,we,i,c,s,Ne.toNumber(Le))),Wi(Ly(A,S,y,R,ee,ae,te,fe,we,"option",Ba(Te,he(this,rs)),Te,"compatible","prefer",!1),Te,he(this,Et))}equals(t){if(!rr(this))throw new TypeError("invalid receiver");const r=Fh(t),i=he(this,wr),s=he(r,wr);return!!Ne.equal(Ne.BigInt(i),Ne.BigInt(s))&&!!Qx(he(this,En),he(r,En))&&Gh(he(this,Et),he(r,Et))}toString(t){if(!rr(this))throw new TypeError("invalid receiver");const r=Xr(t),i=Nh(r),s=$h(r),c=Nd(r,"offset",["auto","never"],"auto"),o=Ia(r,"trunc"),u=no(r,"smallestUnit","time",void 0);if("hour"===u)throw new RangeError('smallestUnit must be a time unit other than "hour"');const A=Nd(r,"timeZoneName",["auto","never","critical"],"auto"),{precision:S,unit:y,increment:R}=jh(u,s);return o8(this,S,i,A,c,{unit:y,increment:R,roundingMode:o})}toLocaleString(t,r){if(!rr(this))throw new TypeError("invalid receiver");const i=Xr(r),s=CD(null);if(Uf(s,i,["timeZone"]),void 0!==i.timeZone)throw new TypeError("ZonedDateTime toLocaleString does not accept a timeZone option");void 0===s.year&&void 0===s.month&&void 0===s.day&&void 0===s.weekday&&void 0===s.dateStyle&&void 0===s.hour&&void 0===s.minute&&void 0===s.second&&void 0===s.timeStyle&&void 0===s.dayPeriod&&void 0===s.timeZoneName&&(s.timeZoneName="short");let c=qh(he(this,En));if(qf(c))throw new RangeError("toLocaleString does not support offset string time zones");c=Mw(c),s.timeZone=c;const o=new Hc(t,s),u=cr(OD,o,[]).calendar,A=qi(he(this,Et));if("iso8601"!==A&&"iso8601"!==u&&u!==A)throw new RangeError(`cannot format ZonedDateTime with calendar ${A} in locale with calendar ${u}`);return o.format(he(this,rs))}toJSON(){if(!rr(this))throw new TypeError("invalid receiver");return o8(this,"auto")}valueOf(){throw new TypeError("use compare() or equals() to compare Temporal.ZonedDateTime")}startOfDay(){if(!rr(this))throw new TypeError("invalid receiver");const t=Un(this),r=Lt("%Temporal.PlainDateTime%"),i=he(this,Et),s=new r(he(t,Ht),he(t,qt),he(t,Xt),0,0,0,0,0,0,i),c=he(this,En);return Wi(he(ks(c,s,"compatible"),wr),c,i)}toInstant(){if(!rr(this))throw new TypeError("invalid receiver");return new(Lt("%Temporal.Instant%"))(he(this,wr))}toPlainDate(){if(!rr(this))throw new TypeError("invalid receiver");return Gf(Un(this))}toPlainTime(){if(!rr(this))throw new TypeError("invalid receiver");return Ew(Un(this))}toPlainDateTime(){if(!rr(this))throw new TypeError("invalid receiver");return Un(this)}toPlainYearMonth(){if(!rr(this))throw new TypeError("invalid receiver");const t=he(this,Et);return Uu(t,Vr(this,vi(t,["monthCode","year"]),[]))}toPlainMonthDay(){if(!rr(this))throw new TypeError("invalid receiver");const t=he(this,Et);return Wf(t,Vr(this,vi(t,["day","monthCode"]),[]))}getISOFields(){if(!rr(this))throw new TypeError("invalid receiver");const t=Un(this),r=he(this,En);return{calendar:he(this,Et),isoDay:he(t,Xt),isoHour:he(t,Dr),isoMicrosecond:he(t,Ur),isoMillisecond:he(t,jr),isoMinute:he(t,Nr),isoMonth:he(t,qt),isoNanosecond:he(t,Lr),isoSecond:he(t,$r),isoYear:he(t,Ht),offset:Sw(r,he(this,rs)),timeZone:r}}getCalendar(){if(!rr(this))throw new TypeError("invalid receiver");return Hf(he(this,Et))}getTimeZone(){if(!rr(this))throw new TypeError("invalid receiver");return Xx(he(this,En))}static from(t,r){const i=Xr(r);return rr(t)?(Ff(i),$y(i,"reject"),hi(i),Wi(he(t,wr),he(t,En),he(t,Et))):Fh(t,i)}static compare(t,r){const i=Fh(t),s=Fh(r),c=he(i,wr),o=he(s,wr);return Ne.lessThan(Ne.BigInt(c),Ne.BigInt(o))?-1:Ne.greaterThan(Ne.BigInt(c),Ne.BigInt(o))?1:0}}function Un(n){return po(he(n,En),he(n,rs),he(n,Et))}ec(Qw,"Temporal.ZonedDateTime");var al=Object.freeze({__proto__:null,Calendar:ai,Duration:$d,Instant:ta,Now:sE,PlainDate:Qh,PlainDateTime:e0,PlainMonthDay:Zw,PlainTime:Wu,PlainYearMonth:Xw,TimeZone:t0,ZonedDateTime:Qw});const DD=[ta,ai,Qh,e0,$d,Zw,Wu,t0,Xw,Qw];for(const n of DD){const t=Object.getOwnPropertyDescriptor(n,"prototype");(t.configurable||t.enumerable||t.writable)&&(t.configurable=!1,t.enumerable=!1,t.writable=!1,Object.defineProperty(n,"prototype",t))}var aE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class ei{static sleep(t){return aE(this,void 0,void 0,function*(){return new Promise(r=>setTimeout(r,t))})}static minimalSleep(){return aE(this,void 0,void 0,function*(){yield ei.sleep(2)})}static getCurrentTimestamp(){return al.Now.instant().toString({smallestUnit:"microseconds"})}static createTimestamp(t){const{year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S}=t;return al.ZonedDateTime.from({timeZone:"UTC",year:r,month:i,day:s,hour:c,minute:o,second:u,millisecond:A,microsecond:S}).toInstant().toString({smallestUnit:"microseconds"})}static createOffsetTimestamp(t,r){const i=r?al.Instant.from(r):al.Now.instant(),s=al.Duration.from(t);return i.add(s).toString({smallestUnit:"microseconds"})}static validateTimestamp(t){try{al.Instant.from(t)}catch{throw new Ot(Rt.TimestampInvalid,`Invalid timestamp: ${t}`)}}}var Ri=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class yn{get message(){if(void 0===this._message.authorization)throw new Ot(Rt.RecordsWriteMissingSigner,"This RecordsWrite is not yet signed, JSON message cannot be generated from an incomplete state.");return this._message}get author(){return this._author}get signaturePayload(){return this._signaturePayload}get owner(){return this._owner}get ownerSignaturePayload(){return this._ownerSignaturePayload}get isSignedByAuthorDelegate(){return zt.isSignedByAuthorDelegate(this._message)}get isSignedByOwnerDelegate(){return zt.isSignedByOwnerDelegate(this._message)}get signer(){return zt.getSigner(this._message)}get ownerSignatureSigner(){var t;return void 0===(null===(t=this._message.authorization)||void 0===t?void 0:t.ownerSignature)?void 0:ci.getSignerDid(this._message.authorization.ownerSignature.signatures[0])}constructor(t,r){this.parentContextId=r,this._message=t,void 0!==t.authorization&&(this._author=Hr.getAuthor(t),this._signaturePayload=ci.decodePlainObjectPayload(t.authorization.signature),void 0!==t.authorization.ownerSignature&&(this._owner=void 0!==t.authorization.ownerDelegatedGrant?zt.getSigner(t.authorization.ownerDelegatedGrant):ci.getSignerDid(t.authorization.ownerSignature.signatures[0]),this._ownerSignaturePayload=ci.decodePlainObjectPayload(t.authorization.ownerSignature))),this.attesters=yn.getAttesters(t)}static parse(t){return Ri(this,void 0,void 0,function*(){const r=JSON.parse(JSON.stringify(t));yield zt.validateSignatureStructure(r.authorization.signature,r.descriptor,"RecordsWriteSignaturePayload"),void 0!==r.authorization.ownerSignature&&(yield zt.validateSignatureStructure(r.authorization.ownerSignature,r.descriptor)),yield yn.validateAttestationIntegrity(r);const i=new yn(r);return yield i.validateIntegrity(),i})}static create(t){var r,i,s,c;return Ri(this,void 0,void 0,function*(){if(void 0===t.protocol&&void 0!==t.protocolPath||void 0!==t.protocol&&void 0===t.protocolPath)throw new Ot(Rt.RecordsWriteCreateProtocolAndProtocolPathMutuallyInclusive,"`protocol` and `protocolPath` must both be defined or undefined at the same time");if(void 0===t.data&&void 0===t.dataCid||void 0!==t.data&&void 0!==t.dataCid)throw new Ot(Rt.RecordsWriteCreateDataAndDataCidMutuallyExclusive,"one and only one parameter between `data` and `dataCid` is required");if(void 0===t.dataCid&&void 0!==t.dataSize||void 0!==t.dataCid&&void 0===t.dataSize)throw new Ot(Rt.RecordsWriteCreateDataCidAndDataSizeMutuallyInclusive,"`dataCid` and `dataSize` must both be defined or undefined at the same time");if(void 0===t.signer&&void 0!==t.delegatedGrant)throw new Ot(Rt.RecordsWriteCreateMissingSigner,"`signer` must be given when `delegatedGrant` is given");const o=null!==(r=t.dataCid)&&void 0!==r?r:yield _s.computeDagPbCidFromBytes(t.data),u=null!==(i=t.dataSize)&&void 0!==i?i:t.data.length,A=ei.getCurrentTimestamp(),S={interface:Cr.Records,method:hr.Write,protocol:void 0!==t.protocol?kf(t.protocol):void 0,protocolPath:t.protocolPath,recipient:t.recipient,schema:void 0!==t.schema?Rh(t.schema):void 0,tags:t.tags,parentId:yn.getRecordIdFromContextId(t.parentContextId),dataCid:o,dataSize:u,dateCreated:null!==(s=t.dateCreated)&&void 0!==s?s:A,messageTimestamp:null!==(c=t.messageTimestamp)&&void 0!==c?c:A,published:t.published,datePublished:t.datePublished,dataFormat:t.dataFormat};!0===t.published&&void 0===t.datePublished&&(S.datePublished=A),fo(S);const y=t.recordId,R=yield _s.computeCid(S),ee=yield yn.createAttestation(R,t.attestationSigners),ae=yield yn.createEncryptionProperty(S,t.encryptionInput),te={recordId:y,descriptor:S};void 0!==ee&&(te.attestation=ee),void 0!==ae&&(te.encryption=ae);const fe=new yn(te,t.parentContextId);return void 0!==t.signer&&(yield fe.sign({signer:t.signer,delegatedGrant:t.delegatedGrant,permissionGrantId:t.permissionGrantId,protocolRole:t.protocolRole})),fe})}static getRecordIdFromContextId(t){return t?.split("/").filter(r=>""!==r).pop()}static createFrom(t){var r,i,s,c;return Ri(this,void 0,void 0,function*(){const o=t.recordsWriteMessage,u=yield yn.parse(o),A=ei.getCurrentTimestamp(),S=null!==(r=t.published)&&void 0!==r?r:!!t.datePublished||o.descriptor.published;let y;t.datePublished?y=t.datePublished:S&&(y=o.descriptor.published?o.descriptor.datePublished:A);const R={recipient:o.descriptor.recipient,recordId:o.recordId,dateCreated:o.descriptor.dateCreated,protocol:o.descriptor.protocol,protocolPath:o.descriptor.protocolPath,schema:o.descriptor.schema,parentContextId:Hr.getParentContextFromOfContextId(o.contextId),messageTimestamp:null!==(i=t.messageTimestamp)&&void 0!==i?i:A,published:S,datePublished:y,tags:t.tags,data:t.data,dataCid:t.data?void 0:o.descriptor.dataCid,dataSize:t.data?void 0:o.descriptor.dataSize,dataFormat:null!==(s=t.dataFormat)&&void 0!==s?s:o.descriptor.dataFormat,protocolRole:null!==(c=t.protocolRole)&&void 0!==c?c:u.signaturePayload.protocolRole,delegatedGrant:t.delegatedGrant,signer:t.signer,attestationSigners:t.attestationSigners};return yield yn.create(R)})}toJSON(){return this.message}encryptSymmetricEncryptionKey(t){return Ri(this,void 0,void 0,function*(){this._message.encryption=yield yn.createEncryptionProperty(this._message.descriptor,t),delete this._message.authorization,this._signaturePayload=void 0,this._author=void 0})}sign(t){var r;return Ri(this,void 0,void 0,function*(){const{signer:i,delegatedGrant:s,permissionGrantId:c,protocolRole:o}=t;let u,A;void 0!==s?(u=yield zt.getCid(s),A=ci.getSignerDid(s.authorization.signature.signatures[0])):A=ci.extractDid(i.keyId);const S=this._message.descriptor,y=yield _s.computeCid(S);this._message.recordId=null!==(r=this._message.recordId)&&void 0!==r?r:yield yn.getEntryId(A,S),void 0!==this._message.descriptor.protocol&&(this._message.contextId=void 0===this.parentContextId||""===this.parentContextId?this._message.recordId:this.parentContextId+"/"+this._message.recordId);const R=yield yn.createSignerSignature({recordId:this._message.recordId,contextId:this._message.contextId,descriptorCid:y,attestation:this._message.attestation,encryption:this._message.encryption,signer:i,delegatedGrantId:u,permissionGrantId:c,protocolRole:o});this._message.authorization={signature:R},void 0!==s&&(this._message.authorization.authorDelegatedGrant=s),this._signaturePayload=ci.decodePlainObjectPayload(R),this._author=A})}signAsOwner(t){return Ri(this,void 0,void 0,function*(){if(void 0===this._author)throw new Ot(Rt.RecordsWriteSignAsOwnerUnknownAuthor,"Unable to sign as owner without message signature because owner needs to sign over `recordId` which depends on author DID.");const r=this._message.descriptor,i=yield zt.createSignature(r,t);this._message.authorization.ownerSignature=i,this._ownerSignaturePayload=ci.decodePlainObjectPayload(i),this._owner=ci.extractDid(t.keyId)})}signAsOwnerDelegate(t,r){return Ri(this,void 0,void 0,function*(){if(void 0===this._author)throw new Ot(Rt.RecordsWriteSignAsOwnerDelegateUnknownAuthor,"Unable to sign as owner delegate without message signature because owner delegate needs to sign over `recordId` which depends on author DID.");const i=yield zt.getCid(r),s=this._message.descriptor,c=yield zt.createSignature(s,t,{delegatedGrantId:i});this._message.authorization.ownerSignature=c,this._message.authorization.ownerDelegatedGrant=r,this._ownerSignaturePayload=ci.decodePlainObjectPayload(c),this._owner=ci.getSignerDid(r.authorization.signature.signatures[0])})}validateIntegrity(){return Ri(this,void 0,void 0,function*(){if(yield this.isInitialWrite()){const i=this.message.descriptor.dateCreated,s=this.message.descriptor.messageTimestamp;if(s!==i)throw new Ot(Rt.RecordsWriteValidateIntegrityDateCreatedMismatch,`messageTimestamp ${s} must match dateCreated ${i} for the initial write`);if(void 0!==this.message.descriptor.protocol&&void 0===this.message.descriptor.parentId){const c=yield this.getEntryId();if(this.message.contextId!==c)throw new Ot(Rt.RecordsWriteValidateIntegrityContextIdMismatch,`contextId in message: ${this.message.contextId} does not match deterministic contextId: ${c}`)}}const r=this.signaturePayload;if(this.message.recordId!==r.recordId)throw new Ot(Rt.RecordsWriteValidateIntegrityRecordIdUnauthorized,`recordId in message ${this.message.recordId} does not match recordId in authorization: ${r.recordId}`);if(this.message.contextId!==r.contextId)throw new Ot(Rt.RecordsWriteValidateIntegrityContextIdNotInSignerSignaturePayload,`contextId in message ${this.message.contextId} does not match contextId in authorization: ${r.contextId}`);if(yield Hr.validateDelegatedGrantReferentialIntegrity(this.message,r,this.ownerSignaturePayload),void 0!==r.attestationCid){const i=yield _s.computeCid(this.message.attestation),s=r.attestationCid;if(s!==i)throw new Ot(Rt.RecordsWriteValidateIntegrityAttestationMismatch,`CID ${i} of attestation property in message does not match attestationCid in authorization: ${s}`)}if(void 0!==r.encryptionCid){const i=yield _s.computeCid(this.message.encryption),s=r.encryptionCid;if(s!==i)throw new Ot(Rt.RecordsWriteValidateIntegrityEncryptionCidMismatch,`CID ${i} of encryption property in message does not match encryptionCid in authorization: ${s}`)}void 0!==this.message.descriptor.protocol&&ku(this.message.descriptor.protocol),void 0!==this.message.descriptor.schema&&Of(this.message.descriptor.schema),ei.validateTimestamp(this.message.descriptor.messageTimestamp),ei.validateTimestamp(this.message.descriptor.dateCreated),this.message.descriptor.datePublished&&ei.validateTimestamp(this.message.descriptor.datePublished)})}static validateAttestationIntegrity(t){return Ri(this,void 0,void 0,function*(){if(void 0===t.attestation)return;if(1!==t.attestation.signatures.length)throw new Ot(Rt.RecordsWriteAttestationIntegrityMoreThanOneSignature,`Currently implementation only supports 1 attester, but got ${t.attestation.signatures.length}`);const r=ci.decodePlainObjectPayload(t.attestation),{descriptorCid:i}=r,s=yield _s.computeCid(t.descriptor);if(i!==s)throw new Ot(Rt.RecordsWriteAttestationIntegrityDescriptorCidMismatch,`descriptorCid ${i} does not match expected descriptorCid ${s}`);const c=Object.keys(r).length;if(c>1)throw new Ot(Rt.RecordsWriteAttestationIntegrityInvalidPayloadProperty,`Only 'descriptorCid' is allowed in attestation payload, but got ${c} properties.`)})}getEntryId(){return Ri(this,void 0,void 0,function*(){return yield yn.getEntryId(this.author,this.message.descriptor)})}static getEntryId(t,r){return Ri(this,void 0,void 0,function*(){if(void 0===t)throw new Ot(Rt.RecordsWriteGetEntryIdUndefinedAuthor,"Property `author` is needed to compute entry ID.");const i=Object.assign({},r);return i.author=t,yield _s.computeCid(i)})}isInitialWrite(){return Ri(this,void 0,void 0,function*(){return(yield this.getEntryId())===this.message.recordId})}constructIndexes(t){return Ri(this,void 0,void 0,function*(){const r=this.message,i=r.descriptor,{tags:s}=i,c=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(i,["tags"]);delete c.published;let o=Object.assign(Object.assign({},c),{isLatestBaseState:t,published:!!r.descriptor.published,author:this.author,recordId:r.recordId,entryId:yield yn.getEntryId(this.author,this.message.descriptor)});if(void 0!==s&&!0===t){const u=Hr.buildTagIndexes(Object.assign({},s));o=Object.assign(Object.assign({},o),u)}return this.attesters.length>0&&(o.attester=this.attesters[0]),void 0!==r.contextId&&(o.contextId=r.contextId),o})}authorizeAuthorDelegate(t){return Ri(this,void 0,void 0,function*(){const r=yield Ma.parse(this.message.authorization.authorDelegatedGrant);yield to.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:t})})}authorizeOwnerDelegate(t){return Ri(this,void 0,void 0,function*(){const r=yield Ma.parse(this.message.authorization.ownerDelegatedGrant);yield to.authorizeWrite({recordsWriteMessage:this.message,expectedGrantor:this.owner,expectedGrantee:this.ownerSignatureSigner,permissionGrant:r,messageStore:t})})}static isInitialWrite(t){return Ri(this,void 0,void 0,function*(){if(t.descriptor.interface!==Cr.Records||t.descriptor.method!==hr.Write)return!1;const r=t,i=Hr.getAuthor(r);return(yield yn.getEntryId(i,r.descriptor))===r.recordId})}static createEncryptionProperty(t,r){var i,s;return Ri(this,void 0,void 0,function*(){if(void 0===r)return;const c=[];for(const u of r.keyEncryptionInputs){if(u.derivationScheme===Xo.ProtocolPath&&void 0===t.protocol)throw new Ot(Rt.RecordsWriteMissingProtocol,"`protocols` encryption scheme cannot be applied to record without the `protocol` property.");if(u.derivationScheme===Xo.Schemas&&void 0===t.schema)throw new Ot(Rt.RecordsWriteMissingSchema,"`schemas` encryption scheme cannot be applied to record without the `schema` property.");const A=Ki.publicJwkToBytes(u.publicKey),S=yield Ph.eciesSecp256k1Encrypt(A,r.key),y=Ft.bytesToBase64Url(S.ciphertext),R=yield Ki.publicKeyToJwk(S.ephemeralPublicKey),ee=Ft.bytesToBase64Url(S.initializationVector),ae=Ft.bytesToBase64Url(S.messageAuthenticationCode),te={rootKeyId:u.publicKeyId,algorithm:null!==(i=u.algorithm)&&void 0!==i?i:rw.EciesSecp256k1,derivationScheme:u.derivationScheme,ephemeralPublicKey:R,initializationVector:ee,messageAuthenticationCode:ae,encryptedKey:y};u.derivationScheme===Xo.ProtocolContext&&(te.derivedPublicKey=u.publicKey),c.push(te)}return{algorithm:null!==(s=r.algorithm)&&void 0!==s?s:rw.Aes256Ctr,initializationVector:Ft.bytesToBase64Url(r.initializationVector),keyEncryption:c}})}static createAttestation(t,r){return Ri(this,void 0,void 0,function*(){if(void 0===r||0===r.length)return;const s=Ft.objectToBytes({descriptorCid:t});return(yield Bh.create(s,r)).getJws()})}static createSignerSignature(t){return Ri(this,void 0,void 0,function*(){const{recordId:r,contextId:i,descriptorCid:s,attestation:c,encryption:o,signer:u,delegatedGrantId:A,permissionGrantId:S,protocolRole:y}=t,ae={recordId:r,descriptorCid:s,contextId:i,attestationCid:c?yield _s.computeCid(c):void 0,encryptionCid:o?yield _s.computeCid(o):void 0,delegatedGrantId:A,permissionGrantId:S,protocolRole:y};fo(ae);const te=Ft.objectToBytes(ae);return(yield Bh.create(te,[u])).getJws()})}static getInitialWrite(t){return Ri(this,void 0,void 0,function*(){for(const r of t)if(yield yn.isInitialWrite(r))return r;throw new Ot(Rt.RecordsWriteGetInitialWriteNotFound,"Initial write is not found.")})}static verifyEqualityOfImmutableProperties(t,r){const i=["dataCid","dataSize","dataFormat","datePublished","published","messageTimestamp","tags"];let s=[];s.push(...Object.keys(t.descriptor)),s.push(...Object.keys(r.descriptor)),s=[...new Set(s)];for(const c of s)if(-1===i.indexOf(c)){const o=t.descriptor[c],u=r.descriptor[c];if(u!==o)throw new Ot(Rt.RecordsWriteImmutablePropertyChanged,`${c} is an immutable property: cannot change '${o}' to '${u}'`)}return!0}static getAttesters(t){var r,i;return(null!==(i=null===(r=t.attestation)||void 0===r?void 0:r.signatures)&&void 0!==i?i:[]).map(o=>ci.getSignerDid(o))}static fetchInitialRecordsWrite(t,r,i){return Ri(this,void 0,void 0,function*(){const s={entryId:i},{messages:c}=yield t.query(r,[s]);return 0===c.length?void 0:yield yn.parse(c[0])})}}var cE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};function Ra(n,t){return cE(this,void 0,void 0,function*(){if(void 0===n)throw new Ot(Rt.AuthenticateJwsMissing,"Missing JWS.");if(yield xa.verifySignatures(n.signature,t),void 0!==n.ownerSignature&&(yield xa.verifySignatures(n.ownerSignature,t)),void 0!==n.authorDelegatedGrant){const r=yield yn.parse(n.authorDelegatedGrant);yield xa.verifySignatures(r.message.authorization.signature,t)}if(void 0!==n.ownerDelegatedGrant){const r=yield yn.parse(n.ownerDelegatedGrant);yield xa.verifySignatures(r.message.authorization.signature,t)}})}function r0(n,t){return cE(this,void 0,void 0,function*(){if(t.author!==n)throw new Ot(Rt.AuthorizationAuthorNotOwner,`Message authored by ${t.author}, not authored by expected owner ${n}.`)})}class jD{isActiveTenant(t){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){return{isActiveTenant:!0}})}}class fc{get message(){return this._message}get signer(){return this._signer}get author(){return this._author}get signaturePayload(){return this._signaturePayload}constructor(t){this._message=t,void 0!==t.authorization&&(this._signer=zt.getSigner(t),this._author=void 0!==t.authorization.authorDelegatedGrant?zt.getSigner(t.authorization.authorDelegatedGrant):this._signer,this._signaturePayload=ci.decodePlainObjectPayload(t.authorization.signature))}toJSON(){return this.message}}var eb=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class n0 extends fc{static parse(t){return eb(this,void 0,void 0,function*(){if(!1===t.descriptor.filter.published&&(t.descriptor.dateSort===To.PublishedAscending||t.descriptor.dateSort===To.PublishedDescending))throw new Ot(Rt.RecordsQueryParseFilterPublishedSortInvalid,`queries must not filter for \`published:false\` and sort by ${t.descriptor.dateSort}`);let r;if(void 0!==t.authorization&&(r=yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor)),yield Hr.validateDelegatedGrantReferentialIntegrity(t,r),void 0!==r?.protocolRole&&void 0===t.descriptor.filter.protocolPath)throw new Ot(Rt.RecordsQueryFilterMissingRequiredProperties,"Role-authorized queries must include `protocolPath` in the filter");return void 0!==t.descriptor.filter.protocol&&ku(t.descriptor.filter.protocol),void 0!==t.descriptor.filter.schema&&Of(t.descriptor.filter.schema),ei.validateTimestamp(t.descriptor.messageTimestamp),new n0(t)})}static create(t){var r;return eb(this,void 0,void 0,function*(){const i={interface:Cr.Records,method:hr.Query,messageTimestamp:null!==(r=t.messageTimestamp)&&void 0!==r?r:ei.getCurrentTimestamp(),filter:Hr.normalizeFilter(t.filter),dateSort:t.dateSort,pagination:t.pagination};if(!1===t.filter.published&&(t.dateSort===To.PublishedAscending||t.dateSort===To.PublishedDescending))throw new Ot(Rt.RecordsQueryCreateFilterPublishedSortInvalid,`queries must not filter for \`published:false\` and sort by ${t.dateSort}`);fo(i);const s=t.signer;let c;s&&(c=yield zt.createAuthorization({descriptor:i,signer:s,protocolRole:t.protocolRole,delegatedGrant:t.delegatedGrant}));const o={descriptor:i,authorization:c};return zt.validateJsonSchema(o),new n0(o)})}authorizeDelegate(t){return eb(this,void 0,void 0,function*(){const r=yield Ma.parse(this.message.authorization.authorDelegatedGrant);yield to.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantee:this.signer,expectedGrantor:this.author,permissionGrant:r,messageStore:t})})}}var dE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class jd{static toBytes(t){return dE(this,void 0,void 0,function*(){return new Promise((r,i)=>{const s=[];t.on("data",c=>{s.push(c)}),t.on("end",()=>{const c=jd.concatenateArrayOfBytes(s);r(c)}),t.on("error",i)})})}static toObject(t){return dE(this,void 0,void 0,function*(){const r=yield jd.toBytes(t);return Ft.bytesToObject(r)})}static concatenateArrayOfBytes(t){const r=t.reduce((c,o)=>c+o.length,0),i=new Uint8Array(r);let s=0;for(const c of t)i.set(c,s),s+=c.length;return i}static fromBytes(t){let i=0;return new Ih.Readable({read(c){i+1e5>t.length?(this.push(t.subarray(i)),this.push(null)):(this.push(t.subarray(i,i+1e5)),i+=1e5)}})}static fromObject(t){const r=Ft.objectToBytes(t);return jd.fromBytes(r)}static duplicateDataStream(t,r){const i=[];for(let s=0;s<r;s++){const c=new Ih.PassThrough;t.pipe(c),i.push(c)}return i}}var uE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class i0 extends fc{static parse(t){return uE(this,void 0,void 0,function*(){return zt.validateJsonSchema(t),yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor),ei.validateTimestamp(t.descriptor.messageTimestamp),new i0(t)})}static create(t){var r;return uE(this,void 0,void 0,function*(){const i={interface:Cr.Events,method:hr.Get,messageTimestamp:null!==(r=t.messageTimestamp)&&void 0!==r?r:ei.getCurrentTimestamp()};t.cursor&&(i.cursor=t.cursor);const c={descriptor:i,authorization:yield zt.createAuthorization({descriptor:i,signer:t.signer})};return zt.validateJsonSchema(c),new i0(c)})}}function Ln(n,t){return{status:{code:t,detail:n instanceof Error?n.message:"Error"}}}class LD{constructor(t,r){this.didResolver=t,this.eventLog=r}handle({tenant:t,message:r}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){let i;try{i=yield i0.parse(r)}catch(u){return Ln(u,400)}try{yield Ra(r.authorization,this.didResolver),yield r0(t,i)}catch(u){return Ln(u,401)}const{cursor:s}=r.descriptor,{events:c,cursor:o}=yield this.eventLog.getEvents(t,s);return{status:{code:200,detail:"OK"},entries:c,cursor:o}})}}class tb{static normalizeFilters(t){const r=[];for(const i of t){let s;s=this.isRecordsFilter(i)?Hr.normalizeFilter(i):i,fo(s),My(s)||r.push(s)}return r}static convertFilters(t){const r=[];for(const i of t)this.isRecordsFilter(i)?r.push(Hr.convertFilter(i)):r.push(this.convertFilter(i));return r}static convertFilter(t){const r=Object.assign({},t),{dateUpdated:i}=t,s=i?eo.convertRangeCriterion(i):void 0;return s&&(r.messageTimestamp=s,delete r.dateUpdated),r}static isRecordsFilter(t){return"author"in t||"dateCreated"in t||"dataFormat"in t||"dataSize"in t||"parentId"in t||"recordId"in t||"schema"in t||"protocol"in t||"protocolPath"in t||"recipient"in t}}var fE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class s0 extends fc{static parse(t){return fE(this,void 0,void 0,function*(){zt.validateJsonSchema(t),yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor);for(const r of t.descriptor.filters)"protocol"in r&&void 0!==r.protocol&&ku(r.protocol),"schema"in r&&void 0!==r.schema&&Of(r.schema);return new s0(t)})}static create(t){var r;return fE(this,void 0,void 0,function*(){const i={interface:Cr.Events,method:hr.Query,filters:tb.normalizeFilters(t.filters),messageTimestamp:null!==(r=t.messageTimestamp)&&void 0!==r?r:ei.getCurrentTimestamp(),cursor:t.cursor};fo(i);const c={descriptor:i,authorization:yield zt.createAuthorization({descriptor:i,signer:t.signer})};return zt.validateJsonSchema(c),new s0(c)})}}class KD{constructor(t,r){this.didResolver=t,this.eventLog=r}handle({tenant:t,message:r}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){let i;try{i=yield s0.parse(r)}catch(u){return Ln(u,400)}try{yield Ra(r.authorization,this.didResolver),yield r0(t,i)}catch(u){return Ln(u,401)}const s=tb.convertFilters(r.descriptor.filters),{events:c,cursor:o}=yield this.eventLog.queryEvents(t,s,r.descriptor.cursor);return{status:{code:200,detail:"OK"},entries:c,cursor:o}})}}var lE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class o0 extends fc{static parse(t){return lE(this,void 0,void 0,function*(){zt.validateJsonSchema(t),yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor);for(const r of t.descriptor.filters)"protocol"in r&&void 0!==r.protocol&&ku(r.protocol),"schema"in r&&void 0!==r.schema&&Of(r.schema);return ei.validateTimestamp(t.descriptor.messageTimestamp),new o0(t)})}static create(t){var r,i;return lE(this,void 0,void 0,function*(){const s=ei.getCurrentTimestamp(),c={interface:Cr.Events,method:hr.Subscribe,filters:null!==(r=t.filters)&&void 0!==r?r:[],messageTimestamp:null!==(i=t.messageTimestamp)&&void 0!==i?i:s};fo(c);const u={descriptor:c,authorization:yield zt.createAuthorization({descriptor:c,signer:t.signer})};return zt.validateJsonSchema(u),new o0(u)})}}class VD{constructor(t,r){this.didResolver=t,this.eventStream=r}handle({tenant:t,message:r,subscriptionHandler:i}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){if(void 0===this.eventStream)return Ln(new Ot(Rt.EventsSubscribeEventStreamUnimplemented,"Subscriptions are not supported"),501);let s;try{s=yield o0.parse(r)}catch(y){return Ln(y,400)}try{yield Ra(r.authorization,this.didResolver),yield r0(t,s)}catch(y){return Ln(y,401)}const{filters:c}=r.descriptor,o=tb.convertFilters(c),u=yield zt.getCid(r);return{status:{code:200,detail:"OK"},subscription:yield this.eventStream.subscribe(t,u,(y,R,ee)=>{t===y&&eo.matchAnyFilter(ee,o)&&i(R)})}})}}var hE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class cl extends fc{static parse(t){return hE(this,void 0,void 0,function*(){return zt.validateJsonSchema(t),this.validateMessageCids(t.descriptor.messageCids),yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor),ei.validateTimestamp(t.descriptor.messageTimestamp),new cl(t)})}static create(t){var r;return hE(this,void 0,void 0,function*(){const i={interface:Cr.Messages,method:hr.Get,messageCids:t.messageCids,messageTimestamp:null!==(r=t?.messageTimestamp)&&void 0!==r?r:ei.getCurrentTimestamp()},c={descriptor:i,authorization:yield zt.createAuthorization({descriptor:i,signer:t.signer})};return zt.validateJsonSchema(c),cl.validateMessageCids(t.messageCids),new cl(c)})}static validateMessageCids(t){for(const r of t)try{_s.parseCid(r)}catch{throw new Ot(Rt.MessageGetInvalidCid,`${r} is not a valid CID`)}}}class WD{constructor(t,r,i){this.didResolver=t,this.messageStore=r,this.dataStore=i}handle({tenant:t,message:r}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){let i;try{i=yield cl.parse(r)}catch(u){return Ln(u,400)}try{yield Ra(r.authorization,this.didResolver),yield r0(t,i)}catch(u){return Ln(u,401)}const s=[],c=new Set(r.descriptor.messageCids);for(const u of c){const A=this.messageStore.get(t,u).then(S=>({messageCid:u,message:S})).catch(S=>({messageCid:u,message:void 0,error:`Failed to get message ${u}`}));s.push(A)}const o=yield Promise.all(s);for(const u of o){const{message:A}=u;if(!A)continue;const{interface:S,method:y}=A.descriptor;if(S!==Cr.Records||y!==hr.Write)continue;const R=A;void 0!==R.encodedData&&(u.encodedData=R.encodedData,delete R.encodedData)}return{status:{code:200,detail:"OK"},entries:o}})}}var pE=I(20844),dl=function(n){return n.Anyone="anyone",n.Author="author",n.Recipient="recipient",n}(dl||{}),Ji=function(n){return n.CoDelete="co-delete",n.CoPrune="co-prune",n.CoUpdate="co-update",n.Create="create",n.Delete="delete",n.Prune="prune",n.Query="query",n.Read="read",n.Subscribe="subscribe",n.Update="update",n}(Ji||{}),yE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class ko extends fc{static parse(t){return yE(this,void 0,void 0,function*(){return zt.validateJsonSchema(t),ko.validateProtocolDefinition(t.descriptor.definition),yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor),ei.validateTimestamp(t.descriptor.messageTimestamp),new ko(t)})}static create(t){var r;return yE(this,void 0,void 0,function*(){const i={interface:Cr.Protocols,method:hr.Configure,messageTimestamp:null!==(r=t.messageTimestamp)&&void 0!==r?r:ei.getCurrentTimestamp(),definition:ko.normalizeDefinition(t.definition)},c={descriptor:i,authorization:yield zt.createAuthorization({descriptor:i,signer:t.signer,permissionGrantId:t.permissionGrantId})};return zt.validateJsonSchema(c),ko.validateProtocolDefinition(c.descriptor.definition),new ko(c)})}static validateProtocolDefinition(t){const{protocol:r,types:i}=t;ku(r);for(const s in i){const c=i[s].schema;void 0!==c&&Of(c)}ko.validateStructure(t)}static validateStructure(t){const r=Object.keys(t.types),i=ko.fetchAllRolePathsRecursively("",t.structure,[]);ko.validateRuleSetRecursively({ruleSet:t.structure,ruleSetProtocolPath:"",recordTypes:r,roles:i})}static fetchAllRolePathsRecursively(t,r,i){if(t.split("/").length>10)throw new Ot(Rt.ProtocolsConfigureRecordNestingDepthExceeded,"Record nesting depth exceeded 10 levels.");for(const s in r){if(s.startsWith("$"))continue;const c=r[s];let o;o=""===t?s:`${t}/${s}`,c.$role?i.push(o):ko.fetchAllRolePathsRecursively(o,c,i)}return i}static validateRuleSetRecursively(t){var r;const{ruleSet:i,ruleSetProtocolPath:s,recordTypes:c,roles:o}=t;if(void 0!==i.$size){const{min:A=0,max:S}=i.$size;if(void 0!==S&&S<A)throw new Ot(Rt.ProtocolsConfigureInvalidSize,`Invalid size range found: max limit ${S} less than min limit ${A} at protocol path '${s}'`)}if(i.$tags){const A=new pE.default,ee=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(i.$tags,["$allowUndefinedTags","$requiredTags"]);for(const ae in ee)if(!A.validateSchema(ee[ae])){const fe=A.errorsText(A.errors,{dataVar:`${s}/$tags/${ae}`});throw new Ot(Rt.ProtocolsConfigureInvalidTagSchema,`tags schema validation error: ${fe}`)}}const u=null!==(r=i.$actions)&&void 0!==r?r:[];for(let A=0;A<u.length;A++){const S=u[A];if(void 0!==S.role&&!o.includes(S.role))throw new Ot(Rt.ProtocolsConfigureRoleDoesNotExistAtGivenPath,`Role in action ${JSON.stringify(S)} for rule set ${s} does not exist.`);if("anyone"===S.who&&S.of)throw new Ot(Rt.ProtocolsConfigureInvalidActionOfNotAllowed,`'of' is not allowed at rule set protocol path (${s})`);if(S.who===dl.Recipient&&void 0===S.of&&S.can.some(R=>![Ji.CoUpdate,Ji.CoDelete,Ji.CoPrune].includes(R)))throw new Ot(Rt.ProtocolsConfigureInvalidRecipientOfAction,"Rules for `recipient` without `of` property must have `can` containing only `co-update`, `co-delete`, and `co-prune`.");if(S.who===dl.Author&&!S.of)throw new Ot(Rt.ProtocolsConfigureInvalidActionMissingOf,"'of' is required when 'author' is specified as 'who'");if(void 0!==S.can){if(S.can.includes(Ji.Update)&&!S.can.includes(Ji.Create))throw new Ot(Rt.ProtocolsConfigureInvalidActionUpdateWithoutCreate,`Action rule ${JSON.stringify(S)} contains 'update' action but missing the required 'create' action.`);if(S.can.includes(Ji.Delete)&&!S.can.includes(Ji.Create))throw new Ot(Rt.ProtocolsConfigureInvalidActionDeleteWithoutCreate,`Action rule ${JSON.stringify(S)} contains 'delete' action but missing the required 'create' action.`)}for(let y=A+1;y<u.length;y++){const R=u[y];if(void 0!==S.who){if(S.who===R.who&&S.of===R.of)throw new Ot(Rt.ProtocolsConfigureDuplicateActorInRuleSet,`More than one action rule per actor ${S.who} of ${S.of} not allowed within a rule set: ${JSON.stringify(S)}`)}else if(S.role===R.role)throw new Ot(Rt.ProtocolsConfigureDuplicateRoleInRuleSet,`More than one action rule per role ${S.role} not allowed within a rule set: ${JSON.stringify(S)}`)}}for(const A in i){if(A.startsWith("$"))continue;if(!c.includes(A))throw new Ot(Rt.ProtocolsConfigureInvalidRuleSetRecordType,`Rule set ${A} is not declared as an allowed type in the protocol definition.`);let y;y=""===s?A:`${s}/${A}`,ko.validateRuleSetRecursively({ruleSet:i[A],ruleSetProtocolPath:y,recordTypes:c,roles:o})}}static normalizeDefinition(t){const r=Object.assign({},t.types);for(const i in r){const s=r[i].schema;void 0!==s&&(r[i].schema=Rh(s))}return Object.assign(Object.assign({},t),{protocol:kf(t.protocol),types:r})}}class rb{constructor(t,r,i,s){this.didResolver=t,this.messageStore=r,this.eventLog=i,this.eventStream=s}handle({tenant:t,message:r}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){let i;try{i=yield ko.parse(r)}catch(y){return Ln(y,400)}try{yield Ra(r.authorization,this.didResolver),yield r0(t,i)}catch(y){return Ln(y,401)}const s={interface:Cr.Protocols,method:hr.Configure,protocol:r.descriptor.definition.protocol},{messages:c}=yield this.messageStore.query(t,[s]);let A,o=yield zt.getNewestMessage(c),u=!1;if((void 0===o||(yield zt.isNewer(r,o)))&&(u=!0,o=r),u){const y=rb.constructIndexes(i);yield this.messageStore.put(t,r,y);const R=yield zt.getCid(r);yield this.eventLog.append(t,R,y),void 0!==this.eventStream&&this.eventStream.emit(t,{message:r},y),A={status:{code:202,detail:"Accepted"}}}else A={status:{code:409,detail:"Conflict"}};const S=[];for(const y of c)if(yield zt.isNewer(o,y)){const R=yield zt.getCid(y);S.push(R),yield this.messageStore.delete(t,R)}return yield this.eventLog.deleteEventsByCid(t,S),A})}static constructIndexes(t){const r=t.message.descriptor,{definition:i}=r,s=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(r,["definition"]),{author:c}=t;return Object.assign(Object.assign({},s),{author:c,protocol:i.protocol,published:i.published})}}var dm=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Fn{static parseRequest(t){return Ft.base64UrlToObject(t)}static createRequest(t){return dm(this,void 0,void 0,function*(){const r=Fn.normalizePermissionScope(t.scope),i={description:t.description,delegated:t.delegated,scope:r,conditions:t.conditions},s=Ft.objectToBytes(i);return{recordsWrite:yield yn.create({signer:t.signer,messageTimestamp:t.dateRequested,protocol:Fn.uri,protocolPath:Fn.requestPath,dataFormat:"application/json",data:s}),permissionRequestData:i,permissionRequestBytes:s}})}static createGrant(t){return dm(this,void 0,void 0,function*(){const r=Fn.normalizePermissionScope(t.scope),i={dateExpires:t.dateExpires,requestId:t.requestId,description:t.description,delegated:t.delegated,scope:r,conditions:t.conditions},s=Ft.objectToBytes(i),c=yield yn.create({signer:t.signer,messageTimestamp:t.dateGranted,dateCreated:t.dateGranted,recipient:t.grantedTo,protocol:Fn.uri,protocolPath:Fn.grantPath,dataFormat:"application/json",data:s});return{recordsWrite:c,permissionGrantData:i,permissionGrantBytes:s,dataEncodedMessage:Object.assign(Object.assign({},c.message),{encodedData:Ft.bytesToBase64Url(s)})}})}static createRevocation(t){return dm(this,void 0,void 0,function*(){const r={description:t.description},i=Ft.objectToBytes(r);return{recordsWrite:yield yn.create({signer:t.signer,parentContextId:t.grantId,protocol:Fn.uri,protocolPath:Fn.revocationPath,dataFormat:"application/json",data:i}),permissionRevocationData:r,permissionRevocationBytes:i}})}static validateSchema(t,r){const i=Ft.bytesToString(r),s=JSON.parse(i);if(t.descriptor.protocolPath===Fn.requestPath)xf("PermissionRequestData",s);else if(t.descriptor.protocolPath===Fn.grantPath){xf("PermissionGrantData",s);const c=s;Fn.validateScope(c.scope),ei.validateTimestamp(c.dateExpires)}else{if(t.descriptor.protocolPath!==Fn.revocationPath)throw new Ot(Rt.PermissionsProtocolValidateSchemaUnexpectedRecord,`Unexpected permission record: ${t.descriptor.protocolPath}`);xf("PermissionRevocationData",s)}}static fetchGrant(t,r,i){return dm(this,void 0,void 0,function*(){const s={recordId:i,isLatestBaseState:!0},{messages:c}=yield r.query(t,[s]),o=c[0],u=o?.descriptor.interface,A=o?.descriptor.method;if(u!==Cr.Records||A!==hr.Write||o.descriptor.protocolPath!==Fn.grantPath)throw new Ot(Rt.GrantAuthorizationGrantMissing,`Could not find permission grant with record ID ${i}.`);const S=o;return yield Ma.parse(S)})}static normalizePermissionScope(t){const r=Object.assign({},t);return Fn.isRecordPermissionScope(r)&&(void 0!==r.protocol&&(r.protocol=kf(r.protocol)),void 0!==r.schema&&(r.schema=Rh(r.schema))),r}static isRecordPermissionScope(t){return"Records"===t.interface}static validateScope(t){if(this.isRecordPermissionScope(t)){if(void 0!==t.schema&&(void 0!==t.protocol||void 0!==t.contextId||t.protocolPath))throw new Ot(Rt.PermissionsProtocolValidateScopeSchemaProhibitedProperties,"Permission grants that have `schema` present cannot also have protocol-related properties present");if(void 0!==t.protocol&&void 0!==t.contextId&&void 0!==t.protocolPath)throw new Ot(Rt.PermissionsProtocolValidateScopeContextIdProhibitedProperties,"Permission grants cannot have both `contextId` and `protocolPath` present")}}}Fn.uri="https://tbd.website/dwn/permissions",Fn.requestPath="request",Fn.grantPath="grant",Fn.revocationPath="grant/revocation",Fn.definition={published:!0,protocol:Fn.uri,types:{request:{dataFormats:["application/json"]},grant:{dataFormats:["application/json"]},revocation:{dataFormats:["application/json"]}},structure:{request:{$size:{max:1e4},$actions:[{who:"anyone",can:["create"]}]},grant:{$size:{max:1e4},$actions:[{who:"recipient",of:"grant",can:["read","query"]}],revocation:{$size:{max:1e4},$actions:[{who:"anyone",can:["read"]}]}}}};var nb=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class ul extends fc{static parse(t){return nb(this,void 0,void 0,function*(){return void 0!==t.authorization&&(yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor)),void 0!==t.descriptor.filter&&ku(t.descriptor.filter.protocol),ei.validateTimestamp(t.descriptor.messageTimestamp),new ul(t)})}static create(t){var r;return nb(this,void 0,void 0,function*(){const i={interface:Cr.Protocols,method:hr.Query,messageTimestamp:null!==(r=t.messageTimestamp)&&void 0!==r?r:ei.getCurrentTimestamp(),filter:t.filter?ul.normalizeFilter(t.filter):void 0};let s;fo(i),void 0!==t.signer&&(s=yield zt.createAuthorization({descriptor:i,signer:t.signer,permissionGrantId:t.permissionGrantId}));const c={descriptor:i,authorization:s};return zt.validateJsonSchema(c),new ul(c)})}static normalizeFilter(t){return Object.assign(Object.assign({},t),{protocol:kf(t.protocol)})}authorize(t,r){return nb(this,void 0,void 0,function*(){if(this.author!==t){if(void 0===this.author||!this.signaturePayload.permissionGrantId)throw new Ot(Rt.ProtocolsQueryUnauthorized,"The ProtocolsQuery failed authorization");{const i=yield Fn.fetchGrant(t,r,this.signaturePayload.permissionGrantId);yield Nc.performBaseValidation({incomingMessage:this.message,expectedGrantor:t,expectedGrantee:this.author,permissionGrant:i,messageStore:r})}}})}}var mE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class JD{constructor(t,r,i){this.didResolver=t,this.messageStore=r,this.dataStore=i}handle({tenant:t,message:r}){return mE(this,void 0,void 0,function*(){let i;try{i=yield ul.parse(r)}catch(o){return Ln(o,400)}try{yield Ra(r.authorization,this.didResolver),yield i.authorize(t,this.messageStore)}catch(o){return o.code===Rt.AuthenticateJwsMissing||o.code===Rt.ProtocolsQueryUnauthorized?{status:{code:200,detail:"OK"},entries:yield this.fetchPublishedProtocolsConfigure(t,i)}:Ln(o,401)}const s=Object.assign(Object.assign({},r.descriptor.filter),{interface:Cr.Protocols,method:hr.Configure});fo(s);const{messages:c}=yield this.messageStore.query(t,[s]);return{status:{code:200,detail:"OK"},entries:c}})}fetchPublishedProtocolsConfigure(t,r){return mE(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},r.message.descriptor.filter),{interface:Cr.Protocols,method:hr.Configure,published:!0}),{messages:s}=yield this.messageStore.query(t,[i]);return s})}}var mo=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Jr{static validateReferentialIntegrity(t,r,i){return mo(this,void 0,void 0,function*(){const s=yield Jr.fetchProtocolDefinition(t,r.message.descriptor.protocol,i);Jr.verifyType(r.message,s.types),yield Jr.verifyProtocolPathAndContextId(t,r,i);const c=Jr.getRuleSet(r.message.descriptor.protocolPath,s);yield Jr.verifyAsRoleRecordIfNeeded(t,r,c,i),Jr.verifySizeLimit(r,c),Jr.verifyTagsIfNeeded(r,c)})}static authorizeWrite(t,r,i){return mo(this,void 0,void 0,function*(){let c;c=void 0===(yield Jr.fetchInitialWrite(t,r.message.recordId,i))?yield Jr.constructRecordChain(t,r.message.descriptor.parentId,i):yield Jr.constructRecordChain(t,r.message.recordId,i);const o=yield Jr.fetchProtocolDefinition(t,r.message.descriptor.protocol,i),u=Jr.getRuleSet(r.message.descriptor.protocolPath,o);yield Jr.verifyInvokedRole(t,r,r.message.descriptor.protocol,r.message.contextId,o,i),yield Jr.authorizeAgainstAllowedActions(t,r,u,c,i)})}static authorizeRead(t,r,i,s){return mo(this,void 0,void 0,function*(){const c=yield Jr.constructRecordChain(t,i.message.recordId,s),o=yield Jr.fetchProtocolDefinition(t,i.message.descriptor.protocol,s),u=Jr.getRuleSet(i.message.descriptor.protocolPath,o);yield Jr.verifyInvokedRole(t,r,i.message.descriptor.protocol,i.message.contextId,o,s),yield Jr.authorizeAgainstAllowedActions(t,r,u,c,s)})}static authorizeQueryOrSubscribe(t,r,i){return mo(this,void 0,void 0,function*(){const{protocol:s,protocolPath:c,contextId:o}=r.message.descriptor.filter,u=yield Jr.fetchProtocolDefinition(t,s,i),A=Jr.getRuleSet(c,u);yield Jr.verifyInvokedRole(t,r,s,o,u,i),yield Jr.authorizeAgainstAllowedActions(t,r,A,[],i)})}static authorizeDelete(t,r,i,s){return mo(this,void 0,void 0,function*(){const c=yield Jr.constructRecordChain(t,r.message.descriptor.recordId,s),o=yield Jr.fetchProtocolDefinition(t,i.message.descriptor.protocol,s),u=Jr.getRuleSet(i.message.descriptor.protocolPath,o);yield Jr.verifyInvokedRole(t,r,i.message.descriptor.protocol,i.message.contextId,o,s),yield Jr.authorizeAgainstAllowedActions(t,r,u,c,s)})}static fetchProtocolDefinition(t,r,i){return mo(this,void 0,void 0,function*(){if(r===Fn.uri)return Fn.definition;const s={interface:Cr.Protocols,method:hr.Configure,protocol:r},{messages:c}=yield i.query(t,[s]);if(0===c.length)throw new Ot(Rt.ProtocolAuthorizationProtocolNotFound,`unable to find protocol definition for ${r}`);return c[0].descriptor.definition})}static constructRecordChain(t,r,i){return mo(this,void 0,void 0,function*(){if(void 0===r)return[];const s=[];let c=r;for(;void 0!==c;){const o=yield Jr.fetchInitialWrite(t,c,i);if(void 0===o)throw new Ot(Rt.ProtocolAuthorizationParentNotFoundConstructingRecordChain,`Unexpected error that should never trigger: no parent found with ID ${c} when constructing record chain.`);s.push(o),c=o.descriptor.parentId}return s.reverse()})}static fetchInitialWrite(t,r,i){return mo(this,void 0,void 0,function*(){const s={interface:Cr.Records,method:hr.Write,recordId:r},{messages:c}=yield i.query(t,[s]);return 0===c.length?void 0:yield yn.getInitialWrite(c)})}static getRuleSet(t,r){const i=Jr.getRuleSetAtProtocolPath(t,r);if(void 0===i)throw new Ot(Rt.ProtocolAuthorizationMissingRuleSet,`No rule set defined for protocolPath ${t}`);return i}static verifyProtocolPathAndContextId(t,r,i){var s;return mo(this,void 0,void 0,function*(){const c=r.message.descriptor.protocolPath,o=Jr.getTypeName(c),u=r.message.descriptor.parentId;if(void 0===u){if(c!==o)throw new Ot(Rt.ProtocolAuthorizationParentlessIncorrectProtocolPath,`Declared protocol path '${c}' is not valid for records with no parent'.`);return}const S={isLatestBaseState:!0,interface:Cr.Records,method:hr.Write,protocol:r.message.descriptor.protocol,recordId:u},{messages:y}=yield i.query(t,[S]),R=y[0];if(`${null===(s=R?.descriptor)||void 0===s?void 0:s.protocolPath}/${o}`!==c)throw new Ot(Rt.ProtocolAuthorizationIncorrectProtocolPath,`Could not find matching parent record to verify declared protocol path '${c}'.`);const te=`${R.contextId}/${r.message.recordId}`,fe=r.message.contextId;if(fe!==te)throw new Ot(Rt.ProtocolAuthorizationIncorrectContextId,`Declared contextId '${fe}' is not the same as expected: '${te}'.`)})}static verifyType(t,r){const i=Object.keys(r),c=Jr.getTypeName(t.descriptor.protocolPath);if(!i.includes(c))throw new Ot(Rt.ProtocolAuthorizationInvalidType,`record with type ${c} not allowed in protocol`);const u=Jr.getTypeName(t.descriptor.protocolPath),A=r[u],{schema:S}=t.descriptor;if(void 0!==A.schema&&A.schema!==S)throw new Ot(Rt.ProtocolAuthorizationInvalidSchema,`type '${u}' must have schema '${A.schema}',         instead has '${S}'`);const{dataFormat:y}=t.descriptor;if(void 0!==A.dataFormats&&!A.dataFormats.includes(y))throw new Ot(Rt.ProtocolAuthorizationIncorrectDataFormat,`type '${u}' must have data format in (${A.dataFormats}),         instead has '${y}'`)}static verifyInvokedRole(t,r,i,s,c,o){var u;return mo(this,void 0,void 0,function*(){const A=null===(u=r.signaturePayload)||void 0===u?void 0:u.protocolRole;if(void 0===A)return;const S=Jr.getRuleSetAtProtocolPath(A,c);if(void 0===S||!S.$role)throw new Ot(Rt.ProtocolAuthorizationNotARole,`Protocol path ${A} does not match role record type.`);const y={interface:Cr.Records,method:hr.Write,protocol:i,protocolPath:A,recipient:r.author,isLatestBaseState:!0},R=A.split("/").length-1;if(void 0===s&&R>0)throw new Ot(Rt.ProtocolAuthorizationMissingContextId,"Could not verify role because contextId is missing.");if(R>0){const te=s.split("/").slice(0,R).join("/"),fe=eo.constructPrefixFilterAsRangeFilter(te);y.contextId=fe}const{messages:ee}=yield o.query(t,[y]);if(0===ee.length)throw new Ot(Rt.ProtocolAuthorizationMatchingRoleRecordNotFound,`No matching role record found for protocol path ${A}`)})}static getActionsSeekingARuleMatch(t,r,i){return mo(this,void 0,void 0,function*(){switch(r.message.descriptor.method){case hr.Delete:const s=r,c=s.message.descriptor.recordId,o=yield yn.fetchInitialRecordsWrite(i,t,c);if(void 0===o)return[];const u=[];return s.message.descriptor.prune?(u.push(Ji.CoPrune),r.author===o.author&&u.push(Ji.Prune)):(u.push(Ji.CoDelete),r.author===o.author&&u.push(Ji.Delete)),u;case hr.Query:return[Ji.Query];case hr.Read:return[Ji.Read];case hr.Subscribe:return[Ji.Subscribe];case hr.Write:if(yield r.isInitialWrite())return[Ji.Create];{const y=r.message.recordId,R=yield yn.fetchInitialRecordsWrite(i,t,y);return void 0===R?[]:r.author===R.author?[Ji.CoUpdate,Ji.Update]:[Ji.CoUpdate]}}return[]})}static authorizeAgainstAllowedActions(t,r,i,s,c){var o;return mo(this,void 0,void 0,function*(){const u=r.message.descriptor.method,A=yield Jr.getActionsSeekingARuleMatch(t,r,c),S=r.author,y=i.$actions;if(void 0===y)throw new Ot(Rt.ProtocolAuthorizationActionRulesNotFound,`no action rule defined for Records${u}, ${S} is unauthorized`);const R=null===(o=r.signaturePayload)||void 0===o?void 0:o.protocolRole;for(const ee of y)if(ee.can.some(fe=>A.includes(fe))){if(ee.who===dl.Anyone)return;if(void 0!==S)if(void 0===R)if(ee.who!==dl.Recipient||void 0!==ee.of){if(yield Jr.checkActor(S,ee,s))return}else{let fe;if(fe=r.message.descriptor.method===hr.Write?r.message:s[s.length-1],fe.descriptor.recipient===S)return}else if(ee.role===R)return}throw new Ot(Rt.ProtocolAuthorizationActionNotAllowed,`Inbound message action Records${u} by author ${r.author} not allowed.`)})}static verifySizeLimit(t,r){const{min:i=0,max:s}=r.$size||{},c=t.message.descriptor.dataSize;if(c<i)throw new Ot(Rt.ProtocolAuthorizationMinSizeInvalid,`data size ${c} is less than allowed ${i}`);if(void 0!==s&&c>s)throw new Ot(Rt.ProtocolAuthorizationMaxSizeInvalid,`data size ${c} is more than allowed ${s}`)}static verifyTagsIfNeeded(t,r){if(void 0!==r.$tags){const{tags:i={},protocol:s,protocolPath:c}=t.message.descriptor,o=r.$tags,{$allowUndefinedTags:u,$requiredTags:A}=o,S=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(o,["$allowUndefinedTags","$requiredTags"]),y=u||!1,R=A||[],ee=new pE.default,ae=ee.compile({type:"object",properties:S,required:R,additionalProperties:y});if(!ae(i)){const fe=ee.errorsText(ae.errors,{dataVar:`${s}/${c}/$tags`});throw new Ot(Rt.ProtocolAuthorizationTagsInvalidSchema,`tags schema validation error: ${fe}`)}}}static verifyAsRoleRecordIfNeeded(t,r,i,s){return mo(this,void 0,void 0,function*(){if(!i.$role)return;const c=r,o=c.message.descriptor.recipient;if(void 0===o)throw new Ot(Rt.ProtocolAuthorizationRoleMissingRecipient,"Role records must have a recipient");const u=c.message.descriptor.protocolPath,A={interface:Cr.Records,method:hr.Write,isLatestBaseState:!0,protocol:c.message.descriptor.protocol,protocolPath:u,recipient:o},S=Hr.getParentContextFromOfContextId(c.message.contextId);if(""!==S){const ae=eo.constructPrefixFilterAsRangeFilter(S);A.contextId=ae}const{messages:y}=yield s.query(t,[A]);if(y.filter(ae=>ae.recordId!==c.message.recordId).length>0)throw new Ot(Rt.ProtocolAuthorizationDuplicateRoleRecipient,`DID '${o}' is already recipient of a role record at protocol path '${u} under the parent context ${S}.`)})}static getRuleSetAtProtocolPath(t,r){const i=t.split("/");let s=r.structure,c=0;for(;c<i.length;){const u=s[i[c]];if(void 0===u)return;s=u,c++}return s}static checkActor(t,r,i){return mo(this,void 0,void 0,function*(){const s=i.find(c=>c.descriptor.protocolPath===r.of);if(void 0===s)return!1;if(r.who===dl.Recipient)return t===s.descriptor.recipient;{const c=(yield yn.parse(s)).author;return t===c}})}static getTypeName(t){return t.split("/").slice(-1)[0]}}var ib=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class a0 extends fc{static parse(t){return ib(this,void 0,void 0,function*(){let r;return void 0!==t.authorization&&(r=yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor)),yield Hr.validateDelegatedGrantReferentialIntegrity(t,r),ei.validateTimestamp(t.descriptor.messageTimestamp),new a0(t)})}static create(t){var r,i;return ib(this,void 0,void 0,function*(){const s=t.recordId,c=ei.getCurrentTimestamp(),o={interface:Cr.Records,method:hr.Delete,messageTimestamp:null!==(r=t.messageTimestamp)&&void 0!==r?r:c,recordId:s,prune:null!==(i=t.prune)&&void 0!==i&&i},A={descriptor:o,authorization:yield zt.createAuthorization({descriptor:o,signer:t.signer,protocolRole:t.protocolRole,delegatedGrant:t.delegatedGrant})};return zt.validateJsonSchema(A),new a0(A)})}constructIndexes(t){const i=Object.assign({},this.message.descriptor),{protocol:s,protocolPath:c,recipient:o,schema:u,parentId:A,dateCreated:S}=t.descriptor,y=Object.assign({protocol:s,protocolPath:c,recipient:o,schema:u,parentId:A,dateCreated:S,contextId:t.contextId,author:this.author},i);return fo(y),y}authorizeDelegate(t,r){return ib(this,void 0,void 0,function*(){const i=yield Ma.parse(this.message.authorization.authorDelegatedGrant);yield to.authorizeDelete({recordsDeleteMessage:this.message,recordsWriteToDelete:t,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:i,messageStore:r})})}}let sb=(()=>{class n{}return n.maxDataSizeAllowedToBeEncoded=3e4,n})();var um=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Gu{static deleteFromDataStoreIfNeeded(t,r,i,s){return um(this,void 0,void 0,function*(){if(i.descriptor.method!==hr.Write)return;const c=i;c.descriptor.dataSize<=sb.maxDataSizeAllowedToBeEncoded||c.descriptor.dataCid!==s.descriptor.dataCid&&(yield t.delete(r,c.recordId,c.descriptor.dataCid))})}static purgeRecordDescendants(t,r,i,s,c){return um(this,void 0,void 0,function*(){const o={interface:Cr.Records,parentId:r},{messages:u}=yield i.query(t,[o]),A=new Map;for(const S of u){let y;y=Hr.isRecordsWrite(S)?S.recordId:S.descriptor.recordId,A.has(y)||A.set(y,[]),A.get(y).push(S)}for(const S of A.keys())yield Gu.purgeRecordDescendants(t,S,i,s,c);for(const S of A.keys())yield Gu.purgeRecordMessages(t,A.get(S),i,s,c)})}static purgeRecordMessages(t,r,i,s,c){return um(this,void 0,void 0,function*(){const o=r.filter(S=>S.descriptor.method===hr.Write),u=yield zt.getNewestMessage(o);yield s.delete(t,u.recordId,u.descriptor.dataCid);const A=yield Promise.all(r.map(S=>zt.getCid(S)));yield c.deleteEventsByCid(t,A),yield Promise.all(A.map(S=>i.delete(t,S)))})}static deleteAllOlderMessagesButKeepInitialWrite(t,r,i,s,c,o){return um(this,void 0,void 0,function*(){const u=[];for(const A of r){if(yield zt.isOlder(A,i)){yield Gu.deleteFromDataStoreIfNeeded(c,t,A,i);const y=yield zt.getCid(A);if(yield s.delete(t,y),yield yn.isInitialWrite(A)){const te=yield(yield yn.parse(A)).constructIndexes(!1),fe=A;delete fe.encodedData,yield s.put(t,fe,te)}else{const ee=yield zt.getCid(A);u.push(ee)}}yield o.deleteEventsByCid(t,u)}})}}var gE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class ob{constructor(t,r,i,s,c){this.didResolver=t,this.messageStore=r,this.dataStore=i,this.eventLog=s,this.eventStream=c}handle({tenant:t,message:r}){return gE(this,void 0,void 0,function*(){let i;try{i=yield a0.parse(r)}catch(ae){return Ln(ae,400)}try{yield Ra(r.authorization,this.didResolver)}catch(ae){return Ln(ae,401)}const s={interface:Cr.Records,recordId:r.descriptor.recordId},{messages:c}=yield this.messageStore.query(t,[s]),o=yield zt.getNewestMessage(c);let A,u=!1;if(void 0===o||(yield zt.isNewer(r,o))?(u=!0,A=r):A=o,!u)return{status:{code:409,detail:"Conflict"}};if(void 0===o||o.descriptor.method===hr.Delete)return{status:{code:404,detail:"Not Found"}};try{yield ob.authorizeRecordsDelete(t,i,yield yn.parse(o),this.messageStore)}catch(ae){return Ln(ae,401)}const S=yield yn.getInitialWrite(c),y=i.constructIndexes(S),R=yield zt.getCid(r);return yield this.messageStore.put(t,r,y),yield this.eventLog.append(t,R,y),void 0!==this.eventStream&&this.eventStream.emit(t,{message:r,initialWrite:S},y),r.descriptor.prune&&(yield Gu.purgeRecordDescendants(t,r.descriptor.recordId,this.messageStore,this.dataStore,this.eventLog)),yield Gu.deleteAllOlderMessagesButKeepInitialWrite(t,c,A,this.messageStore,this.dataStore,this.eventLog),{status:{code:202,detail:"Accepted"}}})}static authorizeRecordsDelete(t,r,i,s){return gE(this,void 0,void 0,function*(){if(zt.isSignedByAuthorDelegate(r.message)&&(yield r.authorizeDelegate(i.message,s)),r.author!==t){if(void 0===i.message.descriptor.protocol)throw new Ot(Rt.RecordsDeleteAuthorizationFailed,"RecordsDelete message failed authorization");yield Jr.authorizeDelete(t,r,i,s)}})}}var ra=function(n){return n[n.Descending=-1]="Descending",n[n.Ascending=1]="Ascending",n}(ra||{}),c0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Ud{constructor(t,r,i){this.didResolver=t,this.messageStore=r,this.dataStore=i}handle({tenant:t,message:r}){return c0(this,void 0,void 0,function*(){let i,s,c;try{i=yield n0.parse(r)}catch(o){return Ln(o,400)}if(Hr.filterIncludesPublishedRecords(i.message.descriptor.filter)&&void 0===i.author){const o=yield this.fetchPublishedRecords(t,i);s=o.messages,c=o.cursor}else{try{yield Ra(r.authorization,this.didResolver),yield Ud.authorizeRecordsQuery(t,i,this.messageStore)}catch(o){return Ln(o,401)}if(i.author===t){const o=yield this.fetchRecordsAsOwner(t,i);s=o.messages,c=o.cursor}else{const o=yield this.fetchRecordsAsNonOwner(t,i);s=o.messages,c=o.cursor}}for(const o of s)if(!(yield yn.isInitialWrite(o))){const A=(yield this.messageStore.query(t,[{recordId:o.recordId,isLatestBaseState:!1,method:hr.Write}])).messages[0];delete A.encodedData,o.initialWrite=A}return{status:{code:200,detail:"OK"},entries:s,cursor:c}})}convertDateSort(t){switch(t){case To.CreatedAscending:return{dateCreated:ra.Ascending};case To.CreatedDescending:return{dateCreated:ra.Descending};case To.PublishedAscending:return{datePublished:ra.Ascending};case To.PublishedDescending:return{datePublished:ra.Descending};default:return{dateCreated:ra.Ascending}}}fetchRecordsAsOwner(t,r){return c0(this,void 0,void 0,function*(){const{dateSort:i,filter:s,pagination:c}=r.message.descriptor,o=Object.assign(Object.assign({},Hr.convertFilter(s,i)),{interface:Cr.Records,method:hr.Write,isLatestBaseState:!0}),u=this.convertDateSort(i);return this.messageStore.query(t,[o],u,c)})}fetchRecordsAsNonOwner(t,r){return c0(this,void 0,void 0,function*(){const{dateSort:i,pagination:s,filter:c}=r.message.descriptor,o=[];if(Hr.filterIncludesPublishedRecords(c)&&o.push(Ud.buildPublishedRecordsFilter(r)),Hr.filterIncludesUnpublishedRecords(c)){o.push(Ud.buildUnpublishedRecordsByQueryAuthorFilter(r));const A=r.message.descriptor.filter.recipient;(void 0===A||A===r.author)&&o.push(Ud.buildUnpublishedRecordsForQueryAuthorFilter(r)),Hr.shouldProtocolAuthorize(r.signaturePayload)&&o.push(Ud.buildUnpublishedProtocolAuthorizedRecordsFilter(r))}const u=this.convertDateSort(i);return this.messageStore.query(t,o,u,s)})}fetchPublishedRecords(t,r){return c0(this,void 0,void 0,function*(){const{dateSort:i,pagination:s}=r.message.descriptor,c=Ud.buildPublishedRecordsFilter(r),o=this.convertDateSort(i);return this.messageStore.query(t,[c],o,s)})}static buildPublishedRecordsFilter(t){const{dateSort:r,filter:i}=t.message.descriptor;return Object.assign(Object.assign({},Hr.convertFilter(i,r)),{interface:Cr.Records,method:hr.Write,published:!0,isLatestBaseState:!0})}static buildUnpublishedRecordsForQueryAuthorFilter(t){const{dateSort:r,filter:i}=t.message.descriptor;return Object.assign(Object.assign({},Hr.convertFilter(i,r)),{interface:Cr.Records,method:hr.Write,recipient:t.author,isLatestBaseState:!0,published:!1})}static buildUnpublishedProtocolAuthorizedRecordsFilter(t){const{dateSort:r,filter:i}=t.message.descriptor;return Object.assign(Object.assign({},Hr.convertFilter(i,r)),{interface:Cr.Records,method:hr.Write,isLatestBaseState:!0,published:!1})}static buildUnpublishedRecordsByQueryAuthorFilter(t){const{dateSort:r,filter:i}=t.message.descriptor;return Object.assign(Object.assign({},Hr.convertFilter(i,r)),{author:t.author,interface:Cr.Records,method:hr.Write,isLatestBaseState:!0,published:!1})}static authorizeRecordsQuery(t,r,i){return c0(this,void 0,void 0,function*(){zt.isSignedByAuthorDelegate(r.message)&&(yield r.authorizeDelegate(i)),Hr.shouldProtocolAuthorize(r.signaturePayload)&&(yield Jr.authorizeQueryOrSubscribe(t,r,i))})}}var ab=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class d0 extends fc{static parse(t){return ab(this,void 0,void 0,function*(){let r;return void 0!==t.authorization&&(r=yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor)),yield Hr.validateDelegatedGrantReferentialIntegrity(t,r),ei.validateTimestamp(t.descriptor.messageTimestamp),new d0(t)})}static create(t){var r;return ab(this,void 0,void 0,function*(){const{filter:i,signer:s,permissionGrantId:c,protocolRole:o}=t,u=ei.getCurrentTimestamp(),A={interface:Cr.Records,method:hr.Read,filter:Hr.normalizeFilter(i),messageTimestamp:null!==(r=t.messageTimestamp)&&void 0!==r?r:u};let S;fo(A),void 0!==s&&(S=yield zt.createAuthorization({descriptor:A,signer:s,permissionGrantId:c,protocolRole:o,delegatedGrant:t.delegatedGrant}));const y={descriptor:A,authorization:S};return zt.validateJsonSchema(y),new d0(y)})}authorizeDelegate(t,r){return ab(this,void 0,void 0,function*(){const i=yield Ma.parse(this.message.authorization.authorDelegatedGrant);yield to.authorizeRead({recordsReadMessage:this.message,recordsWriteMessageToBeRead:t,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:i,messageStore:r})})}}var vE=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class cb{constructor(t,r,i){this.didResolver=t,this.messageStore=r,this.dataStore=i}handle({tenant:t,message:r}){return vE(this,void 0,void 0,function*(){let i;try{i=yield d0.parse(r)}catch(y){return Ln(y,400)}try{void 0!==i.author&&(yield Ra(r.authorization,this.didResolver))}catch(y){return Ln(y,401)}const s=Object.assign({interface:Cr.Records,isLatestBaseState:!0},Hr.convertFilter(r.descriptor.filter)),{messages:c}=yield this.messageStore.query(t,[s]);if(0===c.length)return{status:{code:404,detail:"Not Found"}};if(c.length>1)return Ln(new Ot(Rt.RecordsReadReturnedMultiple,"Multiple records exist for the RecordsRead filter"),400);const o=c[0];try{yield cb.authorizeRecordsRead(t,i,yield yn.parse(o),this.messageStore)}catch(y){return Ln(y,401)}let u;if(void 0!==o.encodedData){const y=Ft.base64UrlToBytes(o.encodedData);u=jd.fromBytes(y),delete o.encodedData}else{const y=yield this.dataStore.get(t,o.recordId,o.descriptor.dataCid);if(void 0===y?.dataStream)return{status:{code:404,detail:"Not Found"}};u=y.dataStream}const A=Object.assign(Object.assign({},o),{data:u});if(!(yield yn.isInitialWrite(A))){const R=(yield this.messageStore.query(t,[{recordId:A.recordId,isLatestBaseState:!1,method:hr.Write}])).messages[0];delete R.encodedData,A.initialWrite=R}return{status:{code:200,detail:"OK"},record:A}})}static authorizeRecordsRead(t,r,i,s){return vE(this,void 0,void 0,function*(){zt.isSignedByAuthorDelegate(r.message)&&(yield r.authorizeDelegate(i.message,s));const{descriptor:c}=i.message;if(r.author!==t){if(!0===c.published)return;if(void 0!==r.author&&r.author===c.recipient)return;if(void 0!==r.author&&void 0!==r.signaturePayload.permissionGrantId){const o=yield Fn.fetchGrant(t,s,r.signaturePayload.permissionGrantId);yield to.authorizeRead({recordsReadMessage:r.message,recordsWriteMessageToBeRead:i.message,expectedGrantor:t,expectedGrantee:r.author,permissionGrant:o,messageStore:s})}else{if(void 0===c.protocol)throw new Ot(Rt.RecordsReadAuthorizationFailed,"message failed authorization");yield Jr.authorizeRead(t,r,i,s)}}})}}var db=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class u0 extends fc{static parse(t){return db(this,void 0,void 0,function*(){let r;if(void 0!==t.authorization&&(r=yield zt.validateSignatureStructure(t.authorization.signature,t.descriptor)),yield Hr.validateDelegatedGrantReferentialIntegrity(t,r),void 0!==r?.protocolRole&&void 0===t.descriptor.filter.protocolPath)throw new Ot(Rt.RecordsSubscribeFilterMissingRequiredProperties,"Role-authorized subscriptions must include `protocolPath` in the filter");return void 0!==t.descriptor.filter.protocol&&ku(t.descriptor.filter.protocol),void 0!==t.descriptor.filter.schema&&Of(t.descriptor.filter.schema),ei.validateTimestamp(t.descriptor.messageTimestamp),new u0(t)})}static create(t){var r;return db(this,void 0,void 0,function*(){const i={interface:Cr.Records,method:hr.Subscribe,messageTimestamp:null!==(r=t.messageTimestamp)&&void 0!==r?r:ei.getCurrentTimestamp(),filter:Hr.normalizeFilter(t.filter)};fo(i);const s=t.signer;let c;s&&(c=yield zt.createAuthorization({descriptor:i,signer:s,protocolRole:t.protocolRole,delegatedGrant:t.delegatedGrant}));const o={descriptor:i,authorization:c};return zt.validateJsonSchema(o),new u0(o)})}authorizeDelegate(t){return db(this,void 0,void 0,function*(){const r=yield Ma.parse(this.message.authorization.authorDelegatedGrant);yield to.authorizeQueryOrSubscribe({incomingMessage:this.message,expectedGrantor:this.author,expectedGrantee:this.signer,permissionGrant:r,messageStore:t})})}}var fm=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class lc{constructor(t,r,i){this.didResolver=t,this.messageStore=r,this.eventStream=i}handle({tenant:t,message:r,subscriptionHandler:i}){return fm(this,void 0,void 0,function*(){if(void 0===this.eventStream)return Ln(new Ot(Rt.RecordsSubscribeEventStreamUnimplemented,"Subscriptions are not supported"),501);let s;try{s=yield u0.parse(r)}catch(S){return Ln(S,400)}let c=[];if(Hr.filterIncludesPublishedRecords(s.message.descriptor.filter)&&void 0===s.author)c=[lc.buildPublishedRecordsFilter(s)],delete r.authorization;else{try{yield Ra(r.authorization,this.didResolver),yield lc.authorizeRecordsSubscribe(t,s,this.messageStore)}catch(S){return Ln(S,401)}c=s.author===t?yield lc.filterAsOwner(s):yield lc.filterAsNonOwner(s)}const u=yield zt.getCid(r);return{status:{code:200,detail:"OK"},subscription:yield this.eventStream.subscribe(t,u,(S,y,R)=>{t===S&&eo.matchAnyFilter(R,c)&&i(y)})}})}static filterAsOwner(t){return fm(this,void 0,void 0,function*(){const{filter:r}=t.message.descriptor;return[Object.assign(Object.assign({},Hr.convertFilter(r)),{interface:Cr.Records,method:[hr.Write,hr.Delete]})]})}static filterAsNonOwner(t){return fm(this,void 0,void 0,function*(){const r=[],{filter:i}=t.message.descriptor;if(Hr.filterIncludesPublishedRecords(i)&&r.push(lc.buildPublishedRecordsFilter(t)),Hr.filterIncludesUnpublishedRecords(i)){r.push(lc.buildUnpublishedRecordsBySubscribeAuthorFilter(t));const s=t.message.descriptor.filter.recipient;(void 0===s||s===t.author)&&r.push(lc.buildUnpublishedRecordsForSubscribeAuthorFilter(t)),Hr.shouldProtocolAuthorize(t.signaturePayload)&&r.push(lc.buildUnpublishedProtocolAuthorizedRecordsFilter(t))}return r})}static buildPublishedRecordsFilter(t){return Object.assign(Object.assign({},Hr.convertFilter(t.message.descriptor.filter)),{interface:Cr.Records,method:[hr.Write,hr.Delete],published:!0})}static buildUnpublishedRecordsForSubscribeAuthorFilter(t){return Object.assign(Object.assign({},Hr.convertFilter(t.message.descriptor.filter)),{interface:Cr.Records,method:[hr.Write,hr.Delete],recipient:t.author,published:!1})}static buildUnpublishedProtocolAuthorizedRecordsFilter(t){return Object.assign(Object.assign({},Hr.convertFilter(t.message.descriptor.filter)),{interface:Cr.Records,method:[hr.Write,hr.Delete],published:!1})}static buildUnpublishedRecordsBySubscribeAuthorFilter(t){return Object.assign(Object.assign({},Hr.convertFilter(t.message.descriptor.filter)),{author:t.author,interface:Cr.Records,method:[hr.Write,hr.Delete],published:!1})}static authorizeRecordsSubscribe(t,r,i){return fm(this,void 0,void 0,function*(){zt.isSignedByAuthorDelegate(r.message)&&(yield r.authorizeDelegate(i)),Hr.shouldProtocolAuthorize(r.signaturePayload)&&(yield Jr.authorizeQueryOrSubscribe(t,r,i))})}}var fl=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class qu{constructor(t,r,i,s,c){this.didResolver=t,this.messageStore=r,this.dataStore=i,this.eventLog=s,this.eventStream=c}handle({tenant:t,message:r,dataStream:i}){return fl(this,void 0,void 0,function*(){let s;try{s=yield yn.parse(r),void 0!==r.descriptor.protocol&&(yield Jr.validateReferentialIntegrity(t,s,this.messageStore))}catch(ae){return Ln(ae,400)}try{yield Ra(r.authorization,this.didResolver),yield qu.authorizeRecordsWrite(t,s,this.messageStore)}catch(ae){return Ln(ae,401)}const c={interface:Cr.Records,recordId:r.recordId},{messages:o}=yield this.messageStore.query(t,[c]),u=yield s.isInitialWrite();let A;if(!u)try{A=yield yn.getInitialWrite(o),yn.verifyEqualityOfImmutableProperties(A,r)}catch(ae){return Ln(ae,400)}const S=yield zt.getNewestMessage(o);let R,y=!1;if(void 0===S||(yield zt.isNewer(r,S))?(y=!0,R=r):R=S,!y)return{status:{code:409,detail:"Conflict"}};try{let ae=!1,te=r;if(void 0!==i)te=yield this.processMessageWithDataStream(t,r,i),ae=!0;else{if(S?.descriptor.method===hr.Delete)throw new Ot(Rt.RecordsWriteMissingDataStream,"No data stream was provided with the previous message being a delete");if(!u){const we=S;te=yield this.processMessageWithoutDataStream(t,r,we),ae=!0}}const fe=yield s.constructIndexes(ae);yield this.messageStore.put(t,te,fe),yield this.eventLog.append(t,yield zt.getCid(r),fe),void 0!==this.eventStream&&ae&&this.eventStream.emit(t,{message:r,initialWrite:A},fe)}catch(ae){const te=ae;if(void 0!==te.code&&(te.code===Rt.RecordsWriteMissingEncodedDataInPrevious||te.code===Rt.RecordsWriteMissingDataInPrevious||te.code===Rt.RecordsWriteMissingDataStream||te.code===Rt.RecordsWriteDataCidMismatch||te.code===Rt.RecordsWriteDataSizeMismatch||te.code.startsWith("PermissionsProtocolValidate")||te.code.startsWith("SchemaValidator")))return Ln(ae,400);throw ae}return yield Gu.deleteAllOlderMessagesButKeepInitialWrite(t,o,R,this.messageStore,this.dataStore,this.eventLog),yield this.postProcessingForCoreRecordsWrite(t,s),{status:{code:202,detail:"Accepted"}}})}static validateSchemaForCoreRecordsWrite(t,r){t.descriptor.protocol===Fn.uri&&Fn.validateSchema(t,r)}postProcessingForCoreRecordsWrite(t,r){return fl(this,void 0,void 0,function*(){if(r.message.descriptor.protocol===Fn.uri&&r.message.descriptor.protocolPath===Fn.revocationPath){const s={permissionGrantId:r.message.descriptor.parentId,dateCreated:{gte:r.message.descriptor.messageTimestamp}},{messages:c}=yield this.messageStore.query(t,[s]),o=[];for(const u of c){const A=yield zt.getCid(u);yield this.messageStore.delete(t,A)}this.eventLog.deleteEventsByCid(t,o)}})}cloneAndAddEncodedData(t,r){return fl(this,void 0,void 0,function*(){const i=Object.assign({},t);return i.encodedData=Ft.bytesToBase64Url(r),i})}processMessageWithDataStream(t,r,i){return fl(this,void 0,void 0,function*(){let s=r;if(r.descriptor.dataSize<=sb.maxDataSizeAllowedToBeEncoded){const c=yield jd.toBytes(i),o=yield _s.computeDagPbCidFromBytes(c);qu.validateDataIntegrity(r.descriptor.dataCid,r.descriptor.dataSize,o,c.length),qu.validateSchemaForCoreRecordsWrite(r,c),s=yield this.cloneAndAddEncodedData(r,c)}else{const[c,o]=jd.duplicateDataStream(i,2);try{const[u,A]=yield Promise.all([_s.computeDagPbCidFromStream(c),this.dataStore.put(t,r.recordId,r.descriptor.dataCid,o)]);qu.validateDataIntegrity(r.descriptor.dataCid,r.descriptor.dataSize,u,A.dataSize)}catch(u){throw yield this.dataStore.delete(t,r.recordId,r.descriptor.dataCid),u}}return s})}processMessageWithoutDataStream(t,r,i){return fl(this,void 0,void 0,function*(){const s=Object.assign({},r),{dataCid:c,dataSize:o}=r.descriptor;if(qu.validateDataIntegrity(c,o,i.descriptor.dataCid,i.descriptor.dataSize),o<=sb.maxDataSizeAllowedToBeEncoded){if(void 0===i.encodedData)throw new Ot(Rt.RecordsWriteMissingEncodedDataInPrevious,"No dataStream was provided and unable to get data from previous message");s.encodedData=i.encodedData}else if(void 0===(yield this.dataStore.get(t,i.recordId,r.descriptor.dataCid)))throw new Ot(Rt.RecordsWriteMissingDataInPrevious,"No dataStream was provided and unable to get data from previous message");return s})}static validateDataIntegrity(t,r,i,s){if(t!==i)throw new Ot(Rt.RecordsWriteDataCidMismatch,`actual data CID ${i} does not match dataCid in descriptor: ${t}`);if(r!==s)throw new Ot(Rt.RecordsWriteDataSizeMismatch,`actual data size ${s} bytes does not match dataSize in descriptor: ${r}`)}static authorizeRecordsWrite(t,r,i){return fl(this,void 0,void 0,function*(){if(void 0!==r.owner&&r.owner!==t)throw new Ot(Rt.RecordsWriteOwnerAndTenantMismatch,`Owner ${r.owner} must be the same as tenant ${t} when specified.`);if(r.isSignedByAuthorDelegate&&(yield r.authorizeAuthorDelegate(i)),r.isSignedByOwnerDelegate&&(yield r.authorizeOwnerDelegate(i)),void 0===r.owner){if(r.author===t)return;if(void 0!==r.author&&void 0!==r.signaturePayload.permissionGrantId){const s=yield Fn.fetchGrant(t,i,r.signaturePayload.permissionGrantId);yield to.authorizeWrite({recordsWriteMessage:r.message,expectedGrantor:t,expectedGrantee:r.author,permissionGrant:s,messageStore:i})}else{if(void 0===r.message.descriptor.protocol)throw new Ot(Rt.RecordsWriteAuthorizationFailed,"message failed authorization");yield Jr.authorizeWrite(t,r,i)}}})}}var lm=function(n){return n.authentication="authentication",n.assertionMethod="assertionMethod",n.keyAgreement="keyAgreement",n.capabilityInvocation="capabilityInvocation",n.capabilityDelegation="capabilityDelegation",n}(lm||{});const Oo={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};class Mn{constructor({method:t,id:r,path:i,query:s,fragment:c,params:o}){this.uri=`did:${t}:${r}`,this.method=t,this.id=r,this.path=i,this.query=s,this.fragment=c,this.params=o}static parse(t){if(!t)return null;const r=Mn.DID_URI_PATTERN.exec(t);if(!r||!r.groups)return null;const{method:i,id:s,path:c,query:o,fragment:u}=r.groups,A={uri:`did:${i}:${s}`,method:i,id:s};if(c&&(A.path=c),o&&(A.query=o.slice(1)),u&&(A.fragment=u.slice(1)),o){const S={},y=o.slice(1).split("&");for(const R of y){const[ee,ae]=R.split("=");S[ee]=ae}A.params=S}return A}}Mn.METHOD_PATTERN="([a-z0-9]+)",Mn.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})",Mn.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Mn.PCT_ENCODED_PATTERN})`,Mn.METHOD_ID_PATTERN=`((?:${Mn.ID_CHAR_PATTERN}*:)*(${Mn.ID_CHAR_PATTERN}+))`,Mn.PATH_PATTERN="(/[^#?]*)?",Mn.QUERY_PATTERN="([?][^#]*)?",Mn.FRAGMENT_PATTERN="(#.*)?",Mn.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Mn.METHOD_PATTERN}):(?<id>${Mn.METHOD_ID_PATTERN})(?<path>${Mn.PATH_PATTERN})(?<query>${Mn.QUERY_PATTERN})(?<fragment>${Mn.FRAGMENT_PATTERN})$`);class Ar extends Error{constructor(t,r){super(`${t}: ${r}`),this.code=t,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ar)}}var Mr=function(n){return n.InvalidDid="invalidDid",n.MethodNotSupported="methodNotSupported",n.InternalError="internalError",n.InvalidDidDocument="invalidDidDocument",n.InvalidDidDocumentLength="invalidDidDocumentLength",n.InvalidDidUrl="invalidDidUrl",n.InvalidPreviousDidProof="invalidPreviousDidProof",n.InvalidPublicKey="invalidPublicKey",n.InvalidPublicKeyLength="invalidPublicKeyLength",n.InvalidPublicKeyType="invalidPublicKeyType",n.InvalidSignature="invalidSignature",n.NotFound="notFound",n.RepresentationNotSupported="representationNotSupported",n.UnsupportedPublicKeyType="unsupportedPublicKeyType",n}(Mr||{}),hm=I(52191);function pm(n){const r=Object.prototype.toString.call(n).match(/\s([a-zA-Z0-9]+)/),[i,s]=r;return s}var f0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},wE=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=n[Symbol.asyncIterator];return t?t.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(c){r[c]=n[c]&&function(o){return new Promise(function(u,A){!function s(c,o,u,A){Promise.resolve(A).then(function(S){c({value:S,done:u})},o)}(u,A,(o=n[c](o)).done,o.value)})}}};const ym=new TextEncoder,Zu=new TextDecoder;class Dt{constructor(t,r){this.data=t,this.format=r}static arrayBuffer(t){return new Dt(t,"ArrayBuffer")}static asyncIterable(t){if(!function QD(n){return"object"==typeof n&&null!==n&&"function"==typeof n[Symbol.asyncIterator]}(t))throw new TypeError("Input must be of type AsyncIterable.");return new Dt(t,"AsyncIterable")}static base32Z(t){return new Dt(t,"Base32Z")}static base58Btc(t){return new Dt(t,"Base58Btc")}static base64Url(t){return new Dt(t,"Base64Url")}static bufferSource(t){return new Dt(t,"BufferSource")}static hex(t){if("string"!=typeof t)throw new TypeError("Hex input must be a string.");if(t.length%2!=0)throw new TypeError("Hex input must have an even number of characters.");return new Dt(t,"Hex")}static multibase(t){return new Dt(t,"Multibase")}static object(t){return new Dt(t,"Object")}static string(t){return new Dt(t,"String")}static uint8Array(t){return new Dt(t,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Jo.baseDecode(this.data).buffer;case"Base64Url":return rt.baseDecode(this.data).buffer;case"BufferSource":if("ArrayBuffer"===pm(this.data))return this.data;if(ArrayBuffer.isView(this.data))return function XD(n){return 0!==n.byteOffset||n.byteLength!==n.buffer.byteLength}(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`);case"Hex":case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return f0(this,void 0,void 0,function*(){if("AsyncIterable"===this.format)return yield(yield this.toBlobAsync()).arrayBuffer();throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)})}toBase32Z(){if("Uint8Array"===this.format)return $6.baseEncode(this.data);throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}toBase58Btc(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return Jo.baseEncode(t)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Jo.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{const t=new Uint8Array(this.data);return rt.baseEncode(t)}case"BufferSource":{const t=this.toUint8Array();return rt.baseEncode(t)}case"Object":{const t=JSON.stringify(this.data),r=ym.encode(t);return rt.baseEncode(r)}case"String":{const t=ym.encode(this.data);return rt.baseEncode(t)}case"Uint8Array":return rt.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var t,r,i;return f0(this,void 0,void 0,function*(){if("AsyncIterable"===this.format){const A=[];try{for(var u,c=!0,o=wE(this.data);u=yield o.next(),!(t=u.done);c=!0)c=!1,A.push(u.value)}catch(y){r={error:y}}finally{try{!c&&!t&&(i=o.return)&&(yield i.call(o))}finally{if(r)throw r.error}}return new Blob(A)}throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)})}toHex(){const t=Array.from({length:256},(r,i)=>i.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{const r=this.toUint8Array();return Dt.uint8Array(r).toHex()}case"Base64Url":{const r=this.toUint8Array();return Dt.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let i=0;i<this.data.length;i++)r+=t[this.data[i]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){if("Base58Btc"===this.format)return`z${this.data}`;throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}toObject(){switch(this.format){case"Base64Url":{const t=rt.baseDecode(this.data),r=Zu.decode(t);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{const t=Zu.decode(this.data);return JSON.parse(t)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return f0(this,void 0,void 0,function*(){if("AsyncIterable"===this.format){const t=yield this.toStringAsync();return JSON.parse(t)}throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)})}toString(){switch(this.format){case"ArrayBuffer":case"Uint8Array":return Zu.decode(this.data);case"Base64Url":{const t=rt.baseDecode(this.data);return Zu.decode(t)}case"Object":return JSON.stringify(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var t,r,i,s;return f0(this,void 0,void 0,function*(){if("AsyncIterable"===this.format){let A="";try{for(var u,c=!0,o=wE(this.data);u=yield o.next(),!(t=u.done);c=!0)c=!1,A+="string"==typeof(s=u.value)?s:Zu.decode(s,{stream:!0})}catch(S){r={error:S}}finally{try{!c&&!t&&(i=o.return)&&(yield i.call(o))}finally{if(r)throw r.error}}return A+=Zu.decode(void 0,{stream:!1}),A}throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return $6.baseDecode(this.data);case"Base58Btc":return Jo.baseDecode(this.data);case"Base64Url":return rt.baseDecode(this.data);case"BufferSource":{const t=pm(this.data);if("Uint8Array"===t)return this.data;if("ArrayBuffer"===t)return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{const t=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){const i=parseInt(this.data.substring(r,r+2),16);if(isNaN(i))throw new TypeError("Input is not a valid hexadecimal string.");t[r/2]=i}return t}case"Object":{const t=JSON.stringify(this.data);return ym.encode(t)}case"String":return ym.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return f0(this,void 0,void 0,function*(){if("AsyncIterable"===this.format){const t=yield this.toArrayBufferAsync();return new Uint8Array(t)}throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)})}}class Ui{static addPrefix(t){var r;let{code:i,data:s,name:c}=t;if(!(c?!i:i))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(i=Ui.codeToName.has(i)?i:Ui.nameToCode.get(c),void 0===i)throw new Error(`Unsupported multicodec: ${null!==(r=t.name)&&void 0!==r?r:t.code}`);const o=Vl(i),u=new Uint8Array(o+s.byteLength);return u.set(s,o),zl(i,u),u}static getCodeFromData(t){const{prefixedData:r}=t,[i,s]=Kl(r);return i}static getCodeFromName(t){const{name:r}=t,i=Ui.nameToCode.get(r);if(void 0===i)throw new Error(`Unsupported multicodec: ${r}`);return i}static getNameFromCode(t){const{code:r}=t,i=Ui.codeToName.get(r);if(void 0===i)throw new Error(`Unsupported multicodec: ${r}`);return i}static registerCodec(t){Ui.codeToName.set(t.code,t.name),Ui.nameToCode.set(t.name,t.code)}static removePrefix(t){const{prefixedData:r}=t,[i,s]=Kl(r),c=Ui.codeToName.get(i);if(void 0===c)throw new Error(`Unsupported multicodec: ${i}`);return{code:i,data:r.slice(s),name:c}}}function ub(n){return!("object"!=typeof n||null===n||Object.getOwnPropertySymbols(n).length>0)&&0===Object.keys(n).length}function mm(n){Object.keys(n).forEach(t=>{void 0===n[t]?delete n[t]:"object"==typeof n[t]&&mm(n[t])})}Ui.codeToName=new Map,Ui.nameToCode=new Map,Ui.registerCodec({code:237,name:"ed25519-pub"}),Ui.registerCodec({code:4864,name:"ed25519-priv"}),Ui.registerCodec({code:236,name:"x25519-pub"}),Ui.registerCodec({code:4866,name:"x25519-priv"}),Ui.registerCodec({code:231,name:"secp256k1-pub"}),Ui.registerCodec({code:4865,name:"secp256k1-priv"});var fb=I(54626),na=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class tN{constructor({db:t,location:r="DATASTORE"}={}){this.store=t??new fb.Level(r)}clear(){return na(this,void 0,void 0,function*(){yield this.store.clear()})}close(){return na(this,void 0,void 0,function*(){yield this.store.close()})}delete(t){return na(this,void 0,void 0,function*(){yield this.store.del(t)})}get(t){return na(this,void 0,void 0,function*(){try{return yield this.store.get(t)}catch(r){if(r.notFound)return;throw r}})}set(t,r){return na(this,void 0,void 0,function*(){yield this.store.put(t,r)})}}class bE{constructor(){this.store=new Map}clear(){return na(this,void 0,void 0,function*(){this.store.clear()})}close(){return na(this,void 0,void 0,function*(){})}delete(t){return na(this,void 0,void 0,function*(){return this.store.delete(t)})}get(t){return na(this,void 0,void 0,function*(){return this.store.get(t)})}has(t){return na(this,void 0,void 0,function*(){return this.store.has(t)})}list(){return na(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(t,r){return na(this,void 0,void 0,function*(){this.store.set(t,r)})}}var l0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},h0=function(n){return this instanceof h0?(this.v=n,this):new h0(n)};class Co{static asAsyncIterator(t){return function(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=r.apply(n,t||[]),c=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(ee){i[ee]&&(s[ee]=function(ae){return new Promise(function(te,fe){c.push([ee,ae,te,fe])>1||u(ee,ae)})})}function u(ee,ae){try{!function A(ee){ee.value instanceof h0?Promise.resolve(ee.value.v).then(S,y):R(c[0][2],ee)}(i[ee](ae))}catch(te){R(c[0][3],te)}}function S(ee){u("next",ee)}function y(ee){u("throw",ee)}function R(ee,ae){ee(ae),c.shift(),c.length&&u(c[0][0],c[0][1])}}(this,arguments,function*(){const i=t.getReader();try{for(;;){const{done:s,value:c}=yield h0(i.read());if(s)break;yield yield h0(c)}}finally{i.releaseLock()}})}static consumeToArrayBuffer({readableStream:t}){return l0(this,void 0,void 0,function*(){const r=Co.asAsyncIterator(t);return yield Dt.asyncIterable(r).toArrayBufferAsync()})}static consumeToBlob({readableStream:t}){return l0(this,void 0,void 0,function*(){const r=Co.asAsyncIterator(t);return yield Dt.asyncIterable(r).toBlobAsync()})}static consumeToBytes({readableStream:t}){return l0(this,void 0,void 0,function*(){const r=Co.asAsyncIterator(t);return yield Dt.asyncIterable(r).toUint8ArrayAsync()})}static consumeToJson({readableStream:t}){return l0(this,void 0,void 0,function*(){const r=Co.asAsyncIterator(t);return yield Dt.asyncIterable(r).toObjectAsync()})}static consumeToText({readableStream:t}){return l0(this,void 0,void 0,function*(){const r=Co.asAsyncIterator(t);return yield Dt.asyncIterable(r).toStringAsync()})}static generateByteStream({streamLength:t,chunkLength:r,fillValue:i}){let c,s=t??1/0;function o(){const u=Math.min(s,r??1/0);let A;if(s-=u,"number"==typeof i)A=new Uint8Array(u).fill(i);else if(Array.isArray(i)){A=new Uint8Array(u);const[S,y]=i,R=y-S+1;for(let ee=0;ee<u;ee++)A[ee]=Math.floor(Math.random()*R)+S}else A=new Uint8Array(u);c.enqueue(A),s<=0&&c.close()}return new ReadableStream({start(u){c=u,o()},pull(){o()}})}static isReadable({readableStream:t}){if(!Co.isReadableStream(t)||t.locked)return!1;try{return t.getReader().releaseLock(),!0}catch{return!1}}static isReadableStream(t){return"object"==typeof t&&null!==t&&"getReader"in t&&"function"==typeof t.getReader}static isStream(t){return Co.isReadableStream(t)||Co.isWritableStream(t)||Co.isTransformStream(t)}static isTransformStream(t){return"object"==typeof t&&null!==t&&"readable"in t&&"object"==typeof t.readable&&"writable"in t&&"object"==typeof t.writable}static isWritableStream(t){return"object"==typeof t&&null!==t&&"getWriter"in t&&"function"==typeof t.getWriter&&"abort"in t&&"function"==typeof t.abort}}var nN=I(95424),p0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Os{static consumeToArrayBuffer({readable:t}){return p0(this,void 0,void 0,function*(){return yield Dt.asyncIterable(t).toArrayBufferAsync()})}static consumeToBlob({readable:t}){return p0(this,void 0,void 0,function*(){return yield Dt.asyncIterable(t).toBlobAsync()})}static consumeToBytes({readable:t}){return p0(this,void 0,void 0,function*(){return yield Dt.asyncIterable(t).toUint8ArrayAsync()})}static consumeToJson({readable:t}){return p0(this,void 0,void 0,function*(){return yield Dt.asyncIterable(t).toObjectAsync()})}static consumeToText({readable:t}){return p0(this,void 0,void 0,function*(){return yield Dt.asyncIterable(t).toStringAsync()})}static fromWebReadable({readableStream:t,readableOptions:r}){if(!Co.isReadableStream(t))throw new TypeError("NodeStream.fromWebReadable: 'readableStream' is not a Web ReadableStream.");const i=t.getReader();let s=!1;const c=new nN.Readable(Object.assign(Object.assign({},r),{read:function(){i.read().then(({done:o,value:u})=>{if(o)this.push(null);else if(!this.push(u))return}).catch(o=>{this.destroy(o)})},destroy:function(o,u){function A(){u(o)}s?A():i.cancel(o).then(A).catch(A)}}));return i.closed.then(()=>{s=!0}).catch(o=>{s=!0,c.destroy(o)}),c}static isDestroyed({stream:t}){if(!Os.isStream(t))throw new TypeError("NodeStream.isDestroyed: 'stream' is not a Node stream.");return!(!t.destroyed&&!(("_writableState"in t?t._writableState:void 0)||t._readableState).destroyed)}static isReadable({readable:t}){return!!Os.isReadableStream(t)&&t.readable&&"boolean"==typeof t._readableState.ended&&!t._readableState.ended&&"boolean"==typeof t._readableState.endEmitted&&!t._readableState.endEmitted&&!t.destroyed&&!t.isPaused()}static isReadableStream(t){return"object"==typeof t&&null!==t&&"pipe"in t&&"function"==typeof t.pipe&&"on"in t&&"function"==typeof t.on&&!("_writableState"in t)&&"_readableState"in t}static isStream(t){return"object"==typeof t&&null!==t&&("_readableState"in t||"_writableState"in t)}static toWebReadable({readable:t}){if(!Os.isReadableStream(t))throw new TypeError("NodeStream.toWebReadable: 'readable' is not a Node Readable stream.");if(Os.isDestroyed({stream:t})){const r=new ReadableStream;return r.cancel(),r}return new ReadableStream({start(r){t.on("data",i=>{r.enqueue(i)}),t.on("end",()=>{r.close()}),t.on("error",i=>{r.error(i)})},cancel(){t.destroy()}})}}class _E{static digest({data:t}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){return Ic(t)})}}class hc{}class lb extends hc{digest({algorithm:t,data:r}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){if("SHA-256"===t)return yield _E.digest({data:r})})}}const gm=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vm=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xE=BigInt(1),wm=BigInt(2),EE=(n,t)=>(n+t/wm)/t;const hb=hv(gm,void 0,void 0,{sqrt:function SE(n){const t=gm,r=BigInt(3),i=BigInt(6),s=BigInt(11),c=BigInt(22),o=BigInt(23),u=BigInt(44),A=BigInt(88),S=n*n*n%t,y=S*S*n%t,R=mi(y,r,t)*y%t,ee=mi(R,r,t)*y%t,ae=mi(ee,wm,t)*S%t,te=mi(ae,s,t)*ae%t,fe=mi(te,c,t)*te%t,we=mi(fe,u,t)*fe%t,Pe=mi(we,A,t)*we%t,Te=mi(Pe,u,t)*fe%t,Ae=mi(Te,r,t)*y%t,Ce=mi(Ae,o,t)*te%t,je=mi(Ce,i,t)*S%t,Le=mi(je,wm,t);if(!hb.eql(hb.sqr(Le),n))throw new Error("Cannot find square root");return Le}}),go=T3({a:BigInt(0),b:BigInt(7),Fp:hb,n:vm,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=vm,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-xE*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=r,o=BigInt("0x100000000000000000000000000000000"),u=EE(c*n,t),A=EE(-i*n,t);let S=Jn(n-u*r-A*s,t),y=Jn(-u*i-A*c,t);const R=S>o,ee=y>o;if(R&&(S=t-S),ee&&(y=t-y),S>o||y>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:R,k1:S,k2neg:ee,k2:y}}}},Ic);BigInt(0);const _m="urn:jwk:";function tn({jwk:n}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){const t=n.kty;let r;if("EC"===t)r={crv:n.crv,kty:n.kty,x:n.x,y:n.y};else if("oct"===t)r={k:n.k,kty:n.kty};else if("OKP"===t)r={crv:n.crv,kty:n.kty,x:n.x};else{if("RSA"!==t)throw new Error(`Unsupported key type: ${t}`);r={e:n.e,kty:n.kty,n:n.n}}mm(r);const i=function uN(n){const t=i=>{if(null!==i&&"object"==typeof i&&!Array.isArray(i)){const s=Object.keys(i).sort(),c={};for(const o of s)c[o]=t(i[o]);return c}return i},r=t(n);return JSON.stringify(r)}(r),s=Dt.string(i).toUint8Array(),c=yield _E.digest({data:s});return Dt.uint8Array(c).toBase64Url()})}function pc(n){return!(!n||"object"!=typeof n||!("kty"in n&&"crv"in n&&"x"in n&&"d"in n)||"EC"!==n.kty||"string"!=typeof n.d||"string"!=typeof n.x)}function xm(n){return!(!n||"object"!=typeof n||!("kty"in n&&"crv"in n&&"x"in n)||"d"in n||"EC"!==n.kty||"string"!=typeof n.x)}function PE(n){return!(!n||"object"!=typeof n||!("kty"in n)||!("k"in n)||"oct"!==n.kty||"string"!=typeof n.k)}function yc(n){return!(!n||"object"!=typeof n||!("kty"in n&&"crv"in n&&"x"in n&&"d"in n)||"OKP"!==n.kty||"string"!=typeof n.d||"string"!=typeof n.x)}function Em(n){return!(!n||"object"!=typeof n||"d"in n||!("kty"in n&&"crv"in n&&"x"in n)||"OKP"!==n.kty||"string"!=typeof n.x)}function wb(n){if(!n||"object"!=typeof n)return!1;switch(n.kty){case"EC":case"OKP":case"RSA":return"d"in n;case"oct":return"k"in n;default:return!1}}var Cs=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Pn{static adjustSignatureToLowS({signature:t}){return Cs(this,void 0,void 0,function*(){const r=go.Signature.fromCompact(t);return r.hasHighS()?r.normalizeS().toCompactRawBytes():t})}static bytesToPrivateKey({privateKeyBytes:t}){return Cs(this,void 0,void 0,function*(){const r=yield Pn.getCurvePoint({keyBytes:t}),i={kty:"EC",crv:"secp256k1",d:Dt.uint8Array(t).toBase64Url(),x:Dt.uint8Array(r.x).toBase64Url(),y:Dt.uint8Array(r.y).toBase64Url()};return i.kid=yield tn({jwk:i}),i})}static bytesToPublicKey({publicKeyBytes:t}){return Cs(this,void 0,void 0,function*(){const r=yield Pn.getCurvePoint({keyBytes:t}),i={kty:"EC",crv:"secp256k1",x:Dt.uint8Array(r.x).toBase64Url(),y:Dt.uint8Array(r.y).toBase64Url()};return i.kid=yield tn({jwk:i}),i})}static compressPublicKey({publicKeyBytes:t}){return Cs(this,void 0,void 0,function*(){return go.ProjectivePoint.fromHex(t).toRawBytes(!0)})}static computePublicKey({key:t}){return Cs(this,void 0,void 0,function*(){const r=yield Pn.privateKeyToBytes({privateKey:t}),i=yield Pn.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:Dt.uint8Array(i.x).toBase64Url(),y:Dt.uint8Array(i.y).toBase64Url()};return s.kid=yield tn({jwk:s}),s})}static convertDerToCompactSignature({derSignature:t}){return Cs(this,void 0,void 0,function*(){return go.Signature.fromDER(t).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:t}){return Cs(this,void 0,void 0,function*(){return go.ProjectivePoint.fromHex(t).toRawBytes(!1)})}static generateKey(){return Cs(this,void 0,void 0,function*(){const t=go.utils.randomPrivateKey(),r=yield Pn.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield tn({jwk:r}),r})}static getPublicKey({key:t}){var r;return Cs(this,void 0,void 0,function*(){if(!pc(t)||"secp256k1"!==t.crv)throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let s=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["d"]);return null!==(r=s.kid)&&void 0!==r||(s.kid=yield tn({jwk:s})),s})}static privateKeyToBytes({privateKey:t}){return Cs(this,void 0,void 0,function*(){if(!pc(t))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return Dt.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return Cs(this,void 0,void 0,function*(){if(!xm(t)||!t.y)throw new Error("Secp256k1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),i=Dt.base64Url(t.x).toUint8Array(),s=Dt.base64Url(t.y).toUint8Array();return new Uint8Array([...r,...i,...s])})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return Cs(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const i=yield Pn.privateKeyToBytes({privateKey:t}),s=yield Pn.publicKeyToBytes({publicKey:r});return go.getSharedSecret(i,s,!0).slice(1)})}static sign({data:t,key:r}){return Cs(this,void 0,void 0,function*(){const i=yield Pn.privateKeyToBytes({privateKey:r}),s=Ic(t);return go.sign(s,i).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:t}){return Cs(this,void 0,void 0,function*(){return go.utils.isValidPrivateKey(t)})}static validatePublicKey({publicKeyBytes:t}){return Cs(this,void 0,void 0,function*(){try{go.ProjectivePoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:i}){return Cs(this,void 0,void 0,function*(){const s=yield Pn.publicKeyToBytes({publicKey:t}),c=Ic(i);return go.verify(r,c,s,{lowS:!1})})}static getCurvePoint({keyBytes:t}){return Cs(this,void 0,void 0,function*(){32===t.byteLength&&(t=go.getPublicKey(t));const r=go.ProjectivePoint.fromHex(t);return{x:Ga(r.x,32),y:Ga(r.y,32)}})}}var Ds=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Cn{static adjustSignatureToLowS({signature:t}){return Ds(this,void 0,void 0,function*(){const r=So.Signature.fromCompact(t);return r.hasHighS()?r.normalizeS().toCompactRawBytes():t})}static bytesToPrivateKey({privateKeyBytes:t}){return Ds(this,void 0,void 0,function*(){const r=yield Cn.getCurvePoint({keyBytes:t}),i={kty:"EC",crv:"P-256",d:Dt.uint8Array(t).toBase64Url(),x:Dt.uint8Array(r.x).toBase64Url(),y:Dt.uint8Array(r.y).toBase64Url()};return i.kid=yield tn({jwk:i}),i})}static bytesToPublicKey({publicKeyBytes:t}){return Ds(this,void 0,void 0,function*(){const r=yield Cn.getCurvePoint({keyBytes:t}),i={kty:"EC",crv:"P-256",x:Dt.uint8Array(r.x).toBase64Url(),y:Dt.uint8Array(r.y).toBase64Url()};return i.kid=yield tn({jwk:i}),i})}static compressPublicKey({publicKeyBytes:t}){return Ds(this,void 0,void 0,function*(){return So.ProjectivePoint.fromHex(t).toRawBytes(!0)})}static computePublicKey({key:t}){return Ds(this,void 0,void 0,function*(){const r=yield Cn.privateKeyToBytes({privateKey:t}),i=yield Cn.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:Dt.uint8Array(i.x).toBase64Url(),y:Dt.uint8Array(i.y).toBase64Url()};return s.kid=yield tn({jwk:s}),s})}static convertDerToCompactSignature({derSignature:t}){return Ds(this,void 0,void 0,function*(){return So.Signature.fromDER(t).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:t}){return Ds(this,void 0,void 0,function*(){return So.ProjectivePoint.fromHex(t).toRawBytes(!1)})}static generateKey(){return Ds(this,void 0,void 0,function*(){const t=So.utils.randomPrivateKey(),r=yield Cn.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield tn({jwk:r}),r})}static getPublicKey({key:t}){var r;return Ds(this,void 0,void 0,function*(){if(!pc(t)||"P-256"!==t.crv)throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let s=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["d"]);return null!==(r=s.kid)&&void 0!==r||(s.kid=yield tn({jwk:s})),s})}static privateKeyToBytes({privateKey:t}){return Ds(this,void 0,void 0,function*(){if(!pc(t))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return Dt.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return Ds(this,void 0,void 0,function*(){if(!xm(t)||!t.y)throw new Error("Secp256r1: The provided key is not a valid EC public key.");const r=new Uint8Array([4]),i=Dt.base64Url(t.x).toUint8Array(),s=Dt.base64Url(t.y).toUint8Array();return new Uint8Array([...r,...i,...s])})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return Ds(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const i=yield Cn.privateKeyToBytes({privateKey:t}),s=yield Cn.publicKeyToBytes({publicKey:r});return So.getSharedSecret(i,s,!0).slice(1)})}static sign({data:t,key:r}){return Ds(this,void 0,void 0,function*(){const i=yield Cn.privateKeyToBytes({privateKey:r}),s=Ic(t);return So.sign(s,i).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:t}){return Ds(this,void 0,void 0,function*(){return So.utils.isValidPrivateKey(t)})}static validatePublicKey({publicKeyBytes:t}){return Ds(this,void 0,void 0,function*(){try{So.ProjectivePoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:i}){return Ds(this,void 0,void 0,function*(){const s=yield Cn.publicKeyToBytes({publicKey:t}),c=Ic(i);return So.verify(r,c,s,{lowS:!1})})}static getCurvePoint({keyBytes:t}){return Ds(this,void 0,void 0,function*(){32===t.byteLength&&(t=So.getPublicKey(t));const r=So.ProjectivePoint.fromHex(t);return{x:Ga(r.x,32),y:Ga(r.y,32)}})}}var m0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Sm extends hc{computePublicKey({key:t}){return m0(this,void 0,void 0,function*(){if(!pc(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":{const r=yield Pn.computePublicKey({key:t});return r.alg="ES256K",r}case"P-256":{const r=yield Cn.computePublicKey({key:t});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}generateKey({algorithm:t}){return m0(this,void 0,void 0,function*(){switch(t){case"ES256K":case"secp256k1":{const r=yield Pn.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{const r=yield Cn.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:t}){return m0(this,void 0,void 0,function*(){if(!pc(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":{const r=yield Pn.getPublicKey({key:t});return r.alg="ES256K",r}case"P-256":{const r=yield Cn.getPublicKey({key:t});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}sign({key:t,data:r}){return m0(this,void 0,void 0,function*(){if(!pc(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":return yield Pn.sign({key:t,data:r});case"P-256":return yield Cn.sign({key:t,data:r});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}verify({key:t,signature:r,data:i}){return m0(this,void 0,void 0,function*(){if(!xm(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(t.crv){case"secp256k1":return yield Pn.verify({key:t,signature:r,data:i});case"P-256":return yield Cn.verify({key:t,signature:r,data:i});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}}const Am=BigInt(2**32-1),bb=BigInt(32);function BE(n,t=!1){return t?{h:Number(n&Am),l:Number(n>>bb&Am)}:{h:0|Number(n>>bb&Am),l:0|Number(n&Am)}}const rn_split=function pN(n,t=!1){let r=new Uint32Array(n.length),i=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:c,l:o}=BE(n[s],t);[r[s],i[s]]=[c,o]}return[r,i]},rn_shrSH=(n,t,r)=>n>>>r,rn_shrSL=(n,t,r)=>n<<32-r|t>>>r,rn_rotrSH=(n,t,r)=>n>>>r|t<<32-r,rn_rotrSL=(n,t,r)=>n<<32-r|t>>>r,rn_rotrBH=(n,t,r)=>n<<64-r|t>>>r-32,rn_rotrBL=(n,t,r)=>n>>>r-32|t<<64-r,rn_add=function IN(n,t,r,i){const s=(t>>>0)+(i>>>0);return{h:n+r+(s/2**32|0)|0,l:0|s}},rn_add3L=(n,t,r)=>(n>>>0)+(t>>>0)+(r>>>0),rn_add3H=(n,t,r,i)=>t+r+i+(n/2**32|0)|0,rn_add4L=(n,t,r,i)=>(n>>>0)+(t>>>0)+(r>>>0)+(i>>>0),rn_add4H=(n,t,r,i,s)=>t+r+i+s+(n/2**32|0)|0,rn_add5H=(n,t,r,i,s,c)=>t+r+i+s+c+(n/2**32|0)|0,rn_add5L=(n,t,r,i,s)=>(n>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(s>>>0),[PN,BN]=rn_split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Ld=new Uint32Array(80),Fd=new Uint32Array(80);class Mm extends mv{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:i,Bl:s,Ch:c,Cl:o,Dh:u,Dl:A,Eh:S,El:y,Fh:R,Fl:ee,Gh:ae,Gl:te,Hh:fe,Hl:we}=this;return[t,r,i,s,c,o,u,A,S,y,R,ee,ae,te,fe,we]}set(t,r,i,s,c,o,u,A,S,y,R,ee,ae,te,fe,we){this.Ah=0|t,this.Al=0|r,this.Bh=0|i,this.Bl=0|s,this.Ch=0|c,this.Cl=0|o,this.Dh=0|u,this.Dl=0|A,this.Eh=0|S,this.El=0|y,this.Fh=0|R,this.Fl=0|ee,this.Gh=0|ae,this.Gl=0|te,this.Hh=0|fe,this.Hl=0|we}process(t,r){for(let Ae=0;Ae<16;Ae++,r+=4)Ld[Ae]=t.getUint32(r),Fd[Ae]=t.getUint32(r+=4);for(let Ae=16;Ae<80;Ae++){const Ce=0|Ld[Ae-15],je=0|Fd[Ae-15],Le=rn_rotrSH(Ce,je,1)^rn_rotrSH(Ce,je,8)^rn_shrSH(Ce,je,7),ze=rn_rotrSL(Ce,je,1)^rn_rotrSL(Ce,je,8)^rn_shrSL(Ce,je,7),$e=0|Ld[Ae-2],Ye=0|Fd[Ae-2],ut=rn_rotrSH($e,Ye,19)^rn_rotrBH($e,Ye,61)^rn_shrSH($e,Ye,6),ct=rn_rotrSL($e,Ye,19)^rn_rotrBL($e,Ye,61)^rn_shrSL($e,Ye,6),vt=rn_add4L(ze,ct,Fd[Ae-7],Fd[Ae-16]),at=rn_add4H(vt,Le,ut,Ld[Ae-7],Ld[Ae-16]);Ld[Ae]=0|at,Fd[Ae]=0|vt}let{Ah:i,Al:s,Bh:c,Bl:o,Ch:u,Cl:A,Dh:S,Dl:y,Eh:R,El:ee,Fh:ae,Fl:te,Gh:fe,Gl:we,Hh:Pe,Hl:Te}=this;for(let Ae=0;Ae<80;Ae++){const Ce=rn_rotrSH(R,ee,14)^rn_rotrSH(R,ee,18)^rn_rotrBH(R,ee,41),je=rn_rotrSL(R,ee,14)^rn_rotrSL(R,ee,18)^rn_rotrBL(R,ee,41),Le=R&ae^~R&fe,$e=rn_add5L(Te,je,ee&te^~ee&we,BN[Ae],Fd[Ae]),Ye=rn_add5H($e,Pe,Ce,Le,PN[Ae],Ld[Ae]),ut=0|$e,ct=rn_rotrSH(i,s,28)^rn_rotrBH(i,s,34)^rn_rotrBH(i,s,39),vt=rn_rotrSL(i,s,28)^rn_rotrBL(i,s,34)^rn_rotrBL(i,s,39),at=i&c^i&u^c&u,ft=s&o^s&A^o&A;Pe=0|fe,Te=0|we,fe=0|ae,we=0|te,ae=0|R,te=0|ee,({h:R,l:ee}=rn_add(0|S,0|y,0|Ye,0|ut)),S=0|u,y=0|A,u=0|c,A=0|o,c=0|i,o=0|s;const tt=rn_add3L(ut,vt,ft);i=rn_add3H(tt,Ye,ct,at),s=0|tt}({h:i,l:s}=rn_add(0|this.Ah,0|this.Al,0|i,0|s)),({h:c,l:o}=rn_add(0|this.Bh,0|this.Bl,0|c,0|o)),({h:u,l:A}=rn_add(0|this.Ch,0|this.Cl,0|u,0|A)),({h:S,l:y}=rn_add(0|this.Dh,0|this.Dl,0|S,0|y)),({h:R,l:ee}=rn_add(0|this.Eh,0|this.El,0|R,0|ee)),({h:ae,l:te}=rn_add(0|this.Fh,0|this.Fl,0|ae,0|te)),({h:fe,l:we}=rn_add(0|this.Gh,0|this.Gl,0|fe,0|we)),({h:Pe,l:Te}=rn_add(0|this.Hh,0|this.Hl,0|Pe,0|Te)),this.set(i,s,c,o,u,A,S,y,R,ee,ae,te,fe,we,Pe,Te)}roundClean(){Ld.fill(0),Fd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const g0=cv(()=>new Mm),ka=BigInt(0),Do=BigInt(1),Tm=BigInt(2),RN=BigInt(8),kN={zip215:!0};function _b(n){const t=function ON(n){const t=yv(n);return mu(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(n),{Fp:r,n:i,prehash:s,hash:c,randomBytes:o,nByteLength:u,h:A}=t,S=Tm<<BigInt(8*u)-Do,y=r.create,R=t.uvRatio||((lt,ot)=>{try{return{isValid:!0,value:r.sqrt(lt*r.inv(ot))}}catch{return{isValid:!1,value:ka}}}),ee=t.adjustScalarBytes||(lt=>lt),ae=t.domain||((lt,ot,yt)=>{if(ot.length||yt)throw new Error("Contexts/pre-hash are not supported");return lt}),te=lt=>"bigint"==typeof lt&&ka<lt,fe=(lt,ot)=>te(lt)&&te(ot)&&lt<ot,we=lt=>lt===ka||fe(lt,S);function Pe(lt,ot){if(fe(lt,ot))return lt;throw new Error(`Expected valid scalar < ${ot}, got ${typeof lt} ${lt}`)}function Te(lt){return lt===ka?lt:Pe(lt,i)}const Ae=new Map;function Ce(lt){if(!(lt instanceof je))throw new Error("ExtendedPoint expected")}class je{constructor(ot,yt,kt,Nt){if(this.ex=ot,this.ey=yt,this.ez=kt,this.et=Nt,!we(ot))throw new Error("x required");if(!we(yt))throw new Error("y required");if(!we(kt))throw new Error("z required");if(!we(Nt))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(ot){if(ot instanceof je)throw new Error("extended point not allowed");const{x:yt,y:kt}=ot||{};if(!we(yt)||!we(kt))throw new Error("invalid affine point");return new je(yt,kt,Do,y(yt*kt))}static normalizeZ(ot){const yt=r.invertBatch(ot.map(kt=>kt.ez));return ot.map((kt,Nt)=>kt.toAffine(yt[Nt])).map(je.fromAffine)}_setWindowSize(ot){this._WINDOW_SIZE=ot,Ae.delete(this)}assertValidity(){const{a:ot,d:yt}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:kt,ey:Nt,ez:Qe,et:Ut}=this,Gt=y(kt*kt),Bt=y(Nt*Nt),ht=y(Qe*Qe),Ct=y(ht*ht),Kt=y(Gt*ot);if(y(ht*y(Kt+Bt))!==y(Ct+y(yt*y(Gt*Bt))))throw new Error("bad point: equation left != right (1)");if(y(kt*Nt)!==y(Qe*Ut))throw new Error("bad point: equation left != right (2)")}equals(ot){Ce(ot);const{ex:yt,ey:kt,ez:Nt}=this,{ex:Qe,ey:Ut,ez:Gt}=ot,Bt=y(yt*Gt),ht=y(Qe*Nt),Ct=y(kt*Gt),Kt=y(Ut*Nt);return Bt===ht&&Ct===Kt}is0(){return this.equals(je.ZERO)}negate(){return new je(y(-this.ex),this.ey,this.ez,y(-this.et))}double(){const{a:ot}=t,{ex:yt,ey:kt,ez:Nt}=this,Qe=y(yt*yt),Ut=y(kt*kt),Gt=y(Tm*y(Nt*Nt)),Bt=y(ot*Qe),ht=yt+kt,Ct=y(y(ht*ht)-Qe-Ut),Kt=Bt+Ut,er=Kt-Gt,tr=Bt-Ut,Wt=y(Ct*er),Jt=y(Kt*tr),Hn=y(Ct*tr),co=y(er*Kt);return new je(Wt,Jt,co,Hn)}add(ot){Ce(ot);const{a:yt,d:kt}=t,{ex:Nt,ey:Qe,ez:Ut,et:Gt}=this,{ex:Bt,ey:ht,ez:Ct,et:Kt}=ot;if(yt===BigInt(-1)){const cn=y((Qe-Nt)*(ht+Bt)),dn=y((Qe+Nt)*(ht-Bt)),Kn=y(dn-cn);if(Kn===ka)return this.double();const wn=y(Ut*Tm*Kt),vr=y(Gt*Tm*Ct),bn=vr+wn,fs=dn+cn,Ai=vr-wn,Ni=y(bn*Kn),GF=y(fs*Ai),df=y(bn*Ai),qF=y(Kn*fs);return new je(Ni,GF,qF,df)}const er=y(Nt*Bt),tr=y(Qe*ht),Wt=y(Gt*kt*Kt),Jt=y(Ut*Ct),Hn=y((Nt+Qe)*(Bt+ht)-er-tr),co=Jt-Wt,jt=Jt+Wt,br=y(tr-yt*er),Er=y(Hn*co),fr=y(jt*br),Rn=y(Hn*br),us=y(co*jt);return new je(Er,fr,us,Rn)}subtract(ot){return this.add(ot.negate())}wNAF(ot){return $e.wNAFCached(this,Ae,ot,je.normalizeZ)}multiply(ot){const{p:yt,f:kt}=this.wNAF(Pe(ot,i));return je.normalizeZ([yt,kt])[0]}multiplyUnsafe(ot){let yt=Te(ot);return yt===ka?ze:this.equals(ze)||yt===Do?this:this.equals(Le)?this.wNAF(yt).p:$e.unsafeLadder(this,yt)}isSmallOrder(){return this.multiplyUnsafe(A).is0()}isTorsionFree(){return $e.unsafeLadder(this,i).is0()}toAffine(ot){const{ex:yt,ey:kt,ez:Nt}=this,Qe=this.is0();null==ot&&(ot=Qe?RN:r.inv(Nt));const Ut=y(yt*ot),Gt=y(kt*ot),Bt=y(Nt*ot);if(Qe)return{x:ka,y:Do};if(Bt!==Do)throw new Error("invZ was invalid");return{x:Ut,y:Gt}}clearCofactor(){const{h:ot}=t;return ot===Do?this:this.multiplyUnsafe(ot)}static fromHex(ot,yt=!1){const{d:kt,a:Nt}=t,Qe=r.BYTES,Ut=(ot=Mi("pointHex",ot,Qe)).slice(),Gt=ot[Qe-1];Ut[Qe-1]=-129&Gt;const Bt=fd(Ut);Bt===ka||Pe(Bt,yt?S:r.ORDER);const ht=y(Bt*Bt),Ct=y(ht-Do),Kt=y(kt*ht-Nt);let{isValid:er,value:tr}=R(Ct,Kt);if(!er)throw new Error("Point.fromHex: invalid y coordinate");const Wt=(tr&Do)===Do,Jt=!!(128&Gt);if(!yt&&tr===ka&&Jt)throw new Error("Point.fromHex: x=0 and x_0=1");return Jt!==Wt&&(tr=y(-tr)),je.fromAffine({x:tr,y:Bt})}static fromPrivateKey(ot){return ct(ot).point}toRawBytes(){const{x:ot,y:yt}=this.toAffine(),kt=gf(yt,r.BYTES);return kt[kt.length-1]|=ot&Do?128:0,kt}toHex(){return hu(this.toRawBytes())}}je.BASE=new je(t.Gx,t.Gy,Do,y(t.Gx*t.Gy)),je.ZERO=new je(ka,Do,Do,ka);const{BASE:Le,ZERO:ze}=je,$e=A3(je,8*u);function Ye(lt){return Jn(lt,i)}function ut(lt){return Ye(fd(lt))}function ct(lt){const ot=u;lt=Mi("private key",lt,ot);const yt=Mi("hashed private key",c(lt),2*ot),kt=ee(yt.slice(0,ot)),Nt=yt.slice(ot,2*ot),Qe=ut(kt),Ut=Le.multiply(Qe),Gt=Ut.toRawBytes();return{head:kt,prefix:Nt,scalar:Qe,point:Ut,pointBytes:Gt}}function at(lt=new Uint8Array,...ot){const yt=yu(...ot);return ut(c(ae(yt,Mi("context",lt),!!s)))}const tt=kN;return Le._setWindowSize(8),{CURVE:t,getPublicKey:function vt(lt){return ct(lt).pointBytes},sign:function ft(lt,ot,yt={}){lt=Mi("message",lt),s&&(lt=s(lt));const{prefix:kt,scalar:Nt,pointBytes:Qe}=ct(ot),Ut=at(yt.context,kt,lt),Gt=Le.multiply(Ut).toRawBytes(),ht=Ye(Ut+at(yt.context,Gt,Qe,lt)*Nt);return Te(ht),Mi("result",yu(Gt,gf(ht,r.BYTES)),2*u)},verify:function st(lt,ot,yt,kt=tt){const{context:Nt,zip215:Qe}=kt,Ut=r.BYTES;lt=Mi("signature",lt,2*Ut),ot=Mi("message",ot),s&&(ot=s(ot));const Gt=fd(lt.slice(Ut,2*Ut));let Bt,ht,Ct;try{Bt=je.fromHex(yt,Qe),ht=je.fromHex(lt.slice(0,Ut),Qe),Ct=Le.multiplyUnsafe(Gt)}catch{return!1}if(!Qe&&Bt.isSmallOrder())return!1;const Kt=at(Nt,ht.toRawBytes(),Bt.toRawBytes(),ot);return ht.add(Bt.multiplyUnsafe(Kt)).subtract(Ct).clearCofactor().equals(je.ZERO)},ExtendedPoint:je,utils:{getExtendedPublicKey:ct,randomPrivateKey:()=>o(r.BYTES),precompute:(lt=8,ot=je.BASE)=>(ot._setWindowSize(lt),ot.multiply(BigInt(3)),ot)}}}const v0=BigInt(0),xb=BigInt(1),w0=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),RE=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),mc=(BigInt(0),BigInt(1)),Im=BigInt(2),$N=BigInt(5),kE=BigInt(10),jN=BigInt(20),UN=BigInt(40),OE=BigInt(80);function CE(n){const t=w0,i=n*n%t*n%t,s=mi(i,Im,t)*i%t,c=mi(s,mc,t)*n%t,o=mi(c,$N,t)*c%t,u=mi(o,kE,t)*o%t,A=mi(u,jN,t)*u%t,S=mi(A,UN,t)*A%t,y=mi(S,OE,t)*S%t,R=mi(y,OE,t)*S%t,ee=mi(R,kE,t)*o%t;return{pow_p_5_8:mi(ee,Im,t)*n%t,b2:i}}function DE(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const ir=hv(w0,void 0,!0),b0={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ir,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:g0,randomBytes:Wl,adjustScalarBytes:DE,uvRatio:function Eb(n,t){const r=w0,i=Jn(t*t*t,r),s=Jn(i*i*t,r);let o=Jn(n*i*CE(n*s).pow_p_5_8,r);const u=Jn(t*o*o,r),A=o,S=Jn(o*RE,r),y=u===n,R=u===Jn(-n,r),ee=u===Jn(-n*RE,r);return y&&(o=A),(R||ee)&&(o=S),((n,t)=>(Jn(n,t)&Zn)===Zn)(o,r)&&(o=Jn(-o,r)),{isValid:y||R,value:o}}},wi=_b(b0);const _0=function DN(n){const t=function CN(n){return mu(n,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...n})}(n),{P:r}=t,i=Ae=>Jn(Ae,r),s=t.montgomeryBits,c=Math.ceil(s/8),o=t.nByteLength,u=t.adjustScalarBytes||(Ae=>Ae),A=t.powPminus2||(Ae=>x3(Ae,r-BigInt(2),r));function S(Ae,Ce,je){const Le=i(Ae*(Ce-je));return[Ce=i(Ce-Le),je=i(je+Le)]}function y(Ae){if("bigint"==typeof Ae&&v0<=Ae&&Ae<r)return Ae;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const R=(t.a-BigInt(2))/BigInt(4);function ae(Ae){return gf(i(Ae),c)}function we(Ae,Ce){const je=function te(Ae){const Ce=Mi("u coordinate",Ae,c);return 32===o&&(Ce[31]&=127),fd(Ce)}(Ce),Le=function fe(Ae){const Ce=Mi("scalar",Ae),je=Ce.length;if(je!==c&&je!==o)throw new Error(`Expected ${c} or ${o} bytes, got ${je}`);return fd(u(Ce))}(Ae),ze=function ee(Ae,Ce){const je=y(Ae),Le=y(Ce),ze=je;let at,$e=xb,Ye=v0,ut=je,ct=xb,vt=v0;for(let tt=BigInt(s-1);tt>=v0;tt--){const st=Le>>tt&xb;vt^=st,at=S(vt,$e,ut),$e=at[0],ut=at[1],at=S(vt,Ye,ct),Ye=at[0],ct=at[1],vt=st;const Je=$e+Ye,lt=i(Je*Je),ot=$e-Ye,yt=i(ot*ot),kt=lt-yt,Nt=ut+ct,Ut=i((ut-ct)*Je),Gt=i(Nt*ot),Bt=Ut+Gt,ht=Ut-Gt;ut=i(Bt*Bt),ct=i(ze*i(ht*ht)),$e=i(lt*yt),Ye=i(kt*(lt+i(R*kt)))}at=S(vt,$e,ut),$e=at[0],ut=at[1],at=S(vt,Ye,ct),Ye=at[0],ct=at[1];const ft=A(Ye);return i($e*ft)}(je,Le);if(ze===v0)throw new Error("Invalid private or public key received");return ae(ze)}const Pe=ae(t.Gu);function Te(Ae){return we(Ae,Pe)}return{scalarMult:we,scalarMultBase:Te,getSharedSecret:(Ae,Ce)=>we(Ae,Ce),getPublicKey:Ae=>Te(Ae),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:Pe}}({P:w0,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:n=>{const t=w0,{pow_p_5_8:r,b2:i}=CE(n);return Jn(mi(r,BigInt(3),t)*i,t)},adjustScalarBytes:DE,randomBytes:Wl}),KN=(ir.ORDER+BigInt(3))/BigInt(8);ir.pow(Im,KN),ir.sqrt(ir.neg(ir.ONE)),BigInt(5),BigInt(8),BigInt(486662),function xA(n,t){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const r=n.sqrt(t);n.isOdd(r)&&n.neg(r)}(ir,ir.neg(BigInt(486664))),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var sa=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Bn{static bytesToPrivateKey({privateKeyBytes:t}){return sa(this,void 0,void 0,function*(){const r=wi.getPublicKey(t),i={crv:"Ed25519",d:Dt.uint8Array(t).toBase64Url(),kty:"OKP",x:Dt.uint8Array(r).toBase64Url()};return i.kid=yield tn({jwk:i}),i})}static bytesToPublicKey({publicKeyBytes:t}){return sa(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"Ed25519",x:Dt.uint8Array(t).toBase64Url()};return r.kid=yield tn({jwk:r}),r})}static computePublicKey({key:t}){return sa(this,void 0,void 0,function*(){const r=yield Bn.privateKeyToBytes({privateKey:t}),i=wi.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:Dt.uint8Array(i).toBase64Url()};return s.kid=yield tn({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:t}){return sa(this,void 0,void 0,function*(){const i=function FN(n){const t=b0.hash(n.subarray(0,32));return b0.adjustScalarBytes(t).subarray(0,32)}(yield Bn.privateKeyToBytes({privateKey:t})),s=_0.getPublicKey(i),c={kty:"OKP",crv:"X25519",d:Dt.uint8Array(i).toBase64Url(),x:Dt.uint8Array(s).toBase64Url()};return c.kid=yield tn({jwk:c}),c})}static convertPublicKeyToX25519({publicKey:t}){return sa(this,void 0,void 0,function*(){const r=yield Bn.publicKeyToBytes({publicKey:t});if(!(yield Bn.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");const s=function LN(n){const{y:t}=wi.ExtendedPoint.fromHex(n),r=BigInt(1);return ir.toBytes(ir.create((r+t)*ir.inv(r-t)))}(r),c={kty:"OKP",crv:"X25519",x:Dt.uint8Array(s).toBase64Url()};return c.kid=yield tn({jwk:c}),c})}static generateKey(){return sa(this,void 0,void 0,function*(){const t=wi.utils.randomPrivateKey(),r=yield Bn.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield tn({jwk:r}),r})}static getPublicKey({key:t}){var r;return sa(this,void 0,void 0,function*(){if(!yc(t)||"Ed25519"!==t.crv)throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let s=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["d"]);return null!==(r=s.kid)&&void 0!==r||(s.kid=yield tn({jwk:s})),s})}static privateKeyToBytes({privateKey:t}){return sa(this,void 0,void 0,function*(){if(!yc(t))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return Dt.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return sa(this,void 0,void 0,function*(){if(!Em(t))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return Dt.base64Url(t.x).toUint8Array()})}static sign({key:t,data:r}){return sa(this,void 0,void 0,function*(){const i=yield Bn.privateKeyToBytes({privateKey:t});return wi.sign(r,i)})}static validatePublicKey({publicKeyBytes:t}){return sa(this,void 0,void 0,function*(){try{wi.ExtendedPoint.fromHex(t).assertValidity()}catch{return!1}return!0})}static verify({key:t,signature:r,data:i}){return sa(this,void 0,void 0,function*(){const s=yield Bn.publicKeyToBytes({publicKey:t});return wi.verify(r,i,s)})}}var x0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class FE extends hc{computePublicKey({key:t}){return x0(this,void 0,void 0,function*(){if(!yc(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");if("Ed25519"===t.crv){const r=yield Bn.computePublicKey({key:t});return r.alg="EdDSA",r}throw new Error(`Unsupported curve: ${t.crv}`)})}generateKey({algorithm:t}){return x0(this,void 0,void 0,function*(){if("Ed25519"===t){const r=yield Bn.generateKey();return r.alg="EdDSA",r}})}getPublicKey({key:t}){return x0(this,void 0,void 0,function*(){if(!yc(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");if("Ed25519"===t.crv){const r=yield Bn.getPublicKey({key:t});return r.alg="EdDSA",r}throw new Error(`Unsupported curve: ${t.crv}`)})}sign({key:t,data:r}){return x0(this,void 0,void 0,function*(){if(!yc(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");if("Ed25519"===t.crv)return yield Bn.sign({key:t,data:r});throw new Error(`Unsupported curve: ${t.crv}`)})}verify({key:t,signature:r,data:i}){return x0(this,void 0,void 0,function*(){if(!Em(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");if("Ed25519"===t.crv)return yield Bn.verify({key:t,signature:r,data:i});throw new Error(`Unsupported curve: ${t.crv}`)})}}var Gc=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};const Tb={Ed25519:{implementation:FE,names:["Ed25519"]},secp256k1:{implementation:Sm,names:["ES256K","secp256k1"]},secp256r1:{implementation:Sm,names:["ES256","secp256r1"]},"SHA-256":{implementation:lb,names:["SHA-256"]}};class vo{constructor(t){var r;this._algorithmInstances=new Map,this._keyStore=null!==(r=t?.keyStore)&&void 0!==r?r:new bE}digest({algorithm:t,data:r}){return Gc(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:t}).digest({algorithm:t,data:r})})}exportKey({keyUri:t}){return Gc(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:t})})}generateKey({algorithm:t}){return Gc(this,void 0,void 0,function*(){const i=yield this.getAlgorithm({algorithm:t}).generateKey({algorithm:t});if(void 0===i?.kid)throw new Error("Generated key is missing a required property: kid");const s=`${_m}${i.kid}`;return yield this._keyStore.set(s,i),s})}getKeyUri({key:t}){return Gc(this,void 0,void 0,function*(){const r=yield tn({jwk:t});return`${_m}${r}`})}getPublicKey({keyUri:t}){return Gc(this,void 0,void 0,function*(){const r=yield this.getPrivateKey({keyUri:t}),i=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:i}).getPublicKey({key:r})})}importKey({key:t}){var r;return Gc(this,void 0,void 0,function*(){if(!wb(t))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const i=structuredClone(t);null!==(r=i.kid)&&void 0!==r||(i.kid=yield tn({jwk:i}));const s=yield this.getKeyUri({key:i});return yield this._keyStore.set(s,i),s})}sign({keyUri:t,data:r}){return Gc(this,void 0,void 0,function*(){const i=yield this.getPrivateKey({keyUri:t}),s=this.getAlgorithmName({key:i});return this.getAlgorithm({algorithm:s}).sign({data:r,key:i})})}verify({key:t,signature:r,data:i}){return Gc(this,void 0,void 0,function*(){const s=this.getAlgorithmName({key:t});return this.getAlgorithm({algorithm:s}).verify({key:t,signature:r,data:i})})}getAlgorithm({algorithm:t}){var r;const i=null===(r=Tb[t])||void 0===r?void 0:r.implementation;if(!i)throw new Error(`Algorithm not supported: ${t}`);return this._algorithmInstances.has(i)||this._algorithmInstances.set(i,new i),this._algorithmInstances.get(i)}getAlgorithmName({key:t}){const r=t.alg,i=t.crv;for(const s in Tb){const c=Tb[s];if(r&&c.names.includes(r))return s;if(i&&c.names.includes(i))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${i}`)}getPrivateKey({keyUri:t}){return Gc(this,void 0,void 0,function*(){const r=yield this._keyStore.get(t);if(!r)throw new Error(`Key not found: ${t}`);return r})}}function KE(n){const t={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(n.alg&&Object.values(t).includes(n.alg))return n.alg;if(n.crv&&Object.keys(t).includes(n.crv))return t[n.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${n.alg}, crv=${n.crv}. Supported 'alg' values: ${Object.values(t).join(", ")}. Supported 'crv' values: ${Object.keys(t).join(", ")}.`)}function Ju(){return _p.randomUUID()}const Pm="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Kd=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4));function Bm(n){return n instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name}if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Pb(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function Bb(n){if("string"==typeof n)n=Pb(n);else{if(!Bm(n))throw new Error("expected Uint8Array, got "+typeof n);n=n.slice()}return n}function E0(n,t){if(!Bm(n))throw new Error("Uint8Array expected");if("number"==typeof t&&n.length!==t)throw new Error(`Uint8Array length ${t} expected`)}function Rm(n,t,r,i){if("function"==typeof n.setBigUint64)return n.setBigUint64(t,r,i);const s=BigInt(32),c=BigInt(4294967295),o=Number(r>>s&c),u=Number(r&c),S=i?0:4;n.setUint32(t+(i?4:0),o,i),n.setUint32(t+S,u,i)}function ll(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`wrong positive integer: ${n}`)}function Rb(n){if("boolean"!=typeof n)throw new Error(`boolean expected, not ${n}`)}function hl(n,...t){if(!function c$(n){return null!=n&&"object"==typeof n&&(n instanceof Uint8Array||"Uint8Array"===n.constructor.name)}(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}function kb(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function zd(){if(Pm&&"object"==typeof Pm.subtle&&null!=Pm.subtle)return Pm.subtle;throw new Error("crypto.subtle must be defined")}var A0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};const qE=[128,192,256],Dm=[96,104,112,120,128];class Vd{static bytesToPrivateKey({privateKeyBytes:t}){return A0(this,void 0,void 0,function*(){const r={k:Dt.uint8Array(t).toBase64Url(),kty:"oct"};return r.kid=yield tn({jwk:r}),r})}static decrypt({key:t,data:r,iv:i,additionalData:s,tagLength:c}){return A0(this,void 0,void 0,function*(){if(12!==i.byteLength)throw new TypeError("The initialization vector must be 96 bits in length");if(c&&!Dm.includes(c))throw new RangeError(`The tag length is invalid: Must be ${Dm.join(", ")} bits`);const o=zd(),u=yield o.importKey("jwk",t,{name:"AES-GCM"},!0,["decrypt"]),A=Object.assign(Object.assign({name:"AES-GCM",iv:i},c&&{tagLength:c}),s&&{additionalData:s}),S=yield o.decrypt(A,u,r);return new Uint8Array(S)})}static encrypt({data:t,iv:r,key:i,additionalData:s,tagLength:c}){return A0(this,void 0,void 0,function*(){if(12!==r.byteLength)throw new TypeError("The initialization vector must be 96 bits in length");if(c&&!Dm.includes(c))throw new RangeError(`The tag length is invalid: Must be ${Dm.join(", ")} bits`);const o=zd(),u=yield o.importKey("jwk",i,{name:"AES-GCM"},!0,["encrypt"]),A=Object.assign(Object.assign({name:"AES-GCM",iv:r},c&&{tagLength:c}),s&&{additionalData:s}),S=yield o.encrypt(A,u,t);return new Uint8Array(S)})}static generateKey({length:t}){return A0(this,void 0,void 0,function*(){if(!qE.includes(t))throw new RangeError(`The key length is invalid: Must be ${qE.join(", ")} bits`);const r=zd(),i=yield r.generateKey({name:"AES-GCM",length:t},!0,["encrypt"]),u=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(yield r.exportKey("jwk",i),["ext","key_ops"]);return u.kid=yield tn({jwk:u}),u})}static privateKeyToBytes({privateKey:t}){return A0(this,void 0,void 0,function*(){if(!PE(t))throw new Error("AesGcm: The provided key is not a valid oct private key.");return Dt.base64Url(t.k).toUint8Array()})}}var Cb=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},Hd=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Xu{static bytesToPrivateKey({privateKeyBytes:t}){return Hd(this,void 0,void 0,function*(){const r=_0.getPublicKey(t),i={kty:"OKP",crv:"X25519",d:Dt.uint8Array(t).toBase64Url(),x:Dt.uint8Array(r).toBase64Url()};return i.kid=yield tn({jwk:i}),i})}static bytesToPublicKey({publicKeyBytes:t}){return Hd(this,void 0,void 0,function*(){const r={kty:"OKP",crv:"X25519",x:Dt.uint8Array(t).toBase64Url()};return r.kid=yield tn({jwk:r}),r})}static computePublicKey({key:t}){return Hd(this,void 0,void 0,function*(){const r=yield Xu.privateKeyToBytes({privateKey:t}),i=_0.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:Dt.uint8Array(i).toBase64Url()};return s.kid=yield tn({jwk:s}),s})}static generateKey(){return Hd(this,void 0,void 0,function*(){const t=_0.utils.randomPrivateKey(),r=yield Xu.bytesToPrivateKey({privateKeyBytes:t});return r.kid=yield tn({jwk:r}),r})}static getPublicKey({key:t}){var r;return Hd(this,void 0,void 0,function*(){if(!yc(t)||"X25519"!==t.crv)throw new Error("X25519: The provided key is not an X25519 private JWK.");let s=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["d"]);return null!==(r=s.kid)&&void 0!==r||(s.kid=yield tn({jwk:s})),s})}static privateKeyToBytes({privateKey:t}){return Hd(this,void 0,void 0,function*(){if(!yc(t))throw new Error("X25519: The provided key is not a valid OKP private key.");return Dt.base64Url(t.d).toUint8Array()})}static publicKeyToBytes({publicKey:t}){return Hd(this,void 0,void 0,function*(){if(!Em(t))throw new Error("X25519: The provided key is not a valid OKP public key.");return Dt.base64Url(t.x).toUint8Array()})}static sharedSecret({privateKeyA:t,publicKeyB:r}){return Hd(this,void 0,void 0,function*(){if("x"in t&&"x"in r&&t.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");const i=yield Xu.privateKeyToBytes({privateKey:t}),s=yield Xu.publicKeyToBytes({publicKey:r});return _0.getSharedSecret(i,s)})}}const Ns=(n,t)=>255&n[t++]|(255&n[t++])<<8;class g${constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,E0(t=Bb(t),32);const r=Ns(t,0),i=Ns(t,2),s=Ns(t,4),c=Ns(t,6),o=Ns(t,8),u=Ns(t,10),A=Ns(t,12),S=Ns(t,14);this.r[0]=8191&r,this.r[1]=8191&(r>>>13|i<<3),this.r[2]=7939&(i>>>10|s<<6),this.r[3]=8191&(s>>>7|c<<9),this.r[4]=255&(c>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|u<<2),this.r[7]=8065&(u>>>11|A<<5),this.r[8]=8191&(A>>>8|S<<8),this.r[9]=S>>>5&127;for(let y=0;y<8;y++)this.pad[y]=Ns(t,16+2*y)}process(t,r,i=!1){const s=i?0:2048,{h:c,r:o}=this,u=o[0],A=o[1],S=o[2],y=o[3],R=o[4],ee=o[5],ae=o[6],te=o[7],fe=o[8],we=o[9],Pe=Ns(t,r+0),Te=Ns(t,r+2),Ae=Ns(t,r+4),Ce=Ns(t,r+6),je=Ns(t,r+8),Le=Ns(t,r+10),ze=Ns(t,r+12),$e=Ns(t,r+14);let Ye=c[0]+(8191&Pe),ut=c[1]+(8191&(Pe>>>13|Te<<3)),ct=c[2]+(8191&(Te>>>10|Ae<<6)),vt=c[3]+(8191&(Ae>>>7|Ce<<9)),at=c[4]+(8191&(Ce>>>4|je<<12)),ft=c[5]+(je>>>1&8191),tt=c[6]+(8191&(je>>>14|Le<<2)),st=c[7]+(8191&(Le>>>11|ze<<5)),Je=c[8]+(8191&(ze>>>8|$e<<8)),lt=c[9]+($e>>>5|s),ot=0,yt=ot+Ye*u+ut*(5*we)+ct*(5*fe)+vt*(5*te)+at*(5*ae);ot=yt>>>13,yt&=8191,yt+=ft*(5*ee)+tt*(5*R)+st*(5*y)+Je*(5*S)+lt*(5*A),ot+=yt>>>13,yt&=8191;let kt=ot+Ye*A+ut*u+ct*(5*we)+vt*(5*fe)+at*(5*te);ot=kt>>>13,kt&=8191,kt+=ft*(5*ae)+tt*(5*ee)+st*(5*R)+Je*(5*y)+lt*(5*S),ot+=kt>>>13,kt&=8191;let Nt=ot+Ye*S+ut*A+ct*u+vt*(5*we)+at*(5*fe);ot=Nt>>>13,Nt&=8191,Nt+=ft*(5*te)+tt*(5*ae)+st*(5*ee)+Je*(5*R)+lt*(5*y),ot+=Nt>>>13,Nt&=8191;let Qe=ot+Ye*y+ut*S+ct*A+vt*u+at*(5*we);ot=Qe>>>13,Qe&=8191,Qe+=ft*(5*fe)+tt*(5*te)+st*(5*ae)+Je*(5*ee)+lt*(5*R),ot+=Qe>>>13,Qe&=8191;let Ut=ot+Ye*R+ut*y+ct*S+vt*A+at*u;ot=Ut>>>13,Ut&=8191,Ut+=ft*(5*we)+tt*(5*fe)+st*(5*te)+Je*(5*ae)+lt*(5*ee),ot+=Ut>>>13,Ut&=8191;let Gt=ot+Ye*ee+ut*R+ct*y+vt*S+at*A;ot=Gt>>>13,Gt&=8191,Gt+=ft*u+tt*(5*we)+st*(5*fe)+Je*(5*te)+lt*(5*ae),ot+=Gt>>>13,Gt&=8191;let Bt=ot+Ye*ae+ut*ee+ct*R+vt*y+at*S;ot=Bt>>>13,Bt&=8191,Bt+=ft*A+tt*u+st*(5*we)+Je*(5*fe)+lt*(5*te),ot+=Bt>>>13,Bt&=8191;let ht=ot+Ye*te+ut*ae+ct*ee+vt*R+at*y;ot=ht>>>13,ht&=8191,ht+=ft*S+tt*A+st*u+Je*(5*we)+lt*(5*fe),ot+=ht>>>13,ht&=8191;let Ct=ot+Ye*fe+ut*te+ct*ae+vt*ee+at*R;ot=Ct>>>13,Ct&=8191,Ct+=ft*y+tt*S+st*A+Je*u+lt*(5*we),ot+=Ct>>>13,Ct&=8191;let Kt=ot+Ye*we+ut*fe+ct*te+vt*ae+at*ee;ot=Kt>>>13,Kt&=8191,Kt+=ft*R+tt*y+st*S+Je*A+lt*u,ot+=Kt>>>13,Kt&=8191,ot=(ot<<2)+ot|0,ot=ot+yt|0,yt=8191&ot,ot>>>=13,kt+=ot,c[0]=yt,c[1]=kt,c[2]=Nt,c[3]=Qe,c[4]=Ut,c[5]=Gt,c[6]=Bt,c[7]=ht,c[8]=Ct,c[9]=Kt}finalize(){const{h:t,pad:r}=this,i=new Uint16Array(10);let s=t[1]>>>13;t[1]&=8191;for(let u=2;u<10;u++)t[u]+=s,s=t[u]>>>13,t[u]&=8191;t[0]+=5*s,s=t[0]>>>13,t[0]&=8191,t[1]+=s,s=t[1]>>>13,t[1]&=8191,t[2]+=s,i[0]=t[0]+5,s=i[0]>>>13,i[0]&=8191;for(let u=1;u<10;u++)i[u]=t[u]+s,s=i[u]>>>13,i[u]&=8191;i[9]-=8192;let c=(1^s)-1;for(let u=0;u<10;u++)i[u]&=c;c=~c;for(let u=0;u<10;u++)t[u]=t[u]&c|i[u];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let o=t[0]+r[0];t[0]=65535&o;for(let u=1;u<8;u++)o=(t[u]+r[u]|0)+(o>>>16)|0,t[u]=65535&o}update(t){kb(this);const{buffer:r,blockLen:i}=this,s=(t=Bb(t)).length;for(let c=0;c<s;){const o=Math.min(i-this.pos,s-c);if(o!==i)r.set(t.subarray(c,c+o),this.pos),this.pos+=o,c+=o,this.pos===i&&(this.process(r,0,!1),this.pos=0);else for(;i<=s-c;c+=i)this.process(t,c)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){kb(this),function WE(n,t){hl(n);const r=t.outputLen;if(n.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}(t,this),this.finished=!0;const{buffer:r,h:i}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let c=0;for(let o=0;o<8;o++)t[c++]=i[o]>>>0,t[c++]=i[o]>>>8;return t}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const i=t.slice(0,r);return this.destroy(),i}}const w$=function v$(n){const t=(i,s)=>n(s).update(Bb(i)).digest(),r=n(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=i=>n(i),t}(n=>new g$(n)),b$=Pb("expand 16-byte k"),_$=Pb("expand 32-byte k"),x$=Kd(b$),E$=Kd(_$);function pr(n,t){return n<<t|n>>>32-t}function Db(n){return n.byteOffset%4==0}const ZE=2**32-1,JE=new Uint32Array;function M0(n,t){const{allowShortKeys:r,extendNonceFn:i,counterLength:s,counterRight:c,rounds:o}=function o$(n,t){if(void 0!==t&&("object"!=typeof t||!(n=>"[object Object]"===Object.prototype.toString.call(n)&&n.constructor===Object)(t)))throw new Error("options must be object or undefined");return Object.assign(n,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof n)throw new Error("core must be a function");return ll(s),ll(o),Rb(c),Rb(r),(u,A,S,y,R=0)=>{hl(u),hl(A),hl(S);const ee=S.length;if(y||(y=new Uint8Array(ee)),hl(y),ll(R),R<0||R>=ZE)throw new Error("arx: counter overflow");if(y.length<ee)throw new Error(`arx: output (${y.length}) is shorter than data (${ee})`);const ae=[];let fe,we,te=u.length;if(32===te)fe=u.slice(),ae.push(fe),we=E$;else{if(16!==te||!r)throw new Error(`arx: invalid 32-byte key, got length=${te}`);fe=new Uint8Array(32),fe.set(u),fe.set(u,16),we=x$,ae.push(fe)}Db(A)||(A=A.slice(),ae.push(A));const Pe=Kd(fe);if(i){if(24!==A.length)throw new Error("arx: extended nonce must be 24 bytes");i(we,Pe,Kd(A.subarray(0,16)),Pe),A=A.subarray(16)}const Te=16-s;if(Te!==A.length)throw new Error(`arx: nonce must be ${Te} or 16 bytes`);if(12!==Te){const Ce=new Uint8Array(12);Ce.set(A,c?0:12-A.length),ae.push(A=Ce)}const Ae=Kd(A);for(function A$(n,t,r,i,s,c,o,u){const A=s.length,S=new Uint8Array(64),y=Kd(S),R=Db(s)&&Db(c),ee=R?Kd(s):JE,ae=R?Kd(c):JE;for(let te=0;te<A;o++){if(n(t,r,i,y,o,u),o>=ZE)throw new Error("arx: counter overflow");const fe=Math.min(64,A-te);if(R&&64===fe){const we=te/4;if(te%4!=0)throw new Error("arx: invalid block position");for(let Te,Pe=0;Pe<16;Pe++)Te=we+Pe,ae[Te]=ee[Te]^y[Pe];te+=64}else{for(let Pe,we=0;we<fe;we++)Pe=te+we,c[Pe]=s[Pe]^S[we];te+=fe}}}(n,we,Pe,Ae,S,y,R,o);ae.length>0;)ae.pop().fill(0);return y}}function T0(n,t,r,i,s,c=20){let o=n[0],u=n[1],A=n[2],S=n[3],y=t[0],R=t[1],ee=t[2],ae=t[3],te=t[4],fe=t[5],we=t[6],Pe=t[7],Te=s,Ae=r[0],Ce=r[1],je=r[2],Le=o,ze=u,$e=A,Ye=S,ut=y,ct=R,vt=ee,at=ae,ft=te,tt=fe,st=we,Je=Pe,lt=Te,ot=Ae,yt=Ce,kt=je;for(let Qe=0;Qe<c;Qe+=2)Le=Le+ut|0,lt=pr(lt^Le,16),ft=ft+lt|0,ut=pr(ut^ft,12),Le=Le+ut|0,lt=pr(lt^Le,8),ft=ft+lt|0,ut=pr(ut^ft,7),ze=ze+ct|0,ot=pr(ot^ze,16),tt=tt+ot|0,ct=pr(ct^tt,12),ze=ze+ct|0,ot=pr(ot^ze,8),tt=tt+ot|0,ct=pr(ct^tt,7),$e=$e+vt|0,yt=pr(yt^$e,16),st=st+yt|0,vt=pr(vt^st,12),$e=$e+vt|0,yt=pr(yt^$e,8),st=st+yt|0,vt=pr(vt^st,7),Ye=Ye+at|0,kt=pr(kt^Ye,16),Je=Je+kt|0,at=pr(at^Je,12),Ye=Ye+at|0,kt=pr(kt^Ye,8),Je=Je+kt|0,at=pr(at^Je,7),Le=Le+ct|0,kt=pr(kt^Le,16),st=st+kt|0,ct=pr(ct^st,12),Le=Le+ct|0,kt=pr(kt^Le,8),st=st+kt|0,ct=pr(ct^st,7),ze=ze+vt|0,lt=pr(lt^ze,16),Je=Je+lt|0,vt=pr(vt^Je,12),ze=ze+vt|0,lt=pr(lt^ze,8),Je=Je+lt|0,vt=pr(vt^Je,7),$e=$e+at|0,ot=pr(ot^$e,16),ft=ft+ot|0,at=pr(at^ft,12),$e=$e+at|0,ot=pr(ot^$e,8),ft=ft+ot|0,at=pr(at^ft,7),Ye=Ye+ut|0,yt=pr(yt^Ye,16),tt=tt+yt|0,ut=pr(ut^tt,12),Ye=Ye+ut|0,yt=pr(yt^Ye,8),tt=tt+yt|0,ut=pr(ut^tt,7);let Nt=0;i[Nt++]=o+Le|0,i[Nt++]=u+ze|0,i[Nt++]=A+$e|0,i[Nt++]=S+Ye|0,i[Nt++]=y+ut|0,i[Nt++]=R+ct|0,i[Nt++]=ee+vt|0,i[Nt++]=ae+at|0,i[Nt++]=te+ft|0,i[Nt++]=fe+tt|0,i[Nt++]=we+st|0,i[Nt++]=Pe+Je|0,i[Nt++]=Te+lt|0,i[Nt++]=Ae+ot|0,i[Nt++]=Ce+yt|0,i[Nt++]=je+kt|0}const T$=M0(T0,{counterRight:!1,counterLength:4,allowShortKeys:!1}),I$=M0(T0,{counterRight:!1,counterLength:8,extendNonceFn:function M$(n,t,r,i){let s=n[0],c=n[1],o=n[2],u=n[3],A=t[0],S=t[1],y=t[2],R=t[3],ee=t[4],ae=t[5],te=t[6],fe=t[7],we=r[0],Pe=r[1],Te=r[2],Ae=r[3];for(let je=0;je<20;je+=2)s=s+A|0,we=pr(we^s,16),ee=ee+we|0,A=pr(A^ee,12),s=s+A|0,we=pr(we^s,8),ee=ee+we|0,A=pr(A^ee,7),c=c+S|0,Pe=pr(Pe^c,16),ae=ae+Pe|0,S=pr(S^ae,12),c=c+S|0,Pe=pr(Pe^c,8),ae=ae+Pe|0,S=pr(S^ae,7),o=o+y|0,Te=pr(Te^o,16),te=te+Te|0,y=pr(y^te,12),o=o+y|0,Te=pr(Te^o,8),te=te+Te|0,y=pr(y^te,7),u=u+R|0,Ae=pr(Ae^u,16),fe=fe+Ae|0,R=pr(R^fe,12),u=u+R|0,Ae=pr(Ae^u,8),fe=fe+Ae|0,R=pr(R^fe,7),s=s+S|0,Ae=pr(Ae^s,16),te=te+Ae|0,S=pr(S^te,12),s=s+S|0,Ae=pr(Ae^s,8),te=te+Ae|0,S=pr(S^te,7),c=c+y|0,we=pr(we^c,16),fe=fe+we|0,y=pr(y^fe,12),c=c+y|0,we=pr(we^c,8),fe=fe+we|0,y=pr(y^fe,7),o=o+R|0,Pe=pr(Pe^o,16),ee=ee+Pe|0,R=pr(R^ee,12),o=o+R|0,Pe=pr(Pe^o,8),ee=ee+Pe|0,R=pr(R^ee,7),u=u+A|0,Te=pr(Te^u,16),ae=ae+Te|0,A=pr(A^ae,12),u=u+A|0,Te=pr(Te^u,8),ae=ae+Te|0,A=pr(A^ae,7);let Ce=0;i[Ce++]=s,i[Ce++]=c,i[Ce++]=o,i[Ce++]=u,i[Ce++]=we,i[Ce++]=Pe,i[Ce++]=Te,i[Ce++]=Ae},allowShortKeys:!1}),P$=new Uint8Array(16),YE=(n,t)=>{n.update(t);const r=t.length%16;r&&n.update(P$.subarray(r))},B$=new Uint8Array(32);function XE(n,t,r,i,s){const c=n(t,r,B$),o=w$.create(c);s&&YE(o,s),YE(o,i);const u=new Uint8Array(16),A=(n=>new DataView(n.buffer,n.byteOffset,n.byteLength))(u);Rm(A,0,BigInt(s?s.length:0),!0),Rm(A,8,BigInt(i.length),!0),o.update(u);const S=o.digest();return c.fill(0),S}const QE=n=>(t,r,i)=>(E0(t,32),E0(r),{encrypt:(c,o)=>{const u=c.length,A=u+16;o?E0(o,A):o=new Uint8Array(A),n(t,r,c,o,1);const S=XE(n,t,r,o.subarray(0,-16),i);return o.set(S,u),o},decrypt:(c,o)=>{const u=c.length,A=u-16;if(u<16)throw new Error("encrypted data must be at least 16 bytes");o?E0(o,A):o=new Uint8Array(A);const S=c.subarray(0,-16);if(!function a$(n,t){if(n.length!==t.length)return!1;let r=0;for(let i=0;i<n.length;i++)r|=n[i]^t[i];return 0===r}(c.subarray(-16),XE(n,t,r,S,i)))throw new Error("invalid tag");return n(t,r,S,o,1),o}});function Oa(n){if("string"==typeof n&&0!==n.length)return n.split("#").pop()}function jb({didDocument:n}){var t,r;if(!n)throw new TypeError("Required parameter missing: 'didDocument'");const i=[];return i.push(...null!==(r=null===(t=n.verificationMethod)||void 0===t?void 0:t.filter(Ub))&&void 0!==r?r:[]),Object.keys(lm).forEach(s=>{var c,o;i.push(...null!==(o=null===(c=n[s])||void 0===c?void 0:c.filter(Ub))&&void 0!==o?o:[])}),i}function N$({didDocument:n,methodId:t}){const r=[];return Object.keys(lm).forEach(i=>{if(Array.isArray(n[i])){const s=n[i],c=Oa(t);s.some(u=>{const A=Oa(u)===c,S=Ub(u)&&Oa(u.id)===c;return A||S})&&r.push(i)}}),r}function Ub(n){return!(!n||"object"!=typeof n||null===n||!("id"in n&&"type"in n&&"controller"in n)||"string"!=typeof n.id||"string"!=typeof n.type||"string"!=typeof n.controller)}function e4({keyBytes:n,multicodecCode:t,multicodecName:r}){const i=Ui.addPrefix({code:t,data:n,name:r}),s=Dt.uint8Array(i).toBase58Btc();return Dt.base58Btc(s).toMultibase()}function t4({multibaseKeyId:n}){try{const t=Dt.multibase(n).toBase58Btc(),r=Dt.base58Btc(t).toUint8Array(),{code:i,data:s,name:c}=Ui.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:i,multicodecName:c}}catch{throw new Ar(Mr.InvalidDid,`Invalid multibase identifier: ${n}`)}}QE(T$),QE(I$);var B0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class No{constructor({uri:t,document:r,metadata:i,keyManager:s}){this.uri=t,this.document=r,this.metadata=i,this.keyManager=s}export(){return B0(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let t={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&"function"==typeof this.keyManager.exportKey){const r=[];for(let i of this.document.verificationMethod){if(!i.publicKeyJwk)throw new Error(`Verification method '${i.id}' does not contain a public key in JWK format`);const s=yield this.keyManager.getKeyUri({key:i.publicKeyJwk}),c=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},c))}t.privateKeys=r}return t})}getSigner(t){return B0(this,void 0,void 0,function*(){var r;const i=null===(r=this.document.verificationMethod)||void 0===r?void 0:r.find(A=>{var S,y;return Oa(A.id)===(null!==(S=Oa(t?.methodId))&&void 0!==S?S:Oa(null===(y=this.document.assertionMethod)||void 0===y?void 0:y[0]))});if(!i||!i.publicKeyJwk)throw new Ar(Mr.InternalError,"A verification method intended for signing could not be determined from the DID Document");const s=yield this.keyManager.getKeyUri({key:i.publicKeyJwk}),c=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:KE(c),keyId:i.id,sign(A){return B0(this,arguments,void 0,function*({data:S}){return yield o.sign({data:S,keyUri:s})})},verify(A){return B0(this,arguments,void 0,function*({data:S,signature:y}){return yield o.verify({data:S,key:c,signature:y})})}}})}static import(t){return B0(this,arguments,void 0,function*({portableDid:r,keyManager:i=new vo}){var s;const c=jb({didDocument:r.document});if(0===c.length)throw new Ar(Mr.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let u of null!==(s=r.privateKeys)&&void 0!==s?s:[])yield i.importKey({key:u});for(let u of c){if(!u.publicKeyJwk)throw new Error(`Verification method '${u.id}' does not contain a public key in JWK format`);const A=yield i.getKeyUri({key:u.publicKeyJwk});yield i.getPublicKey({keyUri:A})}return new No({uri:r.uri,document:r.document,metadata:r.metadata,keyManager:i})})}}const r4="0123456789abcdef",n4=[],$m=[];for(let n=0;n<256;n++)n4[n]=r4[n>>4&15]+r4[15&n],n<16&&(n<10?$m[48+n]=n:$m[87+n]=n);const i4=n=>{const t=n.length;let r="",i=0;for(;i<t;)r+=n4[n[i++]];return r};for(var R0=typeof Uint8Array>"u"?[]:new Uint8Array(256),jm=0;jm<64;jm++)R0["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(jm)]=jm;const F$=new TextDecoder,s4=(n,t)=>t?new TextDecoder(t).decode(n):F$.decode(n),K$=new TextEncoder,Zc=n=>K$.encode(n);function k0(n){const t=n<0?1:0;return n=Math.abs(Number(n||1)),Math.floor(Math.log10(n))+1+t}function c4(n){return ArrayBuffer.isView(n)?"arraybufferview":Array.isArray(n)?"array":n instanceof Number?"number":n instanceof Boolean?"boolean":n instanceof Set?"set":n instanceof Map?"map":n instanceof String?"string":n instanceof ArrayBuffer?"arraybuffer":typeof n}function Dn(n,t,r){const i=[];let s=null;return Dn._encode(i,n),s=((n,t=0)=>{const r=n.length||0;if(!t){let o=r;for(;o--;)t+=n[o].length}const i=new Uint8Array(t);let s=t,c=r;for(;c--;)s-=n[c].length,i.set(n[c],s);return i})(i),Dn.bytes=s.length,ArrayBuffer.isView(t)?(t.set(s,r),t):s}typeof window<"u"?window:self,Dn.bytes=-1,Dn._floatConversionDetected=!1,Dn._encode=function(n,t){if(null!=t)switch(c4(t)){case"object":Dn.dict(n,t);break;case"map":Dn.dictMap(n,t);break;case"array":Dn.list(n,t);break;case"set":Dn.listSet(n,t);break;case"string":Dn.string(n,t);break;case"number":case"boolean":Dn.number(n,t);break;case"arraybufferview":Dn.buffer(n,new Uint8Array(t.buffer,t.byteOffset,t.byteLength));break;case"arraybuffer":Dn.buffer(n,new Uint8Array(t))}};const Um=new Uint8Array([101]),d4=new Uint8Array([100]),u4=new Uint8Array([108]);Dn.buffer=function(n,t){n.push(Zc(t.length+":"),t)},Dn.string=function(n,t){n.push(Zc(Zc(t).byteLength+":"+t))},Dn.number=function(n,t){if(Number.isInteger(t))return n.push(Zc("i"+BigInt(t)+"e"));const r=2147483648,c=(t/r|0)*r+(t%r|0);n.push(Zc("i"+c+"e")),c!==t&&!Dn._floatConversionDetected&&(Dn._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+c+'"'),console.trace())},Dn.dict=function(n,t){n.push(d4);let i,r=0;const s=Object.keys(t).sort(),c=s.length;for(;r<c;r++)i=s[r],null!=t[i]&&(Dn.string(n,i),Dn._encode(n,t[i]));n.push(Um)},Dn.dictMap=function(n,t){n.push(d4);const r=Array.from(t.keys()).sort();for(const i of r)null!=t.get(i)&&(ArrayBuffer.isView(i)?Dn._encode(n,i):Dn.string(n,String(i)),Dn._encode(n,t.get(i)));n.push(Um)},Dn.list=function(n,t){let r=0;const i=t.length;for(n.push(u4);r<i;r++)null!=t[r]&&Dn._encode(n,t[r]);n.push(Um)},Dn.listSet=function(n,t){n.push(u4);for(const r of t)null!=r&&Dn._encode(n,r);n.push(Um)};const V$=Dn;function f4(n,t,r){let i=0,s=1;for(let c=t;c<r;c++){const o=n[c];if(o<58&&o>=48)i=10*i+(o-48);else if(c!==t||43!==o){if(c===t&&45===o){s=-1;continue}if(46===o)break;throw new Error("not a number: buffer["+c+"] = "+o)}}return i*s}function Fr(n,t,r,i){return null==n||0===n.length?null:("number"!=typeof t&&null==i&&(i=t,t=void 0),"number"!=typeof r&&null==i&&(i=r,r=void 0),Fr.position=0,Fr.encoding=i||null,Fr.data=ArrayBuffer.isView(n)?new Uint8Array(n.slice(t,r)):Zc(n),Fr.bytes=Fr.data.length,Fr.next())}function Lm(n){if(null==n)return 0;const r=c4(n);switch(r){case"arraybufferview":return function ej(n){const t=n.byteLength-n.byteOffset;return k0(t)+1+t}(n);case"string":return function Q$(n){const t=Zc(n).byteLength;return k0(t)+1+t}(n);case"array":case"set":return function J$(n){let t=2;for(const r of n)t+=Lm(r);return t}(n);case"number":return 1+k0(Math.floor(n))+1;case"bigint":return 1+n.toString().length+1;case"object":return function X$(n){let t=2;const r=Object.keys(n);for(let i=0;i<r.length;i++){const s=Zc(r[i]).byteLength;t+=k0(s)+1+s,t+=Lm(n[r[i]])}return t}(n);case"map":return function Y$(n){let t=2;for(const[r,i]of n){const s=Zc(r).byteLength;t+=k0(s)+1+s,t+=Lm(i)}return t}(n);default:throw new TypeError(`Unsupported value of type "${r}"`)}}Fr.bytes=0,Fr.position=0,Fr.data=null,Fr.encoding=null,Fr.next=function(){switch(Fr.data[Fr.position]){case 100:return Fr.dictionary();case 108:return Fr.list();case 105:return Fr.integer();default:return Fr.buffer()}},Fr.find=function(n){let t=Fr.position;const r=Fr.data.length,i=Fr.data;for(;t<r;){if(i[t]===n)return t;t++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(n)+'" [0x'+n.toString(16)+"]")},Fr.dictionary=function(){Fr.position++;const n={};for(;101!==Fr.data[Fr.position];){const t=Fr.buffer();let r=s4(t);r.includes("\ufffd")&&(r=i4(t)),n[r]=Fr.next()}return Fr.position++,n},Fr.list=function(){Fr.position++;const n=[];for(;101!==Fr.data[Fr.position];)n.push(Fr.next());return Fr.position++,n},Fr.integer=function(){const n=Fr.find(101),t=f4(Fr.data,Fr.position+1,n);return Fr.position+=n+1-Fr.position,t},Fr.buffer=function(){let n=Fr.find(58);const t=f4(Fr.data,Fr.position,n),r=++n+t;return Fr.position=r,Fr.encoding?s4(Fr.data.slice(n,r)):Fr.data.slice(n,r)};const h4={encode:V$,decode:Fr,byteLength:Lm,encodingLength:Lm},tj=/^(\d{1,3}\.){3,3}\d{1,3}$/,rj=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,gc={name:"v4",size:4,isFormat:n=>tj.test(n),encode(n,t,r){r=~~r,t=t||new Uint8Array(r+4);const i=n.length;let s=0;for(let c=0;c<i;){const o=n.charCodeAt(c++);46===o?(t[r++]=s,s=0):s=10*s+(o-48)}return t[r]=s,t},decode:(n,t)=>(t=~~t,`${n[t++]}.${n[t++]}.${n[t++]}.${n[t]}`)},Wd={name:"v6",size:16,isFormat:n=>n.length>0&&rj.test(n),encode(n,t,r){let i=16+(r=~~r),s=-1,c=0,o=0,u=!0,A=!1;t=t||new Uint8Array(r+16);for(let S=0;S<n.length;S++){let y=n.charCodeAt(S);58===y?(u?-1!==s?(r<i&&(t[r]=0),r<i-1&&(t[r+1]=0),r+=2):r<i&&(s=r):(!0===A?(r<i&&(t[r]=o),r++):(r<i&&(t[r]=c>>8),r<i-1&&(t[r+1]=255&c),r+=2),c=0,o=0),u=!0,A=!1):46===y?(r<i&&(t[r]=o),r++,o=0,c=0,u=!1,A=!0):(u=!1,y>=97?y-=87:y>=65?y-=55:(y-=48,o=10*o+y),c=(c<<4)+y)}if(!1===u)!0===A?(r<i&&(t[r]=o),r++):(r<i&&(t[r]=c>>8),r<i-1&&(t[r+1]=255&c),r+=2);else if(0===s)r<i&&(t[r]=0),r<i-1&&(t[r+1]=0),r+=2;else if(-1!==s){r+=2;for(let S=Math.min(r-1,i-1);S>=s+2;S--)t[S]=t[S-2];t[s]=0,t[s+1]=0,s=r}if(s!==r&&-1!==s)for(r>i-2&&(r=i-2);i>s;)t[--i]=r<i&&r>s?t[--r]:0;else for(;r<i;)t[r++]=0;return t},decode(n,t){t=~~t;let r="";for(let i=0;i<16;i+=2)0!==i&&(r+=":"),r+=(n[t+i]<<8|n[t+i+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function y4(n){if(gc.isFormat(n))return gc.size;if(Wd.isFormat(n))return Wd.size;throw Error(`Invalid ip address: ${n}`)}function Km(n){switch(n){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+n}function O0(n){switch(n.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":case"*":return 255}return n.toUpperCase().startsWith("UNKNOWN_")?parseInt(n.slice(8)):0}function oj(n){switch(n){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+n}function aj(n){switch(n){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+n}function m4(n){switch(n){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+n}function g4(n){switch(n.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function v4(n){if("number"==typeof n)return n;if(!n)return-1;switch(n.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const t=n.match(/_(\d+)$/);return t?parseInt(t[1],10):-1}const Kb=55296,C0=56320;function w4(n){let t=0;const r=n.length;for(let i=0;i<r;i+=1){const s=n.charCodeAt(i);if(s<=127)t+=1;else if(s<=2047)t+=2;else if((63488&s)!==Kb)t+=3;else{const c=i+1;c===r||s>=C0||(64512&n.charCodeAt(c))!==C0?t+=3:(i=c,t+=4)}}return t}function D0(n,t,r){const i=n.length;null==r&&(r=0),void 0===t&&(t=new Uint8Array(w4(n)+r));let s=r;for(let c=0;c<i;c+=1){let o=n.charCodeAt(c);if(o<=127)t[s++]=o;else if(o<=2047)t[s++]=192|(1984&o)>>6,t[s++]=128|63&o;else if((63488&o)!==Kb)t[s++]=224|(61440&o)>>12,t[s++]=128|(4032&o)>>6,t[s++]=128|63&o;else{const u=c+1;if(u===i||o>=C0)t[s++]=239,t[s++]=191,t[s++]=189;else{const A=n.charCodeAt(u);(64512&A)!==C0?(t[s++]=239,t[s++]=191,t[s++]=189):(c=u,o=65536|(1023&o)<<10|1023&A,t[s++]=240|(1835008&o)>>18,t[s++]=128|(258048&o)>>12,t[s++]=128|(4032&o)>>6,t[s++]=128|63&o)}}}return D0.bytes=s-r,t}function N0(n,t,r){let i="";null==t&&(t=0),null==r&&(r=n.length);for(let s=t;s<r;){const c=n[s++];let o;c<=128?o=c:c>191&&c<224?o=(31&c)<<6|63&n[s++]:c>239&&c<365?(o=((7&c)<<18|(63&n[s++])<<12|(63&n[s++])<<6|63&n[s++])-65536,i+=String.fromCharCode(Kb|o>>10&1023),o=C0|1023&o):o=(15&c)<<12|(63&n[s++])<<6|63&n[s++],i+=String.fromCharCode(o)}return N0.bytes=r-t,i}D0.bytes=0,N0.bytes=0;const Qu=n=>n instanceof Uint8Array;function Gd(n){return"string"==typeof n?w4(n):n.byteLength}function zb(n){return n instanceof Uint8Array?n:Array.isArray(n)?new Uint8Array(n):D0(n)}function Vb(n,t,r){if("string"!=typeof t)throw new Error("unknown input type");return D0(t,n,r),D0.bytes}const $0={},b4=new Array(255);for(let n=0;n<=15;n+=1){const t=n.toString(16),r=t.toUpperCase();for(let i=0;i<=15;i+=1){const s=i.toString(16),c=s.toUpperCase(),o=n<<4|i,u=`${t}${s}`;b4[o]=u,$0[u]=o,$0[`${r}${s}`]=o,$0[`${t}${c}`]=o,$0[`${r}${c}`]=o}}function _4(n){return n.length>>>1}const fj=Math.pow(2,24),lj=Math.pow(2,16),hj=Math.pow(2,8),Jc=(n,t)=>n[t]*fj+n[t+1]*lj+n[t+2]*hj+n[t+3],nn=(n,t)=>n[t]<<8|n[t+1],Yc=(n,t,r)=>(n[r+3]=t=+t,n[r+2]=t>>>=8,n[r+1]=t>>>=8,n[r]=t>>>=8,r+4),kr=(n,t,r)=>(n[r]=t>>8,n[r+1]=255&t,r+2);function $o(n,t,r,i,s){return r<0&&(i-=r,r=0),i<0&&(i=0),s<0?new Uint8Array(0):r>=t.length||i>=s?0:function pj(n,t,r,i,s){s-i>t.length-r&&(s=i+t.length-r);let c=s-i;const o=n.length-i;return c>o&&(c=o),(0!==i||s<n.length)&&(n=new Uint8Array(n.buffer,n.byteOffset+i,c)),t.set(n,r),c}(n,t,r,i,s)}function ti({bytes:n=0,encode:t,decode:r,encodingLength:i}){return t.bytes=n,r.bytes=n,{encode:t,decode:r,encodingLength:i||(()=>n)}}const yr=ti({encode(n,t,r){t||(t=new Uint8Array(yr.encodingLength(n))),r||(r=0);const i=r,s=n.replace(/^\.|\.$/gm,"");if(s.length){const c=s.split(".");for(let o=0;o<c.length;o++){const u=Vb(t,c[o],r+1);t[r]=u,r+=u+1}}return t[r++]=0,yr.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r=[];let i=t,s=0,c=0,o=!1;for(;;){if(t>=n.length)throw new Error("Cannot decode name (buffer overflow)");const u=n[t++];if(c+=o?0:1,0===u)break;if(192&u){if(192&~u)throw new Error("Cannot decode name (bad label)");{if(t+1>n.length)throw new Error("Cannot decode name (buffer overflow)");const A=nn(n,t-1)-49152;if(A>=i)throw new Error("Cannot decode name (bad pointer)");t=A,i=A,c+=o?0:1,o=!0}}else{if(t+u>n.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=u+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(N0(n,t,t+u)),t+=u,c+=o?0:u}}return yr.decode.bytes=c,0===r.length?".":r.join(".")},encodingLength:n=>"."===n||".."===n?1:Gd(n.replace(/^\.|\.$/gm,""))+2}),Yi=ti({encode(n,t,r){t||(t=new Uint8Array(Yi.encodingLength(n))),r||(r=0);const i=Vb(t,n,r+1);return t[r]=i,Yi.encode.bytes=i+1,t},decode(n,t){t||(t=0);const r=n[t],i=N0(n,t+1,t+1+r);return Yi.decode.bytes=r+1,i},encodingLength:n=>Gd(n)+1}),yl=ti({bytes:12,encode(n,t,r){t||(t=new Uint8Array(yl.encodingLength(n))),r||(r=0);const i=32767&(n.flags||0),s="response"===n.type?32768:0;return kr(t,n.id||0,r),kr(t,i|s,r+2),kr(t,n.questions.length,r+4),kr(t,n.answers.length,r+6),kr(t,n.authorities.length,r+8),kr(t,n.additionals.length,r+10),t},decode(n,t){if(t||(t=0),n.length<12)throw new Error("Header must be 12 bytes");const r=nn(n,t+2);return{id:nn(n,t),type:32768&r?"response":"query",flags:32767&r,flag_qr:1==(r>>15&1),opcode:aj(r>>11&15),flag_aa:1==(r>>10&1),flag_tc:1==(r>>9&1),flag_rd:1==(r>>8&1),flag_ra:1==(r>>7&1),flag_z:1==(r>>6&1),flag_ad:1==(r>>5&1),flag_cd:1==(r>>4&1),rcode:oj(15&r),questions:new Array(nn(n,t+4)),answers:new Array(nn(n,t+6)),authorities:new Array(nn(n,t+8)),additionals:new Array(nn(n,t+10))}},encodingLength:()=>12}),zm=ti({encode(n,t,r){t||(t=new Uint8Array(zm.encodingLength(n))),r||(r=0);const i=n.length;return kr(t,i,r),$o(n,t,r+2,0,i),zm.encode.bytes=i+2,t},decode(n,t){t||(t=0);const r=nn(n,t),i=n.slice(t+2,t+2+r);return zm.decode.bytes=r+2,i},encodingLength:n=>n.length+2}),Vm=ti({encode:(n,t,r)=>(t||(t=new Uint8Array(Vm.encodingLength(n))),r||(r=0),yr.encode(n,t,r+2),kr(t,yr.encode.bytes,r),Vm.encode.bytes=yr.encode.bytes+2,t),decode(n,t){t||(t=0);const r=nn(n,t),i=yr.decode(n,t+2);return Vm.decode.bytes=r+2,i},encodingLength:n=>yr.encodingLength(n)+2}),Hm=ti({encode(n,t,r){t||(t=new Uint8Array(Hm.encodingLength(n))),r||(r=0);const i=r;return yr.encode(n.mname,t,r+=2),yr.encode(n.rname,t,r+=yr.encode.bytes),Yc(t,n.serial||0,r+=yr.encode.bytes),Yc(t,n.refresh||0,r+=4),Yc(t,n.retry||0,r+=4),Yc(t,n.expire||0,r+=4),Yc(t,n.minimum||0,r+=4),kr(t,(r+=4)-i-2,i),Hm.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r=t,i={};return i.mname=yr.decode(n,t+=2),i.rname=yr.decode(n,t+=yr.decode.bytes),i.serial=Jc(n,t+=yr.decode.bytes),i.refresh=Jc(n,t+=4),i.retry=Jc(n,t+=4),i.expire=Jc(n,t+=4),i.minimum=Jc(n,t+=4),Hm.decode.bytes=(t+=4)-r,i},encodingLength:n=>22+yr.encodingLength(n.mname)+yr.encodingLength(n.rname)}),Wm=ti({encode(n,t,r){Array.isArray(n)||(n=[n]);for(let s=0;s<n.length;s++)if("string"==typeof n[s]&&(n[s]=zb(n[s])),!Qu(n[s]))throw new Error("Must be a Buffer");t||(t=new Uint8Array(Wm.encodingLength(n))),r||(r=0);const i=r;return r+=2,n.forEach(function(s){t[r++]=s.length,$o(s,t,r,0,s.length),r+=s.length}),kr(t,r-i-2,i),Wm.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r=t;let i=nn(n,t);t+=2;const s=[];for(;i>0;){const c=n[t++];if(--i,i<c)throw new Error("Buffer overflow");s.push(n.slice(t,t+c)),t+=c,i-=c}return Wm.decode.bytes=t-r,s},encodingLength(n){Array.isArray(n)||(n=[n]);let t=2;return n.forEach(function(r){t+="string"==typeof r?Gd(r)+1:r.length+1}),t}}),Gm=ti({encode(n,t,r){t||(t=new Uint8Array(Gm.encodingLength(n))),r||(r=0),"string"==typeof n&&(n=zb(n)),n||(n=new Uint8Array(0));const i=r,s=n.length;return $o(n,t,r+=2,0,s),kr(t,(r+=s)-i-2,i),Gm.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r=t,i=nn(n,t),s=n.slice(t+=2,t+i);return Gm.decode.bytes=(t+=i)-r,s},encodingLength:n=>n?(Qu(n)?n.length:Gd(n))+2:2}),qm=ti({encode(n,t,r){t||(t=new Uint8Array(qm.encodingLength(n))),r||(r=0);const i=r;return Yi.encode(n.cpu,t,r+=2),Yi.encode(n.os,t,r+=Yi.encode.bytes),kr(t,(r+=Yi.encode.bytes)-i-2,i),qm.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r=t,i={};return i.cpu=Yi.decode(n,t+=2),i.os=Yi.decode(n,t+=Yi.decode.bytes),qm.decode.bytes=(t+=Yi.decode.bytes)-r,i},encodingLength:n=>Yi.encodingLength(n.cpu)+Yi.encodingLength(n.os)+2}),ml=ti({encode:(n,t,r)=>(t||(t=new Uint8Array(ml.encodingLength(n))),r||(r=0),yr.encode(n,t,r+2),kr(t,yr.encode.bytes,r),ml.encode.bytes=yr.encode.bytes+2,t),decode(n,t){t||(t=0);const r=yr.decode(n,t+2);return ml.decode.bytes=yr.decode.bytes+2,r},encodingLength:n=>yr.encodingLength(n)+2}),Zm=ti({encode(n,t,r){t||(t=new Uint8Array(Zm.encodingLength(n))),r||(r=0),kr(t,n.priority||0,r+2),kr(t,n.weight||0,r+4),kr(t,n.port||0,r+6),yr.encode(n.target,t,r+8);const i=yr.encode.bytes+6;return kr(t,i,r),Zm.encode.bytes=i+2,t},decode(n,t){t||(t=0);const r=nn(n,t),i={};return i.priority=nn(n,t+2),i.weight=nn(n,t+4),i.port=nn(n,t+6),i.target=yr.decode(n,t+8),Zm.decode.bytes=r+2,i},encodingLength:n=>8+yr.encodingLength(n.target)}),qd=ti({encode(n,t,r){const i=qd.encodingLength(n);return t||(t=new Uint8Array(qd.encodingLength(n))),r||(r=0),n.issuerCritical&&(n.flags=qd.ISSUER_CRITICAL),kr(t,i-2,r),t[r+=2]=n.flags||0,Yi.encode(n.tag,t,r+=1),Vb(t,n.value,r+=Yi.encode.bytes),r+=Gd(n.value),qd.encode.bytes=i,t},decode(n,t){t||(t=0);const r=nn(n,t),i=t+=2,s={};return s.flags=n[t],s.tag=Yi.decode(n,t+=1),s.value=N0(n,t+=Yi.decode.bytes,i+r),s.issuerCritical=!!(s.flags&qd.ISSUER_CRITICAL),qd.decode.bytes=r+2,s},encodingLength:n=>Yi.encodingLength(n.tag)+Yi.encodingLength(n.value)+2});qd.ISSUER_CRITICAL=128;const Jm=ti({encode(n,t,r){t||(t=new Uint8Array(Jm.encodingLength(n))),r||(r=0);const i=r;return kr(t,n.preference||0,r+=2),yr.encode(n.exchange,t,r+=2),kr(t,(r+=yr.encode.bytes)-i-2,i),Jm.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r=t,i={};return i.preference=nn(n,t+=2),i.exchange=yr.decode(n,t+=2),Jm.decode.bytes=(t+=yr.decode.bytes)-r,i},encodingLength:n=>4+yr.encodingLength(n.exchange)}),S4=ti({encode:(n,t,r)=>(t||(t=new Uint8Array(S4.encodingLength(n))),r||(r=0),kr(t,4,r),gc.encode(n,t,r+=2),t),decode:(n,t)=>(t||(t=0),gc.decode(n,t+=2)),bytes:6}),Ym=ti({encode:(n,t,r)=>(t||(t=new Uint8Array(Ym.encodingLength(n))),r||(r=0),kr(t,16,r),Wd.encode(n,t,r+=2),Ym.encode.bytes=18,t),decode(n,t){t||(t=0);const r=Wd.decode(n,t+=2);return Ym.decode.bytes=18,r},bytes:18}),A4=n=>new Uint8Array(n),Xc=ti({encode(n,t,r){t||(t=new Uint8Array(Xc.encodingLength(n))),r||(r=0);const i=r,s=v4(n.code);if(kr(t,s,r),r+=2,n.data)kr(t,n.data.length,r),$o(n.data,t,r+=2),r+=n.data.length;else switch(s){case 8:{const c=n.sourcePrefixLength||0,o=n.family||function nj(n){return y4(n)===gc.size?1:2}(n.ip),u=function ij(n,t,r){r=~~r;const i=y4(n);return"function"==typeof t&&(t=t(r+i)),i===gc.size?gc.encode(n,t,r):Wd.encode(n,t,r)}(n.ip,A4),A=Math.ceil(c/8);kr(t,A+4,r),kr(t,o,r+=2),r+=2,t[r++]=c,t[r++]=n.scopePrefixLength||0,$o(u,t,r,0,A),r+=A}break;case 11:n.timeout?(kr(t,2,r),kr(t,n.timeout,r+=2),r+=2):(kr(t,0,r),r+=2);break;case 12:{const c=n.length||0;kr(t,c,r),t.fill(0,r+=2,r+c),r+=c}break;case 14:kr(t,2*n.tags.length,r),r+=2;for(const o of n.tags)kr(t,o,r),r+=2;break;default:throw new Error(`Unknown roption code: ${n.code}`)}return Xc.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r={};r.code=nn(n,t),r.type=function cj(n){switch(n){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return n<0?null:`OPTION_${n}`}(r.code);const i=nn(n,t+=2);switch(r.data=n.slice(t+=2,t+i),r.code){case 8:r.family=nn(n,t),t+=2,r.sourcePrefixLength=n[t++],r.scopePrefixLength=n[t++];{const s=new Uint8Array(1===r.family?4:16);$o(n,s,0,t,t+i-4),r.ip=function sj(n,t,r){if(t=~~t,(r=r||n.length-t)===gc.size)return gc.decode(n,t,r);if(r===Wd.size)return Wd.decode(n,t,r);throw Error(`Invalid buffer size needs to be ${gc.size} for v4 or ${Wd.size} for v6.`)}(s)}break;case 11:i>0&&(r.timeout=nn(n,t),t+=2);break;case 14:r.tags=[];for(let s=0;s<i;s+=2)r.tags.push(nn(n,t)),t+=2}return Xc.decode.bytes=i+4,r},encodingLength(n){if(n.data)return n.data.length+4;switch(v4(n.code)){case 8:return Math.ceil((n.sourcePrefixLength||0)/8)+8;case 11:return"number"==typeof n.timeout?6:4;case 12:return n.length+4;case 14:return 4+2*n.tags.length}throw new Error(`Unknown roption code: ${n.code}`)}}),Zd=ti({encode(n,t,r){t||(t=new Uint8Array(Zd.encodingLength(n))),r||(r=0);const i=r,s=wl(n,Xc);return kr(t,s,r),r=z0(n,Xc,t,r+2),Zd.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r=t,i=[];let s=nn(n,t);t+=2;let c=0;for(;s>0;)i[c++]=Xc.decode(n,t),t+=Xc.decode.bytes,s-=Xc.decode.bytes;return Zd.decode.bytes=t-r,i},encodingLength:n=>2+wl(n||[],Xc)}),vc=ti({encode(n,t,r){t||(t=new Uint8Array(vc.encodingLength(n))),r||(r=0);const i=r,s=n.key;if(!Qu(s))throw new Error("Key must be a Buffer");return kr(t,n.flags,r+=2),t[r+=2]=vc.PROTOCOL_DNSSEC,t[r+=1]=n.algorithm,$o(s,t,r+=1,0,s.length),vc.encode.bytes=(r+=s.length)-i,kr(t,vc.encode.bytes-2,i),t},decode(n,t){t||(t=0);const r=t,i={},s=nn(n,t);if(i.flags=nn(n,t+=2),n[t+=2]!==vc.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return i.algorithm=n[t+=1],i.key=n.slice(t+=1,r+s+2),vc.decode.bytes=(t+=i.key.length)-r,i},encodingLength:n=>6+Gd(n.key)});vc.PROTOCOL_DNSSEC=3,vc.ZONE_KEY=128,vc.SECURE_ENTRYPOINT=32768;const j0=ti({encode(n,t,r){t||(t=new Uint8Array(j0.encodingLength(n))),r||(r=0);const i=r,s=n.signature;if(!Qu(s))throw new Error("Signature must be a Buffer");return r+=2,kr(t,O0(n.typeCovered),r),t[r+=2]=n.algorithm,t[r+=1]=n.labels,Yc(t,n.originalTTL,r+=1),Yc(t,n.expiration,r+=4),Yc(t,n.inception,r+=4),kr(t,n.keyTag,r+=4),yr.encode(n.signersName,t,r+=2),$o(s,t,r+=yr.encode.bytes,0,s.length),j0.encode.bytes=(r+=s.length)-i,kr(t,j0.encode.bytes-2,i),t},decode(n,t){t||(t=0);const r=t,i={},s=nn(n,t);return i.typeCovered=Km(nn(n,t+=2)),i.algorithm=n[t+=2],i.labels=n[t+=1],i.originalTTL=Jc(n,t+=1),i.expiration=Jc(n,t+=4),i.inception=Jc(n,t+=4),i.keyTag=nn(n,t+=4),i.signersName=yr.decode(n,t+=2),i.signature=n.slice(t+=yr.decode.bytes,r+s+2),j0.decode.bytes=(t+=i.signature.length)-r,i},encodingLength:n=>20+yr.encodingLength(n.signersName)+Gd(n.signature)}),U0=ti({encode(n,t,r){t||(t=new Uint8Array(U0.encodingLength(n))),r||(r=0);const i=r;return yr.encode(n.mbox||".",t,r+=2),yr.encode(n.txt||".",t,r+=yr.encode.bytes),U0.encode.bytes=(r+=yr.encode.bytes)-i,kr(t,U0.encode.bytes-2,i),t},decode(n,t){t||(t=0);const r=t,i={};return i.mbox=yr.decode(n,t+=2)||".",i.txt=yr.decode(n,t+=yr.decode.bytes)||".",U0.decode.bytes=(t+=yr.decode.bytes)-r,i},encodingLength:n=>2+yr.encodingLength(n.mbox||".")+yr.encodingLength(n.txt||".")}),jo=ti({encode(n,t,r){t||(t=new Uint8Array(jo.encodingLength(n))),r||(r=0);const i=r,s=[];for(let c=0;c<n.length;c++){const o=O0(n[c]);void 0===s[o>>8]&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(7&o)}for(let c=0;c<s.length;c++)if(void 0!==s[c]){const o=zb(s[c]);t[r]=c,t[r+=1]=o.length,$o(o,t,r+=1,0,o.length),r+=o.length}return jo.encode.bytes=r-i,t},decode(n,t,r){t||(t=0);const i=t,s=[];for(;t-i<r;){const c=n[t],o=n[t+=1];t+=1;for(let u=0;u<o;u++){const A=n[t+u];for(let S=0;S<8;S++)if(A&1<<7-S){const y=Km(c<<8|u<<3|S);s.push(y)}}t+=o}return jo.decode.bytes=t-i,s},encodingLength(n){const t=[];for(let i=0;i<n.length;i++){const s=O0(n[i]);t[s>>8]=Math.max(t[s>>8]||0,255&s)}let r=0;for(let i=0;i<t.length;i++)void 0!==t[i]&&(r+=2+Math.ceil((t[i]+1)/8));return r}}),L0=ti({encode(n,t,r){t||(t=new Uint8Array(L0.encodingLength(n))),r||(r=0);const i=r;return yr.encode(n.nextDomain,t,r+=2),jo.encode(n.rrtypes,t,r+=yr.encode.bytes),L0.encode.bytes=(r+=jo.encode.bytes)-i,kr(t,L0.encode.bytes-2,i),t},decode(n,t){t||(t=0);const r=t,i={},s=nn(n,t);return i.nextDomain=yr.decode(n,t+=2),i.rrtypes=jo.decode(n,t+=yr.decode.bytes,s-(t-r)),L0.decode.bytes=(t+=jo.decode.bytes)-r,i},encodingLength:n=>2+yr.encodingLength(n.nextDomain)+jo.encodingLength(n.rrtypes)}),F0=ti({encode(n,t,r){t||(t=new Uint8Array(F0.encodingLength(n))),r||(r=0);const i=r,s=n.salt;if(!Qu(s))throw new Error("salt must be a Buffer");const c=n.nextDomain;if(!Qu(c))throw new Error("nextDomain must be a Buffer");return t[r+=2]=n.algorithm,t[r+=1]=n.flags,kr(t,n.iterations,r+=1),t[r+=2]=s.length,$o(s,t,r+=1,0,s.length),t[r+=s.length]=c.length,$o(c,t,r+=1,0,c.length),jo.encode(n.rrtypes,t,r+=c.length),F0.encode.bytes=(r+=jo.encode.bytes)-i,kr(t,F0.encode.bytes-2,i),t},decode(n,t){t||(t=0);const r=t,i={},s=nn(n,t);i.algorithm=n[t+=2],i.flags=n[t+=1],i.iterations=nn(n,t+=1);const c=n[t+=2];i.salt=n.slice(t+=1,t+c);const o=n[t+=c];return i.nextDomain=n.slice(t+=1,t+o),i.rrtypes=jo.decode(n,t+=o,s-(t-r)),F0.decode.bytes=(t+=jo.decode.bytes)-r,i},encodingLength:n=>8+n.salt.length+n.nextDomain.length+jo.encodingLength(n.rrtypes)}),K0=ti({encode(n,t,r){t||(t=new Uint8Array(K0.encodingLength(n))),r||(r=0);const i=r,s=n.digest;if(!Qu(s))throw new Error("Digest must be a Buffer");return kr(t,n.keyTag,r+=2),t[r+=2]=n.algorithm,t[r+=1]=n.digestType,$o(s,t,r+=1,0,s.length),K0.encode.bytes=(r+=s.length)-i,kr(t,K0.encode.bytes-2,i),t},decode(n,t){t||(t=0);const r=t,i={},s=nn(n,t);return i.keyTag=nn(n,t+=2),i.algorithm=n[t+=2],i.digestType=n[t+=1],i.digest=n.slice(t+=1,r+s+2),K0.decode.bytes=(t+=i.digest.length)-r,i},encodingLength:n=>6+Gd(n.digest)}),gl=ti({encode(n,t,r){t||(t=new Uint8Array(gl.encodingLength(n))),r||(r=0);const i=r;t[r+=2]=n.algorithm,t[r+=1]=n.hash,r+=1;const s=_4(n.fingerprint),c=Wb(n.hash);if(s!==c)throw new Error(`Invalid length of fingerprint "${n.fingerprint}" for hashType=${n.hash}: ${s} != ${c}`);return function uj(n,t,r,i){let s=0;for(;r<i;){const c=t.substr(s,2),o=$0[c];if(void 0===o)return;n[r++]=o,s+=2}}(t,n.fingerprint,r,r+=s),gl.encode.bytes=r-i,kr(t,gl.encode.bytes-2,i),t},decode(n,t){t||(t=0);const r=t,i={};i.algorithm=n[t+=2],i.hash=n[t+=1],t+=1;const s=Wb(i.hash);return i.fingerprint=function dj(n,t,r){let i="";for(let s=t;s<r;){const c=n[s++];i+=b4[c]}return i}(n,t,t+s),gl.decode.bytes=(t+=s)-r,i},encodingLength:n=>4+_4(n.fingerprint)});function Wb(n){if(1===n)return 20;if(2===n)return 32;throw new Error(`Invalid hashType=${n}, supported=1,2`)}function Gb(n){switch(n.toUpperCase()){case"A":return S4;case"PTR":case"CNAME":case"DNAME":return ml;case"TXT":return Wm;case"NULL":return Gm;case"AAAA":return Ym;case"SRV":return Zm;case"HINFO":return qm;case"CAA":return qd;case"NS":return Vm;case"SOA":return Hm;case"MX":return Jm;case"OPT":return Zd;case"DNSKEY":return vc;case"RRSIG":return j0;case"RP":return U0;case"NSEC":return L0;case"NSEC3":return F0;case"SSHFP":return gl;case"DS":return K0}return zm}gl.getFingerprintLengthForHashType=Wb;const oa=ti({encode(n,t,r){t||(t=new Uint8Array(oa.encodingLength(n))),r||(r=0);const i=r;if(yr.encode(n.name,t,r),r+=yr.encode.bytes,kr(t,O0(n.type),r),"OPT"===n.type.toUpperCase()){if("."!==n.name)throw new Error("OPT name must be root.");kr(t,n.udpPayloadSize||4096,r+2),t[r+4]=n.extendedRcode||0,t[r+5]=n.ednsVersion||0,kr(t,n.flags||0,r+6),Zd.encode(n.options||[],t,r+=8),r+=Zd.encode.bytes}else{let s=g4(void 0===n.class?"IN":n.class);n.flush&&(s|=32768),kr(t,s,r+2),Yc(t,n.ttl||0,r+4),r+=8;const c=Gb(n.type);c.encode(n.data,t,r),r+=c.encode.bytes}return oa.encode.bytes=r-i,t},decode(n,t){t||(t=0);const r={},i=t;if(r.name=yr.decode(n,t),r.type=Km(nn(n,t+=yr.decode.bytes)),"OPT"===r.type)r.udpPayloadSize=nn(n,t+2),r.extendedRcode=n[t+4],r.ednsVersion=n[t+5],r.flags=nn(n,t+6),r.flag_do=1==(r.flags>>15&1),r.options=Zd.decode(n,t+8),t+=8+Zd.decode.bytes;else{const s=nn(n,t+2);r.ttl=Jc(n,t+4),r.class=m4(-32769&s),r.flush=!!(32768&s);const c=Gb(r.type);r.data=c.decode(n,t+8),t+=8+c.decode.bytes}return oa.decode.bytes=t-i,r},encodingLength(n){const t=null!=n.data?n.data:n.options;return yr.encodingLength(n.name)+8+Gb(n.type).encodingLength(t)}}),vl=ti({encode(n,t,r){t||(t=new Uint8Array(vl.encodingLength(n))),r||(r=0);const i=r;return yr.encode(n.name,t,r),r+=yr.encode.bytes,kr(t,O0(n.type),r),r+=2,kr(t,g4(void 0===n.class?"IN":n.class),r),vl.encode.bytes=(r+=2)-i,n},decode(n,t){t||(t=0);const r=t,i={};return i.name=yr.decode(n,t),i.type=Km(nn(n,t+=yr.decode.bytes)),i.class=m4(nn(n,t+=2)),t+=2,!!(32768&i.class)&&(i.class&=-32769),vl.decode.bytes=t-r,i},encodingLength:n=>yr.encodingLength(n.name)+4}),$s={encode:function(n,t,r){const i=!t;i&&(t=new Uint8Array(wj(n))),r||(r=0);const s=r;return n.questions||(n.questions=[]),n.answers||(n.answers=[]),n.authorities||(n.authorities=[]),n.additionals||(n.additionals=[]),yl.encode(n,t,r),r=z0(n.questions,vl,t,r+=yl.encode.bytes),r=z0(n.answers,oa,t,r),r=z0(n.authorities,oa,t,r),r=z0(n.additionals,oa,t,r),$s.encode.bytes=r-s,i&&tg.bytes!==t.length?t.slice(0,tg.bytes):t},decode:function(n,t){t||(t=0);const r=t,i=yl.decode(n,t);return t=rg(i.questions,vl,n,t+=yl.decode.bytes),t=rg(i.answers,oa,n,t),t=rg(i.authorities,oa,n,t),t=rg(i.additionals,oa,n,t),$s.decode.bytes=t-r,i},encodingLength:function(n){return yl.encodingLength(n)+wl(n.questions||[],vl)+wl(n.answers||[],oa)+wl(n.authorities||[],oa)+wl(n.additionals||[],oa)}};function Xm(n,t){if(n.questions)throw new Error("Only one .question object expected instead of a .questions array!");const r=Object.assign({type:t},n);return r.question&&(r.questions=[r.question],delete r.question),r}$s.encode.bytes=0,$s.decode.bytes=0;const Qm={encode:function(n,t,r){return t=$s.encode(Xm(n,"query"),t,r),Qm.encode.bytes=$s.encode.bytes,t},decode:function(n,t){const r=$s.decode(n,t);return Qm.decode.bytes=$s.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(n){return $s.encodingLength(Xm(n,"query"))}};Qm.encode.bytes=0,Qm.decode.bytes=0;const eg={encode:function(n,t,r){return t=$s.encode(Xm(n,"response"),t,r),eg.encode.bytes=$s.encode.bytes,t},decode:function(n,t){const r=$s.decode(n,t);return eg.decode.bytes=$s.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(n){return $s.encodingLength(Xm(n,"response"))}};eg.encode.bytes=0,eg.decode.bytes=0;const tg=$s.encode,qb=$s.decode,wj=$s.encodingLength;function wl(n,t){let r=0;for(let i=0;i<n.length;i++)r+=t.encodingLength(n[i]);return r}function z0(n,t,r,i){for(let s=0;s<n.length;s++)t.encode(n[s],r,i),i+=t.encode.bytes;return i}function rg(n,t,r,i){for(let s=0;s<n.length;s++)n[s]=t.decode(r,i),i+=t.decode.bytes;return i}var I4=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class ng{static getSigningMethod(t){return I4(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(t,r){return I4(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}}var as=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},P4=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r};const B4="https://diddht.tbddev.org",Jd=7200,ao=",";var R4=function(n){return n[n.Discoverable=0]="Discoverable",n[n.Organization=1]="Organization",n[n.Government=2]="Government",n[n.Corporation=3]="Corporation",n[n.LocalBusiness=4]="LocalBusiness",n[n.SoftwarePackage=5]="SoftwarePackage",n[n.WebApp=6]="WebApp",n[n.FinancialInstitution=7]="FinancialInstitution",n}(R4||{}),wo=function(n){return n[n.Ed25519=0]="Ed25519",n[n.secp256k1=1]="secp256k1",n[n.secp256r1=2]="secp256r1",n[n.X25519=3]="X25519",n}(wo||{}),k4=function(n){return n.authentication="auth",n.assertionMethod="asm",n.capabilityDelegation="del",n.capabilityInvocation="inv",n.keyAgreement="agm",n}(k4||{});const O4={Ed25519:wo.Ed25519,ES256K:wo.secp256k1,ES256:wo.secp256r1,"P-256":wo.secp256r1,secp256k1:wo.secp256k1,secp256r1:wo.secp256r1,X25519:wo.X25519},C4={[wo.Ed25519]:"Ed25519",[wo.secp256k1]:"ES256K",[wo.secp256r1]:"ES256",[wo.X25519]:"ECDH-ES+A256KW"};let bl=(()=>{class n extends ng{static create(){return as(this,arguments,void 0,function*({keyManager:r=new vo,options:i={}}={}){var s,c,o,u,A,S,y,R,ee,ae,te;if(null!==(s=i.verificationMethods)&&void 0!==s&&s.some(Le=>!(Le.algorithm in O4)))throw new Error("One or more verification method algorithms are not supported");const fe=null===(c=i.verificationMethods)||void 0===c?void 0:c.filter(Le=>"id"in Le).map(Le=>Le.id);if(fe&&fe.length!==new Set(fe).size)throw new Error("One or more verification method IDs are not unique");if(null!==(o=i.services)&&void 0!==o&&o.some(Le=>!Le.id||!Le.type||!Le.serviceEndpoint))throw new Error("One or more services are missing required properties");const we=yield r.generateKey({algorithm:"Ed25519"}),Pe=yield r.getPublicKey({keyUri:we}),Te=yield Li.identityKeyToIdentifier({identityKey:Pe}),Ae=Object.assign(Object.assign({id:Te},i.alsoKnownAs&&{alsoKnownAs:i.alsoKnownAs}),i.controllers&&{controller:i.controllers}),Ce=[...null!==(u=i.verificationMethods)&&void 0!==u?u:[]];Ce?.some(Le=>{var ze;return"0"===(null===(ze=Le.id)||void 0===ze?void 0:ze.split("#").pop())})||Ce.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(const Le of Ce){const ze=Le.id&&"0"===Le.id.split("#").pop()?we:yield r.generateKey({algorithm:Le.algorithm}),$e=yield r.getPublicKey({keyUri:ze});let Ye=null!==(S=null!==(A=Le.id)&&void 0!==A?A:$e.kid)&&void 0!==S?S:yield tn({jwk:$e});Ye=`${Te}#${Oa(Ye)}`,null!==(y=Ae.verificationMethod)&&void 0!==y||(Ae.verificationMethod=[]),Ae.verificationMethod.push({id:Ye,type:"JsonWebKey",controller:null!==(R=Le.controller)&&void 0!==R?R:Te,publicKeyJwk:$e});for(const ut of null!==(ee=Le.purposes)&&void 0!==ee?ee:[])Ae[ut]||(Ae[ut]=[]),Ae[ut].push(Ye)}null===(ae=i.services)||void 0===ae||ae.forEach(Le=>{var ze;null!==(ze=Ae.service)&&void 0!==ze||(Ae.service=[]),Le.id=`${Te}#${Le.id.split("#").pop()}`,Ae.service.push(Le)});const je=new No({uri:Te,document:Ae,metadata:Object.assign({published:!1},i.types&&{types:i.types}),keyManager:r});if(null===(te=i.publish)||void 0===te||te){const Le=yield n.publish({did:je,gatewayUri:i.gatewayUri});je.metadata=Le.didDocumentMetadata}return je})}static import(r){return as(this,arguments,void 0,function*({portableDid:i,keyManager:s=new vo}){var c;const o=Mn.parse(i.uri);if(o?.method!==n.methodName)throw new Ar(Mr.MethodNotSupported,"Method not supported");const u=yield No.import({portableDid:i,keyManager:s});if(null===(c=u.document.verificationMethod)||void 0===c||!c.some(A=>{var S;return"0"===(null===(S=A.id)||void 0===S?void 0:S.split("#").pop())}))throw new Ar(Mr.InvalidDidDocument,"DID document must contain an Identity Key");return u})}static getSigningMethod(r){return as(this,arguments,void 0,function*({didDocument:i,methodId:s="#0"}){var c;const o=Mn.parse(i.id);if(o&&o.method!==this.methodName)throw new Ar(Mr.MethodNotSupported,`Method not supported: ${o.method}`);const u=null===(c=i.verificationMethod)||void 0===c?void 0:c.find(A=>{var S,y;return Oa(A.id)===(null!==(S=Oa(s))&&void 0!==S?S:Oa(null===(y=i.assertionMethod)||void 0===y?void 0:y[0]))});if(!u||!u.publicKeyJwk)throw new Ar(Mr.InternalError,"A verification method intended for signing could not be determined from the DID Document");return u})}static publish(r){return as(this,arguments,void 0,function*({did:i,gatewayUri:s=B4}){return yield Qc.put({did:i,gatewayUri:s})})}static resolve(r){return as(this,arguments,void 0,function*(i,s={}){var c;const o=null!==(c=s?.gatewayUri)&&void 0!==c?c:B4;try{yield Li.identifierToIdentityKey({didUri:i});const{didDocument:u,didDocumentMetadata:A}=yield Qc.get({didUri:i,gatewayUri:o});return Object.assign(Object.assign({},Oo),{didDocument:u,didDocumentMetadata:A})}catch(u){if(!(u instanceof Ar))throw new Error(u);return Object.assign(Object.assign({},Oo),{didResolutionMetadata:Object.assign({error:u.code},u.message&&{errorMessage:u.message})})}})}}return n.methodName="dht",n})();class Qc{static get(t){return as(this,arguments,void 0,function*({didUri:r,gatewayUri:i}){const s=Li.identifierToIdentityKeyBytes({didUri:r}),c=yield Qc.pkarrGet({gatewayUri:i,publicKeyBytes:s}),o=yield Li.parseBep44GetMessage({bep44Message:c}),u=yield Qc.fromDnsPacket({didUri:r,dnsPacket:o});return u.didDocumentMetadata.versionId=c.seq.toString(),u})}static put(t){return as(this,arguments,void 0,function*({did:r,gatewayUri:i}){const s=yield Qc.toDnsPacket({didDocument:r.document,didMetadata:r.metadata,authoritativeGatewayUris:[i]}),c=yield Li.createBep44PutMessage({dnsPacket:s,publicKeyBytes:Li.identifierToIdentityKeyBytes({didUri:r.uri}),signer:yield r.getSigner({methodId:"0"})}),o=yield Qc.pkarrPut({gatewayUri:i,bep44Message:c});return{didDocument:r.document,didDocumentMetadata:Object.assign(Object.assign({},r.metadata),{published:o,versionId:c.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet(t){return as(this,arguments,void 0,function*({gatewayUri:r,publicKeyBytes:i}){const s=Dt.uint8Array(i).toBase32Z(),c=new URL(s,r).href;let o;try{if(o=yield fetch(c,{method:"GET"}),!o.ok)throw new Ar(Mr.NotFound,`Pkarr record not found for: ${s}`)}catch(S){throw S instanceof Ar?S:new Ar(Mr.InternalError,`Failed to fetch Pkarr record: ${S.message}`)}const u=yield o.arrayBuffer();if(!u)throw new Ar(Mr.NotFound,`Pkarr record not found for: ${s}`);if(u.byteLength<72)throw new Ar(Mr.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${u.byteLength}`);if(u.byteLength>1072)throw new Ar(Mr.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${u.byteLength}`);return{k:i,seq:Number(new DataView(u).getBigUint64(64)),sig:new Uint8Array(u,0,64),v:new Uint8Array(u,72)}})}static pkarrPut(t){return as(this,arguments,void 0,function*({gatewayUri:r,bep44Message:i}){const s=Dt.uint8Array(i.k).toBase32Z(),c=new URL(s,r).href,o=new Uint8Array(i.v.length+72);let u;o.set(i.sig,0),new DataView(o.buffer).setBigUint64(i.sig.length,BigInt(i.seq)),o.set(i.v,i.sig.length+8);try{u=yield fetch(c,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:o})}catch(A){throw new Ar(Mr.InternalError,`Failed to put Pkarr record for identifier ${s}: ${A.message}`)}return u.ok})}static fromDnsPacket(t){return as(this,arguments,void 0,function*({didUri:r,dnsPacket:i}){var s,c,o;const u={id:r},A={published:!0},S=new Map;for(const y of null!==(s=i?.answers)&&void 0!==s?s:[]){if("TXT"!==y.type)continue;const R=y.name.split(".")[0].substring(1);switch(!0){case R.startsWith("aka"):{const ee=Li.parseTxtDataToString(y.data);u.alsoKnownAs=ee.split(ao);break}case R.startsWith("cnt"):{const ee=Li.parseTxtDataToString(y.data);u.controller=ee.includes(ao)?ee.split(ao):ee;break}case R.startsWith("k"):{const{id:ee,t:ae,k:te,c:fe,a:we}=Li.parseTxtDataToObject(y.data),Pe=Dt.base64Url(te).toUint8Array(),Te=wo[Number(ae)];let Ae=yield Li.keyConverter(Te).bytesToPublicKey({publicKeyBytes:Pe});Ae.alg=we||C4[Number(ae)];const Ce="k0"===R?"0":void 0!==ee?ee:yield tn({jwk:Ae});null!==(c=u.verificationMethod)&&void 0!==c||(u.verificationMethod=[]);const je=`${r}#${Ce}`;u.verificationMethod.push({id:je,type:"JsonWebKey",controller:fe??r,publicKeyJwk:Ae}),S.set(R,je);break}case R.startsWith("s"):{const ee=Li.parseTxtDataToObject(y.data),{id:ae,t:te,se:fe}=ee,we=P4(ee,["id","t","se"]),Pe=fe.includes(ao)?fe.split(ao):[fe],Te=Object.fromEntries(Object.entries(we).map(([Ae,Ce])=>[Ae,Ce.includes(ao)?Ce.split(ao):Ce]));null!==(o=u.service)&&void 0!==o||(u.service=[]),u.service.push(Object.assign(Object.assign({},Te),{id:`${r}#${ae}`,type:te,serviceEndpoint:Pe}));break}case R.startsWith("typ"):{const{id:ee}=Li.parseTxtDataToObject(y.data);A.types=ee.split(ao).map(ae=>Number(ae));break}case R.startsWith("did"):{const ee=Te=>Te.split(ao).map(Ae=>S.get(Ae)).filter(Ae=>"string"==typeof Ae),{auth:ae,asm:te,del:fe,inv:we,agm:Pe}=Li.parseTxtDataToObject(y.data);ae&&(u.authentication=ee(ae)),te&&(u.assertionMethod=ee(te)),fe&&(u.capabilityDelegation=ee(fe)),we&&(u.capabilityInvocation=ee(we)),Pe&&(u.keyAgreement=ee(Pe));break}}}return{didDocument:u,didDocumentMetadata:A,didResolutionMetadata:{}}})}static toDnsPacket(t){return as(this,arguments,void 0,function*({didDocument:r,didMetadata:i,authoritativeGatewayUris:s,previousDidProof:c}){var o,u,A,S,y;const R=[],ee=[],ae=new Map,te=[],fe=[];if(void 0!==c){const{signature:Te,previousDid:Ae}=c;yield Li.validatePreviousDidProof({newDid:r.id,previousDidProof:c}),R.push({type:"TXT",name:"_prv._did.",ttl:Jd,data:`id=${Ae};s=${Te}`})}if(r.alsoKnownAs&&R.push({type:"TXT",name:"_aka._did.",ttl:Jd,data:r.alsoKnownAs.join(ao)}),r.controller){const Te=Array.isArray(r.controller)?r.controller.join(ao):r.controller;R.push({type:"TXT",name:"_cnt._did.",ttl:Jd,data:Te})}for(const[Te,Ae]of null!==(u=null===(o=r.verificationMethod)||void 0===o?void 0:o.entries())&&void 0!==u?u:[]){const Ce=`k${Te}`;fe.push(Ce);let je=Ae.id.split("#").pop();ae.set(je,Ce);const Le=Ae.publicKeyJwk;if(!Le?.crv||!(Le.crv in O4))throw new Ar(Mr.InvalidPublicKeyType,`Verification method '${Ae.id}' contains an unsupported key type: ${null!==(A=Le?.crv)&&void 0!==A?A:"undefined"}`);const ze=wo[Le.crv],$e=yield Li.keyConverter(Le.crv).publicKeyToBytes({publicKey:Le}),ut=[`t=${ze}`,`k=${Dt.uint8Array($e).toBase64Url()}`];"0"!==je&&(yield tn({jwk:Le}))!==je&&ut.unshift(`id=${je}`),Le.alg!==C4[ze]&&ut.push(`a=${Le.alg}`),Ae.controller!==r.id&&ut.push(`c=${Ae.controller}`),R.push({type:"TXT",name:`_${Ce}._did.`,ttl:Jd,data:ut.join(";")})}null===(S=r.service)||void 0===S||S.forEach((Te,Ae)=>{const Ce=`s${Ae}`;te.push(Ce);let{id:je,type:Le,serviceEndpoint:ze}=Te,$e=P4(Te,["id","type","serviceEndpoint"]);je=Oa(je),ze=Array.isArray(ze)?ze.join(","):ze;const ut=Object.entries(Object.assign({id:je,t:Le,se:ze},$e)).map(([vt,at])=>`${vt}=${at}`).join(";"),ct=Li.chunkDataIfNeeded(ut);R.push({type:"TXT",name:`_${Ce}._did.`,ttl:Jd,data:ct})});const we=["v=0"];if(fe.length&&we.push(`vm=${fe.join(ao)}`),Object.keys(lm).forEach(Te=>{var Ae;const Ce=null===(Ae=r[Te])||void 0===Ae?void 0:Ae.map(je=>ae.get(je.split("#").pop()));Ce&&we.push(`${k4[Te]}=${Ce.join(ao)}`)}),te.length&&we.push(`svc=${te.join(ao)}`),null!==(y=i.types)&&void 0!==y&&y.length){const Ae=i.types.map(Ce=>"string"==typeof Ce?R4[Ce]:Ce);R.push({type:"TXT",name:"_typ._did.",ttl:Jd,data:`id=${Ae.join(ao)}`})}R.push({type:"TXT",name:"_did."+Qc.getUniqueDidSuffix(r.id)+".",ttl:Jd,data:we.join(";")});for(const Te of s||[])ee.push({type:"NS",name:"_did."+Qc.getUniqueDidSuffix(r.id)+".",ttl:Jd,data:Te+"."});return{id:0,type:"response",flags:1024,answers:[...R,...ee]}})}static getUniqueDidSuffix(t){return t.split(":")[2]}}class Li{static createBep44PutMessage(t){return as(this,arguments,void 0,function*({dnsPacket:r,publicKeyBytes:i,signer:s}){const c=Math.ceil(Date.now()/1e3),o=tg(r),u=h4.encode({seq:c,v:o}).subarray(1,-1);if(u.length>1e3)throw new Ar(Mr.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${u.length} bytes`);return{k:i,seq:c,sig:yield s.sign({data:u}),v:o}})}static identifierToIdentityKey(t){return as(this,arguments,void 0,function*({didUri:r}){let i=Li.identifierToIdentityKeyBytes({didUri:r});return yield Bn.bytesToPublicKey({publicKeyBytes:i})})}static identifierToIdentityKeyBytes({didUri:t}){const r=Mn.parse(t);if(!r)throw new Ar(Mr.InvalidDid,`Invalid DID URI: ${t}`);if(r.method!==bl.methodName)throw new Ar(Mr.MethodNotSupported,`Method not supported: ${r.method}`);let i;try{i=Dt.base32Z(r.id).toUint8Array()}catch{throw new Ar(Mr.InvalidPublicKey,"Failed to decode method-specific identifier")}if(32!==i.length)throw new Ar(Mr.InvalidPublicKeyLength,`Invalid public key length: ${i.length}`);return i}static identityKeyToIdentifier(t){return as(this,arguments,void 0,function*({identityKey:r}){const i=yield Bn.publicKeyToBytes({publicKey:r}),s=Dt.uint8Array(i).toBase32Z();return`did:${bl.methodName}:${s}`})}static keyConverter(t){const i={Ed25519:Bn,"P-256":{publicKeyToBytes:s=>as(this,[s],void 0,function*({publicKey:c}){const o=yield Cn.publicKeyToBytes({publicKey:c});return yield Cn.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Cn.bytesToPublicKey,privateKeyToBytes:Cn.privateKeyToBytes,bytesToPrivateKey:Cn.bytesToPrivateKey},secp256k1:{publicKeyToBytes:s=>as(this,[s],void 0,function*({publicKey:c}){const o=yield Pn.publicKeyToBytes({publicKey:c});return yield Pn.compressPublicKey({publicKeyBytes:o})}),bytesToPublicKey:Pn.bytesToPublicKey,privateKeyToBytes:Pn.privateKeyToBytes,bytesToPrivateKey:Pn.bytesToPrivateKey},X25519:Xu}[t];if(!i)throw new Ar(Mr.InvalidPublicKeyType,`Unsupported curve: ${t}`);return i}static parseBep44GetMessage(t){return as(this,arguments,void 0,function*({bep44Message:r}){const i=yield Bn.bytesToPublicKey({publicKeyBytes:r.k}),s=h4.encode({seq:r.seq,v:r.v}).subarray(1,-1);if(!(yield Bn.verify({key:i,signature:r.sig,data:s})))throw new Ar(Mr.InvalidSignature,"Invalid signature for DHT BEP44 message");return qb(r.v)})}static parseTxtDataToObject(t){return this.parseTxtDataToString(t).split(";").reduce((r,i)=>{const[s,c]=i.split("=");return r[s]=c,r},{})}static parseTxtDataToString(t){if("string"==typeof t)return t;if(t instanceof Uint8Array)return Dt.uint8Array(t).toString();if(Array.isArray(t))return t.map(r=>this.parseTxtDataToString(r)).join("");throw new Ar(Mr.InternalError,"Pkarr returned DNS TXT record with invalid data type")}static validatePreviousDidProof(t){return as(this,arguments,void 0,function*({newDid:r,previousDidProof:i}){const s=yield Li.identifierToIdentityKey({didUri:i.previousDid}),c=Li.identifierToIdentityKeyBytes({didUri:r}),o=Dt.base64Url(i.signature).toUint8Array();if(!(yield Bn.verify({key:s,data:c,signature:o})))throw new Ar(Mr.InvalidPreviousDidProof,"The previous DID proof is invalid.")})}static chunkDataIfNeeded(t){if(t.length<=255)return t;const r=[];for(let i=0;i<t.length;i+=255)r.push(t.slice(i,i+255));return r}}class Oi extends Error{constructor(t,r){super(`${t}: ${r}`),this.code=t,Object.setPrototypeOf(this,new.target.prototype)}}new Uint8Array(0);class Ej{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Sj{constructor(t,r,i){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return D4(this,t)}}class Aj{constructor(t){this.decoders=t}or(t){return D4(this,t)}decode(t){const i=this.decoders[t[0]];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const D4=(n,t)=>new Aj({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class Mj{constructor(t,r,i,s){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new Ej(t,r,i),this.decoder=new Sj(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const sg=({name:n,prefix:t,bitsPerChar:r,alphabet:i})=>(({name:n,prefix:t,encode:r,decode:i})=>new Mj(n,t,r,i))({prefix:t,name:n,encode:s=>((n,t,r)=>{const i="="===t[t.length-1],s=(1<<r)-1;let c="",o=0,u=0;for(let A=0;A<n.length;++A)for(u=u<<8|n[A],o+=8;o>r;)o-=r,c+=t[s&u>>o];if(o&&(c+=t[s&u<<r-o]),i)for(;c.length*r&7;)c+="=";return c})(s,i,r),decode:s=>((n,t,r,i)=>{const s={};for(let y=0;y<t.length;++y)s[t[y]]=y;let c=n.length;for(;"="===n[c-1];)--c;const o=new Uint8Array(c*r/8|0);let u=0,A=0,S=0;for(let y=0;y<c;++y){const R=s[n[y]];if(void 0===R)throw new SyntaxError(`Non-${i} character`);A=A<<r|R,u+=r,u>=8&&(u-=8,o[S++]=255&A>>u)}if(u>=r||255&A<<8-u)throw new SyntaxError("Unexpected end of data");return o})(s,i,r,n)}),$4=(sg({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sg({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),sg({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}));sg({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});class wc{static encode(t){return $4.baseEncode(t)}static decodeAsBytes(t,r){if(!wc.isBase64UrlString(t))throw new Oi("EncodedStringIncorrectEncoding",`Given ${r} must be base64url string.`);return $4.baseDecode(t)}static decodeAsString(t,r){const i=wc.decodeAsBytes(t,r);return wc.bytesToString(i)}static isBase64UrlString(t){return/^[A-Za-z0-9_-]+$/.test(t)}static stringToBytes(t){return(new TextEncoder).encode(t)}static bytesToString(t){return(new TextDecoder).decode(t)}}var Pj=I(95568),j4=function(n){return n.Public="public",n.Private="private",n}(j4||{});const bc=j4;class Uo{static validateEs256kOperationKey(t,r){const i=new Set(["kty","crv","x","y"]);r===bc.Private&&i.add("d");for(const s in t)if(!i.has(s))throw new Oi("PublicKeyJwkEs256kHasUnexpectedProperty",`SECP256K1 JWK key has unexpected property '${s}'.`);if("secp256k1"!==t.crv)throw new Oi("JwkEs256kMissingOrInvalidCrv",`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${t.crv}.'`);if("EC"!==t.kty)throw new Oi("JwkEs256kMissingOrInvalidKty",`SECP256K1 JWK 'kty' property must be 'EC' but got '${t.kty}.'`);if(43!==t.x.length)throw new Oi("JwkEs256kHasIncorrectLengthOfX","SECP256K1 JWK 'x' property must be 43 bytes.");if(43!==t.y.length)throw new Oi("JwkEs256kHasIncorrectLengthOfY","SECP256K1 JWK 'y' property must be 43 bytes.");if(r===bc.Private&&(void 0===t.d||43!==t.d.length))throw new Oi("JwkEs256kHasIncorrectLengthOfD","SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(t){if(t.length>50)throw new Oi("IdTooLong",`Key ID length ${t.length} exceed max allowed length of 50.`);if(!wc.isBase64UrlString(t))throw new Oi("IdNotUsingBase64UrlCharacterSet",`Key ID '${t}' is not a Base64URL string.`)}static validatePublicKeyPurposes(t){if(void 0===t)return;const r=new Set;for(const i of t){if(r.has(i))throw new Oi("PublicKeyPurposeDuplicated",`Public key purpose '${i}' already specified.`);r.add(i)}}}const Ca=(()=>{class n{}return n.hashAlgorithmInMultihashCode=18,n.maxCanonicalizedDeltaSizeInBytes=1e3,n})();var Bj=I(28846);class Yd{static canonicalizeAsBytes(t){const r=Yd.removeAllUndefinedProperties(t),i=Bj(r);return wc.stringToBytes(i)}static removeAllUndefinedProperties(t){for(const r in t)"object"==typeof t[r]?Yd.removeAllUndefinedProperties(t[r]):void 0===t[r]&&delete t[r];return t}}var U4=128,Oj=-128,Cj=Math.pow(2,31),Nj=128,F4=127,$j=Math.pow(2,7),jj=Math.pow(2,14),Uj=Math.pow(2,21),Lj=Math.pow(2,28),Fj=Math.pow(2,35),Kj=Math.pow(2,42),zj=Math.pow(2,49),Vj=Math.pow(2,56),Hj=Math.pow(2,63),Gj={encode:function L4(n,t,r){t=t||[];for(var i=r=r||0;n>=Cj;)t[r++]=255&n|U4,n/=128;for(;n&Oj;)t[r++]=255&n|U4,n>>>=7;return t[r]=0|n,L4.bytes=r-i+1,t},decode:function Zb(n,i){var o,r=0,s=0,c=i=i||0,u=n.length;do{if(c>=u)throw Zb.bytes=0,new RangeError("Could not decode varint");o=n[c++],r+=s<28?(o&F4)<<s:(o&F4)*Math.pow(2,s),s+=7}while(o>=Nj);return Zb.bytes=c-i,r},encodingLength:function(n){return n<$j?1:n<jj?2:n<Uj?3:n<Lj?4:n<Fj?5:n<Kj?6:n<zj?7:n<Vj?8:n<Hj?9:10}};const og=Gj,K4=(n,t=0)=>[og.decode(n,t),og.decode.bytes],z4=(n,t,r=0)=>(og.encode(n,t,r),t),V4=n=>og.encodingLength(n),H4=(n,t)=>{const r=t.byteLength,i=V4(n),s=i+V4(r),c=new Uint8Array(s+r);return z4(n,c,0),z4(r,c,i),c.set(t,s),new W4(n,r,t,c)};class W4{constructor(t,r,i,s){this.code=t,this.size=r,this.digest=i,this.bytes=s}}const G4=({name:n,code:t,encode:r})=>new Jj(n,t,r);class Jj{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?H4(this.code,r):r.then(i=>H4(this.code,i))}throw Error("Unknown type, must be binary type")}}const q4=n=>function(){var t=(0,it.A)(function*(r){return new Uint8Array(yield crypto.subtle.digest(n,r))});return function(r){return t.apply(this,arguments)}}(),Z4=G4({name:"sha2-256",code:18,encode:q4("SHA-256")});G4({name:"sha2-512",code:19,encode:q4("SHA-512")});var V0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class cs{static hash(t,r){return V0(this,void 0,void 0,function*(){let i;if(18!==r)throw new Oi("MultihashUnsupportedHashAlgorithm",`Hash algorithm defined in multihash code ${r} is not supported.`);return i=(yield Z4.digest(t)).bytes,i})}static hashAsNonMultihashBytes(t,r){return V0(this,void 0,void 0,function*(){let i;if(18!==r)throw new Oi("MultihashUnsupportedHashAlgorithm",`Hash algorithm defined in multihash code ${r} is not supported.`);return i=yield Z4.encode(t),i})}static canonicalizeThenHashThenEncode(t,r){return V0(this,void 0,void 0,function*(){const i=Yd.canonicalizeAsBytes(t);return yield cs.hashThenEncode(i,r)})}static canonicalizeThenDoubleHashThenEncode(t,r){return V0(this,void 0,void 0,function*(){const i=Yd.canonicalizeAsBytes(t),s=yield cs.hashAsNonMultihashBytes(i,r);return yield cs.hashThenEncode(s,r)})}static hashThenEncode(t,r){return V0(this,void 0,void 0,function*(){const i=yield cs.hash(t,r);return wc.encode(i)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(t,r){let i;const s=wc.decodeAsBytes(t,r);try{i=(n=>{const t=(n=>{if(n instanceof Uint8Array&&"Uint8Array"===n.constructor.name)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")})(n),[r,i]=K4(t),[s,c]=K4(t.subarray(i)),o=t.subarray(i+c);if(o.byteLength!==s)throw new Error("Incorrect length");return new W4(r,s,o,t)})(s)}catch{throw new Oi("MultihashStringNotAMultihash",`Given ${r} string '${t}' is not a multihash after decoding.`)}const c=Ca.hashAlgorithmInMultihashCode;if(c!==i.code)throw new Oi("MultihashUnsupportedHashAlgorithm",`Given ${r} uses unsupported multihash algorithm with code ${i.code}, should use ${c} or change IonSdkConfig to desired hashing algorithm.`)}}var J4=function(n){return n.Create="create",n.Update="update",n.Deactivate="deactivate",n.Recover="recover",n}(J4||{});const ag=J4;var Y4=function(n){return n.Replace="replace",n.AddPublicKeys="add-public-keys",n.RemovePublicKeys="remove-public-keys",n.AddServices="add-services",n.RemoveServices="remove-services",n}(Y4||{});const _l=Y4;var cg=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class bo{static createCreateRequest(t){return cg(this,void 0,void 0,function*(){const r=t.recoveryKey,i=t.updateKey,s=t.document.publicKeys,c=t.document.services;Uo.validateEs256kOperationKey(r,bc.Public),Uo.validateEs256kOperationKey(i,bc.Public),bo.validateDidDocumentKeys(s),bo.validateServices(c);const o=Ca.hashAlgorithmInMultihashCode,u=[{action:_l.Replace,document:t.document}],A={updateCommitment:yield cs.canonicalizeThenDoubleHashThenEncode(i,o),patches:u};bo.validateDeltaSize(A);const y={deltaHash:yield cs.canonicalizeThenHashThenEncode(A,o),recoveryCommitment:yield cs.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:ag.Create,suffixData:y,delta:A}})}static createDeactivateRequest(t){return cg(this,void 0,void 0,function*(){bo.validateDidSuffix(t.didSuffix),Uo.validateEs256kOperationKey(t.recoveryPublicKey,bc.Public);const r=Ca.hashAlgorithmInMultihashCode,i=yield cs.canonicalizeThenHashThenEncode(t.recoveryPublicKey,r),s={didSuffix:t.didSuffix,recoveryKey:t.recoveryPublicKey},c=yield t.signer.sign({alg:"ES256K"},s);return{type:ag.Deactivate,didSuffix:t.didSuffix,revealValue:i,signedData:c}})}static createRecoverRequest(t){return cg(this,void 0,void 0,function*(){bo.validateDidSuffix(t.didSuffix),Uo.validateEs256kOperationKey(t.recoveryPublicKey,bc.Public),Uo.validateEs256kOperationKey(t.nextRecoveryPublicKey,bc.Public),Uo.validateEs256kOperationKey(t.nextUpdatePublicKey,bc.Public),bo.validateDidDocumentKeys(t.document.publicKeys),bo.validateServices(t.document.services);const r=Ca.hashAlgorithmInMultihashCode,i=yield cs.canonicalizeThenHashThenEncode(t.recoveryPublicKey,r),o={patches:[{action:_l.Replace,document:t.document}],updateCommitment:yield cs.canonicalizeThenDoubleHashThenEncode(t.nextUpdatePublicKey,r)},u=yield cs.canonicalizeThenHashThenEncode(o,r),S={recoveryCommitment:yield cs.canonicalizeThenDoubleHashThenEncode(t.nextRecoveryPublicKey,r),recoveryKey:t.recoveryPublicKey,deltaHash:u},y=yield t.signer.sign({alg:"ES256K"},S);return{type:ag.Recover,didSuffix:t.didSuffix,revealValue:i,delta:o,signedData:y}})}static createUpdateRequest(t){return cg(this,void 0,void 0,function*(){if(bo.validateDidSuffix(t.didSuffix),Uo.validateEs256kOperationKey(t.updatePublicKey,bc.Public),Uo.validateEs256kOperationKey(t.nextUpdatePublicKey,bc.Public),bo.validateServices(t.servicesToAdd),bo.validateDidDocumentKeys(t.publicKeysToAdd),void 0!==t.idsOfServicesToRemove)for(const te of t.idsOfServicesToRemove)Uo.validateId(te);if(void 0!==t.idsOfPublicKeysToRemove)for(const te of t.idsOfPublicKeysToRemove)Uo.validateId(te);const r=[],i=t.servicesToAdd;void 0!==i&&i.length>0&&r.push({action:_l.AddServices,services:i});const s=t.idsOfServicesToRemove;void 0!==s&&s.length>0&&r.push({action:_l.RemoveServices,ids:s});const c=t.publicKeysToAdd;void 0!==c&&c.length>0&&r.push({action:_l.AddPublicKeys,publicKeys:c});const o=t.idsOfPublicKeysToRemove;void 0!==o&&o.length>0&&r.push({action:_l.RemovePublicKeys,ids:o});const u=Ca.hashAlgorithmInMultihashCode,A=yield cs.canonicalizeThenHashThenEncode(t.updatePublicKey,u),y={patches:r,updateCommitment:yield cs.canonicalizeThenDoubleHashThenEncode(t.nextUpdatePublicKey,u)},R=yield cs.canonicalizeThenHashThenEncode(y,u),ee={updateKey:t.updatePublicKey,deltaHash:R},ae=yield t.signer.sign({alg:"ES256K"},ee);return{type:ag.Update,didSuffix:t.didSuffix,revealValue:A,delta:y,signedData:ae}})}static validateDidSuffix(t){cs.validateEncodedHashComputedUsingSupportedHashAlgorithm(t,"didSuffix")}static validateDidDocumentKeys(t){if(void 0===t)return;const r=new Set;for(const i of t){if(Array.isArray(i.publicKeyJwk))throw new Oi("DidDocumentPublicKeyMissingOrIncorrectType","DID Document key 'publicKeyJwk' property is not a non-array object.");if(Uo.validateId(i.id),r.has(i.id))throw new Oi("DidDocumentPublicKeyIdDuplicated",`DID Document key with ID '${i.id}' already exists.`);r.add(i.id),Uo.validatePublicKeyPurposes(i.purposes)}}static validateServices(t){if(void 0!==t&&0!==t.length){const r=new Set;for(const i of t){if(bo.validateService(i),r.has(i.id))throw new Oi("DidDocumentServiceIdDuplicated","Service id has to be unique");r.add(i.id)}}}static validateService(t){if(Uo.validateId(t.id),t.type.length>30)throw new Oi("ServiceTypeTooLong",`Service endpoint type length ${t.type.length} exceeds max allowed length of 30.`);if(Array.isArray(t.serviceEndpoint))throw new Oi("ServiceEndpointCannotBeAnArray","Service endpoint value cannot be an array.");if("string"==typeof t.serviceEndpoint&&void 0!==Pj.parse(t.serviceEndpoint).error)throw new Oi("ServiceEndpointStringNotValidUri",`Service endpoint string '${t.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(t){const r=Yd.canonicalizeAsBytes(t);if(r.length>Ca.maxCanonicalizedDeltaSizeInBytes)throw new Oi("DeltaExceedsMaximumSize",`Delta of ${r.length} bytes exceeded limit of ${Ca.maxCanonicalizedDeltaSizeInBytes} bytes.`)}}var X4=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Jb{static createLongFormDid(t){return X4(this,void 0,void 0,function*(){const r=yield bo.createCreateRequest(t),i=yield Jb.computeDidUniqueSuffix(r.suffixData);let s;s=void 0===Ca.network||"mainnet"===Ca.network?`did:ion:${i}`:`did:ion:${Ca.network}:${i}`;const o=Yd.canonicalizeAsBytes({suffixData:r.suffixData,delta:r.delta});return`${s}:${wc.encode(o)}`})}static computeDidUniqueSuffix(t){return X4(this,void 0,void 0,function*(){const r=Yd.canonicalizeAsBytes(t),i=yield cs.hash(r,Ca.hashAlgorithmInMultihashCode);return wc.encode(i)})}}var Xd=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},ed=function(n){return n.Ed25519="Ed25519",n.secp256k1="secp256k1",n.secp256r1="secp256r1",n.X25519="X25519",n}(ed||{});const eU={Ed25519:ed.Ed25519,ES256K:ed.secp256k1,ES256:ed.secp256r1,"P-256":ed.secp256r1,secp256k1:ed.secp256k1,secp256r1:ed.secp256r1},e5="https://ion.tbd.engineering";let tU=(()=>{class n extends ng{static create(){return Xd(this,arguments,void 0,function*({keyManager:r=new vo,options:i={}}={}){var s,c,o,u,A,S,y;if(null!==(s=i.verificationMethods)&&void 0!==s&&s.some(Le=>!(Le.algorithm in eU)))throw new Error("One or more verification method algorithms are not supported");const R=null===(c=i.verificationMethods)||void 0===c?void 0:c.filter(Le=>"id"in Le).map(Le=>Le.id);if(R&&R.length!==new Set(R).size)throw new Error("One or more verification method IDs are not unique");if(null!==(o=i.services)&&void 0!==o&&o.some(Le=>!Le.id||!Le.type||!Le.serviceEndpoint))throw new Error("One or more services are missing required properties");const ee={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},ae=[];for(const Le of null!==(u=i.verificationMethods)&&void 0!==u?u:[ee]){const ze=yield r.generateKey({algorithm:Le.algorithm}),$e=yield r.getPublicKey({keyUri:ze});ae.push({id:Le.id,publicKeyJwk:$e,purposes:null!==(A=Le.purposes)&&void 0!==A?A:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}const te=yield r.generateKey({algorithm:ed.secp256k1}),fe=yield r.getPublicKey({keyUri:te}),we=yield r.generateKey({algorithm:ed.secp256k1}),Pe=yield r.getPublicKey({keyUri:we}),Te=yield aa.computeLongFormDidUri({recoveryKey:fe,updateKey:Pe,services:null!==(S=i.services)&&void 0!==S?S:[],verificationMethods:ae}),{didDocument:Ae,didResolutionMetadata:Ce}=yield n.resolve(Te,{gatewayUri:i.gatewayUri});if(null===Ae)throw new Error(`Unable to resolve DID during creation: ${Ce?.error}`);const je=new No({uri:Te,document:Ae,metadata:{published:!1,canonicalId:Te.split(":",3).join(":"),recoveryKey:fe,updateKey:Pe},keyManager:r});if(null===(y=i.publish)||void 0===y||y){const Le=yield n.publish({did:je,gatewayUri:i.gatewayUri});je.metadata=Le.didDocumentMetadata}return je})}static getSigningMethod(r){return Xd(this,arguments,void 0,function*({didDocument:i,methodId:s}){var c;const o=Mn.parse(i.id);if(o&&o.method!==this.methodName)throw new Ar(Mr.MethodNotSupported,`Method not supported: ${o.method}`);const u=null===(c=i.verificationMethod)||void 0===c?void 0:c.find(A=>{var S;return A.id===(s??(null===(S=i.assertionMethod)||void 0===S?void 0:S[0]))});if(!u||!u.publicKeyJwk)throw new Ar(Mr.InternalError,"A verification method intended for signing could not be determined from the DID Document");return u})}static import(r){return Xd(this,arguments,void 0,function*({portableDid:i,keyManager:s=new vo}){const c=Mn.parse(i.uri);if(c?.method!==n.methodName)throw new Ar(Mr.MethodNotSupported,"Method not supported");return yield No.import({portableDid:i,keyManager:s})})}static publish(r){return Xd(this,arguments,void 0,function*({did:i,gatewayUri:s=e5}){var c,o,u;const A=null!==(o=null===(c=i.document.verificationMethod)||void 0===c?void 0:c.map(R=>({id:R.id,publicKeyJwk:R.publicKeyJwk,purposes:N$({didDocument:i.document,methodId:R.id})})))&&void 0!==o?o:[],S=yield aa.createIonDocument({services:null!==(u=i.document.service)&&void 0!==u?u:[],verificationMethods:A}),y=yield aa.constructCreateRequest({ionDocument:S,recoveryKey:i.metadata.recoveryKey,updateKey:i.metadata.updateKey});try{const R=aa.appendPathToUrl({baseUrl:s,path:"/operations"}),ee=yield fetch(R,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});return{didDocument:i.document,didDocumentMetadata:Object.assign(Object.assign({},i.metadata),{published:ee.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:Mr.InternalError,errorMessage:`Failed to publish DID document for: ${i.uri}`}}}})}static resolve(r){return Xd(this,arguments,void 0,function*(i,s={}){var c,o;const u=Mn.parse(i);if(!u)return Object.assign(Object.assign({},Oo),{didResolutionMetadata:{error:"invalidDid"}});if(u.method!==n.methodName)return Object.assign(Object.assign({},Oo),{didResolutionMetadata:{error:"methodNotSupported"}});const A=null!==(c=s?.gatewayUri)&&void 0!==c?c:e5;try{const S=aa.appendPathToUrl({baseUrl:A,path:`/identifiers/${i}`}),y=yield fetch(S);if(!y.ok)throw new Ar(Mr.NotFound,`Unable to find DID document for: ${i}`);const{didDocument:R,didDocumentMetadata:ee}=yield y.json();return Object.assign(Object.assign(Object.assign({},Oo),R&&{didDocument:R}),{didDocumentMetadata:Object.assign({published:null===(o=ee?.method)||void 0===o?void 0:o.published},ee)})}catch(S){if(!(S instanceof Ar))throw new Error(S);return Object.assign(Object.assign({},Oo),{didResolutionMetadata:Object.assign({error:S.code},S.message&&{errorMessage:S.message})})}})}}return n.methodName="ion",n})();class aa{static appendPathToUrl({baseUrl:t,path:r}){const i=new URL(t);return i.pathname=i.pathname.endsWith("/")?i.pathname:i.pathname+"/",i.pathname+=r.startsWith("/")?r.substring(1):r,i.toString()}static computeLongFormDidUri(t){return Xd(this,arguments,void 0,function*({recoveryKey:r,updateKey:i,services:s,verificationMethods:c}){const o=yield aa.createIonDocument({services:s,verificationMethods:c}),u=aa.normalizeJwk(r),A=aa.normalizeJwk(i);return yield Jb.createLongFormDid({document:o,recoveryKey:u,updateKey:A})})}static constructCreateRequest(t){return Xd(this,arguments,void 0,function*({ionDocument:r,recoveryKey:i,updateKey:s}){return yield bo.createCreateRequest({document:r,recoveryKey:aa.normalizeJwk(i),updateKey:aa.normalizeJwk(s)})})}static createIonDocument(t){return Xd(this,arguments,void 0,function*({services:r,verificationMethods:i}){var s,c;const o=[];for(const S of i){let y=null!==(c=null!==(s=S.id)&&void 0!==s?s:S.publicKeyJwk.kid)&&void 0!==c?c:yield tn({jwk:S.publicKeyJwk});y=`${y.split("#").pop()}`;const R={id:y,publicKeyJwk:aa.normalizeJwk(S.publicKeyJwk),purposes:S.purposes,type:"JsonWebKey2020"};o.push(R)}return{publicKeys:o,services:r.map(S=>Object.assign(Object.assign({},S),{id:`${S.id.split("#").pop()}`}))}})}static normalizeJwk(t){const r=t.kty;let i;if("EC"===r)i={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if("oct"===r)i={k:t.k,kty:t.kty};else if("OKP"===r)i={crv:t.crv,kty:t.kty,x:t.x};else{if("RSA"!==r)throw new Error(`Unsupported key type: ${r}`);i={e:t.e,kty:t.kty,n:t.n}}return i}}var dg=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};let t5=(()=>{class n extends ng{static create(){return dg(this,arguments,void 0,function*({keyManager:r=new vo,options:i={}}={}){var s,c,o,u;if(i.algorithm&&i.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(i.verificationMethods&&1!==i.verificationMethods.length)throw new Error("The 'verificationMethods' option must contain exactly one entry");const A=null!==(u=null!==(s=i.algorithm)&&void 0!==s?s:null===(o=null===(c=i.verificationMethods)||void 0===c?void 0:c[0])||void 0===o?void 0:o.algorithm)&&void 0!==u?u:"Ed25519",S=yield r.generateKey({algorithm:A}),y=yield r.getPublicKey({keyUri:S}),R=Dt.object(y).toBase64Url(),ee=`did:${n.methodName}:${R}`,te=(yield n.resolve(ee)).didDocument;return new No({uri:ee,document:te,metadata:{},keyManager:r})})}static getSigningMethod(r){return dg(this,arguments,void 0,function*({didDocument:i}){var s;const c=Mn.parse(i.id);if(c&&c.method!==this.methodName)throw new Ar(Mr.MethodNotSupported,`Method not supported: ${c.method}`);const[o]=null!==(s=i.verificationMethod)&&void 0!==s?s:[];if(!o||!o.publicKeyJwk)throw new Ar(Mr.InternalError,"A verification method intended for signing could not be determined from the DID Document");return o})}static import(r){return dg(this,arguments,void 0,function*({portableDid:i,keyManager:s=new vo}){const c=Mn.parse(i.uri);if(c?.method!==n.methodName)throw new Ar(Mr.MethodNotSupported,"Method not supported");const o=yield No.import({portableDid:i,keyManager:s});if(1!==o.document.verificationMethod.length)throw new Ar(Mr.InvalidDidDocument,"DID document must contain exactly one verification method");return o})}static resolve(r,i){return dg(this,void 0,void 0,function*(){const s=Mn.parse(r);let c;try{c=Dt.base64Url(s.id).toObject()}catch{}if(!s||!c)return Object.assign(Object.assign({},Oo),{didResolutionMetadata:{error:"invalidDid"}});if(s.method!==n.methodName)return Object.assign(Object.assign({},Oo),{didResolutionMetadata:{error:"methodNotSupported"}});const o={"@context":["https://www.w3.org/ns/did/v1"],id:s.uri},u=`${o.id}#0`;switch(o.verificationMethod=[{id:u,type:"JsonWebKey",controller:o.id,publicKeyJwk:c}],o.authentication=[u],o.assertionMethod=[u],o.capabilityInvocation=[u],o.capabilityDelegation=[u],o.keyAgreement=[u],c.use){case"sig":delete o.keyAgreement;break;case"enc":delete o.authentication,delete o.assertionMethod,delete o.capabilityInvocation,delete o.capabilityDelegation}return Object.assign(Object.assign({},Oo),{didDocument:o})})}}return n.methodName="jwk",n})();var Da=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},Qd=function(n){return n.Ed25519="Ed25519",n.secp256k1="secp256k1",n.secp256r1="secp256r1",n.X25519="X25519",n}(Qd||{});const Yb={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},rU={Ed25519:Qd.Ed25519,ES256K:Qd.secp256k1,ES256:Qd.secp256r1,"P-256":Qd.secp256r1,secp256k1:Qd.secp256k1,secp256r1:Qd.secp256r1,X25519:Qd.X25519};let nU=(()=>{class n extends ng{static create(){return Da(this,arguments,void 0,function*({keyManager:r=new vo,options:i={}}={}){var s,c,o,u;if(i.algorithm&&i.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(i.verificationMethods&&1!==i.verificationMethods.length)throw new Error("The 'verificationMethods' option must contain exactly one entry");const A=null!==(u=null!==(s=i.algorithm)&&void 0!==s?s:null===(o=null===(c=i.verificationMethods)||void 0===c?void 0:c[0])||void 0===o?void 0:o.algorithm)&&void 0!==u?u:"Ed25519",S=yield r.generateKey({algorithm:A}),y=yield r.getPublicKey({keyUri:S}),R=yield td.publicKeyToMultibaseId({publicKey:y}),ee=`did:${n.methodName}:${R}`,te=(yield n.resolve(ee,i)).didDocument;return new No({uri:ee,document:te,metadata:{},keyManager:r})})}static getSigningMethod(r){return Da(this,arguments,void 0,function*({didDocument:i}){var s;const c=Mn.parse(i.id);if(c&&c.method!==this.methodName)throw new Ar(Mr.MethodNotSupported,`Method not supported: ${c.method}`);const[o]=i.assertionMethod||[],u=null===(s=i.verificationMethod)||void 0===s?void 0:s.find(A=>A.id===o);if(!u||!u.publicKeyJwk)throw new Ar(Mr.InternalError,"A verification method intended for signing could not be determined from the DID Document");return u})}static import(r){return Da(this,arguments,void 0,function*({portableDid:i,keyManager:s=new vo}){const c=Mn.parse(i.uri);if(c?.method!==n.methodName)throw new Ar(Mr.MethodNotSupported,"Method not supported");const o=yield No.import({portableDid:i,keyManager:s});if(1!==o.document.verificationMethod.length)throw new Ar(Mr.InvalidDidDocument,"DID document must contain exactly one verification method");return o})}static resolve(r,i){return Da(this,void 0,void 0,function*(){try{const s=yield n.createDocument({didUri:r,options:i});return Object.assign(Object.assign({},Oo),{didDocument:s})}catch(s){if(!(s instanceof Ar))throw new Error(s);return Object.assign(Object.assign({},Oo),{didResolutionMetadata:Object.assign({error:s.code},s.message&&{errorMessage:s.message})})}})}static createDocument(r){return Da(this,arguments,void 0,function*({didUri:i,options:s={}}){const{defaultContext:c="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:o=!1,enableExperimentalPublicKeyTypes:u=!1,publicKeyFormat:A="JsonWebKey2020"}=s,S={id:""},y=Mn.parse(i);if(!y)throw new Ar(Mr.InvalidDid,`Invalid DID URI: ${i}`);const R=y.id;if(y.method!==n.methodName)throw new Ar(Mr.MethodNotSupported,`Method not supported: ${y.method}`);if(!n.validateIdentifier(y))throw new Ar(Mr.InvalidDid,`Invalid DID URI: ${i}`);const ee=yield n.createSignatureMethod({didUri:i,multibaseValue:R,options:{enableExperimentalPublicKeyTypes:u,publicKeyFormat:A}});if(S.id=y.uri,S.verificationMethod=[ee],S.authentication=[ee.id],S.assertionMethod=[ee.id],S.capabilityInvocation=[ee.id],S.capabilityDelegation=[ee.id],!0===o){const fe="Ed25519VerificationKey2020"===A?"X25519KeyAgreementKey2020":"JsonWebKey2020",we=yield this.createEncryptionMethod({didUri:i,multibaseValue:R,options:{enableExperimentalPublicKeyTypes:u,publicKeyFormat:fe}});S.verificationMethod.push(we),S.keyAgreement=[we.id]}const ae=[c];return function D$({didDocument:n}){const r=jb({didDocument:n}).map(i=>i.type);return[...new Set(r)]}({didDocument:S}).forEach(fe=>{ae.push(Yb[fe])}),S["@context"]=ae,S})}static createEncryptionMethod(r){return Da(this,arguments,void 0,function*({didUri:i,multibaseValue:s,options:c}){const{enableExperimentalPublicKeyTypes:o,publicKeyFormat:u}=c,A={id:"",type:"",controller:""},{keyBytes:S,multicodecCode:y}=yield n.deriveEncryptionKey({multibaseValue:s}),R=S.byteLength,ee=td.MULTICODEC_PUBLIC_KEY_LENGTH[y];if(R!==ee)throw new Ar(Mr.InvalidPublicKeyLength,`Expected ${R} bytes. Actual: ${ee}`);const ae=e4({keyBytes:S,multicodecCode:y});A.id=`${i}#${ae}`;try{new URL(A.id)}catch{throw new Ar(Mr.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(u in Yb))throw new Ar(Mr.UnsupportedPublicKeyType,`Unsupported format: ${u}`);if(!1===o&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(u))throw new Ar(Mr.InvalidPublicKeyType,`Specified '${u}' without setting enableExperimentalPublicKeyTypes to true.`);if(A.type=u,A.controller=i,"X25519KeyAgreementKey2020"===u&&(A.publicKeyMultibase=ae),"JsonWebKey2020"===u){const{crv:fe}=yield td.multicodecToJwk({code:y});A.publicKeyJwk=yield td.keyConverter(fe).bytesToPublicKey({publicKeyBytes:S})}return A})}static createSignatureMethod(r){return Da(this,arguments,void 0,function*({didUri:i,multibaseValue:s,options:c}){const{enableExperimentalPublicKeyTypes:o,publicKeyFormat:u}=c,A={id:"",type:"",controller:""},{keyBytes:S,multicodecCode:y,multicodecName:R}=t4({multibaseKeyId:s}),ee=S.byteLength,ae=td.MULTICODEC_PUBLIC_KEY_LENGTH[y];if(ee!==ae)throw new Ar(Mr.InvalidPublicKeyLength,`Expected ${ee} bytes. Actual: ${ae}`);let te=!1;switch(R){case"secp256k1-pub":te=yield Pn.validatePublicKey({publicKeyBytes:S});break;case"ed25519-pub":te=yield Bn.validatePublicKey({publicKeyBytes:S});break;case"x25519-pub":te=!0}if(!te)throw new Ar(Mr.InvalidPublicKey,"Invalid public key detected.");A.id=`${i}#${s}`;try{new URL(A.id)}catch{throw new Ar(Mr.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(u in Yb))throw new Ar(Mr.UnsupportedPublicKeyType,`Unsupported format: ${u}`);if(!1===o&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(u))throw new Ar(Mr.InvalidPublicKeyType,`Specified '${u}' without setting enableExperimentalPublicKeyTypes to true.`);if(A.type=u,A.controller=i,"Ed25519VerificationKey2020"===u&&(A.publicKeyMultibase=s),"JsonWebKey2020"===u){const{crv:we}=yield td.multicodecToJwk({code:y});A.publicKeyJwk=yield td.keyConverter(we).bytesToPublicKey({publicKeyBytes:S})}return A})}static deriveEncryptionKey(r){return Da(this,arguments,void 0,function*({multibaseValue:i}){let s={keyBytes:new Uint8Array,multicodecCode:0};const{keyBytes:c,multicodecCode:o}=t4({multibaseKeyId:i});if(237===o){const u=yield td.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:c}),A=yield Bn.convertPublicKeyToX25519({publicKey:u});s={keyBytes:yield td.keyConverter("Ed25519").publicKeyToBytes({publicKey:A}),multicodecCode:236}}return s})}static validateIdentifier(r){const{method:i,id:s}=r,[c]=r.uri.split(":",1);return"did"===c&&"key"===i&&Number("1")>0&&"String"===pm(s)&&s.startsWith("z")}}return n.methodName="key",n})(),td=(()=>{class n{static jwkToMulticodec(r){return Da(this,arguments,void 0,function*({jwk:i}){const s=[];i.crv&&(s.push(i.crv),s.push(i.d?"private":"public"));const c=s.join(":"),o=n.JWK_TO_MULTICODEC[c];if(void 0===o)throw new Error(`Unsupported JWK to Multicodec conversion: '${c}'`);return{code:Ui.getCodeFromName({name:o}),name:o}})}static keyCompressor(r){const s={"P-256":Cn.compressPublicKey,secp256k1:Pn.compressPublicKey}[r];if(!s)throw new Ar(Mr.InvalidPublicKeyType,`Unsupported curve: ${r}`);return s}static keyConverter(r){const s={Ed25519:Bn,"P-256":Cn,secp256k1:Pn,X25519:Xu}[r];if(!s)throw new Ar(Mr.InvalidPublicKeyType,`Unsupported curve: ${r}`);return s}static multicodecToJwk(r){return Da(this,arguments,void 0,function*({code:i,name:s}){if(!(s?!i:i))throw new Error("Either 'name' or 'code' must be defined, but not both.");s=void 0===s?Ui.getNameFromCode({code:i}):s;const o=n.MULTICODEC_TO_JWK[s];if(void 0===o)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},o)})}static publicKeyToMultibaseId(r){return Da(this,arguments,void 0,function*({publicKey:i}){var s;if(!i?.crv||!(i.crv in rU))throw new Ar(Mr.InvalidPublicKeyType,`Public key contains an unsupported key type: ${null!==(s=i?.crv)&&void 0!==s?s:"undefined"}`);let c=yield n.keyConverter(i.crv).publicKeyToBytes({publicKey:i});/^(secp256k1|P-256|P-384|P-521)$/.test(i.crv)&&(c=yield n.keyCompressor(i.crv)({publicKeyBytes:c}));const{name:o}=yield n.jwkToMulticodec({jwk:i});return e4({keyBytes:c,multicodecName:o})})}}return n.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"},n.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32},n.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}},n})();var iU=I(62108),sU=I(37477);class Xb{constructor({db:t,location:r="DATA/DID_RESOLVERCACHE",ttl:i="15m"}={}){this.cache=t??new sU.Level(r),this.ttl=iU(i)}get(t){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{const r=yield this.cache.get(t),i=JSON.parse(r);return Date.now()>=i.ttlMillis?void this.cache.nextTick(()=>this.cache.del(t)):i.value}catch(r){if(r.notFound)return;throw r}})}set(t,r){const i={ttlMillis:Date.now()+this.ttl,value:r},s=JSON.stringify(i);return this.cache.put(t,s)}delete(t){return this.cache.del(t)}clear(){return this.cache.clear()}close(){return this.cache.close()}}const aU={get:function(n){return null},set:function(n,t){return null},delete:function(n){return null},clear:function(){return null},close:function(){return null}};var r5=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Qb{constructor({cache:t,didResolvers:r}){this.didResolvers=new Map,this.cache=t||aU;for(const i of r)this.didResolvers.set(i.methodName,i)}resolve(t,r){return r5(this,void 0,void 0,function*(){const i=Mn.parse(t);if(!i)return Object.assign(Object.assign({},Oo),{didResolutionMetadata:{error:Mr.InvalidDid,errorMessage:`Invalid DID URI: ${t}`}});const s=this.didResolvers.get(i.method);if(!s)return Object.assign(Object.assign({},Oo),{didResolutionMetadata:{error:Mr.MethodNotSupported,errorMessage:`Method not supported: ${i.method}`}});const c=yield this.cache.get(i.uri);if(c)return c;{const o=yield s.resolve(i.uri,r);return o.didResolutionMetadata.error||(yield this.cache.set(i.uri,o)),o}})}dereference(t,r){return r5(this,void 0,void 0,function*(){const i=Mn.parse(t);if(!i)return{dereferencingMetadata:{error:Mr.InvalidDidUrl},contentStream:null,contentMetadata:{}};const{didDocument:s,didResolutionMetadata:c,didDocumentMetadata:o}=yield this.resolve(i.uri);if(!s)return{dereferencingMetadata:{error:c.error},contentStream:null,contentMetadata:{}};if(!i.fragment||i.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};const{service:u=[],verificationMethod:A=[]}=s,S=new Set([t,i.fragment,`#${i.fragment}`]);let y;for(let R of A)if(S.has(R.id)){y=R;break}for(let R of u)if(S.has(R.id)){y=R;break}return y?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:y,contentMetadata:c}:{dereferencingMetadata:{error:Mr.NotFound},contentStream:null,contentMetadata:{}}})}}var El=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class e2{constructor(t){this.didResolver=t.didResolver,this.tenantGate=t.tenantGate,this.eventStream=t.eventStream,this.messageStore=t.messageStore,this.dataStore=t.dataStore,this.eventLog=t.eventLog,this.eventStream=t.eventStream,this.methodHandlers={[Cr.Events+hr.Get]:new LD(this.didResolver,this.eventLog),[Cr.Events+hr.Query]:new KD(this.didResolver,this.eventLog),[Cr.Events+hr.Subscribe]:new VD(this.didResolver,this.eventStream),[Cr.Messages+hr.Get]:new WD(this.didResolver,this.messageStore,this.dataStore),[Cr.Protocols+hr.Configure]:new rb(this.didResolver,this.messageStore,this.eventLog,this.eventStream),[Cr.Protocols+hr.Query]:new JD(this.didResolver,this.messageStore,this.dataStore),[Cr.Records+hr.Delete]:new ob(this.didResolver,this.messageStore,this.dataStore,this.eventLog,this.eventStream),[Cr.Records+hr.Query]:new Ud(this.didResolver,this.messageStore,this.dataStore),[Cr.Records+hr.Read]:new cb(this.didResolver,this.messageStore,this.dataStore),[Cr.Records+hr.Subscribe]:new lc(this.didResolver,this.messageStore,this.eventStream),[Cr.Records+hr.Write]:new qu(this.didResolver,this.messageStore,this.dataStore,this.eventLog,this.eventStream)}}static create(t){var r,i;return El(this,void 0,void 0,function*(){null!==(r=t.didResolver)&&void 0!==r||(t.didResolver=new Qb({didResolvers:[bl,tU,nU],cache:new Xb({location:"RESOLVERCACHE"})})),null!==(i=t.tenantGate)&&void 0!==i||(t.tenantGate=new jD);const s=new e2(t);return yield s.open(),s})}open(){var t;return El(this,void 0,void 0,function*(){yield this.messageStore.open(),yield this.dataStore.open(),yield this.eventLog.open(),yield null===(t=this.eventStream)||void 0===t?void 0:t.open()})}close(){var t;return El(this,void 0,void 0,function*(){yield null===(t=this.eventStream)||void 0===t?void 0:t.close(),yield this.messageStore.close(),yield this.dataStore.close(),yield this.eventLog.close()})}processMessage(t,r,i={}){var s;return El(this,void 0,void 0,function*(){const c=null!==(s=yield this.validateTenant(t))&&void 0!==s?s:yield this.validateMessageIntegrity(r);if(void 0!==c)return c;const{dataStream:o,subscriptionHandler:u}=i,A=r.descriptor.interface+r.descriptor.method;return yield this.methodHandlers[A].handle({tenant:t,message:r,dataStream:o,subscriptionHandler:u})})}validateTenant(t){var r;return El(this,void 0,void 0,function*(){const i=yield this.tenantGate.isActiveTenant(t);if(!i.isActiveTenant)return{status:{code:401,detail:null!==(r=i.detail)&&void 0!==r?r:`DID ${t} is not an active tenant.`}}})}validateMessageIntegrity(t){var r,i;return El(this,void 0,void 0,function*(){const s=null===(r=t?.descriptor)||void 0===r?void 0:r.interface,c=null===(i=t?.descriptor)||void 0===i?void 0:i.method;if(void 0===s||void 0===c)return{status:{code:400,detail:`Both interface and method must be present, interface: ${s}, method: ${c}`}};try{zt.validateJsonSchema(t)}catch(o){return Ln(o,400)}})}}function dU(n){return new Promise((t,r)=>{n.aborted?r(n.reason):n.addEventListener("abort",()=>{r(n.reason)})})}function js(n,t){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){return t?Promise.race([n,dU(t)]):n})}var Lo=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},Na=function(n){return this instanceof Na?(this.v=n,this):new Na(n)},t2=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=n[Symbol.asyncIterator];return t?t.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(c){r[c]=n[c]&&function(o){return new Promise(function(u,A){!function s(c,o,u,A){Promise.resolve(A).then(function(S){c({value:S,done:u})},o)}(u,A,(o=n[c](o)).done,o.value)})}}},i5=function(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=r.apply(n,t||[]),c=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(ee){i[ee]&&(s[ee]=function(ae){return new Promise(function(te,fe){c.push([ee,ae,te,fe])>1||u(ee,ae)})})}function u(ee,ae){try{!function A(ee){ee.value instanceof Na?Promise.resolve(ee.value.v).then(S,y):R(c[0][2],ee)}(i[ee](ae))}catch(te){R(c[0][3],te)}}function S(ee){u("next",ee)}function y(ee){u("throw",ee)}function R(ee,ae){ee(ae),c.shift(),c.length&&u(c[0][0],c[0][1])}};function Sl(n,t){return Lo(this,void 0,void 0,function*(){return new fb.Level(n,Object.assign(Object.assign({},t),{keyEncoding:"utf8"}))})}class W0{constructor(t,r){this.config=Object.assign({createLevelDatabase:Sl},t),this.db=r}open(){return Lo(this,void 0,void 0,function*(){switch(yield this.createLevelDatabase(),this.db.status){case"open":return;case"opening":return new Promise(t=>{this.db.once("open",t)});case"closing":return new Promise((t,r)=>{this.db.once("closed",()=>{this.db.open().then(t).catch(r)})});case"closed":return this.db.open()}})}close(){return Lo(this,void 0,void 0,function*(){if(this.db)switch(this.db.status){case"open":return this.db.close();case"opening":return new Promise((t,r)=>{this.db.once("open",()=>{this.db.close().then(t).catch(r)})});case"closing":return new Promise(t=>{this.db.once("closed",t)});case"closed":return}})}partition(t){return Lo(this,void 0,void 0,function*(){return yield this.createLevelDatabase(),new W0(this.config,this.db.sublevel(t,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding}))})}get(t,r){var i;return Lo(this,void 0,void 0,function*(){null===(i=r?.signal)||void 0===i||i.throwIfAborted(),yield js(this.createLevelDatabase(),r?.signal);try{return yield js(this.db.get(String(t)),r?.signal)}catch(s){if("LEVEL_NOT_FOUND"===s.code)return;throw s}})}has(t,r){return Lo(this,void 0,void 0,function*(){return!!(yield this.get(t,r))})}keys(t){var r,i;return i5(this,arguments,function*(){var c,o,u;null===(r=t?.signal)||void 0===r||r.throwIfAborted(),yield Na(js(this.createLevelDatabase(),t?.signal));try{for(var R,S=!0,y=t2(this.db.keys());!(c=(R=yield Na(y.next())).done);S=!0){S=!1;const ee=R.value;null===(i=t?.signal)||void 0===i||i.throwIfAborted(),yield yield Na(ee)}}catch(ee){o={error:ee}}finally{try{!S&&!c&&(u=y.return)&&(yield Na(u.call(y)))}finally{if(o)throw o.error}}})}iterator(t,r){var i,s;return i5(this,arguments,function*(){var o,u,A;null===(i=r?.signal)||void 0===i||i.throwIfAborted(),yield Na(js(this.createLevelDatabase(),r?.signal));try{for(var ee,y=!0,R=t2(this.db.iterator(t));!(o=(ee=yield Na(R.next())).done);y=!0){y=!1;const ae=ee.value;null===(s=r?.signal)||void 0===s||s.throwIfAborted(),yield yield Na(ae)}}catch(ae){u={error:ae}}finally{try{!y&&!o&&(A=R.return)&&(yield Na(A.call(R)))}finally{if(u)throw u.error}}})}put(t,r,i){var s;return Lo(this,void 0,void 0,function*(){return null===(s=i?.signal)||void 0===s||s.throwIfAborted(),yield js(this.createLevelDatabase(),i?.signal),js(this.db.put(String(t),r),i?.signal)})}delete(t,r){var i;return Lo(this,void 0,void 0,function*(){return null===(i=r?.signal)||void 0===i||i.throwIfAborted(),yield js(this.createLevelDatabase(),r?.signal),js(this.db.del(String(t)),r?.signal)})}isEmpty(t){var r,i,s;return Lo(this,void 0,void 0,function*(){try{for(var A,o=!0,u=t2(this.keys(t));A=yield u.next(),!(r=A.done);o=!0)return o=!1,!1}catch(S){i={error:S}}finally{try{!o&&!r&&(s=u.return)&&(yield s.call(u))}finally{if(i)throw i.error}}return!0})}clear(){return Lo(this,void 0,void 0,function*(){yield this.createLevelDatabase(),yield this.db.clear(),yield this.compactUnderlyingStorage()})}batch(t,r){var i;return Lo(this,void 0,void 0,function*(){return null===(i=r?.signal)||void 0===i||i.throwIfAborted(),yield js(this.createLevelDatabase(),r?.signal),js(this.db.batch(t),r?.signal)})}createPartitionOperation(t,r){return Object.assign(Object.assign({},r),{sublevel:this.db.sublevel(t,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding})})}compactUnderlyingStorage(t){var r,i,s;return Lo(this,void 0,void 0,function*(){null===(r=t?.signal)||void 0===r||r.throwIfAborted(),yield js(this.createLevelDatabase(),t?.signal);const c=this.sublevelRange;if(!c)return;const o=this.root;return o.db.supports.additionalMethods.compactRange?js(null===(s=(i=o.db).compactRange)||void 0===s?void 0:s.call(i,...c),t?.signal):void 0})}get sublevelRange(){const t=this.db.prefix;if(!t)return;const r=t.slice(0,-1)+String.fromCharCode(t.charCodeAt(t.length-1)+1);return[t,r]}get root(){let t=this.db;for(const r=t.db;r&&r!==t;)t=r;return new W0(this.config,t)}createLevelDatabase(){var t;return Lo(this,void 0,void 0,function*(){null!==(t=this.db)&&void 0!==t||(this.db=yield this.config.createLevelDatabase(this.config.location,{keyEncoding:"utf8",valueEncoding:this.config.valueEncoding}))})}}var rd=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},ug=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=n[Symbol.asyncIterator];return t?t.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(c){r[c]=n[c]&&function(o){return new Promise(function(u,A){!function s(c,o,u,A){Promise.resolve(A).then(function(S){c({value:S,done:u})},o)}(u,A,(o=n[c](o)).done,o.value)})}}},ds=function(n){return this instanceof ds?(this.v=n,this):new ds(n)},fg=function(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=r.apply(n,t||[]),c=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(ee){i[ee]&&(s[ee]=function(ae){return new Promise(function(te,fe){c.push([ee,ae,te,fe])>1||u(ee,ae)})})}function u(ee,ae){try{!function A(ee){ee.value instanceof ds?Promise.resolve(ee.value.v).then(S,y):R(c[0][2],ee)}(i[ee](ae))}catch(te){R(c[0][3],te)}}function S(ee){u("next",ee)}function y(ee){u("throw",ee)}function R(ee,ae){ee(ae),c.shift(),c.length&&u(c[0][0],c[0][1])}};class lg{constructor(t,r){this.config=Object.assign({createLevelDatabase:Sl},t),this.db=r??new W0(Object.assign(Object.assign({},this.config),{valueEncoding:"binary"}))}open(){return rd(this,void 0,void 0,function*(){return this.db.open()})}close(){return rd(this,void 0,void 0,function*(){return this.db.close()})}partition(t){return rd(this,void 0,void 0,function*(){const r=yield this.db.partition(t);return new lg(Object.assign(Object.assign({},this.config),{location:""}),r)})}put(t,r,i){return rd(this,void 0,void 0,function*(){return yield this.db.put(String(t),r,i),on.parse(t.toString())})}get(t,r){return rd(this,void 0,void 0,function*(){return yield this.db.get(String(t),r)})}has(t,r){return rd(this,void 0,void 0,function*(){return this.db.has(String(t),r)})}delete(t,r){return rd(this,void 0,void 0,function*(){return this.db.delete(String(t),r)})}isEmpty(t){return rd(this,void 0,void 0,function*(){return this.db.isEmpty(t)})}putMany(t,r){return fg(this,arguments,function*(){var s,c,o;try{for(var y,A=!0,S=ug(t);!(s=(y=yield ds(S.next())).done);A=!0){A=!1;const R=y.value;yield ds(this.put(R.cid,R.block,r)),yield yield ds(R.cid)}}catch(R){c={error:R}}finally{try{!A&&!s&&(o=S.return)&&(yield ds(o.call(S)))}finally{if(c)throw c.error}}})}getMany(t,r){return fg(this,arguments,function*(){var s,c,o;try{for(var y,A=!0,S=ug(t);!(s=(y=yield ds(S.next())).done);A=!0){A=!1;const R=y.value;yield yield ds({cid:R,block:yield ds(this.get(R,r))})}}catch(R){c={error:R}}finally{try{!A&&!s&&(o=S.return)&&(yield ds(o.call(S)))}finally{if(c)throw c.error}}})}getAll(t){return fg(this,arguments,function*(){var i,s,c,o;const u=this.db.iterator({keys:!0,keyEncoding:"buffer"},t);try{for(var y,A=!0,S=ug(u);!(i=(y=yield ds(S.next())).done);A=!0){o=y.value,A=!1;const[R,ee]=o;yield yield ds({cid:on.decode(R),block:ee})}}catch(R){s={error:R}}finally{try{!A&&!i&&(c=S.return)&&(yield ds(c.call(S)))}finally{if(s)throw s.error}}})}deleteMany(t,r){return fg(this,arguments,function*(){var s,c,o;try{for(var y,A=!0,S=ug(t);!(s=(y=yield ds(S.next())).done);A=!0){A=!1;const R=y.value;yield ds(this.delete(R,r)),yield yield ds(R)}}catch(R){c={error:R}}finally{try{!A&&!s&&(o=S.return)&&(yield ds(o.call(S)))}finally{if(c)throw c.error}}})}clear(){return rd(this,void 0,void 0,function*(){return this.db.clear()})}}var Ci=I(42853);const lU=function fU(n){if(function uU(n){return null!=n[Symbol.asyncIterator]}(n))return(0,it.A)(function*(){let r;var c,i=!1,s=!1;try{for(var u,o=ln(n);i=!(u=yield o.next()).done;i=!1)r=u.value}catch(A){s=!0,c=A}finally{try{i&&null!=o.return&&(yield o.return())}finally{if(s)throw c}}return r})();let t;for(const r of n)t=r;return t},pU_code=0,yU=function(){var n=(0,it.A)(function*(t,r,i,s,c,o,u,A){const S=yield u.get(t,A),y=N6(S);let R=y,ee=i;for(;s.length>0;){const ae=s[0];if(!(ae in R))throw Ci(new Error(`No property named ${ae} found in cbor node ${t}`),"ERR_NO_PROP");{s.shift(),ee=`${ee}/${ae}`;const te=on.asCID(R[ae]);if(null!=te)return{entry:{type:"object",name:r,path:i,cid:t,node:S,depth:o,size:BigInt(S.length),content:function(){var fe=An(function*(){yield y});return function(){return fe.apply(this,arguments)}}()},next:{cid:te,name:ae,path:ee,toResolve:s}};R=R[ae]}}return{entry:{type:"object",name:r,path:i,cid:t,node:S,depth:o,size:BigInt(S.length),content:(ae=An(function*(){yield y}),function(){return ae.apply(this,arguments)})}};var ae});return function(r,i,s,c,o,u,A,S){return n.apply(this,arguments)}}(),hg=function mU(n,t,r,i){const s=BigInt(n.length),c=BigInt(t+s);return r>=c||i<t?new Uint8Array(0):(i>=t&&i<c&&(n=n.subarray(0,Number(i-t))),r>=t&&r<c&&(n=n.subarray(Number(r-t))),n)},r2=(n,t=0,r=n)=>{const i=BigInt(n),s=BigInt(t??0);let c=BigInt(r);if(c!==i&&(c=s+c),c>i&&(c=i),s<0n)throw Ci(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(s>i)throw Ci(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(c<0n)throw Ci(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(c>i)throw Ci(new Error("Length must be less than the file size"),"ERR_INVALID_PARAMS");return{start:s,end:c}},gU=n=>{function r(){return(r=An(function*(i={}){const{start:s,end:c}=r2(n.length,i.offset,i.length),o=hg(n,0n,s,c);i.onProgress?.(new Yo("unixfs:exporter:progress:identity",{bytesRead:BigInt(o.byteLength),totalBytes:c-s,fileSize:BigInt(n.byteLength)})),yield o})).apply(this,arguments)}return function t(){return r.apply(this,arguments)}},vU=function(){var n=(0,it.A)(function*(t,r,i,s,c,o,u,A){if(s.length>0)throw Ci(new Error(`No link named ${i} found in raw node ${t}`),"ERR_NOT_FOUND");const S=a3(t.multihash.bytes);return{entry:{type:"identity",name:r,path:i,cid:t,content:gU(S.digest),depth:o,size:BigInt(S.digest.length),node:S.digest}}});return function(r,i,s,c,o,u,A,S){return n.apply(this,arguments)}}(),wU=n=>{function r(){return(r=An(function*(i={}){const{start:s,end:c}=r2(n.length,i.offset,i.length),o=hg(n,0n,s,c);i.onProgress?.(new Yo("unixfs:exporter:progress:raw",{bytesRead:BigInt(o.byteLength),totalBytes:c-s,fileSize:BigInt(n.byteLength)})),yield o})).apply(this,arguments)}return function t(){return r.apply(this,arguments)}},bU=function(){var n=(0,it.A)(function*(t,r,i,s,c,o,u,A){if(s.length>0)throw Ci(new Error(`No link named ${i} found in raw node ${t}`),"ERR_NOT_FOUND");const S=yield u.get(t,A);return{entry:{type:"raw",name:r,path:i,cid:t,content:wU(S),depth:o,size:BigInt(S.length),node:S}}});return function(r,i,s,c,o,u,A,S){return n.apply(this,arguments)}}(),_U=function(){var n=(0,it.A)(function*(t){return(yield K_.encode(t)).slice(0,8).reverse()});return function(r){return n.apply(this,arguments)}}(),xU=function(){var n=(0,it.A)(function*(t,r,i){yield Promise.all(t.map(function(){var s=(0,it.A)(function*(c){if(null==c.Name)throw new Error("Unexpected Link without a Name");if(2!==c.Name.length)yield i.put(c.Name.substring(2),!0);else{const o=parseInt(c.Name,16);r._putObjectAt(o,new Mo({hash:i._options.hash,bits:i._options.bits},r,o))}});return function(c){return s.apply(this,arguments)}}()))});return function(r,i,s){return n.apply(this,arguments)}}(),a5=n=>n.toString(16).toUpperCase().padStart(2,"0").substring(0,2),c5=function(){var n=(0,it.A)(function*(t,r,i,s,c){if(null==s){const R=ox({hashFn:_U});s={rootBucket:R,hamtDepth:1,lastBucket:R}}yield xU(t.Links,s.lastBucket,s.rootBucket);const o=yield s.rootBucket._findNewBucketAndPos(r);let u=a5(o.pos);const A=(n=>{let t=n.bucket;const r=[];for(;null!=t._parent;)r.push(t),t=t._parent;return r.push(t),r.reverse()})(o);A.length>s.hamtDepth&&(s.lastBucket=A[s.hamtDepth],u=a5(s.lastBucket._posAtParent));const S=t.Links.find(R=>{if(null==R.Name)return!1;const ee=R.Name.substring(0,2),ae=R.Name.substring(2);return!(ee!==u||""!==ae&&ae!==r)});if(null!=S)return null!=S.Name&&S.Name.substring(2)===r?S.Hash:(s.hamtDepth++,t=fh(yield i.get(S.Hash,c)),c5(t,r,i,s,c))});return function(r,i,s,c,o){return n.apply(this,arguments)}}(),SU=c5,d5=function AU(n){const[t,r]=null!=n[Symbol.asyncIterator]?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],i=[];return{peek:()=>t.next(),push:s=>{i.push(s)},next:()=>i.length>0?{done:!1,value:i.shift()}:t.next(),[r](){return this}}},n2=function BU(n,t){let r=0;if(function PU(n){return null!=n[Symbol.asyncIterator]}(n))return An(function*(){var y,A=!1,S=!1;try{for(var ee,R=ln(n);A=!(ee=yield lr(R.next())).done;A=!1){const ae=ee.value;yield t(ae,r++)}}catch(ae){S=!0,y=ae}finally{try{A&&null!=R.return&&(yield lr(R.return()))}finally{if(S)throw y}}})();const i=d5(n),{value:s,done:c}=i.next();if(!0===c)return function*(){}();const o=t(s,r++);if("function"==typeof o.then)return An(function*(){yield yield lr(o);var y,A=!1,S=!1;try{for(var ee,R=ln(i);A=!(ee=yield lr(R.next())).done;A=!1){const ae=ee.value;yield t(ae,r++)}}catch(ae){S=!0,y=ae}finally{try{A&&null!=R.return&&(yield lr(R.return()))}finally{if(S)throw y}}})();const u=t;return function*(){yield o;for(const A of i)yield u(A,r++)}()};function Al(){const n={};return n.promise=new Promise((t,r)=>{n.resolve=t,n.reject=r}),n}const pg=globalThis.CustomEvent??Event;function i2(n){return s2.apply(this,arguments)}function s2(){return s2=An(function*(n,t={}){let r=t.concurrency??1/0;r<1&&(r=1/0);const i=null!=t.ordered&&t.ordered,s=new EventTarget,c=[];let S,o=Al(),u=Al(),A=!1,y=!1;function R(){return i?c[0]?.done:!!c.find(te=>te.done)}function*ee(){for(;c.length>0&&c[0].done;){const te=c[0];if(c.shift(),!te.ok)throw y=!0,o.resolve(),te.err;yield te.value,o.resolve()}}function*ae(){for(;R();)for(let te=0;te<c.length;te++)if(c[te].done){const fe=c[te];if(c.splice(te,1),te--,!fe.ok)throw y=!0,o.resolve(),fe.err;yield fe.value,o.resolve()}}for(s.addEventListener("task-complete",()=>{u.resolve()}),Promise.resolve().then((0,it.A)(function*(){try{var we,te=!1,fe=!1;try{for(var Te,Pe=ln(n);te=!(Te=yield Pe.next()).done;te=!1){const Ae=Te.value;{if(c.length===r&&(o=Al(),yield o.promise),y)break;const Ce={done:!1};c.push(Ce),Ae().then(je=>{Ce.done=!0,Ce.ok=!0,Ce.value=je,s.dispatchEvent(new pg("task-complete"))},je=>{Ce.done=!0,Ce.err=je,s.dispatchEvent(new pg("task-complete"))})}}}catch(Ae){fe=!0,we=Ae}finally{try{te&&null!=Pe.return&&(yield Pe.return())}finally{if(fe)throw we}}A=!0,s.dispatchEvent(new pg("task-complete"))}catch(Ae){S=Ae,s.dispatchEvent(new pg("task-complete"))}}));;){if(R()||(u=Al(),yield lr(u.promise)),null!=S)throw S;if(i?yield*Xa(ln(ee())):yield*Xa(ln(ae())),A&&0===c.length)break}}),s2.apply(this,arguments)}class u5{buffer;mask;top;btm;next;constructor(t){if(!(t>0)||t-1&t)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return void 0===this.buffer[this.btm]}}class o2{size;hwm;head;tail;constructor(t={}){this.hwm=t.splitLimit??16,this.head=new u5(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return null!=t?.byteLength?t.byteLength:1}push(t){null!=t?.value&&(this.size+=this.calculateSize(t.value)),this.head.push(t)||(this.head=this.head.next=new u5(2*this.head.buffer.length),this.head.push(t))}shift(){let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const r=this.tail.next;this.tail.next=null,this.tail=r,t=this.tail.shift()}return null!=t?.value&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}}class RU extends Error{type;code;constructor(t,r){super(t??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}}function a2(n={}){return function f5(n,t){let s,c,o,r=(t=t??{}).onEnd,i=new o2,u=Al();const A=function(){var we=(0,it.A)(function*(){try{return i.isEmpty()?o?{done:!0}:yield new Promise((Pe,Te)=>{c=Ae=>{c=null,i.push(Ae);try{Pe(n(i))}catch(Ce){Te(Ce)}return s}}):n(i)}finally{i.isEmpty()&&queueMicrotask(()=>{u.resolve(),u=Al()})}});return function(){return we.apply(this,arguments)}}(),S=we=>null!=c?c(we):(i.push(we),s),R=we=>{if(o)return s;if(!0!==t?.objectMode&&null==we?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return S({done:!1,value:we})},ee=we=>o?s:(o=!0,null!=we?(we=>(i=new o2,null!=c?c({error:we}):(i.push({error:we}),s)))(we):S({done:!0}));if(s={[Symbol.asyncIterator](){return this},next:A,return:()=>(i=new o2,ee(),{done:!0}),throw:we=>(ee(we),{done:!0}),push:R,end:ee,get readableLength(){return i.size},onEmpty:(we=(0,it.A)(function*(Pe){const Te=Pe?.signal;if(Te?.throwIfAborted(),i.isEmpty())return;let Ae,Ce;null!=Te&&(Ae=new Promise((je,Le)=>{Ce=()=>{Le(new RU)},Te.addEventListener("abort",Ce)}));try{yield Promise.race([u.promise,Ae])}finally{null!=Ce&&null!=Te&&Te?.removeEventListener("abort",Ce)}}),function(Te){return we.apply(this,arguments)})},null==r)return s;var we;const fe=s;return s={[Symbol.asyncIterator](){return this},next:()=>fe.next(),throw:we=>(fe.throw(we),null!=r&&(r(we),r=void 0),{done:!0}),return:()=>(fe.return(),null!=r&&(r(),r=void 0),{done:!0}),push:R,end:we=>(fe.end(we),null!=r&&(r(we),r=void 0),s),get readableLength(){return fe.readableLength},onEmpty:we=>fe.onEmpty(we)},s}(r=>{const i=r.shift();if(null==i)return{done:!0};if(null!=i.error)throw i.error;return{done:!0===i.done,value:i.value}},n)}function kU(n){return null!=n[Symbol.asyncIterator]}function c2(n,...t){if(null==n)throw new Error("Empty pipeline");if(d2(n)){const i=n;n=()=>i.source}else if(h5(n)||l5(n)){const i=n;n=()=>i}const r=[n,...t];if(r.length>1&&d2(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let i=1;i<r.length-1;i++)d2(r[i])&&(r[i]=NU(r[i]));return DU(...r)}const DU=(...n)=>{let t;for(;n.length>0;)t=n.shift()(t);return t},l5=n=>null!=n?.[Symbol.asyncIterator],h5=n=>null!=n?.[Symbol.iterator],d2=n=>null!=n&&null!=n.sink&&null!=n.source,NU=n=>t=>{const r=n.sink(t);if(null!=r?.then){const i=a2({objectMode:!0});let s;r.then(()=>{i.end()},o=>{i.end(o)});const c=n.source;if(l5(c))s=function(){var o=An(function*(){yield*Xa(ln(c)),i.end()});return function(){return o.apply(this,arguments)}}();else{if(!h5(c))throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");s=function*(){yield*c,i.end()}}return function OU(...n){const t=[];for(const r of n)kU(r)||t.push(r);return t.length===n.length?function*(){for(const r of t)yield*r}():An(function*(){const r=a2({objectMode:!0});Promise.resolve().then((0,it.A)(function*(){try{yield Promise.all(n.map(function(){var i=(0,it.A)(function*(s){var u,c=!1,o=!1;try{for(var S,A=ln(s);c=!(S=yield A.next()).done;c=!1)r.push(S.value)}catch(y){o=!0,u=y}finally{try{c&&null!=A.return&&(yield A.return())}finally{if(o)throw u}}});return function(s){return i.apply(this,arguments)}}())),r.end()}catch(i){r.end(i)}})),yield*Xa(ln(r))})()}(i,s())}return n.source};var jU=I(50233);class p5 extends Error{constructor(t){super(t),this.name="TimeoutError"}}class UU extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const y5=n=>void 0===globalThis.DOMException?new UU(n):new DOMException(n),m5=n=>{const t=void 0===n.reason?y5("This operation was aborted."):n.reason;return t instanceof Error?t:y5(t)};var nd,ef=function(n,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(n):i?i.value:t.get(n)};nd=new WeakMap;const zU=class KU{constructor(){nd.set(this,[])}enqueue(t,r){const i={priority:(r={priority:0,...r}).priority,run:t};if(this.size&&ef(this,nd,"f")[this.size-1].priority>=r.priority)return void ef(this,nd,"f").push(i);const s=function FU(n,t,r){let i=0,s=n.length;for(;s>0;){const c=Math.trunc(s/2);let o=i+c;r(n[o],t)<=0?(i=++o,s-=c+1):s=c}return i}(ef(this,nd,"f"),i,(c,o)=>o.priority-c.priority);ef(this,nd,"f").splice(s,0,i)}dequeue(){const t=ef(this,nd,"f").shift();return t?.run}filter(t){return ef(this,nd,"f").filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return ef(this,nd,"f").length}};var Di,G0,q0,eu,yg,Z0,mg,$a,J0,Fo,gg,Ko,Y0,tu,vg,g5,v5,w5,b5,_5,wg,u2,f2,bg,x5,_g,bi=function(n,t,r,i,s){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?n!==t||!s:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(n,r):s?s.value=r:t.set(n,r),r},gr=function(n,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(n):i?i.value:t.get(n)};class E5 extends Error{}G0=new WeakMap,q0=new WeakMap,eu=new WeakMap,yg=new WeakMap,Z0=new WeakMap,mg=new WeakMap,$a=new WeakMap,J0=new WeakMap,Fo=new WeakMap,gg=new WeakMap,Ko=new WeakMap,Y0=new WeakMap,tu=new WeakMap,vg=new WeakMap,Di=new WeakSet,g5=function(){return gr(this,q0,"f")||gr(this,eu,"f")<gr(this,yg,"f")},v5=function(){return gr(this,Ko,"f")<gr(this,Y0,"f")},w5=function(){var t;bi(this,Ko,(t=gr(this,Ko,"f"),--t),"f"),gr(this,Di,"m",wg).call(this),this.emit("next")},b5=function(){gr(this,Di,"m",f2).call(this),gr(this,Di,"m",u2).call(this),bi(this,J0,void 0,"f")},_5=function(){const t=Date.now();if(void 0===gr(this,$a,"f")){const r=gr(this,mg,"f")-t;if(!(r<0))return void 0===gr(this,J0,"f")&&bi(this,J0,setTimeout(()=>{gr(this,Di,"m",b5).call(this)},r),"f"),!0;bi(this,eu,gr(this,G0,"f")?gr(this,Ko,"f"):0,"f")}return!1},wg=function(){if(0===gr(this,Fo,"f").size)return gr(this,$a,"f")&&clearInterval(gr(this,$a,"f")),bi(this,$a,void 0,"f"),this.emit("empty"),0===gr(this,Ko,"f")&&this.emit("idle"),!1;if(!gr(this,tu,"f")){const t=!gr(this,Di,"a",_5);if(gr(this,Di,"a",g5)&&gr(this,Di,"a",v5)){const r=gr(this,Fo,"f").dequeue();return!!r&&(this.emit("active"),r(),t&&gr(this,Di,"m",u2).call(this),!0)}}return!1},u2=function(){gr(this,q0,"f")||void 0!==gr(this,$a,"f")||(bi(this,$a,setInterval(()=>{gr(this,Di,"m",f2).call(this)},gr(this,Z0,"f")),"f"),bi(this,mg,Date.now()+gr(this,Z0,"f"),"f"))},f2=function(){0===gr(this,eu,"f")&&0===gr(this,Ko,"f")&&gr(this,$a,"f")&&(clearInterval(gr(this,$a,"f")),bi(this,$a,void 0,"f")),bi(this,eu,gr(this,G0,"f")?gr(this,Ko,"f"):0,"f"),gr(this,Di,"m",bg).call(this)},bg=function(){for(;gr(this,Di,"m",wg).call(this););},x5=function(){var n=(0,it.A)(function*(r){return new Promise((i,s)=>{r.addEventListener("abort",()=>{s(new E5("The task was aborted."))},{once:!0})})});return function t(r){return n.apply(this,arguments)}}(),_g=function(){var n=(0,it.A)(function*(r,i){return new Promise(s=>{const c=()=>{i&&!i()||(this.off(r,c),s())};this.on(r,c)})});return function t(r,i){return n.apply(this,arguments)}}();const HU=class VU extends jU{constructor(t){var r,i,s,c;if(super(),Di.add(this),G0.set(this,void 0),q0.set(this,void 0),eu.set(this,0),yg.set(this,void 0),Z0.set(this,void 0),mg.set(this,0),$a.set(this,void 0),J0.set(this,void 0),Fo.set(this,void 0),gg.set(this,void 0),Ko.set(this,0),Y0.set(this,void 0),tu.set(this,void 0),vg.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:zU,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(i=null===(r=t.intervalCap)||void 0===r?void 0:r.toString())&&void 0!==i?i:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(c=null===(s=t.interval)||void 0===s?void 0:s.toString())&&void 0!==c?c:""}\` (${typeof t.interval})`);bi(this,G0,t.carryoverConcurrencyCount,"f"),bi(this,q0,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),bi(this,yg,t.intervalCap,"f"),bi(this,Z0,t.interval,"f"),bi(this,Fo,new t.queueClass,"f"),bi(this,gg,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,bi(this,vg,!0===t.throwOnTimeout,"f"),bi(this,tu,!1===t.autoStart,"f")}get concurrency(){return gr(this,Y0,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);bi(this,Y0,t,"f"),gr(this,Di,"m",bg).call(this)}add(t,r={}){var i=this;return(0,it.A)(function*(){return r={timeout:i.timeout,throwOnTimeout:gr(i,vg,"f"),...r},new Promise((s,c)=>{gr(i,Fo,"f").enqueue((0,it.A)(function*(){var o,u,A;bi(i,Ko,(u=gr(i,Ko,"f"),++u),"f"),bi(i,eu,(A=gr(i,eu,"f"),++A),"f");try{if(null!==(o=r.signal)&&void 0!==o&&o.aborted)throw new E5("The task was aborted.");let S=t({signal:r.signal});r.timeout&&(S=function LU(n,t,r,i){let s;const c=new Promise((o,u)=>{if("number"!=typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((i={customTimers:{setTimeout,clearTimeout},...i}).signal){const{signal:A}=i;A.aborted&&u(m5(A)),A.addEventListener("abort",()=>{u(m5(A))})}s=i.customTimers.setTimeout.call(void 0,()=>{if("function"==typeof r){try{o(r())}catch(y){u(y)}return}const S=r instanceof Error?r:new p5("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof n.cancel&&n.cancel(),u(S)},t),(0,it.A)(function*(){try{o(yield n)}catch(A){u(A)}finally{i.customTimers.clearTimeout.call(void 0,s)}})()}else o(n)});return c.clear=()=>{clearTimeout(s),s=void 0},c}(Promise.resolve(S),r.timeout)),r.signal&&(S=Promise.race([S,gr(i,Di,"m",x5).call(i,r.signal)]));const y=yield S;s(y),i.emit("completed",y)}catch(S){if(S instanceof p5&&!r.throwOnTimeout)return void s();c(S),i.emit("error",S)}finally{gr(i,Di,"m",w5).call(i)}}),r),i.emit("add"),gr(i,Di,"m",wg).call(i)})})()}addAll(t,r){var i=this;return(0,it.A)(function*(){return Promise.all(t.map(function(){var s=(0,it.A)(function*(c){return i.add(c,r)});return function(c){return s.apply(this,arguments)}}()))})()}start(){return gr(this,tu,"f")?(bi(this,tu,!1,"f"),gr(this,Di,"m",bg).call(this),this):this}pause(){bi(this,tu,!0,"f")}clear(){bi(this,Fo,new(gr(this,gg,"f")),"f")}onEmpty(){var t=this;return(0,it.A)(function*(){0!==gr(t,Fo,"f").size&&(yield gr(t,Di,"m",_g).call(t,"empty"))})()}onSizeLessThan(t){var r=this;return(0,it.A)(function*(){gr(r,Fo,"f").size<t||(yield gr(r,Di,"m",_g).call(r,"next",()=>gr(r,Fo,"f").size<t))})()}onIdle(){var t=this;return(0,it.A)(function*(){0===gr(t,Ko,"f")&&0===gr(t,Fo,"f").size||(yield gr(t,Di,"m",_g).call(t,"idle"))})()}get size(){return gr(this,Fo,"f").size}sizeBy(t){return gr(this,Fo,"f").filter(t).length}get pending(){return gr(this,Ko,"f")}get isPaused(){return gr(this,tu,"f")}};function S5(n,t,r,i,s,c,o){return l2.apply(this,arguments)}function l2(){return l2=(0,it.A)(function*(n,t,r,i,s,c,o){if(t instanceof Uint8Array){const S=hg(t,i,s,c);return void r.push(S)}if(null==t.Data)throw Ci(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let u;try{u=Aa.unmarshal(t.Data)}catch(S){throw Ci(S,"ERR_NOT_UNIXFS")}if(null!=u.data){const y=hg(u.data,i,s,c);r.push(y),i+=BigInt(y.byteLength)}const A=[];if(t.Links.length!==u.blockSizes.length)throw Ci(new Error("Inconsistent block sizes and dag links"),"ERR_NOT_UNIXFS");for(let S=0;S<t.Links.length;S++){const ee=i+u.blockSizes[S];if((s>=i&&s<ee||c>=i&&c<=ee||s<i&&c>ee)&&A.push({link:t.Links[S],blockStart:i}),(i=ee)>c)break}yield c2(A,S=>n2(S,y=>(0,it.A)(function*(){const R=yield n.get(y.link.Hash,o);return{...y,block:R}})),S=>i2(S,{ordered:!0}),function(){var S=(0,it.A)(function*(y){var ae,R=!1,ee=!1;try{for(var fe,te=ln(y);R=!(fe=yield te.next()).done;R=!1){const{link:we,block:Pe,blockStart:Te}=fe.value;{let Ae;switch(we.Hash.code){case o1:Ae=fh(Pe);break;case bh:Ae=Pe;break;default:return void r.end(Ci(new Error(`Unsupported codec: ${we.Hash.code}`),"ERR_NOT_UNIXFS"))}const Ce=new HU({concurrency:1});Ce.on("error",je=>{r.end(je)}),Ce.add((0,it.A)(function*(){o.onProgress?.(new Yo("unixfs:exporter:walk:file",{cid:we.Hash})),yield S5(n,Ae,r,Te,s,c,o)})),yield Ce.onIdle()}}}catch(we){ee=!0,ae=we}finally{try{R&&null!=te.return&&(yield te.return())}finally{if(ee)throw ae}}});return function(y){return S.apply(this,arguments)}}()),i>=c&&r.end()}),l2.apply(this,arguments)}const A5=(n,t,r,i,s,c,o)=>{function A(){return(A=An(function*(S={}){const y=r.fileSize();if(void 0===y)throw new Error("File was a directory");const{start:R,end:ee}=r2(y,S.offset,S.length);if(0n===ee)return;let ae=0n;const te=ee-R,fe=a2();S.onProgress?.(new Yo("unixfs:exporter:walk:file",{cid:n})),S5(o,t,fe,0n,R,ee,S).catch(je=>{fe.end(je)});var Te,we=!1,Pe=!1;try{for(var Ce,Ae=ln(fe);we=!(Ce=yield lr(Ae.next())).done;we=!1){const je=Ce.value;if(null!=je){if(ae+=BigInt(je.byteLength),ae>te)throw fe.end(),Ci(new Error("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect"),"ERR_OVER_READ");ae===te&&fe.end(),S.onProgress?.(new Yo("unixfs:exporter:progress:unixfs:file",{bytesRead:ae,totalBytes:te,fileSize:y})),yield je}}}catch(je){Pe=!0,Te=je}finally{try{we&&null!=Ae.return&&(yield lr(Ae.return()))}finally{if(Pe)throw Te}}if(ae<te)throw Ci(new Error("Traversed entire DAG but did not read enough bytes"),"ERR_UNDER_READ")})).apply(this,arguments)}return function u(){return A.apply(this,arguments)}};function M5(n,t,r,i,s,c){return h2.apply(this,arguments)}function h2(){return h2=An(function*(n,t,r,i,s,c){const u=c2(n.Links,ae=>n2(ae,te=>(0,it.A)(function*(){const fe=null!=te.Name?te.Name.substring(2):null;if(null!=fe&&""!==fe){const we=yield r(te.Hash,fe,`${t}/${fe}`,[],i+1,s,c);return{entries:null==we.entry?[]:[we.entry]}}{const we=yield s.get(te.Hash,c);return n=fh(we),c.onProgress?.(new Yo("unixfs:exporter:walk:hamt-sharded-directory",{cid:te.Hash})),{entries:M5(n,t,r,i,s,c)}}})),ae=>i2(ae,{ordered:!0}));var y,A=!1,S=!1;try{for(var ee,R=ln(u);A=!(ee=yield lr(R.next())).done;A=!1){const{entries:ae}=ee.value;yield*Xa(ln(ae))}}catch(ae){S=!0,y=ae}finally{try{A&&null!=R.return&&(yield lr(R.return()))}finally{if(S)throw y}}}),h2.apply(this,arguments)}const ZU={raw:A5,file:A5,directory:(n,t,r,i,s,c,o)=>{function A(){return(A=An(function*(S={}){const ee=t.Links.slice(S.offset??0,S.length??t.Links.length);S.onProgress?.(new Yo("unixfs:exporter:walk:directory",{cid:n})),yield*Xa(ln(c2(ee,ae=>n2(ae,te=>(0,it.A)(function*(){const fe=te.Name??"",we=`${i}/${fe}`;return(yield s(te.Hash,fe,we,[],c+1,o,S)).entry})),ae=>i2(ae,{ordered:!0}),ae=>function TU(n,t){let r=0;if(function MU(n){return null!=n[Symbol.asyncIterator]}(n))return An(function*(){var y,A=!1,S=!1;try{for(var ee,R=ln(n);A=!(ee=yield lr(R.next())).done;A=!1){const ae=ee.value;(yield lr(t(ae,r++)))&&(yield ae)}}catch(ae){S=!0,y=ae}finally{try{A&&null!=R.return&&(yield lr(R.return()))}finally{if(S)throw y}}})();const i=d5(n),{value:s,done:c}=i.next();if(!0===c)return function*(){}();const o=t(s,r++);if("function"==typeof o.then)return An(function*(){(yield lr(o))&&(yield s);var y,A=!1,S=!1;try{for(var ee,R=ln(i);A=!(ee=yield lr(R.next())).done;A=!1){const ae=ee.value;(yield lr(t(ae,r++)))&&(yield ae)}}catch(ae){S=!0,y=ae}finally{try{A&&null!=R.return&&(yield lr(R.return()))}finally{if(S)throw y}}})();const u=t;return function*(){!0===o&&(yield s);for(const A of i)u(A,r++)&&(yield A)}()}(ae,te=>null!=te))))})).apply(this,arguments)}return function u(){return A.apply(this,arguments)}},"hamt-sharded-directory":(n,t,r,i,s,c,o)=>function u(A={}){return A.onProgress?.(new Yo("unixfs:exporter:walk:hamt-sharded-directory",{cid:n})),M5(t,i,s,c,o,A)},metadata:(n,t,r,i,s,c,o)=>()=>[],symlink:(n,t,r,i,s,c,o)=>()=>[]},JU=function(){var n=(0,it.A)(function*(t,r,i,s,c,o,u,A){const y=fh(yield u.get(t,A));let R,ee;if(null==r&&(r=t.toString()),null==y.Data)throw Ci(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{R=Aa.unmarshal(y.Data)}catch(te){throw Ci(te,"ERR_NOT_UNIXFS")}if(null==i&&(i=r),s.length>0){let te;if(te="hamt-sharded-directory"===R?.type?yield SU(y,s[0],u):((n,t)=>n.Links.find(i=>i.Name===t)?.Hash)(y,s[0]),null==te)throw Ci(new Error("file does not exist"),"ERR_NOT_FOUND");const fe=s.shift();ee={cid:te,toResolve:s,name:fe??"",path:`${i}/${fe}`}}const ae=ZU[R.type](t,y,R,i,c,o,u);if(null==ae)throw Ci(new Error("could not find content exporter"),"ERR_NOT_FOUND");return R.isDirectory()?{entry:{type:"directory",name:r,path:i,cid:t,content:ae,unixfs:R,depth:o,node:y,size:R.fileSize()},next:ee}:{entry:{type:"file",name:r,path:i,cid:t,content:ae,unixfs:R,depth:o,node:y,size:R.fileSize()},next:ee}});return function(r,i,s,c,o,u,A,S){return n.apply(this,arguments)}}(),YU={[o1]:JU,[bh]:bU,[qp]:yU,[pU_code]:vU},T5=function(){var n=(0,it.A)(function*(t,r,i,s,c,o,u){const A=YU[t.code];if(null==A)throw Ci(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return A(t,r,i,s,T5,c,o,u)});return function(r,i,s,c,o,u,A){return n.apply(this,arguments)}}(),XU=T5,eL=n=>{if(n instanceof Uint8Array)return{cid:on.decode(n),toResolve:[]};const t=on.asCID(n);if(null!=t)return{cid:t,toResolve:[]};if("string"==typeof n){0===n.indexOf("/ipfs/")&&(n=n.substring(6));const r=((n="")=>(n.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean))(n);return{cid:on.parse(r[0]),toResolve:r.slice(1)}}throw Ci(new Error(`Unknown path type ${n}`),"ERR_BAD_PATH")};function p2(){return p2=An(function*(n,t,r={}){let{cid:i,toResolve:s}=eL(n),c=i.toString(),o=c;const u=s.length;for(;;){const A=yield lr(XU(i,c,o,s,u,t,r));if(null==A.entry&&null==A.next)throw Ci(new Error(`Could not resolve ${n}`),"ERR_NOT_FOUND");if(null!=A.entry&&(yield A.entry),null==A.next)return;s=A.next.toResolve,i=A.next.cid,c=A.next.name,o=A.next.path}}),p2.apply(this,arguments)}function y2(){return y2=(0,it.A)(function*(n,t,r={}){const i=yield lU(function tL(n,t){return p2.apply(this,arguments)}(n,t,r));if(null==i)throw Ci(new Error(`Could not resolve ${n}`),"ERR_NOT_FOUND");return i}),y2.apply(this,arguments)}var ru=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class nL{constructor(t={}){this.config=Object.assign({blockstoreLocation:"DATASTORE",createLevelDatabase:Sl},t),this.blockstore=new lg({location:this.config.blockstoreLocation,createLevelDatabase:this.config.createLevelDatabase})}open(){return ru(this,void 0,void 0,function*(){yield this.blockstore.open()})}close(){return ru(this,void 0,void 0,function*(){yield this.blockstore.close()})}put(t,r,i,s){var c,o,u,S,y;return ru(this,void 0,void 0,function*(){const R=yield this.getBlockstoreForStoringData(t,r,i),ee=Mh([{content:s}],R,{cidVersion:1});let ae;try{for(var we,te=!0,fe=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=n[Symbol.asyncIterator];return t?t.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(c){r[c]=n[c]&&function(o){return new Promise(function(u,A){!function s(c,o,u,A){Promise.resolve(A).then(function(S){c({value:S,done:u})},o)}(u,A,(o=n[c](o)).done,o.value)})}}}(ee);we=yield fe.next(),!(c=we.done);te=!0)te=!1,ae=we.value}catch(Pe){o={error:Pe}}finally{try{!te&&!c&&(u=fe.return)&&(yield u.call(fe))}finally{if(o)throw o.error}}return{dataSize:Number(null!==(y=null===(S=ae.unixfs)||void 0===S?void 0:S.fileSize())&&void 0!==y?y:ae.size)}})}get(t,r,i){return ru(this,void 0,void 0,function*(){const s=yield this.getBlockstoreForStoringData(t,r,i);if(!(yield s.has(i)))return;const o=yield function I5(n,t){return y2.apply(this,arguments)}(i,s),u=o.content(),A=new Ih.Readable({read(){return ru(this,void 0,void 0,function*(){const y=yield u.next();this.push(y.done?null:y.value)})}});let S=o.size;return("file"===o.type||"directory"===o.type)&&(S=o.unixfs.fileSize()),{dataSize:Number(S),dataStream:A}})}delete(t,r,i){return ru(this,void 0,void 0,function*(){yield(yield this.getBlockstoreForStoringData(t,r,i)).clear()})}clear(){return ru(this,void 0,void 0,function*(){yield this.blockstore.clear()})}getBlockstoreForStoringData(t,r,i){return ru(this,void 0,void 0,function*(){return yield(yield(yield(yield this.blockstore.partition("data")).partition(t)).partition(r)).partition(i)})}}var Xi=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},X0=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=n[Symbol.asyncIterator];return t?t.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(c){r[c]=n[c]&&function(o){return new Promise(function(u,A){!function s(c,o,u,A){Promise.resolve(A).then(function(S){c({value:S,done:u})},o)}(u,A,(o=n[c](o)).done,o.value)})}}},tf=function(n){return this instanceof tf?(this.v=n,this):new tf(n)};let xg=(()=>{class n{constructor(r){this.config=Object.assign({createLevelDatabase:Sl},r),this.db=new W0({location:this.config.location,createLevelDatabase:this.config.createLevelDatabase,keyEncoding:"utf8"})}open(){return Xi(this,void 0,void 0,function*(){yield this.db.open()})}close(){return Xi(this,void 0,void 0,function*(){yield this.db.close()})}clear(){return Xi(this,void 0,void 0,function*(){yield this.db.clear()})}put(r,i,s,c){return Xi(this,void 0,void 0,function*(){if(My(s))throw new Ot(Rt.IndexMissingIndexableProperty,"Index must include at least one valid indexable property");const o={messageCid:i,indexes:s},u=[];for(const R in s){const ee=s[R];if(Array.isArray(ee))for(const ae of ee){const te=this.createPutIndexedItemOperation(r,o,R,ae);u.push(te)}else{const ae=this.createPutIndexedItemOperation(r,o,R,ee);u.push(ae)}}const A=this.createOperationForIndexesLookupPartition(r,{type:"put",key:i,value:JSON.stringify(s)});u.push(A);const S=yield Promise.all(u);yield(yield this.db.partition(r)).batch(S,c)})}delete(r,i,s){return Xi(this,void 0,void 0,function*(){const c=[],o=yield this.getIndexes(r,i);if(void 0===o)return;const u=this.createOperationForIndexesLookupPartition(r,{type:"del",key:i});c.push(u);for(const y in o){const R=o[y];if(Array.isArray(R))for(const ee of R){const ae=this.createDeleteIndexedItemOperation(r,i,y,ee);c.push(ae)}else{const ee=this.createDeleteIndexedItemOperation(r,i,y,R);c.push(ee)}}const A=yield Promise.all(c);yield(yield this.db.partition(r)).batch(A,s)})}createPutIndexedItemOperation(r,i,s,c){return Xi(this,void 0,void 0,function*(){const{messageCid:o}=i,u=n.keySegmentJoin(n.encodeValue(c),o);return this.createOperationForIndexPartition(r,s,{type:"put",key:u,value:JSON.stringify(i)})})}createDeleteIndexedItemOperation(r,i,s,c){return Xi(this,void 0,void 0,function*(){const o=n.keySegmentJoin(n.encodeValue(c),i);return this.createOperationForIndexPartition(r,s,{type:"del",key:o})})}createOperationForIndexPartition(r,i,s){return Xi(this,void 0,void 0,function*(){const c=yield this.db.partition(r),o=n.getIndexPartitionName(i);return c.createPartitionOperation(o,s)})}createOperationForIndexesLookupPartition(r,i){return Xi(this,void 0,void 0,function*(){return(yield this.db.partition(r)).createPartitionOperation("index",i)})}static getIndexPartitionName(r){return`__${r}__`}getIndexPartition(r,i){return Xi(this,void 0,void 0,function*(){const s=n.getIndexPartitionName(i);return(yield this.db.partition(r)).partition(s)})}getIndexesLookupPartition(r){return Xi(this,void 0,void 0,function*(){return(yield this.db.partition(r)).partition("index")})}query(r,i,s,c){return Xi(this,void 0,void 0,function*(){return n.shouldQueryWithInMemoryPaging(i,s)?this.queryWithInMemoryPaging(r,i,s,c):this.queryWithIteratorPaging(r,i,s,c)})}queryWithIteratorPaging(r,i,s,c){var o,u,A;return Xi(this,void 0,void 0,function*(){const{cursor:y,limit:R}=s,ee=y?this.createStartingKeyFromCursor(y):"",ae=[];try{for(var we,te=!0,fe=X0(this.getIndexIterator(r,ee,s,c));we=yield fe.next(),!(o=we.done);te=!0){te=!1;const Pe=we.value;if(void 0!==R&&R===ae.length)break;const{indexes:Te}=Pe;eo.matchAnyFilter(Te,i)&&ae.push(Pe)}}catch(Pe){u={error:Pe}}finally{try{!te&&!o&&(A=fe.return)&&(yield A.call(fe))}finally{if(u)throw u.error}}return ae})}getIndexIterator(r,i,s,c){return function(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=r.apply(n,t||[]),c=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(ee){i[ee]&&(s[ee]=function(ae){return new Promise(function(te,fe){c.push([ee,ae,te,fe])>1||u(ee,ae)})})}function u(ee,ae){try{!function A(ee){ee.value instanceof tf?Promise.resolve(ee.value.v).then(S,y):R(c[0][2],ee)}(i[ee](ae))}catch(te){R(c[0][3],te)}}function S(ee){u("next",ee)}function y(ee){u("throw",ee)}function R(ee,ae){ee(ae),c.shift(),c.length&&u(c[0][0],c[0][1])}}(this,arguments,function*(){var u,A,S,y;const{sortProperty:R,sortDirection:ee=ra.Ascending,cursor:ae}=s,te={gt:i};ee===ra.Descending&&(te.reverse=!0,void 0!==ae&&(te.lt=i,delete te.gt));const fe=yield tf(this.getIndexPartition(r,R));try{for(var Te,we=!0,Pe=X0(fe.iterator(te,c));!(u=(Te=yield tf(Pe.next())).done);we=!0){y=Te.value,we=!1;const[Ae,Ce]=y,{indexes:je,messageCid:Le}=JSON.parse(Ce);yield yield tf({indexes:je,messageCid:Le})}}catch(Ae){A={error:Ae}}finally{try{!we&&!u&&(S=Pe.return)&&(yield tf(S.call(Pe)))}finally{if(A)throw A.error}}})}createStartingKeyFromCursor(r){const{messageCid:i,value:s}=r;return n.keySegmentJoin(n.encodeValue(s),i)}static createCursorFromLastArrayItem(r,i){if(r.length>0)return this.createCursorFromItem(r.at(-1),i)}static createCursorFromItem(r,i){const{messageCid:s,indexes:c}=r,o=c[i];if(void 0===o)throw new Ot(Rt.IndexInvalidCursorSortProperty,`the sort property '${i}' is not defined within the given item.`);if("boolean"==typeof o||Array.isArray(o))throw new Ot(Rt.IndexInvalidCursorValueType,`only string or number values are supported for cursors, a(n) ${typeof o} was given.`);return{messageCid:s,value:o}}queryWithInMemoryPaging(r,i,s,c){return Xi(this,void 0,void 0,function*(){const{sortProperty:o,sortDirection:u=ra.Ascending,cursor:A,limit:S}=s,y=A?this.createStartingKeyFromCursor(A):void 0,R=new Map;0===i.length&&(i=[{}]);try{yield Promise.all(i.map(fe=>this.executeSingleFilterQuery(r,fe,o,R,c)))}catch(fe){if(fe.code===Rt.IndexInvalidSortPropertyInMemory)return[]}const ee=[...R.values()].sort((fe,we)=>this.sortItems(fe,we,o,u)),ae=void 0!==y?this.findCursorStartingIndex(ee,u,o,y):0;return ae<0?[]:ee.slice(ae,void 0!==S?ae+S:void 0)})}executeSingleFilterQuery(r,i,s,c,o){return Xi(this,void 0,void 0,function*(){const u=[];if(My(i)){const S=this.getAllItems(r,s);u.push(S)}const A=PC.reduceFilter(i);for(const S in A){const y=A[S];if(eo.isEqualFilter(y)){const R=this.filterExactMatches(r,S,y,o);u.push(R)}else if(eo.isOneOfFilter(y))for(const R of new Set(y)){const ee=this.filterExactMatches(r,S,R,o);u.push(ee)}else if(eo.isRangeFilter(y)){const R=this.filterRangeMatches(r,S,y,o);u.push(R)}}for(const S of u){const y=yield S;for(const R of y)if(!c.has(R.messageCid)&&eo.matchFilter(R.indexes,i)){if(void 0===R.indexes[s])throw new Ot(Rt.IndexInvalidSortPropertyInMemory,`invalid sort property ${s}`);c.set(R.messageCid,R)}}})}getAllItems(r,i){var s,c,o,u;return Xi(this,void 0,void 0,function*(){const A=yield this.getIndexPartition(r,i),S=[];try{for(var ee,y=!0,R=X0(A.iterator());ee=yield R.next(),!(s=ee.done);y=!0){u=ee.value,y=!1;const[ae,te]=u;S.push(JSON.parse(te))}}catch(ae){c={error:ae}}finally{try{!y&&!s&&(o=R.return)&&(yield o.call(R))}finally{if(c)throw c.error}}return S})}filterExactMatches(r,i,s,c){var o,u,A,S;return Xi(this,void 0,void 0,function*(){const y=n.keySegmentJoin(n.encodeValue(s)),R={gt:y},ee=yield this.getIndexPartition(r,i),ae=[];try{for(var we,te=!0,fe=X0(ee.iterator(R,c));we=yield fe.next(),!(o=we.done);te=!0){S=we.value,te=!1;const[Pe,Te]=S;if(!Pe.startsWith(y))break;ae.push(JSON.parse(Te))}}catch(Pe){u={error:Pe}}finally{try{!te&&!o&&(A=fe.return)&&(yield A.call(fe))}finally{if(u)throw u.error}}return ae})}filterRangeMatches(r,i,s,c){var o,u,A,S;return Xi(this,void 0,void 0,function*(){const y={};for(const we in s)y[we]=n.encodeValue(s[we]);void 0===y.gt&&void 0===y.gte&&(y.reverse=!0);const R=[],ee=yield this.getIndexPartition(r,i);try{for(var fe,ae=!0,te=X0(ee.iterator(y,c));fe=yield te.next(),!(o=fe.done);ae=!0){S=fe.value,ae=!1;const[we,Pe]=S;"gt"in s&&this.extractIndexValueFromKey(we)===n.encodeValue(s.gt)||R.push(JSON.parse(Pe))}}catch(we){u={error:we}}finally{try{!ae&&!o&&(A=te.return)&&(yield A.call(te))}finally{if(u)throw u.error}}if("lte"in s)for(const we of yield this.filterExactMatches(r,i,s.lte,c))R.push(we);return R})}sortItems(r,i,s,c){const u=i.indexes[s],A=n.encodeValue(r.indexes[s])+r.messageCid,S=n.encodeValue(u)+i.messageCid;return c===ra.Ascending?nw(A,S):nw(S,A)}findCursorStartingIndex(r,i,s,c){return r.findIndex(u=>{const{messageCid:A,indexes:S}=u,R=n.keySegmentJoin(n.encodeValue(S[s]),A);return i===ra.Ascending?R>c:R<c})}getIndexes(r,i){return Xi(this,void 0,void 0,function*(){const c=yield(yield this.getIndexesLookupPartition(r)).get(i);if(void 0!==c)return JSON.parse(c)})}extractIndexValueFromKey(r){const[i]=r.split(n.delimiter);return i}static keySegmentJoin(...r){return r.join(n.delimiter)}static encodeNumberValue(r){const i=Number.MAX_SAFE_INTEGER,c=String(Number.MAX_SAFE_INTEGER).length;return(r<0?"!":"")+String(r+(r<0?i:0)).padStart(c,"0")}static encodeValue(r){return"number"==typeof r?this.encodeNumberValue(r):JSON.stringify(r)}static shouldQueryWithInMemoryPaging(r,i){for(const s of r)if(!n.isFilterConcise(s,i))return!1;return!0}static isFilterConcise(r,i){return void 0!==r.recordId||void 0===i.cursor&&(void 0!==r.protocolPath||void 0!==r.contextId||void 0!==r.parentId||void 0!==r.schema)}}return n.delimiter="\0",n})();function g2(n){if(!v2(n))throw new Error("Parameter was not an error")}function v2(n){return"[object Error]"===function sL(n){return Object.prototype.toString.call(n)}(n)||n instanceof Error}class zo extends Error{constructor(t,r){const i=[...arguments],{options:s,shortMessage:c}=function oL(n){let t,r="";if(0===n.length)t={};else if(v2(n[0]))t={cause:n[0]},r=n.slice(1).join(" ")||"";else if(n[0]&&"object"==typeof n[0])t=Object.assign({},n[0]),r=n.slice(1).join(" ")||"";else{if("string"!=typeof n[0])throw new Error("Invalid arguments passed to Layerr");t={},r=r=n.join(" ")||""}return{options:t,shortMessage:r}}(i);let o=c;s.cause&&(o=`${o}: ${s.cause.message}`),super(o),this.message=o,this.name=s.name&&"string"==typeof s.name?s.name:"Layerr",s.cause&&Object.defineProperty(this,"_cause",{value:s.cause}),Object.defineProperty(this,"_info",{value:{}}),s.info&&"object"==typeof s.info&&Object.assign(this._info,s.info),Error.captureStackTrace&&Error.captureStackTrace(this,s.constructorOpt||this.constructor)}static cause(t){return g2(t),t._cause&&v2(t._cause)?t._cause:null}static fullStack(t){g2(t);const r=zo.cause(t);return r?`${t.stack}\ncaused by: ${zo.fullStack(r)}`:t.stack}static info(t){g2(t);const r={},i=zo.cause(t);return i&&Object.assign(r,zo.info(i)),t._info&&Object.assign(r,t._info),r}cause(){return zo.cause(this)}toString(){let t=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t=`${t}: ${this.message}`),t}}const rf="0123456789ABCDEFGHJKMNPQRSTVWXYZ",nf=32,w2=0xffffffffffff,_c=Object.freeze({source:"ulid"});function b2(n,t){if(isNaN(n))throw new zo({info:{code:"ENC_TIME_NAN",..._c}},`Time must be a number: ${n}`);if(n>w2)throw new zo({info:{code:"ENC_TIME_SIZE_EXCEED",..._c}},`Cannot encode a time larger than ${w2}: ${n}`);if(n<0)throw new zo({info:{code:"ENC_TIME_NEG",..._c}},`Time must be positive: ${n}`);if(!1===Number.isInteger(n))throw new zo({info:{code:"ENC_TIME_TYPE",..._c}},`Time must be an integer: ${n}`);let r,i="";for(let s=t;s>0;s--)r=n%nf,i=rf.charAt(r)+i,n=(n-r)/nf;return i}function k5(n){const t=n||function B5(n){const t=n||function aL(){return function dL(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}()?self:typeof window<"u"?window:typeof globalThis<"u"||typeof globalThis<"u"?globalThis:null}(),r=t&&(t.crypto||t.msCrypto)||null;if("function"==typeof r?.getRandomValues)return()=>{const i=new Uint8Array(1);return r.getRandomValues(i),i[0]/255};if("function"==typeof r?.randomBytes)return()=>r.randomBytes(1).readUInt8()/255;throw new zo({info:{code:"PRNG_DETECT",..._c}},"Failed to find a reliable PRNG")}();let i,r=0;return function(c){const o=isNaN(c)?Date.now():c;if(o<=r){const A=i=function cL(n){let t,i,s,r=n.length,c=n;const o=nf-1;for(;!t&&r-- >=0;){if(i=c[r],s=rf.indexOf(i),-1===s)throw new zo({info:{code:"B32_INC_ENC",..._c}},"Incorrectly encoded string");s!==o?t=O5(c,r,rf[s+1]):c=O5(c,r,rf[0])}if("string"==typeof t)return t;throw new zo({info:{code:"B32_INC_INVALID",..._c}},"Failed incrementing string")}(i);return b2(r,10)+A}r=o;const u=i=function R5(n,t){let r="";for(;n>0;n--)r=uL(t)+r;return r}(16,t);return b2(o,10)+u}}function uL(n){let t=Math.floor(n()*nf);return t===nf&&(t=nf-1),rf.charAt(t)}function O5(n,t,r){return t>n.length-1?n:n.substr(0,t)+r+n.substr(t+1)}var sf=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class fL{constructor(t){this.index=new xg(Object.assign({location:"EVENTLOG",createLevelDatabase:Sl},t)),this.ulidFactory=k5()}open(){return sf(this,void 0,void 0,function*(){return this.index.open()})}close(){return sf(this,void 0,void 0,function*(){return this.index.close()})}clear(){return sf(this,void 0,void 0,function*(){return this.index.clear()})}append(t,r,i){return sf(this,void 0,void 0,function*(){const s=this.ulidFactory();yield this.index.put(t,r,Object.assign(Object.assign({},i),{watermark:s}))})}queryEvents(t,r,i){return sf(this,void 0,void 0,function*(){const s=yield this.index.query(t,r,{sortProperty:"watermark",cursor:i});return{events:s.map(({messageCid:c})=>c),cursor:xg.createCursorFromLastArrayItem(s,"watermark")}})}getEvents(t,r){return sf(this,void 0,void 0,function*(){return this.queryEvents(t,[],r)})}deleteEventsByCid(t,r){return sf(this,void 0,void 0,function*(){const i=[];for(const s of r)i.push(this.index.delete(t,s));yield Promise.all(i)})}}function Sg({enumerable:n=!0,configurable:t=!1}={}){return{enumerable:n,configurable:t,writable:!1}}function*lL(n,t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))for(const[r,i]of t.entries()){const s=[...n,r],c=on.asCID(i);c?yield[s.join("/"),c]:"object"==typeof i&&(yield*_2(i,s))}else{const r=on.asCID(t);r?yield[n.join("/"),r]:yield*_2(t,n)}}function*_2(n,t){if(null==n||n instanceof Uint8Array)return;const r=on.asCID(n);r&&(yield[t.join("/"),r]);for(const[i,s]of Object.entries(n)){const c=[...t,i];yield*lL(c,s)}}function*hL(n,t){if(Array.isArray(t))for(const[r,i]of t.entries()){const s=[...n,r];yield s.join("/"),"object"==typeof i&&!on.asCID(i)&&(yield*x2(i,s))}else yield*x2(t,n)}function*x2(n,t){if(null!=n&&"object"==typeof n)for(const[r,i]of Object.entries(n)){const s=[...t,r];yield s.join("/"),null!=i&&!(i instanceof Uint8Array)&&"object"==typeof i&&!on.asCID(i)&&(yield*hL(s,i))}}class E2{constructor({cid:t,bytes:r,value:i}){if(!t||!r||typeof i>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=r,this.value=i,this.asBlock=this,Object.defineProperties(this,{cid:Sg(),bytes:Sg(),value:Sg(),asBlock:Sg()})}links(){return _2(this.value,[])}tree(){return x2(this.value,[])}get(t="/"){return function pL(n,t){let r=n;for(const[i,s]of t.entries()){if(r=r[s],null==r)throw new Error(`Object has no property at ${t.slice(0,i+1).map(o=>`[${JSON.stringify(o)}]`).join("")}`);const c=on.asCID(r);if(c)return{value:c,remaining:t.slice(i+1).join("/")}}return{value:r}}(this.value,t.split("/").filter(Boolean))}}function S2(){return S2=(0,it.A)(function*({value:n,codec:t,hasher:r}){if(typeof n>"u")throw new Error('Missing required argument "value"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");const i=t.encode(n),s=yield r.digest(i),c=on.create(1,t.code,s);return new E2({value:n,bytes:i,cid:c})}),S2.apply(this,arguments)}function A2(){return A2=(0,it.A)(function*({bytes:n,codec:t,hasher:r}){if(!n)throw new Error('Missing required argument "bytes"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");const i=t.decode(n),s=yield r.digest(n),c=on.create(1,t.code,s);return new E2({value:i,bytes:n,cid:c})}),A2.apply(this,arguments)}var of=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class T2{constructor(t={}){this.config=Object.assign({blockstoreLocation:"MESSAGESTORE",indexLocation:"INDEX",createLevelDatabase:Sl},t),this.blockstore=new lg({location:this.config.blockstoreLocation,createLevelDatabase:this.config.createLevelDatabase}),this.index=new xg({location:this.config.indexLocation,createLevelDatabase:this.config.createLevelDatabase})}open(){return of(this,void 0,void 0,function*(){yield this.blockstore.open(),yield this.index.open()})}close(){return of(this,void 0,void 0,function*(){yield this.blockstore.close(),yield this.index.close()})}get(t,r,i){var s;return of(this,void 0,void 0,function*(){null===(s=i?.signal)||void 0===s||s.throwIfAborted();const c=yield js(this.blockstore.partition(t),i?.signal),o=on.parse(r),u=yield c.get(o,i);return u?(yield js(function mL(n){return A2.apply(this,arguments)}({bytes:u,codec:W,hasher:Va}),i?.signal)).value:void 0})}query(t,r,i,s,c){var o;return of(this,void 0,void 0,function*(){null===(o=c?.signal)||void 0===o||o.throwIfAborted();const u=T2.buildQueryOptions(i,s),A=yield this.index.query(t,r,u,c);let S;void 0!==s?.limit&&s.limit<A.length&&(A.splice(-1),S=xg.createCursorFromLastArrayItem(A,u.sortProperty));const y=[];for(let R=0;R<A.length;R++){const{messageCid:ee}=A[R],ae=yield this.get(t,ee,c);ae&&y.push(ae)}return{messages:y,cursor:S}})}static buildQueryOptions(t={},r={}){let{limit:i,cursor:s}=r;const{dateCreated:c,datePublished:o,messageTimestamp:u}=t;let A=ra.Ascending,S="messageTimestamp";return void 0!==c?S="dateCreated":void 0!==o?S="datePublished":void 0!==u&&(S="messageTimestamp"),void 0!==t[S]&&(A=t[S]),void 0!==i&&i>0&&(i+=1),{sortDirection:A,sortProperty:S,limit:i,cursor:s}}delete(t,r,i){var s;return of(this,void 0,void 0,function*(){null===(s=i?.signal)||void 0===s||s.throwIfAborted();const c=yield js(this.blockstore.partition(t),i?.signal),o=on.parse(r);yield c.delete(o,i),yield this.index.delete(t,r,i)})}put(t,r,i,s){var c;return of(this,void 0,void 0,function*(){null===(c=s?.signal)||void 0===c||c.throwIfAborted();const o=yield js(this.blockstore.partition(t),s?.signal),u=yield js(function yL(n){return S2.apply(this,arguments)}({value:r,codec:W,hasher:Va}),s?.signal),A=_s.parseCid(yield zt.getCid(r));yield o.put(A,u.bytes,s);const S=A.toString();yield this.index.put(t,S,i,s)})}clear(){return of(this,void 0,void 0,function*(){yield this.blockstore.clear(),yield this.index.clear()})}}I(44356);var sn=function(n){return n.EventsGet="EventsGet",n.EventsQuery="EventsQuery",n.EventsSubscribe="EventsSubscribe",n.MessagesGet="MessagesGet",n.ProtocolsConfigure="ProtocolsConfigure",n.ProtocolsQuery="ProtocolsQuery",n.RecordsDelete="RecordsDelete",n.RecordsQuery="RecordsQuery",n.RecordsRead="RecordsRead",n.RecordsSubscribe="RecordsSubscribe",n.RecordsWrite="RecordsWrite",n}(sn||{});const Mg={[sn.EventsGet]:i0,[sn.EventsQuery]:s0,[sn.EventsSubscribe]:o0,[sn.MessagesGet]:cl,[sn.ProtocolsConfigure]:ko,[sn.ProtocolsQuery]:ul,[sn.RecordsDelete]:a0,[sn.RecordsQuery]:n0,[sn.RecordsRead]:d0,[sn.RecordsSubscribe]:u0,[sn.RecordsWrite]:yn};class Tg{constructor({did:t,metadata:r}){this.did=t,this.metadata=r}export(){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){return{portableDid:yield this.did.export(),metadata:this.metadata}})}}class bL{static deriveKeyBytes({baseKeyBytes:t,length:r,hash:i,salt:s,info:c=new Uint8Array}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){const u=yield zd().importKey("raw",t,{name:"HKDF"},!1,["deriveBits"]);s="string"==typeof s?Dt.string(s).toUint8Array():s,c="string"==typeof c?Dt.string(c).toUint8Array():c;const A=yield crypto.subtle.deriveBits({name:"HKDF",hash:i,salt:s,info:c},u,r);return new Uint8Array(A)})}}class Ir extends Error{constructor(t,r){super(r),this.code=t,this.name="CryptoError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ir)}}var Pr=function(n){return n.AlgorithmNotSupported="algorithmNotSupported",n.EncodingError="encodingError",n.InvalidJwe="invalidJwe",n.InvalidJwk="invalidJwk",n.OperationNotSupported="operationNotSupported",n}(Pr||{}),id=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class C5 extends hc{bytesToPrivateKey({algorithm:t,privateKeyBytes:r}){return id(this,void 0,void 0,function*(){switch(t){case"ES256K":case"secp256k1":{const i=yield Pn.bytesToPrivateKey({privateKeyBytes:r});return i.alg="EdDSA",i}case"ES256":case"secp256r1":{const i=yield Cn.bytesToPrivateKey({privateKeyBytes:r});return i.alg="EdDSA",i}default:throw new Ir(Pr.AlgorithmNotSupported,`Algorithm not supported: ${t}`)}})}bytesToPublicKey({algorithm:t,publicKeyBytes:r}){return id(this,void 0,void 0,function*(){switch(t){case"ES256K":case"secp256k1":{const i=yield Pn.bytesToPublicKey({publicKeyBytes:r});return i.alg="EdDSA",i}case"ES256":case"secp256r1":{const i=yield Cn.bytesToPublicKey({publicKeyBytes:r});return i.alg="EdDSA",i}default:throw new Ir(Pr.AlgorithmNotSupported,`Algorithm not supported: ${t}`)}})}computePublicKey({key:t}){return id(this,void 0,void 0,function*(){if(!pc(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":{const r=yield Pn.computePublicKey({key:t});return r.alg="ES256K",r}case"P-256":{const r=yield Cn.computePublicKey({key:t});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}generateKey({algorithm:t}){return id(this,void 0,void 0,function*(){switch(t){case"ES256K":case"secp256k1":{const r=yield Pn.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{const r=yield Cn.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:t}){return id(this,void 0,void 0,function*(){if(!pc(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":{const r=yield Pn.getPublicKey({key:t});return r.alg="ES256K",r}case"P-256":{const r=yield Cn.getPublicKey({key:t});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${t.crv}`)}})}privateKeyToBytes({privateKey:t}){return id(this,void 0,void 0,function*(){switch(t.crv){case"secp256k1":return yield Pn.privateKeyToBytes({privateKey:t});case"P-256":return yield Cn.privateKeyToBytes({privateKey:t});default:throw new Ir(Pr.AlgorithmNotSupported,`Curve not supported: ${t.crv}`)}})}publicKeyToBytes({publicKey:t}){return id(this,void 0,void 0,function*(){switch(t.crv){case"secp256k1":return yield Pn.publicKeyToBytes({publicKey:t});case"P-256":return yield Cn.publicKeyToBytes({publicKey:t});default:throw new Ir(Pr.AlgorithmNotSupported,`Curve not supported: ${t.crv}`)}})}sign({key:t,data:r}){return id(this,void 0,void 0,function*(){if(!pc(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(t.crv){case"secp256k1":return yield Pn.sign({key:t,data:r});case"P-256":return yield Cn.sign({key:t,data:r});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}verify({key:t,signature:r,data:i}){return id(this,void 0,void 0,function*(){if(!xm(t))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(t.crv){case"secp256k1":return yield Pn.verify({key:t,signature:r,data:i});case"P-256":return yield Cn.verify({key:t,signature:r,data:i});default:throw new Error(`Unsupported curve: ${t.crv}`)}})}}var sd=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},Q0=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},D5=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r};const N5=[128,192,256];class ep{static bytesToPrivateKey({privateKeyBytes:t}){return Q0(this,void 0,void 0,function*(){const r={k:Dt.uint8Array(t).toBase64Url(),kty:"oct"};return r.kid=yield tn({jwk:r}),r.alg={128:"A128KW",192:"A192KW",256:"A256KW"}[8*t.length],r})}static generateKey({length:t}){return Q0(this,void 0,void 0,function*(){if(!N5.includes(t))throw new RangeError(`The key length is invalid: Must be ${N5.join(", ")} bits`);const r=zd(),i=yield r.generateKey({name:"AES-KW",length:t},!0,["wrapKey","unwrapKey"]),s=yield r.exportKey("jwk",i),u=D5(s,["ext","key_ops"]);return u.kid=yield tn({jwk:u}),u})}static privateKeyToBytes({privateKey:t}){return Q0(this,void 0,void 0,function*(){if(!PE(t))throw new Error("AesKw: The provided key is not a valid oct private key.");return Dt.base64Url(t.k).toUint8Array()})}static unwrapKey({wrappedKeyBytes:t,wrappedKeyAlgorithm:r,decryptionKey:i}){return Q0(this,void 0,void 0,function*(){if(!("alg"in i)||!i.alg)throw new Ir(Pr.InvalidJwk,"The decryption key is missing the 'alg' property.");if(!["A128KW","A192KW","A256KW"].includes(i.alg))throw new Ir(Pr.AlgorithmNotSupported,`The 'decryptionKey' algorithm is not supported: ${i.alg}`);const s=zd(),c=yield s.importKey("jwk",i,{name:"AES-KW"},!0,["unwrapKey"]),o={A128KW:"AES-KW",A192KW:"AES-KW",A256KW:"AES-KW",A128GCM:"AES-GCM",A192GCM:"AES-GCM",A256GCM:"AES-GCM"}[r];if(!o)throw new Ir(Pr.AlgorithmNotSupported,`The 'wrappedKeyAlgorithm' is not supported: ${r}`);const u=yield s.unwrapKey("raw",t.buffer,c,"AES-KW",{name:o},!0,["unwrapKey"]),A=yield s.exportKey("jwk",u),ee=D5(A,["ext","key_ops"]);return ee.kid=yield tn({jwk:ee}),ee})}static wrapKey({unwrappedKey:t,encryptionKey:r}){return Q0(this,void 0,void 0,function*(){if(!("alg"in r)||!r.alg)throw new Ir(Pr.InvalidJwk,"The encryption key is missing the 'alg' property.");if(!["A128KW","A192KW","A256KW"].includes(r.alg))throw new Ir(Pr.AlgorithmNotSupported,`The 'encryptionKey' algorithm is not supported: ${r.alg}`);if(!("alg"in t)||!t.alg)throw new Ir(Pr.InvalidJwk,"The private key to wrap is missing the 'alg' property.");const i=zd(),s=yield i.importKey("jwk",r,{name:"AES-KW"},!0,["wrapKey"]),c={A128KW:"AES-KW",A192KW:"AES-KW",A256KW:"AES-KW",A128GCM:"AES-GCM",A192GCM:"AES-GCM",A256GCM:"AES-GCM"}[t.alg];if(!c)throw new Ir(Pr.AlgorithmNotSupported,`The 'unwrappedKey' algorithm is not supported: ${t.alg}`);const o=yield i.importKey("jwk",t,{name:c},!0,["unwrapKey"]),u=yield i.wrapKey("raw",o,s,"AES-KW");return new Uint8Array(u)})}}var tp=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class $5 extends hc{bytesToPrivateKey({privateKeyBytes:t}){return tp(this,void 0,void 0,function*(){const r=yield ep.bytesToPrivateKey({privateKeyBytes:t});return r.alg={16:"A128KW",24:"A192KW",32:"A256KW"}[t.length],r})}generateKey({algorithm:t}){return tp(this,void 0,void 0,function*(){const r={A128KW:128,A192KW:192,A256KW:256}[t],i=yield ep.generateKey({length:r});return i.alg=t,i})}privateKeyToBytes({privateKey:t}){return tp(this,void 0,void 0,function*(){return yield ep.privateKeyToBytes({privateKey:t})})}unwrapKey(t){return tp(this,void 0,void 0,function*(){return yield ep.unwrapKey(t)})}wrapKey(t){return tp(this,void 0,void 0,function*(){return ep.wrapKey(t)})}}class ML{static deriveKeyBytes({baseKeyBytes:t,hash:r,salt:i,iterations:s,length:c}){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){const o=zd(),u=yield o.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]),A=yield o.deriveBits({name:"PBKDF2",hash:r,salt:i,iterations:s},u,c);return new Uint8Array(A)})}}var rp=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},Zs=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};const P2={"AES-GCM":{implementation:class BL extends hc{bytesToPrivateKey({privateKeyBytes:t}){return rp(this,void 0,void 0,function*(){const r=yield Vd.bytesToPrivateKey({privateKeyBytes:t});return r.alg={16:"A128GCM",24:"A192GCM",32:"A256GCM"}[t.length],r})}decrypt(t){return rp(this,void 0,void 0,function*(){return Vd.decrypt(t)})}encrypt(t){return rp(this,void 0,void 0,function*(){return Vd.encrypt(t)})}generateKey({algorithm:t}){return rp(this,void 0,void 0,function*(){const r={A128GCM:128,A192GCM:192,A256GCM:256}[t],i=yield Vd.generateKey({length:r});return i.alg=t,i})}privateKeyToBytes({privateKey:t}){return rp(this,void 0,void 0,function*(){return yield Vd.privateKeyToBytes({privateKey:t})})}},names:["A128GCM","A192GCM","A256GCM"],operations:["bytesToPrivateKey","decrypt","encrypt","generateKey"]},"AES-KW":{implementation:$5,names:["A128KW","A192KW","A256KW"],operations:["bytesToPrivateKey","generateKey","privateKeyToBytes","wrapKey","unwrapKey"]},Ed25519:{implementation:class SL extends hc{bytesToPrivateKey({algorithm:t,privateKeyBytes:r}){return sd(this,void 0,void 0,function*(){if("Ed25519"===t){const i=yield Bn.bytesToPrivateKey({privateKeyBytes:r});return i.alg="EdDSA",i}throw new Ir(Pr.AlgorithmNotSupported,`Algorithm not supported: ${t}`)})}bytesToPublicKey({algorithm:t,publicKeyBytes:r}){return sd(this,void 0,void 0,function*(){if("Ed25519"===t){const i=yield Bn.bytesToPublicKey({publicKeyBytes:r});return i.alg="EdDSA",i}throw new Ir(Pr.AlgorithmNotSupported,`Algorithm not supported: ${t}`)})}computePublicKey({key:t}){return sd(this,void 0,void 0,function*(){if(!yc(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");if("Ed25519"===t.crv){const r=yield Bn.computePublicKey({key:t});return r.alg="EdDSA",r}throw new Ir(Pr.AlgorithmNotSupported,`Curve not supported: ${t.crv}`)})}generateKey({algorithm:t}){return sd(this,void 0,void 0,function*(){if("Ed25519"===t){const r=yield Bn.generateKey();return r.alg="EdDSA",r}})}getPublicKey({key:t}){return sd(this,void 0,void 0,function*(){if(!yc(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");if("Ed25519"===t.crv){const r=yield Bn.getPublicKey({key:t});return r.alg="EdDSA",r}throw new Error(`Unsupported curve: ${t.crv}`)})}privateKeyToBytes({privateKey:t}){return sd(this,void 0,void 0,function*(){if("Ed25519"===t.crv)return yield Bn.privateKeyToBytes({privateKey:t});throw new Ir(Pr.AlgorithmNotSupported,`Curve not supported: ${t.crv}`)})}publicKeyToBytes({publicKey:t}){return sd(this,void 0,void 0,function*(){if("Ed25519"===t.crv)return yield Bn.publicKeyToBytes({publicKey:t});throw new Ir(Pr.AlgorithmNotSupported,`Curve not supported: ${t.crv}`)})}sign({key:t,data:r}){return sd(this,void 0,void 0,function*(){if(!yc(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");if("Ed25519"===t.crv)return yield Bn.sign({key:t,data:r});throw new Ir(Pr.AlgorithmNotSupported,`Curve not supported: ${t.crv}`)})}verify({key:t,signature:r,data:i}){return sd(this,void 0,void 0,function*(){if(!Em(t))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");if("Ed25519"===t.crv)return yield Bn.verify({key:t,signature:r,data:i});throw new Ir(Pr.AlgorithmNotSupported,`Curve not supported: ${t.crv}`)})}},names:["Ed25519"],operations:["bytesToPrivateKey","bytesToPublicKey","generateKey","sign","verify"]},HKDF:{implementation:class EL extends hc{deriveKeyBytes(t){var{algorithm:r}=t,i=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["algorithm"]);return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){const s={"HKDF-256":"SHA-256","HKDF-384":"SHA-384","HKDF-512":"SHA-512"}[r];return yield bL.deriveKeyBytes(Object.assign(Object.assign({},i),{hash:s}))})}},names:["HKDF-256","HKDF-384","HKDF-512"],operations:["deriveKey","deriveKeyBytes"]},PBKDF2:{implementation:class PL extends hc{deriveKeyBytes(t){var{algorithm:r}=t,i=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(t,["algorithm"]);return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){const[,s]=r.split(/[-+]/),c={HS256:"SHA-256",HS384:"SHA-384",HS512:"SHA-512"}[s];return yield ML.deriveKeyBytes(Object.assign(Object.assign({},i),{hash:c}))})}},names:["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"],operations:["deriveKey","deriveKeyBytes"]},secp256k1:{implementation:C5,names:["ES256K","secp256k1"],operations:["bytesToPrivateKey","bytesToPublicKey","generateKey","sign","verify"]},secp256r1:{implementation:C5,names:["ES256","secp256r1"],operations:["bytesToPrivateKey","bytesToPublicKey","generateKey","sign","verify"]},"SHA-256":{implementation:lb,names:["SHA-256"],operations:["digest"]}};class Tl{constructor(){this._algorithmInstances=new Map}bytesToPrivateKey({algorithm:t,privateKeyBytes:r}){return Zs(this,void 0,void 0,function*(){const i=this.getAlgorithmName({algorithm:t});return yield this.getAlgorithm({algorithm:i}).bytesToPrivateKey({algorithm:t,privateKeyBytes:r})})}bytesToPublicKey({algorithm:t,publicKeyBytes:r}){return Zs(this,void 0,void 0,function*(){const i=this.getAlgorithmName({algorithm:t});return yield this.getAlgorithm({algorithm:i}).bytesToPublicKey({algorithm:t,publicKeyBytes:r})})}decrypt(t){return Zs(this,void 0,void 0,function*(){const r=this.getAlgorithmName({key:t.key});return yield this.getAlgorithm({algorithm:r}).decrypt(t)})}deriveKey(t){var r,i;return Zs(this,void 0,void 0,function*(){const s=this.getAlgorithmName({algorithm:t.algorithm}),c=this.getAlgorithm({algorithm:s});let o;switch(t.algorithm){case"HKDF-256":case"HKDF-384":case"HKDF-512":o=t.derivedKeyAlgorithm;break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":o=t.algorithm.split(/[-+]/)[2];break;default:throw new Ir(Pr.AlgorithmNotSupported,`The specified "algorithm" is not supported: ${t.algorithm}`)}const u=+(null!==(i=null===(r=o.match(/\d+/))||void 0===r?void 0:r[0])&&void 0!==i?i:-1);if(-1===u)throw new Ir(Pr.AlgorithmNotSupported,`The derived key algorithm" is not supported: ${o}`);const A=yield c.deriveKeyBytes(Object.assign(Object.assign({},t),{length:u}));return yield this.bytesToPrivateKey({algorithm:o,privateKeyBytes:A})})}deriveKeyBytes(t){return Zs(this,void 0,void 0,function*(){const r=this.getAlgorithmName({algorithm:t.algorithm});return yield this.getAlgorithm({algorithm:r}).deriveKeyBytes(t)})}digest({algorithm:t,data:r}){return Zs(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:t}).digest({algorithm:t,data:r})})}encrypt(t){return Zs(this,void 0,void 0,function*(){const r=this.getAlgorithmName({key:t.key});return yield this.getAlgorithm({algorithm:r}).encrypt(t)})}generateKey(t){var r;return Zs(this,void 0,void 0,function*(){const i=this.getAlgorithmName({algorithm:t.algorithm}),c=yield this.getAlgorithm({algorithm:i}).generateKey({algorithm:t.algorithm});return null!==(r=c.kid)&&void 0!==r||(c.kid=yield tn({jwk:c})),c})}getKeyUri(t){return Zs(this,void 0,void 0,function*(){throw new Error("Method not implemented.")})}getPublicKey({key:t}){return Zs(this,void 0,void 0,function*(){const r=this.getAlgorithmName({key:t});return yield this.getAlgorithm({algorithm:r}).getPublicKey({key:t})})}privateKeyToBytes({privateKey:t}){return Zs(this,void 0,void 0,function*(){const r=this.getAlgorithmName({key:t});return yield this.getAlgorithm({algorithm:r}).privateKeyToBytes({privateKey:t})})}publicKeyToBytes({publicKey:t}){return Zs(this,void 0,void 0,function*(){const r=this.getAlgorithmName({key:t});return yield this.getAlgorithm({algorithm:r}).publicKeyToBytes({publicKey:t})})}sign({key:t,data:r}){return Zs(this,void 0,void 0,function*(){const i=this.getAlgorithmName({key:t});return this.getAlgorithm({algorithm:i}).sign({data:r,key:t})})}unwrapKey(t){return Zs(this,void 0,void 0,function*(){const r=this.getAlgorithmName({key:t.decryptionKey});return yield this.getAlgorithm({algorithm:r}).unwrapKey(t)})}verify({key:t,signature:r,data:i}){return Zs(this,void 0,void 0,function*(){const s=this.getAlgorithmName({key:t});return this.getAlgorithm({algorithm:s}).verify({key:t,signature:r,data:i})})}wrapKey(t){return Zs(this,void 0,void 0,function*(){const r=this.getAlgorithmName({key:t.encryptionKey});return yield this.getAlgorithm({algorithm:r}).wrapKey(t)})}getAlgorithm({algorithm:t}){var r;const i=null===(r=P2[t])||void 0===r?void 0:r.implementation;if(!i)throw new Ir(Pr.AlgorithmNotSupported,`Algorithm not supported: ${t}`);return this._algorithmInstances.has(i)||this._algorithmInstances.set(i,new i),this._algorithmInstances.get(i)}getAlgorithmName({algorithm:t,key:r}){var i;const s=null!==(i=r?.alg)&&void 0!==i?i:t,c=r?.crv;for(const o of Object.keys(P2)){const u=P2[o].names;if(s&&u.includes(s))return o;if(c&&u.includes(c))return o}throw new Ir(Pr.AlgorithmNotSupported,`Algorithm not supported based on provided input: alg=${s}, crv=${c}. Please check the documentation for the list of supported algorithms.`)}}var Il=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};const Vo="^";class kL extends vo{constructor(){super(),this._predefinedKeys=new Map,this._keyGenerator=this._predefinedKeys.keys()}addPredefinedKeys({privateKeys:t}){var r;return Il(this,void 0,void 0,function*(){const i={};for(const s of t)null!==(r=s.kid)&&void 0!==r||(s.kid=yield tn({jwk:s})),i[yield this.getKeyUri({key:s})]=s;this._predefinedKeys=new Map(Object.entries(i)),this._keyGenerator=this._predefinedKeys.keys()})}exportKey({keyUri:t}){return Il(this,void 0,void 0,function*(){const r=this._predefinedKeys.get(t);if(!r)throw new Error(`DeterministicKeyGenerator.exportKey: Key not found: ${t}`);return r})}generateKey(t){return Il(this,void 0,void 0,function*(){const{value:r,done:i}=this._keyGenerator.next();if(i)throw new Error("Ran out of predefined keys");return r})}getPublicKey({keyUri:t}){return Il(this,void 0,void 0,function*(){const r=this._predefinedKeys.get(t);if(!r)throw new Error(`DeterministicKeyGenerator.getPublicKey: Key not found: ${t}`);return function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(r,["d"])})}sign({keyUri:t,data:r}){return Il(this,void 0,void 0,function*(){const i=this._predefinedKeys.get(t);if(!i)throw new Error(`DeterministicKeyGenerator.sign: Key not found: ${t}`);return yield Bn.sign({data:r,key:i})})}}function nu({agent:n,tenant:t,didUri:r}){return Il(this,void 0,void 0,function*(){if(t)return t;if(n.agentDid)return n.agentDid.uri;if(!r)throw new Error("Failed to determine tenant DID: 'agent.agentDid', 'tenant', and 'didUri' are undefined");return r})}function j5(n){return!(!n||"object"!=typeof n||null===n)&&"uri"in n&&"document"in n&&"metadata"in n&&(!("keyManager"in n)||void 0===n.keyManager)}var np=I(81447),ja=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class B2{constructor(){this.name="DwnDataStore",this._cache=new hm({ttl:np("15 minutes"),max:100}),this._index=new hm({ttl:np("2 hours"),max:1e3}),this._recordProperties={dataFormat:"application/json",schema:"https://identity.foundation/schemas/web5/private-jwk"}}delete({id:t,agent:r,tenant:i}){return ja(this,void 0,void 0,function*(){const s=yield nu({agent:r,tenant:i,didUri:t});let c=yield this.lookupRecordId({id:t,tenantDid:s,agent:r});if(!c)return!1;const{reply:{status:o}}=yield r.dwn.processRequest({author:s,target:s,messageType:sn.RecordsDelete,messageParams:{recordId:c}});if(202===o.code)return this._index.delete(`${s}${Vo}${t}`),this._cache.delete(c),!0;throw new Error(`${this.name}: Failed to delete '${t}' from store: (${o.code}) ${o.detail}`)})}get({id:t,agent:r,tenant:i,useCache:s=!1}){return ja(this,void 0,void 0,function*(){const c=yield nu({agent:r,tenant:i,didUri:t});let o=yield this.lookupRecordId({id:t,tenantDid:c,agent:r});if(o)return yield this.getRecord({recordId:o,tenantDid:c,agent:r,useCache:s})})}list({agent:t,tenant:r}){return ja(this,void 0,void 0,function*(){const i=yield nu({tenant:r,agent:t});return yield this.getAllRecords({agent:t,tenantDid:i})})}set({id:t,data:r,tenant:i,agent:s,preventDuplicates:c=!0,useCache:o=!1}){return ja(this,void 0,void 0,function*(){const u=yield nu({agent:s,tenant:i,didUri:t});if(c&&(yield this.lookupRecordId({id:t,tenantDid:u,agent:s})))throw new Error(`${this.name}: Import failed due to duplicate entry for: ${t}`);const A=Dt.object(r).toUint8Array(),{message:S,reply:{status:y}}=yield s.dwn.processRequest({author:u,target:u,messageType:sn.RecordsWrite,messageParams:Object.assign({},this._recordProperties),dataStream:new Blob([A],{type:"application/json"})});if(!S||202!==y.code)throw new Error(`${this.name}: Failed to write data to store for: ${t}`);this._index.set(`${u}${Vo}${t}`,S.recordId),o&&this._cache.set(S.recordId,r)})}getAllRecords(t){return ja(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DwnDataStore must implement getAllRecords()")})}getRecord({recordId:t,tenantDid:r,agent:i,useCache:s}){var c;return ja(this,void 0,void 0,function*(){if(s){const A=this._cache.get(t);if(A)return A}const{reply:o}=yield i.dwn.processRequest({author:r,target:r,messageType:sn.RecordsRead,messageParams:{filter:{recordId:t}}});if(null===(c=o.record)||void 0===c||!c.data)throw new Error(`${this.name}: Failed to read data from DWN for: ${t}`);const u=yield Os.consumeToJson({readable:o.record.data});return s&&this._cache.set(t,u),u})}lookupRecordId({id:t,tenantDid:r,agent:i}){return ja(this,void 0,void 0,function*(){let s=this._index.get(`${r}${Vo}${t}`,{updateAgeOnGet:!0});return s||(yield this.getAllRecords({agent:i,tenantDid:r}),s=this._index.get(`${r}${Vo}${t}`)),s})}}class R2{constructor(){this.name="InMemoryDataStore",this.store=new Map}delete({id:t,agent:r,tenant:i}){return ja(this,void 0,void 0,function*(){const s=yield nu({agent:r,tenant:i,didUri:t});return!!this.store.has(`${s}${Vo}${t}`)&&(this.store.delete(`${s}${Vo}${t}`),!0)})}get({id:t,agent:r,tenant:i}){return ja(this,void 0,void 0,function*(){const s=yield nu({agent:r,tenant:i,didUri:t});return this.store.get(`${s}${Vo}${t}`)})}list({agent:t,tenant:r}){return ja(this,void 0,void 0,function*(){const i=yield nu({tenant:r,agent:t}),s=[];for(const[c,o]of this.store.entries())c.startsWith(`${i}${Vo}`)&&s.push(o);return s})}set({id:t,data:r,tenant:i,agent:s,preventDuplicates:c}){return ja(this,void 0,void 0,function*(){const o=yield nu({agent:s,tenant:i,didUri:t});if(c&&this.store.has(`${o}${Vo}${t}`))throw new Error(`${this.name}: Import failed due to duplicate entry for: ${t}`);const u=structuredClone(r);this.store.set(`${o}${Vo}${t}`,u)})}}var od=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class OL extends B2{constructor(){super(...arguments),this.name="DwnDidStore",this._recordProperties={dataFormat:"application/json",schema:"https://identity.foundation/schemas/web5/portable-did"}}delete(t){const r=Object.create(null,{delete:{get:()=>super.delete}});return od(this,void 0,void 0,function*(){return yield r.delete.call(this,t)})}get(t){const r=Object.create(null,{get:{get:()=>super.get}});return od(this,void 0,void 0,function*(){return yield r.get.call(this,t)})}list(t){const r=Object.create(null,{list:{get:()=>super.list}});return od(this,void 0,void 0,function*(){return yield r.list.call(this,t)})}set(t){const r=Object.create(null,{set:{get:()=>super.set}});return od(this,void 0,void 0,function*(){return yield r.set.call(this,t)})}getAllRecords({agent:t,tenantDid:r}){var i;return od(this,void 0,void 0,function*(){this._index.clear();const{reply:s}=yield t.dwn.processRequest({author:r,target:r,messageType:sn.RecordsQuery,messageParams:{filter:Object.assign({},this._recordProperties)}});let c=[];for(const o of null!==(i=s.entries)&&void 0!==i?i:[]){if(!o.encodedData)throw new Error(`${this.name}: Expected 'encodedData' to be present in the DWN query result entry`);const u=Dt.base64Url(o.encodedData).toObject();j5(u)&&(this._index.set(`${r}${Vo}${u.uri}`,o.recordId),this._cache.set(o.recordId,u),c.push(u))}return c})}}class CL extends R2{constructor(){super(...arguments),this.name="InMemoryDidStore"}delete(t){const r=Object.create(null,{delete:{get:()=>super.delete}});return od(this,void 0,void 0,function*(){return yield r.delete.call(this,t)})}get(t){const r=Object.create(null,{get:{get:()=>super.get}});return od(this,void 0,void 0,function*(){return yield r.get.call(this,t)})}list(t){const r=Object.create(null,{list:{get:()=>super.list}});return od(this,void 0,void 0,function*(){return yield r.list.call(this,t)})}set(t){const r=Object.create(null,{set:{get:()=>super.set}});return od(this,void 0,void 0,function*(){return yield r.set.call(this,t)})}}var ip=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class DL{constructor({ttl:t="15m"}={}){this.cache=new hm({ttl:np(t)})}get(t){return ip(this,void 0,void 0,function*(){if(!t)throw new Error("Key cannot be null or undefined");return this.cache.get(t)})}set(t,r){return ip(this,void 0,void 0,function*(){this.cache.set(t,r)})}delete(t){return ip(this,void 0,void 0,function*(){this.cache.delete(t)})}clear(){return ip(this,void 0,void 0,function*(){this.cache.clear()})}close(){return ip(this,void 0,void 0,function*(){})}}var Pl=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},sp=function(n){return n.Create="Create",n.Resolve="Resolve",n}(sp||{});function U5(n,t){return n.messageType===t}class NL extends Qb{constructor({agent:t,didMethods:r,resolverCache:i,store:s}){if(!r)throw new TypeError("AgentDidApi: Required parameter missing: 'didMethods'");super({didResolvers:r,cache:i??new DL}),this._didMethods=new Map,this._agent=t,this._store=s??new CL;for(const c of r)this._didMethods.set(c.methodName,c)}get agent(){if(void 0===this._agent)throw new Error("AgentDidApi: Unable to determine agent execution context.");return this._agent}set agent(t){this._agent=t}create({method:t,tenant:r,options:i,store:s}){return Pl(this,void 0,void 0,function*(){const o=yield this.getMethod(t).create({keyManager:this.agent.keyManager,options:i});if(s??1){const{uri:u,document:A,metadata:S}=o,y={uri:u,document:A,metadata:S};yield this._store.set({id:y.uri,data:y,agent:this.agent,tenant:r??y.uri,preventDuplicates:!1,useCache:!0})}return o})}export({didUri:t,tenant:r}){return Pl(this,void 0,void 0,function*(){const i=yield this.get({didUri:t,tenant:r});if(!i)throw new Error(`AgentDidApi: Failed to export due to DID not found: ${t}`);return yield i.export()})}get({didUri:t,tenant:r}){return Pl(this,void 0,void 0,function*(){const i=yield this._store.get({id:t,agent:this.agent,tenant:r,useCache:!0});return i?yield No.import({portableDid:i,keyManager:this.agent.keyManager}):void 0})}getSigningMethod({didUri:t,methodId:r}){return Pl(this,void 0,void 0,function*(){const i=Mn.parse(t);if(!i)throw new Error(`Invalid DID URI: ${t}`);const s=this.getMethod(i.method),{didDocument:c,didResolutionMetadata:o}=yield this.resolve(t);if(!c)throw new Error(`DID resolution failed for '${t}': ${JSON.stringify(o)}`);return yield s.getSigningMethod({didDocument:c,methodId:r})})}import({portableDid:t,tenant:r}){return Pl(this,void 0,void 0,function*(){const i=yield No.import({keyManager:this.agent.keyManager,portableDid:t}),{uri:s,document:c,metadata:o}=i,u={uri:s,document:c,metadata:o};return yield this._store.set({id:u.uri,data:u,agent:this.agent,tenant:r??u.uri,preventDuplicates:!0,useCache:!0}),i})}processRequest(t){var r;return Pl(this,void 0,void 0,function*(){if(U5(t,sp.Create))try{const i=yield this.create(Object.assign({},t.messageParams));return{result:{uri:i.uri,document:i.document,metadata:i.metadata},ok:!0,status:{code:201,message:"Created"}}}catch(i){return{ok:!1,status:{code:500,message:null!==(r=i.message)&&void 0!==r?r:"Unknown error occurred"}}}if(U5(t,sp.Resolve)){const{didUri:i,options:s}=t.messageParams;return{result:yield this.resolve(i,s),ok:!0,status:{code:200,message:"OK"}}}throw new Error(`AgentDidApi: Unsupported request type: ${t.messageType}`)})}getMethod(t){const r=this._didMethods.get(t);if(void 0===r)throw new Error(`DID Method not supported: ${t}`);return r}}var $L=I(85493),L5=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};function F5(n){return k2(n.stream())}function K5(n,t){return L5(this,void 0,void 0,function*(){const r=yield t.dereference(`${n}#dwn`);if(r.dereferencingMetadata.error)throw new Error(`Failed to dereference '${n}#dwn': ${r.dereferencingMetadata.error}`);if(function j$(n){if(!function $$(n){return!(!n||"object"!=typeof n||null===n)&&"id"in n&&"type"in n&&"serviceEndpoint"in n}(n)||"DecentralizedWebNode"!==n.type||!("enc"in n)||!("sig"in n))return!1;const t=r=>"string"==typeof r||Array.isArray(r)&&r.every(i=>"string"==typeof i);return t(n.enc)&&t(n.sig)}(r.contentStream)){const{serviceEndpoint:i}=r.contentStream,s="string"==typeof i?[i]:Array.isArray(i)&&i.every(c=>"string"==typeof c)?i:[];if(s.length>0)return s}return[]})}function z5(n){return Hr.getAuthor(n)}function Ig(n){return!(!n||"object"!=typeof n||null===n)&&"message"in n&&"object"==typeof n.message&&null!==n.message&&"descriptor"in n.message&&"object"==typeof n.message.descriptor&&null!==n.message.descriptor&&"interface"in n.message.descriptor&&n.message.descriptor.interface===Cr.Records&&"method"in n.message.descriptor&&n.message.descriptor.method===hr.Write}function jL(n){return zt.getCid(n)}function k2(n){return new $L.s(n)}var Ua=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class V5{constructor({agent:t,dwn:r}){this._agent=t,this._dwn=r}get agent(){if(void 0===this._agent)throw new Error("AgentDwnApi: Unable to determine agent execution context.");return this._agent}set agent(t){this._agent=t}get node(){return this._dwn}static createDwn({dataPath:t,dataStore:r,didResolver:i,eventLog:s,eventStream:c,messageStore:o,tenantGate:u}){return Ua(this,void 0,void 0,function*(){return r??(r=new nL({blockstoreLocation:`${t}/DWN_DATASTORE`})),i??(i=new Qb({didResolvers:[bl,t5],cache:new Xb({location:`${t}/DID_RESOLVERCACHE`})})),s??(s=new fL({location:`${t}/DWN_EVENTLOG`})),o??(o=new T2({blockstoreLocation:`${t}/DWN_MESSAGESTORE`,indexLocation:`${t}/DWN_MESSAGEINDEX`})),yield e2.create({dataStore:r,didResolver:i,eventLog:s,eventStream:c,messageStore:o,tenantGate:u})})}processRequest(t){return Ua(this,void 0,void 0,function*(){const{message:r,dataStream:i}=yield this.constructDwnMessage({request:t}),{subscriptionHandler:s}=t;return{reply:!1!==t.store?yield this._dwn.processMessage(t.target,r,{dataStream:i,subscriptionHandler:s}):{status:{code:202,detail:"Accepted"}},message:r,messageCid:yield zt.getCid(r)}})}sendRequest(t){return Ua(this,void 0,void 0,function*(){const r=yield K5(t.target,this.agent.did);if(0===r.length)throw new Error(`AgentDwnApi: DID Service is missing or malformed: ${t.target}#dwn`);let i,s,c,o;if("messageCid"in t)({message:s,data:c}=yield this.getDwnMessage({author:t.author,messageCid:t.messageCid,messageType:t.messageType})),i=t.messageCid;else{if(({message:s}=yield this.constructDwnMessage({request:t})),t.dataStream&&!(t.dataStream instanceof Blob))throw new Error("AgentDwnApi: DataStream must be provided as a Blob");c=t.dataStream,o=t.subscriptionHandler}const u=yield this.sendDwnRpcRequest({targetDid:t.target,dwnEndpointUrls:r,message:s,data:c,subscriptionHandler:o});return i??(i=yield zt.getCid(s)),{reply:u,message:s,messageCid:i}})}sendDwnRpcRequest({targetDid:t,dwnEndpointUrls:r,message:i,data:s,subscriptionHandler:c}){return Ua(this,void 0,void 0,function*(){const o=[];if(i.descriptor.method===hr.Subscribe&&void 0===c)throw new Error("AgentDwnApi: Subscription handler is required for subscription requests.");for(let u of r)try{if(void 0!==c){if(!(yield this.agent.rpc.getServerInfo(u)).webSocketSupport){o.push({url:u,message:"WebSocket support is not enabled on the server."});continue}const y=new URL(u);y.protocol="http:"===y.protocol?"ws:":"wss:",u=y.toString()}return yield this.agent.rpc.sendDwnRequest({dwnUrl:u,targetDid:t,message:i,data:s,subscriptionHandler:c})}catch(A){o.push({url:u,message:A instanceof Error?A.message:"Unknown error"})}throw new Error(`Failed to send DWN RPC request: ${JSON.stringify(o)}`)})}constructDwnMessage({request:t}){var r;return Ua(this,void 0,void 0,function*(){const i=t.rawMessage;let s;if(function LL(n,t){return n.messageType===t}(t,sn.RecordsWrite)){const A=t.messageParams;if(t.dataStream&&!A?.data){const{dataStream:S}=t;let y;if(S instanceof Blob)y=F5(S),s=F5(S);else if(S instanceof ReadableStream){const[R,ee]=S.tee();y=k2(R),s=k2(ee)}i||(A.dataCid=yield _s.computeDagPbCidFromStream(y),null!==(r=A.dataSize)&&void 0!==r||(A.dataSize=y.bytesRead))}}const c=yield this.getSigner(t.author),o=Mg[t.messageType],u=i?yield o.parse(i):yield o.create(Object.assign(Object.assign({},t.messageParams),{signer:c}));return Ig(u)&&t.signAsOwner&&(yield u.signAsOwner(c)),{message:u.message,dataStream:s}})}getSigner(t){return Ua(this,void 0,void 0,function*(){if(t===this.agent.agentDid.uri){const r=yield this.agent.agentDid.getSigner();return{algorithm:r.algorithm,keyId:r.keyId,sign:i=>Ua(this,void 0,void 0,function*(){return yield r.sign({data:i})})}}try{const r=yield this.agent.did.getSigningMethod({didUri:t});if(!r.publicKeyJwk)throw new Error(`Verification method '${r.id}' does not contain a public key in JWK format`);const i=yield this.agent.keyManager.getKeyUri({key:r.publicKeyJwk}),s=yield this.agent.keyManager.getPublicKey({keyUri:i}),c=this.agent.keyManager;return{algorithm:KE(s),keyId:r.id,sign:o=>Ua(this,void 0,void 0,function*(){return yield c.sign({data:o,keyUri:i})})}}catch(r){throw new Error(`AgentDwnApi: Unable to get signer for author '${t}': ${r.message}`)}})}getDwnMessage({author:t,messageCid:r}){return Ua(this,void 0,void 0,function*(){const i=yield this.getSigner(t),s=yield Mg[sn.MessagesGet].create({messageCids:[r],signer:i}),c=yield this._dwn.processMessage(t,s.message);if(!c.entries||1!==c.entries.length)throw new Error("AgentDwnApi: Expected 1 message entry in the MessagesGet response but received none or more than one.");const[o]=c.entries,u=o.message;if(!u)throw new Error(`AgentDwnApi: Message not found with CID: ${r}`);let A={message:u};if(Ig(o))if(o.encodedData){const S=Dt.base64Url(o.encodedData).toUint8Array();A.data=new Blob([S])}else{const S=yield Mg[sn.RecordsRead].create({filter:{recordId:o.message.recordId},signer:i}),y=yield this._dwn.processMessage(t,S.message);if(y.status.code>=400){const{status:{code:R,detail:ee}}=y;throw new Error(`AgentDwnApi: (${R}) Failed to read data associated with record ${o.message.recordId}. ${ee}}`)}if(y.record){const R=yield Os.consumeToBytes({readable:y.record.data});A.data=new Blob([R])}}return A})}createMessage({author:t,messageParams:r,messageType:i}){return Ua(this,void 0,void 0,function*(){const s=yield this.getSigner(t);return yield Mg[i].create(Object.assign(Object.assign({},r),{signer:s}))})}processMessage({dataStream:t,message:r,targetDid:i}){return Ua(this,void 0,void 0,function*(){return yield this._dwn.processMessage(i,r,{dataStream:t})})}}const FL=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),H5=Uint8Array.from({length:16},(n,t)=>t),KL=H5.map(n=>(9*n+5)%16);let O2=[H5],C2=[KL];for(let n=0;n<4;n++)for(let t of[O2,C2])t.push(t[n].map(r=>FL[r]));const W5=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),zL=O2.map((n,t)=>n.map(r=>W5[t][r])),VL=C2.map((n,t)=>n.map(r=>W5[t][r])),HL=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),WL=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Pg=(n,t)=>n<<t|n>>>32-t;function G5(n,t,r,i){return 0===n?t^r^i:1===n?t&r|~t&i:2===n?(t|~r)^i:3===n?t&i|r&~i:t^(r|~i)}const Bg=new Uint32Array(16);class GL extends mv{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:r,h2:i,h3:s,h4:c}=this;return[t,r,i,s,c]}set(t,r,i,s,c){this.h0=0|t,this.h1=0|r,this.h2=0|i,this.h3=0|s,this.h4=0|c}process(t,r){for(let ae=0;ae<16;ae++,r+=4)Bg[ae]=t.getUint32(r,!0);let i=0|this.h0,s=i,c=0|this.h1,o=c,u=0|this.h2,A=u,S=0|this.h3,y=S,R=0|this.h4,ee=R;for(let ae=0;ae<5;ae++){const te=4-ae,fe=HL[ae],we=WL[ae],Pe=O2[ae],Te=C2[ae],Ae=zL[ae],Ce=VL[ae];for(let je=0;je<16;je++){const Le=Pg(i+G5(ae,c,u,S)+Bg[Pe[je]]+fe,Ae[je])+R|0;i=R,R=S,S=0|Pg(u,10),u=c,c=Le}for(let je=0;je<16;je++){const Le=Pg(s+G5(te,o,A,y)+Bg[Te[je]]+we,Ce[je])+ee|0;s=ee,ee=y,y=0|Pg(A,10),A=o,o=Le}}this.set(this.h1+u+y|0,this.h2+S+ee|0,this.h3+R+s|0,this.h4+i+o|0,this.h0+c+A|0)}roundClean(){Bg.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const qL=cv(()=>new GL),ZL=av("ed25519 seed"),D2=2147483648,q5=new Uint8Array([0]);function Z5(n,...t){return"string"==typeof n&&(n=function nA(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const t=n.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let s=0,c=0;s<r;s++,c+=2){const o=l3(n.charCodeAt(c)),u=l3(n.charCodeAt(c+1));if(void 0===o||void 0===u)throw new Error('hex string expected, got non-hex character "'+(n[c]+n[c+1])+'" at index '+c);i[s]=16*o+u}return i}(n)),fu(n,...t),n}const N2=n=>{if(!Number.isSafeInteger(n)||n<0||n>2**32-1)throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return yf(t).setUint32(0,n,!1),t};class Rg{get publicKeyRaw(){return wi.getPublicKey(this.privateKey)}get publicKey(){return xp(q5,this.publicKeyRaw)}get pubHash(){return(n=>qL(Ic(this.publicKey)))()}get fingerprint(){return(n=>yf(this.pubHash).getUint32(0,!1))()}get fingerprintHex(){return f3(N2(this.fingerprint))}get parentFingerprintHex(){return f3(N2(this.parentFingerprint))}static fromMasterSeed(t){if(8*(t=Z5(t)).length<128||8*t.length>512)throw new Error(`HDKey: wrong seed length=${t.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const r=Gl(g0,ZL,t);return new Rg({privateKey:r.slice(0,32),chainCode:r.slice(32)})}constructor(t){if(this.depth=0,this.index=0,this.parentFingerprint=0,!t||"object"!=typeof t)throw new Error("HDKey.constructor must not be called directly");if(fu(t.privateKey,32),fu(t.chainCode,32),this.depth=t.depth||0,this.index=t.index||0,this.parentFingerprint=t.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");this.chainCode=t.chainCode,this.privateKey=t.privateKey}derive(t,r=!1){if(!/^[mM]'?/.test(t))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(t))return this;const i=t.replace(/^[mM]'?\//,"").split("/");let s=this;for(const c of i){const o=/^(\d+)('?)$/.exec(c);if(!o||3!==o.length)throw new Error(`Invalid child index: ${c}`);let u=+o[1];if(!Number.isSafeInteger(u)||u>=D2)throw new Error("Invalid index");(r||"'"===o[2])&&(u+=D2),s=s.deriveChild(u)}return s}deriveChild(t){if(t<D2)throw new Error(`Non-hardened child derivation not possible for Ed25519 (index=${t})`);const r=xp(q5,this.privateKey,N2(t)),i=Gl(g0,this.chainCode,r);return new Rg({chainCode:i.slice(32),depth:this.depth+1,parentFingerprint:this.fingerprint,index:t,privateKey:i.slice(0,32)})}sign(t){return wi.sign(t,this.privateKey)}verify(t,r){return r=Z5(r,64),wi.verify(r,t,this.publicKeyRaw)}}const J5="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");function $2(){return $2=(0,it.A)(function*(n,t,r,i){const{c:s,dkLen:c,asyncTick:o,DK:u,PRF:A,PRFSalt:S}=function Y5(n,t,r,i){iv(n);const s=function aA(n,t){if(void 0!==t&&"[object Object]"!==oA.call(t))throw new Error("Options should be object or undefined");return Object.assign(n,t)}({dkLen:32,asyncTick:10},i),{c,dkLen:o,asyncTick:u}=s;if(uu(c),uu(o),uu(u),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const A=lu(t),S=lu(r),y=new Uint8Array(o),R=Gl.create(n,A),ee=R._cloneInto().update(S);return{c,dkLen:o,asyncTick:u,DK:y,PRF:R,PRFSalt:ee}}(n,t,r,i);let y;const R=new Uint8Array(4),ee=yf(R),ae=new Uint8Array(A.outputLen);for(let te=1,fe=0;fe<c;te++,fe+=A.outputLen){const we=u.subarray(fe,fe+A.outputLen);ee.setInt32(0,te,!1),(y=S._cloneInto(y)).update(R).digestInto(ae),we.set(ae.subarray(0,we.length)),yield sA(s-1,o,()=>{A._cloneInto(y).update(ae).digestInto(ae);for(let Pe=0;Pe<we.length;Pe++)we[Pe]^=ae[Pe]})}return function X5(n,t,r,i,s){return n.destroy(),t.destroy(),i&&i.destroy(),s.fill(0),r}(A,S,u,y,ae)}),$2.apply(this,arguments)}function op(n){return n instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name}function j2(n,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(n))throw new Error("convertRadix: data should be array");if(!n.length)return[];let i=0;const s=[],c=Array.from(n);for(c.forEach(o=>{if(o<0||o>=t)throw new Error(`Wrong integer: ${o}`)});;){let o=0,u=!0;for(let A=i;A<c.length;A++){const S=c[A],y=t*o+S;if(!Number.isSafeInteger(y)||t*o/t!==o||y-S!=t*o)throw new Error("convertRadix: carry overflow");o=y%r;const R=Math.floor(y/r);if(c[A]=R,!Number.isSafeInteger(R)||R*r+o!==y)throw new Error("convertRadix: carry overflow");u&&(R?u=!1:i=A)}if(s.push(o),u)break}for(let o=0;o<n.length-1&&0===n[o];o++)s.push(0);return s.reverse()}const eS=(n,t)=>t?eS(t,n%t):n,kg=(n,t)=>n+(t-eS(n,t));function Og(n,t,r,i){if(!Array.isArray(n))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(kg(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${kg(t,r)}`);let s=0,c=0;const o=2**r-1,u=[];for(const A of n){if(A>=2**t)throw new Error(`convertRadix2: invalid data word=${A} from=${t}`);if(s=s<<t|A,c+t>32)throw new Error(`convertRadix2: carry overflow pos=${c} from=${t}`);for(c+=t;c>=r;c-=r)u.push((s>>c-r&o)>>>0);s&=2**c-1}if(s=s<<r-c&o,!i&&c>=t)throw new Error("Excess padding");if(!i&&s)throw new Error(`Non-zero padding: ${s}`);return i&&c>0&&u.push(s>>>0),u}const Cg={alphabet:function ca(n){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(r<0||r>=n.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${n.length})`);return n[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if("string"!=typeof r)throw new Error(`alphabet.decode: not string element=${r}`);const i=n.indexOf(r);if(-1===i)throw new Error(`Unknown letter: "${r}". Allowed: ${n}`);return i})}}},chain:function Ho(...n){const t=c=>c,r=(c,o)=>u=>c(o(u));return{encode:n.map(c=>c.encode).reduceRight(r,t),decode:n.map(c=>c.decode).reduce(r,t)}},checksum:function nS(n,t){if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!op(r))throw new Error("checksum.encode: input should be Uint8Array");const i=t(r).slice(0,n),s=new Uint8Array(r.length+n);return s.set(r),s.set(i,r.length),s},decode(r){if(!op(r))throw new Error("checksum.decode: input should be Uint8Array");const i=r.slice(0,-n),s=t(i).slice(0,n),c=r.slice(-n);for(let o=0;o<n;o++)if(s[o]!==c[o])throw new Error("Invalid checksum");return i}}},convertRadix:j2,convertRadix2:Og,radix:function tS(n){return{encode:t=>{if(!op(t))throw new Error("radix.encode input should be Uint8Array");return j2(Array.from(t),256,n)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(j2(t,n,256))}}},radix2:function La(n,t=!1){if(n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(kg(8,n)>32||kg(n,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!op(r))throw new Error("radix2.encode input should be Uint8Array");return Og(Array.from(r),8,n,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(Og(r,n,8,t))}}},join:function da(n=""){if("string"!=typeof n)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let r of t)if("string"!=typeof r)throw new Error(`join.encode: non-string input=${r}`);return t.join(n)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(n)}}},padding:function ap(n,t="="){if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let i of r)if("string"!=typeof i)throw new Error(`padding.encode: non-string input=${i}`);for(;r.length*n%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.decode: non-string input=${s}`);let i=r.length;if(i*n%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;i>0&&r[i-1]===t;i--)if(!((i-1)*n%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,i)}}}};function cS(n){if("string"!=typeof n)throw new TypeError("Invalid mnemonic type: "+typeof n);return n.normalize("NFKD")}function L2(n){const t=cS(n),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:r}}function dS(n){fu(n,16,20,24,28,32)}const oF=n=>{const t=8-n.length/4;return new Uint8Array([Ic(n)[0]>>t<<t])};function uS(n){if(!Array.isArray(n)||2048!==n.length||"string"!=typeof n[0])throw new Error("Wordlist: expected array of 2048 strings");return n.forEach(t=>{if("string"!=typeof t)throw new Error(`Wordlist: non-string element: ${t}`)}),Cg.chain(Cg.checksum(1,oF),Cg.radix2(11,!0),Cg.alphabet(n))}function uF(n,t=""){return function XL(n,t,r,i){return $2.apply(this,arguments)}(g0,L2(n).nfkd,(n=>cS(`mnemonic${n}`))(t),{c:2048,dkLen:64})}var ad=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class fF extends B2{constructor(){super(...arguments),this.name="DwnKeyStore",this._recordProperties={dataFormat:"application/json",schema:"https://identity.foundation/schemas/web5/private-jwk"}}delete(t){const r=Object.create(null,{delete:{get:()=>super.delete}});return ad(this,void 0,void 0,function*(){return yield r.delete.call(this,t)})}get(t){const r=Object.create(null,{get:{get:()=>super.get}});return ad(this,void 0,void 0,function*(){return yield r.get.call(this,t)})}set(t){const r=Object.create(null,{set:{get:()=>super.set}});return ad(this,void 0,void 0,function*(){yield r.set.call(this,t)})}list(t){const r=Object.create(null,{list:{get:()=>super.list}});return ad(this,void 0,void 0,function*(){return yield r.list.call(this,t)})}getAllRecords({agent:t,tenantDid:r}){var i;return ad(this,void 0,void 0,function*(){this._index.clear();const{reply:s}=yield t.dwn.processRequest({author:r,target:r,messageType:sn.RecordsQuery,messageParams:{filter:Object.assign({},this._recordProperties)}});let c=[];for(const o of null!==(i=s.entries)&&void 0!==i?i:[]){if(!o.encodedData)throw new Error(`${this.name}: Expected 'encodedData' to be present in the DWN query result entry`);const u=Dt.base64Url(o.encodedData).toObject();wb(u)&&(this._index.set(`${r}${Vo}${_m}${u.kid}`,o.recordId),this._cache.set(o.recordId,u),c.push(u))}return c})}}class lF extends R2{constructor(){super(...arguments),this.name="InMemoryKeyStore"}delete(t){const r=Object.create(null,{delete:{get:()=>super.delete}});return ad(this,void 0,void 0,function*(){return yield r.delete.call(this,t)})}get(t){const r=Object.create(null,{get:{get:()=>super.get}});return ad(this,void 0,void 0,function*(){return yield r.get.call(this,t)})}list(t){const r=Object.create(null,{list:{get:()=>super.list}});return ad(this,void 0,void 0,function*(){return yield r.list.call(this,t)})}set(t){const r=Object.create(null,{set:{get:()=>super.set}});return ad(this,void 0,void 0,function*(){return yield r.set.call(this,t)})}}var ua=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},lS=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r};const F2={"AES-GCM":{implementation:class h$ extends hc{decrypt(t){return Cb(this,void 0,void 0,function*(){return Vd.decrypt(t)})}encrypt(t){return Cb(this,void 0,void 0,function*(){return Vd.encrypt(t)})}generateKey({algorithm:t}){return Cb(this,void 0,void 0,function*(){const r={A128GCM:128,A192GCM:192,A256GCM:256}[t],i=yield Vd.generateKey({length:r});return i.alg=t,i})}},names:["A128GCM","A192GCM","A256GCM"]},"AES-KW":{implementation:$5,names:["A128KW","A192KW","A256KW"]},Ed25519:{implementation:FE,names:["Ed25519"]},secp256k1:{implementation:Sm,names:["ES256K","secp256k1"]},secp256r1:{implementation:Sm,names:["ES256","secp256r1"]},"SHA-256":{implementation:lb,names:["SHA-256"]}};class cf{constructor({agent:t,keyStore:r}={}){this._algorithmInstances=new Map,this._agent=t,this._keyStore=r??new lF}get agent(){if(void 0===this._agent)throw new Error("LocalKeyManager: Unable to determine agent execution context.");return this._agent}set agent(t){this._agent=t}decrypt(t){var{keyUri:r}=t,i=lS(t,["keyUri"]);return ua(this,void 0,void 0,function*(){const s=yield this.getPrivateKey({keyUri:r}),c=this.getAlgorithmName({key:s});return yield this.getAlgorithm({algorithm:c}).decrypt(Object.assign({key:s},i))})}digest(t){throw new Error("Method not implemented.")}encrypt(t){var{keyUri:r}=t,i=lS(t,["keyUri"]);return ua(this,void 0,void 0,function*(){const s=yield this.getPrivateKey({keyUri:r}),c=this.getAlgorithmName({key:s});return yield this.getAlgorithm({algorithm:c}).encrypt(Object.assign({key:s},i))})}exportKey({keyUri:t}){return ua(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:t})})}generateKey({algorithm:t}){var r;return ua(this,void 0,void 0,function*(){const i=this.getAlgorithmName({key:{alg:t}}),c=yield this.getAlgorithm({algorithm:i}).generateKey({algorithm:t});null!==(r=c.kid)&&void 0!==r||(c.kid=yield tn({jwk:c}));const o=yield this.getKeyUri({key:c});return yield this._keyStore.set({id:o,data:c,agent:this.agent,preventDuplicates:!1,useCache:!0}),o})}getKeyUri({key:t}){return ua(this,void 0,void 0,function*(){const r=yield tn({jwk:t});return`${_m}${r}`})}getPublicKey({keyUri:t}){return ua(this,void 0,void 0,function*(){const r=yield this.getPrivateKey({keyUri:t}),i=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:i}).getPublicKey({key:r})})}importKey({key:t}){var r;return ua(this,void 0,void 0,function*(){if(!wb(t))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");const i=structuredClone(t);null!==(r=i.kid)&&void 0!==r||(i.kid=yield tn({jwk:i}));const s=yield this.getKeyUri({key:i});return yield this._keyStore.set({id:s,data:i,agent:this.agent,preventDuplicates:!0,useCache:!0}),s})}sign({keyUri:t,data:r}){return ua(this,void 0,void 0,function*(){const i=yield this.getPrivateKey({keyUri:t}),s=this.getAlgorithmName({key:i});return this.getAlgorithm({algorithm:s}).sign({data:r,key:i})})}unwrapKey({wrappedKeyBytes:t,wrappedKeyAlgorithm:r,decryptionKeyUri:i}){return ua(this,void 0,void 0,function*(){const s=yield this.getPrivateKey({keyUri:i}),c=this.getAlgorithmName({key:s});return yield this.getAlgorithm({algorithm:c}).unwrapKey({wrappedKeyBytes:t,wrappedKeyAlgorithm:r,decryptionKey:s})})}verify({key:t,signature:r,data:i}){return ua(this,void 0,void 0,function*(){const s=this.getAlgorithmName({key:t});return this.getAlgorithm({algorithm:s}).verify({key:t,signature:r,data:i})})}wrapKey({unwrappedKey:t,encryptionKeyUri:r}){return ua(this,void 0,void 0,function*(){const i=yield this.getPrivateKey({keyUri:r}),s=this.getAlgorithmName({key:i});return yield this.getAlgorithm({algorithm:s}).wrapKey({unwrappedKey:t,encryptionKey:i})})}getAlgorithm({algorithm:t}){var r;const i=null===(r=F2[t])||void 0===r?void 0:r.implementation;if(!i)throw new Ir(Pr.AlgorithmNotSupported,`Algorithm not supported: ${t}`);return this._algorithmInstances.has(i)||this._algorithmInstances.set(i,new i),this._algorithmInstances.get(i)}getAlgorithmName({key:t}){const r=t.alg,i=t.crv;for(const s of Object.keys(F2)){const c=F2[s].names;if(r&&c.includes(r))return s;if(i&&c.includes(i))return s}throw new Ir(Pr.AlgorithmNotSupported,`Algorithm not supported based on provided input: alg=${r}, crv=${i}. Please check the documentation for the list of supported algorithms.`)}getPrivateKey({keyUri:t}){return ua(this,void 0,void 0,function*(){const r=yield this._keyStore.get({id:t,agent:this.agent,useCache:!0});if(!r)throw new Error(`Key not found: ${t}`);return r})}}var hS=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};function K2(n){return"object"==typeof n&&null!==n&&"alg"in n&&void 0!==n.alg&&"enc"in n&&void 0!==n.enc}class pS{static decrypt({key:t,encryptedKey:r,joseHeader:i,crypto:s}){return hS(this,void 0,void 0,function*(){switch(i.alg){case"dir":if(void 0!==r)throw new Ir(Pr.InvalidJwe,'JWE "encrypted_key" is not allowed when using "dir" (Direct Encryption Mode).');if(t instanceof Uint8Array)throw new Ir(Pr.InvalidJwe,'Key management "key" must be a Key URI or JWK when using "dir" (Direct Encryption Mode).');return t;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if("number"!=typeof i.p2c)throw new Ir(Pr.InvalidJwe,'JOSE Header "p2c" (PBES2 Count) is missing or not a number.');if("string"!=typeof i.p2s)throw new Ir(Pr.InvalidJwe,'JOSE Header "p2s" (PBES2 salt) is missing or not a string.');if(!(t instanceof Uint8Array))throw new Ir(Pr.InvalidJwe,'Key management "key" must be a Uint8Array when using "PBES2" (Key Encryption Mode).');if(void 0===r)throw new Ir(Pr.InvalidJwe,'JWE "encrypted_key" is required when using "PBES2" (Key Encryption Mode).');let c;try{c=new Uint8Array([...Dt.string(i.alg).toUint8Array(),0,...Dt.base64Url(i.p2s).toUint8Array()])}catch{throw new Ir(Pr.EncodingError,'Failed to decode the JOSE Header "p2s" (PBES2 salt) value.')}const o=yield s.deriveKey({algorithm:i.alg,baseKeyBytes:t,iterations:i.p2c,salt:c});if(!o.alg||!["A128KW","A192KW","A256KW"].includes(o.alg))throw new Ir(Pr.AlgorithmNotSupported,`Unsupported Key Encryption Algorithm (alg) value: ${o.alg}`);return yield s.unwrapKey({decryptionKey:o,wrappedKeyBytes:r,wrappedKeyAlgorithm:i.enc})}default:throw new Ir(Pr.AlgorithmNotSupported,`Unsupported "alg" (Algorithm) Header Parameter value: ${i.alg}`)}})}static encrypt({key:t,joseHeader:r,crypto:i}){return hS(this,void 0,void 0,function*(){let s,c;switch(r.alg){case"dir":if(void 0!==c)throw new Ir(Pr.InvalidJwe,'JWE "encrypted_key" is not allowed when using "dir" (Direct Encryption Mode).');if(t instanceof Uint8Array)throw new Ir(Pr.InvalidJwe,'Key management "key" must be a Key URI or JWK when using "dir" (Direct Encryption Mode).');s=t;break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if("number"!=typeof r.p2c)throw new Ir(Pr.InvalidJwe,'JOSE Header "p2c" (PBES2 Count) is missing or not a number.');if("string"!=typeof r.p2s)throw new Ir(Pr.InvalidJwe,'JOSE Header "p2s" (PBES2 salt) is missing or not a string.');if(!(t instanceof Uint8Array))throw new Ir(Pr.InvalidJwe,'Key management "key" must be a Uint8Array when using "PBES2" (Key Encryption Mode).');let o;s=yield i.generateKey({algorithm:r.enc});try{o=new Uint8Array([...Dt.string(r.alg).toUint8Array(),0,...Dt.base64Url(r.p2s).toUint8Array()])}catch{throw new Ir(Pr.EncodingError,'Failed to decode the JOSE Header "p2s" (PBES2 salt) value.')}const u=yield i.deriveKey({algorithm:r.alg,baseKeyBytes:t,iterations:r.p2c,salt:o});c=yield i.wrapKey({encryptionKey:u,unwrappedKey:s});break}default:throw new Ir(Pr.AlgorithmNotSupported,`Unsupported "alg" (Algorithm) Header Parameter value: ${r.alg}`)}return{cek:s,encryptedKey:c}})}}function $g(n){return null!==n&&"object"==typeof n&&"encrypt"in n&&"function"==typeof n.encrypt&&"decrypt"in n&&"function"==typeof n.decrypt}function yS(...n){const t=new Set,r=n.filter(Boolean);for(const i of r)for(const s in i){if(t.has(s))return!0;t.add(s)}return!1}var mS=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};function z2(n,t){if(void 0!==t)try{if("string"!=typeof t)throw new Error;return Dt.base64Url(t).toUint8Array()}catch{throw new Ir(Pr.InvalidJwe,`Failed to decode the JWE Header parameter '${n}' from Base64 URL format to Uint8Array. Ensure the value is properly encoded in Base64 URL format without padding.`)}}class jg{constructor(t){this.ciphertext="",Object.assign(this,t)}static decrypt({jwe:t,key:r,keyManager:i=new vo,crypto:s=new Tl,options:c={}}){var o,u;return mS(this,void 0,void 0,function*(){if(!$g(s))throw new Ir(Pr.OperationNotSupported,'Crypto API does not support the "encrypt" operation.');if(!$g(i))throw new Ir(Pr.OperationNotSupported,'Key Manager does not support the "decrypt" operation.');if(!t.protected&&!t.header&&!t.unprotected)throw new Ir(Pr.InvalidJwe,'JWE is missing the required JOSE header parameters. Please provide at least one of the following: "protected", "header", or "unprotected"');if("string"!=typeof t.ciphertext)throw new Ir(Pr.InvalidJwe,"JWE Ciphertext is missing or not a string.");let A;if(t.protected)try{A=Dt.base64Url(t.protected).toObject()}catch{throw new Error("JWE Protected Header is invalid")}if(yS(A,t.header,t.unprotected))throw new Error('Duplicate properties detected. Please ensure that each parameter is defined only once across the JWE "header", "protected", and "unprotected" objects.');const S=Object.assign(Object.assign(Object.assign({},A),t.header),t.unprotected);if(!K2(S))throw new Error('JWE Header is missing required "alg" (Algorithm) and/or "enc" (Encryption) Header Parameters');if(Array.isArray(c.allowedAlgValues)&&!c.allowedAlgValues.includes(S.alg))throw new Error(`"alg" (Algorithm) Header Parameter value not allowed: ${S.alg}`);if(Array.isArray(c.allowedEncValues)&&!c.allowedEncValues.includes(S.enc))throw new Error(`"enc" (Encryption Algorithm) Header Parameter value not allowed: ${S.enc}`);let y;try{const we=t.encrypted_key?Dt.base64Url(t.encrypted_key).toUint8Array():void 0;y=yield pS.decrypt({key:r,encryptedKey:we,joseHeader:S,keyManager:i,crypto:s})}catch(we){if(we instanceof Ir&&(we.code===Pr.InvalidJwe||we.code===Pr.AlgorithmNotSupported))throw we;y="string"==typeof r?yield i.generateKey({algorithm:S.enc}):yield s.generateKey({algorithm:S.enc})}const R=z2("iv",t.iv),ee=z2("tag",t.tag),ae=void 0!==ee?new Uint8Array([...Dt.base64Url(t.ciphertext).toUint8Array(),...ee??[]]):Dt.base64Url(t.ciphertext).toUint8Array(),te=void 0!==t.aad?new Uint8Array([...Dt.string(null!==(o=t.protected)&&void 0!==o?o:"").toUint8Array(),...Dt.string(".").toUint8Array(),...Dt.string(t.aad).toUint8Array()]):Dt.string(null!==(u=t.protected)&&void 0!==u?u:"").toUint8Array();return{plaintext:"string"==typeof y?yield i.decrypt({keyUri:y,data:ae,iv:R,additionalData:te}):yield s.decrypt({key:y,data:ae,iv:R,additionalData:te}),protectedHeader:A,additionalAuthenticatedData:z2("aad",t.aad),sharedUnprotectedHeader:t.unprotected,unprotectedHeader:t.header}})}static encrypt({key:t,plaintext:r,additionalAuthenticatedData:i,protectedHeader:s,sharedUnprotectedHeader:c,unprotectedHeader:o,keyManager:u=new vo,crypto:A=new Tl}){return mS(this,void 0,void 0,function*(){if(!$g(A))throw new Ir(Pr.OperationNotSupported,'Crypto API does not support the "encrypt" operation.');if(!$g(u))throw new Ir(Pr.OperationNotSupported,'Key Manager does not support the "decrypt" operation.');if(!s&&!c&&!o)throw new Ir(Pr.InvalidJwe,'JWE is missing the required JOSE header parameters. Please provide at least one of the following: "protectedHeader", "sharedUnprotectedHeader", or "unprotectedHeader"');if(!(r instanceof Uint8Array))throw new Ir(Pr.InvalidJwe,"Plaintext is missing or not a byte array.");if(yS(s,c,o))throw new Error('Duplicate properties detected. Please ensure that each parameter is defined only once across the JWE "protectedHeader", "sharedUnprotectedHeader", and "unprotectedHeader" objects.');const S=Object.assign(Object.assign(Object.assign({},s),c),o);if(!K2(S))throw new Error('JWE Header is missing required "alg" (Algorithm) and/or "enc" (Encryption) Header Parameters');const{cek:y,encryptedKey:R}=yield pS.encrypt({key:t,joseHeader:S,keyManager:u,crypto:A});let ee;switch(S.enc){case"A128GCM":case"A192GCM":case"A256GCM":ee=function QN(n){return Wl(n)}(12);break;default:ee=new Uint8Array(0)}const ae=s?Dt.object(s).toBase64Url():"";let te,fe;i?(fe=Dt.uint8Array(i).toBase64Url(),te=Dt.string(ae+"."+fe).toUint8Array()):te=Dt.string(ae).toUint8Array();const we="string"==typeof y?yield u.encrypt({keyUri:y,data:r,iv:ee,additionalData:te}):yield A.encrypt({key:y,data:r,iv:ee,additionalData:te}),Pe=we.slice(0,-16),Te=we.slice(-16),Ae=new jg({ciphertext:Dt.uint8Array(Pe).toBase64Url()});return R&&(Ae.encrypted_key=Dt.uint8Array(R).toBase64Url()),s&&(Ae.protected=ae),c&&(Ae.unprotected=c),o&&(Ae.header=o),ee&&(Ae.iv=Dt.uint8Array(ee).toBase64Url()),fe&&(Ae.aad=fe),Te&&(Ae.tag=Dt.uint8Array(Te).toBase64Url()),Ae})}}var gS=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class Bl{static decrypt({jwe:t,key:r,keyManager:i=new vo,crypto:s=new Tl,options:c={}}){return gS(this,void 0,void 0,function*(){if("string"!=typeof t)throw new Ir(Pr.InvalidJwe,"Invalid JWE format. JWE must be a string.");const{0:o,1:u,2:A,3:S,4:y,length:R}=t.split(".");if(5!==R)throw new Ir(Pr.InvalidJwe,"Invalid JWE format. JWE must have 5 parts.");const ee=yield jg.decrypt({jwe:{ciphertext:S,encrypted_key:u||void 0,iv:A||void 0,protected:o,tag:y||void 0},key:r,keyManager:i,crypto:s,options:c});if(!K2(ee.protectedHeader))throw new Ir(Pr.InvalidJwe,"Decrypt operation failed due to missing or malformed JWE Protected Header");return{plaintext:ee.plaintext,protectedHeader:ee.protectedHeader}})}static encrypt({plaintext:t,protectedHeader:r,key:i,keyManager:s=new vo,crypto:c=new Tl,options:o={}}){return gS(this,void 0,void 0,function*(){const u=yield jg.encrypt({plaintext:t,protectedHeader:r,key:i,keyManager:s,crypto:c,options:o});return[u.protected,u.encrypted_key,u.iv,u.ciphertext,u.tag].join(".")})}}var fa=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};function vS(n){return"string"!=typeof n||0===n.trim().length}class yF{constructor({keyDerivationWorkFactor:t,store:r}={}){this.crypto=new Tl,this._keyDerivationWorkFactor=t??21e4,this._store=r??new bE}backup(){return fa(this,void 0,void 0,function*(){if(this.isLocked()||!1===(yield this.isInitialized()))throw new Error("HdIdentityVault: Unable to proceed with the backup operation because the identity vault has not been initialized and unlocked. Please ensure the vault is properly initialized with a secure password before attempting to backup its contents.");const t={did:yield this.getStoredDid(),contentEncryptionKey:yield this.getStoredContentEncryptionKey(),status:yield this.getStatus()},r=Dt.object(t).toBase64Url(),i={data:r,dateCreated:(new Date).toISOString(),size:r.length};return yield this.setStatus({lastBackup:i.dateCreated}),i})}changePassword({oldPassword:t,newPassword:r}){return fa(this,void 0,void 0,function*(){if(!1===(yield this.isInitialized()))throw new Error("HdIdentityVault: Unable to proceed with the change password operation because the identity vault has not been initialized. Please ensure the vault is properly initialized with a secure password before trying again.");yield this.lock();const i=yield this.getStoredContentEncryptionKey();let s,c;try{let u;({plaintext:u,protectedHeader:s}=yield Bl.decrypt({jwe:i,key:Dt.string(t).toUint8Array(),crypto:this.crypto,keyManager:new cf})),c=Dt.uint8Array(u).toObject()}catch{throw new Error("HdIdentityVault: Unable to change the vault password due to an incorrectly entered old password.")}const o=yield Bl.encrypt({key:Dt.string(r).toUint8Array(),protectedHeader:s,plaintext:Dt.object(c).toUint8Array(),crypto:this.crypto,keyManager:new cf});yield this._store.set("contentEncryptionKey",o),this._contentEncryptionKey=c})}getDid(){return fa(this,void 0,void 0,function*(){if(this.isLocked())throw new Error("HdIdentityVault: Vault has not been initialized and unlocked.");const t=yield this.getStoredDid(),{plaintext:r}=yield Bl.decrypt({jwe:t,key:this._contentEncryptionKey,crypto:this.crypto,keyManager:new cf}),i=Dt.uint8Array(r).toObject();if(!j5(i))throw new Error("HdIdentityVault: Unable to decode malformed DID in identity vault");return yield No.import({portableDid:i})})}getStatus(){return fa(this,void 0,void 0,function*(){const t=yield this._store.get("vaultStatus");if(!t)return{initialized:!1,lastBackup:null,lastRestore:null};const r=Dt.string(t).toObject();if(!function pF(n){return"object"==typeof n&&null!==n&&"initialized"in n&&"boolean"==typeof n.initialized&&"lastBackup"in n&&"lastRestore"in n}(r))throw new Error("HdIdentityVault: Invalid IdentityVaultStatus object in store");return r})}initialize({password:t,recoveryPhrase:r}){return fa(this,void 0,void 0,function*(){if(yield this.isInitialized())throw new Error("HdIdentityVault: Vault has already been initialized.");if(vS(t))throw new Error("HdIdentityVault: The password is required and cannot be blank. Please provide a ' +\n        'valid, non-empty password.");if(r&&vS(r))throw new Error("HdIdentityVault: The password is required and cannot be blank. Please provide a ' +\n        'valid, non-empty password.");if(r??(r=function sF(n,t=128){if(uu(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return function cF(n,t){return dS(n),uS(t).encode(n).join((n=>"\u3042\u3044\u3053\u304f\u3057\u3093"===n[0])(t)?"\u3000":" ")}(Wl(t/8),n)}(J5,128)),!function dF(n,t){try{!function aF(n,t){const{words:r}=L2(n);dS(uS(t).decode(r))}(n,t)}catch{return!1}return!0}(r,J5))throw new Error("HdIdentityVault: The provided recovery phrase is invalid. Please ensure that the recovery phrase is a correctly formatted series of 12 words.");const i=yield uF(r),s=Rg.fromMasterSeed(i),c=s.derive("m/44'/0'/0'/0'/0'"),o=yield this.crypto.deriveKey({algorithm:"HKDF-512",baseKeyBytes:c.privateKey,salt:"",info:"vault_cek",derivedKeyAlgorithm:"A256GCM"}),u=yield this.crypto.deriveKeyBytes({algorithm:"HKDF-512",baseKeyBytes:c.publicKey,salt:"",info:"vault_unlock_salt",length:256}),A={alg:"PBES2-HS512+A256KW",enc:"A256GCM",cty:"text/plain",p2c:this._keyDerivationWorkFactor,p2s:Dt.uint8Array(u).toBase64Url()},S=yield Bl.encrypt({key:Dt.string(t).toUint8Array(),protectedHeader:A,plaintext:Dt.object(o).toUint8Array(),crypto:this.crypto,keyManager:new cf});yield this._store.set("contentEncryptionKey",S);const y=s.derive("m/44'/0'/1708523827'/0'/0'"),R=yield this.crypto.bytesToPrivateKey({algorithm:"Ed25519",privateKeyBytes:y.privateKey});let ee=s.derive("m/44'/0'/1708523827'/0'/1'");const ae=yield this.crypto.bytesToPrivateKey({algorithm:"Ed25519",privateKeyBytes:ee.privateKey}),te=new kL;yield te.addPredefinedKeys({privateKeys:[R,ae]});const we=yield(yield bl.create({keyManager:te,options:{verificationMethods:[{algorithm:"Ed25519",id:"sig",purposes:["assertionMethod","authentication"]}]}})).export(),Te=yield Bl.encrypt({key:o,plaintext:Dt.object(we).toUint8Array(),protectedHeader:{alg:"dir",enc:"A256GCM",cty:"json"},crypto:this.crypto,keyManager:new cf});return yield this._store.set("did",Te),this._contentEncryptionKey=o,yield this.setStatus({initialized:!0}),r})}isInitialized(){return fa(this,void 0,void 0,function*(){return this.getStatus().then(({initialized:t})=>t)})}isLocked(){return!this._contentEncryptionKey}lock(){return fa(this,void 0,void 0,function*(){if(!1===(yield this.isInitialized()))throw new Error("HdIdentityVault: Lock operation failed. Vault has not been initialized.");this._contentEncryptionKey&&(this._contentEncryptionKey.k=""),this._contentEncryptionKey=void 0})}restore({backup:t,password:r}){return fa(this,void 0,void 0,function*(){if(!function hF(n){return"object"==typeof n&&null!==n&&"dateCreated"in n&&"string"==typeof n.dateCreated&&"size"in n&&"number"==typeof n.size&&"data"in n&&"string"==typeof n.data}(t))throw new Error("HdIdentityVault: Restore operation failed due to invalid backup object.");let i,s,c;try{c=yield this.getStoredDid(),s=yield this.getStoredContentEncryptionKey(),i=yield this.getStatus()}catch{throw new Error("HdIdentityVault: The restore operation cannot proceed because the existing vault contents are missing or inaccessible. If the problem persists consider re-initializing the vault and retrying the restore.")}try{const o=Dt.base64Url(t.data).toObject();yield this._store.set("did",o.did),yield this._store.set("contentEncryptionKey",o.contentEncryptionKey),yield this.setStatus(o.status),yield this.unlock({password:r})}catch{throw yield this.setStatus(i),yield this._store.set("contentEncryptionKey",s),yield this._store.set("did",c),new Error("HdIdentityVault: Restore operation failed due to invalid backup data or an incorrect password. Please verify the password is correct for the provided backup and try again.")}yield this.setStatus({lastRestore:(new Date).toISOString()})})}unlock({password:t}){return fa(this,void 0,void 0,function*(){yield this.lock();const r=yield this.getStoredContentEncryptionKey();try{const{plaintext:i}=yield Bl.decrypt({jwe:r,key:Dt.string(t).toUint8Array(),crypto:this.crypto,keyManager:new cf}),s=Dt.uint8Array(i).toObject();this._contentEncryptionKey=s}catch{throw new Error("HdIdentityVault: Unable to unlock the vault due to an incorrect password.")}})}getStoredDid(){return fa(this,void 0,void 0,function*(){const t=yield this._store.get("did");if(!t)throw new Error("HdIdentityVault: Unable to retrieve the DID record from the vault. Please check the vault status and if the problem persists consider re-initializing the vault and restoring the contents from a previous backup.");return t})}getStoredContentEncryptionKey(){return fa(this,void 0,void 0,function*(){const t=yield this._store.get("contentEncryptionKey");if(!t)throw new Error("HdIdentityVault: Unable to retrieve the Content Encryption Key record from the vault. Please check the vault status and if the problem persists consider re-initializing the vault and restoring the contents from a previous backup.");return t})}setStatus({initialized:t,lastBackup:r,lastRestore:i}){return fa(this,void 0,void 0,function*(){let s=yield this.getStatus();return s.initialized=t??s.initialized,s.lastBackup=r??s.lastBackup,s.lastRestore=i??s.lastRestore,yield this._store.set("vaultStatus",JSON.stringify(s)),!0})}}var cd=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};function mF(n){return!(!n||"object"!=typeof n||null===n)&&"name"in n}class gF extends B2{constructor(){super(...arguments),this.name="DwnIdentityStore",this._recordProperties={dataFormat:"application/json",schema:"https://identity.foundation/schemas/web5/identity-metadata"}}delete(t){const r=Object.create(null,{delete:{get:()=>super.delete}});return cd(this,void 0,void 0,function*(){return yield r.delete.call(this,t)})}get(t){const r=Object.create(null,{get:{get:()=>super.get}});return cd(this,void 0,void 0,function*(){return yield r.get.call(this,t)})}set(t){const r=Object.create(null,{set:{get:()=>super.set}});return cd(this,void 0,void 0,function*(){return yield r.set.call(this,t)})}list(t){const r=Object.create(null,{list:{get:()=>super.list}});return cd(this,void 0,void 0,function*(){return yield r.list.call(this,t)})}getAllRecords({agent:t,tenantDid:r}){var i;return cd(this,void 0,void 0,function*(){this._index.clear();const{reply:s}=yield t.dwn.processRequest({author:r,target:r,messageType:sn.RecordsQuery,messageParams:{filter:Object.assign({},this._recordProperties)}});let c=[];for(const o of null!==(i=s.entries)&&void 0!==i?i:[]){if(!o.encodedData)throw new Error(`${this.name}: Expected 'encodedData' to be present in the DWN query result entry`);const u=Dt.base64Url(o.encodedData).toObject();mF(u)&&(this._index.set(`${r}${Vo}${u.uri}`,o.recordId),this._cache.set(o.recordId,u),c.push(u))}return c})}}class vF extends R2{constructor(){super(...arguments),this.name="InMemoryIdentityStore"}delete(t){const r=Object.create(null,{delete:{get:()=>super.delete}});return cd(this,void 0,void 0,function*(){return yield r.delete.call(this,t)})}get(t){const r=Object.create(null,{get:{get:()=>super.get}});return cd(this,void 0,void 0,function*(){return yield r.get.call(this,t)})}list(t){const r=Object.create(null,{list:{get:()=>super.list}});return cd(this,void 0,void 0,function*(){return yield r.list.call(this,t)})}set(t){const r=Object.create(null,{set:{get:()=>super.set}});return cd(this,void 0,void 0,function*(){return yield r.set.call(this,t)})}}var Rl=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class wF{constructor({agent:t,store:r}={}){this._agent=t,this._store=r??new vF}get agent(){if(void 0===this._agent)throw new Error("AgentIdentityApi: Unable to determine agent execution context.");return this._agent}set agent(t){this._agent=t}create({metadata:t,didMethod:r="dht",didOptions:i,store:s,tenant:c}){return Rl(this,void 0,void 0,function*(){const o=yield this.agent.did.create({method:r,options:i,store:s,tenant:c}),u=new Tg({did:o,metadata:Object.assign(Object.assign({},t),{uri:o.uri,tenant:c??o.uri})});return(s??!0)&&(yield this._store.set({id:u.did.uri,data:u.metadata,agent:this.agent,tenant:u.metadata.tenant,preventDuplicates:!1,useCache:!0})),u})}export({didUri:t,tenant:r}){return Rl(this,void 0,void 0,function*(){const i=yield this.get({didUri:t,tenant:r});if(!i)throw new Error(`AgentIdentityApi: Failed to export due to Identity not found: ${t}`);return yield i.export()})}get({didUri:t,tenant:r}){return Rl(this,void 0,void 0,function*(){const i=yield this._store.get({id:t,agent:this.agent,tenant:r,useCache:!0});if(!i)return;const s=yield this.agent.did.get({didUri:t,tenant:i.tenant});if(!s)throw new Error(`AgentIdentityApi: Identity is present in the store but DID is missing: ${t}`);return new Tg({did:s,metadata:i})})}import({portableIdentity:t}){return Rl(this,void 0,void 0,function*(){const r=yield this.agent.did.import({portableDid:t.portableDid,tenant:t.metadata.tenant});if(!r)throw new Error(`AgentIdentityApi: Failed to import Identity: ${t.metadata.uri}`);const i=new Tg({did:r,metadata:t.metadata});return yield this._store.set({id:i.did.uri,data:i.metadata,agent:this.agent,tenant:i.metadata.tenant,preventDuplicates:!0,useCache:!0}),i})}list({tenant:t}={}){return Rl(this,void 0,void 0,function*(){const r=yield this._store.list({agent:this.agent,tenant:t}),i=[];for(const s of r){const c=yield this.get({didUri:s.uri,tenant:s.tenant});i.push(c)}return i})}manage({portableIdentity:t}){return Rl(this,void 0,void 0,function*(){const r=yield this.agent.did.get({didUri:t.metadata.uri,tenant:t.metadata.tenant});if(!r)throw new Error(`AgentIdentityApi: Failed to manage Identity: ${t.metadata.uri}`);const i=new Tg({did:r,metadata:t.metadata});return yield this._store.set({id:i.did.uri,data:i.metadata,agent:this.agent,preventDuplicates:!0,useCache:!0}),i})}}const V2=(n,t,r)=>({jsonrpc:"2.0",id:n,method:t,params:r}),wS=(n,t,r,i)=>({jsonrpc:"2.0",id:n,method:`rpc.subscribe.${t}`,params:i,subscription:{id:r}});function Ug(n){try{return JSON.parse(n)}catch{return null}}var dp=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class _F{constructor({ttl:t="15m"}={}){this.cache=new hm({ttl:np(t)})}get(t){return dp(this,void 0,void 0,function*(){return this.cache.get(t)})}set(t,r){return dp(this,void 0,void 0,function*(){this.cache.set(t,r)})}delete(t){return dp(this,void 0,void 0,function*(){this.cache.delete(t)})}clear(){return dp(this,void 0,void 0,function*(){this.cache.clear()})}close(){return dp(this,void 0,void 0,function*(){})}}var bS=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class xF{constructor(t){this.serverInfoCache=t??new _F}get transportProtocols(){return["http:","https:"]}sendDwnRequest(t){return bS(this,void 0,void 0,function*(){const r=Ju(),i=V2(r,"dwn.processMessage",{target:t.targetDid,message:t.message}),s={method:"POST",headers:{"dwn-request":JSON.stringify(i)}};t.data&&(s.headers["content-type"]="application/octet-stream",s.body=t.data);const c=yield fetch(t.dwnUrl,s);let o,u;const{headers:A}=c;if(A.has("dwn-response")){const y=Ug(A.get("dwn-response"));if(null==y)throw new Error(`failed to parse json rpc response. dwn url: ${t.dwnUrl}`);u=c.body,o=y}else{const y=yield c.text();o=JSON.parse(y)}if(o.error){const{code:y,message:R}=o.error;throw new Error(`(${y}) - ${R}`)}const{reply:S}=o.result;return u&&(S.record.data=u),S})}getServerInfo(t){return bS(this,void 0,void 0,function*(){const r=yield this.serverInfoCache.get(t);if(r)return r;const i=new URL(t);i.pathname.endsWith("/")?i.pathname+="info":i.pathname+="/info";try{const s=yield fetch(i.toString());if(s.ok){const c=yield s.json(),o={registrationRequirements:c.registrationRequirements,maxFileSize:c.maxFileSize,webSocketSupport:c.webSocketSupport};return this.serverInfoCache.set(t,o),o}throw new Error(`HTTP (${s.status}) - ${s.statusText}`)}catch(s){throw new Error(`Error encountered while processing response from ${i.toString()}: ${s.message}`)}})}}var kl=null;typeof WebSocket<"u"?kl=WebSocket:typeof MozWebSocket<"u"?kl=MozWebSocket:typeof globalThis<"u"?kl=globalThis.WebSocket||globalThis.MozWebSocket:typeof window<"u"?kl=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(kl=self.WebSocket||self.MozWebSocket);const EF=kl;var Lg=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};const SF=3e3,AF=3e4;class H2{constructor(t,r){this.socket=t,this.responseTimeout=r,this.messageHandlers=new Map}static connect(t,r={}){return Lg(this,void 0,void 0,function*(){const{connectTimeout:i=SF,responseTimeout:s=AF,onclose:c,onerror:o}=r,u=new EF(t);return u.onclose=c||(()=>{console.info(`JSON RPC Socket close ${t}`)}),u.onerror=o||(A=>{console.error(`JSON RPC Socket error ${t}`,A)}),new Promise((A,S)=>{u.addEventListener("open",()=>{const y=new H2(u,s);u.addEventListener("message",R=>{const ee=Ug(R.data),ae=y.messageHandlers.get(ee.id);ae&&ae(R)}),A(y)}),u.addEventListener("error",y=>{S(y)}),setTimeout(()=>S,i)})})}close(){this.socket.close()}request(t){return Lg(this,void 0,void 0,function*(){return new Promise((r,i)=>{var s;null!==(s=t.id)&&void 0!==s||(t.id=Ju()),this.messageHandlers.set(t.id,o=>{const u=Ug(o.data);if(u.id===t.id)return this.messageHandlers.delete(t.id),r(u)}),this.send(t),setTimeout(()=>{this.messageHandlers.delete(t.id),i(new Error("request timed out"))},this.responseTimeout)})})}subscribe(t,r){return Lg(this,void 0,void 0,function*(){if(!t.method.startsWith("rpc.subscribe."))throw new Error("subscribe rpc requests must include the `rpc.subscribe` prefix");if(!t.subscription)throw new Error("subscribe rpc requests must include subscribe options");const i=t.subscription.id;this.messageHandlers.set(i,u=>{const A=Ug(u.data.toString());A.id===i&&(void 0!==A.error&&(this.messageHandlers.delete(i),this.closeSubscription(i)),r(A))});const c=yield this.request(t);return c.error?(this.messageHandlers.delete(i),{response:c}):{response:c,close:()=>Lg(this,void 0,void 0,function*(){this.messageHandlers.delete(i),yield this.closeSubscription(i)})}})}closeSubscription(t){const r=Ju(),i=wS(r,"close",t,{});return this.request(i)}send(t){this.socket.send(JSON.stringify(t))}}var W2=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class iu{get transportProtocols(){return["ws:","wss:"]}sendDwnRequest(t,r){return W2(this,void 0,void 0,function*(){const i=new URL(t.dwnUrl);if("ws:"!==i.protocol&&"wss:"!==i.protocol)throw new Error(`Invalid websocket protocol ${i.protocol}`);if(!iu.connections.has(i.host))try{const S=yield H2.connect(i.toString(),r);iu.connections.set(i.host,{socket:S,subscriptions:new Map})}catch(S){throw new Error(`Error connecting to ${i.host}: ${S.message}`)}const c=iu.connections.get(i.host),{targetDid:o,message:u,subscriptionHandler:A}=t;return A?iu.subscriptionRequest(c,o,u,A):iu.processMessage(c,o,u)})}static processMessage(t,r,i){return W2(this,void 0,void 0,function*(){const s=Ju(),c=V2(s,"dwn.processMessage",{target:r,message:i}),{socket:o}=t,u=yield o.request(c),{error:A,result:S}=u;if(void 0!==A)throw new Error(`error sending DWN request: ${A.message}`);return S.reply})}static subscriptionRequest(t,r,i,s){return W2(this,void 0,void 0,function*(){const c=Ju(),o=Ju(),u=wS(c,"dwn.processMessage",o,{target:r,message:i}),{socket:A,subscriptions:S}=t,{response:y,close:R}=yield A.subscribe(u,fe=>{const{result:we,error:Pe}=fe;if(Pe){const Ae=S.get(o);return Ae&&Ae.close(),void S.delete(o)}const{event:Te}=we;s(Te)}),{error:ee,result:ae}=y;if(ee)throw new Error(`could not subscribe via jsonrpc socket: ${ee.message}`);const{reply:te}=ae;return te.subscription&&R&&(S.set(o,Object.assign(Object.assign({},te.subscription),{close:R})),te.subscription.close=R),te})}}iu.connections=new Map;var up=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class TF{constructor(t=[]){this.transportClients=new Map,t=[new IF,new PF,...t];for(let r of t)for(let i of r.transportProtocols)this.transportClients.set(i,r)}get transportProtocols(){return Array.from(this.transportClients.keys())}sendDidRequest(t){return up(this,void 0,void 0,function*(){const r=new URL(t.url),i=this.transportClients.get(r.protocol);if(!i){const s=new Error(`no ${r.protocol} transport client available`);throw s.name="NO_TRANSPORT_CLIENT",s}return i.sendDidRequest(t)})}sendDwnRequest(t){const r=new URL(t.dwnUrl),i=this.transportClients.get(r.protocol);if(!i){const s=new Error(`no ${r.protocol} transport client available`);throw s.name="NO_TRANSPORT_CLIENT",s}return i.sendDwnRequest(t)}getServerInfo(t){return up(this,void 0,void 0,function*(){const r=new URL(t),i=this.transportClients.get(r.protocol);if(!i){const s=new Error(`no ${r.protocol} transport client available`);throw s.name="NO_TRANSPORT_CLIENT",s}return i.getServerInfo(t)})}}class IF extends xF{sendDidRequest(t){return up(this,void 0,void 0,function*(){const r=Ju(),i=V2(r,t.method,{data:t.data}),s=new Request(t.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});let c;try{const o=yield fetch(s);if(!o.ok)throw new Error(`HTTP (${o.status}) - ${o.statusText}`);if(c=yield o.json(),c.error){const{code:u,message:A}=c.error;throw new Error(`JSON RPC (${u}) - ${A}`)}}catch(o){throw new Error(`Error encountered while processing response from ${t.url}: ${o.message}`)}return c.result})}}class PF extends iu{sendDidRequest(t){return up(this,void 0,void 0,function*(){throw new Error(`not implemented for transports [${this.transportProtocols.join(", ")}]`)})}getServerInfo(t){return up(this,void 0,void 0,function*(){throw new Error(`not implemented for transports [${this.transportProtocols.join(", ")}]`)})}}class RF{constructor({agent:t,syncEngine:r}){this._syncEngine=r,this._agent=t}get agent(){if(void 0===this._agent)throw new Error("AgentSyncApi: Unable to determine agent execution context.");return this._agent}set agent(t){this._agent=t,this._syncEngine.agent=t}registerIdentity(t){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){yield this._syncEngine.registerIdentity(t)})}startSync(t){return this._syncEngine.startSync(t)}stopSync(){this._syncEngine.stopSync()}}var _o=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};const _S=n=>n>=200&&n<=299;class OF{constructor({agent:t,dataPath:r,db:i}){this._agent=t,this._db=i||new fb.Level(r??"DATA/AGENT/SYNC_STORE"),this._ulidFactory=k5()}get agent(){if(void 0===this._agent)throw new Error("SyncEngineLevel: Unable to determine agent execution context.");return this._agent}set agent(t){this._agent=t}clear(){return _o(this,void 0,void 0,function*(){yield this._db.clear()})}close(){return _o(this,void 0,void 0,function*(){yield this._db.close()})}pull(){var t;return _o(this,void 0,void 0,function*(){const r=yield this.getSyncPeerState({syncDirection:"pull"});yield this.enqueueOperations({syncDirection:"pull",syncPeerState:r});const i=this.getPullQueue(),s=yield i.iterator().all(),c=[],o=new Set;for(let u of s){const[A]=u,[S,y,R,ee]=A.split("~");if(o.has(y))continue;if(yield this.messageExists(S,ee)){c.push({type:"del",key:A});continue}const te=yield this.agent.dwn.createMessage({author:S,messageType:sn.MessagesGet,messageParams:{messageCids:[ee]}});let fe;try{fe=yield this.agent.rpc.sendDwnRequest({dwnUrl:y,targetDid:S,message:te})}catch{o.add(y);continue}for(let we of null!==(t=fe.entries)&&void 0!==t?t:[]){if(we.error||!we.message){yield this.addMessage(S,ee),c.push({type:"del",key:A});continue}let Pe;if(Ig(we)){const{encodedData:Ae}=we,Ce=we.message;if(Ae){const je=Dt.base64Url(Ae).toUint8Array();Pe=jd.fromBytes(je)}else{const je=yield this.agent.dwn.createMessage({author:S,messageType:sn.RecordsRead,messageParams:{filter:{recordId:Ce.recordId}}}),Le=yield this.agent.rpc.sendDwnRequest({dwnUrl:y,targetDid:S,message:je.message}),{record:ze,status:$e}=Le;if(_S($e.code)&&ze)Pe=Os.fromWebReadable({readableStream:ze.data});else if($e.code>=400){const Ye=yield this.agent.dwn.processMessage({targetDid:S,message:Ce});if(202===Ye.status.code||409===Ye.status.code){yield this.addMessage(S,ee),c.push({type:"del",key:A});continue}throw new Error(`SyncManager: Failed to sync tombstone for message '${ee}'`)}}}const Te=yield this.agent.dwn.processMessage({targetDid:S,message:we.message,dataStream:Pe});(202===Te.status.code||409===Te.status.code)&&(yield this.addMessage(S,ee),c.push({type:"del",key:A}))}}yield i.batch(c)})}push(){return _o(this,void 0,void 0,function*(){const t=yield this.getSyncPeerState({syncDirection:"push"});yield this.enqueueOperations({syncDirection:"push",syncPeerState:t});const r=this.getPushQueue(),i=yield r.iterator().all(),s=[],c=new Set;for(let o of i){const[u]=o,[A,S,y,R]=u.split("~");if(c.has(S))continue;const ee=yield this.getDwnMessage({author:A,messageCid:R});if(ee)try{const ae=yield this.agent.rpc.sendDwnRequest({dwnUrl:S,targetDid:A,data:ee.data,message:ee.message});(202===ae.status.code||409===ae.status.code)&&(yield this.addMessage(A,R),s.push({type:"del",key:u}))}catch{c.add(S)}else s.push({type:"del",key:u}),yield this.addMessage(A,R)}yield r.batch(s)})}registerIdentity({did:t}){return _o(this,void 0,void 0,function*(){yield this._db.sublevel("registeredIdentities").put(t,"")})}startSync({interval:t}){const r=np(t);return new Promise((i,s)=>{const c=()=>_o(this,void 0,void 0,function*(){this._syncIntervalId&&clearInterval(this._syncIntervalId);try{yield this.push(),yield this.pull()}catch(o){this.stopSync(),s(o)}this._syncIntervalId=setInterval(c,r)});this._syncIntervalId=setInterval(c,r)})}stopSync(){this._syncIntervalId&&(clearInterval(this._syncIntervalId),this._syncIntervalId=void 0)}enqueueOperations({syncDirection:t,syncPeerState:r}){return _o(this,void 0,void 0,function*(){for(let i of r){const s=yield this.getDwnEventLog({did:i.did,dwnUrl:i.dwnUrl,cursor:i.cursor,syncDirection:t}),c=[];for(let o of s){const u=this._ulidFactory(),A=[i.did,i.dwnUrl,u,o].join("~");c.push({type:"put",key:A,value:""})}c.length>0&&(yield("pull"===t?this.getPullQueue():this.getPushQueue()).batch(c))}})}getDwnEventLog({did:t,dwnUrl:r,syncDirection:i,cursor:s}){var c;return _o(this,void 0,void 0,function*(){let o={};if("pull"===i){const A=yield this.agent.dwn.createMessage({author:t,messageType:sn.EventsGet,messageParams:{cursor:s}});try{o=yield this.agent.rpc.sendDwnRequest({dwnUrl:r,targetDid:t,message:A})}catch{}}else"push"===i&&(o=(yield this.agent.dwn.processRequest({author:t,target:t,messageType:sn.EventsGet,messageParams:{cursor:s}})).reply);const u=null!==(c=o.entries)&&void 0!==c?c:[];return o.cursor&&this.setCursor(t,r,i,o.cursor),u})}getDwnMessage({author:t,messageCid:r}){return _o(this,void 0,void 0,function*(){let{reply:i}=yield this.agent.dwn.processRequest({author:t,target:t,messageType:sn.MessagesGet,messageParams:{messageCids:[r]}});if(!i.entries||1!==i.entries.length)return;const[s]=i.entries,c=s.message;if(!c)return;let o={message:c};if(Ig(s))if(s.encodedData){const u=Dt.base64Url(s.encodedData).toUint8Array();o.data=new Blob([u])}else{const A=(yield this.agent.dwn.processRequest({author:t,target:t,messageType:sn.RecordsRead,messageParams:{filter:{recordId:s.message.recordId}}})).reply;if(_S(A.status.code)&&A.record)o.data=yield Os.consumeToBlob({readable:A.record.data});else if(!(n=>n>=400&&n<=499)(A.status.code)){const{status:{code:S,detail:y}}=A;throw new Error(`SyncEngineLevel: (${S}) Failed to read data associated with record ${s.message.recordId}. ${y}}`)}}return o})}getSyncPeerState({syncDirection:t}){return _o(this,void 0,void 0,function*(){const r=yield this._db.sublevel("registeredIdentities").keys().all(),i=[];for(let s of r){const c=yield K5(s,this.agent.did);if(0!==c.length)for(let o of c){const u=yield this.getCursor(s,o,t);i.push({did:s,dwnUrl:o,cursor:u})}}return i})}getCursor(t,r,i){return _o(this,void 0,void 0,function*(){const s=`${t}~${r}~${i}`,c=this.getCursorStore();try{const o=yield c.get(s);if(o)return JSON.parse(o)}catch(o){if(o.notFound)return}})}setCursor(t,r,i,s){return _o(this,void 0,void 0,function*(){const c=`${t}~${r}~${i}`;yield this.getCursorStore().put(c,JSON.stringify(s))})}messageExists(t,r){return _o(this,void 0,void 0,function*(){const i=this.getMessageStore(t);try{return yield i.get(r),!0}catch(s){if(s.notFound)return!1;throw s}})}addMessage(t,r){return _o(this,void 0,void 0,function*(){return yield this.getMessageStore(t).put(r,"")})}getMessageStore(t){return this._db.sublevel("history").sublevel(t).sublevel("messages")}getCursorStore(){return this._db.sublevel("cursors")}getPushQueue(){return this._db.sublevel("pushQueue")}getPullQueue(){return this._db.sublevel("pullQueue")}}var xS=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class DF{constructor(t){this.agent=t.agent,this.connectedDid=t.connectedDid}create(t){return xS(this,void 0,void 0,function*(){const r=yield this.agent.processDidRequest({messageType:sp.Create,messageParams:Object.assign({},t)}),{result:i}=r,s=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(r,["result"]);return Object.assign({did:i},s)})}resolve(t,r){return xS(this,void 0,void 0,function*(){const{result:i}=yield this.agent.processDidRequest({messageParams:{didUri:t,options:r},messageType:sp.Resolve});return i})}}function ES(n,t){let r;const i=pm(n);if("text/plain"===t||"String"===i)r=new Blob([n],{type:"text/plain"});else if("application/json"===t||"Object"===i){const s=Dt.object(n).toUint8Array();r=new Blob([s],{type:"application/json"})}else if("Uint8Array"===i||"ArrayBuffer"===i)r=new Blob([n],{type:"application/octet-stream"});else{if("Blob"!==i)throw new Error("data type not supported.");r=n}return{dataBlob:r,dataFormat:t=t||r.type||"application/octet-stream"}}class la{static check(t,r){let i=la.cache.get(t);return!!i&&i.has(r)}static set(t,r){let i=la.cache.get(t)||new Set;if(la.cache.delete(t),la.cache.set(t,i),this.cache.size>la.sendCacheLimit){const s=la.cache.keys().next().value;la.cache.delete(s)}if(i.delete(r),i.add(r),i.size>la.sendCacheLimit){const s=i.keys().next().value;i.delete(s)}}}la.cache=new Map,la.sendCacheLimit=100;var ha=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})},SS=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r};let G2=(()=>{class n{get attestation(){return this._attestation}get authorization(){return this._authorization}get author(){return this._author}get contextId(){return this._contextId}get dataFormat(){return this._descriptor.dataFormat}get dateCreated(){return this._descriptor.dateCreated}get encryption(){return this._encryption}get initialWrite(){return this._initialWrite}get id(){return this._recordId}get interface(){return this._descriptor.interface}get method(){return this._descriptor.method}get parentId(){return this._descriptor.parentId}get protocol(){return this._descriptor.protocol}get protocolPath(){return this._descriptor.protocolPath}get protocolRole(){return this._protocolRole}get recipient(){return this._descriptor.recipient}get schema(){return this._descriptor.schema}get dataCid(){return this._descriptor.dataCid}get dataSize(){return this._descriptor.dataSize}get dateModified(){return this._descriptor.messageTimestamp}get datePublished(){return this._descriptor.datePublished}get messageTimestamp(){return this._descriptor.messageTimestamp}get published(){return this._descriptor.published}get tags(){return this._descriptor.tags}get rawMessage(){const r=JSON.parse(JSON.stringify({contextId:this._contextId,recordId:this._recordId,descriptor:this._descriptor,attestation:this._attestation,authorization:this._authorization,encryption:this._encryption}));return mm(r),r}constructor(r,i){this._agent=r,this._author=i.author,this._connectedDid=i.connectedDid,this._remoteOrigin=i.remoteOrigin,this._attestation=i.attestation,this._authorization=i.authorization,this._contextId=i.contextId,this._descriptor=i.descriptor,this._encryption=i.encryption,this._initialWrite=i.initialWrite,this._recordId=i.recordId,this._protocolRole=i.protocolRole,i.encodedData&&(this._encodedData="string"==typeof i.encodedData?new Blob([Dt.base64Url(i.encodedData).toUint8Array()],{type:this.dataFormat}):i.encodedData),i.data&&(this._readableStream=Co.isReadableStream(i.data)?Os.fromWebReadable({readableStream:i.data}):i.data)}get data(){const r=this;return{blob(){return ha(this,void 0,void 0,function*(){return new Blob([yield Os.consumeToBytes({readable:yield this.stream()})],{type:r.dataFormat})})},bytes(){return ha(this,void 0,void 0,function*(){return yield Os.consumeToBytes({readable:yield this.stream()})})},json(){return ha(this,void 0,void 0,function*(){return yield Os.consumeToJson({readable:yield this.stream()})})},text(){return ha(this,void 0,void 0,function*(){return yield Os.consumeToText({readable:yield this.stream()})})},stream(){return ha(this,void 0,void 0,function*(){if(r._encodedData?r._readableStream=Os.fromWebReadable({readableStream:r._encodedData.stream()}):Os.isReadable({readable:r._readableStream})||(r._readableStream=r._remoteOrigin?yield r.readRecordData({target:r._remoteOrigin,isRemote:!0}):yield r.readRecordData({target:r._connectedDid,isRemote:!1})),!r._readableStream)throw new Error("Record data is not available.");return r._readableStream})},then(s,c){return this.stream().then(s,c)},catch(s){return this.stream().catch(s)}}}store(r=!1){return ha(this,void 0,void 0,function*(){return this.processRecord({signAsOwner:r,store:!0})})}import(r=!0){return ha(this,void 0,void 0,function*(){return this.processRecord({store:r,signAsOwner:!0})})}send(r){return ha(this,void 0,void 0,function*(){const i=this._initialWrite;if(r??(r=this._connectedDid),i&&!n._sendCache.check(this._recordId,r)){const c=Object.assign({},i);mm(c),yield this._agent.sendDwnRequest({messageType:sn.RecordsWrite,author:this._connectedDid,target:r,rawMessage:c}),n._sendCache.set(this._recordId,r)}const{reply:s}=yield this._agent.sendDwnRequest({messageType:sn.RecordsWrite,author:this._connectedDid,dataStream:yield this.data.blob(),target:r,rawMessage:Object.assign({},this.rawMessage)});return s})}toJSON(){return{attestation:this.attestation,author:this.author,authorization:this.authorization,contextId:this.contextId,dataCid:this.dataCid,dataFormat:this.dataFormat,dataSize:this.dataSize,dateCreated:this.dateCreated,messageTimestamp:this.dateModified,datePublished:this.datePublished,encryption:this.encryption,interface:this.interface,method:this.method,parentId:this.parentId,protocol:this.protocol,protocolPath:this.protocolPath,protocolRole:this.protocolRole,published:this.published,recipient:this.recipient,recordId:this.id,schema:this.schema,tags:this.tags}}toString(){let r="Record: {\n";return r+=`  ID: ${this.id}\n`,r+=this.contextId?`  Context ID: ${this.contextId}\n`:"",r+=this.protocol?`  Protocol: ${this.protocol}\n`:"",r+=this.schema?`  Schema: ${this.schema}\n`:"",r+=`  Data CID: ${this.dataCid}\n`,r+=`  Data Format: ${this.dataFormat}\n`,r+=`  Data Size: ${this.dataSize}\n`,r+=`  Created: ${this.dateCreated}\n`,r+=`  Modified: ${this.dateModified}\n`,r+="}",r}paginationCursor(r){return ha(this,void 0,void 0,function*(){return function UL(n,t){return L5(this,void 0,void 0,function*(){const r=t===To.CreatedAscending||t===To.CreatedDescending?n.descriptor.dateCreated:n.descriptor.datePublished;if(void 0===r)throw new Error("The dateCreated or datePublished property is missing from the record descriptor.");return{messageCid:yield jL(n),value:r}})}(this.rawMessage,r)})}update(r){var{dateModified:i,data:s}=r,c=SS(r,["dateModified","data"]);return ha(this,void 0,void 0,function*(){const o=this._descriptor,{parentId:u}=o,A=SS(o,["parentId"]),S=u?this._contextId.split("/").slice(0,-1).join("/"):void 0;let R,y=Object.assign(Object.assign(Object.assign({},A),c),{parentContextId:S,messageTimestamp:i,recordId:this._recordId});(ub(y.tags)||null===y.tags)&&delete y.tags,void 0!==s&&(delete y.dataCid,delete y.dataSize,({dataBlob:R}=ES(s,y.dataFormat)));const ee=new Set(["data","dataCid","dataSize","datePublished","messageTimestamp","published","tags"]);n.verifyPermittedMutation(Object.keys(c),ee),!1===c.published&&void 0!==y.datePublished&&delete y.datePublished;const ae=yield this._agent.processDwnRequest({author:this._connectedDid,dataStream:R,messageParams:Object.assign({},y),messageType:sn.RecordsWrite,target:this._connectedDid}),{message:te,reply:{status:fe}}=ae,we=te;return 200<=fe.code&&fe.code<=299&&(this._initialWrite||(this._initialWrite=Object.assign({},this.rawMessage)),this._authorization=we.authorization,this._protocolRole=c.protocolRole,ee.forEach(Pe=>{this._descriptor[Pe]=we.descriptor[Pe]}),void 0!==s&&(this._encodedData=R)),{status:fe}})}processRecord({store:r,signAsOwner:i}){return ha(this,void 0,void 0,function*(){if(this._initialWrite&&(i&&!this._initialWriteSigned||r&&!this._initialWriteStored)){const S={messageType:sn.RecordsWrite,rawMessage:this.initialWrite,author:this._connectedDid,target:this._connectedDid,signAsOwner:i,store:r},y=yield this._agent.processDwnRequest(S),{message:R,reply:{status:ee}}=y,ae=R;200<=ee.code&&ee.code<=299&&(r&&(this._initialWriteStored=!0),i&&(this._initialWriteSigned=!0,this.initialWrite.authorization=ae.authorization))}const s={messageType:sn.RecordsWrite,rawMessage:this.rawMessage,author:this._connectedDid,target:this._connectedDid,dataStream:yield this.data.blob(),signAsOwner:i,store:r},c=yield this._agent.processDwnRequest(s),{message:o,reply:{status:u}}=c;return 200<=u.code&&u.code<=299&&i&&(this._authorization=o.authorization),{status:u}})}readRecordData({target:r,isRemote:i}){return ha(this,void 0,void 0,function*(){const s={author:this._connectedDid,messageParams:{filter:{recordId:this.id}},messageType:sn.RecordsRead,target:r},c=i?this._agent.sendDwnRequest(s):this._agent.processDwnRequest(s);try{const{reply:{record:o}}=yield c,u=o.data;return Co.isReadableStream(u)?Os.fromWebReadable({readableStream:u}):u}catch(o){throw new Error(`Error encountered while attempting to read data: ${o.message}`)}})}static verifyPermittedMutation(r,i){for(const s of r)if(!i.has(s))throw new Error(`${s} is an immutable property. Its value cannot be changed.`)}}return n._sendCache=la,n})();class AS{constructor(t,r,i){this._agent=t,this._metadata=i,this._protocolsConfigureMessage=r}get definition(){return this._protocolsConfigureMessage.descriptor.definition}toJSON(){return this._protocolsConfigureMessage}send(t){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){const{reply:r}=yield this._agent.sendDwnRequest({author:this._metadata.author,messageCid:this._metadata.messageCid,messageType:sn.ProtocolsConfigure,target:t});return{status:r.status}})}}var su=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class jF{constructor(t){this.agent=t.agent,this.connectedDid=t.connectedDid}get protocols(){return{configure:t=>su(this,void 0,void 0,function*(){const r=yield this.agent.processDwnRequest({author:this.connectedDid,messageParams:t.message,messageType:sn.ProtocolsConfigure,target:this.connectedDid}),{message:i,messageCid:s,reply:{status:c}}=r,o={status:c};return c.code<300&&(o.protocol=new AS(this.agent,i,{author:this.connectedDid,messageCid:s})),o}),query:t=>su(this,void 0,void 0,function*(){const r={author:this.connectedDid,messageParams:t.message,messageType:sn.ProtocolsQuery,target:t.from||this.connectedDid};let i;i=t.from?yield this.agent.sendDwnRequest(r):yield this.agent.processDwnRequest(r);const s=i.reply,{entries:c=[],status:o}=s;return{protocols:c.map(A=>new AS(this.agent,A,{author:this.connectedDid})),status:o}})}}get records(){return{create:t=>su(this,void 0,void 0,function*(){return this.records.write(t)}),createFrom:t=>su(this,void 0,void 0,function*(){var r;const i=t.record.toJSON(),{author:s}=i,c=function(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(r[i[s]]=n[i[s]])}return r}(i,["author"]);return void 0!==t.data&&(delete c.dataCid,delete c.dataSize),!1===(null===(r=t.message)||void 0===r?void 0:r.published)&&void 0!==c.datePublished&&(delete c.datePublished,delete c.published),(!ub(t.message)||t.author&&t.author!==s)&&delete c.recordId,this.records.write({data:t.data,message:Object.assign(Object.assign({},c),t.message)})}),delete:t=>su(this,void 0,void 0,function*(){const r={author:this.connectedDid,messageParams:t.message,messageType:sn.RecordsDelete,target:t.from||this.connectedDid};let i;i=t.from?yield this.agent.sendDwnRequest(r):yield this.agent.processDwnRequest(r);const{reply:{status:s}}=i;return{status:s}}),query:t=>su(this,void 0,void 0,function*(){const r={author:this.connectedDid,messageParams:t.message,messageType:sn.RecordsQuery,target:t.from||this.connectedDid};let i;i=t.from?yield this.agent.sendDwnRequest(r):yield this.agent.processDwnRequest(r);const s=i.reply,{entries:c,status:o,cursor:u}=s;return{records:c.map(S=>{const y=Object.assign({author:z5(S),connectedDid:this.connectedDid,remoteOrigin:t.from},S);return new G2(this.agent,y)}),status:o,cursor:u}}),read:t=>su(this,void 0,void 0,function*(){const r={author:this.connectedDid,messageParams:t.message,messageType:sn.RecordsRead,target:t.from||this.connectedDid};let i;i=t.from?yield this.agent.sendDwnRequest(r):yield this.agent.processDwnRequest(r);const{reply:{record:s,status:c}}=i;let o;if(200<=c.code&&c.code<=299){const u=Object.assign({author:z5(s),connectedDid:this.connectedDid,remoteOrigin:t.from},s);o=new G2(this.agent,u)}return{record:o,status:c}}),write:t=>su(this,void 0,void 0,function*(){var r;const{dataBlob:i,dataFormat:s}=ES(t.data,null===(r=t.message)||void 0===r?void 0:r.dataFormat),c=yield this.agent.processDwnRequest({author:this.connectedDid,dataStream:i,messageParams:Object.assign(Object.assign({},t.message),{dataFormat:s}),messageType:sn.RecordsWrite,store:t.store,target:this.connectedDid}),{message:o,reply:{status:u}}=c;let A;if(200<=u.code&&u.code<=299){const S=Object.assign({author:this.connectedDid,connectedDid:this.connectedDid,encodedData:i},o);A=new G2(this.agent,S)}return{record:A,status:u}})}}}class LF{constructor(t){this.agent=t.agent,this.connectedDid=t.connectedDid}create(){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){throw new Error("Not implemented.")})}}var xc=function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})};class q2{constructor(t){this._agentDid=t.agentDid,this.crypto=t.cryptoApi,this.did=t.didApi,this.dwn=t.dwnApi,this.identity=t.identityApi,this.keyManager=t.keyManager,this.rpc=t.rpcClient,this.sync=t.syncApi,this.vault=t.agentVault,this.did.agent=this,this.dwn.agent=this,this.identity.agent=this,this.keyManager.agent=this,this.sync.agent=this}get agentDid(){if(void 0===this._agentDid)throw new Error('Web5UserAgent: The "agentDid" property is not set. Ensure the agent is properly initialized and a DID is assigned.');return this._agentDid}set agentDid(t){this._agentDid=t}static create({dataPath:t="DATA/AGENT",agentDid:r,agentVault:i,cryptoApi:s,didApi:c,dwnApi:o,identityApi:u,keyManager:A,rpcClient:S,syncApi:y}={}){return xc(this,void 0,void 0,function*(){return i??(i=new yF({keyDerivationWorkFactor:21e4,store:new tN({location:`${t}/VAULT_STORE`})})),s??(s=new Tl),c??(c=new NL({didMethods:[bl,t5],resolverCache:new Xb({location:`${t}/DID_RESOLVERCACHE`}),store:new OL})),o??(o=new V5({dwn:yield V5.createDwn({dataPath:t,didResolver:c})})),u??(u=new wF({store:new gF})),A??(A=new cf({keyStore:new fF})),S??(S=new TF),y??(y=new RF({syncEngine:new OF({dataPath:t})})),new q2({agentDid:r,agentVault:i,cryptoApi:s,didApi:c,dwnApi:o,keyManager:A,identityApi:u,rpcClient:S,syncApi:y})})}firstLaunch(){return xc(this,void 0,void 0,function*(){return!1===(yield this.vault.isInitialized())})}initialize({password:t,recoveryPhrase:r}){return xc(this,void 0,void 0,function*(){return r=yield this.vault.initialize({password:t,recoveryPhrase:r})})}processDidRequest(t){return xc(this,void 0,void 0,function*(){return this.did.processRequest(t)})}processDwnRequest(t){return xc(this,void 0,void 0,function*(){return this.dwn.processRequest(t)})}processVcRequest(t){return xc(this,void 0,void 0,function*(){throw new Error("Not implemented")})}sendDidRequest(t){return xc(this,void 0,void 0,function*(){throw new Error("Not implemented")})}sendDwnRequest(t){return xc(this,void 0,void 0,function*(){return this.dwn.sendRequest(t)})}sendVcRequest(t){return xc(this,void 0,void 0,function*(){throw new Error("Not implemented")})}start({password:t}){return xc(this,void 0,void 0,function*(){this.vault.isLocked()&&(yield this.vault.unlock({password:t})),this.agentDid=yield this.vault.getDid()})}}function zF(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n))+n}class Z2{constructor({agent:t,connectedDid:r}){this.agent=t,this.connectedDid=r,this.did=new DF({agent:t,connectedDid:r}),this.dwn=new jF({agent:t,connectedDid:r}),this.vc=new LF({agent:t,connectedDid:r})}static connect({agent:t,agentVault:r,connectedDid:i,password:s,recoveryPhrase:c,sync:o,techPreview:u}={}){var A;return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){if(void 0===t){const y=yield q2.create({agentVault:r});t=y,void 0===s&&(s="insecure-static-phrase",console.warn("%cSECURITY WARNING:%c You have not set a password, which defaults to a static, guessable value. This significantly compromises the security of your data. Please configure a secure, unique password.","font-weight: bold; color: red;","font-weight: normal; color: inherit;")),(yield y.firstLaunch())&&(c=yield y.initialize({password:s,recoveryPhrase:c})),yield y.start({password:s});{let ee;const ae=yield y.identity.list(),te=ae.length;if(0===te){const fe=null!==(A=u?.dwnEndpoints)&&void 0!==A?A:yield function KF(){return function(n,t,r,i){return new(r||(r=Promise))(function(c,o){function u(y){try{S(i.next(y))}catch(R){o(R)}}function A(y){try{S(i.throw(y))}catch(R){o(R)}}function S(y){y.done?c(y.value):function s(c){return c instanceof r?c:new r(function(o){o(c)})}(y.value).then(u,A)}S((i=i.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){let n;try{if(n=yield fetch("https://dwn.tbddev.org/.well-known/did.json"),!n.ok)throw new Error(`HTTP Error: ${n.status} ${n.statusText}`)}catch(s){return console.warn("failed to get tech preview dwn endpoints:",s.message),[]}const t=yield n.json(),[r]=function C$({didDocument:n,id:t,type:r}){var i,s;return null!==(s=null===(i=n?.service)||void 0===i?void 0:i.filter(c=>!(t&&c.id!==t||r&&c.type!==r)))&&void 0!==s?s:[]}({didDocument:t,id:"#dwn",type:"DecentralizedWebNode"}),i=new Set;if("serviceEndpoint"in r&&!Array.isArray(r.serviceEndpoint)&&"string"!=typeof r.serviceEndpoint&&Array.isArray(r.serviceEndpoint.nodes)){const s=r.serviceEndpoint.nodes,c=Math.min(s.length,2);for(let o=0;o<s.length&&i.size<c;o+=1){const A=s[zF(0,s.length)];try{(yield fetch(`${A}/health`)).ok&&i.add(A)}catch{}}}return Array.from(i)})}();ee=yield y.identity.create({didMethod:"dht",metadata:{name:"Default"},didOptions:{services:[{id:"dwn",type:"DecentralizedWebNode",serviceEndpoint:fe,enc:"#enc",sig:"#sig"}],verificationMethods:[{algorithm:"Ed25519",id:"sig",purposes:["assertionMethod","authentication"]},{algorithm:"secp256k1",id:"enc",purposes:["keyAgreement"]}]}}),yield y.identity.manage({portableIdentity:yield ee.export()})}else{if(1!==te)throw new Error(`connect() failed due to unexpected state: Expected 1 but found ${te} stored identities.`);ee=ae[0]}i=ee.did.uri}"off"!==o&&(yield y.sync.registerIdentity({did:i}),o??(o="2m"),y.sync.startSync({interval:o}).catch(ee=>{console.error(`Sync failed: ${ee}`)}))}return{web5:new Z2({agent:t,connectedDid:i}),did:i,recoveryPhrase:c}})}}var HF=I(93953);let WF=(()=>{class n{constructor(){console.log("Connecting to Web5..."),Z2.connect().then(r=>{this.did=r.did,this.web5=r.web5,console.log(this.did),console.log(this.web5)})}static#a=this.\u0275fac=function(i){return new(i||n)};static#u=this.\u0275prov=HF.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},4521:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.createCurve=O.getHash=void 0;const C=I(44882),H=I(96492),N=I(73040);function G(B){return{hash:B,hmac:(_,...T)=>(0,C.hmac)(B,_,(0,H.concatBytes)(...T)),randomBytes:H.randomBytes}}O.getHash=G,O.createCurve=function v(B,_){const T=D=>(0,N.weierstrass)({...B,...G(D)});return Object.freeze({...T(_),create:T})}},25299:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.validateBasic=O.wNAF=void 0;const C=I(63834),H=I(84097),N=BigInt(0),G=BigInt(1);O.wNAF=function v(_,T){const D=(M,F)=>{const k=F.negate();return M?k:F},$=M=>({windows:Math.ceil(T/M)+1,windowSize:2**(M-1)});return{constTimeNegate:D,unsafeLadder(M,F){let k=_.ZERO,j=M;for(;F>N;)F&G&&(k=k.add(j)),j=j.double(),F>>=G;return k},precomputeWindow(M,F){const{windows:k,windowSize:j}=$(F),Z=[];let q=M,W=q;for(let K=0;K<k;K++){W=q,Z.push(W);for(let J=1;J<j;J++)W=W.add(q),Z.push(W);q=W.double()}return Z},wNAF(M,F,k){const{windows:j,windowSize:Z}=$(M);let q=_.ZERO,W=_.BASE;const K=BigInt(2**M-1),J=2**M,X=BigInt(M);for(let Q=0;Q<j;Q++){const oe=Q*Z;let ne=Number(k&K);k>>=X,ne>Z&&(ne-=J,k+=G);const me=oe,pe=oe+Math.abs(ne)-1,E=ne<0;0===ne?W=W.add(D(Q%2!=0,F[me])):q=q.add(D(E,F[pe]))}return{p:q,f:W}},wNAFCached(M,F,k,j){const Z=M._WINDOW_SIZE||1;let q=F.get(M);return q||(q=this.precomputeWindow(M,Z),1!==Z&&F.set(M,j(q))),this.wNAF(Z,q,k)}}},O.validateBasic=function B(_){return(0,C.validateField)(_.Fp),(0,H.validateObject)(_,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,C.nLength)(_.n,_.nBitLength),..._,p:_.Fp.ORDER})}},45068:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.twistedEdwards=void 0;const C=I(63834),H=I(84097),N=I(84097),G=I(25299),v=BigInt(0),B=BigInt(1),_=BigInt(2),T=BigInt(8),D={zip215:!0};O.twistedEdwards=function M(F){const k=function $(F){const k=(0,G.validateBasic)(F);return H.validateObject(F,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...k})}(F),{Fp:j,n:Z,prehash:q,hash:W,randomBytes:K,nByteLength:J,h:X}=k,Q=_<<BigInt(8*J)-B,oe=j.create,ne=k.uvRatio||((ye,ke)=>{try{return{isValid:!0,value:j.sqrt(ye*j.inv(ke))}}catch{return{isValid:!1,value:v}}}),me=k.adjustScalarBytes||(ye=>ye),pe=k.domain||((ye,ke,ve)=>{if(ke.length||ve)throw new Error("Contexts/pre-hash are not supported");return ye}),Ie=ye=>"bigint"==typeof ye&&v<ye,E=(ye,ke)=>Ie(ye)&&Ie(ke)&&ye<ke,a=ye=>ye===v||E(ye,Q);function f(ye,ke){if(E(ye,ke))return ye;throw new Error(`Expected valid scalar < ${ke}, got ${typeof ye} ${ye}`)}function l(ye){return ye===v?ye:f(ye,Z)}const h=new Map;function g(ye){if(!(ye instanceof x))throw new Error("ExtendedPoint expected")}class x{constructor(ke,ve,_e,de){if(this.ex=ke,this.ey=ve,this.ez=_e,this.et=de,!a(ke))throw new Error("x required");if(!a(ve))throw new Error("y required");if(!a(_e))throw new Error("z required");if(!a(de))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(ke){if(ke instanceof x)throw new Error("extended point not allowed");const{x:ve,y:_e}=ke||{};if(!a(ve)||!a(_e))throw new Error("invalid affine point");return new x(ve,_e,B,oe(ve*_e))}static normalizeZ(ke){const ve=j.invertBatch(ke.map(_e=>_e.ez));return ke.map((_e,de)=>_e.toAffine(ve[de])).map(x.fromAffine)}_setWindowSize(ke){this._WINDOW_SIZE=ke,h.delete(this)}assertValidity(){const{a:ke,d:ve}=k;if(this.is0())throw new Error("bad point: ZERO");const{ex:_e,ey:de,ez:se,et:re}=this,ce=oe(_e*_e),ue=oe(de*de),ge=oe(se*se),Ee=oe(ge*ge),Be=oe(ce*ke);if(oe(ge*oe(Be+ue))!==oe(Ee+oe(ve*oe(ce*ue))))throw new Error("bad point: equation left != right (1)");if(oe(_e*de)!==oe(se*re))throw new Error("bad point: equation left != right (2)")}equals(ke){g(ke);const{ex:ve,ey:_e,ez:de}=this,{ex:se,ey:re,ez:ce}=ke,ue=oe(ve*ce),ge=oe(se*de),Ee=oe(_e*ce),Be=oe(re*de);return ue===ge&&Ee===Be}is0(){return this.equals(x.ZERO)}negate(){return new x(oe(-this.ex),this.ey,this.ez,oe(-this.et))}double(){const{a:ke}=k,{ex:ve,ey:_e,ez:de}=this,se=oe(ve*ve),re=oe(_e*_e),ce=oe(_*oe(de*de)),ue=oe(ke*se),ge=ve+_e,Ee=oe(oe(ge*ge)-se-re),Be=ue+re,De=Be-ce,et=ue-re,Ke=oe(Ee*De),We=oe(Be*et),_t=oe(Ee*et),U=oe(De*Be);return new x(Ke,We,U,_t)}add(ke){g(ke);const{a:ve,d:_e}=k,{ex:de,ey:se,ez:re,et:ce}=this,{ex:ue,ey:ge,ez:Ee,et:Be}=ke;if(ve===BigInt(-1)){const qe=oe((se-de)*(ge+ue)),At=oe((se+de)*(ge-ue)),nt=oe(At-qe);if(nt===v)return this.double();const rt=oe(re*_*Be),St=oe(ce*_*Ee),bt=St+rt,Mt=At+qe,Ft=St-rt,it=oe(bt*nt),mt=oe(Mt*Ft),Rr=oe(bt*Ft),xt=oe(nt*Mt);return new x(it,mt,xt,Rr)}const De=oe(de*ue),et=oe(se*ge),Ke=oe(ce*_e*Be),We=oe(re*Ee),_t=oe((de+se)*(ue+ge)-De-et),U=We-Ke,w=We+Ke,b=oe(et-ve*De),z=oe(_t*U),ie=oe(w*b),be=oe(_t*b),Me=oe(U*w);return new x(z,ie,Me,be)}subtract(ke){return this.add(ke.negate())}wNAF(ke){return d.wNAFCached(this,h,ke,x.normalizeZ)}multiply(ke){const{p:ve,f:_e}=this.wNAF(f(ke,Z));return x.normalizeZ([ve,_e])[0]}multiplyUnsafe(ke){let ve=l(ke);return ve===v?m:this.equals(m)||ve===B?this:this.equals(P)?this.wNAF(ve).p:d.unsafeLadder(this,ve)}isSmallOrder(){return this.multiplyUnsafe(X).is0()}isTorsionFree(){return d.unsafeLadder(this,Z).is0()}toAffine(ke){const{ex:ve,ey:_e,ez:de}=this,se=this.is0();null==ke&&(ke=se?T:j.inv(de));const re=oe(ve*ke),ce=oe(_e*ke),ue=oe(de*ke);if(se)return{x:v,y:B};if(ue!==B)throw new Error("invZ was invalid");return{x:re,y:ce}}clearCofactor(){const{h:ke}=k;return ke===B?this:this.multiplyUnsafe(ke)}static fromHex(ke,ve=!1){const{d:_e,a:de}=k,se=j.BYTES,re=(ke=(0,N.ensureBytes)("pointHex",ke,se)).slice(),ce=ke[se-1];re[se-1]=-129&ce;const ue=H.bytesToNumberLE(re);ue===v||f(ue,ve?Q:j.ORDER);const ge=oe(ue*ue),Ee=oe(ge-B),Be=oe(_e*ge-de);let{isValid:De,value:et}=ne(Ee,Be);if(!De)throw new Error("Point.fromHex: invalid y coordinate");const Ke=(et&B)===B,We=!!(128&ce);if(!ve&&et===v&&We)throw new Error("Point.fromHex: x=0 and x_0=1");return We!==Ke&&(et=oe(-et)),x.fromAffine({x:et,y:ue})}static fromPrivateKey(ke){return L(ke).point}toRawBytes(){const{x:ke,y:ve}=this.toAffine(),_e=H.numberToBytesLE(ve,j.BYTES);return _e[_e.length-1]|=ke&B?128:0,_e}toHex(){return H.bytesToHex(this.toRawBytes())}}x.BASE=new x(k.Gx,k.Gy,B,oe(k.Gx*k.Gy)),x.ZERO=new x(v,B,B,v);const{BASE:P,ZERO:m}=x,d=(0,G.wNAF)(x,8*J);function p(ye){return(0,C.mod)(ye,Z)}function V(ye){return p(H.bytesToNumberLE(ye))}function L(ye){const ke=J;ye=(0,N.ensureBytes)("private key",ye,ke);const ve=(0,N.ensureBytes)("hashed private key",W(ye),2*ke),_e=me(ve.slice(0,ke)),de=ve.slice(ke,2*ke),se=V(_e),re=P.multiply(se),ce=re.toRawBytes();return{head:_e,prefix:de,scalar:se,point:re,pointBytes:ce}}function le(ye=new Uint8Array,...ke){const ve=H.concatBytes(...ke);return V(W(pe(ve,(0,N.ensureBytes)("context",ye),!!q)))}const Oe=D;return P._setWindowSize(8),{CURVE:k,getPublicKey:function Y(ye){return L(ye).pointBytes},sign:function Se(ye,ke,ve={}){ye=(0,N.ensureBytes)("message",ye),q&&(ye=q(ye));const{prefix:_e,scalar:de,pointBytes:se}=L(ke),re=le(ve.context,_e,ye),ce=P.multiply(re).toRawBytes(),ge=p(re+le(ve.context,ce,se,ye)*de);l(ge);const Ee=H.concatBytes(ce,H.numberToBytesLE(ge,j.BYTES));return(0,N.ensureBytes)("result",Ee,2*J)},verify:function Ve(ye,ke,ve,_e=Oe){const{context:de,zip215:se}=_e,re=j.BYTES;ye=(0,N.ensureBytes)("signature",ye,2*re),ke=(0,N.ensureBytes)("message",ke),q&&(ke=q(ke));const ce=H.bytesToNumberLE(ye.slice(re,2*re));let ue,ge,Ee;try{ue=x.fromHex(ve,se),ge=x.fromHex(ye.slice(0,re),se),Ee=P.multiplyUnsafe(ce)}catch{return!1}if(!se&&ue.isSmallOrder())return!1;const Be=le(de,ge.toRawBytes(),ue.toRawBytes(),ke);return ge.add(ue.multiplyUnsafe(Be)).subtract(Ee).clearCofactor().equals(x.ZERO)},ExtendedPoint:x,utils:{getExtendedPublicKey:L,randomPrivateKey:()=>K(j.BYTES),precompute:(ye=8,ke=x.BASE)=>(ke._setWindowSize(ye),ke.multiply(BigInt(3)),ke)}}}},75752:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.createHasher=O.isogenyMap=O.hash_to_field=O.expand_message_xof=O.expand_message_xmd=void 0;const C=I(63834),H=I(84097),G=H.bytesToNumberBE;function v(j,Z){if(j<0||j>=1<<8*Z)throw new Error(`bad I2OSP call: value=${j} length=${Z}`);const q=Array.from({length:Z}).fill(0);for(let W=Z-1;W>=0;W--)q[W]=255&j,j>>>=8;return new Uint8Array(q)}function B(j,Z){const q=new Uint8Array(j.length);for(let W=0;W<j.length;W++)q[W]=j[W]^Z[W];return q}function _(j){if(!(0,H.isBytes)(j))throw new Error("Uint8Array expected")}function T(j){if(!Number.isSafeInteger(j))throw new Error("number expected")}function D(j,Z,q,W){_(j),_(Z),T(q),Z.length>255&&(Z=W((0,H.concatBytes)((0,H.utf8ToBytes)("H2C-OVERSIZE-DST-"),Z)));const{outputLen:K,blockLen:J}=W,X=Math.ceil(q/K);if(X>255)throw new Error("Invalid xmd length");const Q=(0,H.concatBytes)(Z,v(Z.length,1)),oe=v(0,J),ne=v(q,2),me=new Array(X),pe=W((0,H.concatBytes)(oe,j,ne,v(0,1),Q));me[0]=W((0,H.concatBytes)(pe,v(1,1),Q));for(let E=1;E<=X;E++){const a=[B(pe,me[E-1]),v(E+1,1),Q];me[E]=W((0,H.concatBytes)(...a))}return(0,H.concatBytes)(...me).slice(0,q)}function $(j,Z,q,W,K){if(_(j),_(Z),T(q),Z.length>255){const J=Math.ceil(2*W/8);Z=K.create({dkLen:J}).update((0,H.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(Z).digest()}if(q>65535||Z.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return K.create({dkLen:q}).update(j).update(v(q,2)).update(Z).update(v(Z.length,1)).digest()}function M(j,Z,q){(0,H.validateObject)(q,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:W,k:K,m:J,hash:X,expand:Q,DST:oe}=q;_(j),T(Z);const ne=function N(j){if((0,H.isBytes)(j))return j;if("string"==typeof j)return(0,H.utf8ToBytes)(j);throw new Error("DST must be Uint8Array or string")}(oe),me=W.toString(2).length,pe=Math.ceil((me+K)/8),Ie=Z*J*pe;let E;if("xmd"===Q)E=D(j,ne,Ie,X);else if("xof"===Q)E=$(j,ne,Ie,K,X);else{if("_internal_pass"!==Q)throw new Error('expand must be "xmd" or "xof"');E=j}const a=new Array(Z);for(let f=0;f<Z;f++){const l=new Array(J);for(let h=0;h<J;h++){const g=pe*(h+f*J),x=E.subarray(g,g+pe);l[h]=(0,C.mod)(G(x),W)}a[f]=l}return a}O.expand_message_xmd=D,O.expand_message_xof=$,O.hash_to_field=M,O.isogenyMap=function F(j,Z){const q=Z.map(W=>Array.from(W).reverse());return(W,K)=>{const[J,X,Q,oe]=q.map(ne=>ne.reduce((me,pe)=>j.add(j.mul(me,W),pe)));return W=j.div(J,X),K=j.mul(K,j.div(Q,oe)),{x:W,y:K}}},O.createHasher=function k(j,Z,q){if("function"!=typeof Z)throw new Error("mapToCurve() must be defined");return{hashToCurve(W,K){const J=M(W,2,{...q,DST:q.DST,...K}),X=j.fromAffine(Z(J[0])),Q=j.fromAffine(Z(J[1])),oe=X.add(Q).clearCofactor();return oe.assertValidity(),oe},encodeToCurve(W,K){const J=M(W,1,{...q,DST:q.encodeDST,...K}),X=j.fromAffine(Z(J[0])).clearCofactor();return X.assertValidity(),X}}}},63834:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.mapHashToField=O.getMinHashLength=O.getFieldBytesLength=O.hashToPrivateScalar=O.FpSqrtEven=O.FpSqrtOdd=O.Field=O.nLength=O.FpIsSquare=O.FpDiv=O.FpInvertBatch=O.FpPow=O.validateField=O.isNegativeLE=O.FpSqrt=O.tonelliShanks=O.invert=O.pow2=O.pow=O.mod=void 0;const C=I(84097),H=BigInt(0),N=BigInt(1),G=BigInt(2),v=BigInt(3),B=BigInt(4),_=BigInt(5),T=BigInt(8);function M(g,x){const P=g%x;return P>=H?P:x+P}function F(g,x,P){if(P<=H||x<H)throw new Error("Expected power/modulo > 0");if(P===N)return H;let m=N;for(;x>H;)x&N&&(m=m*g%P),g=g*g%P,x>>=N;return m}function j(g,x){if(g===H||x<=H)throw new Error(`invert: expected positive integers, got n=${g} mod=${x}`);let P=M(g,x),m=x,d=H,p=N,V=N,L=H;for(;P!==H;){const le=m/P,Se=m%P,Oe=d-V*le,Ve=p-L*le;m=P,P=Se,d=V,p=L,V=Oe,L=Ve}if(m!==N)throw new Error("invert: does not exist");return M(d,x)}function Z(g){const x=(g-N)/G;let P,m,d;for(P=g-N,m=0;P%G===H;P/=G,m++);for(d=G;d<g&&F(d,x,g)!==g-N;d++);if(1===m){const V=(g+N)/B;return function(Y,le){const Se=Y.pow(le,V);if(!Y.eql(Y.sqr(Se),le))throw new Error("Cannot find square root");return Se}}const p=(P+N)/G;return function(L,Y){if(L.pow(Y,x)===L.neg(L.ONE))throw new Error("Cannot find square root");let le=m,Se=L.pow(L.mul(L.ONE,d),P),Oe=L.pow(Y,p),Ve=L.pow(Y,P);for(;!L.eql(Ve,L.ONE);){if(L.eql(Ve,L.ZERO))return L.ZERO;let Re=1;for(let ke=L.sqr(Ve);Re<le&&!L.eql(ke,L.ONE);Re++)ke=L.sqr(ke);const ye=L.pow(Se,N<<BigInt(le-Re-1));Se=L.sqr(ye),Oe=L.mul(Oe,ye),Ve=L.mul(Ve,Se),le=Re}return Oe}}function q(g){if(g%B===v){const x=(g+N)/B;return function(m,d){const p=m.pow(d,x);if(!m.eql(m.sqr(p),d))throw new Error("Cannot find square root");return p}}if(g%T===_){const x=(g-_)/T;return function(m,d){const p=m.mul(d,G),V=m.pow(p,x),L=m.mul(d,V),Y=m.mul(m.mul(L,G),V),le=m.mul(L,m.sub(Y,m.ONE));if(!m.eql(m.sqr(le),d))throw new Error("Cannot find square root");return le}}return Z(g)}BigInt(9),BigInt(16),O.mod=M,O.pow=F,O.pow2=function k(g,x,P){let m=g;for(;x-- >H;)m*=m,m%=P;return m},O.invert=j,O.tonelliShanks=Z,O.FpSqrt=q,O.isNegativeLE=(g,x)=>(M(g,x)&N)===N;const K=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function X(g,x,P){if(P<H)throw new Error("Expected power > 0");if(P===H)return g.ONE;if(P===N)return x;let m=g.ONE,d=x;for(;P>H;)P&N&&(m=g.mul(m,d)),d=g.sqr(d),P>>=N;return m}function Q(g,x){const P=new Array(x.length),m=x.reduce((p,V,L)=>g.is0(V)?p:(P[L]=p,g.mul(p,V)),g.ONE),d=g.inv(m);return x.reduceRight((p,V,L)=>g.is0(V)?p:(P[L]=g.mul(p,P[L]),g.mul(p,V)),d),P}function me(g,x){const P=void 0!==x?x:g.toString(2).length;return{nBitLength:P,nByteLength:Math.ceil(P/8)}}function f(g){if("bigint"!=typeof g)throw new Error("field order must be bigint");const x=g.toString(2).length;return Math.ceil(x/8)}function l(g){const x=f(g);return x+Math.ceil(x/2)}O.validateField=function J(g){const P=K.reduce((m,d)=>(m[d]="function",m),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,C.validateObject)(g,P)},O.FpPow=X,O.FpInvertBatch=Q,O.FpDiv=function oe(g,x,P){return g.mul(x,"bigint"==typeof P?j(P,g.ORDER):g.inv(P))},O.FpIsSquare=function ne(g){const x=(g.ORDER-N)/G;return P=>{const m=g.pow(P,x);return g.eql(m,g.ZERO)||g.eql(m,g.ONE)}},O.nLength=me,O.Field=function pe(g,x,P=!1,m={}){if(g<=H)throw new Error(`Expected Field ORDER > 0, got ${g}`);const{nBitLength:d,nByteLength:p}=me(g,x);if(p>2048)throw new Error("Field lengths over 2048 bytes are not supported");const V=q(g),L=Object.freeze({ORDER:g,BITS:d,BYTES:p,MASK:(0,C.bitMask)(d),ZERO:H,ONE:N,create:Y=>M(Y,g),isValid:Y=>{if("bigint"!=typeof Y)throw new Error("Invalid field element: expected bigint, got "+typeof Y);return H<=Y&&Y<g},is0:Y=>Y===H,isOdd:Y=>(Y&N)===N,neg:Y=>M(-Y,g),eql:(Y,le)=>Y===le,sqr:Y=>M(Y*Y,g),add:(Y,le)=>M(Y+le,g),sub:(Y,le)=>M(Y-le,g),mul:(Y,le)=>M(Y*le,g),pow:(Y,le)=>X(L,Y,le),div:(Y,le)=>M(Y*j(le,g),g),sqrN:Y=>Y*Y,addN:(Y,le)=>Y+le,subN:(Y,le)=>Y-le,mulN:(Y,le)=>Y*le,inv:Y=>j(Y,g),sqrt:m.sqrt||(Y=>V(L,Y)),invertBatch:Y=>Q(L,Y),cmov:(Y,le,Se)=>Se?le:Y,toBytes:Y=>P?(0,C.numberToBytesLE)(Y,p):(0,C.numberToBytesBE)(Y,p),fromBytes:Y=>{if(Y.length!==p)throw new Error(`Fp.fromBytes: expected ${p}, got ${Y.length}`);return P?(0,C.bytesToNumberLE)(Y):(0,C.bytesToNumberBE)(Y)}});return Object.freeze(L)},O.FpSqrtOdd=function Ie(g,x){if(!g.isOdd)throw new Error("Field doesn't have isOdd");const P=g.sqrt(x);return g.isOdd(P)?P:g.neg(P)},O.FpSqrtEven=function E(g,x){if(!g.isOdd)throw new Error("Field doesn't have isOdd");const P=g.sqrt(x);return g.isOdd(P)?g.neg(P):P},O.hashToPrivateScalar=function a(g,x,P=!1){const m=(g=(0,C.ensureBytes)("privateHash",g)).length,d=me(x).nByteLength+8;if(d<24||m<d||m>1024)throw new Error(`hashToPrivateScalar: expected ${d}-1024 bytes of input, got ${m}`);return M(P?(0,C.bytesToNumberLE)(g):(0,C.bytesToNumberBE)(g),x-N)+N},O.getFieldBytesLength=f,O.getMinHashLength=l,O.mapHashToField=function h(g,x,P=!1){const m=g.length,d=f(x),p=l(x);if(m<16||m<p||m>1024)throw new Error(`expected ${p}-1024 bytes of input, got ${m}`);const L=M(P?(0,C.bytesToNumberBE)(g):(0,C.bytesToNumberLE)(g),x-N)+N;return P?(0,C.numberToBytesLE)(L,d):(0,C.numberToBytesBE)(L,d)}},27661:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.montgomery=void 0;const C=I(63834),H=I(84097),N=BigInt(0),G=BigInt(1);O.montgomery=function B(_){const T=function v(_){return(0,H.validateObject)(_,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({..._})}(_),{P:D}=T,$=Ie=>(0,C.mod)(Ie,D),M=T.montgomeryBits,F=Math.ceil(M/8),k=T.nByteLength,j=T.adjustScalarBytes||(Ie=>Ie),Z=T.powPminus2||(Ie=>(0,C.pow)(Ie,D-BigInt(2),D));function q(Ie,E,a){const f=$(Ie*(E-a));return[E=$(E-f),a=$(a+f)]}function W(Ie){if("bigint"==typeof Ie&&N<=Ie&&Ie<D)return Ie;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const K=(T.a-BigInt(2))/BigInt(4);function X(Ie){return(0,H.numberToBytesLE)($(Ie),F)}function ne(Ie,E){const a=function Q(Ie){const E=(0,H.ensureBytes)("u coordinate",Ie,F);return 32===k&&(E[31]&=127),(0,H.bytesToNumberLE)(E)}(E),f=function oe(Ie){const E=(0,H.ensureBytes)("scalar",Ie),a=E.length;if(a!==F&&a!==k)throw new Error(`Expected ${F} or ${k} bytes, got ${a}`);return(0,H.bytesToNumberLE)(j(E))}(Ie),l=function J(Ie,E){const a=W(Ie),f=W(E),l=a;let d,h=G,g=N,x=a,P=G,m=N;for(let V=BigInt(M-1);V>=N;V--){const L=f>>V&G;m^=L,d=q(m,h,x),h=d[0],x=d[1],d=q(m,g,P),g=d[0],P=d[1],m=L;const Y=h+g,le=$(Y*Y),Se=h-g,Oe=$(Se*Se),Ve=le-Oe,Re=x+P,ke=$((x-P)*Y),ve=$(Re*Se),_e=ke+ve,de=ke-ve;x=$(_e*_e),P=$(l*$(de*de)),h=$(le*Oe),g=$(Ve*(le+$(K*Ve)))}d=q(m,h,x),h=d[0],x=d[1],d=q(m,g,P),g=d[0],P=d[1];const p=Z(g);return $(h*p)}(a,f);if(l===N)throw new Error("Invalid private or public key received");return X(l)}const me=X(T.Gu);function pe(Ie){return ne(Ie,me)}return{scalarMult:ne,scalarMultBase:pe,getSharedSecret:(Ie,E)=>ne(Ie,E),getPublicKey:Ie=>pe(Ie),utils:{randomPrivateKey:()=>T.randomBytes(T.nByteLength)},GuBytes:me}}},84097:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.validateObject=O.createHmacDrbg=O.bitMask=O.bitSet=O.bitGet=O.bitLen=O.utf8ToBytes=O.equalBytes=O.concatBytes=O.ensureBytes=O.numberToVarBytesBE=O.numberToBytesLE=O.numberToBytesBE=O.bytesToNumberLE=O.bytesToNumberBE=O.hexToBytes=O.hexToNumber=O.numberToHexUnpadded=O.bytesToHex=O.isBytes=void 0;const I=BigInt(0),C=BigInt(1),H=BigInt(2);function N(f){return f instanceof Uint8Array||null!=f&&"object"==typeof f&&"Uint8Array"===f.constructor.name}O.isBytes=N;const G=Array.from({length:256},(f,l)=>l.toString(16).padStart(2,"0"));function v(f){if(!N(f))throw new Error("Uint8Array expected");let l="";for(let h=0;h<f.length;h++)l+=G[f[h]];return l}function B(f){const l=f.toString(16);return 1&l.length?`0${l}`:l}function _(f){if("string"!=typeof f)throw new Error("hex string expected, got "+typeof f);return BigInt(""===f?"0":`0x${f}`)}O.bytesToHex=v,O.numberToHexUnpadded=B,O.hexToNumber=_;const T={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function D(f){return f>=T._0&&f<=T._9?f-T._0:f>=T._A&&f<=T._F?f-(T._A-10):f>=T._a&&f<=T._f?f-(T._a-10):void 0}function $(f){if("string"!=typeof f)throw new Error("hex string expected, got "+typeof f);const l=f.length,h=l/2;if(l%2)throw new Error("padded hex string expected, got unpadded hex of length "+l);const g=new Uint8Array(h);for(let x=0,P=0;x<h;x++,P+=2){const m=D(f.charCodeAt(P)),d=D(f.charCodeAt(P+1));if(void 0===m||void 0===d)throw new Error('hex string expected, got non-hex character "'+(f[P]+f[P+1])+'" at index '+P);g[x]=16*m+d}return g}function k(f,l){return $(f.toString(16).padStart(2*l,"0"))}function W(...f){let l=0;for(let x=0;x<f.length;x++){const P=f[x];if(!N(P))throw new Error("Uint8Array expected");l+=P.length}let h=new Uint8Array(l),g=0;for(let x=0;x<f.length;x++){const P=f[x];h.set(P,g),g+=P.length}return h}O.hexToBytes=$,O.bytesToNumberBE=function M(f){return _(v(f))},O.bytesToNumberLE=function F(f){if(!N(f))throw new Error("Uint8Array expected");return _(v(Uint8Array.from(f).reverse()))},O.numberToBytesBE=k,O.numberToBytesLE=function j(f,l){return k(f,l).reverse()},O.numberToVarBytesBE=function Z(f){return $(B(f))},O.ensureBytes=function q(f,l,h){let g;if("string"==typeof l)try{g=$(l)}catch(P){throw new Error(`${f} must be valid hex string, got "${l}". Cause: ${P}`)}else{if(!N(l))throw new Error(`${f} must be hex string or Uint8Array`);g=Uint8Array.from(l)}const x=g.length;if("number"==typeof h&&x!==h)throw new Error(`${f} expected ${h} bytes, got ${x}`);return g},O.concatBytes=W,O.equalBytes=function K(f,l){if(f.length!==l.length)return!1;let h=0;for(let g=0;g<f.length;g++)h|=f[g]^l[g];return 0===h},O.utf8ToBytes=function J(f){if("string"!=typeof f)throw new Error("utf8ToBytes expected string, got "+typeof f);return new Uint8Array((new TextEncoder).encode(f))},O.bitLen=function X(f){let l;for(l=0;f>I;f>>=C,l+=1);return l},O.bitGet=function Q(f,l){return f>>BigInt(l)&C},O.bitSet=(f,l,h)=>f|(h?C:I)<<BigInt(l),O.bitMask=f=>(H<<BigInt(f-1))-C;const me=f=>new Uint8Array(f),pe=f=>Uint8Array.from(f);O.createHmacDrbg=function Ie(f,l,h){if("number"!=typeof f||f<2)throw new Error("hashLen must be a number");if("number"!=typeof l||l<2)throw new Error("qByteLen must be a number");if("function"!=typeof h)throw new Error("hmacFn must be a function");let g=me(f),x=me(f),P=0;const m=()=>{g.fill(1),x.fill(0),P=0},d=(...Y)=>h(x,g,...Y),p=(Y=me())=>{x=d(pe([0]),Y),g=d(),0!==Y.length&&(x=d(pe([1]),Y),g=d())},V=()=>{if(P++>=1e3)throw new Error("drbg: tried 1000 values");let Y=0;const le=[];for(;Y<l;){g=d();const Se=g.slice();le.push(Se),Y+=g.length}return W(...le)};return(Y,le)=>{let Se;for(m(),p(Y);!(Se=le(V()));)p();return m(),Se}};const E={bigint:f=>"bigint"==typeof f,function:f=>"function"==typeof f,boolean:f=>"boolean"==typeof f,string:f=>"string"==typeof f,stringOrUint8Array:f=>"string"==typeof f||N(f),isSafeInteger:f=>Number.isSafeInteger(f),array:f=>Array.isArray(f),field:(f,l)=>l.Fp.isValid(f),hash:f=>"function"==typeof f&&Number.isSafeInteger(f.outputLen)};O.validateObject=function a(f,l,h={}){const g=(x,P,m)=>{const d=E[P];if("function"!=typeof d)throw new Error(`Invalid validator "${P}", expected function`);const p=f[x];if(!(m&&void 0===p||d(p,f)))throw new Error(`Invalid param ${String(x)}=${p} (${typeof p}), expected ${P}`)};for(const[x,P]of Object.entries(l))g(x,P,!1);for(const[x,P]of Object.entries(h))g(x,P,!0);return f}},73040:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.mapToCurveSimpleSWU=O.SWUFpSqrtRatio=O.weierstrass=O.weierstrassPoints=O.DER=void 0;const C=I(63834),H=I(84097),N=I(84097),G=I(25299),{bytesToNumberBE:B,hexToBytes:_}=H;O.DER={Err:class extends Error{constructor(J=""){super(J)}},_parseInt(K){const{Err:J}=O.DER;if(K.length<2||2!==K[0])throw new J("Invalid signature integer tag");const X=K[1],Q=K.subarray(2,X+2);if(!X||Q.length!==X)throw new J("Invalid signature integer: wrong length");if(128&Q[0])throw new J("Invalid signature integer: negative");if(0===Q[0]&&!(128&Q[1]))throw new J("Invalid signature integer: unnecessary leading zero");return{d:B(Q),l:K.subarray(X+2)}},toSig(K){const{Err:J}=O.DER,X="string"==typeof K?_(K):K;if(!H.isBytes(X))throw new Error("ui8a expected");let Q=X.length;if(Q<2||48!=X[0])throw new J("Invalid signature tag");if(X[1]!==Q-2)throw new J("Invalid signature: incorrect length");const{d:oe,l:ne}=O.DER._parseInt(X.subarray(2)),{d:me,l:pe}=O.DER._parseInt(ne);if(pe.length)throw new J("Invalid signature: left bytes after parsing");return{r:oe,s:me}},hexFromSig(K){const J=E=>8&Number.parseInt(E[0],16)?"00"+E:E,X=E=>{const a=E.toString(16);return 1&a.length?`0${a}`:a},Q=J(X(K.s)),oe=J(X(K.r)),ne=Q.length/2,me=oe.length/2,pe=X(ne),Ie=X(me);return`30${X(me+ne+4)}02${Ie}${oe}02${pe}${Q}`}};const T=BigInt(0),D=BigInt(1),$=BigInt(2),M=BigInt(3),F=BigInt(4);function k(K){const J=function v(K){const J=(0,G.validateBasic)(K);H.validateObject(J,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:X,Fp:Q,a:oe}=J;if(X){if(!Q.eql(oe,Q.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof X||"bigint"!=typeof X.beta||"function"!=typeof X.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...J})}(K),{Fp:X}=J,Q=J.toBytes||((g,x,P)=>{const m=x.toAffine();return H.concatBytes(Uint8Array.from([4]),X.toBytes(m.x),X.toBytes(m.y))}),oe=J.fromBytes||(g=>{const x=g.subarray(1);return{x:X.fromBytes(x.subarray(0,X.BYTES)),y:X.fromBytes(x.subarray(X.BYTES,2*X.BYTES))}});function ne(g){const{a:x,b:P}=J,m=X.sqr(g),d=X.mul(m,g);return X.add(X.add(d,X.mul(g,x)),P)}if(!X.eql(X.sqr(J.Gy),ne(J.Gx)))throw new Error("bad generator point: equation left != right");function me(g){return"bigint"==typeof g&&T<g&&g<J.n}function pe(g){if(!me(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function Ie(g){const{allowedPrivateKeyLengths:x,nByteLength:P,wrapPrivateKey:m,n:d}=J;if(x&&"bigint"!=typeof g){if(H.isBytes(g)&&(g=H.bytesToHex(g)),"string"!=typeof g||!x.includes(g.length))throw new Error("Invalid key");g=g.padStart(2*P,"0")}let p;try{p="bigint"==typeof g?g:H.bytesToNumberBE((0,N.ensureBytes)("private key",g,P))}catch{throw new Error(`private key must be ${P} bytes, hex or bigint, not ${typeof g}`)}return m&&(p=C.mod(p,d)),pe(p),p}const E=new Map;function a(g){if(!(g instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(x,P,m){if(this.px=x,this.py=P,this.pz=m,null==x||!X.isValid(x))throw new Error("x required");if(null==P||!X.isValid(P))throw new Error("y required");if(null==m||!X.isValid(m))throw new Error("z required")}static fromAffine(x){const{x:P,y:m}=x||{};if(!x||!X.isValid(P)||!X.isValid(m))throw new Error("invalid affine point");if(x instanceof f)throw new Error("projective point not allowed");const d=p=>X.eql(p,X.ZERO);return d(P)&&d(m)?f.ZERO:new f(P,m,X.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const P=X.invertBatch(x.map(m=>m.pz));return x.map((m,d)=>m.toAffine(P[d])).map(f.fromAffine)}static fromHex(x){const P=f.fromAffine(oe((0,N.ensureBytes)("pointHex",x)));return P.assertValidity(),P}static fromPrivateKey(x){return f.BASE.multiply(Ie(x))}_setWindowSize(x){this._WINDOW_SIZE=x,E.delete(this)}assertValidity(){if(this.is0()){if(J.allowInfinityPoint&&!X.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:P}=this.toAffine();if(!X.isValid(x)||!X.isValid(P))throw new Error("bad point: x or y not FE");const m=X.sqr(P),d=ne(x);if(!X.eql(m,d))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(X.isOdd)return!X.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){a(x);const{px:P,py:m,pz:d}=this,{px:p,py:V,pz:L}=x,Y=X.eql(X.mul(P,L),X.mul(p,d)),le=X.eql(X.mul(m,L),X.mul(V,d));return Y&&le}negate(){return new f(this.px,X.neg(this.py),this.pz)}double(){const{a:x,b:P}=J,m=X.mul(P,M),{px:d,py:p,pz:V}=this;let L=X.ZERO,Y=X.ZERO,le=X.ZERO,Se=X.mul(d,d),Oe=X.mul(p,p),Ve=X.mul(V,V),Re=X.mul(d,p);return Re=X.add(Re,Re),le=X.mul(d,V),le=X.add(le,le),L=X.mul(x,le),Y=X.mul(m,Ve),Y=X.add(L,Y),L=X.sub(Oe,Y),Y=X.add(Oe,Y),Y=X.mul(L,Y),L=X.mul(Re,L),le=X.mul(m,le),Ve=X.mul(x,Ve),Re=X.sub(Se,Ve),Re=X.mul(x,Re),Re=X.add(Re,le),le=X.add(Se,Se),Se=X.add(le,Se),Se=X.add(Se,Ve),Se=X.mul(Se,Re),Y=X.add(Y,Se),Ve=X.mul(p,V),Ve=X.add(Ve,Ve),Se=X.mul(Ve,Re),L=X.sub(L,Se),le=X.mul(Ve,Oe),le=X.add(le,le),le=X.add(le,le),new f(L,Y,le)}add(x){a(x);const{px:P,py:m,pz:d}=this,{px:p,py:V,pz:L}=x;let Y=X.ZERO,le=X.ZERO,Se=X.ZERO;const Oe=J.a,Ve=X.mul(J.b,M);let Re=X.mul(P,p),ye=X.mul(m,V),ke=X.mul(d,L),ve=X.add(P,m),_e=X.add(p,V);ve=X.mul(ve,_e),_e=X.add(Re,ye),ve=X.sub(ve,_e),_e=X.add(P,d);let de=X.add(p,L);return _e=X.mul(_e,de),de=X.add(Re,ke),_e=X.sub(_e,de),de=X.add(m,d),Y=X.add(V,L),de=X.mul(de,Y),Y=X.add(ye,ke),de=X.sub(de,Y),Se=X.mul(Oe,_e),Y=X.mul(Ve,ke),Se=X.add(Y,Se),Y=X.sub(ye,Se),Se=X.add(ye,Se),le=X.mul(Y,Se),ye=X.add(Re,Re),ye=X.add(ye,Re),ke=X.mul(Oe,ke),_e=X.mul(Ve,_e),ye=X.add(ye,ke),ke=X.sub(Re,ke),ke=X.mul(Oe,ke),_e=X.add(_e,ke),Re=X.mul(ye,_e),le=X.add(le,Re),Re=X.mul(de,_e),Y=X.mul(ve,Y),Y=X.sub(Y,Re),Re=X.mul(ve,ye),Se=X.mul(de,Se),Se=X.add(Se,Re),new f(Y,le,Se)}subtract(x){return this.add(x.negate())}is0(){return this.equals(f.ZERO)}wNAF(x){return h.wNAFCached(this,E,x,P=>{const m=X.invertBatch(P.map(d=>d.pz));return P.map((d,p)=>d.toAffine(m[p])).map(f.fromAffine)})}multiplyUnsafe(x){const P=f.ZERO;if(x===T)return P;if(pe(x),x===D)return this;const{endo:m}=J;if(!m)return h.unsafeLadder(this,x);let{k1neg:d,k1:p,k2neg:V,k2:L}=m.splitScalar(x),Y=P,le=P,Se=this;for(;p>T||L>T;)p&D&&(Y=Y.add(Se)),L&D&&(le=le.add(Se)),Se=Se.double(),p>>=D,L>>=D;return d&&(Y=Y.negate()),V&&(le=le.negate()),le=new f(X.mul(le.px,m.beta),le.py,le.pz),Y.add(le)}multiply(x){pe(x);let m,d,P=x;const{endo:p}=J;if(p){const{k1neg:V,k1:L,k2neg:Y,k2:le}=p.splitScalar(P);let{p:Se,f:Oe}=this.wNAF(L),{p:Ve,f:Re}=this.wNAF(le);Se=h.constTimeNegate(V,Se),Ve=h.constTimeNegate(Y,Ve),Ve=new f(X.mul(Ve.px,p.beta),Ve.py,Ve.pz),m=Se.add(Ve),d=Oe.add(Re)}else{const{p:V,f:L}=this.wNAF(P);m=V,d=L}return f.normalizeZ([m,d])[0]}multiplyAndAddUnsafe(x,P,m){const d=f.BASE,p=(L,Y)=>Y!==T&&Y!==D&&L.equals(d)?L.multiply(Y):L.multiplyUnsafe(Y),V=p(this,P).add(p(x,m));return V.is0()?void 0:V}toAffine(x){const{px:P,py:m,pz:d}=this,p=this.is0();null==x&&(x=p?X.ONE:X.inv(d));const V=X.mul(P,x),L=X.mul(m,x),Y=X.mul(d,x);if(p)return{x:X.ZERO,y:X.ZERO};if(!X.eql(Y,X.ONE))throw new Error("invZ was invalid");return{x:V,y:L}}isTorsionFree(){const{h:x,isTorsionFree:P}=J;if(x===D)return!0;if(P)return P(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:P}=J;return x===D?this:P?P(f,this):this.multiplyUnsafe(J.h)}toRawBytes(x=!0){return this.assertValidity(),Q(f,this,x)}toHex(x=!0){return H.bytesToHex(this.toRawBytes(x))}}f.BASE=new f(J.Gx,J.Gy,X.ONE),f.ZERO=new f(X.ZERO,X.ONE,X.ZERO);const l=J.nBitLength,h=(0,G.wNAF)(f,J.endo?Math.ceil(l/2):l);return{CURVE:J,ProjectivePoint:f,normPrivateKeyToScalar:Ie,weierstrassEquation:ne,isWithinCurveOrder:me}}function q(K,J){const X=K.ORDER;let Q=T;for(let g=X-D;g%$===T;g/=$)Q+=D;const oe=Q,ne=$<<oe-D-D,me=ne*$,pe=(X-D)/me,Ie=(pe-D)/$,E=me-D,a=ne,f=K.pow(J,pe),l=K.pow(J,(pe+D)/$);let h=(g,x)=>{let P=f,m=K.pow(x,E),d=K.sqr(m);d=K.mul(d,x);let p=K.mul(g,d);p=K.pow(p,Ie),p=K.mul(p,m),m=K.mul(p,x),d=K.mul(p,g);let V=K.mul(d,m);p=K.pow(V,a);let L=K.eql(p,K.ONE);m=K.mul(d,l),p=K.mul(V,P),d=K.cmov(m,d,L),V=K.cmov(p,V,L);for(let Y=oe;Y>D;Y--){let le=Y-$;le=$<<le-D;let Se=K.pow(V,le);const Oe=K.eql(Se,K.ONE);m=K.mul(d,P),P=K.mul(P,P),Se=K.mul(V,P),d=K.cmov(m,d,Oe),V=K.cmov(Se,V,Oe)}return{isValid:L,value:d}};if(K.ORDER%F===M){const g=(K.ORDER-M)/F,x=K.sqrt(K.neg(J));h=(P,m)=>{let d=K.sqr(m);const p=K.mul(P,m);d=K.mul(d,p);let V=K.pow(d,g);V=K.mul(V,p);const L=K.mul(V,x),Y=K.mul(K.sqr(V),m),le=K.eql(Y,P);return{isValid:le,value:K.cmov(L,V,le)}}}return h}O.weierstrassPoints=k,O.weierstrass=function Z(K){const J=function j(K){const J=(0,G.validateBasic)(K);return H.validateObject(J,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...J})}(K),{Fp:X,n:Q}=J,oe=X.BYTES+1,ne=2*X.BYTES+1;function pe(_e){return C.mod(_e,Q)}function Ie(_e){return C.invert(_e,Q)}const{ProjectivePoint:E,normPrivateKeyToScalar:a,weierstrassEquation:f,isWithinCurveOrder:l}=k({...J,toBytes(_e,de,se){const re=de.toAffine(),ce=X.toBytes(re.x),ue=H.concatBytes;return se?ue(Uint8Array.from([de.hasEvenY()?2:3]),ce):ue(Uint8Array.from([4]),ce,X.toBytes(re.y))},fromBytes(_e){const de=_e.length,se=_e[0],re=_e.subarray(1);if(de!==oe||2!==se&&3!==se){if(de===ne&&4===se)return{x:X.fromBytes(re.subarray(0,X.BYTES)),y:X.fromBytes(re.subarray(X.BYTES,2*X.BYTES))};throw new Error(`Point of length ${de} was invalid. Expected ${oe} compressed bytes or ${ne} uncompressed bytes`)}{const ce=H.bytesToNumberBE(re);if(!function me(_e){return T<_e&&_e<X.ORDER}(ce))throw new Error("Point is not on curve");const ue=f(ce);let ge=X.sqrt(ue);return!(1&~se)!=((ge&D)===D)&&(ge=X.neg(ge)),{x:ce,y:ge}}}}),h=_e=>H.bytesToHex(H.numberToBytesBE(_e,J.nByteLength));function g(_e){return _e>Q>>D}const P=(_e,de,se)=>H.bytesToNumberBE(_e.slice(de,se));class m{constructor(de,se,re){this.r=de,this.s=se,this.recovery=re,this.assertValidity()}static fromCompact(de){const se=J.nByteLength;return de=(0,N.ensureBytes)("compactSignature",de,2*se),new m(P(de,0,se),P(de,se,2*se))}static fromDER(de){const{r:se,s:re}=O.DER.toSig((0,N.ensureBytes)("DER",de));return new m(se,re)}assertValidity(){if(!l(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!l(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(de){return new m(this.r,this.s,de)}recoverPublicKey(de){const{r:se,s:re,recovery:ce}=this,ue=le((0,N.ensureBytes)("msgHash",de));if(null==ce||![0,1,2,3].includes(ce))throw new Error("recovery id invalid");const ge=2===ce||3===ce?se+J.n:se;if(ge>=X.ORDER)throw new Error("recovery id 2 or 3 invalid");const Be=E.fromHex((1&ce?"03":"02")+h(ge)),De=Ie(ge),et=pe(-ue*De),Ke=pe(re*De),We=E.BASE.multiplyAndAddUnsafe(Be,et,Ke);if(!We)throw new Error("point at infinify");return We.assertValidity(),We}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,pe(-this.s),this.recovery):this}toDERRawBytes(){return H.hexToBytes(this.toDERHex())}toDERHex(){return O.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return H.hexToBytes(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const d={isValidPrivateKey(_e){try{return a(_e),!0}catch{return!1}},normPrivateKeyToScalar:a,randomPrivateKey:()=>{const _e=C.getMinHashLength(J.n);return C.mapHashToField(J.randomBytes(_e),J.n)},precompute:(_e=8,de=E.BASE)=>(de._setWindowSize(_e),de.multiply(BigInt(3)),de)};function V(_e){const de=H.isBytes(_e),se="string"==typeof _e,re=(de||se)&&_e.length;return de?re===oe||re===ne:se?re===2*oe||re===2*ne:_e instanceof E}const Y=J.bits2int||function(_e){const de=H.bytesToNumberBE(_e),se=8*_e.length-J.nBitLength;return se>0?de>>BigInt(se):de},le=J.bits2int_modN||function(_e){return pe(Y(_e))},Se=H.bitMask(J.nBitLength);function Oe(_e){if("bigint"!=typeof _e)throw new Error("bigint expected");if(!(T<=_e&&_e<Se))throw new Error(`bigint expected < 2^${J.nBitLength}`);return H.numberToBytesBE(_e,J.nByteLength)}const Re={lowS:J.lowS,prehash:!1},ye={lowS:J.lowS,prehash:!1};return E.BASE._setWindowSize(8),{CURVE:J,getPublicKey:function p(_e,de=!0){return E.fromPrivateKey(_e).toRawBytes(de)},getSharedSecret:function L(_e,de,se=!0){if(V(_e))throw new Error("first arg must be private key");if(!V(de))throw new Error("second arg must be public key");return E.fromHex(de).multiply(a(_e)).toRawBytes(se)},sign:function ke(_e,de,se=Re){const{seed:re,k2sig:ce}=function Ve(_e,de,se=Re){if(["recovered","canonical"].some(U=>U in se))throw new Error("sign() legacy options not supported");const{hash:re,randomBytes:ce}=J;let{lowS:ue,prehash:ge,extraEntropy:Ee}=se;null==ue&&(ue=!0),_e=(0,N.ensureBytes)("msgHash",_e),ge&&(_e=(0,N.ensureBytes)("prehashed msgHash",re(_e)));const Be=le(_e),De=a(de),et=[Oe(De),Oe(Be)];if(null!=Ee){const U=!0===Ee?ce(X.BYTES):Ee;et.push((0,N.ensureBytes)("extraEntropy",U))}const Ke=H.concatBytes(...et),We=Be;return{seed:Ke,k2sig:function _t(U){const w=Y(U);if(!l(w))return;const b=Ie(w),z=E.BASE.multiply(w).toAffine(),ie=pe(z.x);if(ie===T)return;const be=pe(b*pe(We+ie*De));if(be===T)return;let Me=(z.x===ie?0:2)|Number(z.y&D),qe=be;return ue&&g(be)&&(qe=function x(_e){return g(_e)?pe(-_e):_e}(be),Me^=1),new m(ie,qe,Me)}}}(_e,de,se);return H.createHmacDrbg(J.hash.outputLen,J.nByteLength,J.hmac)(re,ce)},verify:function ve(_e,de,se,re=ye){const ce=_e;if(de=(0,N.ensureBytes)("msgHash",de),se=(0,N.ensureBytes)("publicKey",se),"strict"in re)throw new Error("options.strict was renamed to lowS");const{lowS:ue,prehash:ge}=re;let Ee,Be;try{if("string"==typeof ce||H.isBytes(ce))try{Ee=m.fromDER(ce)}catch(z){if(!(z instanceof O.DER.Err))throw z;Ee=m.fromCompact(ce)}else{if("object"!=typeof ce||"bigint"!=typeof ce.r||"bigint"!=typeof ce.s)throw new Error("PARSE");{const{r:z,s:ie}=ce;Ee=new m(z,ie)}}Be=E.fromHex(se)}catch(z){if("PARSE"===z.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ue&&Ee.hasHighS())return!1;ge&&(de=J.hash(de));const{r:De,s:et}=Ee,Ke=le(de),We=Ie(et),_t=pe(Ke*We),U=pe(De*We),w=E.BASE.multiplyAndAddUnsafe(Be,_t,U)?.toAffine();return!!w&&pe(w.x)===De},ProjectivePoint:E,Signature:m,utils:d}},O.SWUFpSqrtRatio=q,O.mapToCurveSimpleSWU=function W(K,J){if(C.validateField(K),!K.isValid(J.A)||!K.isValid(J.B)||!K.isValid(J.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const X=q(K,J.Z);if(!K.isOdd)throw new Error("Fp.isOdd is not implemented!");return Q=>{let oe,ne,me,pe,Ie,E,a,f;oe=K.sqr(Q),oe=K.mul(oe,J.Z),ne=K.sqr(oe),ne=K.add(ne,oe),me=K.add(ne,K.ONE),me=K.mul(me,J.B),pe=K.cmov(J.Z,K.neg(ne),!K.eql(ne,K.ZERO)),pe=K.mul(pe,J.A),ne=K.sqr(me),E=K.sqr(pe),Ie=K.mul(E,J.A),ne=K.add(ne,Ie),ne=K.mul(ne,me),E=K.mul(E,pe),Ie=K.mul(E,J.B),ne=K.add(ne,Ie),a=K.mul(oe,me);const{isValid:l,value:h}=X(ne,E);f=K.mul(oe,Q),f=K.mul(f,h),a=K.cmov(a,me,l),f=K.cmov(f,h,l);const g=K.isOdd(Q)===K.isOdd(f);return f=K.cmov(K.neg(f),f,g),a=K.div(a,pe),{x:a,y:f}}}},57340:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.hash_to_ristretto255=O.hashToRistretto255=O.RistrettoPoint=O.encodeToCurve=O.hashToCurve=O.edwardsToMontgomeryPriv=O.edwardsToMontgomery=O.edwardsToMontgomeryPub=O.x25519=O.ed25519ph=O.ed25519ctx=O.ed25519=O.ED25519_TORSION_SUBGROUP=void 0;const C=I(44207),H=I(96492),N=I(45068),G=I(27661),v=I(63834),B=I(84097),_=I(75752),T=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),D=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),$=BigInt(0),M=BigInt(1),F=BigInt(2),k=BigInt(5),j=BigInt(10),Z=BigInt(20),q=BigInt(40),W=BigInt(80);function K(ke){const ve=T,de=ke*ke%ve*ke%ve,se=(0,v.pow2)(de,F,ve)*de%ve,re=(0,v.pow2)(se,M,ve)*ke%ve,ce=(0,v.pow2)(re,k,ve)*re%ve,ue=(0,v.pow2)(ce,j,ve)*ce%ve,ge=(0,v.pow2)(ue,Z,ve)*ue%ve,Ee=(0,v.pow2)(ge,q,ve)*ge%ve,Be=(0,v.pow2)(Ee,W,ve)*Ee%ve,De=(0,v.pow2)(Be,W,ve)*Ee%ve,et=(0,v.pow2)(De,j,ve)*ce%ve;return{pow_p_5_8:(0,v.pow2)(et,F,ve)*ke%ve,b2:de}}function J(ke){return ke[0]&=248,ke[31]&=127,ke[31]|=64,ke}function X(ke,ve){const _e=T,de=(0,v.mod)(ve*ve*ve,_e),re=K(ke*(0,v.mod)(de*de*ve,_e)).pow_p_5_8;let ce=(0,v.mod)(ke*de*re,_e);const ue=(0,v.mod)(ve*ce*ce,_e),ge=ce,Ee=(0,v.mod)(ce*D,_e),Be=ue===ke,De=ue===(0,v.mod)(-ke,_e),et=ue===(0,v.mod)(-ke*D,_e);return Be&&(ce=ge),(De||et)&&(ce=Ee),(0,v.isNegativeLE)(ce,_e)&&(ce=(0,v.mod)(-ce,_e)),{isValid:Be||De,value:ce}}O.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const Q=(0,v.Field)(T,void 0,!0),oe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Q,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:C.sha512,randomBytes:H.randomBytes,adjustScalarBytes:J,uvRatio:X};function ne(ke,ve,_e){if(ve.length>255)throw new Error("Context is too big");return(0,H.concatBytes)((0,H.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([_e?1:0,ve.length]),ve,ke)}function me(ke){const{y:ve}=O.ed25519.ExtendedPoint.fromHex(ke),_e=BigInt(1);return Q.toBytes(Q.create((_e+ve)*Q.inv(_e-ve)))}O.ed25519=(0,N.twistedEdwards)(oe),O.ed25519ctx=(0,N.twistedEdwards)({...oe,domain:ne}),O.ed25519ph=(0,N.twistedEdwards)({...oe,domain:ne,prehash:C.sha512}),O.x25519=(0,G.montgomery)({P:T,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:ke=>{const ve=T,{pow_p_5_8:_e,b2:de}=K(ke);return(0,v.mod)((0,v.pow2)(_e,BigInt(3),ve)*de,ve)},adjustScalarBytes:J,randomBytes:H.randomBytes}),O.edwardsToMontgomeryPub=me,O.edwardsToMontgomery=me,O.edwardsToMontgomeryPriv=function pe(ke){const ve=oe.hash(ke.subarray(0,32));return oe.adjustScalarBytes(ve).subarray(0,32)};const Ie=(Q.ORDER+BigInt(3))/BigInt(8),E=Q.pow(F,Ie),a=Q.sqrt(Q.neg(Q.ONE)),f=(Q.ORDER-BigInt(5))/BigInt(8),l=BigInt(486662),g=(0,v.FpSqrtEven)(Q,Q.neg(BigInt(486664)));const P=(0,_.createHasher)(O.ed25519.ExtendedPoint,ke=>function x(ke){const{xMn:ve,xMd:_e,yMn:de,yMd:se}=function h(ke){let ve=Q.sqr(ke);ve=Q.mul(ve,F);let _e=Q.add(ve,Q.ONE),de=Q.neg(l),se=Q.sqr(_e),re=Q.mul(se,_e),ce=Q.mul(ve,l);ce=Q.mul(ce,de),ce=Q.add(ce,se),ce=Q.mul(ce,de);let ue=Q.sqr(re);se=Q.sqr(ue),ue=Q.mul(ue,re),ue=Q.mul(ue,ce),se=Q.mul(se,ue);let ge=Q.pow(se,f);ge=Q.mul(ge,ue);let Ee=Q.mul(ge,a);se=Q.sqr(ge),se=Q.mul(se,re);let Be=Q.eql(se,ce),De=Q.cmov(Ee,ge,Be),et=Q.mul(de,ve),Ke=Q.mul(ge,ke);Ke=Q.mul(Ke,E);let We=Q.mul(Ke,a),_t=Q.mul(ce,ve);se=Q.sqr(Ke),se=Q.mul(se,re);let U=Q.eql(se,_t),w=Q.cmov(We,Ke,U);se=Q.sqr(De),se=Q.mul(se,re);let b=Q.eql(se,ce),z=Q.cmov(et,de,b),ie=Q.cmov(w,De,b),be=Q.isOdd(ie);return ie=Q.cmov(ie,Q.neg(ie),b!==be),{xMn:z,xMd:_e,yMn:ie,yMd:M}}(ke);let re=Q.mul(ve,se);re=Q.mul(re,g);let ce=Q.mul(_e,de),ue=Q.sub(ve,_e),ge=Q.add(ve,_e),Ee=Q.mul(ce,ge),Be=Q.eql(Ee,Q.ZERO);re=Q.cmov(re,Q.ZERO,Be),ce=Q.cmov(ce,Q.ONE,Be),ue=Q.cmov(ue,Q.ONE,Be),ge=Q.cmov(ge,Q.ONE,Be);const De=Q.invertBatch([ce,ge]);return{x:Q.mul(re,De[0]),y:Q.mul(ue,De[1])}}(ke[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:Q.ORDER,m:1,k:128,expand:"xmd",hash:C.sha512});function m(ke){if(!(ke instanceof Re))throw new Error("RistrettoPoint expected")}O.hashToCurve=P.hashToCurve,O.encodeToCurve=P.encodeToCurve;const d=D,p=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),V=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),L=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Y=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),le=ke=>X(M,ke),Se=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Oe=ke=>O.ed25519.CURVE.Fp.create((0,B.bytesToNumberLE)(ke)&Se);function Ve(ke){const{d:ve}=O.ed25519.CURVE,_e=O.ed25519.CURVE.Fp.ORDER,de=O.ed25519.CURVE.Fp.create,se=de(d*ke*ke),re=de((se+M)*L);let ce=BigInt(-1);const ue=de((ce-ve*se)*de(se+ve));let{isValid:ge,value:Ee}=X(re,ue),Be=de(Ee*ke);(0,v.isNegativeLE)(Be,_e)||(Be=de(-Be)),ge||(Ee=Be),ge||(ce=se);const De=de(ce*(se-M)*Y-ue),et=Ee*Ee,Ke=de((Ee+Ee)*ue),We=de(De*p),_t=de(M-et),U=de(M+et);return new O.ed25519.ExtendedPoint(de(Ke*U),de(_t*We),de(We*U),de(Ke*_t))}class Re{constructor(ve){this.ep=ve}static fromAffine(ve){return new Re(O.ed25519.ExtendedPoint.fromAffine(ve))}static hashToCurve(ve){ve=(0,B.ensureBytes)("ristrettoHash",ve,64);const de=Ve(Oe(ve.slice(0,32))),re=Ve(Oe(ve.slice(32,64)));return new Re(de.add(re))}static fromHex(ve){ve=(0,B.ensureBytes)("ristrettoHex",ve,32);const{a:_e,d:de}=O.ed25519.CURVE,se=O.ed25519.CURVE.Fp.ORDER,re=O.ed25519.CURVE.Fp.create,ce="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",ue=Oe(ve);if(!(0,B.equalBytes)((0,B.numberToBytesLE)(ue,32),ve)||(0,v.isNegativeLE)(ue,se))throw new Error(ce);const ge=re(ue*ue),Ee=re(M+_e*ge),Be=re(M-_e*ge),De=re(Ee*Ee),et=re(Be*Be),Ke=re(_e*de*De-et),{isValid:We,value:_t}=le(re(Ke*et)),U=re(_t*Be),w=re(_t*U*Ke);let b=re((ue+ue)*U);(0,v.isNegativeLE)(b,se)&&(b=re(-b));const z=re(Ee*w),ie=re(b*z);if(!We||(0,v.isNegativeLE)(ie,se)||z===$)throw new Error(ce);return new Re(new O.ed25519.ExtendedPoint(b,z,M,ie))}toRawBytes(){let{ex:ve,ey:_e,ez:de,et:se}=this.ep;const re=O.ed25519.CURVE.Fp.ORDER,ce=O.ed25519.CURVE.Fp.create,ue=ce(ce(de+_e)*ce(de-_e)),ge=ce(ve*_e),Ee=ce(ge*ge),{value:Be}=le(ce(ue*Ee)),De=ce(Be*ue),et=ce(Be*ge),Ke=ce(De*et*se);let We;if((0,v.isNegativeLE)(se*Ke,re)){let U=ce(_e*d),w=ce(ve*d);ve=U,_e=w,We=ce(De*V)}else We=et;(0,v.isNegativeLE)(ve*Ke,re)&&(_e=ce(-_e));let _t=ce((de-_e)*We);return(0,v.isNegativeLE)(_t,re)&&(_t=ce(-_t)),(0,B.numberToBytesLE)(_t,32)}toHex(){return(0,B.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(ve){m(ve);const{ex:_e,ey:de}=this.ep,{ex:se,ey:re}=ve.ep,ce=O.ed25519.CURVE.Fp.create,ue=ce(_e*re)===ce(de*se),ge=ce(de*re)===ce(_e*se);return ue||ge}add(ve){return m(ve),new Re(this.ep.add(ve.ep))}subtract(ve){return m(ve),new Re(this.ep.subtract(ve.ep))}multiply(ve){return new Re(this.ep.multiply(ve))}multiplyUnsafe(ve){return new Re(this.ep.multiplyUnsafe(ve))}double(){return new Re(this.ep.double())}negate(){return new Re(this.ep.negate())}}O.RistrettoPoint=(Re.BASE||(Re.BASE=new Re(O.ed25519.ExtendedPoint.BASE)),Re.ZERO||(Re.ZERO=new Re(O.ed25519.ExtendedPoint.ZERO)),Re),O.hashToRistretto255=(ke,ve)=>{const _e=ve.DST,de="string"==typeof _e?(0,H.utf8ToBytes)(_e):_e,se=(0,_.expand_message_xmd)(ke,de,64,C.sha512);return Re.hashToCurve(se)},O.hash_to_ristretto255=O.hashToRistretto255},91717:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.encodeToCurve=O.hashToCurve=O.schnorr=O.secp256k1=void 0;const C=I(1806),H=I(96492),N=I(63834),G=I(73040),v=I(84097),B=I(75752),_=I(4521),T=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),D=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$=BigInt(1),M=BigInt(2),F=(m,d)=>(m+d/M)/d;function k(m){const d=T,p=BigInt(3),V=BigInt(6),L=BigInt(11),Y=BigInt(22),le=BigInt(23),Se=BigInt(44),Oe=BigInt(88),Ve=m*m*m%d,Re=Ve*Ve*m%d,ye=(0,N.pow2)(Re,p,d)*Re%d,ke=(0,N.pow2)(ye,p,d)*Re%d,ve=(0,N.pow2)(ke,M,d)*Ve%d,_e=(0,N.pow2)(ve,L,d)*ve%d,de=(0,N.pow2)(_e,Y,d)*_e%d,se=(0,N.pow2)(de,Se,d)*de%d,re=(0,N.pow2)(se,Oe,d)*se%d,ce=(0,N.pow2)(re,Se,d)*de%d,ue=(0,N.pow2)(ce,p,d)*Re%d,ge=(0,N.pow2)(ue,le,d)*_e%d,Ee=(0,N.pow2)(ge,V,d)*Ve%d,Be=(0,N.pow2)(Ee,M,d);if(!j.eql(j.sqr(Be),m))throw new Error("Cannot find square root");return Be}const j=(0,N.Field)(T,void 0,void 0,{sqrt:k});O.secp256k1=(0,_.createCurve)({a:BigInt(0),b:BigInt(7),Fp:j,n:D,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:m=>{const d=D,p=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),V=-$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),L=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Y=p,le=BigInt("0x100000000000000000000000000000000"),Se=F(Y*m,d),Oe=F(-V*m,d);let Ve=(0,N.mod)(m-Se*p-Oe*L,d),Re=(0,N.mod)(-Se*V-Oe*Y,d);const ye=Ve>le,ke=Re>le;if(ye&&(Ve=d-Ve),ke&&(Re=d-Re),Ve>le||Re>le)throw new Error("splitScalar: Endomorphism failed, k="+m);return{k1neg:ye,k1:Ve,k2neg:ke,k2:Re}}}},C.sha256);const Z=BigInt(0),q=m=>"bigint"==typeof m&&Z<m&&m<T,K={};function J(m,...d){let p=K[m];if(void 0===p){const V=(0,C.sha256)(Uint8Array.from(m,L=>L.charCodeAt(0)));p=(0,v.concatBytes)(V,V),K[m]=p}return(0,C.sha256)((0,v.concatBytes)(p,...d))}const X=m=>m.toRawBytes(!0).slice(1),Q=m=>(0,v.numberToBytesBE)(m,32),oe=m=>(0,N.mod)(m,T),ne=m=>(0,N.mod)(m,D),me=O.secp256k1.ProjectivePoint;function Ie(m){let d=O.secp256k1.utils.normPrivateKeyToScalar(m),p=me.fromPrivateKey(d);return{scalar:p.hasEvenY()?d:ne(-d),bytes:X(p)}}function E(m){if(!q(m))throw new Error("bad x: need 0 < x < p");const d=oe(m*m);let V=k(oe(d*m+BigInt(7)));V%M!==Z&&(V=oe(-V));const L=new me(m,V,$);return L.assertValidity(),L}function a(...m){return ne((0,v.bytesToNumberBE)(J("BIP0340/challenge",...m)))}function h(m,d,p){const V=(0,v.ensureBytes)("signature",m,64),L=(0,v.ensureBytes)("message",d),Y=(0,v.ensureBytes)("publicKey",p,32);try{const le=E((0,v.bytesToNumberBE)(Y)),Se=(0,v.bytesToNumberBE)(V.subarray(0,32));if(!q(Se))return!1;const Oe=(0,v.bytesToNumberBE)(V.subarray(32,64));if(!(m=>"bigint"==typeof m&&Z<m&&m<D)(Oe))return!1;const Ve=a(Q(Se),X(le),L),Re=((m,d,p)=>me.BASE.multiplyAndAddUnsafe(m,d,p))(le,Oe,ne(-Ve));return!(!Re||!Re.hasEvenY()||Re.toAffine().x!==Se)}catch{return!1}}O.schnorr={getPublicKey:function f(m){return Ie(m).bytes},sign:function l(m,d,p=(0,H.randomBytes)(32)){const V=(0,v.ensureBytes)("message",m),{bytes:L,scalar:Y}=Ie(d),le=(0,v.ensureBytes)("auxRand",p,32),Se=Q(Y^(0,v.bytesToNumberBE)(J("BIP0340/aux",le))),Oe=J("BIP0340/nonce",Se,L,V),Ve=ne((0,v.bytesToNumberBE)(Oe));if(Ve===Z)throw new Error("sign failed: k is zero");const{bytes:Re,scalar:ye}=Ie(Ve),ke=a(Re,L,V),ve=new Uint8Array(64);if(ve.set(Re,0),ve.set(Q(ne(ye+ke*Y)),32),!h(ve,V,L))throw new Error("sign: Invalid signature produced");return ve},verify:h,utils:{randomPrivateKey:O.secp256k1.utils.randomPrivateKey,lift_x:E,pointToBytes:X,numberToBytesBE:v.numberToBytesBE,bytesToNumberBE:v.bytesToNumberBE,taggedHash:J,mod:N.mod}};const g=(0,B.isogenyMap)(j,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(m=>m.map(d=>BigInt(d)))),x=(0,G.mapToCurveSimpleSWU)(j,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:j.create(BigInt("-11"))}),P=(0,B.createHasher)(O.secp256k1.ProjectivePoint,m=>{const{x:d,y:p}=x(j.create(m[0]));return g(d,p)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:j.ORDER,m:1,k:128,expand:"xmd",hash:C.sha256});O.hashToCurve=P.hashToCurve,O.encodeToCurve=P.encodeToCurve},68578:(xe,O)=>{"use strict";function I(T){if(!Number.isSafeInteger(T)||T<0)throw new Error(`Wrong positive integer: ${T}`)}function C(T){if("boolean"!=typeof T)throw new Error(`Expected boolean, not ${T}`)}function N(T,...D){if(!function H(T){return T instanceof Uint8Array||null!=T&&"object"==typeof T&&"Uint8Array"===T.constructor.name}(T))throw new Error("Expected Uint8Array");if(D.length>0&&!D.includes(T.length))throw new Error(`Expected Uint8Array of length ${D}, not of length=${T.length}`)}function G(T){if("function"!=typeof T||"function"!=typeof T.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");I(T.outputLen),I(T.blockLen)}function v(T,D=!0){if(T.destroyed)throw new Error("Hash instance has been destroyed");if(D&&T.finished)throw new Error("Hash#digest() has already been called")}function B(T,D){N(T);const $=D.outputLen;if(T.length<$)throw new Error(`digestInto() expects output buffer of length at least ${$}`)}Object.defineProperty(O,"__esModule",{value:!0}),O.output=O.exists=O.hash=O.bytes=O.bool=O.number=void 0,O.number=I,O.bool=C,O.bytes=N,O.hash=G,O.exists=v,O.output=B,O.default={number:I,bool:C,bytes:N,hash:G,exists:v,output:B}},25724:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.SHA2=void 0;const C=I(68578),H=I(96492);O.SHA2=class G extends H.Hash{constructor(B,_,T,D){super(),this.blockLen=B,this.outputLen=_,this.padOffset=T,this.isLE=D,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(B),this.view=(0,H.createView)(this.buffer)}update(B){(0,C.exists)(this);const{view:_,buffer:T,blockLen:D}=this,$=(B=(0,H.toBytes)(B)).length;for(let M=0;M<$;){const F=Math.min(D-this.pos,$-M);if(F!==D)T.set(B.subarray(M,M+F),this.pos),this.pos+=F,M+=F,this.pos===D&&(this.process(_,0),this.pos=0);else{const k=(0,H.createView)(B);for(;D<=$-M;M+=D)this.process(k,M)}}return this.length+=B.length,this.roundClean(),this}digestInto(B){(0,C.exists)(this),(0,C.output)(B,this),this.finished=!0;const{buffer:_,view:T,blockLen:D,isLE:$}=this;let{pos:M}=this;_[M++]=128,this.buffer.subarray(M).fill(0),this.padOffset>D-M&&(this.process(T,0),M=0);for(let q=M;q<D;q++)_[q]=0;(function N(v,B,_,T){if("function"==typeof v.setBigUint64)return v.setBigUint64(B,_,T);const D=BigInt(32),$=BigInt(4294967295),M=Number(_>>D&$),F=Number(_&$),j=T?0:4;v.setUint32(B+(T?4:0),M,T),v.setUint32(B+j,F,T)})(T,D-8,BigInt(8*this.length),$),this.process(T,0);const F=(0,H.createView)(B),k=this.outputLen;if(k%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const j=k/4,Z=this.get();if(j>Z.length)throw new Error("_sha2: outputLen bigger than state");for(let q=0;q<j;q++)F.setUint32(4*q,Z[q],$)}digest(){const{buffer:B,outputLen:_}=this;this.digestInto(B);const T=B.slice(0,_);return this.destroy(),T}_cloneInto(B){B||(B=new this.constructor),B.set(...this.get());const{blockLen:_,buffer:T,length:D,finished:$,destroyed:M,pos:F}=this;return B.length=D,B.pos=F,B.finished=$,B.destroyed=M,D%_&&B.buffer.set(T),B}}},35059:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.add5L=O.add5H=O.add4H=O.add4L=O.add3H=O.add3L=O.add=O.rotlBL=O.rotlBH=O.rotlSL=O.rotlSH=O.rotr32L=O.rotr32H=O.rotrBL=O.rotrBH=O.rotrSL=O.rotrSH=O.shrSL=O.shrSH=O.toBig=O.split=O.fromBig=void 0;const I=BigInt(2**32-1),C=BigInt(32);function H(pe,Ie=!1){return Ie?{h:Number(pe&I),l:Number(pe>>C&I)}:{h:0|Number(pe>>C&I),l:0|Number(pe&I)}}function N(pe,Ie=!1){let E=new Uint32Array(pe.length),a=new Uint32Array(pe.length);for(let f=0;f<pe.length;f++){const{h:l,l:h}=H(pe[f],Ie);[E[f],a[f]]=[l,h]}return[E,a]}O.fromBig=H,O.split=N;const G=(pe,Ie)=>BigInt(pe>>>0)<<C|BigInt(Ie>>>0);O.toBig=G;const v=(pe,Ie,E)=>pe>>>E;O.shrSH=v;const B=(pe,Ie,E)=>pe<<32-E|Ie>>>E;O.shrSL=B;const _=(pe,Ie,E)=>pe>>>E|Ie<<32-E;O.rotrSH=_;const T=(pe,Ie,E)=>pe<<32-E|Ie>>>E;O.rotrSL=T;const D=(pe,Ie,E)=>pe<<64-E|Ie>>>E-32;O.rotrBH=D;const $=(pe,Ie,E)=>pe>>>E-32|Ie<<64-E;O.rotrBL=$;const M=(pe,Ie)=>Ie;O.rotr32H=M;const F=(pe,Ie)=>pe;O.rotr32L=F;const k=(pe,Ie,E)=>pe<<E|Ie>>>32-E;O.rotlSH=k;const j=(pe,Ie,E)=>Ie<<E|pe>>>32-E;O.rotlSL=j;const Z=(pe,Ie,E)=>Ie<<E-32|pe>>>64-E;O.rotlBH=Z;const q=(pe,Ie,E)=>pe<<E-32|Ie>>>64-E;function W(pe,Ie,E,a){const f=(Ie>>>0)+(a>>>0);return{h:pe+E+(f/2**32|0)|0,l:0|f}}O.rotlBL=q,O.add=W;const K=(pe,Ie,E)=>(pe>>>0)+(Ie>>>0)+(E>>>0);O.add3L=K;const J=(pe,Ie,E,a)=>Ie+E+a+(pe/2**32|0)|0;O.add3H=J;const X=(pe,Ie,E,a)=>(pe>>>0)+(Ie>>>0)+(E>>>0)+(a>>>0);O.add4L=X;const Q=(pe,Ie,E,a,f)=>Ie+E+a+f+(pe/2**32|0)|0;O.add4H=Q;const oe=(pe,Ie,E,a,f)=>(pe>>>0)+(Ie>>>0)+(E>>>0)+(a>>>0)+(f>>>0);O.add5L=oe;const ne=(pe,Ie,E,a,f,l)=>Ie+E+a+f+l+(pe/2**32|0)|0;O.add5H=ne,O.default={fromBig:H,split:N,toBig:G,shrSH:v,shrSL:B,rotrSH:_,rotrSL:T,rotrBH:D,rotrBL:$,rotr32H:M,rotr32L:F,rotlSH:k,rotlSL:j,rotlBH:Z,rotlBL:q,add:W,add3L:K,add3H:J,add4L:X,add4H:Q,add5H:ne,add5L:oe}},89948:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.crypto=void 0,O.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},57334:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.hkdf=O.expand=O.extract=void 0;const C=I(68578),H=I(96492),N=I(44882);function G(D,$,M){return(0,C.hash)(D),void 0===M&&(M=new Uint8Array(D.outputLen)),(0,N.hmac)(D,(0,H.toBytes)(M),(0,H.toBytes)($))}O.extract=G;const v=new Uint8Array([0]),B=new Uint8Array;function _(D,$,M,F=32){if((0,C.hash)(D),(0,C.number)(F),F>255*D.outputLen)throw new Error("Length should be <= 255*HashLen");const k=Math.ceil(F/D.outputLen);void 0===M&&(M=B);const j=new Uint8Array(k*D.outputLen),Z=N.hmac.create(D,$),q=Z._cloneInto(),W=new Uint8Array(Z.outputLen);for(let K=0;K<k;K++)v[0]=K+1,q.update(0===K?B:W).update(M).update(v).digestInto(W),j.set(W,D.outputLen*K),Z._cloneInto(q);return Z.destroy(),q.destroy(),W.fill(0),v.fill(0),j.slice(0,F)}O.expand=_,O.hkdf=(D,$,M,F,k)=>_(D,G(D,$,M),F,k)},44882:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.hmac=O.HMAC=void 0;const C=I(68578),H=I(96492);class N extends H.Hash{constructor(B,_){super(),this.finished=!1,this.destroyed=!1,(0,C.hash)(B);const T=(0,H.toBytes)(_);if(this.iHash=B.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const D=this.blockLen,$=new Uint8Array(D);$.set(T.length>D?B.create().update(T).digest():T);for(let M=0;M<$.length;M++)$[M]^=54;this.iHash.update($),this.oHash=B.create();for(let M=0;M<$.length;M++)$[M]^=106;this.oHash.update($),$.fill(0)}update(B){return(0,C.exists)(this),this.iHash.update(B),this}digestInto(B){(0,C.exists)(this),(0,C.bytes)(B,this.outputLen),this.finished=!0,this.iHash.digestInto(B),this.oHash.update(B),this.oHash.digestInto(B),this.destroy()}digest(){const B=new Uint8Array(this.oHash.outputLen);return this.digestInto(B),B}_cloneInto(B){B||(B=Object.create(Object.getPrototypeOf(this),{}));const{oHash:_,iHash:T,finished:D,destroyed:$,blockLen:M,outputLen:F}=this;return B.finished=D,B.destroyed=$,B.blockLen=M,B.outputLen=F,B.oHash=_._cloneInto(B.oHash),B.iHash=T._cloneInto(B.iHash),B}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}O.HMAC=N,O.hmac=(v,B,_)=>new N(v,B).update(_).digest(),O.hmac.create=(v,B)=>new N(v,B)},1806:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.sha224=O.sha256=void 0;const C=I(25724),H=I(96492),N=($,M,F)=>$&M^~$&F,G=($,M,F)=>$&M^$&F^M&F,v=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),B=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_=new Uint32Array(64);class T extends C.SHA2{constructor(){super(64,32,8,!1),this.A=0|B[0],this.B=0|B[1],this.C=0|B[2],this.D=0|B[3],this.E=0|B[4],this.F=0|B[5],this.G=0|B[6],this.H=0|B[7]}get(){const{A:M,B:F,C:k,D:j,E:Z,F:q,G:W,H:K}=this;return[M,F,k,j,Z,q,W,K]}set(M,F,k,j,Z,q,W,K){this.A=0|M,this.B=0|F,this.C=0|k,this.D=0|j,this.E=0|Z,this.F=0|q,this.G=0|W,this.H=0|K}process(M,F){for(let Q=0;Q<16;Q++,F+=4)_[Q]=M.getUint32(F,!1);for(let Q=16;Q<64;Q++){const oe=_[Q-15],ne=_[Q-2],me=(0,H.rotr)(oe,7)^(0,H.rotr)(oe,18)^oe>>>3,pe=(0,H.rotr)(ne,17)^(0,H.rotr)(ne,19)^ne>>>10;_[Q]=pe+_[Q-7]+me+_[Q-16]|0}let{A:k,B:j,C:Z,D:q,E:W,F:K,G:J,H:X}=this;for(let Q=0;Q<64;Q++){const ne=X+((0,H.rotr)(W,6)^(0,H.rotr)(W,11)^(0,H.rotr)(W,25))+N(W,K,J)+v[Q]+_[Q]|0,pe=((0,H.rotr)(k,2)^(0,H.rotr)(k,13)^(0,H.rotr)(k,22))+G(k,j,Z)|0;X=J,J=K,K=W,W=q+ne|0,q=Z,Z=j,j=k,k=ne+pe|0}k=k+this.A|0,j=j+this.B|0,Z=Z+this.C|0,q=q+this.D|0,W=W+this.E|0,K=K+this.F|0,J=J+this.G|0,X=X+this.H|0,this.set(k,j,Z,q,W,K,J,X)}roundClean(){_.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class D extends T{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}O.sha256=(0,H.wrapConstructor)(()=>new T),O.sha224=(0,H.wrapConstructor)(()=>new D)},44207:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.sha384=O.sha512_256=O.sha512_224=O.sha512=O.SHA512=void 0;const C=I(25724),H=I(35059),N=I(96492),[G,v]=H.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(F=>BigInt(F))),B=new Uint32Array(80),_=new Uint32Array(80);class T extends C.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:k,Al:j,Bh:Z,Bl:q,Ch:W,Cl:K,Dh:J,Dl:X,Eh:Q,El:oe,Fh:ne,Fl:me,Gh:pe,Gl:Ie,Hh:E,Hl:a}=this;return[k,j,Z,q,W,K,J,X,Q,oe,ne,me,pe,Ie,E,a]}set(k,j,Z,q,W,K,J,X,Q,oe,ne,me,pe,Ie,E,a){this.Ah=0|k,this.Al=0|j,this.Bh=0|Z,this.Bl=0|q,this.Ch=0|W,this.Cl=0|K,this.Dh=0|J,this.Dl=0|X,this.Eh=0|Q,this.El=0|oe,this.Fh=0|ne,this.Fl=0|me,this.Gh=0|pe,this.Gl=0|Ie,this.Hh=0|E,this.Hl=0|a}process(k,j){for(let h=0;h<16;h++,j+=4)B[h]=k.getUint32(j),_[h]=k.getUint32(j+=4);for(let h=16;h<80;h++){const g=0|B[h-15],x=0|_[h-15],P=H.default.rotrSH(g,x,1)^H.default.rotrSH(g,x,8)^H.default.shrSH(g,x,7),m=H.default.rotrSL(g,x,1)^H.default.rotrSL(g,x,8)^H.default.shrSL(g,x,7),d=0|B[h-2],p=0|_[h-2],V=H.default.rotrSH(d,p,19)^H.default.rotrBH(d,p,61)^H.default.shrSH(d,p,6),L=H.default.rotrSL(d,p,19)^H.default.rotrBL(d,p,61)^H.default.shrSL(d,p,6),Y=H.default.add4L(m,L,_[h-7],_[h-16]),le=H.default.add4H(Y,P,V,B[h-7],B[h-16]);B[h]=0|le,_[h]=0|Y}let{Ah:Z,Al:q,Bh:W,Bl:K,Ch:J,Cl:X,Dh:Q,Dl:oe,Eh:ne,El:me,Fh:pe,Fl:Ie,Gh:E,Gl:a,Hh:f,Hl:l}=this;for(let h=0;h<80;h++){const g=H.default.rotrSH(ne,me,14)^H.default.rotrSH(ne,me,18)^H.default.rotrBH(ne,me,41),x=H.default.rotrSL(ne,me,14)^H.default.rotrSL(ne,me,18)^H.default.rotrBL(ne,me,41),P=ne&pe^~ne&E,d=H.default.add5L(l,x,me&Ie^~me&a,v[h],_[h]),p=H.default.add5H(d,f,g,P,G[h],B[h]),V=0|d,L=H.default.rotrSH(Z,q,28)^H.default.rotrBH(Z,q,34)^H.default.rotrBH(Z,q,39),Y=H.default.rotrSL(Z,q,28)^H.default.rotrBL(Z,q,34)^H.default.rotrBL(Z,q,39),le=Z&W^Z&J^W&J,Se=q&K^q&X^K&X;f=0|E,l=0|a,E=0|pe,a=0|Ie,pe=0|ne,Ie=0|me,({h:ne,l:me}=H.default.add(0|Q,0|oe,0|p,0|V)),Q=0|J,oe=0|X,J=0|W,X=0|K,W=0|Z,K=0|q;const Oe=H.default.add3L(V,Y,Se);Z=H.default.add3H(Oe,p,L,le),q=0|Oe}({h:Z,l:q}=H.default.add(0|this.Ah,0|this.Al,0|Z,0|q)),({h:W,l:K}=H.default.add(0|this.Bh,0|this.Bl,0|W,0|K)),({h:J,l:X}=H.default.add(0|this.Ch,0|this.Cl,0|J,0|X)),({h:Q,l:oe}=H.default.add(0|this.Dh,0|this.Dl,0|Q,0|oe)),({h:ne,l:me}=H.default.add(0|this.Eh,0|this.El,0|ne,0|me)),({h:pe,l:Ie}=H.default.add(0|this.Fh,0|this.Fl,0|pe,0|Ie)),({h:E,l:a}=H.default.add(0|this.Gh,0|this.Gl,0|E,0|a)),({h:f,l}=H.default.add(0|this.Hh,0|this.Hl,0|f,0|l)),this.set(Z,q,W,K,J,X,Q,oe,ne,me,pe,Ie,E,a,f,l)}roundClean(){B.fill(0),_.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}O.SHA512=T;class D extends T{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class $ extends T{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class M extends T{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}O.sha512=(0,N.wrapConstructor)(()=>new T),O.sha512_224=(0,N.wrapConstructor)(()=>new D),O.sha512_256=(0,N.wrapConstructor)(()=>new $),O.sha384=(0,N.wrapConstructor)(()=>new M)},96492:(xe,O,I)=>{"use strict";var C=I(29293).default;Object.defineProperty(O,"__esModule",{value:!0}),O.randomBytes=O.wrapXOFConstructorWithOpts=O.wrapConstructorWithOpts=O.wrapConstructor=O.checkOpts=O.Hash=O.concatBytes=O.toBytes=O.utf8ToBytes=O.asyncLoop=O.nextTick=O.hexToBytes=O.bytesToHex=O.isLE=O.rotr=O.createView=O.u32=O.u8=void 0;const H=I(89948);function v(Ie){return Ie instanceof Uint8Array||null!=Ie&&"object"==typeof Ie&&"Uint8Array"===Ie.constructor.name}if(O.u8=Ie=>new Uint8Array(Ie.buffer,Ie.byteOffset,Ie.byteLength),O.u32=Ie=>new Uint32Array(Ie.buffer,Ie.byteOffset,Math.floor(Ie.byteLength/4)),O.createView=Ie=>new DataView(Ie.buffer,Ie.byteOffset,Ie.byteLength),O.rotr=(Ie,E)=>Ie<<32-E|Ie>>>E,O.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!O.isLE)throw new Error("Non little-endian hardware is not supported");const T=Array.from({length:256},(Ie,E)=>E.toString(16).padStart(2,"0"));O.bytesToHex=function D(Ie){if(!v(Ie))throw new Error("Uint8Array expected");let E="";for(let a=0;a<Ie.length;a++)E+=T[Ie[a]];return E};const $__0=48,$__9=57,$__A=65,$__F=70,$__a=97,$__f=102;function M(Ie){return Ie>=$__0&&Ie<=$__9?Ie-$__0:Ie>=$__A&&Ie<=$__F?Ie-($__A-10):Ie>=$__a&&Ie<=$__f?Ie-($__a-10):void 0}function Z(){return(Z=C(function*(Ie,E,a){let f=Date.now();for(let l=0;l<Ie;l++){a(l);const h=Date.now()-f;h>=0&&h<E||(yield(0,O.nextTick)(),f+=h)}})).apply(this,arguments)}function q(Ie){if("string"!=typeof Ie)throw new Error("utf8ToBytes expected string, got "+typeof Ie);return new Uint8Array((new TextEncoder).encode(Ie))}function W(Ie){if("string"==typeof Ie&&(Ie=q(Ie)),!v(Ie))throw new Error("expected Uint8Array, got "+typeof Ie);return Ie}O.hexToBytes=function F(Ie){if("string"!=typeof Ie)throw new Error("hex string expected, got "+typeof Ie);const E=Ie.length,a=E/2;if(E%2)throw new Error("padded hex string expected, got unpadded hex of length "+E);const f=new Uint8Array(a);for(let l=0,h=0;l<a;l++,h+=2){const g=M(Ie.charCodeAt(h)),x=M(Ie.charCodeAt(h+1));if(void 0===g||void 0===x)throw new Error('hex string expected, got non-hex character "'+(Ie[h]+Ie[h+1])+'" at index '+h);f[l]=16*g+x}return f},O.nextTick=function(){var Ie=C(function*(){});return function(){return Ie.apply(this,arguments)}}(),O.asyncLoop=function j(Ie,E,a){return Z.apply(this,arguments)},O.utf8ToBytes=q,O.toBytes=W,O.concatBytes=function K(...Ie){let E=0;for(let f=0;f<Ie.length;f++){const l=Ie[f];if(!v(l))throw new Error("Uint8Array expected");E+=l.length}const a=new Uint8Array(E);for(let f=0,l=0;f<Ie.length;f++){const h=Ie[f];a.set(h,l),l+=h.length}return a},O.Hash=class J{clone(){return this._cloneInto()}};const X={}.toString;O.checkOpts=function Q(Ie,E){if(void 0!==E&&"[object Object]"!==X.call(E))throw new Error("Options should be object or undefined");return Object.assign(Ie,E)},O.wrapConstructor=function oe(Ie){const E=f=>Ie().update(W(f)).digest(),a=Ie();return E.outputLen=a.outputLen,E.blockLen=a.blockLen,E.create=()=>Ie(),E},O.wrapConstructorWithOpts=function ne(Ie){const E=(f,l)=>Ie(l).update(W(f)).digest(),a=Ie({});return E.outputLen=a.outputLen,E.blockLen=a.blockLen,E.create=f=>Ie(f),E},O.wrapXOFConstructorWithOpts=function me(Ie){const E=(f,l)=>Ie(l).update(W(f)).digest(),a=Ie({});return E.outputLen=a.outputLen,E.blockLen=a.blockLen,E.create=f=>Ie(f),E},O.randomBytes=function pe(Ie=32){if(H.crypto&&"function"==typeof H.crypto.getRandomValues)return H.crypto.getRandomValues(new Uint8Array(Ie));throw new Error("crypto.getRandomValues must be defined")}},20844:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.MissingRefError=O.ValidationError=O.CodeGen=O.Name=O.nil=O.stringify=O.str=O._=O.KeywordCxt=void 0;const C=I(35419),H=I(98496),N=I(86980),G=I(87577),v="https://json-schema.org/draft/2020-12/schema";class B extends C.default{constructor(F={}){super({...F,dynamicRef:!0,next:!0,unevaluated:!0})}_addVocabularies(){super._addVocabularies(),H.default.forEach(F=>this.addVocabulary(F)),this.opts.discriminator&&this.addKeyword(N.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema();const{$data:F,meta:k}=this.opts;k&&(G.default.call(this,F),this.refs["http://json-schema.org/schema"]=v)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(v)?v:void 0)}}xe.exports=O=B,Object.defineProperty(O,"__esModule",{value:!0}),O.default=B;var _=I(40339);Object.defineProperty(O,"KeywordCxt",{enumerable:!0,get:function(){return _.KeywordCxt}});var T=I(1038);Object.defineProperty(O,"_",{enumerable:!0,get:function(){return T._}}),Object.defineProperty(O,"str",{enumerable:!0,get:function(){return T.str}}),Object.defineProperty(O,"stringify",{enumerable:!0,get:function(){return T.stringify}}),Object.defineProperty(O,"nil",{enumerable:!0,get:function(){return T.nil}}),Object.defineProperty(O,"Name",{enumerable:!0,get:function(){return T.Name}}),Object.defineProperty(O,"CodeGen",{enumerable:!0,get:function(){return T.CodeGen}});var D=I(42467);Object.defineProperty(O,"ValidationError",{enumerable:!0,get:function(){return D.default}});var $=I(26288);Object.defineProperty(O,"MissingRefError",{enumerable:!0,get:function(){return $.default}})},33337:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.regexpCode=O.getEsmExportName=O.getProperty=O.safeStringify=O.stringify=O.strConcat=O.addCodeArg=O.str=O._=O.nil=O._Code=O.Name=O.IDENTIFIER=O._CodeOrName=void 0;class I{}O._CodeOrName=I,O.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class C extends I{constructor(W){if(super(),!O.IDENTIFIER.test(W))throw new Error("CodeGen: name must be a valid identifier");this.str=W}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}O.Name=C;class H extends I{constructor(W){super(),this._items="string"==typeof W?[W]:W}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const W=this._items[0];return""===W||'""'===W}get str(){var W;return null!==(W=this._str)&&void 0!==W?W:this._str=this._items.reduce((K,J)=>`${K}${J}`,"")}get names(){var W;return null!==(W=this._names)&&void 0!==W?W:this._names=this._items.reduce((K,J)=>(J instanceof C&&(K[J.str]=(K[J.str]||0)+1),K),{})}}function N(q,...W){const K=[q[0]];let J=0;for(;J<W.length;)B(K,W[J]),K.push(q[++J]);return new H(K)}O._Code=H,O.nil=new H(""),O._=N;const G=new H("+");function v(q,...W){const K=[F(q[0])];let J=0;for(;J<W.length;)K.push(G),B(K,W[J]),K.push(G,F(q[++J]));return function _(q){let W=1;for(;W<q.length-1;){if(q[W]===G){const K=T(q[W-1],q[W+1]);if(void 0!==K){q.splice(W-1,3,K);continue}q[W++]="+"}W++}}(K),new H(K)}function B(q,W){W instanceof H?q.push(...W._items):q.push(W instanceof C?W:function $(q){return"number"==typeof q||"boolean"==typeof q||null===q?q:F(Array.isArray(q)?q.join(","):q)}(W))}function T(q,W){return'""'===W?q:'""'===q?W:"string"==typeof q?W instanceof C||'"'!==q[q.length-1]?void 0:"string"!=typeof W?`${q.slice(0,-1)}${W}"`:'"'===W[0]?q.slice(0,-1)+W.slice(1):void 0:"string"!=typeof W||'"'!==W[0]||q instanceof C?void 0:`"${q}${W.slice(1)}`}function F(q){return JSON.stringify(q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}O.str=v,O.addCodeArg=B,O.strConcat=function D(q,W){return W.emptyStr()?q:q.emptyStr()?W:v`${q}${W}`},O.stringify=function M(q){return new H(F(q))},O.safeStringify=F,O.getProperty=function k(q){return"string"==typeof q&&O.IDENTIFIER.test(q)?new H(`.${q}`):N`[${q}]`},O.getEsmExportName=function j(q){if("string"==typeof q&&O.IDENTIFIER.test(q))return new H(`${q}`);throw new Error(`CodeGen: invalid export name: ${q}, use explicit $id name mapping`)},O.regexpCode=function Z(q){return new H(q.toString())}},1038:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.or=O.and=O.not=O.CodeGen=O.operators=O.varKinds=O.ValueScopeName=O.ValueScope=O.Scope=O.Name=O.regexpCode=O.stringify=O.getProperty=O.nil=O.strConcat=O.str=O._=void 0;const C=I(33337),H=I(85934);var N=I(33337);Object.defineProperty(O,"_",{enumerable:!0,get:function(){return N._}}),Object.defineProperty(O,"str",{enumerable:!0,get:function(){return N.str}}),Object.defineProperty(O,"strConcat",{enumerable:!0,get:function(){return N.strConcat}}),Object.defineProperty(O,"nil",{enumerable:!0,get:function(){return N.nil}}),Object.defineProperty(O,"getProperty",{enumerable:!0,get:function(){return N.getProperty}}),Object.defineProperty(O,"stringify",{enumerable:!0,get:function(){return N.stringify}}),Object.defineProperty(O,"regexpCode",{enumerable:!0,get:function(){return N.regexpCode}}),Object.defineProperty(O,"Name",{enumerable:!0,get:function(){return N.Name}});var G=I(85934);Object.defineProperty(O,"Scope",{enumerable:!0,get:function(){return G.Scope}}),Object.defineProperty(O,"ValueScope",{enumerable:!0,get:function(){return G.ValueScope}}),Object.defineProperty(O,"ValueScopeName",{enumerable:!0,get:function(){return G.ValueScopeName}}),Object.defineProperty(O,"varKinds",{enumerable:!0,get:function(){return G.varKinds}}),O.operators={GT:new C._Code(">"),GTE:new C._Code(">="),LT:new C._Code("<"),LTE:new C._Code("<="),EQ:new C._Code("==="),NEQ:new C._Code("!=="),NOT:new C._Code("!"),OR:new C._Code("||"),AND:new C._Code("&&"),ADD:new C._Code("+")};class v{optimizeNodes(){return this}optimizeNames(Y,le){return this}}class B extends v{constructor(Y,le,Se){super(),this.varKind=Y,this.name=le,this.rhs=Se}render({es5:Y,_n:le}){return`${Y?H.varKinds.var:this.varKind} ${this.name}${void 0===this.rhs?"":` = ${this.rhs}`};`+le}optimizeNames(Y,le){if(Y[this.name.str])return this.rhs&&(this.rhs=l(this.rhs,Y,le)),this}get names(){return this.rhs instanceof C._CodeOrName?this.rhs.names:{}}}class _ extends v{constructor(Y,le,Se){super(),this.lhs=Y,this.rhs=le,this.sideEffects=Se}render({_n:Y}){return`${this.lhs} = ${this.rhs};`+Y}optimizeNames(Y,le){if(!(this.lhs instanceof C.Name)||Y[this.lhs.str]||this.sideEffects)return this.rhs=l(this.rhs,Y,le),this}get names(){return f(this.lhs instanceof C.Name?{}:{...this.lhs.names},this.rhs)}}class T extends _{constructor(Y,le,Se,Oe){super(Y,Se,Oe),this.op=le}render({_n:Y}){return`${this.lhs} ${this.op}= ${this.rhs};`+Y}}class D extends v{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`${this.label}:`+Y}}class $ extends v{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`break${this.label?` ${this.label}`:""};`+Y}}class M extends v{constructor(Y){super(),this.error=Y}render({_n:Y}){return`throw ${this.error};`+Y}get names(){return this.error.names}}class F extends v{constructor(Y){super(),this.code=Y}render({_n:Y}){return`${this.code};`+Y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Y,le){return this.code=l(this.code,Y,le),this}get names(){return this.code instanceof C._CodeOrName?this.code.names:{}}}class k extends v{constructor(Y=[]){super(),this.nodes=Y}render(Y){return this.nodes.reduce((le,Se)=>le+Se.render(Y),"")}optimizeNodes(){const{nodes:Y}=this;let le=Y.length;for(;le--;){const Se=Y[le].optimizeNodes();Array.isArray(Se)?Y.splice(le,1,...Se):Se?Y[le]=Se:Y.splice(le,1)}return Y.length>0?this:void 0}optimizeNames(Y,le){const{nodes:Se}=this;let Oe=Se.length;for(;Oe--;){const Ve=Se[Oe];Ve.optimizeNames(Y,le)||(h(Y,Ve.names),Se.splice(Oe,1))}return Se.length>0?this:void 0}get names(){return this.nodes.reduce((Y,le)=>a(Y,le.names),{})}}class j extends k{render(Y){return"{"+Y._n+super.render(Y)+"}"+Y._n}}class Z extends k{}let q=(()=>{class L extends j{}return L.kind="else",L})(),W=(()=>{class L extends j{constructor(le,Se){super(Se),this.condition=le}render(le){let Se=`if(${this.condition})`+super.render(le);return this.else&&(Se+="else "+this.else.render(le)),Se}optimizeNodes(){super.optimizeNodes();const le=this.condition;if(!0===le)return this.nodes;let Se=this.else;if(Se){const Oe=Se.optimizeNodes();Se=this.else=Array.isArray(Oe)?new q(Oe):Oe}return Se?!1===le?Se instanceof L?Se:Se.nodes:this.nodes.length?this:new L(g(le),Se instanceof L?[Se]:Se.nodes):!1!==le&&this.nodes.length?this:void 0}optimizeNames(le,Se){var Oe;if(this.else=null===(Oe=this.else)||void 0===Oe?void 0:Oe.optimizeNames(le,Se),super.optimizeNames(le,Se)||this.else)return this.condition=l(this.condition,le,Se),this}get names(){const le=super.names;return f(le,this.condition),this.else&&a(le,this.else.names),le}}return L.kind="if",L})(),K=(()=>{class L extends j{}return L.kind="for",L})();class J extends K{constructor(Y){super(),this.iteration=Y}render(Y){return`for(${this.iteration})`+super.render(Y)}optimizeNames(Y,le){if(super.optimizeNames(Y,le))return this.iteration=l(this.iteration,Y,le),this}get names(){return a(super.names,this.iteration.names)}}class X extends K{constructor(Y,le,Se,Oe){super(),this.varKind=Y,this.name=le,this.from=Se,this.to=Oe}render(Y){const le=Y.es5?H.varKinds.var:this.varKind,{name:Se,from:Oe,to:Ve}=this;return`for(${le} ${Se}=${Oe}; ${Se}<${Ve}; ${Se}++)`+super.render(Y)}get names(){const Y=f(super.names,this.from);return f(Y,this.to)}}class Q extends K{constructor(Y,le,Se,Oe){super(),this.loop=Y,this.varKind=le,this.name=Se,this.iterable=Oe}render(Y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Y)}optimizeNames(Y,le){if(super.optimizeNames(Y,le))return this.iterable=l(this.iterable,Y,le),this}get names(){return a(super.names,this.iterable.names)}}let oe=(()=>{class L extends j{constructor(le,Se,Oe){super(),this.name=le,this.args=Se,this.async=Oe}render(le){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(le)}}return L.kind="func",L})(),ne=(()=>{class L extends k{render(le){return"return "+super.render(le)}}return L.kind="return",L})();class me extends j{render(Y){let le="try"+super.render(Y);return this.catch&&(le+=this.catch.render(Y)),this.finally&&(le+=this.finally.render(Y)),le}optimizeNodes(){var Y,le;return super.optimizeNodes(),null===(Y=this.catch)||void 0===Y||Y.optimizeNodes(),null===(le=this.finally)||void 0===le||le.optimizeNodes(),this}optimizeNames(Y,le){var Se,Oe;return super.optimizeNames(Y,le),null===(Se=this.catch)||void 0===Se||Se.optimizeNames(Y,le),null===(Oe=this.finally)||void 0===Oe||Oe.optimizeNames(Y,le),this}get names(){const Y=super.names;return this.catch&&a(Y,this.catch.names),this.finally&&a(Y,this.finally.names),Y}}let pe=(()=>{class L extends j{constructor(le){super(),this.error=le}render(le){return`catch(${this.error})`+super.render(le)}}return L.kind="catch",L})(),Ie=(()=>{class L extends j{render(le){return"finally"+super.render(le)}}return L.kind="finally",L})();function a(L,Y){for(const le in Y)L[le]=(L[le]||0)+(Y[le]||0);return L}function f(L,Y){return Y instanceof C._CodeOrName?a(L,Y.names):L}function l(L,Y,le){return L instanceof C.Name?Se(L):function Oe(Ve){return Ve instanceof C._Code&&Ve._items.some(Re=>Re instanceof C.Name&&1===Y[Re.str]&&void 0!==le[Re.str])}(L)?new C._Code(L._items.reduce((Ve,Re)=>(Re instanceof C.Name&&(Re=Se(Re)),Re instanceof C._Code?Ve.push(...Re._items):Ve.push(Re),Ve),[])):L;function Se(Ve){const Re=le[Ve.str];return void 0===Re||1!==Y[Ve.str]?Ve:(delete Y[Ve.str],Re)}}function h(L,Y){for(const le in Y)L[le]=(L[le]||0)-(Y[le]||0)}function g(L){return"boolean"==typeof L||"number"==typeof L||null===L?!L:C._`!${V(L)}`}O.CodeGen=class E{constructor(Y,le={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...le,_n:le.lines?"\n":""},this._extScope=Y,this._scope=new H.Scope({parent:Y}),this._nodes=[new Z]}toString(){return this._root.render(this.opts)}name(Y){return this._scope.name(Y)}scopeName(Y){return this._extScope.name(Y)}scopeValue(Y,le){const Se=this._extScope.value(Y,le);return(this._values[Se.prefix]||(this._values[Se.prefix]=new Set)).add(Se),Se}getScopeValue(Y,le){return this._extScope.getValue(Y,le)}scopeRefs(Y){return this._extScope.scopeRefs(Y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Y,le,Se,Oe){const Ve=this._scope.toName(le);return void 0!==Se&&Oe&&(this._constants[Ve.str]=Se),this._leafNode(new B(Y,Ve,Se)),Ve}const(Y,le,Se){return this._def(H.varKinds.const,Y,le,Se)}let(Y,le,Se){return this._def(H.varKinds.let,Y,le,Se)}var(Y,le,Se){return this._def(H.varKinds.var,Y,le,Se)}assign(Y,le,Se){return this._leafNode(new _(Y,le,Se))}add(Y,le){return this._leafNode(new T(Y,O.operators.ADD,le))}code(Y){return"function"==typeof Y?Y():Y!==C.nil&&this._leafNode(new F(Y)),this}object(...Y){const le=["{"];for(const[Se,Oe]of Y)le.length>1&&le.push(","),le.push(Se),(Se!==Oe||this.opts.es5)&&(le.push(":"),(0,C.addCodeArg)(le,Oe));return le.push("}"),new C._Code(le)}if(Y,le,Se){if(this._blockNode(new W(Y)),le&&Se)this.code(le).else().code(Se).endIf();else if(le)this.code(le).endIf();else if(Se)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Y){return this._elseNode(new W(Y))}else(){return this._elseNode(new q)}endIf(){return this._endBlockNode(W,q)}_for(Y,le){return this._blockNode(Y),le&&this.code(le).endFor(),this}for(Y,le){return this._for(new J(Y),le)}forRange(Y,le,Se,Oe,Ve=(this.opts.es5?H.varKinds.var:H.varKinds.let)){const Re=this._scope.toName(Y);return this._for(new X(Ve,Re,le,Se),()=>Oe(Re))}forOf(Y,le,Se,Oe=H.varKinds.const){const Ve=this._scope.toName(Y);if(this.opts.es5){const Re=le instanceof C.Name?le:this.var("_arr",le);return this.forRange("_i",0,C._`${Re}.length`,ye=>{this.var(Ve,C._`${Re}[${ye}]`),Se(Ve)})}return this._for(new Q("of",Oe,Ve,le),()=>Se(Ve))}forIn(Y,le,Se,Oe=(this.opts.es5?H.varKinds.var:H.varKinds.const)){if(this.opts.ownProperties)return this.forOf(Y,C._`Object.keys(${le})`,Se);const Ve=this._scope.toName(Y);return this._for(new Q("in",Oe,Ve,le),()=>Se(Ve))}endFor(){return this._endBlockNode(K)}label(Y){return this._leafNode(new D(Y))}break(Y){return this._leafNode(new $(Y))}return(Y){const le=new ne;if(this._blockNode(le),this.code(Y),1!==le.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ne)}try(Y,le,Se){if(!le&&!Se)throw new Error('CodeGen: "try" without "catch" and "finally"');const Oe=new me;if(this._blockNode(Oe),this.code(Y),le){const Ve=this.name("e");this._currNode=Oe.catch=new pe(Ve),le(Ve)}return Se&&(this._currNode=Oe.finally=new Ie,this.code(Se)),this._endBlockNode(pe,Ie)}throw(Y){return this._leafNode(new M(Y))}block(Y,le){return this._blockStarts.push(this._nodes.length),Y&&this.code(Y).endBlock(le),this}endBlock(Y){const le=this._blockStarts.pop();if(void 0===le)throw new Error("CodeGen: not in self-balancing block");const Se=this._nodes.length-le;if(Se<0||void 0!==Y&&Se!==Y)throw new Error(`CodeGen: wrong number of nodes: ${Se} vs ${Y} expected`);return this._nodes.length=le,this}func(Y,le=C.nil,Se,Oe){return this._blockNode(new oe(Y,le,Se)),Oe&&this.code(Oe).endFunc(),this}endFunc(){return this._endBlockNode(oe)}optimize(Y=1){for(;Y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Y){return this._currNode.nodes.push(Y),this}_blockNode(Y){this._currNode.nodes.push(Y),this._nodes.push(Y)}_endBlockNode(Y,le){const Se=this._currNode;if(Se instanceof Y||le&&Se instanceof le)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${le?`${Y.kind}/${le.kind}`:Y.kind}"`)}_elseNode(Y){const le=this._currNode;if(!(le instanceof W))throw new Error('CodeGen: "else" without "if"');return this._currNode=le.else=Y,this}get _root(){return this._nodes[0]}get _currNode(){const Y=this._nodes;return Y[Y.length-1]}set _currNode(Y){const le=this._nodes;le[le.length-1]=Y}},O.not=g;const x=p(O.operators.AND);O.and=function P(...L){return L.reduce(x)};const m=p(O.operators.OR);function p(L){return(Y,le)=>Y===C.nil?le:le===C.nil?Y:C._`${V(Y)} ${L} ${V(le)}`}function V(L){return L instanceof C.Name?L:C._`(${L})`}O.or=function d(...L){return L.reduce(m)}},85934:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ValueScope=O.ValueScopeName=O.Scope=O.varKinds=O.UsedValueState=void 0;const C=I(33337);class H extends Error{constructor(D){super(`CodeGen: "code" for ${D} not defined`),this.value=D.value}}var N,T;(T=N=O.UsedValueState||(O.UsedValueState={}))[T.Started=0]="Started",T[T.Completed=1]="Completed",O.varKinds={const:new C.Name("const"),let:new C.Name("let"),var:new C.Name("var")};class G{constructor({prefixes:D,parent:$}={}){this._names={},this._prefixes=D,this._parent=$}toName(D){return D instanceof C.Name?D:this.name(D)}name(D){return new C.Name(this._newName(D))}_newName(D){return`${D}${(this._names[D]||this._nameGroup(D)).index++}`}_nameGroup(D){var $,M;if(null!==(M=null===($=this._parent)||void 0===$?void 0:$._prefixes)&&void 0!==M&&M.has(D)||this._prefixes&&!this._prefixes.has(D))throw new Error(`CodeGen: prefix "${D}" is not allowed in this scope`);return this._names[D]={prefix:D,index:0}}}O.Scope=G;class v extends C.Name{constructor(D,$){super($),this.prefix=D}setValue(D,{property:$,itemIndex:M}){this.value=D,this.scopePath=C._`.${new C.Name($)}[${M}]`}}O.ValueScopeName=v;const B=C._`\n`;O.ValueScope=class _ extends G{constructor(D){super(D),this._values={},this._scope=D.scope,this.opts={...D,_n:D.lines?B:C.nil}}get(){return this._scope}name(D){return new v(D,this._newName(D))}value(D,$){var M;if(void 0===$.ref)throw new Error("CodeGen: ref must be passed in value");const F=this.toName(D),{prefix:k}=F,j=null!==(M=$.key)&&void 0!==M?M:$.ref;let Z=this._values[k];if(Z){const K=Z.get(j);if(K)return K}else Z=this._values[k]=new Map;Z.set(j,F);const q=this._scope[k]||(this._scope[k]=[]),W=q.length;return q[W]=$.ref,F.setValue($,{property:k,itemIndex:W}),F}getValue(D,$){const M=this._values[D];if(M)return M.get($)}scopeRefs(D,$=this._values){return this._reduceValues($,M=>{if(void 0===M.scopePath)throw new Error(`CodeGen: name "${M}" has no value`);return C._`${D}${M.scopePath}`})}scopeCode(D=this._values,$,M){return this._reduceValues(D,F=>{if(void 0===F.value)throw new Error(`CodeGen: name "${F}" has no value`);return F.value.code},$,M)}_reduceValues(D,$,M={},F){let k=C.nil;for(const j in D){const Z=D[j];if(!Z)continue;const q=M[j]=M[j]||new Map;Z.forEach(W=>{if(q.has(W))return;q.set(W,N.Started);let K=$(W);if(K)k=C._`${k}${this.opts.es5?O.varKinds.var:O.varKinds.const} ${W} = ${K};${this.opts._n}`;else{if(!(K=F?.(W)))throw new H(W);k=C._`${k}${K}${this.opts._n}`}q.set(W,N.Completed)})}return k}}},53421:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.extendErrors=O.resetErrorsCount=O.reportExtraError=O.reportError=O.keyword$DataError=O.keywordError=void 0;const C=I(1038),H=I(27006),N=I(23432);function T(q,W){const K=q.const("err",W);q.if(C._`${N.default.vErrors} === null`,()=>q.assign(N.default.vErrors,C._`[${K}]`),C._`${N.default.vErrors}.push(${K})`),q.code(C._`${N.default.errors}++`)}function D(q,W){const{gen:K,validateName:J,schemaEnv:X}=q;X.$async?K.throw(C._`new ${q.ValidationError}(${W})`):(K.assign(C._`${J}.errors`,W),K.return(!1))}O.keywordError={message:({keyword:q})=>C.str`must pass "${q}" keyword validation`},O.keyword$DataError={message:({keyword:q,schemaType:W})=>W?C.str`"${q}" keyword must be ${W} ($data)`:C.str`"${q}" keyword is invalid ($data)`},O.reportError=function G(q,W=O.keywordError,K,J){const{it:X}=q,{gen:Q,compositeRule:oe,allErrors:ne}=X,me=M(q,W,K);J??(oe||ne)?T(Q,me):D(X,C._`[${me}]`)},O.reportExtraError=function v(q,W=O.keywordError,K){const{it:J}=q,{gen:X,compositeRule:Q,allErrors:oe}=J;T(X,M(q,W,K)),Q||oe||D(J,N.default.vErrors)},O.resetErrorsCount=function B(q,W){q.assign(N.default.errors,W),q.if(C._`${N.default.vErrors} !== null`,()=>q.if(W,()=>q.assign(C._`${N.default.vErrors}.length`,W),()=>q.assign(N.default.vErrors,null)))},O.extendErrors=function _({gen:q,keyword:W,schemaValue:K,data:J,errsCount:X,it:Q}){if(void 0===X)throw new Error("ajv implementation error");const oe=q.name("err");q.forRange("i",X,N.default.errors,ne=>{q.const(oe,C._`${N.default.vErrors}[${ne}]`),q.if(C._`${oe}.instancePath === undefined`,()=>q.assign(C._`${oe}.instancePath`,(0,C.strConcat)(N.default.instancePath,Q.errorPath))),q.assign(C._`${oe}.schemaPath`,C.str`${Q.errSchemaPath}/${W}`),Q.opts.verbose&&(q.assign(C._`${oe}.schema`,K),q.assign(C._`${oe}.data`,J))})};const $={keyword:new C.Name("keyword"),schemaPath:new C.Name("schemaPath"),params:new C.Name("params"),propertyName:new C.Name("propertyName"),message:new C.Name("message"),schema:new C.Name("schema"),parentSchema:new C.Name("parentSchema")};function M(q,W,K){const{createErrors:J}=q.it;return!1===J?C._`{}`:function F(q,W,K={}){const{gen:J,it:X}=q,Q=[k(X,K),j(q,K)];return function Z(q,{params:W,message:K},J){const{keyword:X,data:Q,schemaValue:oe,it:ne}=q,{opts:me,propertyName:pe,topSchemaRef:Ie,schemaPath:E}=ne;J.push([$.keyword,X],[$.params,"function"==typeof W?W(q):W||C._`{}`]),me.messages&&J.push([$.message,"function"==typeof K?K(q):K]),me.verbose&&J.push([$.schema,oe],[$.parentSchema,C._`${Ie}${E}`],[N.default.data,Q]),pe&&J.push([$.propertyName,pe])}(q,W,Q),J.object(...Q)}(q,W,K)}function k({errorPath:q},{instancePath:W}){const K=W?C.str`${q}${(0,H.getErrorPath)(W,H.Type.Str)}`:q;return[N.default.instancePath,(0,C.strConcat)(N.default.instancePath,K)]}function j({keyword:q,it:{errSchemaPath:W}},{schemaPath:K,parentSchema:J}){let X=J?W:C.str`${W}/${q}`;return K&&(X=C.str`${X}${(0,H.getErrorPath)(K,H.Type.Str)}`),[$.schemaPath,X]}},97692:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.resolveSchema=O.getCompilingSchema=O.resolveRef=O.compileSchema=O.SchemaEnv=void 0;const C=I(1038),H=I(42467),N=I(23432),G=I(77172),v=I(27006),B=I(40339);class _{constructor(K){var J;let X;this.refs={},this.dynamicAnchors={},"object"==typeof K.schema&&(X=K.schema),this.schema=K.schema,this.schemaId=K.schemaId,this.root=K.root||this,this.baseId=null!==(J=K.baseId)&&void 0!==J?J:(0,G.normalizeId)(X?.[K.schemaId||"$id"]),this.schemaPath=K.schemaPath,this.localRefs=K.localRefs,this.meta=K.meta,this.$async=X?.$async,this.refs={}}}function T(W){const K=M.call(this,W);if(K)return K;const J=(0,G.getFullPath)(this.opts.uriResolver,W.root.baseId),{es5:X,lines:Q}=this.opts.code,{ownProperties:oe}=this.opts,ne=new C.CodeGen(this.scope,{es5:X,lines:Q,ownProperties:oe});let me;W.$async&&(me=ne.scopeValue("Error",{ref:H.default,code:C._`require("ajv/dist/runtime/validation_error").default`}));const pe=ne.scopeName("validate");W.validateName=pe;const Ie={gen:ne,allErrors:this.opts.allErrors,data:N.default.data,parentData:N.default.parentData,parentDataProperty:N.default.parentDataProperty,dataNames:[N.default.data],dataPathArr:[C.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:ne.scopeValue("schema",!0===this.opts.code.source?{ref:W.schema,code:(0,C.stringify)(W.schema)}:{ref:W.schema}),validateName:pe,ValidationError:me,schema:W.schema,schemaEnv:W,rootId:J,baseId:W.baseId||J,schemaPath:C.nil,errSchemaPath:W.schemaPath||(this.opts.jtd?"":"#"),errorPath:C._`""`,opts:this.opts,self:this};let E;try{this._compilations.add(W),(0,B.validateFunctionCode)(Ie),ne.optimize(this.opts.code.optimize);const a=ne.toString();E=`${ne.scopeRefs(N.default.scope)}return ${a}`,this.opts.code.process&&(E=this.opts.code.process(E,W));const l=new Function(`${N.default.self}`,`${N.default.scope}`,E)(this,this.scope.get());if(this.scope.value(pe,{ref:l}),l.errors=null,l.schema=W.schema,l.schemaEnv=W,W.$async&&(l.$async=!0),!0===this.opts.code.source&&(l.source={validateName:pe,validateCode:a,scopeValues:ne._values}),this.opts.unevaluated){const{props:h,items:g}=Ie;l.evaluated={props:h instanceof C.Name?void 0:h,items:g instanceof C.Name?void 0:g,dynamicProps:h instanceof C.Name,dynamicItems:g instanceof C.Name},l.source&&(l.source.evaluated=(0,C.stringify)(l.evaluated))}return W.validate=l,W}catch(a){throw delete W.validate,delete W.validateName,E&&this.logger.error("Error compiling schema, function code:",E),a}finally{this._compilations.delete(W)}}function $(W){return(0,G.inlineRef)(W.schema,this.opts.inlineRefs)?W.schema:W.validate?W:T.call(this,W)}function M(W){for(const K of this._compilations)if(F(K,W))return K}function F(W,K){return W.schema===K.schema&&W.root===K.root&&W.baseId===K.baseId}function k(W,K){let J;for(;"string"==typeof(J=this.refs[K]);)K=J;return J||this.schemas[K]||j.call(this,W,K)}function j(W,K){const J=this.opts.uriResolver.parse(K),X=(0,G._getFullPath)(this.opts.uriResolver,J);let Q=(0,G.getFullPath)(this.opts.uriResolver,W.baseId,void 0);if(Object.keys(W.schema).length>0&&X===Q)return q.call(this,J,W);const oe=(0,G.normalizeId)(X),ne=this.refs[oe]||this.schemas[oe];if("string"==typeof ne){const me=j.call(this,W,ne);return"object"!=typeof me?.schema?void 0:q.call(this,J,me)}if("object"==typeof ne?.schema){if(ne.validate||T.call(this,ne),oe===(0,G.normalizeId)(K)){const{schema:me}=ne,{schemaId:pe}=this.opts,Ie=me[pe];return Ie&&(Q=(0,G.resolveUrl)(this.opts.uriResolver,Q,Ie)),new _({schema:me,schemaId:pe,root:W,baseId:Q})}return q.call(this,J,ne)}}O.SchemaEnv=_,O.compileSchema=T,O.resolveRef=function D(W,K,J){var X;J=(0,G.resolveUrl)(this.opts.uriResolver,K,J);const Q=W.refs[J];if(Q)return Q;let oe=k.call(this,W,J);if(void 0===oe){const ne=null===(X=W.localRefs)||void 0===X?void 0:X[J],{schemaId:me}=this.opts;ne&&(oe=new _({schema:ne,schemaId:me,root:W,baseId:K}))}return void 0!==oe?W.refs[J]=$.call(this,oe):void 0},O.getCompilingSchema=M,O.resolveSchema=j;const Z=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function q(W,{baseId:K,schema:J,root:X}){var Q;if("/"!==(null===(Q=W.fragment)||void 0===Q?void 0:Q[0]))return;for(const me of W.fragment.slice(1).split("/")){if("boolean"==typeof J)return;const pe=J[(0,v.unescapeFragment)(me)];if(void 0===pe)return;const Ie="object"==typeof(J=pe)&&J[this.opts.schemaId];!Z.has(me)&&Ie&&(K=(0,G.resolveUrl)(this.opts.uriResolver,K,Ie))}let oe;if("boolean"!=typeof J&&J.$ref&&!(0,v.schemaHasRulesButRef)(J,this.RULES)){const me=(0,G.resolveUrl)(this.opts.uriResolver,K,J.$ref);oe=j.call(this,X,me)}const{schemaId:ne}=this.opts;return oe=oe||new _({schema:J,schemaId:ne,root:X,baseId:K}),oe.schema!==oe.root.schema?oe:void 0}},23432:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H={data:new C.Name("data"),valCxt:new C.Name("valCxt"),instancePath:new C.Name("instancePath"),parentData:new C.Name("parentData"),parentDataProperty:new C.Name("parentDataProperty"),rootData:new C.Name("rootData"),dynamicAnchors:new C.Name("dynamicAnchors"),vErrors:new C.Name("vErrors"),errors:new C.Name("errors"),this:new C.Name("this"),self:new C.Name("self"),scope:new C.Name("scope"),json:new C.Name("json"),jsonPos:new C.Name("jsonPos"),jsonLen:new C.Name("jsonLen"),jsonPart:new C.Name("jsonPart")};O.default=H},26288:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(77172);class H extends Error{constructor(G,v,B,_){super(_||`can't resolve reference ${B} from id ${v}`),this.missingRef=(0,C.resolveUrl)(G,v,B),this.missingSchema=(0,C.normalizeId)((0,C.getFullPath)(G,this.missingRef))}}O.default=H},77172:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getSchemaRefs=O.resolveUrl=O.normalizeId=O._getFullPath=O.getFullPath=O.inlineRef=void 0;const C=I(27006),H=I(40362),N=I(44331),G=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);O.inlineRef=function v(q,W=!0){return"boolean"==typeof q||(!0===W?!_(q):!!W&&T(q)<=W)};const B=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function _(q){for(const W in q){if(B.has(W))return!0;const K=q[W];if(Array.isArray(K)&&K.some(_)||"object"==typeof K&&_(K))return!0}return!1}function T(q){let W=0;for(const K in q){if("$ref"===K)return 1/0;if(W++,!G.has(K)&&("object"==typeof q[K]&&(0,C.eachItem)(q[K],J=>W+=T(J)),W===1/0))return 1/0}return W}function D(q,W="",K){!1!==K&&(W=F(W));const J=q.parse(W);return $(q,J)}function $(q,W){return q.serialize(W).split("#")[0]+"#"}O.getFullPath=D,O._getFullPath=$;const M=/#\/?$/;function F(q){return q?q.replace(M,""):""}O.normalizeId=F,O.resolveUrl=function k(q,W,K){return K=F(K),q.resolve(W,K)};const j=/^[a-z_][-a-z0-9._]*$/i;O.getSchemaRefs=function Z(q,W){if("boolean"==typeof q)return{};const{schemaId:K,uriResolver:J}=this.opts,X=F(q[K]||W),Q={"":X},oe=D(J,X,!1),ne={},me=new Set;return N(q,{allKeys:!0},(E,a,f,l)=>{if(void 0===l)return;const h=oe+a;let g=Q[l];function x(m){if(m=F(g?(0,this.opts.uriResolver.resolve)(g,m):m),me.has(m))throw Ie(m);me.add(m);let p=this.refs[m];return"string"==typeof p&&(p=this.refs[p]),"object"==typeof p?pe(E,p.schema,m):m!==F(h)&&("#"===m[0]?(pe(E,ne[m],m),ne[m]=E):this.refs[m]=h),m}function P(m){if("string"==typeof m){if(!j.test(m))throw new Error(`invalid anchor "${m}"`);x.call(this,`#${m}`)}}"string"==typeof E[K]&&(g=x.call(this,E[K])),P.call(this,E.$anchor),P.call(this,E.$dynamicAnchor),Q[a]=g}),ne;function pe(E,a,f){if(void 0!==a&&!H(E,a))throw Ie(f)}function Ie(E){return new Error(`reference "${E}" resolves to more than one schema`)}}},32203:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getRules=O.isJSONType=void 0;const C=new Set(["string","number","integer","boolean","null","object","array"]);O.isJSONType=function H(G){return"string"==typeof G&&C.has(G)},O.getRules=function N(){const G={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...G,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},G.number,G.string,G.array,G.object],post:{rules:[]},all:{},keywords:{}}}},27006:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.checkStrictMode=O.getErrorPath=O.Type=O.useFunc=O.setEvaluated=O.evaluatedPropsToName=O.mergeEvaluated=O.eachItem=O.unescapeJsonPointer=O.escapeJsonPointer=O.escapeFragment=O.unescapeFragment=O.schemaRefOrVal=O.schemaHasRulesButRef=O.schemaHasRules=O.checkUnknownRules=O.alwaysValidSchema=O.toHash=void 0;const C=I(1038),H=I(33337);function v(oe,ne=oe.schema){const{opts:me,self:pe}=oe;if(!me.strictSchema||"boolean"==typeof ne)return;const Ie=pe.RULES.keywords;for(const E in ne)Ie[E]||Q(oe,`unknown keyword: "${E}"`)}function B(oe,ne){if("boolean"==typeof oe)return!oe;for(const me in oe)if(ne[me])return!0;return!1}function M(oe){return"number"==typeof oe?`${oe}`:oe.replace(/~/g,"~0").replace(/\//g,"~1")}function F(oe){return oe.replace(/~1/g,"/").replace(/~0/g,"~")}function j({mergeNames:oe,mergeToName:ne,mergeValues:me,resultToName:pe}){return(Ie,E,a,f)=>{const l=void 0===a?E:a instanceof C.Name?(E instanceof C.Name?oe(Ie,E,a):ne(Ie,E,a),a):E instanceof C.Name?(ne(Ie,a,E),E):me(E,a);return f!==C.Name||l instanceof C.Name?l:pe(Ie,l)}}function Z(oe,ne){if(!0===ne)return oe.var("props",!0);const me=oe.var("props",C._`{}`);return void 0!==ne&&q(oe,me,ne),me}function q(oe,ne,me){Object.keys(me).forEach(pe=>oe.assign(C._`${ne}${(0,C.getProperty)(pe)}`,!0))}O.toHash=function N(oe){const ne={};for(const me of oe)ne[me]=!0;return ne},O.alwaysValidSchema=function G(oe,ne){return"boolean"==typeof ne?ne:0===Object.keys(ne).length||(v(oe,ne),!B(ne,oe.self.RULES.all))},O.checkUnknownRules=v,O.schemaHasRules=B,O.schemaHasRulesButRef=function _(oe,ne){if("boolean"==typeof oe)return!oe;for(const me in oe)if("$ref"!==me&&ne.all[me])return!0;return!1},O.schemaRefOrVal=function T({topSchemaRef:oe,schemaPath:ne},me,pe,Ie){if(!Ie){if("number"==typeof me||"boolean"==typeof me)return me;if("string"==typeof me)return C._`${me}`}return C._`${oe}${ne}${(0,C.getProperty)(pe)}`},O.unescapeFragment=function D(oe){return F(decodeURIComponent(oe))},O.escapeFragment=function $(oe){return encodeURIComponent(M(oe))},O.escapeJsonPointer=M,O.unescapeJsonPointer=F,O.eachItem=function k(oe,ne){if(Array.isArray(oe))for(const me of oe)ne(me);else ne(oe)},O.mergeEvaluated={props:j({mergeNames:(oe,ne,me)=>oe.if(C._`${me} !== true && ${ne} !== undefined`,()=>{oe.if(C._`${ne} === true`,()=>oe.assign(me,!0),()=>oe.assign(me,C._`${me} || {}`).code(C._`Object.assign(${me}, ${ne})`))}),mergeToName:(oe,ne,me)=>oe.if(C._`${me} !== true`,()=>{!0===ne?oe.assign(me,!0):(oe.assign(me,C._`${me} || {}`),q(oe,me,ne))}),mergeValues:(oe,ne)=>!0===oe||{...oe,...ne},resultToName:Z}),items:j({mergeNames:(oe,ne,me)=>oe.if(C._`${me} !== true && ${ne} !== undefined`,()=>oe.assign(me,C._`${ne} === true ? true : ${me} > ${ne} ? ${me} : ${ne}`)),mergeToName:(oe,ne,me)=>oe.if(C._`${me} !== true`,()=>oe.assign(me,!0===ne||C._`${me} > ${ne} ? ${me} : ${ne}`)),mergeValues:(oe,ne)=>!0===oe||Math.max(oe,ne),resultToName:(oe,ne)=>oe.var("items",ne)})},O.evaluatedPropsToName=Z,O.setEvaluated=q;const W={};var J,oe;function Q(oe,ne,me=oe.opts.strictSchema){if(me){if(ne=`strict mode: ${ne}`,!0===me)throw new Error(ne);oe.self.logger.warn(ne)}}O.useFunc=function K(oe,ne){return oe.scopeValue("func",{ref:ne,code:W[ne.code]||(W[ne.code]=new H._Code(ne.code))})},(oe=J=O.Type||(O.Type={}))[oe.Num=0]="Num",oe[oe.Str=1]="Str",O.getErrorPath=function X(oe,ne,me){if(oe instanceof C.Name){const pe=ne===J.Num;return me?pe?C._`"[" + ${oe} + "]"`:C._`"['" + ${oe} + "']"`:pe?C._`"/" + ${oe}`:C._`"/" + ${oe}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return me?(0,C.getProperty)(oe).toString():"/"+M(oe)},O.checkStrictMode=Q},22650:(xe,O)=>{"use strict";function C(N,G){return G.rules.some(v=>H(N,v))}function H(N,G){var v;return void 0!==N[G.keyword]||(null===(v=G.definition.implements)||void 0===v?void 0:v.some(B=>void 0!==N[B]))}Object.defineProperty(O,"__esModule",{value:!0}),O.shouldUseRule=O.shouldUseGroup=O.schemaHasRulesForType=void 0,O.schemaHasRulesForType=function I({schema:N,self:G},v){const B=G.RULES.types[v];return B&&!0!==B&&C(N,B)},O.shouldUseGroup=C,O.shouldUseRule=H},37864:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.boolOrEmptySchema=O.topBoolOrEmptySchema=void 0;const C=I(53421),H=I(1038),N=I(23432),G={message:"boolean schema is false"};function _(T,D){const{gen:$,data:M}=T;(0,C.reportError)({gen:$,keyword:"false schema",data:M,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:T},G,void 0,D)}O.topBoolOrEmptySchema=function v(T){const{gen:D,schema:$,validateName:M}=T;!1===$?_(T,!1):"object"==typeof $&&!0===$.$async?D.return(N.default.data):(D.assign(H._`${M}.errors`,null),D.return(!0))},O.boolOrEmptySchema=function B(T,D){const{gen:$,schema:M}=T;!1===M?($.var(D,!1),_(T)):$.var(D,!0)}},55999:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.reportTypeError=O.checkDataTypes=O.checkDataType=O.coerceAndCheckDataType=O.getJSONTypes=O.getSchemaTypes=O.DataType=void 0;const C=I(32203),H=I(22650),N=I(53421),G=I(1038),v=I(27006);var B,J;function T(J){const X=Array.isArray(J)?J:J?[J]:[];if(X.every(C.isJSONType))return X;throw new Error("type must be JSONType or JSONType[]: "+X.join(","))}(J=B=O.DataType||(O.DataType={}))[J.Correct=0]="Correct",J[J.Wrong=1]="Wrong",O.getSchemaTypes=function _(J){const X=T(J.type);if(X.includes("null")){if(!1===J.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!X.length&&void 0!==J.nullable)throw new Error('"nullable" cannot be used without "type"');!0===J.nullable&&X.push("null")}return X},O.getJSONTypes=T,O.coerceAndCheckDataType=function D(J,X){const{gen:Q,data:oe,opts:ne}=J,me=function M(J,X){return X?J.filter(Q=>$.has(Q)||"array"===X&&"array"===Q):[]}(X,ne.coerceTypes),pe=X.length>0&&!(0===me.length&&1===X.length&&(0,H.schemaHasRulesForType)(J,X[0]));if(pe){const Ie=Z(X,oe,ne.strictNumbers,B.Wrong);Q.if(Ie,()=>{me.length?function F(J,X,Q){const{gen:oe,data:ne,opts:me}=J,pe=oe.let("dataType",G._`typeof ${ne}`),Ie=oe.let("coerced",G._`undefined`);"array"===me.coerceTypes&&oe.if(G._`${pe} == 'object' && Array.isArray(${ne}) && ${ne}.length == 1`,()=>oe.assign(ne,G._`${ne}[0]`).assign(pe,G._`typeof ${ne}`).if(Z(X,ne,me.strictNumbers),()=>oe.assign(Ie,ne))),oe.if(G._`${Ie} !== undefined`);for(const a of Q)($.has(a)||"array"===a&&"array"===me.coerceTypes)&&E(a);function E(a){switch(a){case"string":return void oe.elseIf(G._`${pe} == "number" || ${pe} == "boolean"`).assign(Ie,G._`"" + ${ne}`).elseIf(G._`${ne} === null`).assign(Ie,G._`""`);case"number":return void oe.elseIf(G._`${pe} == "boolean" || ${ne} === null
              || (${pe} == "string" && ${ne} && ${ne} == +${ne})`).assign(Ie,G._`+${ne}`);case"integer":return void oe.elseIf(G._`${pe} === "boolean" || ${ne} === null
              || (${pe} === "string" && ${ne} && ${ne} == +${ne} && !(${ne} % 1))`).assign(Ie,G._`+${ne}`);case"boolean":return void oe.elseIf(G._`${ne} === "false" || ${ne} === 0 || ${ne} === null`).assign(Ie,!1).elseIf(G._`${ne} === "true" || ${ne} === 1`).assign(Ie,!0);case"null":return oe.elseIf(G._`${ne} === "" || ${ne} === 0 || ${ne} === false`),void oe.assign(Ie,null);case"array":oe.elseIf(G._`${pe} === "string" || ${pe} === "number"
              || ${pe} === "boolean" || ${ne} === null`).assign(Ie,G._`[${ne}]`)}}oe.else(),W(J),oe.endIf(),oe.if(G._`${Ie} !== undefined`,()=>{oe.assign(ne,Ie),function k({gen:J,parentData:X,parentDataProperty:Q},oe){J.if(G._`${X} !== undefined`,()=>J.assign(G._`${X}[${Q}]`,oe))}(J,Ie)})}(J,X,me):W(J)})}return pe};const $=new Set(["string","number","integer","boolean","null"]);function j(J,X,Q,oe=B.Correct){const ne=oe===B.Correct?G.operators.EQ:G.operators.NEQ;let me;switch(J){case"null":return G._`${X} ${ne} null`;case"array":me=G._`Array.isArray(${X})`;break;case"object":me=G._`${X} && typeof ${X} == "object" && !Array.isArray(${X})`;break;case"integer":me=pe(G._`!(${X} % 1) && !isNaN(${X})`);break;case"number":me=pe();break;default:return G._`typeof ${X} ${ne} ${J}`}return oe===B.Correct?me:(0,G.not)(me);function pe(Ie=G.nil){return(0,G.and)(G._`typeof ${X} == "number"`,Ie,Q?G._`isFinite(${X})`:G.nil)}}function Z(J,X,Q,oe){if(1===J.length)return j(J[0],X,Q,oe);let ne;const me=(0,v.toHash)(J);if(me.array&&me.object){const pe=G._`typeof ${X} != "object"`;ne=me.null?pe:G._`!${X} || ${pe}`,delete me.null,delete me.array,delete me.object}else ne=G.nil;me.number&&delete me.integer;for(const pe in me)ne=(0,G.and)(ne,j(pe,X,Q,oe));return ne}O.checkDataType=j,O.checkDataTypes=Z;const q={message:({schema:J})=>`must be ${J}`,params:({schema:J,schemaValue:X})=>"string"==typeof J?G._`{type: ${J}}`:G._`{type: ${X}}`};function W(J){const X=function K(J){const{gen:X,data:Q,schema:oe}=J,ne=(0,v.schemaRefOrVal)(J,oe,"type");return{gen:X,keyword:"type",data:Q,schema:oe.type,schemaCode:ne,schemaValue:ne,parentSchema:oe,params:{},it:J}}(J);(0,N.reportError)(X,q)}O.reportTypeError=W},48733:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.assignDefaults=void 0;const C=I(1038),H=I(27006);function G(v,B,_){const{gen:T,compositeRule:D,data:$,opts:M}=v;if(void 0===_)return;const F=C._`${$}${(0,C.getProperty)(B)}`;if(D)return void(0,H.checkStrictMode)(v,`default is ignored for: ${F}`);let k=C._`${F} === undefined`;"empty"===M.useDefaults&&(k=C._`${k} || ${F} === null || ${F} === ""`),T.if(k,C._`${F} = ${(0,C.stringify)(_)}`)}O.assignDefaults=function N(v,B){const{properties:_,items:T}=v.schema;if("object"===B&&_)for(const D in _)G(v,D,_[D].default);else"array"===B&&Array.isArray(T)&&T.forEach((D,$)=>G(v,$,D.default))}},40339:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getData=O.KeywordCxt=O.validateFunctionCode=void 0;const C=I(37864),H=I(55999),N=I(22650),G=I(55999),v=I(48733),B=I(76800),_=I(16334),T=I(1038),D=I(23432),$=I(77172),M=I(27006),F=I(53421);function j({gen:ve,validateName:_e,schema:de,schemaEnv:se,opts:re},ce){re.code.es5?ve.func(_e,T._`${D.default.data}, ${D.default.valCxt}`,se.$async,()=>{ve.code(T._`"use strict"; ${J(de,re)}`),function q(ve,_e){ve.if(D.default.valCxt,()=>{ve.var(D.default.instancePath,T._`${D.default.valCxt}.${D.default.instancePath}`),ve.var(D.default.parentData,T._`${D.default.valCxt}.${D.default.parentData}`),ve.var(D.default.parentDataProperty,T._`${D.default.valCxt}.${D.default.parentDataProperty}`),ve.var(D.default.rootData,T._`${D.default.valCxt}.${D.default.rootData}`),_e.dynamicRef&&ve.var(D.default.dynamicAnchors,T._`${D.default.valCxt}.${D.default.dynamicAnchors}`)},()=>{ve.var(D.default.instancePath,T._`""`),ve.var(D.default.parentData,T._`undefined`),ve.var(D.default.parentDataProperty,T._`undefined`),ve.var(D.default.rootData,D.default.data),_e.dynamicRef&&ve.var(D.default.dynamicAnchors,T._`{}`)})}(ve,re),ve.code(ce)}):ve.func(_e,T._`${D.default.data}, ${function Z(ve){return T._`{${D.default.instancePath}="", ${D.default.parentData}, ${D.default.parentDataProperty}, ${D.default.rootData}=${D.default.data}${ve.dynamicRef?T._`, ${D.default.dynamicAnchors}={}`:T.nil}}={}`}(re)}`,se.$async,()=>ve.code(J(de,re)).code(ce))}function J(ve,_e){const de="object"==typeof ve&&ve[_e.schemaId];return de&&(_e.code.source||_e.code.process)?T._`/*# sourceURL=${de} */`:T.nil}function Q({schema:ve,self:_e}){if("boolean"==typeof ve)return!ve;for(const de in ve)if(_e.RULES.all[de])return!0;return!1}function oe(ve){return"boolean"!=typeof ve.schema}function me(ve){(0,M.checkUnknownRules)(ve),function Ie(ve){const{schema:_e,errSchemaPath:de,opts:se,self:re}=ve;_e.$ref&&se.ignoreKeywordsWithRef&&(0,M.schemaHasRulesButRef)(_e,re.RULES)&&re.logger.warn(`$ref: keywords ignored in schema at path "${de}"`)}(ve)}function pe(ve,_e){if(ve.opts.jtd)return x(ve,[],!1,_e);const de=(0,H.getSchemaTypes)(ve.schema);x(ve,de,!(0,H.coerceAndCheckDataType)(ve,de),_e)}function l({gen:ve,schemaEnv:_e,schema:de,errSchemaPath:se,opts:re}){const ce=de.$comment;if(!0===re.$comment)ve.code(T._`${D.default.self}.logger.log(${ce})`);else if("function"==typeof re.$comment){const ue=T.str`${se}/$comment`,ge=ve.scopeValue("root",{ref:_e.root});ve.code(T._`${D.default.self}.opts.$comment(${ce}, ${ue}, ${ge}.schema)`)}}function x(ve,_e,de,se){const{gen:re,schema:ce,data:ue,allErrors:ge,opts:Ee,self:Be}=ve,{RULES:De}=Be;function et(Ke){(0,N.shouldUseGroup)(ce,Ke)&&(Ke.type?(re.if((0,G.checkDataType)(Ke.type,ue,Ee.strictNumbers)),P(ve,Ke),1===_e.length&&_e[0]===Ke.type&&de&&(re.else(),(0,G.reportTypeError)(ve)),re.endIf()):P(ve,Ke),ge||re.if(T._`${D.default.errors} === ${se||0}`))}!ce.$ref||!Ee.ignoreKeywordsWithRef&&(0,M.schemaHasRulesButRef)(ce,De)?(Ee.jtd||function m(ve,_e){ve.schemaEnv.meta||!ve.opts.strictTypes||(function d(ve,_e){if(_e.length){if(!ve.dataTypes.length)return void(ve.dataTypes=_e);_e.forEach(de=>{Y(ve.dataTypes,de)||Se(ve,`type "${de}" not allowed by context "${ve.dataTypes.join(",")}"`)}),function le(ve,_e){const de=[];for(const se of ve.dataTypes)Y(_e,se)?de.push(se):_e.includes("integer")&&"number"===se&&de.push("integer");ve.dataTypes=de}(ve,_e)}}(ve,_e),ve.opts.allowUnionTypes||function p(ve,_e){_e.length>1&&(2!==_e.length||!_e.includes("null"))&&Se(ve,"use allowUnionTypes to allow union type keyword")}(ve,_e),function V(ve,_e){const de=ve.self.RULES.all;for(const se in de){const re=de[se];if("object"==typeof re&&(0,N.shouldUseRule)(ve.schema,re)){const{type:ce}=re.definition;ce.length&&!ce.some(ue=>L(_e,ue))&&Se(ve,`missing type "${ce.join(",")}" for keyword "${se}"`)}}}(ve,ve.dataTypes))}(ve,_e),re.block(()=>{for(const Ke of De.rules)et(Ke);et(De.post)})):re.block(()=>Ve(ve,"$ref",De.all.$ref.definition))}function P(ve,_e){const{gen:de,schema:se,opts:{useDefaults:re}}=ve;re&&(0,v.assignDefaults)(ve,_e.type),de.block(()=>{for(const ce of _e.rules)(0,N.shouldUseRule)(se,ce)&&Ve(ve,ce.keyword,ce.definition,_e.type)})}function L(ve,_e){return ve.includes(_e)||"number"===_e&&ve.includes("integer")}function Y(ve,_e){return ve.includes(_e)||"integer"===_e&&ve.includes("number")}function Se(ve,_e){(0,M.checkStrictMode)(ve,_e+=` at "${ve.schemaEnv.baseId+ve.errSchemaPath}" (strictTypes)`,ve.opts.strictTypes)}O.validateFunctionCode=function k(ve){oe(ve)&&(me(ve),Q(ve))?function W(ve){const{schema:_e,opts:de,gen:se}=ve;j(ve,()=>{de.$comment&&_e.$comment&&l(ve),function E(ve){const{schema:_e,opts:de}=ve;void 0!==_e.default&&de.useDefaults&&de.strictSchema&&(0,M.checkStrictMode)(ve,"default is ignored in the schema root")}(ve),se.let(D.default.vErrors,null),se.let(D.default.errors,0),de.unevaluated&&function K(ve){const{gen:_e,validateName:de}=ve;ve.evaluated=_e.const("evaluated",T._`${de}.evaluated`),_e.if(T._`${ve.evaluated}.dynamicProps`,()=>_e.assign(T._`${ve.evaluated}.props`,T._`undefined`)),_e.if(T._`${ve.evaluated}.dynamicItems`,()=>_e.assign(T._`${ve.evaluated}.items`,T._`undefined`))}(ve),pe(ve),function h(ve){const{gen:_e,schemaEnv:de,validateName:se,ValidationError:re,opts:ce}=ve;de.$async?_e.if(T._`${D.default.errors} === 0`,()=>_e.return(D.default.data),()=>_e.throw(T._`new ${re}(${D.default.vErrors})`)):(_e.assign(T._`${se}.errors`,D.default.vErrors),ce.unevaluated&&function g({gen:ve,evaluated:_e,props:de,items:se}){de instanceof T.Name&&ve.assign(T._`${_e}.props`,de),se instanceof T.Name&&ve.assign(T._`${_e}.items`,se)}(ve),_e.return(T._`${D.default.errors} === 0`))}(ve)})}(ve):j(ve,()=>(0,C.topBoolOrEmptySchema)(ve))};class Oe{constructor(_e,de,se){if((0,B.validateKeywordUsage)(_e,de,se),this.gen=_e.gen,this.allErrors=_e.allErrors,this.keyword=se,this.data=_e.data,this.schema=_e.schema[se],this.$data=de.$data&&_e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,M.schemaRefOrVal)(_e,this.schema,se,this.$data),this.schemaType=de.schemaType,this.parentSchema=_e.schema,this.params={},this.it=_e,this.def=de,this.$data)this.schemaCode=_e.gen.const("vSchema",ke(this.$data,_e));else if(this.schemaCode=this.schemaValue,!(0,B.validSchemaType)(this.schema,de.schemaType,de.allowUndefined))throw new Error(`${se} value must be ${JSON.stringify(de.schemaType)}`);("code"in de?de.trackErrors:!1!==de.errors)&&(this.errsCount=_e.gen.const("_errs",D.default.errors))}result(_e,de,se){this.failResult((0,T.not)(_e),de,se)}failResult(_e,de,se){this.gen.if(_e),se?se():this.error(),de?(this.gen.else(),de(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(_e,de){this.failResult((0,T.not)(_e),void 0,de)}fail(_e){if(void 0===_e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(_e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(_e){if(!this.$data)return this.fail(_e);const{schemaCode:de}=this;this.fail(T._`${de} !== undefined && (${(0,T.or)(this.invalid$data(),_e)})`)}error(_e,de,se){if(de)return this.setParams(de),this._error(_e,se),void this.setParams({});this._error(_e,se)}_error(_e,de){(_e?F.reportExtraError:F.reportError)(this,this.def.error,de)}$dataError(){(0,F.reportError)(this,this.def.$dataError||F.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,F.resetErrorsCount)(this.gen,this.errsCount)}ok(_e){this.allErrors||this.gen.if(_e)}setParams(_e,de){de?Object.assign(this.params,_e):this.params=_e}block$data(_e,de,se=T.nil){this.gen.block(()=>{this.check$data(_e,se),de()})}check$data(_e=T.nil,de=T.nil){if(!this.$data)return;const{gen:se,schemaCode:re,schemaType:ce,def:ue}=this;se.if((0,T.or)(T._`${re} === undefined`,de)),_e!==T.nil&&se.assign(_e,!0),(ce.length||ue.validateSchema)&&(se.elseIf(this.invalid$data()),this.$dataError(),_e!==T.nil&&se.assign(_e,!1)),se.else()}invalid$data(){const{gen:_e,schemaCode:de,schemaType:se,def:re,it:ce}=this;return(0,T.or)(function ue(){if(se.length){if(!(de instanceof T.Name))throw new Error("ajv implementation error");const Ee=Array.isArray(se)?se:[se];return T._`${(0,G.checkDataTypes)(Ee,de,ce.opts.strictNumbers,G.DataType.Wrong)}`}return T.nil}(),function ge(){if(re.validateSchema){const Ee=_e.scopeValue("validate$data",{ref:re.validateSchema});return T._`!${Ee}(${de})`}return T.nil}())}subschema(_e,de){const se=(0,_.getSubschema)(this.it,_e);(0,_.extendSubschemaData)(se,this.it,_e),(0,_.extendSubschemaMode)(se,_e);const re={...this.it,...se,items:void 0,props:void 0};return function X(ve,_e){oe(ve)&&(me(ve),Q(ve))?function ne(ve,_e){const{schema:de,gen:se,opts:re}=ve;re.$comment&&de.$comment&&l(ve),function a(ve){const _e=ve.schema[ve.opts.schemaId];_e&&(ve.baseId=(0,$.resolveUrl)(ve.opts.uriResolver,ve.baseId,_e))}(ve),function f(ve){if(ve.schema.$async&&!ve.schemaEnv.$async)throw new Error("async schema in sync schema")}(ve);const ce=se.const("_errs",D.default.errors);pe(ve,ce),se.var(_e,T._`${ce} === ${D.default.errors}`)}(ve,_e):(0,C.boolOrEmptySchema)(ve,_e)}(re,de),re}mergeEvaluated(_e,de){const{it:se,gen:re}=this;se.opts.unevaluated&&(!0!==se.props&&void 0!==_e.props&&(se.props=M.mergeEvaluated.props(re,_e.props,se.props,de)),!0!==se.items&&void 0!==_e.items&&(se.items=M.mergeEvaluated.items(re,_e.items,se.items,de)))}mergeValidEvaluated(_e,de){const{it:se,gen:re}=this;if(se.opts.unevaluated&&(!0!==se.props||!0!==se.items))return re.if(de,()=>this.mergeEvaluated(_e,T.Name)),!0}}function Ve(ve,_e,de,se){const re=new Oe(ve,de,_e);"code"in de?de.code(re,se):re.$data&&de.validate?(0,B.funcKeywordCode)(re,de):"macro"in de?(0,B.macroKeywordCode)(re,de):(de.compile||de.validate)&&(0,B.funcKeywordCode)(re,de)}O.KeywordCxt=Oe;const Re=/^\/(?:[^~]|~0|~1)*$/,ye=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ke(ve,{dataLevel:_e,dataNames:de,dataPathArr:se}){let re,ce;if(""===ve)return D.default.rootData;if("/"===ve[0]){if(!Re.test(ve))throw new Error(`Invalid JSON-pointer: ${ve}`);re=ve,ce=D.default.rootData}else{const Be=ye.exec(ve);if(!Be)throw new Error(`Invalid JSON-pointer: ${ve}`);const De=+Be[1];if(re=Be[2],"#"===re){if(De>=_e)throw new Error(Ee("property/index",De));return se[_e-De]}if(De>_e)throw new Error(Ee("data",De));if(ce=de[_e-De],!re)return ce}let ue=ce;const ge=re.split("/");for(const Be of ge)Be&&(ce=T._`${ce}${(0,T.getProperty)((0,M.unescapeJsonPointer)(Be))}`,ue=T._`${ue} && ${ce}`);return ue;function Ee(Be,De){return`Cannot access ${Be} ${De} levels up, current level is ${_e}`}}O.getData=ke},76800:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.validateKeywordUsage=O.validSchemaType=O.funcKeywordCode=O.macroKeywordCode=void 0;const C=I(1038),H=I(23432),N=I(42406),G=I(53421);function _(k){const{gen:j,data:Z,it:q}=k;j.if(q.parentData,()=>j.assign(Z,C._`${q.parentData}[${q.parentDataProperty}]`))}function $(k,j,Z){if(void 0===Z)throw new Error(`keyword "${j}" failed to compile`);return k.scopeValue("keyword","function"==typeof Z?{ref:Z}:{ref:Z,code:(0,C.stringify)(Z)})}O.macroKeywordCode=function v(k,j){const{gen:Z,keyword:q,schema:W,parentSchema:K,it:J}=k,X=j.macro.call(J.self,W,K,J),Q=$(Z,q,X);!1!==J.opts.validateSchema&&J.self.validateSchema(X,!0);const oe=Z.name("valid");k.subschema({schema:X,schemaPath:C.nil,errSchemaPath:`${J.errSchemaPath}/${q}`,topSchemaRef:Q,compositeRule:!0},oe),k.pass(oe,()=>k.error(!0))},O.funcKeywordCode=function B(k,j){var Z;const{gen:q,keyword:W,schema:K,parentSchema:J,$data:X,it:Q}=k;!function D({schemaEnv:k},j){if(j.async&&!k.$async)throw new Error("async keyword in sync schema")}(Q,j);const oe=!X&&j.compile?j.compile.call(Q.self,K,J,Q):j.validate,ne=$(q,W,oe),me=q.let("valid");function a(l=(j.async?C._`await `:C.nil)){q.assign(me,C._`${l}${(0,N.callValidateCode)(k,ne,Q.opts.passContext?H.default.this:H.default.self,!("compile"in j&&!X||!1===j.schema))}`,j.modifying)}function f(l){var h;q.if((0,C.not)(null!==(h=j.valid)&&void 0!==h?h:me),l)}k.block$data(me,function pe(){if(!1===j.errors)a(),j.modifying&&_(k),f(()=>k.error());else{const l=j.async?function Ie(){const l=q.let("ruleErrs",null);return q.try(()=>a(C._`await `),h=>q.assign(me,!1).if(C._`${h} instanceof ${Q.ValidationError}`,()=>q.assign(l,C._`${h}.errors`),()=>q.throw(h))),l}():function E(){const l=C._`${ne}.errors`;return q.assign(l,null),a(C.nil),l}();j.modifying&&_(k),f(()=>function T(k,j){const{gen:Z}=k;Z.if(C._`Array.isArray(${j})`,()=>{Z.assign(H.default.vErrors,C._`${H.default.vErrors} === null ? ${j} : ${H.default.vErrors}.concat(${j})`).assign(H.default.errors,C._`${H.default.vErrors}.length`),(0,G.extendErrors)(k)},()=>k.error())}(k,l))}}),k.ok(null!==(Z=j.valid)&&void 0!==Z?Z:me)},O.validSchemaType=function M(k,j,Z=!1){return!j.length||j.some(q=>"array"===q?Array.isArray(k):"object"===q?k&&"object"==typeof k&&!Array.isArray(k):typeof k==q||Z&&typeof k>"u")},O.validateKeywordUsage=function F({schema:k,opts:j,self:Z,errSchemaPath:q},W,K){if(Array.isArray(W.keyword)?!W.keyword.includes(K):W.keyword!==K)throw new Error("ajv implementation error");const J=W.dependencies;if(J?.some(X=>!Object.prototype.hasOwnProperty.call(k,X)))throw new Error(`parent schema must have dependencies of ${K}: ${J.join(",")}`);if(W.validateSchema&&!W.validateSchema(k[K])){const Q=`keyword "${K}" value is invalid at path "${q}": `+Z.errorsText(W.validateSchema.errors);if("log"!==j.validateSchema)throw new Error(Q);Z.logger.error(Q)}}},16334:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.extendSubschemaMode=O.extendSubschemaData=O.getSubschema=void 0;const C=I(1038),H=I(27006);O.getSubschema=function N(B,{keyword:_,schemaProp:T,schema:D,schemaPath:$,errSchemaPath:M,topSchemaRef:F}){if(void 0!==_&&void 0!==D)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==_){const k=B.schema[_];return void 0===T?{schema:k,schemaPath:C._`${B.schemaPath}${(0,C.getProperty)(_)}`,errSchemaPath:`${B.errSchemaPath}/${_}`}:{schema:k[T],schemaPath:C._`${B.schemaPath}${(0,C.getProperty)(_)}${(0,C.getProperty)(T)}`,errSchemaPath:`${B.errSchemaPath}/${_}/${(0,H.escapeFragment)(T)}`}}if(void 0!==D){if(void 0===$||void 0===M||void 0===F)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:D,schemaPath:$,topSchemaRef:F,errSchemaPath:M}}throw new Error('either "keyword" or "schema" must be passed')},O.extendSubschemaData=function G(B,_,{dataProp:T,dataPropType:D,data:$,dataTypes:M,propertyName:F}){if(void 0!==$&&void 0!==T)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:k}=_;if(void 0!==T){const{errorPath:Z,dataPathArr:q,opts:W}=_;j(k.let("data",C._`${_.data}${(0,C.getProperty)(T)}`,!0)),B.errorPath=C.str`${Z}${(0,H.getErrorPath)(T,D,W.jsPropertySyntax)}`,B.parentDataProperty=C._`${T}`,B.dataPathArr=[...q,B.parentDataProperty]}function j(Z){B.data=Z,B.dataLevel=_.dataLevel+1,B.dataTypes=[],_.definedProperties=new Set,B.parentData=_.data,B.dataNames=[..._.dataNames,Z]}void 0!==$&&(j($ instanceof C.Name?$:k.let("data",$,!0)),void 0!==F&&(B.propertyName=F)),M&&(B.dataTypes=M)},O.extendSubschemaMode=function v(B,{jtdDiscriminator:_,jtdMetadata:T,compositeRule:D,createErrors:$,allErrors:M}){void 0!==D&&(B.compositeRule=D),void 0!==$&&(B.createErrors=$),void 0!==M&&(B.allErrors=M),B.jtdDiscriminator=_,B.jtdMetadata=T}},35419:(xe,O,I)=>{"use strict";var C=I(29293).default;Object.defineProperty(O,"__esModule",{value:!0}),O.CodeGen=O.Name=O.nil=O.stringify=O.str=O._=O.KeywordCxt=void 0;var H=I(40339);Object.defineProperty(O,"KeywordCxt",{enumerable:!0,get:function(){return H.KeywordCxt}});var N=I(1038);Object.defineProperty(O,"_",{enumerable:!0,get:function(){return N._}}),Object.defineProperty(O,"str",{enumerable:!0,get:function(){return N.str}}),Object.defineProperty(O,"stringify",{enumerable:!0,get:function(){return N.stringify}}),Object.defineProperty(O,"nil",{enumerable:!0,get:function(){return N.nil}}),Object.defineProperty(O,"Name",{enumerable:!0,get:function(){return N.Name}}),Object.defineProperty(O,"CodeGen",{enumerable:!0,get:function(){return N.CodeGen}});const G=I(42467),v=I(26288),B=I(32203),_=I(97692),T=I(1038),D=I(77172),$=I(55999),M=I(27006),F=I(83813),k=I(13203),j=(p,V)=>new RegExp(p,V);j.code="new RegExp";const Z=["removeAdditional","useDefaults","coerceTypes"],q=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),W={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},K={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function X(p){var V,L,Y,le,Se,Oe,Ve,Re,ye,ke,ve,_e,de,se,re,ce,ue,ge,Ee,Be,De,et,Ke,We,_t;const U=p.strict,w=null===(V=p.code)||void 0===V?void 0:V.optimize,b=!0===w||void 0===w?1:w||0,z=null!==(Y=null===(L=p.code)||void 0===L?void 0:L.regExp)&&void 0!==Y?Y:j,ie=null!==(le=p.uriResolver)&&void 0!==le?le:k.default;return{strictSchema:null===(Oe=null!==(Se=p.strictSchema)&&void 0!==Se?Se:U)||void 0===Oe||Oe,strictNumbers:null===(Re=null!==(Ve=p.strictNumbers)&&void 0!==Ve?Ve:U)||void 0===Re||Re,strictTypes:null!==(ke=null!==(ye=p.strictTypes)&&void 0!==ye?ye:U)&&void 0!==ke?ke:"log",strictTuples:null!==(_e=null!==(ve=p.strictTuples)&&void 0!==ve?ve:U)&&void 0!==_e?_e:"log",strictRequired:null!==(se=null!==(de=p.strictRequired)&&void 0!==de?de:U)&&void 0!==se&&se,code:p.code?{...p.code,optimize:b,regExp:z}:{optimize:b,regExp:z},loopRequired:null!==(re=p.loopRequired)&&void 0!==re?re:200,loopEnum:null!==(ce=p.loopEnum)&&void 0!==ce?ce:200,meta:null===(ue=p.meta)||void 0===ue||ue,messages:null===(ge=p.messages)||void 0===ge||ge,inlineRefs:null===(Ee=p.inlineRefs)||void 0===Ee||Ee,schemaId:null!==(Be=p.schemaId)&&void 0!==Be?Be:"$id",addUsedSchema:null===(De=p.addUsedSchema)||void 0===De||De,validateSchema:null===(et=p.validateSchema)||void 0===et||et,validateFormats:null===(Ke=p.validateFormats)||void 0===Ke||Ke,unicodeRegExp:null===(We=p.unicodeRegExp)||void 0===We||We,int32range:null===(_t=p.int32range)||void 0===_t||_t,uriResolver:ie}}class Q{constructor(V={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,V=this.opts={...V,...X(V)};const{es5:L,lines:Y}=this.opts.code;this.scope=new T.ValueScope({scope:{},prefixes:q,es5:L,lines:Y}),this.logger=function f(p){if(!1===p)return a;if(void 0===p)return console;if(p.log&&p.warn&&p.error)return p;throw new Error("logger must implement log, warn and error methods")}(V.logger);const le=V.validateFormats;V.validateFormats=!1,this.RULES=(0,B.getRules)(),oe.call(this,W,V,"NOT SUPPORTED"),oe.call(this,K,V,"DEPRECATED","warn"),this._metaOpts=E.call(this),V.formats&&pe.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),V.keywords&&Ie.call(this,V.keywords),"object"==typeof V.meta&&this.addMetaSchema(V.meta),me.call(this),V.validateFormats=le}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:V,meta:L,schemaId:Y}=this.opts;let le=F;"id"===Y&&(le={...F},le.id=le.$id,delete le.$id),L&&V&&this.addMetaSchema(le,le[Y],!1)}defaultMeta(){const{meta:V,schemaId:L}=this.opts;return this.opts.defaultMeta="object"==typeof V?V[L]||V:void 0}validate(V,L){let Y;if("string"==typeof V){if(Y=this.getSchema(V),!Y)throw new Error(`no schema with key or ref "${V}"`)}else Y=this.compile(V);const le=Y(L);return"$async"in Y||(this.errors=Y.errors),le}compile(V,L){const Y=this._addSchema(V,L);return Y.validate||this._compileSchemaEnv(Y)}compileAsync(V,L){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:Y}=this.opts;return le.call(this,V,L);function le(re,ce){return Se.apply(this,arguments)}function Se(){return(Se=C(function*(re,ce){yield Oe.call(this,re.$schema);const ue=this._addSchema(re,ce);return ue.validate||Re.call(this,ue)})).apply(this,arguments)}function Oe(re){return Ve.apply(this,arguments)}function Ve(){return(Ve=C(function*(re){re&&!this.getSchema(re)&&(yield le.call(this,{$ref:re},!0))})).apply(this,arguments)}function Re(re){return ye.apply(this,arguments)}function ye(){return(ye=C(function*(re){try{return this._compileSchemaEnv(re)}catch(ce){if(!(ce instanceof v.default))throw ce;return ke.call(this,ce),yield ve.call(this,ce.missingSchema),Re.call(this,re)}})).apply(this,arguments)}function ke({missingSchema:re,missingRef:ce}){if(this.refs[re])throw new Error(`AnySchema ${re} is loaded but ${ce} cannot be resolved`)}function ve(re){return _e.apply(this,arguments)}function _e(){return(_e=C(function*(re){const ce=yield de.call(this,re);this.refs[re]||(yield Oe.call(this,ce.$schema)),this.refs[re]||this.addSchema(ce,re,L)})).apply(this,arguments)}function de(re){return se.apply(this,arguments)}function se(){return(se=C(function*(re){const ce=this._loading[re];if(ce)return ce;try{return yield this._loading[re]=Y(re)}finally{delete this._loading[re]}})).apply(this,arguments)}}addSchema(V,L,Y,le=this.opts.validateSchema){if(Array.isArray(V)){for(const Oe of V)this.addSchema(Oe,void 0,Y,le);return this}let Se;if("object"==typeof V){const{schemaId:Oe}=this.opts;if(Se=V[Oe],void 0!==Se&&"string"!=typeof Se)throw new Error(`schema ${Oe} must be string`)}return L=(0,D.normalizeId)(L||Se),this._checkUnique(L),this.schemas[L]=this._addSchema(V,Y,L,le,!0),this}addMetaSchema(V,L,Y=this.opts.validateSchema){return this.addSchema(V,L,!0,Y),this}validateSchema(V,L){if("boolean"==typeof V)return!0;let Y;if(Y=V.$schema,void 0!==Y&&"string"!=typeof Y)throw new Error("$schema must be a string");if(Y=Y||this.opts.defaultMeta||this.defaultMeta(),!Y)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const le=this.validate(Y,V);if(!le&&L){const Se="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(Se);this.logger.error(Se)}return le}getSchema(V){let L;for(;"string"==typeof(L=ne.call(this,V));)V=L;if(void 0===L){const{schemaId:Y}=this.opts,le=new _.SchemaEnv({schema:{},schemaId:Y});if(L=_.resolveSchema.call(this,le,V),!L)return;this.refs[V]=L}return L.validate||this._compileSchemaEnv(L)}removeSchema(V){if(V instanceof RegExp)return this._removeAllSchemas(this.schemas,V),this._removeAllSchemas(this.refs,V),this;switch(typeof V){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const L=ne.call(this,V);return"object"==typeof L&&this._cache.delete(L.schema),delete this.schemas[V],delete this.refs[V],this}case"object":{this._cache.delete(V);let Y=V[this.opts.schemaId];return Y&&(Y=(0,D.normalizeId)(Y),delete this.schemas[Y],delete this.refs[Y]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(V){for(const L of V)this.addKeyword(L);return this}addKeyword(V,L){let Y;if("string"==typeof V)Y=V,"object"==typeof L&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),L.keyword=Y);else{if("object"!=typeof V||void 0!==L)throw new Error("invalid addKeywords parameters");if(Y=(L=V).keyword,Array.isArray(Y)&&!Y.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(h.call(this,Y,L),!L)return(0,M.eachItem)(Y,Se=>g.call(this,Se)),this;P.call(this,L);const le={...L,type:(0,$.getJSONTypes)(L.type),schemaType:(0,$.getJSONTypes)(L.schemaType)};return(0,M.eachItem)(Y,0===le.type.length?Se=>g.call(this,Se,le):Se=>le.type.forEach(Oe=>g.call(this,Se,le,Oe))),this}getKeyword(V){const L=this.RULES.all[V];return"object"==typeof L?L.definition:!!L}removeKeyword(V){const{RULES:L}=this;delete L.keywords[V],delete L.all[V];for(const Y of L.rules){const le=Y.rules.findIndex(Se=>Se.keyword===V);le>=0&&Y.rules.splice(le,1)}return this}addFormat(V,L){return"string"==typeof L&&(L=new RegExp(L)),this.formats[V]=L,this}errorsText(V=this.errors,{separator:L=", ",dataVar:Y="data"}={}){return V&&0!==V.length?V.map(le=>`${Y}${le.instancePath} ${le.message}`).reduce((le,Se)=>le+L+Se):"No errors"}$dataMetaSchema(V,L){const Y=this.RULES.all;V=JSON.parse(JSON.stringify(V));for(const le of L){const Se=le.split("/").slice(1);let Oe=V;for(const Ve of Se)Oe=Oe[Ve];for(const Ve in Y){const Re=Y[Ve];if("object"!=typeof Re)continue;const{$data:ye}=Re.definition,ke=Oe[Ve];ye&&ke&&(Oe[Ve]=d(ke))}}return V}_removeAllSchemas(V,L){for(const Y in V){const le=V[Y];(!L||L.test(Y))&&("string"==typeof le?delete V[Y]:le&&!le.meta&&(this._cache.delete(le.schema),delete V[Y]))}}_addSchema(V,L,Y,le=this.opts.validateSchema,Se=this.opts.addUsedSchema){let Oe;const{schemaId:Ve}=this.opts;if("object"==typeof V)Oe=V[Ve];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof V)throw new Error("schema must be object or boolean")}let Re=this._cache.get(V);if(void 0!==Re)return Re;Y=(0,D.normalizeId)(Oe||Y);const ye=D.getSchemaRefs.call(this,V,Y);return Re=new _.SchemaEnv({schema:V,schemaId:Ve,meta:L,baseId:Y,localRefs:ye}),this._cache.set(Re.schema,Re),Se&&!Y.startsWith("#")&&(Y&&this._checkUnique(Y),this.refs[Y]=Re),le&&this.validateSchema(V,!0),Re}_checkUnique(V){if(this.schemas[V]||this.refs[V])throw new Error(`schema with key or id "${V}" already exists`)}_compileSchemaEnv(V){if(V.meta?this._compileMetaSchema(V):_.compileSchema.call(this,V),!V.validate)throw new Error("ajv implementation error");return V.validate}_compileMetaSchema(V){const L=this.opts;this.opts=this._metaOpts;try{_.compileSchema.call(this,V)}finally{this.opts=L}}}function oe(p,V,L,Y="error"){for(const le in p)le in V&&this.logger[Y](`${L}: option ${le}. ${p[le]}`)}function ne(p){return p=(0,D.normalizeId)(p),this.schemas[p]||this.refs[p]}function me(){const p=this.opts.schemas;if(p)if(Array.isArray(p))this.addSchema(p);else for(const V in p)this.addSchema(p[V],V)}function pe(){for(const p in this.opts.formats){const V=this.opts.formats[p];V&&this.addFormat(p,V)}}function Ie(p){if(Array.isArray(p))this.addVocabulary(p);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const V in p){const L=p[V];L.keyword||(L.keyword=V),this.addKeyword(L)}}}function E(){const p={...this.opts};for(const V of Z)delete p[V];return p}O.default=Q,Q.ValidationError=G.default,Q.MissingRefError=v.default;const a={log(){},warn(){},error(){}},l=/^[a-z_$][a-z0-9_$:-]*$/i;function h(p,V){const{RULES:L}=this;if((0,M.eachItem)(p,Y=>{if(L.keywords[Y])throw new Error(`Keyword ${Y} is already defined`);if(!l.test(Y))throw new Error(`Keyword ${Y} has invalid name`)}),V&&V.$data&&!("code"in V)&&!("validate"in V))throw new Error('$data keyword must have "code" or "validate" function')}function g(p,V,L){var Y;const le=V?.post;if(L&&le)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Se}=this;let Oe=le?Se.post:Se.rules.find(({type:Re})=>Re===L);if(Oe||(Oe={type:L,rules:[]},Se.rules.push(Oe)),Se.keywords[p]=!0,!V)return;const Ve={keyword:p,definition:{...V,type:(0,$.getJSONTypes)(V.type),schemaType:(0,$.getJSONTypes)(V.schemaType)}};V.before?x.call(this,Oe,Ve,V.before):Oe.rules.push(Ve),Se.all[p]=Ve,null===(Y=V.implements)||void 0===Y||Y.forEach(Re=>this.addKeyword(Re))}function x(p,V,L){const Y=p.rules.findIndex(le=>le.keyword===L);Y>=0?p.rules.splice(Y,0,V):(p.rules.push(V),this.logger.warn(`rule ${L} is not defined`))}function P(p){let{metaSchema:V}=p;void 0!==V&&(p.$data&&this.opts.$data&&(V=d(V)),p.validateSchema=this.compile(V,!0))}const m={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function d(p){return{anyOf:[p,m]}}},87577:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(6438),H=I(59608),N=I(8307),G=I(11082),v=I(93406),B=I(14516),_=I(3059),T=I(18738),D=["/properties"];O.default=function $(M){return[C,H,N,G,v,F(this,B),_,F(this,T)].forEach(k=>this.addMetaSchema(k,void 0,!1)),this;function F(k,j){return M?k.$dataMetaSchema(j,D):j}}},92281:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(40362);C.code='require("ajv/dist/runtime/equal").default',O.default=C},26488:(xe,O)=>{"use strict";function I(C){const H=C.length;let v,N=0,G=0;for(;G<H;)N++,v=C.charCodeAt(G++),v>=55296&&v<=56319&&G<H&&(v=C.charCodeAt(G),56320==(64512&v)&&G++);return N}Object.defineProperty(O,"__esModule",{value:!0}),O.default=I,I.code='require("ajv/dist/runtime/ucs2length").default'},13203:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(95568);C.code='require("ajv/dist/runtime/uri").default',O.default=C},42467:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});class I extends Error{constructor(H){super("validation failed"),this.errors=H,this.ajv=this.validation=!0}}O.default=I},46934:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.validateAdditionalItems=void 0;const C=I(1038),H=I(27006),G={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:B}})=>C.str`must NOT have more than ${B} items`,params:({params:{len:B}})=>C._`{limit: ${B}}`},code(B){const{parentSchema:_,it:T}=B,{items:D}=_;Array.isArray(D)?v(B,D):(0,H.checkStrictMode)(T,'"additionalItems" is ignored when "items" is not an array of schemas')}};function v(B,_){const{gen:T,schema:D,data:$,keyword:M,it:F}=B;F.items=!0;const k=T.const("len",C._`${$}.length`);if(!1===D)B.setParams({len:_.length}),B.pass(C._`${k} <= ${_.length}`);else if("object"==typeof D&&!(0,H.alwaysValidSchema)(F,D)){const Z=T.var("valid",C._`${k} <= ${_.length}`);T.if((0,C.not)(Z),()=>function j(Z){T.forRange("i",_.length,k,q=>{B.subschema({keyword:M,dataProp:q,dataPropType:H.Type.Num},Z),F.allErrors||T.if((0,C.not)(Z),()=>T.break())})}(Z)),B.ok(Z)}}O.validateAdditionalItems=v,O.default=G},18445:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(42406),H=I(1038),N=I(23432),G=I(27006);O.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:_})=>H._`{additionalProperty: ${_.additionalProperty}}`},code(_){const{gen:T,schema:D,parentSchema:$,data:M,errsCount:F,it:k}=_;if(!F)throw new Error("ajv implementation error");const{allErrors:j,opts:Z}=k;if(k.props=!0,"all"!==Z.removeAdditional&&(0,G.alwaysValidSchema)(k,D))return;const q=(0,C.allSchemaProperties)($.properties),W=(0,C.allSchemaProperties)($.patternProperties);function X(ne){T.code(H._`delete ${M}[${ne}]`)}function Q(ne){if("all"===Z.removeAdditional||Z.removeAdditional&&!1===D)X(ne);else{if(!1===D)return _.setParams({additionalProperty:ne}),_.error(),void(j||T.break());if("object"==typeof D&&!(0,G.alwaysValidSchema)(k,D)){const me=T.name("valid");"failing"===Z.removeAdditional?(oe(ne,me,!1),T.if((0,H.not)(me),()=>{_.reset(),X(ne)})):(oe(ne,me),j||T.if((0,H.not)(me),()=>T.break()))}}}function oe(ne,me,pe){const Ie={keyword:"additionalProperties",dataProp:ne,dataPropType:G.Type.Str};!1===pe&&Object.assign(Ie,{compositeRule:!0,createErrors:!1,allErrors:!1}),_.subschema(Ie,me)}(function K(){T.forIn("key",M,ne=>{q.length||W.length?T.if(function J(ne){let me;if(q.length>8){const pe=(0,G.schemaRefOrVal)(k,$.properties,"properties");me=(0,C.isOwnProperty)(T,pe,ne)}else me=q.length?(0,H.or)(...q.map(pe=>H._`${ne} === ${pe}`)):H.nil;return W.length&&(me=(0,H.or)(me,...W.map(pe=>H._`${(0,C.usePattern)(_,pe)}.test(${ne})`))),(0,H.not)(me)}(ne),()=>Q(ne)):Q(ne)})})(),_.ok(H._`${F} === ${N.default.errors}`)}}},77783:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(27006);O.default={keyword:"allOf",schemaType:"array",code(N){const{gen:G,schema:v,it:B}=N;if(!Array.isArray(v))throw new Error("ajv implementation error");const _=G.name("valid");v.forEach((T,D)=>{if((0,C.alwaysValidSchema)(B,T))return;const $=N.subschema({keyword:"allOf",schemaProp:D},_);N.ok(_),N.mergeEvaluated($)})}}},60922:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const H={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:I(42406).validateUnion,error:{message:"must match a schema in anyOf"}};O.default=H},57568:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006);O.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:v,max:B}})=>void 0===B?C.str`must contain at least ${v} valid item(s)`:C.str`must contain at least ${v} and no more than ${B} valid item(s)`,params:({params:{min:v,max:B}})=>void 0===B?C._`{minContains: ${v}}`:C._`{minContains: ${v}, maxContains: ${B}}`},code(v){const{gen:B,schema:_,parentSchema:T,data:D,it:$}=v;let M,F;const{minContains:k,maxContains:j}=T;$.opts.next?(M=void 0===k?1:k,F=j):M=1;const Z=B.const("len",C._`${D}.length`);if(v.setParams({min:M,max:F}),void 0===F&&0===M)return void(0,H.checkStrictMode)($,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==F&&M>F)return(0,H.checkStrictMode)($,'"minContains" > "maxContains" is always invalid'),void v.fail();if((0,H.alwaysValidSchema)($,_)){let X=C._`${Z} >= ${M}`;return void 0!==F&&(X=C._`${X} && ${Z} <= ${F}`),void v.pass(X)}$.items=!0;const q=B.name("valid");function W(){const X=B.name("_valid"),Q=B.let("count",0);K(X,()=>B.if(X,()=>function J(X){B.code(C._`${X}++`),void 0===F?B.if(C._`${X} >= ${M}`,()=>B.assign(q,!0).break()):(B.if(C._`${X} > ${F}`,()=>B.assign(q,!1).break()),1===M?B.assign(q,!0):B.if(C._`${X} >= ${M}`,()=>B.assign(q,!0)))}(Q)))}function K(X,Q){B.forRange("i",0,Z,oe=>{v.subschema({keyword:"contains",dataProp:oe,dataPropType:H.Type.Num,compositeRule:!0},X),Q()})}void 0===F&&1===M?K(q,()=>B.if(q,()=>B.break())):0===M?(B.let(q,!0),void 0!==F&&B.if(C._`${D}.length > 0`,W)):(B.let(q,!1),W()),v.result(q,()=>v.reset())}}},68032:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.validateSchemaDeps=O.validatePropertyDeps=O.error=void 0;const C=I(1038),H=I(27006),N=I(42406);O.error={message:({params:{property:T,depsCount:D,deps:$}})=>C.str`must have ${1===D?"property":"properties"} ${$} when property ${T} is present`,params:({params:{property:T,depsCount:D,deps:$,missingProperty:M}})=>C._`{property: ${T},
    missingProperty: ${M},
    depsCount: ${D},
    deps: ${$}}`};const G={keyword:"dependencies",type:"object",schemaType:"object",error:O.error,code(T){const[D,$]=function v({schema:T}){const D={},$={};for(const M in T)"__proto__"!==M&&((Array.isArray(T[M])?D:$)[M]=T[M]);return[D,$]}(T);B(T,D),_(T,$)}};function B(T,D=T.schema){const{gen:$,data:M,it:F}=T;if(0===Object.keys(D).length)return;const k=$.let("missing");for(const j in D){const Z=D[j];if(0===Z.length)continue;const q=(0,N.propertyInData)($,M,j,F.opts.ownProperties);T.setParams({property:j,depsCount:Z.length,deps:Z.join(", ")}),F.allErrors?$.if(q,()=>{for(const W of Z)(0,N.checkReportMissingProp)(T,W)}):($.if(C._`${q} && (${(0,N.checkMissingProp)(T,Z,k)})`),(0,N.reportMissingProp)(T,k),$.else())}}function _(T,D=T.schema){const{gen:$,data:M,keyword:F,it:k}=T,j=$.name("valid");for(const Z in D)(0,H.alwaysValidSchema)(k,D[Z])||($.if((0,N.propertyInData)($,M,Z,k.opts.ownProperties),()=>{const q=T.subschema({keyword:F,schemaProp:Z},j);T.mergeValidEvaluated(q,j)},()=>$.var(j,!0)),T.ok(j))}O.validatePropertyDeps=B,O.validateSchemaDeps=_,O.default=G},85164:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(68032);O.default={keyword:"dependentSchemas",type:"object",schemaType:"object",code:N=>(0,C.validateSchemaDeps)(N)}},45226:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006);function v(B,_){const T=B.schema[_];return void 0!==T&&!(0,H.alwaysValidSchema)(B,T)}O.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:B})=>C.str`must match "${B.ifClause}" schema`,params:({params:B})=>C._`{failingKeyword: ${B.ifClause}}`},code(B){const{gen:_,parentSchema:T,it:D}=B;void 0===T.then&&void 0===T.else&&(0,H.checkStrictMode)(D,'"if" without "then" and "else" is ignored');const $=v(D,"then"),M=v(D,"else");if(!$&&!M)return;const F=_.let("valid",!0),k=_.name("_valid");if(function j(){const q=B.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},k);B.mergeEvaluated(q)}(),B.reset(),$&&M){const q=_.let("ifClause");B.setParams({ifClause:q}),_.if(k,Z("then",q),Z("else",q))}else $?_.if(k,Z("then")):_.if((0,C.not)(k),Z("else"));function Z(q,W){return()=>{const K=B.subschema({keyword:q},k);_.assign(F,k),B.mergeValidEvaluated(K,F),W?_.assign(W,C._`${q}`):B.setParams({ifClause:q})}}B.pass(F,()=>B.error(!0))}}},68261:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(46934),H=I(96537),N=I(2941),G=I(5261),v=I(57568),B=I(68032),_=I(36474),T=I(18445),D=I(34032),$=I(17330),M=I(3408),F=I(60922),k=I(88388),j=I(77783),Z=I(45226),q=I(98779);O.default=function W(K=!1){const J=[M.default,F.default,k.default,j.default,Z.default,q.default,_.default,T.default,B.default,D.default,$.default];return K?J.push(H.default,G.default):J.push(C.default,N.default),J.push(v.default),J}},2941:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.validateTuple=void 0;const C=I(1038),H=I(27006),N=I(42406),G={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(B){const{schema:_,it:T}=B;if(Array.isArray(_))return v(B,"additionalItems",_);T.items=!0,!(0,H.alwaysValidSchema)(T,_)&&B.ok((0,N.validateArray)(B))}};function v(B,_,T=B.schema){const{gen:D,parentSchema:$,data:M,keyword:F,it:k}=B;(function q(W){const{opts:K,errSchemaPath:J}=k,X=T.length;K.strictTuples&&!(X===W.minItems&&(X===W.maxItems||!1===W[_]))&&(0,H.checkStrictMode)(k,`"${F}" is ${X}-tuple, but minItems or maxItems/${_} are not specified or different at path "${J}"`,K.strictTuples)})($),k.opts.unevaluated&&T.length&&!0!==k.items&&(k.items=H.mergeEvaluated.items(D,T.length,k.items));const j=D.name("valid"),Z=D.const("len",C._`${M}.length`);T.forEach((W,K)=>{(0,H.alwaysValidSchema)(k,W)||(D.if(C._`${Z} > ${K}`,()=>B.subschema({keyword:F,schemaProp:K,dataProp:K},j)),B.ok(j))})}O.validateTuple=v,O.default=G},5261:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006),N=I(42406),G=I(46934);O.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:_}})=>C.str`must NOT have more than ${_} items`,params:({params:{len:_}})=>C._`{limit: ${_}}`},code(_){const{schema:T,parentSchema:D,it:$}=_,{prefixItems:M}=D;$.items=!0,!(0,H.alwaysValidSchema)($,T)&&(M?(0,G.validateAdditionalItems)(_,M):_.ok((0,N.validateArray)(_)))}}},3408:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(27006);O.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(N){const{gen:G,schema:v,it:B}=N;if((0,C.alwaysValidSchema)(B,v))return void N.fail();const _=G.name("valid");N.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},_),N.failResult(_,()=>N.reset(),()=>N.error())},error:{message:"must NOT be valid"}}},88388:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006);O.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:v})=>C._`{passingSchemas: ${v.passing}}`},code(v){const{gen:B,schema:_,parentSchema:T,it:D}=v;if(!Array.isArray(_))throw new Error("ajv implementation error");if(D.opts.discriminator&&T.discriminator)return;const $=_,M=B.let("valid",!1),F=B.let("passing",null),k=B.name("_valid");v.setParams({passing:F}),B.block(function j(){$.forEach((Z,q)=>{let W;(0,H.alwaysValidSchema)(D,Z)?B.var(k,!0):W=v.subschema({keyword:"oneOf",schemaProp:q,compositeRule:!0},k),q>0&&B.if(C._`${k} && ${M}`).assign(M,!1).assign(F,C._`[${F}, ${q}]`).else(),B.if(k,()=>{B.assign(M,!0),B.assign(F,q),W&&v.mergeEvaluated(W,C.Name)})})}),v.result(M,()=>v.reset(),()=>v.error(!0))}}},17330:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(42406),H=I(1038),N=I(27006),G=I(27006);O.default={keyword:"patternProperties",type:"object",schemaType:"object",code(B){const{gen:_,schema:T,data:D,parentSchema:$,it:M}=B,{opts:F}=M,k=(0,C.allSchemaProperties)(T),j=k.filter(Q=>(0,N.alwaysValidSchema)(M,T[Q]));if(0===k.length||j.length===k.length&&(!M.opts.unevaluated||!0===M.props))return;const Z=F.strictSchema&&!F.allowMatchingProperties&&$.properties,q=_.name("valid");!0!==M.props&&!(M.props instanceof H.Name)&&(M.props=(0,G.evaluatedPropsToName)(_,M.props));const{props:W}=M;function J(Q){for(const oe in Z)new RegExp(Q).test(oe)&&(0,N.checkStrictMode)(M,`property ${oe} matches pattern ${Q} (use allowMatchingProperties)`)}function X(Q){_.forIn("key",D,oe=>{_.if(H._`${(0,C.usePattern)(B,Q)}.test(${oe})`,()=>{const ne=j.includes(Q);ne||B.subschema({keyword:"patternProperties",schemaProp:Q,dataProp:oe,dataPropType:G.Type.Str},q),M.opts.unevaluated&&!0!==W?_.assign(H._`${W}[${oe}]`,!0):!ne&&!M.allErrors&&_.if((0,H.not)(q),()=>_.break())})})}!function K(){for(const Q of k)Z&&J(Q),M.allErrors?X(Q):(_.var(q,!0),X(Q),_.if(q))}()}}},96537:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(2941);O.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:N=>(0,C.validateTuple)(N,"items")}},34032:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(40339),H=I(42406),N=I(27006),G=I(18445);O.default={keyword:"properties",type:"object",schemaType:"object",code(B){const{gen:_,schema:T,parentSchema:D,data:$,it:M}=B;"all"===M.opts.removeAdditional&&void 0===D.additionalProperties&&G.default.code(new C.KeywordCxt(M,G.default,"additionalProperties"));const F=(0,H.allSchemaProperties)(T);for(const W of F)M.definedProperties.add(W);M.opts.unevaluated&&F.length&&!0!==M.props&&(M.props=N.mergeEvaluated.props(_,(0,N.toHash)(F),M.props));const k=F.filter(W=>!(0,N.alwaysValidSchema)(M,T[W]));if(0===k.length)return;const j=_.name("valid");for(const W of k)Z(W)?q(W):(_.if((0,H.propertyInData)(_,$,W,M.opts.ownProperties)),q(W),M.allErrors||_.else().var(j,!0),_.endIf()),B.it.definedProperties.add(W),B.ok(j);function Z(W){return M.opts.useDefaults&&!M.compositeRule&&void 0!==T[W].default}function q(W){B.subschema({keyword:"properties",schemaProp:W,dataProp:W},j)}}}},36474:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006);O.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:v})=>C._`{propertyName: ${v.propertyName}}`},code(v){const{gen:B,schema:_,data:T,it:D}=v;if((0,H.alwaysValidSchema)(D,_))return;const $=B.name("valid");B.forIn("key",T,M=>{v.setParams({propertyName:M}),v.subschema({keyword:"propertyNames",data:M,dataTypes:["string"],propertyName:M,compositeRule:!0},$),B.if((0,C.not)($),()=>{v.error(!0),D.allErrors||B.break()})}),v.ok($)}}},98779:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(27006);O.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:N,parentSchema:G,it:v}){void 0===G.if&&(0,C.checkStrictMode)(v,`"${N}" without "if" is ignored`)}}},42406:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.validateUnion=O.validateArray=O.usePattern=O.callValidateCode=O.schemaProperties=O.allSchemaProperties=O.noPropertyInData=O.propertyInData=O.isOwnProperty=O.hasPropFunc=O.reportMissingProp=O.checkMissingProp=O.checkReportMissingProp=void 0;const C=I(1038),H=I(27006),N=I(23432),G=I(27006);function T(J){return J.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:C._`Object.prototype.hasOwnProperty`})}function D(J,X,Q){return C._`${T(J)}.call(${X}, ${Q})`}function M(J,X,Q,oe){const ne=C._`${X}${(0,C.getProperty)(Q)} === undefined`;return oe?(0,C.or)(ne,(0,C.not)(D(J,X,Q))):ne}function F(J){return J?Object.keys(J).filter(X=>"__proto__"!==X):[]}O.checkReportMissingProp=function v(J,X){const{gen:Q,data:oe,it:ne}=J;Q.if(M(Q,oe,X,ne.opts.ownProperties),()=>{J.setParams({missingProperty:C._`${X}`},!0),J.error()})},O.checkMissingProp=function B({gen:J,data:X,it:{opts:Q}},oe,ne){return(0,C.or)(...oe.map(me=>(0,C.and)(M(J,X,me,Q.ownProperties),C._`${ne} = ${me}`)))},O.reportMissingProp=function _(J,X){J.setParams({missingProperty:X},!0),J.error()},O.hasPropFunc=T,O.isOwnProperty=D,O.propertyInData=function $(J,X,Q,oe){const ne=C._`${X}${(0,C.getProperty)(Q)} !== undefined`;return oe?C._`${ne} && ${D(J,X,Q)}`:ne},O.noPropertyInData=M,O.allSchemaProperties=F,O.schemaProperties=function k(J,X){return F(X).filter(Q=>!(0,H.alwaysValidSchema)(J,X[Q]))},O.callValidateCode=function j({schemaCode:J,data:X,it:{gen:Q,topSchemaRef:oe,schemaPath:ne,errorPath:me},it:pe},Ie,E,a){const f=a?C._`${J}, ${X}, ${oe}${ne}`:X,l=[[N.default.instancePath,(0,C.strConcat)(N.default.instancePath,me)],[N.default.parentData,pe.parentData],[N.default.parentDataProperty,pe.parentDataProperty],[N.default.rootData,N.default.rootData]];pe.opts.dynamicRef&&l.push([N.default.dynamicAnchors,N.default.dynamicAnchors]);const h=C._`${f}, ${Q.object(...l)}`;return E!==C.nil?C._`${Ie}.call(${E}, ${h})`:C._`${Ie}(${h})`};const Z=C._`new RegExp`;O.usePattern=function q({gen:J,it:{opts:X}},Q){const oe=X.unicodeRegExp?"u":"",{regExp:ne}=X.code,me=ne(Q,oe);return J.scopeValue("pattern",{key:me.toString(),ref:me,code:C._`${"new RegExp"===ne.code?Z:(0,G.useFunc)(J,ne)}(${Q}, ${oe})`})},O.validateArray=function W(J){const{gen:X,data:Q,keyword:oe,it:ne}=J,me=X.name("valid");if(ne.allErrors){const Ie=X.let("valid",!0);return pe(()=>X.assign(Ie,!1)),Ie}return X.var(me,!0),pe(()=>X.break()),me;function pe(Ie){const E=X.const("len",C._`${Q}.length`);X.forRange("i",0,E,a=>{J.subschema({keyword:oe,dataProp:a,dataPropType:H.Type.Num},me),X.if((0,C.not)(me),Ie)})}},O.validateUnion=function K(J){const{gen:X,schema:Q,keyword:oe,it:ne}=J;if(!Array.isArray(Q))throw new Error("ajv implementation error");if(Q.some(E=>(0,H.alwaysValidSchema)(ne,E))&&!ne.opts.unevaluated)return;const pe=X.let("valid",!1),Ie=X.name("_valid");X.block(()=>Q.forEach((E,a)=>{const f=J.subschema({keyword:oe,schemaProp:a,compositeRule:!0},Ie);X.assign(pe,C._`${pe} || ${Ie}`),J.mergeValidEvaluated(f,Ie)||X.if((0,C.not)(pe))})),J.result(pe,()=>J.reset(),()=>J.error(!0))}},36846:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.default={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},11867:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(36846),H=I(84862);O.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",C.default,H.default]},84862:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.callRef=O.getValidate=void 0;const C=I(26288),H=I(42406),N=I(1038),G=I(23432),v=I(97692),B=I(27006),_={keyword:"$ref",schemaType:"string",code($){const{gen:M,schema:F,it:k}=$,{baseId:j,schemaEnv:Z,validateName:q,opts:W,self:K}=k,{root:J}=Z;if(("#"===F||"#/"===F)&&j===J.baseId)return function Q(){if(Z===J)return D($,q,Z,Z.$async);const me=M.scopeValue("root",{ref:J});return D($,N._`${me}.validate`,J,J.$async)}();const X=v.resolveRef.call(K,J,j,F);if(void 0===X)throw new C.default(k.opts.uriResolver,j,F);return X instanceof v.SchemaEnv?function oe(me){const pe=T($,me);D($,pe,me,me.$async)}(X):function ne(me){const pe=M.scopeValue("schema",!0===W.code.source?{ref:me,code:(0,N.stringify)(me)}:{ref:me}),Ie=M.name("valid"),E=$.subschema({schema:me,dataTypes:[],schemaPath:N.nil,topSchemaRef:pe,errSchemaPath:F},Ie);$.mergeEvaluated(E),$.ok(Ie)}(X)}};function T($,M){const{gen:F}=$;return M.validate?F.scopeValue("validate",{ref:M.validate}):N._`${F.scopeValue("wrapper",{ref:M})}.validate`}function D($,M,F,k){const{gen:j,it:Z}=$,{allErrors:q,schemaEnv:W,opts:K}=Z,J=K.passContext?G.default.this:N.nil;function oe(me){const pe=N._`${me}.errors`;j.assign(G.default.vErrors,N._`${G.default.vErrors} === null ? ${pe} : ${G.default.vErrors}.concat(${pe})`),j.assign(G.default.errors,N._`${G.default.vErrors}.length`)}function ne(me){var pe;if(!Z.opts.unevaluated)return;const Ie=null===(pe=F?.validate)||void 0===pe?void 0:pe.evaluated;if(!0!==Z.props)if(Ie&&!Ie.dynamicProps)void 0!==Ie.props&&(Z.props=B.mergeEvaluated.props(j,Ie.props,Z.props));else{const E=j.var("props",N._`${me}.evaluated.props`);Z.props=B.mergeEvaluated.props(j,E,Z.props,N.Name)}if(!0!==Z.items)if(Ie&&!Ie.dynamicItems)void 0!==Ie.items&&(Z.items=B.mergeEvaluated.items(j,Ie.items,Z.items));else{const E=j.var("items",N._`${me}.evaluated.items`);Z.items=B.mergeEvaluated.items(j,E,Z.items,N.Name)}}k?function X(){if(!W.$async)throw new Error("async schema referenced by sync schema");const me=j.let("valid");j.try(()=>{j.code(N._`await ${(0,H.callValidateCode)($,M,J)}`),ne(M),q||j.assign(me,!0)},pe=>{j.if(N._`!(${pe} instanceof ${Z.ValidationError})`,()=>j.throw(pe)),oe(pe),q||j.assign(me,!1)}),$.ok(me)}():function Q(){$.result((0,H.callValidateCode)($,M,J),()=>ne(M),()=>oe(M))}()}O.getValidate=T,O.callRef=D,O.default=_},86980:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(22145),N=I(97692),G=I(27006);O.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:_,tagName:T}})=>_===H.DiscrError.Tag?`tag "${T}" must be string`:`value of tag "${T}" must be in oneOf`,params:({params:{discrError:_,tag:T,tagName:D}})=>C._`{error: ${_}, tag: ${D}, tagValue: ${T}}`},code(_){const{gen:T,data:D,schema:$,parentSchema:M,it:F}=_,{oneOf:k}=M;if(!F.opts.discriminator)throw new Error("discriminator: requires discriminator option");const j=$.propertyName;if("string"!=typeof j)throw new Error("discriminator: requires propertyName");if($.mapping)throw new Error("discriminator: mapping is not supported");if(!k)throw new Error("discriminator: requires oneOf keyword");const Z=T.let("valid",!1),q=T.const("tag",C._`${D}${(0,C.getProperty)(j)}`);function K(X){const Q=T.name("valid"),oe=_.subschema({keyword:"oneOf",schemaProp:X},Q);return _.mergeEvaluated(oe,C.Name),Q}T.if(C._`typeof ${q} == "string"`,()=>function W(){const X=function J(){var X;const Q={},oe=me(M);let ne=!0;for(let E=0;E<k.length;E++){let a=k[E];a?.$ref&&!(0,G.schemaHasRulesButRef)(a,F.self.RULES)&&(a=N.resolveRef.call(F.self,F.schemaEnv.root,F.baseId,a?.$ref),a instanceof N.SchemaEnv&&(a=a.schema));const f=null===(X=a?.properties)||void 0===X?void 0:X[j];if("object"!=typeof f)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${j}"`);ne=ne&&(oe||me(a)),pe(f,E)}if(!ne)throw new Error(`discriminator: "${j}" must be required`);return Q;function me({required:E}){return Array.isArray(E)&&E.includes(j)}function pe(E,a){if(E.const)Ie(E.const,a);else{if(!E.enum)throw new Error(`discriminator: "properties/${j}" must have "const" or "enum"`);for(const f of E.enum)Ie(f,a)}}function Ie(E,a){if("string"!=typeof E||E in Q)throw new Error(`discriminator: "${j}" values must be unique strings`);Q[E]=a}}();T.if(!1);for(const Q in X)T.elseIf(C._`${q} === ${Q}`),T.assign(Z,K(X[Q]));T.else(),_.error(!1,{discrError:H.DiscrError.Mapping,tag:q,tagName:j}),T.endIf()}(),()=>_.error(!1,{discrError:H.DiscrError.Tag,tag:q,tagName:j})),_.ok(Z)}}},22145:(xe,O)=>{"use strict";var C;Object.defineProperty(O,"__esModule",{value:!0}),O.DiscrError=void 0,(C=O.DiscrError||(O.DiscrError={})).Tag="tag",C.Mapping="mapping"},98496:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(11867),H=I(64023),N=I(68261),G=I(79745),v=I(54458),B=I(77616),_=I(23463),T=I(3462),D=[G.default,C.default,H.default,(0,N.default)(!0),_.default,T.metadataVocabulary,T.contentVocabulary,v.default,B.default];O.default=D},61281:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.dynamicAnchor=void 0;const C=I(1038),H=I(23432),N=I(97692),G=I(84862),v={keyword:"$dynamicAnchor",schemaType:"string",code:T=>B(T,T.schema)};function B(T,D){const{gen:$,it:M}=T;M.schemaEnv.root.dynamicAnchors[D]=!0;const F=C._`${H.default.dynamicAnchors}${(0,C.getProperty)(D)}`,k="#"===M.errSchemaPath?M.validateName:function _(T){const{schemaEnv:D,schema:$,self:M}=T.it,{root:F,baseId:k,localRefs:j,meta:Z}=D.root,{schemaId:q}=M.opts,W=new N.SchemaEnv({schema:$,schemaId:q,root:F,baseId:k,localRefs:j,meta:Z});return N.compileSchema.call(M,W),(0,G.getValidate)(T,W)}(T);$.if(C._`!${F}`,()=>$.assign(F,k))}O.dynamicAnchor=B,O.default=v},35207:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.dynamicRef=void 0;const C=I(1038),H=I(23432),N=I(84862),G={keyword:"$dynamicRef",schemaType:"string",code:B=>v(B,B.schema)};function v(B,_){const{gen:T,keyword:D,it:$}=B;if("#"!==_[0])throw new Error(`"${D}" only supports hash fragment reference`);const M=_.slice(1);if($.allErrors)F();else{const j=T.let("valid",!1);F(j),B.ok(j)}function F(j){if($.schemaEnv.root.dynamicAnchors[M]){const Z=T.let("_v",C._`${H.default.dynamicAnchors}${(0,C.getProperty)(M)}`);T.if(Z,k(Z,j),k($.validateName,j))}else k($.validateName,j)()}function k(j,Z){return Z?()=>T.block(()=>{(0,N.callRef)(B,j),T.let(Z,!0)}):()=>(0,N.callRef)(B,j)}}O.dynamicRef=v,O.default=G},79745:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(61281),H=I(35207),N=I(34028),G=I(65684);O.default=[C.default,H.default,N.default,G.default]},34028:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(61281),H=I(27006);O.default={keyword:"$recursiveAnchor",schemaType:"boolean",code(G){G.schema?(0,C.dynamicAnchor)(G,""):(0,H.checkStrictMode)(G.it,"$recursiveAnchor: false is ignored")}}},65684:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(35207);O.default={keyword:"$recursiveRef",schemaType:"string",code:N=>(0,C.dynamicRef)(N,N.schema)}},98140:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038);O.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:G})=>C.str`must match format "${G}"`,params:({schemaCode:G})=>C._`{format: ${G}}`},code(G,v){const{gen:B,data:_,$data:T,schema:D,schemaCode:$,it:M}=G,{opts:F,errSchemaPath:k,schemaEnv:j,self:Z}=M;F.validateFormats&&(T?function q(){const K=B.scopeValue("formats",{ref:Z.formats,code:F.code.formats}),J=B.const("fDef",C._`${K}[${$}]`),X=B.let("fType"),Q=B.let("format");B.if(C._`typeof ${J} == "object" && !(${J} instanceof RegExp)`,()=>B.assign(X,C._`${J}.type || "string"`).assign(Q,C._`${J}.validate`),()=>B.assign(X,C._`"string"`).assign(Q,J)),G.fail$data((0,C.or)(function oe(){return!1===F.strictSchema?C.nil:C._`${$} && !${Q}`}(),function ne(){const me=j.$async?C._`(${J}.async ? await ${Q}(${_}) : ${Q}(${_}))`:C._`${Q}(${_})`,pe=C._`(typeof ${Q} == "function" ? ${me} : ${Q}.test(${_}))`;return C._`${Q} && ${Q} !== true && ${X} === ${v} && !${pe}`}()))}():function W(){const K=Z.formats[D];if(!K)return void function oe(){if(!1!==F.strictSchema)throw new Error(pe());function pe(){return`unknown format "${D}" ignored in schema at path "${k}"`}Z.logger.warn(pe())}();if(!0===K)return;const[J,X,Q]=function ne(pe){const Ie=pe instanceof RegExp?(0,C.regexpCode)(pe):F.code.formats?C._`${F.code.formats}${(0,C.getProperty)(D)}`:void 0,E=B.scopeValue("formats",{key:D,ref:pe,code:Ie});return"object"!=typeof pe||pe instanceof RegExp?["string",pe,E]:[pe.type||"string",pe.validate,C._`${E}.validate`]}(K);J===v&&G.pass(function me(){if("object"==typeof K&&!(K instanceof RegExp)&&K.async){if(!j.$async)throw new Error("async format in sync schema");return C._`await ${Q}(${_})`}return"function"==typeof X?C._`${Q}(${_})`:C._`${Q}.test(${_})`}())}())}}},23463:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const H=[I(98140).default];O.default=H},3462:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.contentVocabulary=O.metadataVocabulary=void 0,O.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],O.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},54458:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(53037),H=I(85164),N=I(22705);O.default=[C.default,H.default,N.default]},77616:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(40425),H=I(89826);O.default=[C.default,H.default]},89826:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006);O.default={keyword:"unevaluatedItems",type:"array",schemaType:["boolean","object"],error:{message:({params:{len:v}})=>C.str`must NOT have more than ${v} items`,params:({params:{len:v}})=>C._`{limit: ${v}}`},code(v){const{gen:B,schema:_,data:T,it:D}=v,$=D.items||0;if(!0===$)return;const M=B.const("len",C._`${T}.length`);if(!1===_)v.setParams({len:$}),v.fail(C._`${M} > ${$}`);else if("object"==typeof _&&!(0,H.alwaysValidSchema)(D,_)){const k=B.var("valid",C._`${M} <= ${$}`);B.if((0,C.not)(k),()=>function F(k,j){B.forRange("i",j,M,Z=>{v.subschema({keyword:"unevaluatedItems",dataProp:Z,dataPropType:H.Type.Num},k),D.allErrors||B.if((0,C.not)(k),()=>B.break())})}(k,$)),v.ok(k)}D.items=!0}}},40425:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006),N=I(23432);O.default={keyword:"unevaluatedProperties",type:"object",schemaType:["boolean","object"],trackErrors:!0,error:{message:"must NOT have unevaluated properties",params:({params:B})=>C._`{unevaluatedProperty: ${B.unevaluatedProperty}}`},code(B){const{gen:_,schema:T,data:D,errsCount:$,it:M}=B;if(!$)throw new Error("ajv implementation error");const{allErrors:F,props:k}=M;function j(W){if(!1===T)return B.setParams({unevaluatedProperty:W}),B.error(),void(F||_.break());if(!(0,H.alwaysValidSchema)(M,T)){const K=_.name("valid");B.subschema({keyword:"unevaluatedProperties",dataProp:W,dataPropType:H.Type.Str},K),F||_.if((0,C.not)(K),()=>_.break())}}k instanceof C.Name?_.if(C._`${k} !== true`,()=>_.forIn("key",D,W=>_.if(function Z(W,K){return C._`!${W} || !${W}[${K}]`}(k,W),()=>j(W)))):!0!==k&&_.forIn("key",D,W=>void 0===k?j(W):_.if(function q(W,K){const J=[];for(const X in W)!0===W[X]&&J.push(C._`${K} !== ${X}`);return(0,C.and)(...J)}(k,W),()=>j(W))),M.props=!0,B.ok(C._`${$} === ${N.default.errors}`)}}},90796:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006),N=I(92281);O.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:B})=>C._`{allowedValue: ${B}}`},code(B){const{gen:_,data:T,$data:D,schemaCode:$,schema:M}=B;D||M&&"object"==typeof M?B.fail$data(C._`!${(0,H.useFunc)(_,N.default)}(${T}, ${$})`):B.fail(C._`${M} !== ${T}`)}}},53037:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(68032);O.default={keyword:"dependentRequired",type:"object",schemaType:"object",error:C.error,code:N=>(0,C.validatePropertyDeps)(N)}},65266:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006),N=I(92281);O.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:B})=>C._`{allowedValues: ${B}}`},code(B){const{gen:_,data:T,$data:D,schema:$,schemaCode:M,it:F}=B;if(!D&&0===$.length)throw new Error("enum must have non-empty array");let j;const Z=()=>j??(j=(0,H.useFunc)(_,N.default));let q;if($.length>=F.opts.loopEnum||D)q=_.let("valid"),B.block$data(q,function W(){_.assign(q,!1),_.forOf("v",M,J=>_.if(C._`${Z()}(${T}, ${J})`,()=>_.assign(q,!0).break()))});else{if(!Array.isArray($))throw new Error("ajv implementation error");const J=_.const("vSchema",M);q=(0,C.or)(...$.map((X,Q)=>function K(J,X){const Q=$[X];return"object"==typeof Q&&null!==Q?C._`${Z()}(${T}, ${J}[${X}])`:C._`${T} === ${Q}`}(J,Q)))}B.pass(q)}}},64023:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(78665),H=I(30554),N=I(13972),G=I(68753),v=I(99169),B=I(56454),_=I(85962),T=I(16598),D=I(90796),$=I(65266);O.default=[C.default,H.default,N.default,G.default,v.default,B.default,_.default,T.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},D.default,$.default]},22705:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(27006);O.default={keyword:["maxContains","minContains"],type:"array",schemaType:"number",code({keyword:N,parentSchema:G,it:v}){void 0===G.contains&&(0,C.checkStrictMode)(v,`"${N}" without "contains" is ignored`)}}},85962:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038);O.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:G,schemaCode:v})=>C.str`must NOT have ${"maxItems"===G?"more":"fewer"} than ${v} items`,params:({schemaCode:G})=>C._`{limit: ${G}}`},code(G){const{keyword:v,data:B,schemaCode:_}=G;G.fail$data(C._`${B}.length ${"maxItems"===v?C.operators.GT:C.operators.LT} ${_}`)}}},13972:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=I(27006),N=I(26488);O.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:B,schemaCode:_})=>C.str`must NOT have ${"maxLength"===B?"more":"fewer"} than ${_} characters`,params:({schemaCode:B})=>C._`{limit: ${B}}`},code(B){const{keyword:_,data:T,schemaCode:D,it:$}=B,M="maxLength"===_?C.operators.GT:C.operators.LT,F=!1===$.opts.unicode?C._`${T}.length`:C._`${(0,H.useFunc)(B.gen,N.default)}(${T})`;B.fail$data(C._`${F} ${M} ${D}`)}}},78665:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038),H=C.operators,N={maximum:{okStr:"<=",ok:H.LTE,fail:H.GT},minimum:{okStr:">=",ok:H.GTE,fail:H.LT},exclusiveMaximum:{okStr:"<",ok:H.LT,fail:H.GTE},exclusiveMinimum:{okStr:">",ok:H.GT,fail:H.LTE}},G={message:({keyword:B,schemaCode:_})=>C.str`must be ${N[B].okStr} ${_}`,params:({keyword:B,schemaCode:_})=>C._`{comparison: ${N[B].okStr}, limit: ${_}}`},v={keyword:Object.keys(N),type:"number",schemaType:"number",$data:!0,error:G,code(B){const{keyword:_,data:T,schemaCode:D}=B;B.fail$data(C._`${T} ${N[_].fail} ${D} || isNaN(${T})`)}};O.default=v},99169:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038);O.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:G,schemaCode:v})=>C.str`must NOT have ${"maxProperties"===G?"more":"fewer"} than ${v} properties`,params:({schemaCode:G})=>C._`{limit: ${G}}`},code(G){const{keyword:v,data:B,schemaCode:_}=G;G.fail$data(C._`Object.keys(${B}).length ${"maxProperties"===v?C.operators.GT:C.operators.LT} ${_}`)}}},30554:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(1038);O.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:G})=>C.str`must be multiple of ${G}`,params:({schemaCode:G})=>C._`{multipleOf: ${G}}`},code(G){const{gen:v,data:B,schemaCode:_,it:T}=G,D=T.opts.multipleOfPrecision,$=v.let("res"),M=D?C._`Math.abs(Math.round(${$}) - ${$}) > 1e-${D}`:C._`${$} !== parseInt(${$})`;G.fail$data(C._`(${_} === 0 || (${$} = ${B}/${_}, ${M}))`)}}},68753:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(42406),H=I(1038);O.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:v})=>H.str`must match pattern "${v}"`,params:({schemaCode:v})=>H._`{pattern: ${v}}`},code(v){const{data:B,$data:_,schema:T,schemaCode:D,it:$}=v,F=_?H._`(new RegExp(${D}, ${$.opts.unicodeRegExp?"u":""}))`:(0,C.usePattern)(v,T);v.fail$data(H._`!${F}.test(${B})`)}}},56454:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(42406),H=I(1038),N=I(27006);O.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:B}})=>H.str`must have required property '${B}'`,params:({params:{missingProperty:B}})=>H._`{missingProperty: ${B}}`},code(B){const{gen:_,schema:T,schemaCode:D,data:$,$data:M,it:F}=B,{opts:k}=F;if(!M&&0===T.length)return;const j=T.length>=k.loopRequired;if(F.allErrors?function Z(){if(j||M)B.block$data(H.nil,W);else for(const J of T)(0,C.checkReportMissingProp)(B,J)}():function q(){const J=_.let("missing");if(j||M){const X=_.let("valid",!0);B.block$data(X,()=>function K(J,X){B.setParams({missingProperty:J}),_.forOf(J,D,()=>{_.assign(X,(0,C.propertyInData)(_,$,J,k.ownProperties)),_.if((0,H.not)(X),()=>{B.error(),_.break()})},H.nil)}(J,X)),B.ok(X)}else _.if((0,C.checkMissingProp)(B,T,J)),(0,C.reportMissingProp)(B,J),_.else()}(),k.strictRequired){const J=B.parentSchema.properties,{definedProperties:X}=B.it;for(const Q of T)void 0!==J?.[Q]||X.has(Q)||(0,N.checkStrictMode)(F,`required property "${Q}" is not defined at "${F.schemaEnv.baseId+F.errSchemaPath}" (strictRequired)`,F.opts.strictRequired)}function W(){_.forOf("prop",D,J=>{B.setParams({missingProperty:J}),_.if((0,C.noPropertyInData)(_,$,J,k.ownProperties),()=>B.error())})}}}},16598:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});const C=I(55999),H=I(1038),N=I(27006),G=I(92281);O.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:_,j:T}})=>H.str`must NOT have duplicate items (items ## ${T} and ${_} are identical)`,params:({params:{i:_,j:T}})=>H._`{i: ${_}, j: ${T}}`},code(_){const{gen:T,data:D,$data:$,schema:M,parentSchema:F,schemaCode:k,it:j}=_;if(!$&&!M)return;const Z=T.let("valid"),q=F.items?(0,C.getSchemaTypes)(F.items):[];function J(Q,oe){const ne=T.name("item"),me=(0,C.checkDataTypes)(q,ne,j.opts.strictNumbers,C.DataType.Wrong),pe=T.const("indices",H._`{}`);T.for(H._`;${Q}--;`,()=>{T.let(ne,H._`${D}[${Q}]`),T.if(me,H._`continue`),q.length>1&&T.if(H._`typeof ${ne} == "string"`,H._`${ne} += "_"`),T.if(H._`typeof ${pe}[${ne}] == "number"`,()=>{T.assign(oe,H._`${pe}[${ne}]`),_.error(),T.assign(Z,!1).break()}).code(H._`${pe}[${ne}] = ${Q}`)})}function X(Q,oe){const ne=(0,N.useFunc)(T,G.default),me=T.name("outer");T.label(me).for(H._`;${Q}--;`,()=>T.for(H._`${oe} = ${Q}; ${oe}--;`,()=>T.if(H._`${ne}(${D}[${Q}], ${D}[${oe}])`,()=>{_.error(),T.assign(Z,!1).break(me)})))}_.block$data(Z,function W(){const Q=T.let("i",H._`${D}.length`),oe=T.let("j");_.setParams({i:Q,j:oe}),T.assign(Z,!0),T.if(H._`${Q} > 1`,()=>(function K(){return q.length>0&&!q.some(Q=>"object"===Q||"array"===Q)}()?J:X)(Q,oe))},H._`${k} === false`),_.ok(Z)}}},68316:(xe,O,I)=>{"use strict";const C=I(13981),H=I(22020),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=_,O.SlowBuffer=function K(U){return+U!=U&&(U=0),_.alloc(+U)},O.INSPECT_MAX_BYTES=50;const G=2147483647;function B(U){if(U>G)throw new RangeError('The value "'+U+'" is invalid for option "size"');const w=new Uint8Array(U);return Object.setPrototypeOf(w,_.prototype),w}function _(U,w,b){if("number"==typeof U){if("string"==typeof w)throw new TypeError('The "string" argument must be of type string. Received type number');return M(U)}return T(U,w,b)}function T(U,w,b){if("string"==typeof U)return function F(U,w){if(("string"!=typeof w||""===w)&&(w="utf8"),!_.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const b=0|J(U,w);let z=B(b);const ie=z.write(U,w);return ie!==b&&(z=z.slice(0,ie)),z}(U,w);if(ArrayBuffer.isView(U))return function j(U){if(De(U,Uint8Array)){const w=new Uint8Array(U);return Z(w.buffer,w.byteOffset,w.byteLength)}return k(U)}(U);if(null==U)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(De(U,ArrayBuffer)||U&&De(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(U,SharedArrayBuffer)||U&&De(U.buffer,SharedArrayBuffer)))return Z(U,w,b);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');const z=U.valueOf&&U.valueOf();if(null!=z&&z!==U)return _.from(z,w,b);const ie=function q(U){if(_.isBuffer(U)){const w=0|W(U.length),b=B(w);return 0===b.length||U.copy(b,0,0,w),b}return void 0!==U.length?"number"!=typeof U.length||et(U.length)?B(0):k(U):"Buffer"===U.type&&Array.isArray(U.data)?k(U.data):void 0}(U);if(ie)return ie;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return _.from(U[Symbol.toPrimitive]("string"),w,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function D(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function M(U){return D(U),B(U<0?0:0|W(U))}function k(U){const w=U.length<0?0:0|W(U.length),b=B(w);for(let z=0;z<w;z+=1)b[z]=255&U[z];return b}function Z(U,w,b){if(w<0||U.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<w+(b||0))throw new RangeError('"length" is outside of buffer bounds');let z;return z=void 0===w&&void 0===b?new Uint8Array(U):void 0===b?new Uint8Array(U,w):new Uint8Array(U,w,b),Object.setPrototypeOf(z,_.prototype),z}function W(U){if(U>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|U}function J(U,w){if(_.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||De(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const b=U.length,z=arguments.length>2&&!0===arguments[2];if(!z&&0===b)return 0;let ie=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return ce(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return Ee(U).length;default:if(ie)return z?-1:ce(U).length;w=(""+w).toLowerCase(),ie=!0}}function X(U,w,b){let z=!1;if((void 0===w||w<0)&&(w=0),w>this.length||((void 0===b||b>this.length)&&(b=this.length),b<=0)||(b>>>=0)<=(w>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return m(this,w,b);case"utf8":case"utf-8":return l(this,w,b);case"ascii":return x(this,w,b);case"latin1":case"binary":return P(this,w,b);case"base64":return f(this,w,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,w,b);default:if(z)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),z=!0}}function Q(U,w,b){const z=U[w];U[w]=U[b],U[b]=z}function oe(U,w,b,z,ie){if(0===U.length)return-1;if("string"==typeof b?(z=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),et(b=+b)&&(b=ie?0:U.length-1),b<0&&(b=U.length+b),b>=U.length){if(ie)return-1;b=U.length-1}else if(b<0){if(!ie)return-1;b=0}if("string"==typeof w&&(w=_.from(w,z)),_.isBuffer(w))return 0===w.length?-1:ne(U,w,b,z,ie);if("number"==typeof w)return w&=255,"function"==typeof Uint8Array.prototype.indexOf?ie?Uint8Array.prototype.indexOf.call(U,w,b):Uint8Array.prototype.lastIndexOf.call(U,w,b):ne(U,[w],b,z,ie);throw new TypeError("val must be string, number or Buffer")}function ne(U,w,b,z,ie){let nt,be=1,Me=U.length,qe=w.length;if(void 0!==z&&("ucs2"===(z=String(z).toLowerCase())||"ucs-2"===z||"utf16le"===z||"utf-16le"===z)){if(U.length<2||w.length<2)return-1;be=2,Me/=2,qe/=2,b/=2}function At(rt,St){return 1===be?rt[St]:rt.readUInt16BE(St*be)}if(ie){let rt=-1;for(nt=b;nt<Me;nt++)if(At(U,nt)===At(w,-1===rt?0:nt-rt)){if(-1===rt&&(rt=nt),nt-rt+1===qe)return rt*be}else-1!==rt&&(nt-=nt-rt),rt=-1}else for(b+qe>Me&&(b=Me-qe),nt=b;nt>=0;nt--){let rt=!0;for(let St=0;St<qe;St++)if(At(U,nt+St)!==At(w,St)){rt=!1;break}if(rt)return nt}return-1}function me(U,w,b,z){b=Number(b)||0;const ie=U.length-b;z?(z=Number(z))>ie&&(z=ie):z=ie;const be=w.length;let Me;for(z>be/2&&(z=be/2),Me=0;Me<z;++Me){const qe=parseInt(w.substr(2*Me,2),16);if(et(qe))return Me;U[b+Me]=qe}return Me}function pe(U,w,b,z){return Be(ce(w,U.length-b),U,b,z)}function Ie(U,w,b,z){return Be(function ue(U){const w=[];for(let b=0;b<U.length;++b)w.push(255&U.charCodeAt(b));return w}(w),U,b,z)}function E(U,w,b,z){return Be(Ee(w),U,b,z)}function a(U,w,b,z){return Be(function ge(U,w){let b,z,ie;const be=[];for(let Me=0;Me<U.length&&!((w-=2)<0);++Me)b=U.charCodeAt(Me),z=b>>8,ie=b%256,be.push(ie),be.push(z);return be}(w,U.length-b),U,b,z)}function f(U,w,b){return C.fromByteArray(0===w&&b===U.length?U:U.slice(w,b))}function l(U,w,b){b=Math.min(U.length,b);const z=[];let ie=w;for(;ie<b;){const be=U[ie];let Me=null,qe=be>239?4:be>223?3:be>191?2:1;if(ie+qe<=b){let At,nt,rt,St;switch(qe){case 1:be<128&&(Me=be);break;case 2:At=U[ie+1],128==(192&At)&&(St=(31&be)<<6|63&At,St>127&&(Me=St));break;case 3:At=U[ie+1],nt=U[ie+2],128==(192&At)&&128==(192&nt)&&(St=(15&be)<<12|(63&At)<<6|63&nt,St>2047&&(St<55296||St>57343)&&(Me=St));break;case 4:At=U[ie+1],nt=U[ie+2],rt=U[ie+3],128==(192&At)&&128==(192&nt)&&128==(192&rt)&&(St=(15&be)<<18|(63&At)<<12|(63&nt)<<6|63&rt,St>65535&&St<1114112&&(Me=St))}}null===Me?(Me=65533,qe=1):Me>65535&&(Me-=65536,z.push(Me>>>10&1023|55296),Me=56320|1023&Me),z.push(Me),ie+=qe}return function g(U){const w=U.length;if(w<=h)return String.fromCharCode.apply(String,U);let b="",z=0;for(;z<w;)b+=String.fromCharCode.apply(String,U.slice(z,z+=h));return b}(z)}O.kMaxLength=G,!(_.TYPED_ARRAY_SUPPORT=function v(){try{const U=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(U,w),42===U.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),_.poolSize=8192,_.from=function(U,w,b){return T(U,w,b)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array),_.alloc=function(U,w,b){return function $(U,w,b){return D(U),U<=0?B(U):void 0!==w?"string"==typeof b?B(U).fill(w,b):B(U).fill(w):B(U)}(U,w,b)},_.allocUnsafe=function(U){return M(U)},_.allocUnsafeSlow=function(U){return M(U)},_.isBuffer=function(w){return null!=w&&!0===w._isBuffer&&w!==_.prototype},_.compare=function(w,b){if(De(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),De(b,Uint8Array)&&(b=_.from(b,b.offset,b.byteLength)),!_.isBuffer(w)||!_.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===b)return 0;let z=w.length,ie=b.length;for(let be=0,Me=Math.min(z,ie);be<Me;++be)if(w[be]!==b[be]){z=w[be],ie=b[be];break}return z<ie?-1:ie<z?1:0},_.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(w,b){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(0===w.length)return _.alloc(0);let z;if(void 0===b)for(b=0,z=0;z<w.length;++z)b+=w[z].length;const ie=_.allocUnsafe(b);let be=0;for(z=0;z<w.length;++z){let Me=w[z];if(De(Me,Uint8Array))be+Me.length>ie.length?(_.isBuffer(Me)||(Me=_.from(Me)),Me.copy(ie,be)):Uint8Array.prototype.set.call(ie,Me,be);else{if(!_.isBuffer(Me))throw new TypeError('"list" argument must be an Array of Buffers');Me.copy(ie,be)}be+=Me.length}return ie},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){const w=this.length;if(w%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<w;b+=2)Q(this,b,b+1);return this},_.prototype.swap32=function(){const w=this.length;if(w%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<w;b+=4)Q(this,b,b+3),Q(this,b+1,b+2);return this},_.prototype.swap64=function(){const w=this.length;if(w%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<w;b+=8)Q(this,b,b+7),Q(this,b+1,b+6),Q(this,b+2,b+5),Q(this,b+3,b+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){const w=this.length;return 0===w?"":0===arguments.length?l(this,0,w):X.apply(this,arguments)},_.prototype.equals=function(w){if(!_.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w||0===_.compare(this,w)},_.prototype.inspect=function(){let w="";const b=O.INSPECT_MAX_BYTES;return w=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(w+=" ... "),"<Buffer "+w+">"},N&&(_.prototype[N]=_.prototype.inspect),_.prototype.compare=function(w,b,z,ie,be){if(De(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),!_.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(void 0===b&&(b=0),void 0===z&&(z=w?w.length:0),void 0===ie&&(ie=0),void 0===be&&(be=this.length),b<0||z>w.length||ie<0||be>this.length)throw new RangeError("out of range index");if(ie>=be&&b>=z)return 0;if(ie>=be)return-1;if(b>=z)return 1;if(this===w)return 0;let Me=(be>>>=0)-(ie>>>=0),qe=(z>>>=0)-(b>>>=0);const At=Math.min(Me,qe),nt=this.slice(ie,be),rt=w.slice(b,z);for(let St=0;St<At;++St)if(nt[St]!==rt[St]){Me=nt[St],qe=rt[St];break}return Me<qe?-1:qe<Me?1:0},_.prototype.includes=function(w,b,z){return-1!==this.indexOf(w,b,z)},_.prototype.indexOf=function(w,b,z){return oe(this,w,b,z,!0)},_.prototype.lastIndexOf=function(w,b,z){return oe(this,w,b,z,!1)},_.prototype.write=function(w,b,z,ie){if(void 0===b)ie="utf8",z=this.length,b=0;else if(void 0===z&&"string"==typeof b)ie=b,z=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(z)?(z>>>=0,void 0===ie&&(ie="utf8")):(ie=z,z=void 0)}const be=this.length-b;if((void 0===z||z>be)&&(z=be),w.length>0&&(z<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let Me=!1;for(;;)switch(ie){case"hex":return me(this,w,b,z);case"utf8":case"utf-8":return pe(this,w,b,z);case"ascii":case"latin1":case"binary":return Ie(this,w,b,z);case"base64":return E(this,w,b,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a(this,w,b,z);default:if(Me)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),Me=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const h=4096;function x(U,w,b){let z="";b=Math.min(U.length,b);for(let ie=w;ie<b;++ie)z+=String.fromCharCode(127&U[ie]);return z}function P(U,w,b){let z="";b=Math.min(U.length,b);for(let ie=w;ie<b;++ie)z+=String.fromCharCode(U[ie]);return z}function m(U,w,b){const z=U.length;(!w||w<0)&&(w=0),(!b||b<0||b>z)&&(b=z);let ie="";for(let be=w;be<b;++be)ie+=Ke[U[be]];return ie}function d(U,w,b){const z=U.slice(w,b);let ie="";for(let be=0;be<z.length-1;be+=2)ie+=String.fromCharCode(z[be]+256*z[be+1]);return ie}function p(U,w,b){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+w>b)throw new RangeError("Trying to access beyond buffer length")}function V(U,w,b,z,ie,be){if(!_.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>ie||w<be)throw new RangeError('"value" argument is out of bounds');if(b+z>U.length)throw new RangeError("Index out of range")}function L(U,w,b,z,ie){ve(w,z,ie,U,b,7);let be=Number(w&BigInt(4294967295));U[b++]=be,be>>=8,U[b++]=be,be>>=8,U[b++]=be,be>>=8,U[b++]=be;let Me=Number(w>>BigInt(32)&BigInt(4294967295));return U[b++]=Me,Me>>=8,U[b++]=Me,Me>>=8,U[b++]=Me,Me>>=8,U[b++]=Me,b}function Y(U,w,b,z,ie){ve(w,z,ie,U,b,7);let be=Number(w&BigInt(4294967295));U[b+7]=be,be>>=8,U[b+6]=be,be>>=8,U[b+5]=be,be>>=8,U[b+4]=be;let Me=Number(w>>BigInt(32)&BigInt(4294967295));return U[b+3]=Me,Me>>=8,U[b+2]=Me,Me>>=8,U[b+1]=Me,Me>>=8,U[b]=Me,b+8}function le(U,w,b,z,ie,be){if(b+z>U.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Se(U,w,b,z,ie){return w=+w,b>>>=0,ie||le(U,0,b,4),H.write(U,w,b,z,23,4),b+4}function Oe(U,w,b,z,ie){return w=+w,b>>>=0,ie||le(U,0,b,8),H.write(U,w,b,z,52,8),b+8}_.prototype.slice=function(w,b){const z=this.length;(w=~~w)<0?(w+=z)<0&&(w=0):w>z&&(w=z),(b=void 0===b?z:~~b)<0?(b+=z)<0&&(b=0):b>z&&(b=z),b<w&&(b=w);const ie=this.subarray(w,b);return Object.setPrototypeOf(ie,_.prototype),ie},_.prototype.readUintLE=_.prototype.readUIntLE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w],be=1,Me=0;for(;++Me<b&&(be*=256);)ie+=this[w+Me]*be;return ie},_.prototype.readUintBE=_.prototype.readUIntBE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w+--b],be=1;for(;b>0&&(be*=256);)ie+=this[w+--b]*be;return ie},_.prototype.readUint8=_.prototype.readUInt8=function(w,b){return w>>>=0,b||p(w,1,this.length),this[w]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(w,b){return w>>>=0,b||p(w,2,this.length),this[w]|this[w+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(w,b){return w>>>=0,b||p(w,2,this.length),this[w]<<8|this[w+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(w,b){return w>>>=0,b||p(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+16777216*this[w+3]},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(w,b){return w>>>=0,b||p(w,4,this.length),16777216*this[w]+(this[w+1]<<16|this[w+2]<<8|this[w+3])},_.prototype.readBigUInt64LE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=b+256*this[++w]+65536*this[++w]+this[++w]*2**24,be=this[++w]+256*this[++w]+65536*this[++w]+z*2**24;return BigInt(ie)+(BigInt(be)<<BigInt(32))}),_.prototype.readBigUInt64BE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=b*2**24+65536*this[++w]+256*this[++w]+this[++w],be=this[++w]*2**24+65536*this[++w]+256*this[++w]+z;return(BigInt(ie)<<BigInt(32))+BigInt(be)}),_.prototype.readIntLE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w],be=1,Me=0;for(;++Me<b&&(be*=256);)ie+=this[w+Me]*be;return be*=128,ie>=be&&(ie-=Math.pow(2,8*b)),ie},_.prototype.readIntBE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=b,be=1,Me=this[w+--ie];for(;ie>0&&(be*=256);)Me+=this[w+--ie]*be;return be*=128,Me>=be&&(Me-=Math.pow(2,8*b)),Me},_.prototype.readInt8=function(w,b){return w>>>=0,b||p(w,1,this.length),128&this[w]?-1*(255-this[w]+1):this[w]},_.prototype.readInt16LE=function(w,b){w>>>=0,b||p(w,2,this.length);const z=this[w]|this[w+1]<<8;return 32768&z?4294901760|z:z},_.prototype.readInt16BE=function(w,b){w>>>=0,b||p(w,2,this.length);const z=this[w+1]|this[w]<<8;return 32768&z?4294901760|z:z},_.prototype.readInt32LE=function(w,b){return w>>>=0,b||p(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},_.prototype.readInt32BE=function(w,b){return w>>>=0,b||p(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},_.prototype.readBigInt64LE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];return(void 0===b||void 0===z)&&de(w,this.length-8),(BigInt(this[w+4]+256*this[w+5]+65536*this[w+6]+(z<<24))<<BigInt(32))+BigInt(b+256*this[++w]+65536*this[++w]+this[++w]*2**24)}),_.prototype.readBigInt64BE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=(b<<24)+65536*this[++w]+256*this[++w]+this[++w];return(BigInt(ie)<<BigInt(32))+BigInt(this[++w]*2**24+65536*this[++w]+256*this[++w]+z)}),_.prototype.readFloatLE=function(w,b){return w>>>=0,b||p(w,4,this.length),H.read(this,w,!0,23,4)},_.prototype.readFloatBE=function(w,b){return w>>>=0,b||p(w,4,this.length),H.read(this,w,!1,23,4)},_.prototype.readDoubleLE=function(w,b){return w>>>=0,b||p(w,8,this.length),H.read(this,w,!0,52,8)},_.prototype.readDoubleBE=function(w,b){return w>>>=0,b||p(w,8,this.length),H.read(this,w,!1,52,8)},_.prototype.writeUintLE=_.prototype.writeUIntLE=function(w,b,z,ie){w=+w,b>>>=0,z>>>=0,ie||V(this,w,b,z,Math.pow(2,8*z)-1,0);let be=1,Me=0;for(this[b]=255&w;++Me<z&&(be*=256);)this[b+Me]=w/be&255;return b+z},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(w,b,z,ie){w=+w,b>>>=0,z>>>=0,ie||V(this,w,b,z,Math.pow(2,8*z)-1,0);let be=z-1,Me=1;for(this[b+be]=255&w;--be>=0&&(Me*=256);)this[b+be]=w/Me&255;return b+z},_.prototype.writeUint8=_.prototype.writeUInt8=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,1,255,0),this[b]=255&w,b+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,65535,0),this[b]=255&w,this[b+1]=w>>>8,b+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,65535,0),this[b]=w>>>8,this[b+1]=255&w,b+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,4294967295,0),this[b+3]=w>>>24,this[b+2]=w>>>16,this[b+1]=w>>>8,this[b]=255&w,b+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,4294967295,0),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=255&w,b+4},_.prototype.writeBigUInt64LE=We(function(w,b=0){return L(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeBigUInt64BE=We(function(w,b=0){return Y(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeIntLE=function(w,b,z,ie){if(w=+w,b>>>=0,!ie){const At=Math.pow(2,8*z-1);V(this,w,b,z,At-1,-At)}let be=0,Me=1,qe=0;for(this[b]=255&w;++be<z&&(Me*=256);)w<0&&0===qe&&0!==this[b+be-1]&&(qe=1),this[b+be]=(w/Me|0)-qe&255;return b+z},_.prototype.writeIntBE=function(w,b,z,ie){if(w=+w,b>>>=0,!ie){const At=Math.pow(2,8*z-1);V(this,w,b,z,At-1,-At)}let be=z-1,Me=1,qe=0;for(this[b+be]=255&w;--be>=0&&(Me*=256);)w<0&&0===qe&&0!==this[b+be+1]&&(qe=1),this[b+be]=(w/Me|0)-qe&255;return b+z},_.prototype.writeInt8=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,1,127,-128),w<0&&(w=255+w+1),this[b]=255&w,b+1},_.prototype.writeInt16LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,32767,-32768),this[b]=255&w,this[b+1]=w>>>8,b+2},_.prototype.writeInt16BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,32767,-32768),this[b]=w>>>8,this[b+1]=255&w,b+2},_.prototype.writeInt32LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,2147483647,-2147483648),this[b]=255&w,this[b+1]=w>>>8,this[b+2]=w>>>16,this[b+3]=w>>>24,b+4},_.prototype.writeInt32BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=255&w,b+4},_.prototype.writeBigInt64LE=We(function(w,b=0){return L(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeBigInt64BE=We(function(w,b=0){return Y(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeFloatLE=function(w,b,z){return Se(this,w,b,!0,z)},_.prototype.writeFloatBE=function(w,b,z){return Se(this,w,b,!1,z)},_.prototype.writeDoubleLE=function(w,b,z){return Oe(this,w,b,!0,z)},_.prototype.writeDoubleBE=function(w,b,z){return Oe(this,w,b,!1,z)},_.prototype.copy=function(w,b,z,ie){if(!_.isBuffer(w))throw new TypeError("argument should be a Buffer");if(z||(z=0),!ie&&0!==ie&&(ie=this.length),b>=w.length&&(b=w.length),b||(b=0),ie>0&&ie<z&&(ie=z),ie===z||0===w.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),w.length-b<ie-z&&(ie=w.length-b+z);const be=ie-z;return this===w&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,z,ie):Uint8Array.prototype.set.call(w,this.subarray(z,ie),b),be},_.prototype.fill=function(w,b,z,ie){if("string"==typeof w){if("string"==typeof b?(ie=b,b=0,z=this.length):"string"==typeof z&&(ie=z,z=this.length),void 0!==ie&&"string"!=typeof ie)throw new TypeError("encoding must be a string");if("string"==typeof ie&&!_.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(1===w.length){const Me=w.charCodeAt(0);("utf8"===ie&&Me<128||"latin1"===ie)&&(w=Me)}}else"number"==typeof w?w&=255:"boolean"==typeof w&&(w=Number(w));if(b<0||this.length<b||this.length<z)throw new RangeError("Out of range index");if(z<=b)return this;let be;if(b>>>=0,z=void 0===z?this.length:z>>>0,w||(w=0),"number"==typeof w)for(be=b;be<z;++be)this[be]=w;else{const Me=_.isBuffer(w)?w:_.from(w,ie),qe=Me.length;if(0===qe)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(be=0;be<z-b;++be)this[be+b]=Me[be%qe]}return this};const Ve={};function Re(U,w,b){Ve[U]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,delete this.name}get code(){return U}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}function ye(U){let w="",b=U.length;const z="-"===U[0]?1:0;for(;b>=z+4;b-=3)w=`_${U.slice(b-3,b)}${w}`;return`${U.slice(0,b)}${w}`}function ve(U,w,b,z,ie,be){if(U>b||U<w){const Me="bigint"==typeof w?"n":"";let qe;throw qe=be>3?0===w||w===BigInt(0)?`>= 0${Me} and < 2${Me} ** ${8*(be+1)}${Me}`:`>= -(2${Me} ** ${8*(be+1)-1}${Me}) and < 2 ** ${8*(be+1)-1}${Me}`:`>= ${w}${Me} and <= ${b}${Me}`,new Ve.ERR_OUT_OF_RANGE("value",qe,U)}!function ke(U,w,b){_e(w,"offset"),(void 0===U[w]||void 0===U[w+b])&&de(w,U.length-(b+1))}(z,ie,be)}function _e(U,w){if("number"!=typeof U)throw new Ve.ERR_INVALID_ARG_TYPE(w,"number",U)}function de(U,w,b){throw Math.floor(U)!==U?(_e(U,b),new Ve.ERR_OUT_OF_RANGE(b||"offset","an integer",U)):w<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${w}`,U)}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(U,w){return`The "${U}" argument must be of type number. Received type ${typeof w}`},TypeError),Re("ERR_OUT_OF_RANGE",function(U,w,b){let z=`The value of "${U}" is out of range.`,ie=b;return Number.isInteger(b)&&Math.abs(b)>2**32?ie=ye(String(b)):"bigint"==typeof b&&(ie=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(ie=ye(ie)),ie+="n"),z+=` It must be ${w}. Received ${ie}`,z},RangeError);const se=/[^+/0-9A-Za-z-_]/g;function ce(U,w){let b;w=w||1/0;const z=U.length;let ie=null;const be=[];for(let Me=0;Me<z;++Me){if(b=U.charCodeAt(Me),b>55295&&b<57344){if(!ie){if(b>56319){(w-=3)>-1&&be.push(239,191,189);continue}if(Me+1===z){(w-=3)>-1&&be.push(239,191,189);continue}ie=b;continue}if(b<56320){(w-=3)>-1&&be.push(239,191,189),ie=b;continue}b=65536+(ie-55296<<10|b-56320)}else ie&&(w-=3)>-1&&be.push(239,191,189);if(ie=null,b<128){if((w-=1)<0)break;be.push(b)}else if(b<2048){if((w-=2)<0)break;be.push(b>>6|192,63&b|128)}else if(b<65536){if((w-=3)<0)break;be.push(b>>12|224,b>>6&63|128,63&b|128)}else{if(!(b<1114112))throw new Error("Invalid code point");if((w-=4)<0)break;be.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}}return be}function Ee(U){return C.toByteArray(function re(U){if((U=(U=U.split("=")[0]).trim().replace(se,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(U))}function Be(U,w,b,z){let ie;for(ie=0;ie<z&&!(ie+b>=w.length||ie>=U.length);++ie)w[ie+b]=U[ie];return ie}function De(U,w){return U instanceof w||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===w.name}function et(U){return U!=U}const Ke=function(){const U="0123456789abcdef",w=new Array(256);for(let b=0;b<16;++b){const z=16*b;for(let ie=0;ie<16;++ie)w[z+ie]=U[b]+U[ie]}return w}();function We(U){return typeof BigInt>"u"?_t:U}function _t(){throw new Error("BigInt not supported")}},57062:(xe,O,I)=>{"use strict";const{SymbolDispose:C}=I(56389),{AbortError:H,codes:N}=I(68154),{isNodeStream:G,isWebStream:v,kControllerErrorFunction:B}=I(32924),_=I(46017),{ERR_INVALID_ARG_TYPE:T}=N;let D;xe.exports.addAbortSignal=function(F,k){if(((M,F)=>{if("object"!=typeof M||!("aborted"in M))throw new T("signal","AbortSignal",M)})(F),!G(k)&&!v(k))throw new T("stream",["ReadableStream","WritableStream","Stream"],k);return xe.exports.addAbortSignalNoValidate(F,k)},xe.exports.addAbortSignalNoValidate=function(M,F){if("object"!=typeof M||!("aborted"in M))return F;const k=G(F)?()=>{F.destroy(new H(void 0,{cause:M.reason}))}:()=>{F[B](new H(void 0,{cause:M.reason}))};if(M.aborted)k();else{D=D||I(13509).addAbortListener;const j=D(M,k);_(F,j[C])}return F}},16630:(xe,O,I)=>{"use strict";const{StringPrototypeSlice:C,SymbolIterator:H,TypedArrayPrototypeSet:N,Uint8Array:G}=I(56389),{Buffer:v}=I(68316),{inspect:B}=I(13509);xe.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(T){const D={data:T,next:null};this.length>0?this.tail.next=D:this.head=D,this.tail=D,++this.length}unshift(T){const D={data:T,next:this.head};0===this.length&&(this.tail=D),this.head=D,++this.length}shift(){if(0===this.length)return;const T=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,T}clear(){this.head=this.tail=null,this.length=0}join(T){if(0===this.length)return"";let D=this.head,$=""+D.data;for(;null!==(D=D.next);)$+=T+D.data;return $}concat(T){if(0===this.length)return v.alloc(0);const D=v.allocUnsafe(T>>>0);let $=this.head,M=0;for(;$;)N(D,$.data,M),M+=$.data.length,$=$.next;return D}consume(T,D){const $=this.head.data;if(T<$.length){const M=$.slice(0,T);return this.head.data=$.slice(T),M}return T===$.length?this.shift():D?this._getString(T):this._getBuffer(T)}first(){return this.head.data}*[H](){for(let T=this.head;T;T=T.next)yield T.data}_getString(T){let D="",$=this.head,M=0;do{const F=$.data;if(!(T>F.length)){T===F.length?(D+=F,++M,this.head=$.next?$.next:this.tail=null):(D+=C(F,0,T),this.head=$,$.data=C(F,T));break}D+=F,T-=F.length,++M}while(null!==($=$.next));return this.length-=M,D}_getBuffer(T){const D=v.allocUnsafe(T),$=T;let M=this.head,F=0;do{const k=M.data;if(!(T>k.length)){T===k.length?(N(D,k,$-T),++F,this.head=M.next?M.next:this.tail=null):(N(D,new G(k.buffer,k.byteOffset,T),$-T),this.head=M,M.data=k.slice(T));break}N(D,k,$-T),T-=k.length,++F}while(null!==(M=M.next));return this.length-=F,D}[Symbol.for("nodejs.util.inspect.custom")](T,D){return B(this,{...D,depth:0,customInspect:!1})}}},373:(xe,O,I)=>{"use strict";var C=I(29293).default;const{pipeline:H}=I(67843),N=I(13323),{destroyer:G}=I(96507),{isNodeStream:v,isReadable:B,isWritable:_,isWebStream:T,isTransformStream:D,isWritableStream:$,isReadableStream:M}=I(32924),{AbortError:F,codes:{ERR_INVALID_ARG_VALUE:k,ERR_MISSING_ARGS:j}}=I(68154),Z=I(46017);xe.exports=function(...W){if(0===W.length)throw new j("streams");if(1===W.length)return N.from(W[0]);const K=[...W];if("function"==typeof W[0]&&(W[0]=N.from(W[0])),"function"==typeof W[W.length-1]){const f=W.length-1;W[f]=N.from(W[f])}for(let f=0;f<W.length;++f)if(v(W[f])||T(W[f])){if(f<W.length-1&&!(B(W[f])||M(W[f])||D(W[f])))throw new k(`streams[${f}]`,K[f],"must be readable");if(f>0&&!(_(W[f])||$(W[f])||D(W[f])))throw new k(`streams[${f}]`,K[f],"must be writable")}let J,X,Q,oe,ne;const pe=W[0],Ie=H(W,function me(f){const l=oe;oe=null,l?l(f):f?ne.destroy(f):!a&&!E&&ne.destroy()}),E=!!(_(pe)||$(pe)||D(pe)),a=!!(B(Ie)||M(Ie)||D(Ie));if(ne=new N({writableObjectMode:!(null==pe||!pe.writableObjectMode),readableObjectMode:!(null==Ie||!Ie.readableObjectMode),writable:E,readable:a}),E){if(v(pe))ne._write=function(l,h,g){pe.write(l,h)?g():J=g},ne._final=function(l){pe.end(),X=l},pe.on("drain",function(){if(J){const l=J;J=null,l()}});else if(T(pe)){const h=(D(pe)?pe.writable:pe).getWriter();ne._write=function(){var g=C(function*(x,P,m){try{yield h.ready,h.write(x).catch(()=>{}),m()}catch(d){m(d)}});return function(x,P,m){return g.apply(this,arguments)}}(),ne._final=function(){var g=C(function*(x){try{yield h.ready,h.close().catch(()=>{}),X=x}catch(P){x(P)}});return function(x){return g.apply(this,arguments)}}()}const f=D(Ie)?Ie.readable:Ie;Z(f,()=>{if(X){const l=X;X=null,l()}})}if(a)if(v(Ie))Ie.on("readable",function(){if(Q){const f=Q;Q=null,f()}}),Ie.on("end",function(){ne.push(null)}),ne._read=function(){for(;;){const f=Ie.read();if(null===f)return void(Q=ne._read);if(!ne.push(f))return}};else if(T(Ie)){const l=(D(Ie)?Ie.readable:Ie).getReader();ne._read=C(function*(){for(;;)try{const{value:h,done:g}=yield l.read();if(!ne.push(h))return;if(g)return void ne.push(null)}catch{return}})}return ne._destroy=function(f,l){!f&&null!==oe&&(f=new F),Q=null,J=null,X=null,null===oe?l(f):(oe=l,v(Ie)&&G(Ie,f))},ne}},96507:(xe,O,I)=>{"use strict";const C=I(40573),{aggregateTwoErrors:H,codes:{ERR_MULTIPLE_CALLBACK:N},AbortError:G}=I(68154),{Symbol:v}=I(56389),{kIsDestroyed:B,isDestroyed:_,isFinished:T,isServerRequest:D}=I(32924),$=v("kDestroy"),M=v("kConstruct");function F(E,a,f){E&&(a&&!a.errored&&(a.errored=E),f&&!f.errored&&(f.errored=E))}function j(E,a,f){let l=!1;function h(g){if(l)return;l=!0;const x=E._readableState,P=E._writableState;F(g,P,x),P&&(P.closed=!0),x&&(x.closed=!0),"function"==typeof f&&f(g),g?C.nextTick(Z,E,g):C.nextTick(q,E)}try{E._destroy(a||null,h)}catch(g){h(g)}}function Z(E,a){W(E,a),q(E)}function q(E){const a=E._readableState,f=E._writableState;f&&(f.closeEmitted=!0),a&&(a.closeEmitted=!0),(null!=f&&f.emitClose||null!=a&&a.emitClose)&&E.emit("close")}function W(E,a){const f=E._readableState,l=E._writableState;null!=l&&l.errorEmitted||null!=f&&f.errorEmitted||(l&&(l.errorEmitted=!0),f&&(f.errorEmitted=!0),E.emit("error",a))}function J(E,a,f){const l=E._readableState,h=E._writableState;if(null!=h&&h.destroyed||null!=l&&l.destroyed)return this;null!=l&&l.autoDestroy||null!=h&&h.autoDestroy?E.destroy(a):a&&(h&&!h.errored&&(h.errored=a),l&&!l.errored&&(l.errored=a),f?C.nextTick(W,E,a):W(E,a))}function Q(E){let a=!1;function f(l){if(a)return void J(E,l??new N);a=!0;const h=E._readableState,g=E._writableState,x=g||h;h&&(h.constructed=!0),g&&(g.constructed=!0),x.destroyed?E.emit($,l):l?J(E,l,!0):C.nextTick(oe,E)}try{E._construct(l=>{C.nextTick(f,l)})}catch(l){C.nextTick(f,l)}}function oe(E){E.emit(M)}function ne(E){return E?.setHeader&&"function"==typeof E.abort}function me(E){E.emit("close")}function pe(E,a){E.emit("error",a),C.nextTick(me,E)}xe.exports={construct:function X(E,a){if("function"!=typeof E._construct)return;const f=E._readableState,l=E._writableState;f&&(f.constructed=!1),l&&(l.constructed=!1),E.once(M,a),!(E.listenerCount(M)>1)&&C.nextTick(Q,E)},destroyer:function Ie(E,a){!E||_(E)||(!a&&!T(E)&&(a=new G),D(E)?(E.socket=null,E.destroy(a)):ne(E)?E.abort():ne(E.req)?E.req.abort():"function"==typeof E.destroy?E.destroy(a):"function"==typeof E.close?E.close():a?C.nextTick(pe,E,a):C.nextTick(me,E),E.destroyed||(E[B]=!0))},destroy:function k(E,a){const f=this._readableState,l=this._writableState,h=l||f;return null!=l&&l.destroyed||null!=f&&f.destroyed?("function"==typeof a&&a(),this):(F(E,l,f),l&&(l.destroyed=!0),f&&(f.destroyed=!0),h.constructed?j(this,E,a):this.once($,function(g){j(this,H(g,E),a)}),this)},undestroy:function K(){const E=this._readableState,a=this._writableState;E&&(E.constructed=!0,E.closed=!1,E.closeEmitted=!1,E.destroyed=!1,E.errored=null,E.errorEmitted=!1,E.reading=!1,E.ended=!1===E.readable,E.endEmitted=!1===E.readable),a&&(a.constructed=!0,a.destroyed=!1,a.closed=!1,a.closeEmitted=!1,a.errored=null,a.errorEmitted=!1,a.finalCalled=!1,a.prefinished=!1,a.ended=!1===a.writable,a.ending=!1===a.writable,a.finished=!1===a.writable)},errorOrDestroy:J}},13323:(xe,O,I)=>{"use strict";const{ObjectDefineProperties:C,ObjectGetOwnPropertyDescriptor:H,ObjectKeys:N,ObjectSetPrototypeOf:G}=I(56389);xe.exports=_;const v=I(84553),B=I(30009);G(_.prototype,v.prototype),G(_,v);{const M=N(B.prototype);for(let F=0;F<M.length;F++){const k=M[F];_.prototype[k]||(_.prototype[k]=B.prototype[k])}}function _(M){if(!(this instanceof _))return new _(M);v.call(this,M),B.call(this,M),M?(this.allowHalfOpen=!1!==M.allowHalfOpen,!1===M.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===M.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let T,$;function D(){return void 0===T&&(T={}),T}C(_.prototype,{writable:{__proto__:null,...H(B.prototype,"writable")},writableHighWaterMark:{__proto__:null,...H(B.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...H(B.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...H(B.prototype,"writableBuffer")},writableLength:{__proto__:null,...H(B.prototype,"writableLength")},writableFinished:{__proto__:null,...H(B.prototype,"writableFinished")},writableCorked:{__proto__:null,...H(B.prototype,"writableCorked")},writableEnded:{__proto__:null,...H(B.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...H(B.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(M){this._readableState&&this._writableState&&(this._readableState.destroyed=M,this._writableState.destroyed=M)}}}),_.fromWeb=function(M,F){return D().newStreamDuplexFromReadableWritablePair(M,F)},_.toWeb=function(M){return D().newReadableWritablePairFromDuplex(M)},_.from=function(M){return $||($=I(44425)),$(M,"body")}},44425:(xe,O,I)=>{var C=I(29293).default,H=I(53344).default,N=I(42958).default;const G=I(40573),v=I(68316),{isReadable:B,isWritable:_,isIterable:T,isNodeStream:D,isReadableNodeStream:$,isWritableNodeStream:M,isDuplexNodeStream:F,isReadableStream:k,isWritableStream:j}=I(32924),Z=I(46017),{AbortError:q,codes:{ERR_INVALID_ARG_TYPE:W,ERR_INVALID_RETURN_VALUE:K}}=I(68154),{destroyer:J}=I(96507),X=I(13323),Q=I(84553),oe=I(30009),{createDeferredPromise:ne}=I(13509),me=I(45737),pe=globalThis.Blob||v.Blob,Ie=typeof pe<"u"?function(x){return x instanceof pe}:function(x){return!1},E=globalThis.AbortController||I(9465).AbortController,{FunctionPrototypeCall:a}=I(56389);class f extends X{constructor(x){super(x),!1===x?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===x?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function h(g){const x=g.readable&&"function"!=typeof g.readable.read?Q.wrap(g.readable):g.readable,P=g.writable;let p,V,L,Y,le,m=!!B(x),d=!!_(P);function Se(Oe){const Ve=Y;Y=null,Ve?Ve(Oe):Oe&&le.destroy(Oe)}return le=new f({readableObjectMode:!(null==x||!x.readableObjectMode),writableObjectMode:!(null==P||!P.writableObjectMode),readable:m,writable:d}),d&&(Z(P,Oe=>{d=!1,Oe&&J(x,Oe),Se(Oe)}),le._write=function(Oe,Ve,Re){P.write(Oe,Ve)?Re():p=Re},le._final=function(Oe){P.end(),V=Oe},P.on("drain",function(){if(p){const Oe=p;p=null,Oe()}}),P.on("finish",function(){if(V){const Oe=V;V=null,Oe()}})),m&&(Z(x,Oe=>{m=!1,Oe&&J(x,Oe),Se(Oe)}),x.on("readable",function(){if(L){const Oe=L;L=null,Oe()}}),x.on("end",function(){le.push(null)}),le._read=function(){for(;;){const Oe=x.read();if(null===Oe)return void(L=le._read);if(!le.push(Oe))return}}),le._destroy=function(Oe,Ve){!Oe&&null!==Y&&(Oe=new q),L=null,p=null,V=null,null===Y?Ve(Oe):(Y=Ve,J(P,Oe),J(x,Oe))},le}xe.exports=function g(x,P){if(F(x))return x;if($(x))return h({readable:x});if(M(x))return h({writable:x});if(D(x))return h({writable:!1,readable:!1});if(k(x))return h({readable:Q.fromWeb(x)});if(j(x))return h({writable:oe.fromWeb(x)});if("function"==typeof x){const{value:d,write:p,final:V,destroy:L}=function l(g){let{promise:x,resolve:P}=ne();const m=new E,d=m.signal;return{value:g(N(function*(){for(;;){const V=x;x=null;const{chunk:L,done:Y,cb:le}=yield H(V);if(G.nextTick(le),Y)return;if(d.aborted)throw new q(void 0,{cause:d.reason});({promise:x,resolve:P}=ne()),yield L}})(),{signal:d}),write(V,L,Y){const le=P;P=null,le({chunk:V,done:!1,cb:Y})},final(V){const L=P;P=null,L({done:!0,cb:V})},destroy(V,L){m.abort(),L(V)}}}(x);if(T(d))return me(f,d,{objectMode:!0,write:p,final:V,destroy:L});const Y=d?.then;if("function"==typeof Y){let le;const Se=a(Y,d,Oe=>{if(null!=Oe)throw new K("nully","body",Oe)},Oe=>{J(le,Oe)});return le=new f({objectMode:!0,readable:!1,write:p,final(Oe){V(C(function*(){try{yield Se,G.nextTick(Oe,null)}catch(Ve){G.nextTick(Oe,Ve)}}))},destroy:L})}throw new K("Iterable, AsyncIterable or AsyncFunction",P,d)}if(Ie(x))return g(x.arrayBuffer());if(T(x))return me(f,x,{objectMode:!0,writable:!1});if(k(x?.readable)&&j(x?.writable))return f.fromWeb(x);if("object"==typeof x?.writable||"object"==typeof x?.readable)return h({readable:null!=x&&x.readable?$(x?.readable)?x?.readable:g(x.readable):void 0,writable:null!=x&&x.writable?M(x?.writable)?x?.writable:g(x.writable):void 0});const m=x?.then;if("function"==typeof m){let d;return a(m,x,p=>{null!=p&&d.push(p),d.push(null)},p=>{J(d,p)}),d=new f({objectMode:!0,writable:!1,read(){}})}throw new W(P,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],x)}},46017:(xe,O,I)=>{const C=I(40573),{AbortError:H,codes:N}=I(68154),{ERR_INVALID_ARG_TYPE:G,ERR_STREAM_PREMATURE_CLOSE:v}=N,{kEmptyObject:B,once:_}=I(13509),{validateAbortSignal:T,validateFunction:D,validateObject:$,validateBoolean:M}=I(99852),{Promise:F,PromisePrototypeThen:k,SymbolDispose:j}=I(56389),{isClosed:Z,isReadable:q,isReadableNodeStream:W,isReadableStream:K,isReadableFinished:J,isReadableErrored:X,isWritable:Q,isWritableNodeStream:oe,isWritableStream:ne,isWritableFinished:me,isWritableErrored:pe,isNodeStream:Ie,willEmitClose:E,kIsClosedPromise:a}=I(32924);let f;const h=()=>{};function g(m,d,p){var V,L;if(2===arguments.length?(p=d,d=B):null==d?d=B:$(d,"options"),D(p,"callback"),T(d.signal,"options.signal"),p=_(p),K(m)||ne(m))return function x(m,d,p){let V=!1,L=h;if(d.signal)if(L=()=>{V=!0,p.call(m,new H(void 0,{cause:d.signal.reason}))},d.signal.aborted)C.nextTick(L);else{f=f||I(13509).addAbortListener;const le=f(d.signal,L),Se=p;p=_((...Oe)=>{le[j](),Se.apply(m,Oe)})}const Y=(...le)=>{V||C.nextTick(()=>p.apply(m,le))};return k(m[a].promise,Y,Y),h}(m,d,p);if(!Ie(m))throw new G("stream",["ReadableStream","WritableStream","Stream"],m);const Y=null!==(V=d.readable)&&void 0!==V?V:W(m),le=null!==(L=d.writable)&&void 0!==L?L:oe(m),Se=m._writableState,Oe=m._readableState,Ve=()=>{m.writable||ke()};let Re=E(m)&&W(m)===Y&&oe(m)===le,ye=me(m,!1);const ke=()=>{ye=!0,m.destroyed&&(Re=!1),(!Re||m.readable&&!Y)&&(!Y||ve)&&p.call(m)};let ve=J(m,!1);const _e=()=>{ve=!0,m.destroyed&&(Re=!1),(!Re||m.writable&&!le)&&(!le||ye)&&p.call(m)},de=Ee=>{p.call(m,Ee)};let se=Z(m);const re=()=>{se=!0;const Ee=pe(m)||X(m);return Ee&&"boolean"!=typeof Ee?p.call(m,Ee):Y&&!ve&&W(m,!0)&&!J(m,!1)?p.call(m,new v):!le||ye||me(m,!1)?void p.call(m):p.call(m,new v)},ce=()=>{se=!0;const Ee=pe(m)||X(m);if(Ee&&"boolean"!=typeof Ee)return p.call(m,Ee);p.call(m)},ue=()=>{m.req.on("finish",ke)};!function l(m){return m.setHeader&&"function"==typeof m.abort}(m)?le&&!Se&&(m.on("end",Ve),m.on("close",Ve)):(m.on("complete",ke),Re||m.on("abort",re),m.req?ue():m.on("request",ue)),!Re&&"boolean"==typeof m.aborted&&m.on("aborted",re),m.on("end",_e),m.on("finish",ke),!1!==d.error&&m.on("error",de),m.on("close",re),se?C.nextTick(re):null!=Se&&Se.errorEmitted||null!=Oe&&Oe.errorEmitted?Re||C.nextTick(ce):(!Y&&(!Re||q(m))&&(ye||!1===Q(m))||!le&&(!Re||Q(m))&&(ve||!1===q(m))||Oe&&m.req&&m.aborted)&&C.nextTick(ce);const ge=()=>{p=h,m.removeListener("aborted",re),m.removeListener("complete",ke),m.removeListener("abort",re),m.removeListener("request",ue),m.req&&m.req.removeListener("finish",ke),m.removeListener("end",Ve),m.removeListener("close",Ve),m.removeListener("finish",ke),m.removeListener("end",_e),m.removeListener("error",de),m.removeListener("close",re)};if(d.signal&&!se){const Ee=()=>{const Be=p;ge(),Be.call(m,new H(void 0,{cause:d.signal.reason}))};if(d.signal.aborted)C.nextTick(Ee);else{f=f||I(13509).addAbortListener;const Be=f(d.signal,Ee),De=p;p=_((...et)=>{Be[j](),De.apply(m,et)})}}return ge}xe.exports=g,xe.exports.finished=function P(m,d){var p;let V=!1;return null===d&&(d=B),null!==(p=d)&&void 0!==p&&p.cleanup&&(M(d.cleanup,"cleanup"),V=d.cleanup),new F((L,Y)=>{const le=g(m,d,Se=>{V&&le(),Se?Y(Se):L()})})}},45737:(xe,O,I)=>{"use strict";var C=I(29293).default;const H=I(40573),{PromisePrototypeThen:N,SymbolAsyncIterator:G,SymbolIterator:v}=I(56389),{Buffer:B}=I(68316),{ERR_INVALID_ARG_TYPE:_,ERR_STREAM_NULL_VALUES:T}=I(68154).codes;xe.exports=function D($,M,F){let k,j;if("string"==typeof M||M instanceof B)return new $({objectMode:!0,...F,read(){this.push(M),this.push(null)}});if(M&&M[G])j=!0,k=M[G]();else{if(!M||!M[v])throw new _("iterable",["Iterable"],M);j=!1,k=M[v]()}const Z=new $({objectMode:!0,highWaterMark:1,...F});let q=!1;function K(){return(K=C(function*(Q){if(null!=Q&&"function"==typeof k.throw){const{value:me,done:pe}=yield k.throw(Q);if(yield me,pe)return}if("function"==typeof k.return){const{value:me}=yield k.return();yield me}})).apply(this,arguments)}function X(){return(X=C(function*(){for(;;){try{const{value:Q,done:oe}=j?yield k.next():k.next();if(oe)Z.push(null);else{const ne=Q&&"function"==typeof Q.then?yield Q:Q;if(null===ne)throw q=!1,new T;if(Z.push(ne))continue;q=!1}}catch(Q){Z.destroy(Q)}break}})).apply(this,arguments)}return Z._read=function(){q||(q=!0,function J(){X.apply(this,arguments)}())},Z._destroy=function(Q,oe){N(function W(Q){return K.apply(this,arguments)}(Q),()=>H.nextTick(oe,Q),ne=>H.nextTick(oe,ne||Q))},Z}},91242:(xe,O,I)=>{"use strict";const{ArrayIsArray:C,ObjectSetPrototypeOf:H}=I(56389),{EventEmitter:N}=I(44356);function G(B){N.call(this,B)}function v(B,_,T){if("function"==typeof B.prependListener)return B.prependListener(_,T);B._events&&B._events[_]?C(B._events[_])?B._events[_].unshift(T):B._events[_]=[T,B._events[_]]:B.on(_,T)}H(G.prototype,N.prototype),H(G,N),G.prototype.pipe=function(B,_){const T=this;function D(q){B.writable&&!1===B.write(q)&&T.pause&&T.pause()}function $(){T.readable&&T.resume&&T.resume()}T.on("data",D),B.on("drain",$),!B._isStdio&&(!_||!1!==_.end)&&(T.on("end",F),T.on("close",k));let M=!1;function F(){M||(M=!0,B.end())}function k(){M||(M=!0,"function"==typeof B.destroy&&B.destroy())}function j(q){Z(),0===N.listenerCount(this,"error")&&this.emit("error",q)}function Z(){T.removeListener("data",D),B.removeListener("drain",$),T.removeListener("end",F),T.removeListener("close",k),T.removeListener("error",j),B.removeListener("error",j),T.removeListener("end",Z),T.removeListener("close",Z),B.removeListener("close",Z)}return v(T,"error",j),v(B,"error",j),T.on("end",Z),T.on("close",Z),B.on("close",Z),B.emit("pipe",T),B},xe.exports={Stream:G,prependListener:v}},21840:(xe,O,I)=>{"use strict";var C=I(29293).default,H=I(93513).default,N=I(82881).default,G=I(53344).default,v=I(42958).default;const B=globalThis.AbortController||I(9465).AbortController,{codes:{ERR_INVALID_ARG_VALUE:_,ERR_INVALID_ARG_TYPE:T,ERR_MISSING_ARGS:D,ERR_OUT_OF_RANGE:$},AbortError:M}=I(68154),{validateAbortSignal:F,validateInteger:k,validateObject:j}=I(99852),Z=I(56389).Symbol("kWeak"),q=I(56389).Symbol("kResistStopPropagation"),{finished:W}=I(46017),K=I(373),{addAbortSignalNoValidate:J}=I(57062),{isWritable:X,isNodeStream:Q}=I(32924),{deprecate:oe}=I(13509),{ArrayPrototypePush:ne,Boolean:me,MathFloor:pe,Number:Ie,NumberIsNaN:E,Promise:a,PromiseReject:f,PromiseResolve:l,PromisePrototypeThen:h,Symbol:g}=I(56389),x=g("kEmpty"),P=g("kEof");function d(Ee,Be){if("function"!=typeof Ee)throw new T("fn",["Function","AsyncFunction"],Ee);null!=Be&&j(Be,"options"),null!=Be?.signal&&F(Be.signal,"options.signal");let De=1;null!=Be?.concurrency&&(De=pe(Be.concurrency));let et=De-1;return null!=Be?.highWaterMark&&(et=pe(Be.highWaterMark)),k(De,"options.concurrency",1),k(et,"options.highWaterMark",0),et+=De,function(){var Ke=v(function*(){const _t=I(13509).AbortSignalAny([Be?.signal].filter(me)),U=this,w=[],b={signal:_t};let z,ie,be=!1,Me=0;function qe(){be=!0,At()}function At(){Me-=1,nt()}function nt(){ie&&!be&&Me<De&&w.length<et&&(ie(),ie=null)}function St(){return(St=C(function*(){try{var Ft,bt=!1,Mt=!1;try{for(var mt,it=N(U);bt=!(mt=yield it.next()).done;bt=!1){let Rr=mt.value;if(be)return;if(_t.aborted)throw new M;try{if(Rr=Ee(Rr,b),Rr===x)continue;Rr=l(Rr)}catch(xt){Rr=f(xt)}Me+=1,h(Rr,At,qe),w.push(Rr),z&&(z(),z=null),!be&&(w.length>=et||Me>=De)&&(yield new a(xt=>{ie=xt}))}}catch(Rr){Mt=!0,Ft=Rr}finally{try{bt&&null!=it.return&&(yield it.return())}finally{if(Mt)throw Ft}}w.push(P)}catch(Rr){const xt=f(Rr);h(xt,At,qe),w.push(xt)}finally{be=!0,z&&(z(),z=null)}})).apply(this,arguments)}!function rt(){St.apply(this,arguments)}();try{for(;;){for(;w.length>0;){const bt=yield G(w[0]);if(bt===P)return;if(_t.aborted)throw new M;bt!==x&&(yield bt),w.shift(),nt()}yield G(new a(bt=>{z=bt}))}}finally{be=!0,ie&&(ie(),ie=null)}});return function We(){return Ke.apply(this,arguments)}}().call(this)}function V(Ee){return L.apply(this,arguments)}function L(){return(L=C(function*(Ee,Be=void 0){var Ke,De=!1,et=!1;try{for(var We=N(ye.call(this,Ee,Be));De=!(yield We.next()).done;De=!1)return!0}catch(U){et=!0,Ke=U}finally{try{De&&null!=We.return&&(yield We.return())}finally{if(et)throw Ke}}return!1})).apply(this,arguments)}function le(){return(le=C(function*(Ee,Be=void 0){if("function"!=typeof Ee)throw new T("fn",["Function","AsyncFunction"],Ee);return!(yield V.call(this,C(function*(...De){return!(yield Ee(...De))}),Be))})).apply(this,arguments)}function Oe(){return(Oe=C(function*(Ee,Be){var Ke,De=!1,et=!1;try{for(var _t,We=N(ye.call(this,Ee,Be));De=!(_t=yield We.next()).done;De=!1)return _t.value}catch(U){et=!0,Ke=U}finally{try{De&&null!=We.return&&(yield We.return())}finally{if(et)throw Ke}}})).apply(this,arguments)}function Re(){return Re=C(function*(Ee,Be){if("function"!=typeof Ee)throw new T("fn",["Function","AsyncFunction"],Ee);function et(){return(et=C(function*(b,z){return yield Ee(b,z),x})).apply(this,arguments)}var _t,Ke=!1,We=!1;try{for(var U=N(d.call(this,function De(b,z){return et.apply(this,arguments)},Be));Ke=!(yield U.next()).done;Ke=!1);}catch(b){We=!0,_t=b}finally{try{Ke&&null!=U.return&&(yield U.return())}finally{if(We)throw _t}}}),Re.apply(this,arguments)}function ye(Ee,Be){if("function"!=typeof Ee)throw new T("fn",["Function","AsyncFunction"],Ee);function et(){return(et=C(function*(Ke,We){return(yield Ee(Ke,We))?Ke:x})).apply(this,arguments)}return d.call(this,function De(Ke,We){return et.apply(this,arguments)},Be)}class ke extends D{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function _e(){return _e=C(function*(Ee,Be,De){var et;if("function"!=typeof Ee)throw new T("reducer",["Function","AsyncFunction"],Ee);null!=De&&j(De,"options"),null!=De?.signal&&F(De.signal,"options.signal");let Ke=arguments.length>1;if(null!=De&&null!==(et=De.signal)&&void 0!==et&&et.aborted){const qe=new M(void 0,{cause:De.signal.reason});throw this.once("error",()=>{}),yield W(this.destroy(qe)),qe}const We=new B,_t=We.signal;null!=De&&De.signal&&De.signal.addEventListener("abort",()=>We.abort(),{once:!0,[Z]:this,[q]:!0});let U=!1;try{var z,w=!1,b=!1;try{for(var be,ie=N(this);w=!(be=yield ie.next()).done;w=!1){const qe=be.value;var Me;if(U=!0,null!=De&&null!==(Me=De.signal)&&void 0!==Me&&Me.aborted)throw new M;Ke?Be=yield Ee(Be,qe,{signal:_t}):(Be=qe,Ke=!0)}}catch(qe){b=!0,z=qe}finally{try{w&&null!=ie.return&&(yield ie.return())}finally{if(b)throw z}}if(!U&&!Ke)throw new ke}finally{We.abort()}return Be}),_e.apply(this,arguments)}function se(){return(se=C(function*(Ee){null!=Ee&&j(Ee,"options"),null!=Ee?.signal&&F(Ee.signal,"options.signal");const Be=[];var Ke,De=!1,et=!1;try{for(var _t,We=N(this);De=!(_t=yield We.next()).done;De=!1){const w=_t.value;var U;if(null!=Ee&&null!==(U=Ee.signal)&&void 0!==U&&U.aborted)throw new M(void 0,{cause:Ee.signal.reason});ne(Be,w)}}catch(w){et=!0,Ke=w}finally{try{De&&null!=We.return&&(yield We.return())}finally{if(et)throw Ke}}return Be})).apply(this,arguments)}function ce(Ee){if(Ee=Ie(Ee),E(Ee))return 0;if(Ee<0)throw new $("number",">= 0",Ee);return Ee}xe.exports.streamReturningOperators={asIndexedPairs:oe(function p(Ee=void 0){return null!=Ee&&j(Ee,"options"),null!=Ee?.signal&&F(Ee.signal,"options.signal"),function(){var Be=v(function*(){let et=0;var _t,Ke=!1,We=!1;try{for(var w,U=N(this);Ke=!(w=yield G(U.next())).done;Ke=!1){const z=w.value;var b;if(null!=Ee&&null!==(b=Ee.signal)&&void 0!==b&&b.aborted)throw new M({cause:Ee.signal.reason});yield[et++,z]}}catch(z){We=!0,_t=z}finally{try{Ke&&null!=U.return&&(yield G(U.return()))}finally{if(We)throw _t}}});return function De(){return Be.apply(this,arguments)}}().call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function ue(Ee,Be=void 0){return null!=Be&&j(Be,"options"),null!=Be?.signal&&F(Be.signal,"options.signal"),Ee=ce(Ee),function(){var De=v(function*(){var Ke;if(null!=Be&&null!==(Ke=Be.signal)&&void 0!==Ke&&Ke.aborted)throw new M;var U,We=!1,_t=!1;try{for(var b,w=N(this);We=!(b=yield G(w.next())).done;We=!1){const ie=b.value;var z;if(null!=Be&&null!==(z=Be.signal)&&void 0!==z&&z.aborted)throw new M;Ee--<=0&&(yield ie)}}catch(ie){_t=!0,U=ie}finally{try{We&&null!=w.return&&(yield G(w.return()))}finally{if(_t)throw U}}});return function et(){return De.apply(this,arguments)}}().call(this)},filter:ye,flatMap:function re(Ee,Be){const De=d.call(this,Ee,Be);return function(){var et=v(function*(){var U,We=!1,_t=!1;try{for(var b,w=N(De);We=!(b=yield G(w.next())).done;We=!1){const z=b.value;yield*H(N(z),G)}}catch(z){_t=!0,U=z}finally{try{We&&null!=w.return&&(yield G(w.return()))}finally{if(_t)throw U}}});return function Ke(){return et.apply(this,arguments)}}().call(this)},map:d,take:function ge(Ee,Be=void 0){return null!=Be&&j(Be,"options"),null!=Be?.signal&&F(Be.signal,"options.signal"),Ee=ce(Ee),function(){var De=v(function*(){var Ke;if(null!=Be&&null!==(Ke=Be.signal)&&void 0!==Ke&&Ke.aborted)throw new M;var U,We=!1,_t=!1;try{for(var b,w=N(this);We=!(b=yield G(w.next())).done;We=!1){const ie=b.value;var z;if(null!=Be&&null!==(z=Be.signal)&&void 0!==z&&z.aborted)throw new M;if(Ee-- >0&&(yield ie),Ee<=0)return}}catch(ie){_t=!0,U=ie}finally{try{We&&null!=w.return&&(yield G(w.return()))}finally{if(_t)throw U}}});return function et(){return De.apply(this,arguments)}}().call(this)},compose:function m(Ee,Be){if(null!=Be&&j(Be,"options"),null!=Be?.signal&&F(Be.signal,"options.signal"),Q(Ee)&&!X(Ee))throw new _("stream",Ee,"must be writable");const De=K(this,Ee);return null!=Be&&Be.signal&&J(Be.signal,De),De}},xe.exports.promiseReturningOperators={every:function Y(Ee){return le.apply(this,arguments)},forEach:function Ve(Ee,Be){return Re.apply(this,arguments)},reduce:function ve(Ee,Be,De){return _e.apply(this,arguments)},toArray:function de(Ee){return se.apply(this,arguments)},some:V,find:function Se(Ee,Be){return Oe.apply(this,arguments)}}},59447:(xe,O,I)=>{"use strict";const{ObjectSetPrototypeOf:C}=I(56389);xe.exports=N;const H=I(71981);function N(G){if(!(this instanceof N))return new N(G);H.call(this,G)}C(N.prototype,H.prototype),C(N,H),N.prototype._transform=function(G,v,B){B(null,G)}},67843:(xe,O,I)=>{var C=I(29293).default,H=I(42958).default,N=I(53344).default,G=I(93513).default,v=I(82881).default;const B=I(40573),{ArrayIsArray:_,Promise:T,SymbolAsyncIterator:D,SymbolDispose:$}=I(56389),M=I(46017),{once:F}=I(13509),k=I(96507),j=I(13323),{aggregateTwoErrors:Z,codes:{ERR_INVALID_ARG_TYPE:q,ERR_INVALID_RETURN_VALUE:W,ERR_MISSING_ARGS:K,ERR_STREAM_DESTROYED:J,ERR_STREAM_PREMATURE_CLOSE:X},AbortError:Q}=I(68154),{validateFunction:oe,validateAbortSignal:ne}=I(99852),{isIterable:me,isReadable:pe,isReadableNodeStream:Ie,isNodeStream:E,isTransformStream:a,isWebStream:f,isReadableStream:l,isReadableFinished:h}=I(32924),g=globalThis.AbortController||I(9465).AbortController;let x,P,m;function d(ve,_e,de){let se=!1;return ve.on("close",()=>{se=!0}),{destroy:ce=>{se||(se=!0,k.destroyer(ve,ce||new J("pipe")))},cleanup:M(ve,{readable:_e,writable:de},ce=>{se=!ce})}}function V(ve){if(me(ve))return ve;if(Ie(ve))return function L(ve){return Y.apply(this,arguments)}(ve);throw new q("val",["Readable","Iterable","AsyncIterable"],ve)}function Y(){return(Y=H(function*(ve){P||(P=I(84553)),yield*G(v(P.prototype[D].call(ve)),N)})).apply(this,arguments)}function le(ve,_e,de,se){return Se.apply(this,arguments)}function Se(){return(Se=C(function*(ve,_e,de,{end:se}){let re,ce=null;const ue=_t=>{if(_t&&(re=_t),ce){const U=ce;ce=null,U()}},ge=()=>new T((_t,U)=>{re?U(re):ce=()=>{re?U(re):_t()}});_e.on("drain",ue);const Ee=M(_e,{readable:!1},ue);try{_e.writableNeedDrain&&(yield ge());var et,Be=!1,De=!1;try{for(var We,Ke=v(ve);Be=!(We=yield Ke.next()).done;Be=!1)_e.write(We.value)||(yield ge())}catch(_t){De=!0,et=_t}finally{try{Be&&null!=Ke.return&&(yield Ke.return())}finally{if(De)throw et}}se&&(_e.end(),yield ge()),de()}catch(_t){de(re!==_t?Z(re,_t):_t)}finally{Ee(),_e.off("drain",ue)}})).apply(this,arguments)}function Oe(ve,_e,de,se){return Ve.apply(this,arguments)}function Ve(){return(Ve=C(function*(ve,_e,de,{end:se}){a(_e)&&(_e=_e.writable);const re=_e.getWriter();try{var ge,ce=!1,ue=!1;try{for(var Be,Ee=v(ve);ce=!(Be=yield Ee.next()).done;ce=!1){const De=Be.value;yield re.ready,re.write(De).catch(()=>{})}}catch(De){ue=!0,ge=De}finally{try{ce&&null!=Ee.return&&(yield Ee.return())}finally{if(ue)throw ge}}yield re.ready,se&&(yield re.close()),de()}catch(De){try{yield re.abort(De),de(De)}catch(et){de(et)}}})).apply(this,arguments)}function ye(ve,_e,de){if(1===ve.length&&_(ve[0])&&(ve=ve[0]),ve.length<2)throw new K("streams");const se=new g,re=se.signal,ce=de?.signal,ue=[];function ge(){_t(new Q)}let Ee,Be,De;ne(ce,"options.signal"),m=m||I(13509).addAbortListener,ce&&(Ee=m(ce,ge));const et=[];let U,Ke=0;function We(ie){_t(ie,0==--Ke)}function _t(ie,be){var Me;if(ie&&(!Be||"ERR_STREAM_PREMATURE_CLOSE"===Be.code)&&(Be=ie),Be||be){for(;et.length;)et.shift()(Be);null===(Me=Ee)||void 0===Me||Me[$](),se.abort(),be&&(Be||ue.forEach(qe=>qe()),B.nextTick(_e,Be,De))}}for(let ie=0;ie<ve.length;ie++){const be=ve[ie],Me=ie<ve.length-1,qe=ie>0,At=Me||!1!==de?.end,nt=ie===ve.length-1;if(E(be)){let rt=function(St){St&&"AbortError"!==St.name&&"ERR_STREAM_PREMATURE_CLOSE"!==St.code&&We(St)};if(At){const{destroy:St,cleanup:bt}=d(be,Me,qe);et.push(St),pe(be)&&nt&&ue.push(bt)}be.on("error",rt),pe(be)&&nt&&ue.push(()=>{be.removeListener("error",rt)})}if(0===ie)if("function"==typeof be){if(U=be({signal:re}),!me(U))throw new W("Iterable, AsyncIterable or Stream","source",U)}else U=me(be)||Ie(be)||a(be)?be:j.from(be);else if("function"==typeof be){var w;if(U=a(U)?V(null===(w=U)||void 0===w?void 0:w.readable):V(U),U=be(U,{signal:re}),Me){if(!me(U,!0))throw new W("AsyncIterable",`transform[${ie-1}]`,U)}else{var b;x||(x=I(59447));const rt=new x({objectMode:!0}),St=null===(b=U)||void 0===b?void 0:b.then;if("function"==typeof St)Ke++,St.call(U,Ft=>{De=Ft,null!=Ft&&rt.write(Ft),At&&rt.end(),B.nextTick(We)},Ft=>{rt.destroy(Ft),B.nextTick(We,Ft)});else if(me(U,!0))Ke++,le(U,rt,We,{end:At});else{if(!l(U)&&!a(U))throw new W("AsyncIterable or Promise","destination",U);Ke++,le(U.readable||U,rt,We,{end:At})}U=rt;const{destroy:bt,cleanup:Mt}=d(U,!1,!0);et.push(bt),nt&&ue.push(Mt)}}else if(E(be)){if(Ie(U)){Ke+=2;const rt=ke(U,be,We,{end:At});pe(be)&&nt&&ue.push(rt)}else if(a(U)||l(U))Ke++,le(U.readable||U,be,We,{end:At});else{if(!me(U))throw new q("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],U);Ke++,le(U,be,We,{end:At})}U=be}else if(f(be)){if(Ie(U))Ke++,Oe(V(U),be,We,{end:At});else if(l(U)||me(U))Ke++,Oe(U,be,We,{end:At});else{if(!a(U))throw new q("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],U);Ke++,Oe(U.readable,be,We,{end:At})}U=be}else U=j.from(be)}return(null!=re&&re.aborted||null!=ce&&ce.aborted)&&B.nextTick(ge),U}function ke(ve,_e,de,{end:se}){let re=!1;if(_e.on("close",()=>{re||de(new X)}),ve.pipe(_e,{end:!1}),se){let ue=function(){re=!0,_e.end()};h(ve)?B.nextTick(ue):ve.once("end",ue)}else de();return M(ve,{readable:!0,writable:!1},ue=>{const ge=ve._readableState;ue&&"ERR_STREAM_PREMATURE_CLOSE"===ue.code&&ge&&ge.ended&&!ge.errored&&!ge.errorEmitted?ve.once("end",de).once("error",de):de(ue)}),M(_e,{readable:!1,writable:!0},de)}xe.exports={pipelineImpl:ye,pipeline:function Re(...ve){return ye(ve,F(function p(ve){return oe(ve[ve.length-1],"streams[stream.length - 1]"),ve.pop()}(ve)))}}},84553:(xe,O,I)=>{var C=I(53344).default,H=I(42958).default;const N=I(40573),{ArrayPrototypeIndexOf:G,NumberIsInteger:v,NumberIsNaN:B,NumberParseInt:_,ObjectDefineProperties:T,ObjectKeys:D,ObjectSetPrototypeOf:$,Promise:M,SafeSet:F,SymbolAsyncDispose:k,SymbolAsyncIterator:j,Symbol:Z}=I(56389);xe.exports=We,We.ReadableState=Ke;const{EventEmitter:q}=I(44356),{Stream:W,prependListener:K}=I(91242),{Buffer:J}=I(68316),{addAbortSignal:X}=I(57062),Q=I(46017);let oe=I(13509).debuglog("stream",Fe=>{oe=Fe});const ne=I(16630),me=I(96507),{getHighWaterMark:pe,getDefaultHighWaterMark:Ie}=I(18212),{aggregateTwoErrors:E,codes:{ERR_INVALID_ARG_TYPE:a,ERR_METHOD_NOT_IMPLEMENTED:f,ERR_OUT_OF_RANGE:l,ERR_STREAM_PUSH_AFTER_EOF:h,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:g},AbortError:x}=I(68154),{validateObject:P}=I(99852),m=Z("kPaused"),{StringDecoder:d}=I(78454),p=I(45737);$(We.prototype,W.prototype),$(We,W);const V=()=>{},{errorOrDestroy:L}=me,Y=1,Ve=16,Re=32,ye=64,se=2048,re=4096,Ee=65536;function et(Fe){return{enumerable:!1,get(){return!!(this.state&Fe)},set(He){He?this.state|=Fe:this.state&=~Fe}}}function Ke(Fe,He,Ze){"boolean"!=typeof Ze&&(Ze=He instanceof I(13323)),this.state=se|re|Ve|Re,Fe&&Fe.objectMode&&(this.state|=Y),Ze&&Fe&&Fe.readableObjectMode&&(this.state|=Y),this.highWaterMark=Fe?pe(this,Fe,"readableHighWaterMark",Ze):Ie(!1),this.buffer=new ne,this.length=0,this.pipes=[],this.flowing=null,this[m]=null,Fe&&!1===Fe.emitClose&&(this.state&=~se),Fe&&!1===Fe.autoDestroy&&(this.state&=~re),this.errored=null,this.defaultEncoding=Fe&&Fe.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,Fe&&Fe.encoding&&(this.decoder=new d(Fe.encoding),this.encoding=Fe.encoding)}function We(Fe){if(!(this instanceof We))return new We(Fe);const He=this instanceof I(13323);this._readableState=new Ke(Fe,this,He),Fe&&("function"==typeof Fe.read&&(this._read=Fe.read),"function"==typeof Fe.destroy&&(this._destroy=Fe.destroy),"function"==typeof Fe.construct&&(this._construct=Fe.construct),Fe.signal&&!He&&X(Fe.signal,this)),W.call(this,Fe),me.construct(this,()=>{this._readableState.needReadable&&qe(this,this._readableState)})}function _t(Fe,He,Ze,Ue){oe("readableAddChunk",He);const Ge=Fe._readableState;let pt;if(Ge.state&Y||("string"==typeof He?Ge.encoding!==(Ze=Ze||Ge.defaultEncoding)&&(Ue&&Ge.encoding?He=J.from(He,Ze).toString(Ge.encoding):(He=J.from(He,Ze),Ze="")):He instanceof J?Ze="":W._isUint8Array(He)?(He=W._uint8ArrayToBuffer(He),Ze=""):null!=He&&(pt=new a("chunk",["string","Buffer","Uint8Array"],He))),pt)L(Fe,pt);else if(null===He)Ge.state&=-9,function ie(Fe,He){if(oe("onEofChunk"),!He.ended){if(He.decoder){const Ze=He.decoder.end();Ze&&Ze.length&&(He.buffer.push(Ze),He.length+=He.objectMode?1:Ze.length)}He.ended=!0,He.sync?be(Fe):(He.needReadable=!1,He.emittedReadable=!0,Me(Fe))}}(Fe,Ge);else if(Ge.state&Y||He&&He.length>0)if(Ue)if(4&Ge.state)L(Fe,new g);else{if(Ge.destroyed||Ge.errored)return!1;U(Fe,Ge,He,!0)}else if(Ge.ended)L(Fe,new h);else{if(Ge.destroyed||Ge.errored)return!1;Ge.state&=-9,Ge.decoder&&!Ze?(He=Ge.decoder.write(He),Ge.objectMode||0!==He.length?U(Fe,Ge,He,!1):qe(Fe,Ge)):U(Fe,Ge,He,!1)}else Ue||(Ge.state&=-9,qe(Fe,Ge));return!Ge.ended&&(Ge.length<Ge.highWaterMark||0===Ge.length)}function U(Fe,He,Ze,Ue){He.flowing&&0===He.length&&!He.sync&&Fe.listenerCount("data")>0?(He.state&Ee?He.awaitDrainWriters.clear():He.awaitDrainWriters=null,He.dataEmitted=!0,Fe.emit("data",Ze)):(He.length+=He.objectMode?1:Ze.length,Ue?He.buffer.unshift(Ze):He.buffer.push(Ze),He.state&ye&&be(Fe)),qe(Fe,He)}function z(Fe,He){return Fe<=0||0===He.length&&He.ended?0:He.state&Y?1:B(Fe)?He.flowing&&He.length?He.buffer.first().length:He.length:Fe<=He.length?Fe:He.ended?He.length:0}function be(Fe){const He=Fe._readableState;oe("emitReadable",He.needReadable,He.emittedReadable),He.needReadable=!1,He.emittedReadable||(oe("emitReadable",He.flowing),He.emittedReadable=!0,N.nextTick(Me,Fe))}function Me(Fe){const He=Fe._readableState;oe("emitReadable_",He.destroyed,He.length,He.ended),!He.destroyed&&!He.errored&&(He.length||He.ended)&&(Fe.emit("readable"),He.emittedReadable=!1),He.needReadable=!He.flowing&&!He.ended&&He.length<=He.highWaterMark,Ft(Fe)}function qe(Fe,He){!He.readingMore&&He.constructed&&(He.readingMore=!0,N.nextTick(At,Fe,He))}function At(Fe,He){for(;!He.reading&&!He.ended&&(He.length<He.highWaterMark||He.flowing&&0===He.length);){const Ze=He.length;if(oe("maybeReadMore read 0"),Fe.read(0),Ze===He.length)break}He.readingMore=!1}function rt(Fe){const He=Fe._readableState;He.readableListening=Fe.listenerCount("readable")>0,He.resumeScheduled&&!1===He[m]?He.flowing=!0:Fe.listenerCount("data")>0?Fe.resume():He.readableListening||(He.flowing=null)}function St(Fe){oe("readable nexttick read 0"),Fe.read(0)}function Mt(Fe,He){oe("resume",He.reading),He.reading||Fe.read(0),He.resumeScheduled=!1,Fe.emit("resume"),Ft(Fe),He.flowing&&!He.reading&&Fe.read(0)}function Ft(Fe){const He=Fe._readableState;for(oe("flow",He.flowing);He.flowing&&null!==Fe.read(););}function it(Fe,He){"function"!=typeof Fe.read&&(Fe=We.wrap(Fe,{objectMode:!0}));const Ze=function mt(Fe,He){return Rr.apply(this,arguments)}(Fe,He);return Ze.stream=Fe,Ze}function Rr(){return(Rr=H(function*(Fe,He){let Ge,Ze=V;function Ue(Xe){this===Fe?(Ze(),Ze=V):Ze=Xe}Fe.on("readable",Ue);const pt=Q(Fe,{writable:!1},Xe=>{Ge=Xe?E(Ge,Xe):null,Ze(),Ze=V});try{for(;;){const Xe=Fe.destroyed?null:Fe.read();if(null!==Xe)yield Xe;else{if(Ge)throw Ge;if(null===Ge)return;yield C(new M(Ue))}}}catch(Xe){throw Ge=E(Ge,Xe),Ge}finally{!Ge&&!1===He?.destroyOnReturn||void 0!==Ge&&!Fe._readableState.autoDestroy?(Fe.off("readable",Ue),pt()):me.destroyer(Fe,null)}})).apply(this,arguments)}function xt(Fe,He){if(0===He.length)return null;let Ze;return He.objectMode?Ze=He.buffer.shift():!Fe||Fe>=He.length?(Ze=He.decoder?He.buffer.join(""):1===He.buffer.length?He.buffer.first():He.buffer.concat(He.length),He.buffer.clear()):Ze=He.buffer.consume(Fe,He.decoder),Ze}function It(Fe){const He=Fe._readableState;oe("endReadable",He.endEmitted),He.endEmitted||(He.ended=!0,N.nextTick(Qr,He,Fe))}function Qr(Fe,He){if(oe("endReadableNT",Fe.endEmitted,Fe.length),!Fe.errored&&!Fe.closeEmitted&&!Fe.endEmitted&&0===Fe.length)if(Fe.endEmitted=!0,He.emit("end"),He.writable&&!1===He.allowHalfOpen)N.nextTick(Tt,He);else if(Fe.autoDestroy){const Ze=He._writableState;(!Ze||Ze.autoDestroy&&(Ze.finished||!1===Ze.writable))&&He.destroy()}}function Tt(Fe){Fe.writable&&!Fe.writableEnded&&!Fe.destroyed&&Fe.end()}let Pt;function kn(){return void 0===Pt&&(Pt={}),Pt}T(Ke.prototype,{objectMode:et(Y),ended:et(2),endEmitted:et(4),reading:et(8),constructed:et(Ve),sync:et(Re),needReadable:et(ye),emittedReadable:et(128),readableListening:et(256),resumeScheduled:et(512),errorEmitted:et(1024),emitClose:et(se),autoDestroy:et(re),destroyed:et(8192),closed:et(16384),closeEmitted:et(32768),multiAwaitDrain:et(Ee),readingMore:et(1<<17),dataEmitted:et(1<<18)}),We.prototype.destroy=me.destroy,We.prototype._undestroy=me.undestroy,We.prototype._destroy=function(Fe,He){He(Fe)},We.prototype[q.captureRejectionSymbol]=function(Fe){this.destroy(Fe)},We.prototype[k]=function(){let Fe;return this.destroyed||(Fe=this.readableEnded?null:new x,this.destroy(Fe)),new M((He,Ze)=>Q(this,Ue=>Ue&&Ue!==Fe?Ze(Ue):He(null)))},We.prototype.push=function(Fe,He){return _t(this,Fe,He,!1)},We.prototype.unshift=function(Fe,He){return _t(this,Fe,He,!0)},We.prototype.isPaused=function(){const Fe=this._readableState;return!0===Fe[m]||!1===Fe.flowing},We.prototype.setEncoding=function(Fe){const He=new d(Fe);this._readableState.decoder=He,this._readableState.encoding=this._readableState.decoder.encoding;const Ze=this._readableState.buffer;let Ue="";for(const Ge of Ze)Ue+=He.write(Ge);return Ze.clear(),""!==Ue&&Ze.push(Ue),this._readableState.length=Ue.length,this},We.prototype.read=function(Fe){oe("read",Fe),void 0===Fe?Fe=NaN:v(Fe)||(Fe=_(Fe,10));const He=this._readableState,Ze=Fe;if(Fe>He.highWaterMark&&(He.highWaterMark=function b(Fe){if(Fe>1073741824)throw new l("size","<= 1GiB",Fe);return Fe--,Fe|=Fe>>>1,Fe|=Fe>>>2,Fe|=Fe>>>4,Fe|=Fe>>>8,Fe|=Fe>>>16,++Fe}(Fe)),0!==Fe&&(He.state&=-129),0===Fe&&He.needReadable&&((0!==He.highWaterMark?He.length>=He.highWaterMark:He.length>0)||He.ended))return oe("read: emitReadable",He.length,He.ended),0===He.length&&He.ended?It(this):be(this),null;if(0===(Fe=z(Fe,He))&&He.ended)return 0===He.length&&It(this),null;let Ge,Ue=!!(He.state&ye);if(oe("need readable",Ue),(0===He.length||He.length-Fe<He.highWaterMark)&&(Ue=!0,oe("length less than watermark",Ue)),He.ended||He.reading||He.destroyed||He.errored||!He.constructed)Ue=!1,oe("reading, ended or constructing",Ue);else if(Ue){oe("do read"),He.state|=8|Re,0===He.length&&(He.state|=ye);try{this._read(He.highWaterMark)}catch(pt){L(this,pt)}He.state&=~Re,He.reading||(Fe=z(Ze,He))}return Ge=Fe>0?xt(Fe,He):null,null===Ge?(He.needReadable=He.length<=He.highWaterMark,Fe=0):(He.length-=Fe,He.multiAwaitDrain?He.awaitDrainWriters.clear():He.awaitDrainWriters=null),0===He.length&&(He.ended||(He.needReadable=!0),Ze!==Fe&&He.ended&&It(this)),null!==Ge&&!He.errorEmitted&&!He.closeEmitted&&(He.dataEmitted=!0,this.emit("data",Ge)),Ge},We.prototype._read=function(Fe){throw new f("_read()")},We.prototype.pipe=function(Fe,He){const Ze=this,Ue=this._readableState;1===Ue.pipes.length&&(Ue.multiAwaitDrain||(Ue.multiAwaitDrain=!0,Ue.awaitDrainWriters=new F(Ue.awaitDrainWriters?[Ue.awaitDrainWriters]:[]))),Ue.pipes.push(Fe),oe("pipe count=%d opts=%j",Ue.pipes.length,He);const pt=He&&!1===He.end||Fe===N.stdout||Fe===N.stderr?or:dt;function dt(){oe("onend"),Fe.end()}Ue.endEmitted?N.nextTick(pt):Ze.once("end",pt),Fe.on("unpipe",function Xe(mr,ar){oe("onunpipe"),mr===Ze&&ar&&!1===ar.hasUnpiped&&(ar.hasUnpiped=!0,function wt(){oe("cleanup"),Fe.removeListener("close",Tr),Fe.removeListener("finish",dr),Qt&&Fe.removeListener("drain",Qt),Fe.removeListener("error",Zt),Fe.removeListener("unpipe",Xe),Ze.removeListener("end",dt),Ze.removeListener("end",or),Ze.removeListener("data",Vt),gt=!0,Qt&&Ue.awaitDrainWriters&&(!Fe._writableState||Fe._writableState.needDrain)&&Qt()}())});let Qt,gt=!1;function Br(){gt||(1===Ue.pipes.length&&Ue.pipes[0]===Fe?(oe("false write response, pause",0),Ue.awaitDrainWriters=Fe,Ue.multiAwaitDrain=!1):Ue.pipes.length>1&&Ue.pipes.includes(Fe)&&(oe("false write response, pause",Ue.awaitDrainWriters.size),Ue.awaitDrainWriters.add(Fe)),Ze.pause()),Qt||(Qt=function nt(Fe,He){return function(){const Ue=Fe._readableState;Ue.awaitDrainWriters===He?(oe("pipeOnDrain",1),Ue.awaitDrainWriters=null):Ue.multiAwaitDrain&&(oe("pipeOnDrain",Ue.awaitDrainWriters.size),Ue.awaitDrainWriters.delete(He)),(!Ue.awaitDrainWriters||0===Ue.awaitDrainWriters.size)&&Fe.listenerCount("data")&&Fe.resume()}}(Ze,Fe),Fe.on("drain",Qt))}function Vt(mr){oe("ondata");const ar=Fe.write(mr);oe("dest.write",ar),!1===ar&&Br()}function Zt(mr){if(oe("onerror",mr),or(),Fe.removeListener("error",Zt),0===Fe.listenerCount("error")){const ar=Fe._writableState||Fe._readableState;ar&&!ar.errorEmitted?L(Fe,mr):Fe.emit("error",mr)}}function Tr(){Fe.removeListener("finish",dr),or()}function dr(){oe("onfinish"),Fe.removeListener("close",Tr),or()}function or(){oe("unpipe"),Ze.unpipe(Fe)}return Ze.on("data",Vt),K(Fe,"error",Zt),Fe.once("close",Tr),Fe.once("finish",dr),Fe.emit("pipe",Ze),!0===Fe.writableNeedDrain?Br():Ue.flowing||(oe("pipe resume"),Ze.resume()),Fe},We.prototype.unpipe=function(Fe){const He=this._readableState;if(0===He.pipes.length)return this;if(!Fe){const Ge=He.pipes;He.pipes=[],this.pause();for(let pt=0;pt<Ge.length;pt++)Ge[pt].emit("unpipe",this,{hasUnpiped:!1});return this}const Ue=G(He.pipes,Fe);return-1===Ue||(He.pipes.splice(Ue,1),0===He.pipes.length&&this.pause(),Fe.emit("unpipe",this,{hasUnpiped:!1})),this},We.prototype.addListener=We.prototype.on=function(Fe,He){const Ze=W.prototype.on.call(this,Fe,He),Ue=this._readableState;return"data"===Fe?(Ue.readableListening=this.listenerCount("readable")>0,!1!==Ue.flowing&&this.resume()):"readable"===Fe&&!Ue.endEmitted&&!Ue.readableListening&&(Ue.readableListening=Ue.needReadable=!0,Ue.flowing=!1,Ue.emittedReadable=!1,oe("on readable",Ue.length,Ue.reading),Ue.length?be(this):Ue.reading||N.nextTick(St,this)),Ze},We.prototype.off=We.prototype.removeListener=function(Fe,He){const Ze=W.prototype.removeListener.call(this,Fe,He);return"readable"===Fe&&N.nextTick(rt,this),Ze},We.prototype.removeAllListeners=function(Fe){const He=W.prototype.removeAllListeners.apply(this,arguments);return("readable"===Fe||void 0===Fe)&&N.nextTick(rt,this),He},We.prototype.resume=function(){const Fe=this._readableState;return Fe.flowing||(oe("resume"),Fe.flowing=!Fe.readableListening,function bt(Fe,He){He.resumeScheduled||(He.resumeScheduled=!0,N.nextTick(Mt,Fe,He))}(this,Fe)),Fe[m]=!1,this},We.prototype.pause=function(){return oe("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(oe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[m]=!0,this},We.prototype.wrap=function(Fe){let He=!1;Fe.on("data",Ue=>{!this.push(Ue)&&Fe.pause&&(He=!0,Fe.pause())}),Fe.on("end",()=>{this.push(null)}),Fe.on("error",Ue=>{L(this,Ue)}),Fe.on("close",()=>{this.destroy()}),Fe.on("destroy",()=>{this.destroy()}),this._read=()=>{He&&Fe.resume&&(He=!1,Fe.resume())};const Ze=D(Fe);for(let Ue=1;Ue<Ze.length;Ue++){const Ge=Ze[Ue];void 0===this[Ge]&&"function"==typeof Fe[Ge]&&(this[Ge]=Fe[Ge].bind(Fe))}return this},We.prototype[j]=function(){return it(this)},We.prototype.iterator=function(Fe){return void 0!==Fe&&P(Fe,"options"),it(this,Fe)},T(We.prototype,{readable:{__proto__:null,get(){const Fe=this._readableState;return!(!Fe||!1===Fe.readable||Fe.destroyed||Fe.errorEmitted||Fe.endEmitted)},set(Fe){this._readableState&&(this._readableState.readable=!!Fe)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(Fe){this._readableState&&(this._readableState.flowing=Fe)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(Fe){this._readableState&&(this._readableState.destroyed=Fe)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),T(Ke.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[m]},set(Fe){this[m]=!!Fe}}}),We._fromList=xt,We.from=function(Fe,He){return p(We,Fe,He)},We.fromWeb=function(Fe,He){return kn().newStreamReadableFromReadableStream(Fe,He)},We.toWeb=function(Fe,He){return kn().newReadableStreamFromStreamReadable(Fe,He)},We.wrap=function(Fe,He){var Ze,Ue;return new We({objectMode:null===(Ze=null!==(Ue=Fe.readableObjectMode)&&void 0!==Ue?Ue:Fe.objectMode)||void 0===Ze||Ze,...He,destroy(Ge,pt){me.destroyer(Fe,Ge),pt(Ge)}}).wrap(Fe)}},18212:(xe,O,I)=>{"use strict";const{MathFloor:C,NumberIsInteger:H}=I(56389),{validateInteger:N}=I(99852),{ERR_INVALID_ARG_VALUE:G}=I(68154).codes;let v=16384,B=16;function T(M){return M?B:v}xe.exports={getHighWaterMark:function $(M,F,k,j){const Z=function _(M,F,k){return null!=M.highWaterMark?M.highWaterMark:F?M[k]:null}(F,j,k);if(null!=Z){if(!H(Z)||Z<0)throw new G(j?`options.${k}`:"options.highWaterMark",Z);return C(Z)}return T(M.objectMode)},getDefaultHighWaterMark:T,setDefaultHighWaterMark:function D(M,F){N(F,"value",0),M?B=F:v=F}}},71981:(xe,O,I)=>{"use strict";const{ObjectSetPrototypeOf:C,Symbol:H}=I(56389);xe.exports=_;const{ERR_METHOD_NOT_IMPLEMENTED:N}=I(68154).codes,G=I(13323),{getHighWaterMark:v}=I(18212);C(_.prototype,G.prototype),C(_,G);const B=H("kCallback");function _($){if(!(this instanceof _))return new _($);const M=$?v(this,$,"readableHighWaterMark",!0):null;0===M&&($={...$,highWaterMark:null,readableHighWaterMark:M,writableHighWaterMark:$.writableHighWaterMark||0}),G.call(this,$),this._readableState.sync=!1,this[B]=null,$&&("function"==typeof $.transform&&(this._transform=$.transform),"function"==typeof $.flush&&(this._flush=$.flush)),this.on("prefinish",D)}function T($){"function"!=typeof this._flush||this.destroyed?(this.push(null),$&&$()):this._flush((M,F)=>{M?$?$(M):this.destroy(M):(null!=F&&this.push(F),this.push(null),$&&$())})}function D(){this._final!==T&&T.call(this)}_.prototype._final=T,_.prototype._transform=function($,M,F){throw new N("_transform()")},_.prototype._write=function($,M,F){const k=this._readableState,j=this._writableState,Z=k.length;this._transform($,M,(q,W)=>{q?F(q):(null!=W&&this.push(W),j.ended||Z===k.length||k.length<k.highWaterMark?F():this[B]=F)})},_.prototype._read=function(){if(this[B]){const $=this[B];this[B]=null,$()}}},32924:(xe,O,I)=>{"use strict";const{SymbolAsyncIterator:C,SymbolIterator:H,SymbolFor:N}=I(56389),G=N("nodejs.stream.destroyed"),v=N("nodejs.stream.errored"),B=N("nodejs.stream.readable"),_=N("nodejs.stream.writable"),T=N("nodejs.stream.disturbed"),D=N("nodejs.webstream.isClosedPromise"),$=N("nodejs.webstream.controllerErrorFunction");function M(p,V=!1){var L;return!(!p||"function"!=typeof p.pipe||"function"!=typeof p.on||V&&("function"!=typeof p.pause||"function"!=typeof p.resume)||p._writableState&&!1===(null===(L=p._readableState)||void 0===L?void 0:L.readable)||p._writableState&&!p._readableState)}function F(p){var V;return!(!p||"function"!=typeof p.write||"function"!=typeof p.on||p._readableState&&!1===(null===(V=p._writableState)||void 0===V?void 0:V.writable))}function j(p){return p&&(p._readableState||p._writableState||"function"==typeof p.write&&"function"==typeof p.on||"function"==typeof p.pipe&&"function"==typeof p.on)}function Z(p){return!(!p||j(p)||"function"!=typeof p.pipeThrough||"function"!=typeof p.getReader||"function"!=typeof p.cancel)}function q(p){return!(!p||j(p)||"function"!=typeof p.getWriter||"function"!=typeof p.abort)}function W(p){return!(!p||j(p)||"object"!=typeof p.readable||"object"!=typeof p.writable)}function X(p){if(!j(p))return null;const Y=p._writableState||p._readableState;return!!(p.destroyed||p[G]||null!=Y&&Y.destroyed)}function Q(p){if(!F(p))return null;if(!0===p.writableEnded)return!0;const V=p._writableState;return(null==V||!V.errored)&&("boolean"!=typeof V?.ended?null:V.ended)}function me(p,V){if(!M(p))return null;const L=p._readableState;return(null==L||!L.errored)&&("boolean"!=typeof L?.endEmitted?null:!!(L.endEmitted||!1===V&&!0===L.ended&&0===L.length))}function pe(p){return p&&null!=p[B]?p[B]:"boolean"!=typeof p?.readable?null:!X(p)&&M(p)&&p.readable&&!me(p)}function Ie(p){return p&&null!=p[_]?p[_]:"boolean"!=typeof p?.writable?null:!X(p)&&F(p)&&p.writable&&!Q(p)}function h(p){return"boolean"==typeof p._closed&&"boolean"==typeof p._defaultKeepAlive&&"boolean"==typeof p._removedConnection&&"boolean"==typeof p._removedContLen}function g(p){return"boolean"==typeof p._sent100&&h(p)}xe.exports={isDestroyed:X,kIsDestroyed:G,isDisturbed:function m(p){var V;return!(!p||!(null!==(V=p[T])&&void 0!==V?V:p.readableDidRead||p.readableAborted))},kIsDisturbed:T,isErrored:function d(p){var V,L,Y,le,Se,Oe,Ve,Re,ye,ke;return!(!p||!(null!==(V=null!==(L=null!==(Y=null!==(le=null!==(Se=null!==(Oe=p[v])&&void 0!==Oe?Oe:p.readableErrored)&&void 0!==Se?Se:p.writableErrored)&&void 0!==le?le:null===(Ve=p._readableState)||void 0===Ve?void 0:Ve.errorEmitted)&&void 0!==Y?Y:null===(Re=p._writableState)||void 0===Re?void 0:Re.errorEmitted)&&void 0!==L?L:null===(ye=p._readableState)||void 0===ye?void 0:ye.errored)&&void 0!==V?V:null!==(ke=p._writableState)&&void 0!==ke&&ke.errored))},kIsErrored:v,isReadable:pe,kIsReadable:B,kIsClosedPromise:D,kControllerErrorFunction:$,kIsWritable:_,isClosed:function l(p){if(!j(p))return null;if("boolean"==typeof p.closed)return p.closed;const V=p._writableState,L=p._readableState;return"boolean"==typeof V?.closed||"boolean"==typeof L?.closed?V?.closed||L?.closed:"boolean"==typeof p._closed&&h(p)?p._closed:null},isDuplexNodeStream:function k(p){return!(!p||"function"!=typeof p.pipe||!p._readableState||"function"!=typeof p.on||"function"!=typeof p.write)},isFinished:function E(p,V){return j(p)?!!X(p)||!(!1!==V?.readable&&pe(p)||!1!==V?.writable&&Ie(p)):null},isIterable:function J(p,V){return null!=p&&(!0===V?"function"==typeof p[C]:!1===V?"function"==typeof p[H]:"function"==typeof p[C]||"function"==typeof p[H])},isReadableNodeStream:M,isReadableStream:Z,isReadableEnded:function ne(p){if(!M(p))return null;if(!0===p.readableEnded)return!0;const V=p._readableState;return!(!V||V.errored)&&("boolean"!=typeof V?.ended?null:V.ended)},isReadableFinished:me,isReadableErrored:function f(p){var V,L;return j(p)?p.readableErrored?p.readableErrored:null!==(V=null===(L=p._readableState)||void 0===L?void 0:L.errored)&&void 0!==V?V:null:null},isNodeStream:j,isWebStream:function K(p){return Z(p)||q(p)||W(p)},isWritable:Ie,isWritableNodeStream:F,isWritableStream:q,isWritableEnded:Q,isWritableFinished:function oe(p,V){if(!F(p))return null;if(!0===p.writableFinished)return!0;const L=p._writableState;return(null==L||!L.errored)&&("boolean"!=typeof L?.finished?null:!!(L.finished||!1===V&&!0===L.ended&&0===L.length))},isWritableErrored:function a(p){var V,L;return j(p)?p.writableErrored?p.writableErrored:null!==(V=null===(L=p._writableState)||void 0===L?void 0:L.errored)&&void 0!==V?V:null:null},isServerRequest:function x(p){var V;return"boolean"==typeof p._consuming&&"boolean"==typeof p._dumped&&void 0===(null===(V=p.req)||void 0===V?void 0:V.upgradeOrConnect)},isServerResponse:g,willEmitClose:function P(p){if(!j(p))return null;const Y=p._writableState||p._readableState;return!Y&&g(p)||!!(Y&&Y.autoDestroy&&Y.emitClose&&!1===Y.closed)},isTransformStream:W}},30009:(xe,O,I)=>{const C=I(40573),{ArrayPrototypeSlice:H,Error:N,FunctionPrototypeSymbolHasInstance:G,ObjectDefineProperty:v,ObjectDefineProperties:B,ObjectSetPrototypeOf:_,StringPrototypeToLowerCase:T,Symbol:D,SymbolHasInstance:$}=I(56389);xe.exports=g,g.WritableState=l;const{EventEmitter:M}=I(44356),F=I(91242).Stream,{Buffer:k}=I(68316),j=I(96507),{addAbortSignal:Z}=I(57062),{getHighWaterMark:q,getDefaultHighWaterMark:W}=I(18212),{ERR_INVALID_ARG_TYPE:K,ERR_METHOD_NOT_IMPLEMENTED:J,ERR_MULTIPLE_CALLBACK:X,ERR_STREAM_CANNOT_PIPE:Q,ERR_STREAM_DESTROYED:oe,ERR_STREAM_ALREADY_FINISHED:ne,ERR_STREAM_NULL_VALUES:me,ERR_STREAM_WRITE_AFTER_END:pe,ERR_UNKNOWN_ENCODING:Ie}=I(68154).codes,{errorOrDestroy:E}=j;function a(){}_(g.prototype,F.prototype),_(g,F);const f=D("kOnFinished");function l(de,se,re){"boolean"!=typeof re&&(re=se instanceof I(13323)),this.objectMode=!(!de||!de.objectMode),re&&(this.objectMode=this.objectMode||!(!de||!de.writableObjectMode)),this.highWaterMark=de?q(this,de,"writableHighWaterMark",re):W(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(de&&!1===de.decodeStrings),this.defaultEncoding=de&&de.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=p.bind(void 0,se),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,h(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!de||!1!==de.emitClose,this.autoDestroy=!de||!1!==de.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[f]=[]}function h(de){de.buffered=[],de.bufferedIndex=0,de.allBuffers=!0,de.allNoop=!0}function g(de){const se=this instanceof I(13323);if(!se&&!G(g,this))return new g(de);this._writableState=new l(de,this,se),de&&("function"==typeof de.write&&(this._write=de.write),"function"==typeof de.writev&&(this._writev=de.writev),"function"==typeof de.destroy&&(this._destroy=de.destroy),"function"==typeof de.final&&(this._final=de.final),"function"==typeof de.construct&&(this._construct=de.construct),de.signal&&Z(de.signal,this)),F.call(this,de),j.construct(this,()=>{const re=this._writableState;re.writing||le(this,re),Re(this,re)})}function x(de,se,re,ce){const ue=de._writableState;if("function"==typeof re)ce=re,re=ue.defaultEncoding;else{if(re){if("buffer"!==re&&!k.isEncoding(re))throw new Ie(re)}else re=ue.defaultEncoding;"function"!=typeof ce&&(ce=a)}if(null===se)throw new me;if(!ue.objectMode)if("string"==typeof se)!1!==ue.decodeStrings&&(se=k.from(se,re),re="buffer");else if(se instanceof k)re="buffer";else{if(!F._isUint8Array(se))throw new K("chunk",["string","Buffer","Uint8Array"],se);se=F._uint8ArrayToBuffer(se),re="buffer"}let ge;return ue.ending?ge=new pe:ue.destroyed&&(ge=new oe("write")),ge?(C.nextTick(ce,ge),E(de,ge,!0),ge):(ue.pendingcb++,function P(de,se,re,ce,ue){const ge=se.objectMode?1:re.length;se.length+=ge;const Ee=se.length<se.highWaterMark;return Ee||(se.needDrain=!0),se.writing||se.corked||se.errored||!se.constructed?(se.buffered.push({chunk:re,encoding:ce,callback:ue}),se.allBuffers&&"buffer"!==ce&&(se.allBuffers=!1),se.allNoop&&ue!==a&&(se.allNoop=!1)):(se.writelen=ge,se.writecb=ue,se.writing=!0,se.sync=!0,de._write(re,ce,se.onwrite),se.sync=!1),Ee&&!se.errored&&!se.destroyed}(de,ue,se,re,ce))}function m(de,se,re,ce,ue,ge,Ee){se.writelen=ce,se.writecb=Ee,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new oe("write")):re?de._writev(ue,se.onwrite):de._write(ue,ge,se.onwrite),se.sync=!1}function d(de,se,re,ce){--se.pendingcb,ce(re),Y(se),E(de,re)}function p(de,se){const re=de._writableState,ce=re.sync,ue=re.writecb;"function"==typeof ue?(re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0,se?(re.errored||(re.errored=se),de._readableState&&!de._readableState.errored&&(de._readableState.errored=se),ce?C.nextTick(d,de,re,se,ue):d(de,re,se,ue)):(re.buffered.length>re.bufferedIndex&&le(de,re),ce?null!==re.afterWriteTickInfo&&re.afterWriteTickInfo.cb===ue?re.afterWriteTickInfo.count++:(re.afterWriteTickInfo={count:1,cb:ue,stream:de,state:re},C.nextTick(V,re.afterWriteTickInfo)):L(de,re,1,ue))):E(de,new X)}function V({stream:de,state:se,count:re,cb:ce}){return se.afterWriteTickInfo=null,L(de,se,re,ce)}function L(de,se,re,ce){for(!se.ending&&!de.destroyed&&0===se.length&&se.needDrain&&(se.needDrain=!1,de.emit("drain"));re-- >0;)se.pendingcb--,ce();se.destroyed&&Y(se),Re(de,se)}function Y(de){if(de.writing)return;for(let ue=de.bufferedIndex;ue<de.buffered.length;++ue){var se;const{chunk:ge,callback:Ee}=de.buffered[ue];de.length-=de.objectMode?1:ge.length,Ee(null!==(se=de.errored)&&void 0!==se?se:new oe("write"))}const re=de[f].splice(0);for(let ue=0;ue<re.length;ue++){var ce;re[ue](null!==(ce=de.errored)&&void 0!==ce?ce:new oe("end"))}h(de)}function le(de,se){if(se.corked||se.bufferProcessing||se.destroyed||!se.constructed)return;const{buffered:re,bufferedIndex:ce,objectMode:ue}=se,ge=re.length-ce;if(!ge)return;let Ee=ce;if(se.bufferProcessing=!0,ge>1&&de._writev){se.pendingcb-=ge-1;const Be=se.allNoop?a:et=>{for(let Ke=Ee;Ke<re.length;++Ke)re[Ke].callback(et)},De=se.allNoop&&0===Ee?re:H(re,Ee);De.allBuffers=se.allBuffers,m(de,se,!0,se.length,De,"",Be),h(se)}else{do{const{chunk:Be,encoding:De,callback:et}=re[Ee];re[Ee++]=null,m(de,se,!1,ue?1:Be.length,Be,De,et)}while(Ee<re.length&&!se.writing);Ee===re.length?h(se):Ee>256?(re.splice(0,Ee),se.bufferedIndex=0):se.bufferedIndex=Ee}se.bufferProcessing=!1}function Se(de){return de.ending&&!de.destroyed&&de.constructed&&0===de.length&&!de.errored&&0===de.buffered.length&&!de.finished&&!de.writing&&!de.errorEmitted&&!de.closeEmitted}function Re(de,se,re){Se(se)&&(function Ve(de,se){!se.prefinished&&!se.finalCalled&&("function"!=typeof de._final||se.destroyed?(se.prefinished=!0,de.emit("prefinish")):(se.finalCalled=!0,function Oe(de,se){let re=!1;function ce(ue){if(re)E(de,ue??X());else if(re=!0,se.pendingcb--,ue){const ge=se[f].splice(0);for(let Ee=0;Ee<ge.length;Ee++)ge[Ee](ue);E(de,ue,se.sync)}else Se(se)&&(se.prefinished=!0,de.emit("prefinish"),se.pendingcb++,C.nextTick(ye,de,se))}se.sync=!0,se.pendingcb++;try{de._final(ce)}catch(ue){ce(ue)}se.sync=!1}(de,se)))}(de,se),0===se.pendingcb&&(re?(se.pendingcb++,C.nextTick((ce,ue)=>{Se(ue)?ye(ce,ue):ue.pendingcb--},de,se)):Se(se)&&(se.pendingcb++,ye(de,se))))}function ye(de,se){se.pendingcb--,se.finished=!0;const re=se[f].splice(0);for(let ce=0;ce<re.length;ce++)re[ce]();if(de.emit("finish"),se.autoDestroy){const ce=de._readableState;(!ce||ce.autoDestroy&&(ce.endEmitted||!1===ce.readable))&&de.destroy()}}l.prototype.getBuffer=function(){return H(this.buffered,this.bufferedIndex)},v(l.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),v(g,$,{__proto__:null,value:function(de){return!!G(this,de)||this===g&&de&&de._writableState instanceof l}}),g.prototype.pipe=function(){E(this,new Q)},g.prototype.write=function(de,se,re){return!0===x(this,de,se,re)},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){const de=this._writableState;de.corked&&(de.corked--,de.writing||le(this,de))},g.prototype.setDefaultEncoding=function(se){if("string"==typeof se&&(se=T(se)),!k.isEncoding(se))throw new Ie(se);return this._writableState.defaultEncoding=se,this},g.prototype._write=function(de,se,re){if(!this._writev)throw new J("_write()");this._writev([{chunk:de,encoding:se}],re)},g.prototype._writev=null,g.prototype.end=function(de,se,re){const ce=this._writableState;let ue;if("function"==typeof de?(re=de,de=null,se=null):"function"==typeof se&&(re=se,se=null),null!=de){const ge=x(this,de,se);ge instanceof N&&(ue=ge)}return ce.corked&&(ce.corked=1,this.uncork()),ue||(ce.errored||ce.ending?ce.finished?ue=new ne("end"):ce.destroyed&&(ue=new oe("end")):(ce.ending=!0,Re(this,ce,!0),ce.ended=!0)),"function"==typeof re&&(ue||ce.finished?C.nextTick(re,ue):ce[f].push(re)),this},B(g.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(de){this._writableState&&(this._writableState.destroyed=de)}},writable:{__proto__:null,get(){const de=this._writableState;return!(!de||!1===de.writable||de.destroyed||de.errored||de.ending||de.ended)},set(de){this._writableState&&(this._writableState.writable=!!de)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const de=this._writableState;return!!de&&!de.destroyed&&!de.ending&&de.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const ke=j.destroy;let ve;function _e(){return void 0===ve&&(ve={}),ve}g.prototype.destroy=function(de,se){const re=this._writableState;return!re.destroyed&&(re.bufferedIndex<re.buffered.length||re[f].length)&&C.nextTick(Y,re),ke.call(this,de,se),this},g.prototype._undestroy=j.undestroy,g.prototype._destroy=function(de,se){se(de)},g.prototype[M.captureRejectionSymbol]=function(de){this.destroy(de)},g.fromWeb=function(de,se){return _e().newStreamWritableFromWritableStream(de,se)},g.toWeb=function(de){return _e().newWritableStreamFromStreamWritable(de)}},99852:(xe,O,I)=>{"use strict";const{ArrayIsArray:C,ArrayPrototypeIncludes:H,ArrayPrototypeJoin:N,ArrayPrototypeMap:G,NumberIsInteger:v,NumberIsNaN:B,NumberMAX_SAFE_INTEGER:_,NumberMIN_SAFE_INTEGER:T,NumberParseInt:D,ObjectPrototypeHasOwnProperty:$,RegExpPrototypeExec:M,String:F,StringPrototypeToUpperCase:k,StringPrototypeTrim:j}=I(56389),{hideStackFrames:Z,codes:{ERR_SOCKET_BAD_PORT:q,ERR_INVALID_ARG_TYPE:W,ERR_INVALID_ARG_VALUE:K,ERR_OUT_OF_RANGE:J,ERR_UNKNOWN_SIGNAL:X}}=I(68154),{normalizeEncoding:Q}=I(13509),{isAsyncFunction:oe,isArrayBufferView:ne}=I(13509).types,me={},E=/^[0-7]+$/,l=Z((Ee,Be,De=T,et=_)=>{if("number"!=typeof Ee)throw new W(Be,"number",Ee);if(!v(Ee))throw new J(Be,"an integer",Ee);if(Ee<De||Ee>et)throw new J(Be,`>= ${De} && <= ${et}`,Ee)}),h=Z((Ee,Be,De=-2147483648,et=2147483647)=>{if("number"!=typeof Ee)throw new W(Be,"number",Ee);if(!v(Ee))throw new J(Be,"an integer",Ee);if(Ee<De||Ee>et)throw new J(Be,`>= ${De} && <= ${et}`,Ee)}),g=Z((Ee,Be,De=!1)=>{if("number"!=typeof Ee)throw new W(Be,"number",Ee);if(!v(Ee))throw new J(Be,"an integer",Ee);const et=De?1:0,Ke=4294967295;if(Ee<et||Ee>Ke)throw new J(Be,`>= ${et} && <= ${Ke}`,Ee)});function x(Ee,Be){if("string"!=typeof Ee)throw new W(Be,"string",Ee)}const m=Z((Ee,Be,De)=>{if(!H(De,Ee)){const Ke="must be one of: "+N(G(De,We=>"string"==typeof We?`'${We}'`:F(We)),", ");throw new K(Be,Ee,Ke)}});function d(Ee,Be){if("boolean"!=typeof Ee)throw new W(Be,"boolean",Ee)}function p(Ee,Be,De){return null!=Ee&&$(Ee,Be)?Ee[Be]:De}const V=Z((Ee,Be,De=null)=>{const et=p(De,"allowArray",!1),Ke=p(De,"allowFunction",!1);if(!p(De,"nullable",!1)&&null===Ee||!et&&C(Ee)||"object"!=typeof Ee&&(!Ke||"function"!=typeof Ee))throw new W(Be,"Object",Ee)}),L=Z((Ee,Be)=>{if(null!=Ee&&"object"!=typeof Ee&&"function"!=typeof Ee)throw new W(Be,"a dictionary",Ee)}),Y=Z((Ee,Be,De=0)=>{if(!C(Ee))throw new W(Be,"Array",Ee);if(Ee.length<De)throw new K(Be,Ee,`must be longer than ${De}`)}),Re=Z((Ee,Be="buffer")=>{if(!ne(Ee))throw new W(Be,["Buffer","TypedArray","DataView"],Ee)}),ve=Z((Ee,Be)=>{if(void 0!==Ee&&(null===Ee||"object"!=typeof Ee||!("aborted"in Ee)))throw new W(Be,"AbortSignal",Ee)}),_e=Z((Ee,Be)=>{if("function"!=typeof Ee)throw new W(Be,"Function",Ee)}),de=Z((Ee,Be)=>{if("function"!=typeof Ee||oe(Ee))throw new W(Be,"Function",Ee)}),se=Z((Ee,Be)=>{if(void 0!==Ee)throw new W(Be,"undefined",Ee)}),ce=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ue(Ee,Be){if(typeof Ee>"u"||!M(ce,Ee))throw new K(Be,Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}xe.exports={isInt32:function pe(Ee){return Ee===(0|Ee)},isUint32:function Ie(Ee){return Ee===Ee>>>0},parseFileMode:function f(Ee,Be,De){if(typeof Ee>"u"&&(Ee=De),"string"==typeof Ee){if(null===M(E,Ee))throw new K(Be,Ee,"must be a 32-bit unsigned integer or an octal string");Ee=D(Ee,8)}return g(Ee,Be),Ee},validateArray:Y,validateStringArray:function le(Ee,Be){Y(Ee,Be);for(let De=0;De<Ee.length;De++)x(Ee[De],`${Be}[${De}]`)},validateBooleanArray:function Se(Ee,Be){Y(Ee,Be);for(let De=0;De<Ee.length;De++)d(Ee[De],`${Be}[${De}]`)},validateAbortSignalArray:function Oe(Ee,Be){Y(Ee,Be);for(let De=0;De<Ee.length;De++){const et=Ee[De],Ke=`${Be}[${De}]`;if(null==et)throw new W(Ke,"AbortSignal",et);ve(et,Ke)}},validateBoolean:d,validateBuffer:Re,validateDictionary:L,validateEncoding:function ye(Ee,Be){const De=Q(Be),et=Ee.length;if("hex"===De&&et%2!=0)throw new K("encoding",Be,`is invalid for data of length ${et}`)},validateFunction:_e,validateInt32:h,validateInteger:l,validateNumber:function P(Ee,Be,De=void 0,et){if("number"!=typeof Ee)throw new W(Be,"number",Ee);if(null!=De&&Ee<De||null!=et&&Ee>et||(null!=De||null!=et)&&B(Ee))throw new J(Be,`${null!=De?`>= ${De}`:""}${null!=De&&null!=et?" && ":""}${null!=et?`<= ${et}`:""}`,Ee)},validateObject:V,validateOneOf:m,validatePlainFunction:de,validatePort:function ke(Ee,Be="Port",De=!0){if("number"!=typeof Ee&&"string"!=typeof Ee||"string"==typeof Ee&&0===j(Ee).length||+Ee!=+Ee>>>0||Ee>65535||0===Ee&&!De)throw new q(Be,Ee,De);return 0|Ee},validateSignalName:function Ve(Ee,Be="signal"){if(x(Ee,Be),void 0===me[Ee])throw void 0!==me[k(Ee)]?new X(Ee+" (signals must use all capital letters)"):new X(Ee)},validateString:x,validateUint32:g,validateUndefined:se,validateUnion:function re(Ee,Be,De){if(!H(De,Ee))throw new W(Be,`('${N(De,"|")}')`,Ee)},validateAbortSignal:ve,validateLinkHeaderValue:function ge(Ee){if("string"==typeof Ee)return ue(Ee,"hints"),Ee;if(C(Ee)){const Be=Ee.length;let De="";if(0===Be)return De;for(let et=0;et<Be;et++){const Ke=Ee[et];ue(Ke,"hints"),De+=Ke,et!==Be-1&&(De+=", ")}return De}throw new K("hints",Ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},65797:(xe,O,I)=>{"use strict";const C=I(33885),H=I(74870),N=C.Readable.destroy;xe.exports=C.Readable,xe.exports._uint8ArrayToBuffer=C._uint8ArrayToBuffer,xe.exports._isUint8Array=C._isUint8Array,xe.exports.isDisturbed=C.isDisturbed,xe.exports.isErrored=C.isErrored,xe.exports.isReadable=C.isReadable,xe.exports.Readable=C.Readable,xe.exports.Writable=C.Writable,xe.exports.Duplex=C.Duplex,xe.exports.Transform=C.Transform,xe.exports.PassThrough=C.PassThrough,xe.exports.addAbortSignal=C.addAbortSignal,xe.exports.finished=C.finished,xe.exports.destroy=C.destroy,xe.exports.destroy=N,xe.exports.pipeline=C.pipeline,xe.exports.compose=C.compose,Object.defineProperty(C,"promises",{configurable:!0,enumerable:!0,get:()=>H}),xe.exports.Stream=C.Stream,xe.exports.default=xe.exports},68154:(xe,O,I)=>{"use strict";const{format:C,inspect:H,AggregateError:N}=I(13509),G=globalThis.AggregateError||N,v=Symbol("kIsNodeError"),B=["string","function","number","object","Function","Object","boolean","bigint","symbol"],_=/^([A-Z][a-z0-9]*)+$/,D={};function $(W,K){if(!W)throw new D.ERR_INTERNAL_ASSERTION(K)}function M(W){let K="",J=W.length;const X="-"===W[0]?1:0;for(;J>=X+4;J-=3)K=`_${W.slice(J-3,J)}${K}`;return`${W.slice(0,J)}${K}`}function k(W,K,J){J||(J=Error);class X extends J{constructor(...oe){super(function F(W,K,J){if("function"==typeof K)return $(K.length<=J.length,`Code: ${W}; The provided arguments length (${J.length}) does not match the required ones (${K.length}).`),K(...J);const X=(K.match(/%[dfijoOs]/g)||[]).length;return $(X===J.length,`Code: ${W}; The provided arguments length (${J.length}) does not match the required ones (${X}).`),0===J.length?K:C(K,...J)}(W,K,oe))}toString(){return`${this.name} [${W}]: ${this.message}`}}Object.defineProperties(X.prototype,{name:{value:J.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${W}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),X.prototype.code=W,X.prototype[v]=!0,D[W]=X}function j(W){return Object.defineProperty(W,"name",{value:"__node_internal_"+W.name}),W}class q extends Error{constructor(K="The operation was aborted",J=void 0){if(void 0!==J&&"object"!=typeof J)throw new D.ERR_INVALID_ARG_TYPE("options","Object",J);super(K,J),this.code="ABORT_ERR",this.name="AbortError"}}k("ERR_ASSERTION","%s",Error),k("ERR_INVALID_ARG_TYPE",(W,K,J)=>{$("string"==typeof W,"'name' must be a string"),Array.isArray(K)||(K=[K]);let X="The ";W.endsWith(" argument")?X+=`${W} `:X+=`"${W}" ${W.includes(".")?"property":"argument"} `,X+="must be ";const Q=[],oe=[],ne=[];for(const pe of K)$("string"==typeof pe,"All expected entries have to be of type string"),B.includes(pe)?Q.push(pe.toLowerCase()):_.test(pe)?oe.push(pe):($("object"!==pe,'The value "object" should be written as "Object"'),ne.push(pe));if(oe.length>0){const pe=Q.indexOf("object");-1!==pe&&(Q.splice(Q,pe,1),oe.push("Object"))}if(Q.length>0){switch(Q.length){case 1:X+=`of type ${Q[0]}`;break;case 2:X+=`one of type ${Q[0]} or ${Q[1]}`;break;default:{const pe=Q.pop();X+=`one of type ${Q.join(", ")}, or ${pe}`}}(oe.length>0||ne.length>0)&&(X+=" or ")}if(oe.length>0){switch(oe.length){case 1:X+=`an instance of ${oe[0]}`;break;case 2:X+=`an instance of ${oe[0]} or ${oe[1]}`;break;default:{const pe=oe.pop();X+=`an instance of ${oe.join(", ")}, or ${pe}`}}ne.length>0&&(X+=" or ")}switch(ne.length){case 0:break;case 1:ne[0].toLowerCase()!==ne[0]&&(X+="an "),X+=`${ne[0]}`;break;case 2:X+=`one of ${ne[0]} or ${ne[1]}`;break;default:{const pe=ne.pop();X+=`one of ${ne.join(", ")}, or ${pe}`}}if(null==J)X+=`. Received ${J}`;else if("function"==typeof J&&J.name)X+=`. Received function ${J.name}`;else if("object"==typeof J){var me;null!==(me=J.constructor)&&void 0!==me&&me.name?X+=`. Received an instance of ${J.constructor.name}`:X+=`. Received ${H(J,{depth:-1})}`}else{let pe=H(J,{colors:!1});pe.length>25&&(pe=`${pe.slice(0,25)}...`),X+=`. Received type ${typeof J} (${pe})`}return X},TypeError),k("ERR_INVALID_ARG_VALUE",(W,K,J="is invalid")=>{let X=H(K);return X.length>128&&(X=X.slice(0,128)+"..."),`The ${W.includes(".")?"property":"argument"} '${W}' ${J}. Received ${X}`},TypeError),k("ERR_INVALID_RETURN_VALUE",(W,K,J)=>{var X;return`Expected ${W} to be returned from the "${K}" function but got ${null!=J&&null!==(X=J.constructor)&&void 0!==X&&X.name?`instance of ${J.constructor.name}`:"type "+typeof J}.`},TypeError),k("ERR_MISSING_ARGS",(...W)=>{let K;$(W.length>0,"At least one arg needs to be specified");const J=W.length;switch(W=(Array.isArray(W)?W:[W]).map(X=>`"${X}"`).join(" or "),J){case 1:K+=`The ${W[0]} argument`;break;case 2:K+=`The ${W[0]} and ${W[1]} arguments`;break;default:{const X=W.pop();K+=`The ${W.join(", ")}, and ${X} arguments`}}return`${K} must be specified`},TypeError),k("ERR_OUT_OF_RANGE",(W,K,J)=>{let X;return $(K,'Missing "range" argument'),Number.isInteger(J)&&Math.abs(J)>2**32?X=M(String(J)):"bigint"==typeof J?(X=String(J),(J>2n**32n||J<-(2n**32n))&&(X=M(X)),X+="n"):X=H(J),`The value of "${W}" is out of range. It must be ${K}. Received ${X}`},RangeError),k("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),k("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),k("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),k("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),k("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),k("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),k("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),k("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),k("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),k("ERR_STREAM_WRITE_AFTER_END","write after end",Error),k("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),xe.exports={AbortError:q,aggregateTwoErrors:j(function Z(W,K){if(W&&K&&W!==K){if(Array.isArray(K.errors))return K.errors.push(W),K;const J=new G([K,W],K.message);return J.code=K.code,J}return W||K}),hideStackFrames:j,codes:D}},56389:xe=>{"use strict";xe.exports={ArrayIsArray:O=>Array.isArray(O),ArrayPrototypeIncludes:(O,I)=>O.includes(I),ArrayPrototypeIndexOf:(O,I)=>O.indexOf(I),ArrayPrototypeJoin:(O,I)=>O.join(I),ArrayPrototypeMap:(O,I)=>O.map(I),ArrayPrototypePop:(O,I)=>O.pop(I),ArrayPrototypePush:(O,I)=>O.push(I),ArrayPrototypeSlice:(O,I,C)=>O.slice(I,C),Error,FunctionPrototypeCall:(O,I,...C)=>O.call(I,...C),FunctionPrototypeSymbolHasInstance:(O,I)=>Function.prototype[Symbol.hasInstance].call(O,I),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(O,I)=>Object.defineProperties(O,I),ObjectDefineProperty:(O,I,C)=>Object.defineProperty(O,I,C),ObjectGetOwnPropertyDescriptor:(O,I)=>Object.getOwnPropertyDescriptor(O,I),ObjectKeys:O=>Object.keys(O),ObjectSetPrototypeOf:(O,I)=>Object.setPrototypeOf(O,I),Promise,PromisePrototypeCatch:(O,I)=>O.catch(I),PromisePrototypeThen:(O,I,C)=>O.then(I,C),PromiseReject:O=>Promise.reject(O),PromiseResolve:O=>Promise.resolve(O),ReflectApply:Reflect.apply,RegExpPrototypeTest:(O,I)=>O.test(I),SafeSet:Set,String,StringPrototypeSlice:(O,I,C)=>O.slice(I,C),StringPrototypeToLowerCase:O=>O.toLowerCase(),StringPrototypeToUpperCase:O=>O.toUpperCase(),StringPrototypeTrim:O=>O.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(O,I,C)=>O.set(I,C),Boolean,Uint8Array}},13509:(xe,O,I)=>{"use strict";var C=I(29293).default;const H=I(68316),{kResistStopPropagation:N,SymbolDispose:G}=I(56389),v=globalThis.AbortSignal||I(9465).AbortSignal,B=globalThis.AbortController||I(9465).AbortController,_=Object.getPrototypeOf(C(function*(){})).constructor,T=globalThis.Blob||H.Blob,D=typeof T<"u"?function(j){return j instanceof T}:function(j){return!1},$=(k,j)=>{if(void 0!==k&&(null===k||"object"!=typeof k||!("aborted"in k)))throw new ERR_INVALID_ARG_TYPE(j,"AbortSignal",k)};class F extends Error{constructor(j){if(!Array.isArray(j))throw new TypeError("Expected input to be an Array, got "+typeof j);let Z="";for(let q=0;q<j.length;q++)Z+=`    ${j[q].stack}\n`;super(Z),this.name="AggregateError",this.errors=j}}xe.exports={AggregateError:F,kEmptyObject:Object.freeze({}),once(k){let j=!1;return function(...Z){j||(j=!0,k.apply(this,Z))}},createDeferredPromise:function(){let k,j;return{promise:new Promise((q,W)=>{k=q,j=W}),resolve:k,reject:j}},promisify:k=>new Promise((j,Z)=>{k((q,...W)=>q?Z(q):j(...W))}),debuglog:()=>function(){},format:(k,...j)=>k.replace(/%([sdifj])/g,function(...[Z,q]){const W=j.shift();return"f"===q?W.toFixed(6):"j"===q?JSON.stringify(W):"s"===q&&"object"==typeof W?`${W.constructor!==Object?W.constructor.name:""} {}`.trim():W.toString()}),inspect(k){switch(typeof k){case"string":if(k.includes("'")){if(!k.includes('"'))return`"${k}"`;if(!k.includes("`")&&!k.includes("${"))return`\`${k}\``}return`'${k}'`;case"number":return isNaN(k)?"NaN":Object.is(k,-0)?String(k):k;case"bigint":return`${String(k)}n`;case"boolean":case"undefined":return String(k);case"object":return"{}"}},types:{isAsyncFunction:k=>k instanceof _,isArrayBufferView:k=>ArrayBuffer.isView(k)},isBlob:D,deprecate:(k,j)=>k,addAbortListener:I(44356).addAbortListener||function(j,Z){if(void 0===j)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",j);let q;return $(j,"signal"),((k,j)=>{if("function"!=typeof k)throw new ERR_INVALID_ARG_TYPE("listener","Function",k)})(Z),j.aborted?queueMicrotask(()=>Z()):(j.addEventListener("abort",Z,{__proto__:null,once:!0,[N]:!0}),q=()=>{j.removeEventListener("abort",Z)}),{__proto__:null,[G](){var W;null===(W=q)||void 0===W||W()}}},AbortSignalAny:v.any||function(j){if(1===j.length)return j[0];const Z=new B,q=()=>Z.abort();return j.forEach(W=>{$(W,"signals"),W.addEventListener("abort",q,{once:!0})}),Z.signal.addEventListener("abort",()=>{j.forEach(W=>W.removeEventListener("abort",q))},{once:!0}),Z.signal}},xe.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},33885:(xe,O,I)=>{const{Buffer:C}=I(68316),{ObjectDefineProperty:H,ObjectKeys:N,ReflectApply:G}=I(56389),{promisify:{custom:v}}=I(13509),{streamReturningOperators:B,promiseReturningOperators:_}=I(21840),{codes:{ERR_ILLEGAL_CONSTRUCTOR:T}}=I(68154),D=I(373),{setDefaultHighWaterMark:$,getDefaultHighWaterMark:M}=I(18212),{pipeline:F}=I(67843),{destroyer:k}=I(96507),j=I(46017),q=I(74870),W=I(32924),K=xe.exports=I(91242).Stream;K.isDestroyed=W.isDestroyed,K.isDisturbed=W.isDisturbed,K.isErrored=W.isErrored,K.isReadable=W.isReadable,K.isWritable=W.isWritable,K.Readable=I(84553);for(const Q of N(B)){let ne=function(...me){if(new.target)throw T();return K.Readable.from(G(oe,this,me))};const oe=B[Q];H(ne,"name",{__proto__:null,value:oe.name}),H(ne,"length",{__proto__:null,value:oe.length}),H(K.Readable.prototype,Q,{__proto__:null,value:ne,enumerable:!1,configurable:!0,writable:!0})}for(const Q of N(_)){let ne=function(...pe){if(new.target)throw T();return G(oe,this,pe)};const oe=_[Q];H(ne,"name",{__proto__:null,value:oe.name}),H(ne,"length",{__proto__:null,value:oe.length}),H(K.Readable.prototype,Q,{__proto__:null,value:ne,enumerable:!1,configurable:!0,writable:!0})}K.Writable=I(30009),K.Duplex=I(13323),K.Transform=I(71981),K.PassThrough=I(59447),K.pipeline=F;const{addAbortSignal:J}=I(57062);K.addAbortSignal=J,K.finished=j,K.destroy=k,K.compose=D,K.setDefaultHighWaterMark=$,K.getDefaultHighWaterMark=M,H(K,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>q}),H(F,v,{__proto__:null,enumerable:!0,get:()=>q.pipeline}),H(j,v,{__proto__:null,enumerable:!0,get:()=>q.finished}),K.Stream=K,K._isUint8Array=function(oe){return oe instanceof Uint8Array},K._uint8ArrayToBuffer=function(oe){return C.from(oe.buffer,oe.byteOffset,oe.byteLength)}},74870:(xe,O,I)=>{"use strict";const{ArrayPrototypePop:C,Promise:H}=I(56389),{isIterable:N,isNodeStream:G,isWebStream:v}=I(32924),{pipelineImpl:B}=I(67843),{finished:_}=I(46017);I(33885),xe.exports={finished:_,pipeline:function T(...D){return new H(($,M)=>{let F,k;const j=D[D.length-1];if(j&&"object"==typeof j&&!G(j)&&!N(j)&&!v(j)){const Z=C(D);F=Z.signal,k=Z.end}B(D,(Z,q)=>{Z?M(Z):$(q)},{signal:F,end:k})})}}},81447:xe=>{var O=1e3,I=60*O,C=60*I,H=24*C,N=7*H;function T(D,$,M,F){var k=$>=1.5*M;return Math.round(D/M)+" "+F+(k?"s":"")}xe.exports=function(D,$){$=$||{};var M=typeof D;if("string"===M&&D.length>0)return function v(D){if(!((D=String(D)).length>100)){var $=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(D);if($){var M=parseFloat($[1]);switch(($[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*M;case"weeks":case"week":case"w":return M*N;case"days":case"day":case"d":return M*H;case"hours":case"hour":case"hrs":case"hr":case"h":return M*C;case"minutes":case"minute":case"mins":case"min":case"m":return M*I;case"seconds":case"second":case"secs":case"sec":case"s":return M*O;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return M;default:return}}}}(D);if("number"===M&&isFinite(D))return $.long?function _(D){var $=Math.abs(D);return $>=H?T(D,$,H,"day"):$>=C?T(D,$,C,"hour"):$>=I?T(D,$,I,"minute"):$>=O?T(D,$,O,"second"):D+" ms"}(D):function B(D){var $=Math.abs(D);return $>=H?Math.round(D/H)+"d":$>=C?Math.round(D/C)+"h":$>=I?Math.round(D/I)+"m":$>=O?Math.round(D/O)+"s":D+"ms"}(D);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(D))}},89565:(xe,O,I)=>{"use strict";const C=I(13981),H=I(22020),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=_,O.SlowBuffer=function K(U){return+U!=U&&(U=0),_.alloc(+U)},O.INSPECT_MAX_BYTES=50;const G=2147483647;function B(U){if(U>G)throw new RangeError('The value "'+U+'" is invalid for option "size"');const w=new Uint8Array(U);return Object.setPrototypeOf(w,_.prototype),w}function _(U,w,b){if("number"==typeof U){if("string"==typeof w)throw new TypeError('The "string" argument must be of type string. Received type number');return M(U)}return T(U,w,b)}function T(U,w,b){if("string"==typeof U)return function F(U,w){if(("string"!=typeof w||""===w)&&(w="utf8"),!_.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const b=0|J(U,w);let z=B(b);const ie=z.write(U,w);return ie!==b&&(z=z.slice(0,ie)),z}(U,w);if(ArrayBuffer.isView(U))return function j(U){if(De(U,Uint8Array)){const w=new Uint8Array(U);return Z(w.buffer,w.byteOffset,w.byteLength)}return k(U)}(U);if(null==U)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(De(U,ArrayBuffer)||U&&De(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(U,SharedArrayBuffer)||U&&De(U.buffer,SharedArrayBuffer)))return Z(U,w,b);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');const z=U.valueOf&&U.valueOf();if(null!=z&&z!==U)return _.from(z,w,b);const ie=function q(U){if(_.isBuffer(U)){const w=0|W(U.length),b=B(w);return 0===b.length||U.copy(b,0,0,w),b}return void 0!==U.length?"number"!=typeof U.length||et(U.length)?B(0):k(U):"Buffer"===U.type&&Array.isArray(U.data)?k(U.data):void 0}(U);if(ie)return ie;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return _.from(U[Symbol.toPrimitive]("string"),w,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function D(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function M(U){return D(U),B(U<0?0:0|W(U))}function k(U){const w=U.length<0?0:0|W(U.length),b=B(w);for(let z=0;z<w;z+=1)b[z]=255&U[z];return b}function Z(U,w,b){if(w<0||U.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<w+(b||0))throw new RangeError('"length" is outside of buffer bounds');let z;return z=void 0===w&&void 0===b?new Uint8Array(U):void 0===b?new Uint8Array(U,w):new Uint8Array(U,w,b),Object.setPrototypeOf(z,_.prototype),z}function W(U){if(U>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|U}function J(U,w){if(_.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||De(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const b=U.length,z=arguments.length>2&&!0===arguments[2];if(!z&&0===b)return 0;let ie=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return ce(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return Ee(U).length;default:if(ie)return z?-1:ce(U).length;w=(""+w).toLowerCase(),ie=!0}}function X(U,w,b){let z=!1;if((void 0===w||w<0)&&(w=0),w>this.length||((void 0===b||b>this.length)&&(b=this.length),b<=0)||(b>>>=0)<=(w>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return m(this,w,b);case"utf8":case"utf-8":return l(this,w,b);case"ascii":return x(this,w,b);case"latin1":case"binary":return P(this,w,b);case"base64":return f(this,w,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,w,b);default:if(z)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),z=!0}}function Q(U,w,b){const z=U[w];U[w]=U[b],U[b]=z}function oe(U,w,b,z,ie){if(0===U.length)return-1;if("string"==typeof b?(z=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),et(b=+b)&&(b=ie?0:U.length-1),b<0&&(b=U.length+b),b>=U.length){if(ie)return-1;b=U.length-1}else if(b<0){if(!ie)return-1;b=0}if("string"==typeof w&&(w=_.from(w,z)),_.isBuffer(w))return 0===w.length?-1:ne(U,w,b,z,ie);if("number"==typeof w)return w&=255,"function"==typeof Uint8Array.prototype.indexOf?ie?Uint8Array.prototype.indexOf.call(U,w,b):Uint8Array.prototype.lastIndexOf.call(U,w,b):ne(U,[w],b,z,ie);throw new TypeError("val must be string, number or Buffer")}function ne(U,w,b,z,ie){let nt,be=1,Me=U.length,qe=w.length;if(void 0!==z&&("ucs2"===(z=String(z).toLowerCase())||"ucs-2"===z||"utf16le"===z||"utf-16le"===z)){if(U.length<2||w.length<2)return-1;be=2,Me/=2,qe/=2,b/=2}function At(rt,St){return 1===be?rt[St]:rt.readUInt16BE(St*be)}if(ie){let rt=-1;for(nt=b;nt<Me;nt++)if(At(U,nt)===At(w,-1===rt?0:nt-rt)){if(-1===rt&&(rt=nt),nt-rt+1===qe)return rt*be}else-1!==rt&&(nt-=nt-rt),rt=-1}else for(b+qe>Me&&(b=Me-qe),nt=b;nt>=0;nt--){let rt=!0;for(let St=0;St<qe;St++)if(At(U,nt+St)!==At(w,St)){rt=!1;break}if(rt)return nt}return-1}function me(U,w,b,z){b=Number(b)||0;const ie=U.length-b;z?(z=Number(z))>ie&&(z=ie):z=ie;const be=w.length;let Me;for(z>be/2&&(z=be/2),Me=0;Me<z;++Me){const qe=parseInt(w.substr(2*Me,2),16);if(et(qe))return Me;U[b+Me]=qe}return Me}function pe(U,w,b,z){return Be(ce(w,U.length-b),U,b,z)}function Ie(U,w,b,z){return Be(function ue(U){const w=[];for(let b=0;b<U.length;++b)w.push(255&U.charCodeAt(b));return w}(w),U,b,z)}function E(U,w,b,z){return Be(Ee(w),U,b,z)}function a(U,w,b,z){return Be(function ge(U,w){let b,z,ie;const be=[];for(let Me=0;Me<U.length&&!((w-=2)<0);++Me)b=U.charCodeAt(Me),z=b>>8,ie=b%256,be.push(ie),be.push(z);return be}(w,U.length-b),U,b,z)}function f(U,w,b){return C.fromByteArray(0===w&&b===U.length?U:U.slice(w,b))}function l(U,w,b){b=Math.min(U.length,b);const z=[];let ie=w;for(;ie<b;){const be=U[ie];let Me=null,qe=be>239?4:be>223?3:be>191?2:1;if(ie+qe<=b){let At,nt,rt,St;switch(qe){case 1:be<128&&(Me=be);break;case 2:At=U[ie+1],128==(192&At)&&(St=(31&be)<<6|63&At,St>127&&(Me=St));break;case 3:At=U[ie+1],nt=U[ie+2],128==(192&At)&&128==(192&nt)&&(St=(15&be)<<12|(63&At)<<6|63&nt,St>2047&&(St<55296||St>57343)&&(Me=St));break;case 4:At=U[ie+1],nt=U[ie+2],rt=U[ie+3],128==(192&At)&&128==(192&nt)&&128==(192&rt)&&(St=(15&be)<<18|(63&At)<<12|(63&nt)<<6|63&rt,St>65535&&St<1114112&&(Me=St))}}null===Me?(Me=65533,qe=1):Me>65535&&(Me-=65536,z.push(Me>>>10&1023|55296),Me=56320|1023&Me),z.push(Me),ie+=qe}return function g(U){const w=U.length;if(w<=h)return String.fromCharCode.apply(String,U);let b="",z=0;for(;z<w;)b+=String.fromCharCode.apply(String,U.slice(z,z+=h));return b}(z)}O.kMaxLength=G,!(_.TYPED_ARRAY_SUPPORT=function v(){try{const U=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(U,w),42===U.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),_.poolSize=8192,_.from=function(U,w,b){return T(U,w,b)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array),_.alloc=function(U,w,b){return function $(U,w,b){return D(U),U<=0?B(U):void 0!==w?"string"==typeof b?B(U).fill(w,b):B(U).fill(w):B(U)}(U,w,b)},_.allocUnsafe=function(U){return M(U)},_.allocUnsafeSlow=function(U){return M(U)},_.isBuffer=function(w){return null!=w&&!0===w._isBuffer&&w!==_.prototype},_.compare=function(w,b){if(De(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),De(b,Uint8Array)&&(b=_.from(b,b.offset,b.byteLength)),!_.isBuffer(w)||!_.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===b)return 0;let z=w.length,ie=b.length;for(let be=0,Me=Math.min(z,ie);be<Me;++be)if(w[be]!==b[be]){z=w[be],ie=b[be];break}return z<ie?-1:ie<z?1:0},_.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(w,b){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(0===w.length)return _.alloc(0);let z;if(void 0===b)for(b=0,z=0;z<w.length;++z)b+=w[z].length;const ie=_.allocUnsafe(b);let be=0;for(z=0;z<w.length;++z){let Me=w[z];if(De(Me,Uint8Array))be+Me.length>ie.length?(_.isBuffer(Me)||(Me=_.from(Me)),Me.copy(ie,be)):Uint8Array.prototype.set.call(ie,Me,be);else{if(!_.isBuffer(Me))throw new TypeError('"list" argument must be an Array of Buffers');Me.copy(ie,be)}be+=Me.length}return ie},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){const w=this.length;if(w%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<w;b+=2)Q(this,b,b+1);return this},_.prototype.swap32=function(){const w=this.length;if(w%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<w;b+=4)Q(this,b,b+3),Q(this,b+1,b+2);return this},_.prototype.swap64=function(){const w=this.length;if(w%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<w;b+=8)Q(this,b,b+7),Q(this,b+1,b+6),Q(this,b+2,b+5),Q(this,b+3,b+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){const w=this.length;return 0===w?"":0===arguments.length?l(this,0,w):X.apply(this,arguments)},_.prototype.equals=function(w){if(!_.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w||0===_.compare(this,w)},_.prototype.inspect=function(){let w="";const b=O.INSPECT_MAX_BYTES;return w=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(w+=" ... "),"<Buffer "+w+">"},N&&(_.prototype[N]=_.prototype.inspect),_.prototype.compare=function(w,b,z,ie,be){if(De(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),!_.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(void 0===b&&(b=0),void 0===z&&(z=w?w.length:0),void 0===ie&&(ie=0),void 0===be&&(be=this.length),b<0||z>w.length||ie<0||be>this.length)throw new RangeError("out of range index");if(ie>=be&&b>=z)return 0;if(ie>=be)return-1;if(b>=z)return 1;if(this===w)return 0;let Me=(be>>>=0)-(ie>>>=0),qe=(z>>>=0)-(b>>>=0);const At=Math.min(Me,qe),nt=this.slice(ie,be),rt=w.slice(b,z);for(let St=0;St<At;++St)if(nt[St]!==rt[St]){Me=nt[St],qe=rt[St];break}return Me<qe?-1:qe<Me?1:0},_.prototype.includes=function(w,b,z){return-1!==this.indexOf(w,b,z)},_.prototype.indexOf=function(w,b,z){return oe(this,w,b,z,!0)},_.prototype.lastIndexOf=function(w,b,z){return oe(this,w,b,z,!1)},_.prototype.write=function(w,b,z,ie){if(void 0===b)ie="utf8",z=this.length,b=0;else if(void 0===z&&"string"==typeof b)ie=b,z=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(z)?(z>>>=0,void 0===ie&&(ie="utf8")):(ie=z,z=void 0)}const be=this.length-b;if((void 0===z||z>be)&&(z=be),w.length>0&&(z<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let Me=!1;for(;;)switch(ie){case"hex":return me(this,w,b,z);case"utf8":case"utf-8":return pe(this,w,b,z);case"ascii":case"latin1":case"binary":return Ie(this,w,b,z);case"base64":return E(this,w,b,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a(this,w,b,z);default:if(Me)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),Me=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const h=4096;function x(U,w,b){let z="";b=Math.min(U.length,b);for(let ie=w;ie<b;++ie)z+=String.fromCharCode(127&U[ie]);return z}function P(U,w,b){let z="";b=Math.min(U.length,b);for(let ie=w;ie<b;++ie)z+=String.fromCharCode(U[ie]);return z}function m(U,w,b){const z=U.length;(!w||w<0)&&(w=0),(!b||b<0||b>z)&&(b=z);let ie="";for(let be=w;be<b;++be)ie+=Ke[U[be]];return ie}function d(U,w,b){const z=U.slice(w,b);let ie="";for(let be=0;be<z.length-1;be+=2)ie+=String.fromCharCode(z[be]+256*z[be+1]);return ie}function p(U,w,b){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+w>b)throw new RangeError("Trying to access beyond buffer length")}function V(U,w,b,z,ie,be){if(!_.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>ie||w<be)throw new RangeError('"value" argument is out of bounds');if(b+z>U.length)throw new RangeError("Index out of range")}function L(U,w,b,z,ie){ve(w,z,ie,U,b,7);let be=Number(w&BigInt(4294967295));U[b++]=be,be>>=8,U[b++]=be,be>>=8,U[b++]=be,be>>=8,U[b++]=be;let Me=Number(w>>BigInt(32)&BigInt(4294967295));return U[b++]=Me,Me>>=8,U[b++]=Me,Me>>=8,U[b++]=Me,Me>>=8,U[b++]=Me,b}function Y(U,w,b,z,ie){ve(w,z,ie,U,b,7);let be=Number(w&BigInt(4294967295));U[b+7]=be,be>>=8,U[b+6]=be,be>>=8,U[b+5]=be,be>>=8,U[b+4]=be;let Me=Number(w>>BigInt(32)&BigInt(4294967295));return U[b+3]=Me,Me>>=8,U[b+2]=Me,Me>>=8,U[b+1]=Me,Me>>=8,U[b]=Me,b+8}function le(U,w,b,z,ie,be){if(b+z>U.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Se(U,w,b,z,ie){return w=+w,b>>>=0,ie||le(U,0,b,4),H.write(U,w,b,z,23,4),b+4}function Oe(U,w,b,z,ie){return w=+w,b>>>=0,ie||le(U,0,b,8),H.write(U,w,b,z,52,8),b+8}_.prototype.slice=function(w,b){const z=this.length;(w=~~w)<0?(w+=z)<0&&(w=0):w>z&&(w=z),(b=void 0===b?z:~~b)<0?(b+=z)<0&&(b=0):b>z&&(b=z),b<w&&(b=w);const ie=this.subarray(w,b);return Object.setPrototypeOf(ie,_.prototype),ie},_.prototype.readUintLE=_.prototype.readUIntLE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w],be=1,Me=0;for(;++Me<b&&(be*=256);)ie+=this[w+Me]*be;return ie},_.prototype.readUintBE=_.prototype.readUIntBE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w+--b],be=1;for(;b>0&&(be*=256);)ie+=this[w+--b]*be;return ie},_.prototype.readUint8=_.prototype.readUInt8=function(w,b){return w>>>=0,b||p(w,1,this.length),this[w]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(w,b){return w>>>=0,b||p(w,2,this.length),this[w]|this[w+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(w,b){return w>>>=0,b||p(w,2,this.length),this[w]<<8|this[w+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(w,b){return w>>>=0,b||p(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+16777216*this[w+3]},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(w,b){return w>>>=0,b||p(w,4,this.length),16777216*this[w]+(this[w+1]<<16|this[w+2]<<8|this[w+3])},_.prototype.readBigUInt64LE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=b+256*this[++w]+65536*this[++w]+this[++w]*2**24,be=this[++w]+256*this[++w]+65536*this[++w]+z*2**24;return BigInt(ie)+(BigInt(be)<<BigInt(32))}),_.prototype.readBigUInt64BE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=b*2**24+65536*this[++w]+256*this[++w]+this[++w],be=this[++w]*2**24+65536*this[++w]+256*this[++w]+z;return(BigInt(ie)<<BigInt(32))+BigInt(be)}),_.prototype.readIntLE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w],be=1,Me=0;for(;++Me<b&&(be*=256);)ie+=this[w+Me]*be;return be*=128,ie>=be&&(ie-=Math.pow(2,8*b)),ie},_.prototype.readIntBE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=b,be=1,Me=this[w+--ie];for(;ie>0&&(be*=256);)Me+=this[w+--ie]*be;return be*=128,Me>=be&&(Me-=Math.pow(2,8*b)),Me},_.prototype.readInt8=function(w,b){return w>>>=0,b||p(w,1,this.length),128&this[w]?-1*(255-this[w]+1):this[w]},_.prototype.readInt16LE=function(w,b){w>>>=0,b||p(w,2,this.length);const z=this[w]|this[w+1]<<8;return 32768&z?4294901760|z:z},_.prototype.readInt16BE=function(w,b){w>>>=0,b||p(w,2,this.length);const z=this[w+1]|this[w]<<8;return 32768&z?4294901760|z:z},_.prototype.readInt32LE=function(w,b){return w>>>=0,b||p(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},_.prototype.readInt32BE=function(w,b){return w>>>=0,b||p(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},_.prototype.readBigInt64LE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];return(void 0===b||void 0===z)&&de(w,this.length-8),(BigInt(this[w+4]+256*this[w+5]+65536*this[w+6]+(z<<24))<<BigInt(32))+BigInt(b+256*this[++w]+65536*this[++w]+this[++w]*2**24)}),_.prototype.readBigInt64BE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=(b<<24)+65536*this[++w]+256*this[++w]+this[++w];return(BigInt(ie)<<BigInt(32))+BigInt(this[++w]*2**24+65536*this[++w]+256*this[++w]+z)}),_.prototype.readFloatLE=function(w,b){return w>>>=0,b||p(w,4,this.length),H.read(this,w,!0,23,4)},_.prototype.readFloatBE=function(w,b){return w>>>=0,b||p(w,4,this.length),H.read(this,w,!1,23,4)},_.prototype.readDoubleLE=function(w,b){return w>>>=0,b||p(w,8,this.length),H.read(this,w,!0,52,8)},_.prototype.readDoubleBE=function(w,b){return w>>>=0,b||p(w,8,this.length),H.read(this,w,!1,52,8)},_.prototype.writeUintLE=_.prototype.writeUIntLE=function(w,b,z,ie){w=+w,b>>>=0,z>>>=0,ie||V(this,w,b,z,Math.pow(2,8*z)-1,0);let be=1,Me=0;for(this[b]=255&w;++Me<z&&(be*=256);)this[b+Me]=w/be&255;return b+z},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(w,b,z,ie){w=+w,b>>>=0,z>>>=0,ie||V(this,w,b,z,Math.pow(2,8*z)-1,0);let be=z-1,Me=1;for(this[b+be]=255&w;--be>=0&&(Me*=256);)this[b+be]=w/Me&255;return b+z},_.prototype.writeUint8=_.prototype.writeUInt8=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,1,255,0),this[b]=255&w,b+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,65535,0),this[b]=255&w,this[b+1]=w>>>8,b+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,65535,0),this[b]=w>>>8,this[b+1]=255&w,b+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,4294967295,0),this[b+3]=w>>>24,this[b+2]=w>>>16,this[b+1]=w>>>8,this[b]=255&w,b+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,4294967295,0),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=255&w,b+4},_.prototype.writeBigUInt64LE=We(function(w,b=0){return L(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeBigUInt64BE=We(function(w,b=0){return Y(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeIntLE=function(w,b,z,ie){if(w=+w,b>>>=0,!ie){const At=Math.pow(2,8*z-1);V(this,w,b,z,At-1,-At)}let be=0,Me=1,qe=0;for(this[b]=255&w;++be<z&&(Me*=256);)w<0&&0===qe&&0!==this[b+be-1]&&(qe=1),this[b+be]=(w/Me|0)-qe&255;return b+z},_.prototype.writeIntBE=function(w,b,z,ie){if(w=+w,b>>>=0,!ie){const At=Math.pow(2,8*z-1);V(this,w,b,z,At-1,-At)}let be=z-1,Me=1,qe=0;for(this[b+be]=255&w;--be>=0&&(Me*=256);)w<0&&0===qe&&0!==this[b+be+1]&&(qe=1),this[b+be]=(w/Me|0)-qe&255;return b+z},_.prototype.writeInt8=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,1,127,-128),w<0&&(w=255+w+1),this[b]=255&w,b+1},_.prototype.writeInt16LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,32767,-32768),this[b]=255&w,this[b+1]=w>>>8,b+2},_.prototype.writeInt16BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,32767,-32768),this[b]=w>>>8,this[b+1]=255&w,b+2},_.prototype.writeInt32LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,2147483647,-2147483648),this[b]=255&w,this[b+1]=w>>>8,this[b+2]=w>>>16,this[b+3]=w>>>24,b+4},_.prototype.writeInt32BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=255&w,b+4},_.prototype.writeBigInt64LE=We(function(w,b=0){return L(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeBigInt64BE=We(function(w,b=0){return Y(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeFloatLE=function(w,b,z){return Se(this,w,b,!0,z)},_.prototype.writeFloatBE=function(w,b,z){return Se(this,w,b,!1,z)},_.prototype.writeDoubleLE=function(w,b,z){return Oe(this,w,b,!0,z)},_.prototype.writeDoubleBE=function(w,b,z){return Oe(this,w,b,!1,z)},_.prototype.copy=function(w,b,z,ie){if(!_.isBuffer(w))throw new TypeError("argument should be a Buffer");if(z||(z=0),!ie&&0!==ie&&(ie=this.length),b>=w.length&&(b=w.length),b||(b=0),ie>0&&ie<z&&(ie=z),ie===z||0===w.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),w.length-b<ie-z&&(ie=w.length-b+z);const be=ie-z;return this===w&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,z,ie):Uint8Array.prototype.set.call(w,this.subarray(z,ie),b),be},_.prototype.fill=function(w,b,z,ie){if("string"==typeof w){if("string"==typeof b?(ie=b,b=0,z=this.length):"string"==typeof z&&(ie=z,z=this.length),void 0!==ie&&"string"!=typeof ie)throw new TypeError("encoding must be a string");if("string"==typeof ie&&!_.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(1===w.length){const Me=w.charCodeAt(0);("utf8"===ie&&Me<128||"latin1"===ie)&&(w=Me)}}else"number"==typeof w?w&=255:"boolean"==typeof w&&(w=Number(w));if(b<0||this.length<b||this.length<z)throw new RangeError("Out of range index");if(z<=b)return this;let be;if(b>>>=0,z=void 0===z?this.length:z>>>0,w||(w=0),"number"==typeof w)for(be=b;be<z;++be)this[be]=w;else{const Me=_.isBuffer(w)?w:_.from(w,ie),qe=Me.length;if(0===qe)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(be=0;be<z-b;++be)this[be+b]=Me[be%qe]}return this};const Ve={};function Re(U,w,b){Ve[U]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,delete this.name}get code(){return U}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}function ye(U){let w="",b=U.length;const z="-"===U[0]?1:0;for(;b>=z+4;b-=3)w=`_${U.slice(b-3,b)}${w}`;return`${U.slice(0,b)}${w}`}function ve(U,w,b,z,ie,be){if(U>b||U<w){const Me="bigint"==typeof w?"n":"";let qe;throw qe=be>3?0===w||w===BigInt(0)?`>= 0${Me} and < 2${Me} ** ${8*(be+1)}${Me}`:`>= -(2${Me} ** ${8*(be+1)-1}${Me}) and < 2 ** ${8*(be+1)-1}${Me}`:`>= ${w}${Me} and <= ${b}${Me}`,new Ve.ERR_OUT_OF_RANGE("value",qe,U)}!function ke(U,w,b){_e(w,"offset"),(void 0===U[w]||void 0===U[w+b])&&de(w,U.length-(b+1))}(z,ie,be)}function _e(U,w){if("number"!=typeof U)throw new Ve.ERR_INVALID_ARG_TYPE(w,"number",U)}function de(U,w,b){throw Math.floor(U)!==U?(_e(U,b),new Ve.ERR_OUT_OF_RANGE(b||"offset","an integer",U)):w<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${w}`,U)}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(U,w){return`The "${U}" argument must be of type number. Received type ${typeof w}`},TypeError),Re("ERR_OUT_OF_RANGE",function(U,w,b){let z=`The value of "${U}" is out of range.`,ie=b;return Number.isInteger(b)&&Math.abs(b)>2**32?ie=ye(String(b)):"bigint"==typeof b&&(ie=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(ie=ye(ie)),ie+="n"),z+=` It must be ${w}. Received ${ie}`,z},RangeError);const se=/[^+/0-9A-Za-z-_]/g;function ce(U,w){let b;w=w||1/0;const z=U.length;let ie=null;const be=[];for(let Me=0;Me<z;++Me){if(b=U.charCodeAt(Me),b>55295&&b<57344){if(!ie){if(b>56319){(w-=3)>-1&&be.push(239,191,189);continue}if(Me+1===z){(w-=3)>-1&&be.push(239,191,189);continue}ie=b;continue}if(b<56320){(w-=3)>-1&&be.push(239,191,189),ie=b;continue}b=65536+(ie-55296<<10|b-56320)}else ie&&(w-=3)>-1&&be.push(239,191,189);if(ie=null,b<128){if((w-=1)<0)break;be.push(b)}else if(b<2048){if((w-=2)<0)break;be.push(b>>6|192,63&b|128)}else if(b<65536){if((w-=3)<0)break;be.push(b>>12|224,b>>6&63|128,63&b|128)}else{if(!(b<1114112))throw new Error("Invalid code point");if((w-=4)<0)break;be.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}}return be}function Ee(U){return C.toByteArray(function re(U){if((U=(U=U.split("=")[0]).trim().replace(se,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(U))}function Be(U,w,b,z){let ie;for(ie=0;ie<z&&!(ie+b>=w.length||ie>=U.length);++ie)w[ie+b]=U[ie];return ie}function De(U,w){return U instanceof w||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===w.name}function et(U){return U!=U}const Ke=function(){const U="0123456789abcdef",w=new Array(256);for(let b=0;b<16;++b){const z=16*b;for(let ie=0;ie<16;++ie)w[z+ie]=U[b]+U[ie]}return w}();function We(U){return typeof BigInt>"u"?_t:U}function _t(){throw new Error("BigInt not supported")}},24785:(xe,O,I)=>{"use strict";const{AbortError:C,codes:H}=I(65109),{isNodeStream:N,isWebStream:G,kControllerErrorFunction:v}=I(51233),B=I(44268),{ERR_INVALID_ARG_TYPE:_}=H;xe.exports.addAbortSignal=function($,M){if(((D,$)=>{if("object"!=typeof D||!("aborted"in D))throw new _("signal","AbortSignal",D)})($),!N(M)&&!G(M))throw new _("stream",["ReadableStream","WritableStream","Stream"],M);return xe.exports.addAbortSignalNoValidate($,M)},xe.exports.addAbortSignalNoValidate=function(D,$){if("object"!=typeof D||!("aborted"in D))return $;const M=N($)?()=>{$.destroy(new C(void 0,{cause:D.reason}))}:()=>{$[v](new C(void 0,{cause:D.reason}))};return D.aborted?M():(D.addEventListener("abort",M),B($,()=>D.removeEventListener("abort",M))),$}},58579:(xe,O,I)=>{"use strict";const{StringPrototypeSlice:C,SymbolIterator:H,TypedArrayPrototypeSet:N,Uint8Array:G}=I(43856),{Buffer:v}=I(89565),{inspect:B}=I(55830);xe.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(T){const D={data:T,next:null};this.length>0?this.tail.next=D:this.head=D,this.tail=D,++this.length}unshift(T){const D={data:T,next:this.head};0===this.length&&(this.tail=D),this.head=D,++this.length}shift(){if(0===this.length)return;const T=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,T}clear(){this.head=this.tail=null,this.length=0}join(T){if(0===this.length)return"";let D=this.head,$=""+D.data;for(;null!==(D=D.next);)$+=T+D.data;return $}concat(T){if(0===this.length)return v.alloc(0);const D=v.allocUnsafe(T>>>0);let $=this.head,M=0;for(;$;)N(D,$.data,M),M+=$.data.length,$=$.next;return D}consume(T,D){const $=this.head.data;if(T<$.length){const M=$.slice(0,T);return this.head.data=$.slice(T),M}return T===$.length?this.shift():D?this._getString(T):this._getBuffer(T)}first(){return this.head.data}*[H](){for(let T=this.head;T;T=T.next)yield T.data}_getString(T){let D="",$=this.head,M=0;do{const F=$.data;if(!(T>F.length)){T===F.length?(D+=F,++M,this.head=$.next?$.next:this.tail=null):(D+=C(F,0,T),this.head=$,$.data=C(F,T));break}D+=F,T-=F.length,++M}while(null!==($=$.next));return this.length-=M,D}_getBuffer(T){const D=v.allocUnsafe(T),$=T;let M=this.head,F=0;do{const k=M.data;if(!(T>k.length)){T===k.length?(N(D,k,$-T),++F,this.head=M.next?M.next:this.tail=null):(N(D,new G(k.buffer,k.byteOffset,T),$-T),this.head=M,M.data=k.slice(T));break}N(D,k,$-T),T-=k.length,++F}while(null!==(M=M.next));return this.length-=F,D}[Symbol.for("nodejs.util.inspect.custom")](T,D){return B(this,{...D,depth:0,customInspect:!1})}}},5464:(xe,O,I)=>{"use strict";var C=I(29293).default;const{pipeline:H}=I(96208),N=I(97464),{destroyer:G}=I(45078),{isNodeStream:v,isReadable:B,isWritable:_,isWebStream:T,isTransformStream:D,isWritableStream:$,isReadableStream:M}=I(51233),{AbortError:F,codes:{ERR_INVALID_ARG_VALUE:k,ERR_MISSING_ARGS:j}}=I(65109),Z=I(44268);xe.exports=function(...W){if(0===W.length)throw new j("streams");if(1===W.length)return N.from(W[0]);const K=[...W];if("function"==typeof W[0]&&(W[0]=N.from(W[0])),"function"==typeof W[W.length-1]){const f=W.length-1;W[f]=N.from(W[f])}for(let f=0;f<W.length;++f)if(v(W[f])||T(W[f])){if(f<W.length-1&&!(B(W[f])||M(W[f])||D(W[f])))throw new k(`streams[${f}]`,K[f],"must be readable");if(f>0&&!(_(W[f])||$(W[f])||D(W[f])))throw new k(`streams[${f}]`,K[f],"must be writable")}let J,X,Q,oe,ne;const pe=W[0],Ie=H(W,function me(f){const l=oe;oe=null,l?l(f):f?ne.destroy(f):!a&&!E&&ne.destroy()}),E=!!(_(pe)||$(pe)||D(pe)),a=!!(B(Ie)||M(Ie)||D(Ie));if(ne=new N({writableObjectMode:!(null==pe||!pe.writableObjectMode),readableObjectMode:!(null==Ie||!Ie.writableObjectMode),writable:E,readable:a}),E){if(v(pe))ne._write=function(l,h,g){pe.write(l,h)?g():J=g},ne._final=function(l){pe.end(),X=l},pe.on("drain",function(){if(J){const l=J;J=null,l()}});else if(T(pe)){const h=(D(pe)?pe.writable:pe).getWriter();ne._write=function(){var g=C(function*(x,P,m){try{yield h.ready,h.write(x).catch(()=>{}),m()}catch(d){m(d)}});return function(x,P,m){return g.apply(this,arguments)}}(),ne._final=function(){var g=C(function*(x){try{yield h.ready,h.close().catch(()=>{}),X=x}catch(P){x(P)}});return function(x){return g.apply(this,arguments)}}()}const f=D(Ie)?Ie.readable:Ie;Z(f,()=>{if(X){const l=X;X=null,l()}})}if(a)if(v(Ie))Ie.on("readable",function(){if(Q){const f=Q;Q=null,f()}}),Ie.on("end",function(){ne.push(null)}),ne._read=function(){for(;;){const f=Ie.read();if(null===f)return void(Q=ne._read);if(!ne.push(f))return}};else if(T(Ie)){const l=(D(Ie)?Ie.readable:Ie).getReader();ne._read=C(function*(){for(;;)try{const{value:h,done:g}=yield l.read();if(!ne.push(h))return;if(g)return void ne.push(null)}catch{return}})}return ne._destroy=function(f,l){!f&&null!==oe&&(f=new F),Q=null,J=null,X=null,null===oe?l(f):(oe=l,v(Ie)&&G(Ie,f))},ne}},45078:(xe,O,I)=>{"use strict";const C=I(40573),{aggregateTwoErrors:H,codes:{ERR_MULTIPLE_CALLBACK:N},AbortError:G}=I(65109),{Symbol:v}=I(43856),{kDestroyed:B,isDestroyed:_,isFinished:T,isServerRequest:D}=I(51233),$=v("kDestroy"),M=v("kConstruct");function F(E,a,f){E&&(a&&!a.errored&&(a.errored=E),f&&!f.errored&&(f.errored=E))}function j(E,a,f){let l=!1;function h(g){if(l)return;l=!0;const x=E._readableState,P=E._writableState;F(g,P,x),P&&(P.closed=!0),x&&(x.closed=!0),"function"==typeof f&&f(g),g?C.nextTick(Z,E,g):C.nextTick(q,E)}try{E._destroy(a||null,h)}catch(g){h(g)}}function Z(E,a){W(E,a),q(E)}function q(E){const a=E._readableState,f=E._writableState;f&&(f.closeEmitted=!0),a&&(a.closeEmitted=!0),(null!=f&&f.emitClose||null!=a&&a.emitClose)&&E.emit("close")}function W(E,a){const f=E._readableState,l=E._writableState;null!=l&&l.errorEmitted||null!=f&&f.errorEmitted||(l&&(l.errorEmitted=!0),f&&(f.errorEmitted=!0),E.emit("error",a))}function J(E,a,f){const l=E._readableState,h=E._writableState;if(null!=h&&h.destroyed||null!=l&&l.destroyed)return this;null!=l&&l.autoDestroy||null!=h&&h.autoDestroy?E.destroy(a):a&&(h&&!h.errored&&(h.errored=a),l&&!l.errored&&(l.errored=a),f?C.nextTick(W,E,a):W(E,a))}function Q(E){let a=!1;function f(l){if(a)return void J(E,l??new N);a=!0;const h=E._readableState,g=E._writableState,x=g||h;h&&(h.constructed=!0),g&&(g.constructed=!0),x.destroyed?E.emit($,l):l?J(E,l,!0):C.nextTick(oe,E)}try{E._construct(l=>{C.nextTick(f,l)})}catch(l){C.nextTick(f,l)}}function oe(E){E.emit(M)}function ne(E){return E?.setHeader&&"function"==typeof E.abort}function me(E){E.emit("close")}function pe(E,a){E.emit("error",a),C.nextTick(me,E)}xe.exports={construct:function X(E,a){if("function"!=typeof E._construct)return;const f=E._readableState,l=E._writableState;f&&(f.constructed=!1),l&&(l.constructed=!1),E.once(M,a),!(E.listenerCount(M)>1)&&C.nextTick(Q,E)},destroyer:function Ie(E,a){!E||_(E)||(!a&&!T(E)&&(a=new G),D(E)?(E.socket=null,E.destroy(a)):ne(E)?E.abort():ne(E.req)?E.req.abort():"function"==typeof E.destroy?E.destroy(a):"function"==typeof E.close?E.close():a?C.nextTick(pe,E,a):C.nextTick(me,E),E.destroyed||(E[B]=!0))},destroy:function k(E,a){const f=this._readableState,l=this._writableState,h=l||f;return null!=l&&l.destroyed||null!=f&&f.destroyed?("function"==typeof a&&a(),this):(F(E,l,f),l&&(l.destroyed=!0),f&&(f.destroyed=!0),h.constructed?j(this,E,a):this.once($,function(g){j(this,H(g,E),a)}),this)},undestroy:function K(){const E=this._readableState,a=this._writableState;E&&(E.constructed=!0,E.closed=!1,E.closeEmitted=!1,E.destroyed=!1,E.errored=null,E.errorEmitted=!1,E.reading=!1,E.ended=!1===E.readable,E.endEmitted=!1===E.readable),a&&(a.constructed=!0,a.destroyed=!1,a.closed=!1,a.closeEmitted=!1,a.errored=null,a.errorEmitted=!1,a.finalCalled=!1,a.prefinished=!1,a.ended=!1===a.writable,a.ending=!1===a.writable,a.finished=!1===a.writable)},errorOrDestroy:J}},97464:(xe,O,I)=>{"use strict";const{ObjectDefineProperties:C,ObjectGetOwnPropertyDescriptor:H,ObjectKeys:N,ObjectSetPrototypeOf:G}=I(43856);xe.exports=_;const v=I(29710),B=I(40258);G(_.prototype,v.prototype),G(_,v);{const M=N(B.prototype);for(let F=0;F<M.length;F++){const k=M[F];_.prototype[k]||(_.prototype[k]=B.prototype[k])}}function _(M){if(!(this instanceof _))return new _(M);v.call(this,M),B.call(this,M),M?(this.allowHalfOpen=!1!==M.allowHalfOpen,!1===M.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===M.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let T,$;function D(){return void 0===T&&(T={}),T}C(_.prototype,{writable:{__proto__:null,...H(B.prototype,"writable")},writableHighWaterMark:{__proto__:null,...H(B.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...H(B.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...H(B.prototype,"writableBuffer")},writableLength:{__proto__:null,...H(B.prototype,"writableLength")},writableFinished:{__proto__:null,...H(B.prototype,"writableFinished")},writableCorked:{__proto__:null,...H(B.prototype,"writableCorked")},writableEnded:{__proto__:null,...H(B.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...H(B.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(M){this._readableState&&this._writableState&&(this._readableState.destroyed=M,this._writableState.destroyed=M)}}}),_.fromWeb=function(M,F){return D().newStreamDuplexFromReadableWritablePair(M,F)},_.toWeb=function(M){return D().newReadableWritablePairFromDuplex(M)},_.from=function(M){return $||($=I(56840)),$(M,"body")}},56840:(xe,O,I)=>{var C=I(29293).default,H=I(53344).default,N=I(42958).default;const G=I(40573),v=I(89565),{isReadable:B,isWritable:_,isIterable:T,isNodeStream:D,isReadableNodeStream:$,isWritableNodeStream:M,isDuplexNodeStream:F}=I(51233),k=I(44268),{AbortError:j,codes:{ERR_INVALID_ARG_TYPE:Z,ERR_INVALID_RETURN_VALUE:q}}=I(65109),{destroyer:W}=I(45078),K=I(97464),J=I(29710),{createDeferredPromise:X}=I(55830),Q=I(24246),oe=globalThis.Blob||v.Blob,ne=typeof oe<"u"?function(l){return l instanceof oe}:function(l){return!1},me=globalThis.AbortController||I(9465).AbortController,{FunctionPrototypeCall:pe}=I(43856);class Ie extends K{constructor(l){super(l),!1===l?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===l?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function a(f){const l=f.readable&&"function"!=typeof f.readable.read?J.wrap(f.readable):f.readable,h=f.writable;let P,m,d,p,V,g=!!B(l),x=!!_(h);function L(Y){const le=p;p=null,le?le(Y):Y&&V.destroy(Y)}return V=new Ie({readableObjectMode:!(null==l||!l.readableObjectMode),writableObjectMode:!(null==h||!h.writableObjectMode),readable:g,writable:x}),x&&(k(h,Y=>{x=!1,Y&&W(l,Y),L(Y)}),V._write=function(Y,le,Se){h.write(Y,le)?Se():P=Se},V._final=function(Y){h.end(),m=Y},h.on("drain",function(){if(P){const Y=P;P=null,Y()}}),h.on("finish",function(){if(m){const Y=m;m=null,Y()}})),g&&(k(l,Y=>{g=!1,Y&&W(l,Y),L(Y)}),l.on("readable",function(){if(d){const Y=d;d=null,Y()}}),l.on("end",function(){V.push(null)}),V._read=function(){for(;;){const Y=l.read();if(null===Y)return void(d=V._read);if(!V.push(Y))return}}),V._destroy=function(Y,le){!Y&&null!==p&&(Y=new j),d=null,P=null,m=null,null===p?le(Y):(p=le,W(h,Y),W(l,Y))},V}xe.exports=function f(l,h){if(F(l))return l;if($(l))return a({readable:l});if(M(l))return a({writable:l});if(D(l))return a({writable:!1,readable:!1});if("function"==typeof l){const{value:x,write:P,final:m,destroy:d}=function E(f){let{promise:l,resolve:h}=X();const g=new me,x=g.signal;return{value:f(N(function*(){for(;;){const m=l;l=null;const{chunk:d,done:p,cb:V}=yield H(m);if(G.nextTick(V),p)return;if(x.aborted)throw new j(void 0,{cause:x.reason});({promise:l,resolve:h}=X()),yield d}})(),{signal:x}),write(m,d,p){const V=h;h=null,V({chunk:m,done:!1,cb:p})},final(m){const d=h;h=null,d({done:!0,cb:m})},destroy(m,d){g.abort(),d(m)}}}(l);if(T(x))return Q(Ie,x,{objectMode:!0,write:P,final:m,destroy:d});const p=x?.then;if("function"==typeof p){let V;const L=pe(p,x,Y=>{if(null!=Y)throw new q("nully","body",Y)},Y=>{W(V,Y)});return V=new Ie({objectMode:!0,readable:!1,write:P,final(Y){m(C(function*(){try{yield L,G.nextTick(Y,null)}catch(le){G.nextTick(Y,le)}}))},destroy:d})}throw new q("Iterable, AsyncIterable or AsyncFunction",h,x)}if(ne(l))return f(l.arrayBuffer());if(T(l))return Q(Ie,l,{objectMode:!0,writable:!1});if("object"==typeof l?.writable||"object"==typeof l?.readable)return a({readable:null!=l&&l.readable?$(l?.readable)?l?.readable:f(l.readable):void 0,writable:null!=l&&l.writable?M(l?.writable)?l?.writable:f(l.writable):void 0});const g=l?.then;if("function"==typeof g){let x;return pe(g,l,P=>{null!=P&&x.push(P),x.push(null)},P=>{W(x,P)}),x=new Ie({objectMode:!0,writable:!1,read(){}})}throw new Z(h,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],l)}},44268:(xe,O,I)=>{const C=I(40573),{AbortError:H,codes:N}=I(65109),{ERR_INVALID_ARG_TYPE:G,ERR_STREAM_PREMATURE_CLOSE:v}=N,{kEmptyObject:B,once:_}=I(55830),{validateAbortSignal:T,validateFunction:D,validateObject:$,validateBoolean:M}=I(44323),{Promise:F,PromisePrototypeThen:k}=I(43856),{isClosed:j,isReadable:Z,isReadableNodeStream:q,isReadableStream:W,isReadableFinished:K,isReadableErrored:J,isWritable:X,isWritableNodeStream:Q,isWritableStream:oe,isWritableFinished:ne,isWritableErrored:me,isNodeStream:pe,willEmitClose:Ie,kIsClosedPromise:E}=I(51233),f=()=>{};function l(x,P,m){var d,p;if(2===arguments.length?(m=P,P=B):null==P?P=B:$(P,"options"),D(m,"callback"),T(P.signal,"options.signal"),m=_(m),W(x)||oe(x))return function h(x,P,m){let d=!1,p=f;if(P.signal)if(p=()=>{d=!0,m.call(x,new H(void 0,{cause:P.signal.reason}))},P.signal.aborted)C.nextTick(p);else{const L=m;m=_((...Y)=>{P.signal.removeEventListener("abort",p),L.apply(x,Y)}),P.signal.addEventListener("abort",p)}const V=(...L)=>{d||C.nextTick(()=>m.apply(x,L))};return k(x[E].promise,V,V),f}(x,P,m);if(!pe(x))throw new G("stream",["ReadableStream","WritableStream","Stream"],x);const V=null!==(d=P.readable)&&void 0!==d?d:q(x),L=null!==(p=P.writable)&&void 0!==p?p:Q(x),Y=x._writableState,le=x._readableState,Se=()=>{x.writable||Re()};let Oe=Ie(x)&&q(x)===V&&Q(x)===L,Ve=ne(x,!1);const Re=()=>{Ve=!0,x.destroyed&&(Oe=!1),(!Oe||x.readable&&!V)&&(!V||ye)&&m.call(x)};let ye=K(x,!1);const ke=()=>{ye=!0,x.destroyed&&(Oe=!1),(!Oe||x.writable&&!L)&&(!L||Ve)&&m.call(x)},ve=ue=>{m.call(x,ue)};let _e=j(x);const de=()=>{_e=!0;const ue=me(x)||J(x);return ue&&"boolean"!=typeof ue?m.call(x,ue):V&&!ye&&q(x,!0)&&!K(x,!1)?m.call(x,new v):!L||Ve||ne(x,!1)?void m.call(x):m.call(x,new v)},se=()=>{_e=!0;const ue=me(x)||J(x);if(ue&&"boolean"!=typeof ue)return m.call(x,ue);m.call(x)},re=()=>{x.req.on("finish",Re)};!function a(x){return x.setHeader&&"function"==typeof x.abort}(x)?L&&!Y&&(x.on("end",Se),x.on("close",Se)):(x.on("complete",Re),Oe||x.on("abort",de),x.req?re():x.on("request",re)),!Oe&&"boolean"==typeof x.aborted&&x.on("aborted",de),x.on("end",ke),x.on("finish",Re),!1!==P.error&&x.on("error",ve),x.on("close",de),_e?C.nextTick(de):null!=Y&&Y.errorEmitted||null!=le&&le.errorEmitted?Oe||C.nextTick(se):(!V&&(!Oe||Z(x))&&(Ve||!1===X(x))||!L&&(!Oe||X(x))&&(ye||!1===Z(x))||le&&x.req&&x.aborted)&&C.nextTick(se);const ce=()=>{m=f,x.removeListener("aborted",de),x.removeListener("complete",Re),x.removeListener("abort",de),x.removeListener("request",re),x.req&&x.req.removeListener("finish",Re),x.removeListener("end",Se),x.removeListener("close",Se),x.removeListener("finish",Re),x.removeListener("end",ke),x.removeListener("error",ve),x.removeListener("close",de)};if(P.signal&&!_e){const ue=()=>{const ge=m;ce(),ge.call(x,new H(void 0,{cause:P.signal.reason}))};if(P.signal.aborted)C.nextTick(ue);else{const ge=m;m=_((...Ee)=>{P.signal.removeEventListener("abort",ue),ge.apply(x,Ee)}),P.signal.addEventListener("abort",ue)}}return ce}xe.exports=l,xe.exports.finished=function g(x,P){var m;let d=!1;return null===P&&(P=B),null!==(m=P)&&void 0!==m&&m.cleanup&&(M(P.cleanup,"cleanup"),d=P.cleanup),new F((p,V)=>{const L=l(x,P,Y=>{d&&L(),Y?V(Y):p()})})}},24246:(xe,O,I)=>{"use strict";var C=I(29293).default;const H=I(40573),{PromisePrototypeThen:N,SymbolAsyncIterator:G,SymbolIterator:v}=I(43856),{Buffer:B}=I(89565),{ERR_INVALID_ARG_TYPE:_,ERR_STREAM_NULL_VALUES:T}=I(65109).codes;xe.exports=function D($,M,F){let k,j;if("string"==typeof M||M instanceof B)return new $({objectMode:!0,...F,read(){this.push(M),this.push(null)}});if(M&&M[G])j=!0,k=M[G]();else{if(!M||!M[v])throw new _("iterable",["Iterable"],M);j=!1,k=M[v]()}const Z=new $({objectMode:!0,highWaterMark:1,...F});let q=!1;function K(){return(K=C(function*(Q){if(null!=Q&&"function"==typeof k.throw){const{value:me,done:pe}=yield k.throw(Q);if(yield me,pe)return}if("function"==typeof k.return){const{value:me}=yield k.return();yield me}})).apply(this,arguments)}function X(){return(X=C(function*(){for(;;){try{const{value:Q,done:oe}=j?yield k.next():k.next();if(oe)Z.push(null);else{const ne=Q&&"function"==typeof Q.then?yield Q:Q;if(null===ne)throw q=!1,new T;if(Z.push(ne))continue;q=!1}}catch(Q){Z.destroy(Q)}break}})).apply(this,arguments)}return Z._read=function(){q||(q=!0,function J(){X.apply(this,arguments)}())},Z._destroy=function(Q,oe){N(function W(Q){return K.apply(this,arguments)}(Q),()=>H.nextTick(oe,Q),ne=>H.nextTick(oe,ne||Q))},Z}},2649:(xe,O,I)=>{"use strict";const{ArrayIsArray:C,ObjectSetPrototypeOf:H}=I(43856),{EventEmitter:N}=I(44356);function G(B){N.call(this,B)}function v(B,_,T){if("function"==typeof B.prependListener)return B.prependListener(_,T);B._events&&B._events[_]?C(B._events[_])?B._events[_].unshift(T):B._events[_]=[T,B._events[_]]:B.on(_,T)}H(G.prototype,N.prototype),H(G,N),G.prototype.pipe=function(B,_){const T=this;function D(q){B.writable&&!1===B.write(q)&&T.pause&&T.pause()}function $(){T.readable&&T.resume&&T.resume()}T.on("data",D),B.on("drain",$),!B._isStdio&&(!_||!1!==_.end)&&(T.on("end",F),T.on("close",k));let M=!1;function F(){M||(M=!0,B.end())}function k(){M||(M=!0,"function"==typeof B.destroy&&B.destroy())}function j(q){Z(),0===N.listenerCount(this,"error")&&this.emit("error",q)}function Z(){T.removeListener("data",D),B.removeListener("drain",$),T.removeListener("end",F),T.removeListener("close",k),T.removeListener("error",j),B.removeListener("error",j),T.removeListener("end",Z),T.removeListener("close",Z),B.removeListener("close",Z)}return v(T,"error",j),v(B,"error",j),T.on("end",Z),T.on("close",Z),B.on("close",Z),B.emit("pipe",T),B},xe.exports={Stream:G,prependListener:v}},37325:(xe,O,I)=>{"use strict";var C=I(29293).default,H=I(93513).default,N=I(82881).default,G=I(53344).default,v=I(42958).default;const B=globalThis.AbortController||I(9465).AbortController,{codes:{ERR_INVALID_ARG_VALUE:_,ERR_INVALID_ARG_TYPE:T,ERR_MISSING_ARGS:D,ERR_OUT_OF_RANGE:$},AbortError:M}=I(65109),{validateAbortSignal:F,validateInteger:k,validateObject:j}=I(44323),Z=I(43856).Symbol("kWeak"),{finished:q}=I(44268),W=I(5464),{addAbortSignalNoValidate:K}=I(24785),{isWritable:J,isNodeStream:X}=I(51233),{ArrayPrototypePush:Q,MathFloor:oe,Number:ne,NumberIsNaN:me,Promise:pe,PromiseReject:Ie,PromisePrototypeThen:E,Symbol:a}=I(43856),f=a("kEmpty"),l=a("kEof");function g(re,ce){if("function"!=typeof re)throw new T("fn",["Function","AsyncFunction"],re);null!=ce&&j(ce,"options"),null!=ce?.signal&&F(ce.signal,"options.signal");let ue=1;return null!=ce?.concurrency&&(ue=oe(ce.concurrency)),k(ue,"concurrency",1),function(){var ge=v(function*(){var Be,De;const et=new B,Ke=this,We=[],_t=et.signal,U={signal:_t},w=()=>et.abort();null!=ce&&null!==(Be=ce.signal)&&void 0!==Be&&Be.aborted&&w(),null==ce||null===(De=ce.signal)||void 0===De||De.addEventListener("abort",w);let b,z,ie=!1;function be(){ie=!0}function qe(){return(qe=C(function*(){try{var rt,At=!1,nt=!1;try{for(var bt,St=N(Ke);At=!(bt=yield St.next()).done;At=!1){let it=bt.value;var Mt;if(ie)return;if(_t.aborted)throw new M;try{it=re(it,U)}catch(mt){it=Ie(mt)}it!==f&&("function"==typeof(null===(Mt=it)||void 0===Mt?void 0:Mt.catch)&&it.catch(be),We.push(it),b&&(b(),b=null),!ie&&We.length&&We.length>=ue&&(yield new pe(mt=>{z=mt})))}}catch(it){nt=!0,rt=it}finally{try{At&&null!=St.return&&(yield St.return())}finally{if(nt)throw rt}}We.push(l)}catch(it){const mt=Ie(it);E(mt,void 0,be),We.push(mt)}finally{var Ft;ie=!0,b&&(b(),b=null),null==ce||null===(Ft=ce.signal)||void 0===Ft||Ft.removeEventListener("abort",w)}})).apply(this,arguments)}!function Me(){qe.apply(this,arguments)}();try{for(;;){for(;We.length>0;){const At=yield G(We[0]);if(At===l)return;if(_t.aborted)throw new M;At!==f&&(yield At),We.shift(),z&&(z(),z=null)}yield G(new pe(At=>{b=At}))}}finally{et.abort(),ie=!0,z&&(z(),z=null)}});return function Ee(){return ge.apply(this,arguments)}}().call(this)}function P(re){return m.apply(this,arguments)}function m(){return(m=C(function*(re,ce=void 0){var Ee,ue=!1,ge=!1;try{for(var Be=N(Se.call(this,re,ce));ue=!(yield Be.next()).done;ue=!1)return!0}catch(et){ge=!0,Ee=et}finally{try{ue&&null!=Be.return&&(yield Be.return())}finally{if(ge)throw Ee}}return!1})).apply(this,arguments)}function p(){return(p=C(function*(re,ce=void 0){if("function"!=typeof re)throw new T("fn",["Function","AsyncFunction"],re);return!(yield P.call(this,C(function*(...ue){return!(yield re(...ue))}),ce))})).apply(this,arguments)}function L(){return(L=C(function*(re,ce){var Ee,ue=!1,ge=!1;try{for(var De,Be=N(Se.call(this,re,ce));ue=!(De=yield Be.next()).done;ue=!1)return De.value}catch(et){ge=!0,Ee=et}finally{try{ue&&null!=Be.return&&(yield Be.return())}finally{if(ge)throw Ee}}})).apply(this,arguments)}function le(){return le=C(function*(re,ce){if("function"!=typeof re)throw new T("fn",["Function","AsyncFunction"],re);function ge(){return(ge=C(function*(We,_t){return yield re(We,_t),f})).apply(this,arguments)}var De,Ee=!1,Be=!1;try{for(var et=N(g.call(this,function ue(We,_t){return ge.apply(this,arguments)},ce));Ee=!(yield et.next()).done;Ee=!1);}catch(We){Be=!0,De=We}finally{try{Ee&&null!=et.return&&(yield et.return())}finally{if(Be)throw De}}}),le.apply(this,arguments)}function Se(re,ce){if("function"!=typeof re)throw new T("fn",["Function","AsyncFunction"],re);function ge(){return(ge=C(function*(Ee,Be){return(yield re(Ee,Be))?Ee:f})).apply(this,arguments)}return g.call(this,function ue(Ee,Be){return ge.apply(this,arguments)},ce)}class Oe extends D{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function Re(){return Re=C(function*(re,ce,ue){var ge;if("function"!=typeof re)throw new T("reducer",["Function","AsyncFunction"],re);null!=ue&&j(ue,"options"),null!=ue?.signal&&F(ue.signal,"options.signal");let Ee=arguments.length>1;if(null!=ue&&null!==(ge=ue.signal)&&void 0!==ge&&ge.aborted){const z=new M(void 0,{cause:ue.signal.reason});throw this.once("error",()=>{}),yield q(this.destroy(z)),z}const Be=new B,De=Be.signal;null!=ue&&ue.signal&&ue.signal.addEventListener("abort",()=>Be.abort(),{once:!0,[Z]:this});let et=!1;try{var _t,Ke=!1,We=!1;try{for(var w,U=N(this);Ke=!(w=yield U.next()).done;Ke=!1){const z=w.value;var b;if(et=!0,null!=ue&&null!==(b=ue.signal)&&void 0!==b&&b.aborted)throw new M;Ee?ce=yield re(ce,z,{signal:De}):(ce=z,Ee=!0)}}catch(z){We=!0,_t=z}finally{try{Ke&&null!=U.return&&(yield U.return())}finally{if(We)throw _t}}if(!et&&!Ee)throw new Oe}finally{Be.abort()}return ce}),Re.apply(this,arguments)}function ke(){return(ke=C(function*(re){null!=re&&j(re,"options"),null!=re?.signal&&F(re.signal,"options.signal");const ce=[];var Ee,ue=!1,ge=!1;try{for(var De,Be=N(this);ue=!(De=yield Be.next()).done;ue=!1){const Ke=De.value;var et;if(null!=re&&null!==(et=re.signal)&&void 0!==et&&et.aborted)throw new M(void 0,{cause:re.signal.reason});Q(ce,Ke)}}catch(Ke){ge=!0,Ee=Ke}finally{try{ue&&null!=Be.return&&(yield Be.return())}finally{if(ge)throw Ee}}return ce})).apply(this,arguments)}function _e(re){if(re=ne(re),me(re))return 0;if(re<0)throw new $("number",">= 0",re);return re}xe.exports.streamReturningOperators={asIndexedPairs:function x(re=void 0){return null!=re&&j(re,"options"),null!=re?.signal&&F(re.signal,"options.signal"),function(){var ce=v(function*(){let ge=0;var De,Ee=!1,Be=!1;try{for(var Ke,et=N(this);Ee=!(Ke=yield G(et.next())).done;Ee=!1){const _t=Ke.value;var We;if(null!=re&&null!==(We=re.signal)&&void 0!==We&&We.aborted)throw new M({cause:re.signal.reason});yield[ge++,_t]}}catch(_t){Be=!0,De=_t}finally{try{Ee&&null!=et.return&&(yield G(et.return()))}finally{if(Be)throw De}}});return function ue(){return ce.apply(this,arguments)}}().call(this)},drop:function de(re,ce=void 0){return null!=ce&&j(ce,"options"),null!=ce?.signal&&F(ce.signal,"options.signal"),re=_e(re),function(){var ue=v(function*(){var Ee;if(null!=ce&&null!==(Ee=ce.signal)&&void 0!==Ee&&Ee.aborted)throw new M;var et,Be=!1,De=!1;try{for(var We,Ke=N(this);Be=!(We=yield G(Ke.next())).done;Be=!1){const U=We.value;var _t;if(null!=ce&&null!==(_t=ce.signal)&&void 0!==_t&&_t.aborted)throw new M;re--<=0&&(yield U)}}catch(U){De=!0,et=U}finally{try{Be&&null!=Ke.return&&(yield G(Ke.return()))}finally{if(De)throw et}}});return function ge(){return ue.apply(this,arguments)}}().call(this)},filter:Se,flatMap:function ve(re,ce){const ue=g.call(this,re,ce);return function(){var ge=v(function*(){var et,Be=!1,De=!1;try{for(var We,Ke=N(ue);Be=!(We=yield G(Ke.next())).done;Be=!1){const _t=We.value;yield*H(N(_t),G)}}catch(_t){De=!0,et=_t}finally{try{Be&&null!=Ke.return&&(yield G(Ke.return()))}finally{if(De)throw et}}});return function Ee(){return ge.apply(this,arguments)}}().call(this)},map:g,take:function se(re,ce=void 0){return null!=ce&&j(ce,"options"),null!=ce?.signal&&F(ce.signal,"options.signal"),re=_e(re),function(){var ue=v(function*(){var Ee;if(null!=ce&&null!==(Ee=ce.signal)&&void 0!==Ee&&Ee.aborted)throw new M;var et,Be=!1,De=!1;try{for(var We,Ke=N(this);Be=!(We=yield G(Ke.next())).done;Be=!1){const U=We.value;var _t;if(null!=ce&&null!==(_t=ce.signal)&&void 0!==_t&&_t.aborted)throw new M;if(!(re-- >0))return;yield U}}catch(U){De=!0,et=U}finally{try{Be&&null!=Ke.return&&(yield G(Ke.return()))}finally{if(De)throw et}}});return function ge(){return ue.apply(this,arguments)}}().call(this)},compose:function h(re,ce){if(null!=ce&&j(ce,"options"),null!=ce?.signal&&F(ce.signal,"options.signal"),X(re)&&!J(re))throw new _("stream",re,"must be writable");const ue=W(this,re);return null!=ce&&ce.signal&&K(ce.signal,ue),ue}},xe.exports.promiseReturningOperators={every:function d(re){return p.apply(this,arguments)},forEach:function Y(re,ce){return le.apply(this,arguments)},reduce:function Ve(re,ce,ue){return Re.apply(this,arguments)},toArray:function ye(re){return ke.apply(this,arguments)},some:P,find:function V(re,ce){return L.apply(this,arguments)}}},70874:(xe,O,I)=>{"use strict";const{ObjectSetPrototypeOf:C}=I(43856);xe.exports=N;const H=I(66344);function N(G){if(!(this instanceof N))return new N(G);H.call(this,G)}C(N.prototype,H.prototype),C(N,H),N.prototype._transform=function(G,v,B){B(null,G)}},96208:(xe,O,I)=>{var C=I(29293).default,H=I(42958).default,N=I(53344).default,G=I(93513).default,v=I(82881).default;const B=I(40573),{ArrayIsArray:_,Promise:T,SymbolAsyncIterator:D}=I(43856),$=I(44268),{once:M}=I(55830),F=I(45078),k=I(97464),{aggregateTwoErrors:j,codes:{ERR_INVALID_ARG_TYPE:Z,ERR_INVALID_RETURN_VALUE:q,ERR_MISSING_ARGS:W,ERR_STREAM_DESTROYED:K,ERR_STREAM_PREMATURE_CLOSE:J},AbortError:X}=I(65109),{validateFunction:Q,validateAbortSignal:oe}=I(44323),{isIterable:ne,isReadable:me,isReadableNodeStream:pe,isNodeStream:Ie,isTransformStream:E,isWebStream:a,isReadableStream:f,isReadableEnded:l}=I(51233),h=globalThis.AbortController||I(9465).AbortController;let g,x;function P(ye,ke,ve){let _e=!1;return ye.on("close",()=>{_e=!0}),{destroy:se=>{_e||(_e=!0,F.destroyer(ye,se||new K("pipe")))},cleanup:$(ye,{readable:ke,writable:ve},se=>{_e=!se})}}function d(ye){if(ne(ye))return ye;if(pe(ye))return function p(ye){return V.apply(this,arguments)}(ye);throw new Z("val",["Readable","Iterable","AsyncIterable"],ye)}function V(){return(V=H(function*(ye){x||(x=I(29710)),yield*G(v(x.prototype[D].call(ye)),N)})).apply(this,arguments)}function L(ye,ke,ve,_e){return Y.apply(this,arguments)}function Y(){return(Y=C(function*(ye,ke,ve,{end:_e}){let de,se=null;const re=Ke=>{if(Ke&&(de=Ke),se){const We=se;se=null,We()}},ce=()=>new T((Ke,We)=>{de?We(de):se=()=>{de?We(de):Ke()}});ke.on("drain",re);const ue=$(ke,{readable:!1},re);try{ke.writableNeedDrain&&(yield ce());var Be,ge=!1,Ee=!1;try{for(var et,De=v(ye);ge=!(et=yield De.next()).done;ge=!1)ke.write(et.value)||(yield ce())}catch(Ke){Ee=!0,Be=Ke}finally{try{ge&&null!=De.return&&(yield De.return())}finally{if(Ee)throw Be}}_e&&ke.end(),yield ce(),ve()}catch(Ke){ve(de!==Ke?j(de,Ke):Ke)}finally{ue(),ke.off("drain",re)}})).apply(this,arguments)}function le(ye,ke,ve,_e){return Se.apply(this,arguments)}function Se(){return(Se=C(function*(ye,ke,ve,{end:_e}){E(ke)&&(ke=ke.writable);const de=ke.getWriter();try{var ce,se=!1,re=!1;try{for(var ge,ue=v(ye);se=!(ge=yield ue.next()).done;se=!1){const Ee=ge.value;yield de.ready,de.write(Ee).catch(()=>{})}}catch(Ee){re=!0,ce=Ee}finally{try{se&&null!=ue.return&&(yield ue.return())}finally{if(re)throw ce}}yield de.ready,_e&&(yield de.close()),ve()}catch(Ee){try{yield de.abort(Ee),ve(Ee)}catch(Be){ve(Be)}}})).apply(this,arguments)}function Ve(ye,ke,ve){if(1===ye.length&&_(ye[0])&&(ye=ye[0]),ye.length<2)throw new W("streams");const _e=new h,de=_e.signal,se=ve?.signal,re=[];function ce(){et(new X)}let ue,ge;oe(se,"options.signal"),se?.addEventListener("abort",ce);const Ee=[];let Ke,Be=0;function De(w){et(w,0==--Be)}function et(w,b){if(w&&(!ue||"ERR_STREAM_PREMATURE_CLOSE"===ue.code)&&(ue=w),ue||b){for(;Ee.length;)Ee.shift()(ue);se?.removeEventListener("abort",ce),_e.abort(),b&&(ue||re.forEach(z=>z()),B.nextTick(ke,ue,ge))}}for(let w=0;w<ye.length;w++){const b=ye[w],z=w<ye.length-1,ie=w>0,be=z||!1!==ve?.end,Me=w===ye.length-1;if(Ie(b)){let qe=function(At){At&&"AbortError"!==At.name&&"ERR_STREAM_PREMATURE_CLOSE"!==At.code&&De(At)};if(be){const{destroy:At,cleanup:nt}=P(b,z,ie);Ee.push(At),me(b)&&Me&&re.push(nt)}b.on("error",qe),me(b)&&Me&&re.push(()=>{b.removeListener("error",qe)})}if(0===w)if("function"==typeof b){if(Ke=b({signal:de}),!ne(Ke))throw new q("Iterable, AsyncIterable or Stream","source",Ke)}else Ke=ne(b)||pe(b)||E(b)?b:k.from(b);else if("function"==typeof b){var We;if(Ke=E(Ke)?d(null===(We=Ke)||void 0===We?void 0:We.readable):d(Ke),Ke=b(Ke,{signal:de}),z){if(!ne(Ke,!0))throw new q("AsyncIterable",`transform[${w-1}]`,Ke)}else{var _t;g||(g=I(70874));const qe=new g({objectMode:!0}),At=null===(_t=Ke)||void 0===_t?void 0:_t.then;if("function"==typeof At)Be++,At.call(Ke,St=>{ge=St,null!=St&&qe.write(St),be&&qe.end(),B.nextTick(De)},St=>{qe.destroy(St),B.nextTick(De,St)});else if(ne(Ke,!0))Be++,L(Ke,qe,De,{end:be});else{if(!f(Ke)&&!E(Ke))throw new q("AsyncIterable or Promise","destination",Ke);Be++,L(Ke.readable||Ke,qe,De,{end:be})}Ke=qe;const{destroy:nt,cleanup:rt}=P(Ke,!1,!0);Ee.push(nt),Me&&re.push(rt)}}else if(Ie(b)){if(pe(Ke)){Be+=2;const qe=Re(Ke,b,De,{end:be});me(b)&&Me&&re.push(qe)}else if(E(Ke)||f(Ke))Be++,L(Ke.readable||Ke,b,De,{end:be});else{if(!ne(Ke))throw new Z("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ke);Be++,L(Ke,b,De,{end:be})}Ke=b}else if(a(b)){if(pe(Ke))Be++,le(d(Ke),b,De,{end:be});else if(f(Ke)||ne(Ke))Be++,le(Ke,b,De,{end:be});else{if(!E(Ke))throw new Z("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ke);Be++,le(Ke.readable,b,De,{end:be})}Ke=b}else Ke=k.from(b)}return(null!=de&&de.aborted||null!=se&&se.aborted)&&B.nextTick(ce),Ke}function Re(ye,ke,ve,{end:_e}){let de=!1;if(ke.on("close",()=>{de||ve(new J)}),ye.pipe(ke,{end:!1}),_e){let re=function(){de=!0,ke.end()};l(ye)?B.nextTick(re):ye.once("end",re)}else ve();return $(ye,{readable:!0,writable:!1},re=>{const ce=ye._readableState;re&&"ERR_STREAM_PREMATURE_CLOSE"===re.code&&ce&&ce.ended&&!ce.errored&&!ce.errorEmitted?ye.once("end",ve).once("error",ve):ve(re)}),$(ke,{readable:!1,writable:!0},ve)}xe.exports={pipelineImpl:Ve,pipeline:function Oe(...ye){return Ve(ye,M(function m(ye){return Q(ye[ye.length-1],"streams[stream.length - 1]"),ye.pop()}(ye)))}}},29710:(xe,O,I)=>{var C=I(53344).default,H=I(42958).default;const N=I(40573),{ArrayPrototypeIndexOf:G,NumberIsInteger:v,NumberIsNaN:B,NumberParseInt:_,ObjectDefineProperties:T,ObjectKeys:D,ObjectSetPrototypeOf:$,Promise:M,SafeSet:F,SymbolAsyncIterator:k,Symbol:j}=I(43856);xe.exports=L,L.ReadableState=V;const{EventEmitter:Z}=I(44356),{Stream:q,prependListener:W}=I(2649),{Buffer:K}=I(89565),{addAbortSignal:J}=I(24785),X=I(44268);let Q=I(55830).debuglog("stream",b=>{Q=b});const oe=I(58579),ne=I(45078),{getHighWaterMark:me,getDefaultHighWaterMark:pe}=I(31081),{aggregateTwoErrors:Ie,codes:{ERR_INVALID_ARG_TYPE:E,ERR_METHOD_NOT_IMPLEMENTED:a,ERR_OUT_OF_RANGE:f,ERR_STREAM_PUSH_AFTER_EOF:l,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:h}}=I(65109),{validateObject:g}=I(44323),x=j("kPaused"),{StringDecoder:P}=I(78454),m=I(24246);$(L.prototype,q.prototype),$(L,q);const d=()=>{},{errorOrDestroy:p}=ne;function V(b,z,ie){"boolean"!=typeof ie&&(ie=z instanceof I(97464)),this.objectMode=!(!b||!b.objectMode),ie&&(this.objectMode=this.objectMode||!(!b||!b.readableObjectMode)),this.highWaterMark=b?me(this,b,"readableHighWaterMark",ie):pe(!1),this.buffer=new oe,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[x]=null,this.errorEmitted=!1,this.emitClose=!b||!1!==b.emitClose,this.autoDestroy=!b||!1!==b.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=b&&b.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,b&&b.encoding&&(this.decoder=new P(b.encoding),this.encoding=b.encoding)}function L(b){if(!(this instanceof L))return new L(b);const z=this instanceof I(97464);this._readableState=new V(b,this,z),b&&("function"==typeof b.read&&(this._read=b.read),"function"==typeof b.destroy&&(this._destroy=b.destroy),"function"==typeof b.construct&&(this._construct=b.construct),b.signal&&!z&&J(b.signal,this)),q.call(this,b),ne.construct(this,()=>{this._readableState.needReadable&&ve(this,this._readableState)})}function Y(b,z,ie,be){Q("readableAddChunk",z);const Me=b._readableState;let qe;if(Me.objectMode||("string"==typeof z?Me.encoding!==(ie=ie||Me.defaultEncoding)&&(be&&Me.encoding?z=K.from(z,ie).toString(Me.encoding):(z=K.from(z,ie),ie="")):z instanceof K?ie="":q._isUint8Array(z)?(z=q._uint8ArrayToBuffer(z),ie=""):null!=z&&(qe=new E("chunk",["string","Buffer","Uint8Array"],z))),qe)p(b,qe);else if(null===z)Me.reading=!1,function Re(b,z){if(Q("onEofChunk"),!z.ended){if(z.decoder){const ie=z.decoder.end();ie&&ie.length&&(z.buffer.push(ie),z.length+=z.objectMode?1:ie.length)}z.ended=!0,z.sync?ye(b):(z.needReadable=!1,z.emittedReadable=!0,ke(b))}}(b,Me);else if(Me.objectMode||z&&z.length>0)if(be)if(Me.endEmitted)p(b,new h);else{if(Me.destroyed||Me.errored)return!1;le(b,Me,z,!0)}else if(Me.ended)p(b,new l);else{if(Me.destroyed||Me.errored)return!1;Me.reading=!1,Me.decoder&&!ie?(z=Me.decoder.write(z),Me.objectMode||0!==z.length?le(b,Me,z,!1):ve(b,Me)):le(b,Me,z,!1)}else be||(Me.reading=!1,ve(b,Me));return!Me.ended&&(Me.length<Me.highWaterMark||0===Me.length)}function le(b,z,ie,be){z.flowing&&0===z.length&&!z.sync&&b.listenerCount("data")>0?(z.multiAwaitDrain?z.awaitDrainWriters.clear():z.awaitDrainWriters=null,z.dataEmitted=!0,b.emit("data",ie)):(z.length+=z.objectMode?1:ie.length,be?z.buffer.unshift(ie):z.buffer.push(ie),z.needReadable&&ye(b)),ve(b,z)}function Ve(b,z){return b<=0||0===z.length&&z.ended?0:z.objectMode?1:B(b)?z.flowing&&z.length?z.buffer.first().length:z.length:b<=z.length?b:z.ended?z.length:0}function ye(b){const z=b._readableState;Q("emitReadable",z.needReadable,z.emittedReadable),z.needReadable=!1,z.emittedReadable||(Q("emitReadable",z.flowing),z.emittedReadable=!0,N.nextTick(ke,b))}function ke(b){const z=b._readableState;Q("emitReadable_",z.destroyed,z.length,z.ended),!z.destroyed&&!z.errored&&(z.length||z.ended)&&(b.emit("readable"),z.emittedReadable=!1),z.needReadable=!z.flowing&&!z.ended&&z.length<=z.highWaterMark,ge(b)}function ve(b,z){!z.readingMore&&z.constructed&&(z.readingMore=!0,N.nextTick(_e,b,z))}function _e(b,z){for(;!z.reading&&!z.ended&&(z.length<z.highWaterMark||z.flowing&&0===z.length);){const ie=z.length;if(Q("maybeReadMore read 0"),b.read(0),ie===z.length)break}z.readingMore=!1}function se(b){const z=b._readableState;z.readableListening=b.listenerCount("readable")>0,z.resumeScheduled&&!1===z[x]?z.flowing=!0:b.listenerCount("data")>0?b.resume():z.readableListening||(z.flowing=null)}function re(b){Q("readable nexttick read 0"),b.read(0)}function ue(b,z){Q("resume",z.reading),z.reading||b.read(0),z.resumeScheduled=!1,b.emit("resume"),ge(b),z.flowing&&!z.reading&&b.read(0)}function ge(b){const z=b._readableState;for(Q("flow",z.flowing);z.flowing&&null!==b.read(););}function Ee(b,z){"function"!=typeof b.read&&(b=L.wrap(b,{objectMode:!0}));const ie=function Be(b,z){return De.apply(this,arguments)}(b,z);return ie.stream=b,ie}function De(){return(De=H(function*(b,z){let Me,ie=d;function be(At){this===b?(ie(),ie=d):ie=At}b.on("readable",be);const qe=X(b,{writable:!1},At=>{Me=At?Ie(Me,At):null,ie(),ie=d});try{for(;;){const At=b.destroyed?null:b.read();if(null!==At)yield At;else{if(Me)throw Me;if(null===Me)return;yield C(new M(be))}}}catch(At){throw Me=Ie(Me,At),Me}finally{!Me&&!1===z?.destroyOnReturn||void 0!==Me&&!b._readableState.autoDestroy?(b.off("readable",be),qe()):ne.destroyer(b,null)}})).apply(this,arguments)}function et(b,z){if(0===z.length)return null;let ie;return z.objectMode?ie=z.buffer.shift():!b||b>=z.length?(ie=z.decoder?z.buffer.join(""):1===z.buffer.length?z.buffer.first():z.buffer.concat(z.length),z.buffer.clear()):ie=z.buffer.consume(b,z.decoder),ie}function Ke(b){const z=b._readableState;Q("endReadable",z.endEmitted),z.endEmitted||(z.ended=!0,N.nextTick(We,z,b))}function We(b,z){if(Q("endReadableNT",b.endEmitted,b.length),!b.errored&&!b.closeEmitted&&!b.endEmitted&&0===b.length)if(b.endEmitted=!0,z.emit("end"),z.writable&&!1===z.allowHalfOpen)N.nextTick(_t,z);else if(b.autoDestroy){const ie=z._writableState;(!ie||ie.autoDestroy&&(ie.finished||!1===ie.writable))&&z.destroy()}}function _t(b){b.writable&&!b.writableEnded&&!b.destroyed&&b.end()}let U;function w(){return void 0===U&&(U={}),U}L.prototype.destroy=ne.destroy,L.prototype._undestroy=ne.undestroy,L.prototype._destroy=function(b,z){z(b)},L.prototype[Z.captureRejectionSymbol]=function(b){this.destroy(b)},L.prototype.push=function(b,z){return Y(this,b,z,!1)},L.prototype.unshift=function(b,z){return Y(this,b,z,!0)},L.prototype.isPaused=function(){const b=this._readableState;return!0===b[x]||!1===b.flowing},L.prototype.setEncoding=function(b){const z=new P(b);this._readableState.decoder=z,this._readableState.encoding=this._readableState.decoder.encoding;const ie=this._readableState.buffer;let be="";for(const Me of ie)be+=z.write(Me);return ie.clear(),""!==be&&ie.push(be),this._readableState.length=be.length,this},L.prototype.read=function(b){Q("read",b),void 0===b?b=NaN:v(b)||(b=_(b,10));const z=this._readableState,ie=b;if(b>z.highWaterMark&&(z.highWaterMark=function Oe(b){if(b>1073741824)throw new f("size","<= 1GiB",b);return b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,++b}(b)),0!==b&&(z.emittedReadable=!1),0===b&&z.needReadable&&((0!==z.highWaterMark?z.length>=z.highWaterMark:z.length>0)||z.ended))return Q("read: emitReadable",z.length,z.ended),0===z.length&&z.ended?Ke(this):ye(this),null;if(0===(b=Ve(b,z))&&z.ended)return 0===z.length&&Ke(this),null;let Me,be=z.needReadable;if(Q("need readable",be),(0===z.length||z.length-b<z.highWaterMark)&&(be=!0,Q("length less than watermark",be)),z.ended||z.reading||z.destroyed||z.errored||!z.constructed)be=!1,Q("reading, ended or constructing",be);else if(be){Q("do read"),z.reading=!0,z.sync=!0,0===z.length&&(z.needReadable=!0);try{this._read(z.highWaterMark)}catch(qe){p(this,qe)}z.sync=!1,z.reading||(b=Ve(ie,z))}return Me=b>0?et(b,z):null,null===Me?(z.needReadable=z.length<=z.highWaterMark,b=0):(z.length-=b,z.multiAwaitDrain?z.awaitDrainWriters.clear():z.awaitDrainWriters=null),0===z.length&&(z.ended||(z.needReadable=!0),ie!==b&&z.ended&&Ke(this)),null!==Me&&!z.errorEmitted&&!z.closeEmitted&&(z.dataEmitted=!0,this.emit("data",Me)),Me},L.prototype._read=function(b){throw new a("_read()")},L.prototype.pipe=function(b,z){const ie=this,be=this._readableState;1===be.pipes.length&&(be.multiAwaitDrain||(be.multiAwaitDrain=!0,be.awaitDrainWriters=new F(be.awaitDrainWriters?[be.awaitDrainWriters]:[]))),be.pipes.push(b),Q("pipe count=%d opts=%j",be.pipes.length,z);const qe=z&&!1===z.end||b===N.stdout||b===N.stderr?xt:nt;function nt(){Q("onend"),b.end()}be.endEmitted?N.nextTick(qe):ie.once("end",qe),b.on("unpipe",function At(It,Qr){Q("onunpipe"),It===ie&&Qr&&!1===Qr.hasUnpiped&&(Qr.hasUnpiped=!0,function bt(){Q("cleanup"),b.removeListener("close",mt),b.removeListener("finish",Rr),rt&&b.removeListener("drain",rt),b.removeListener("error",it),b.removeListener("unpipe",At),ie.removeListener("end",nt),ie.removeListener("end",xt),ie.removeListener("data",Ft),St=!0,rt&&be.awaitDrainWriters&&(!b._writableState||b._writableState.needDrain)&&rt()}())});let rt,St=!1;function Mt(){St||(1===be.pipes.length&&be.pipes[0]===b?(Q("false write response, pause",0),be.awaitDrainWriters=b,be.multiAwaitDrain=!1):be.pipes.length>1&&be.pipes.includes(b)&&(Q("false write response, pause",be.awaitDrainWriters.size),be.awaitDrainWriters.add(b)),ie.pause()),rt||(rt=function de(b,z){return function(){const be=b._readableState;be.awaitDrainWriters===z?(Q("pipeOnDrain",1),be.awaitDrainWriters=null):be.multiAwaitDrain&&(Q("pipeOnDrain",be.awaitDrainWriters.size),be.awaitDrainWriters.delete(z)),(!be.awaitDrainWriters||0===be.awaitDrainWriters.size)&&b.listenerCount("data")&&b.resume()}}(ie,b),b.on("drain",rt))}function Ft(It){Q("ondata");const Qr=b.write(It);Q("dest.write",Qr),!1===Qr&&Mt()}function it(It){if(Q("onerror",It),xt(),b.removeListener("error",it),0===b.listenerCount("error")){const Qr=b._writableState||b._readableState;Qr&&!Qr.errorEmitted?p(b,It):b.emit("error",It)}}function mt(){b.removeListener("finish",Rr),xt()}function Rr(){Q("onfinish"),b.removeListener("close",mt),xt()}function xt(){Q("unpipe"),ie.unpipe(b)}return ie.on("data",Ft),W(b,"error",it),b.once("close",mt),b.once("finish",Rr),b.emit("pipe",ie),!0===b.writableNeedDrain?be.flowing&&Mt():be.flowing||(Q("pipe resume"),ie.resume()),b},L.prototype.unpipe=function(b){const z=this._readableState;if(0===z.pipes.length)return this;if(!b){const Me=z.pipes;z.pipes=[],this.pause();for(let qe=0;qe<Me.length;qe++)Me[qe].emit("unpipe",this,{hasUnpiped:!1});return this}const be=G(z.pipes,b);return-1===be||(z.pipes.splice(be,1),0===z.pipes.length&&this.pause(),b.emit("unpipe",this,{hasUnpiped:!1})),this},L.prototype.addListener=L.prototype.on=function(b,z){const ie=q.prototype.on.call(this,b,z),be=this._readableState;return"data"===b?(be.readableListening=this.listenerCount("readable")>0,!1!==be.flowing&&this.resume()):"readable"===b&&!be.endEmitted&&!be.readableListening&&(be.readableListening=be.needReadable=!0,be.flowing=!1,be.emittedReadable=!1,Q("on readable",be.length,be.reading),be.length?ye(this):be.reading||N.nextTick(re,this)),ie},L.prototype.off=L.prototype.removeListener=function(b,z){const ie=q.prototype.removeListener.call(this,b,z);return"readable"===b&&N.nextTick(se,this),ie},L.prototype.removeAllListeners=function(b){const z=q.prototype.removeAllListeners.apply(this,arguments);return("readable"===b||void 0===b)&&N.nextTick(se,this),z},L.prototype.resume=function(){const b=this._readableState;return b.flowing||(Q("resume"),b.flowing=!b.readableListening,function ce(b,z){z.resumeScheduled||(z.resumeScheduled=!0,N.nextTick(ue,b,z))}(this,b)),b[x]=!1,this},L.prototype.pause=function(){return Q("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Q("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[x]=!0,this},L.prototype.wrap=function(b){let z=!1;b.on("data",be=>{!this.push(be)&&b.pause&&(z=!0,b.pause())}),b.on("end",()=>{this.push(null)}),b.on("error",be=>{p(this,be)}),b.on("close",()=>{this.destroy()}),b.on("destroy",()=>{this.destroy()}),this._read=()=>{z&&b.resume&&(z=!1,b.resume())};const ie=D(b);for(let be=1;be<ie.length;be++){const Me=ie[be];void 0===this[Me]&&"function"==typeof b[Me]&&(this[Me]=b[Me].bind(b))}return this},L.prototype[k]=function(){return Ee(this)},L.prototype.iterator=function(b){return void 0!==b&&g(b,"options"),Ee(this,b)},T(L.prototype,{readable:{__proto__:null,get(){const b=this._readableState;return!(!b||!1===b.readable||b.destroyed||b.errorEmitted||b.endEmitted)},set(b){this._readableState&&(this._readableState.readable=!!b)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(b){this._readableState&&(this._readableState.flowing=b)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(b){this._readableState&&(this._readableState.destroyed=b)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),T(V.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[x]},set(b){this[x]=!!b}}}),L._fromList=et,L.from=function(b,z){return m(L,b,z)},L.fromWeb=function(b,z){return w().newStreamReadableFromReadableStream(b,z)},L.toWeb=function(b,z){return w().newReadableStreamFromStreamReadable(b,z)},L.wrap=function(b,z){var ie,be;return new L({objectMode:null===(ie=null!==(be=b.readableObjectMode)&&void 0!==be?be:b.objectMode)||void 0===ie||ie,...z,destroy(Me,qe){ne.destroyer(b,Me),qe(Me)}}).wrap(b)}},31081:(xe,O,I)=>{"use strict";const{MathFloor:C,NumberIsInteger:H}=I(43856),{ERR_INVALID_ARG_VALUE:N}=I(65109).codes;function v(_){return _?16:16384}xe.exports={getHighWaterMark:function B(_,T,D,$){const M=function G(_,T,D){return null!=_.highWaterMark?_.highWaterMark:T?_[D]:null}(T,$,D);if(null!=M){if(!H(M)||M<0)throw new N($?`options.${D}`:"options.highWaterMark",M);return C(M)}return v(_.objectMode)},getDefaultHighWaterMark:v}},66344:(xe,O,I)=>{"use strict";const{ObjectSetPrototypeOf:C,Symbol:H}=I(43856);xe.exports=_;const{ERR_METHOD_NOT_IMPLEMENTED:N}=I(65109).codes,G=I(97464),{getHighWaterMark:v}=I(31081);C(_.prototype,G.prototype),C(_,G);const B=H("kCallback");function _($){if(!(this instanceof _))return new _($);const M=$?v(this,$,"readableHighWaterMark",!0):null;0===M&&($={...$,highWaterMark:null,readableHighWaterMark:M,writableHighWaterMark:$.writableHighWaterMark||0}),G.call(this,$),this._readableState.sync=!1,this[B]=null,$&&("function"==typeof $.transform&&(this._transform=$.transform),"function"==typeof $.flush&&(this._flush=$.flush)),this.on("prefinish",D)}function T($){"function"!=typeof this._flush||this.destroyed?(this.push(null),$&&$()):this._flush((M,F)=>{M?$?$(M):this.destroy(M):(null!=F&&this.push(F),this.push(null),$&&$())})}function D(){this._final!==T&&T.call(this)}_.prototype._final=T,_.prototype._transform=function($,M,F){throw new N("_transform()")},_.prototype._write=function($,M,F){const k=this._readableState,j=this._writableState,Z=k.length;this._transform($,M,(q,W)=>{q?F(q):(null!=W&&this.push(W),j.ended||Z===k.length||k.length<k.highWaterMark?F():this[B]=F)})},_.prototype._read=function(){if(this[B]){const $=this[B];this[B]=null,$()}}},51233:(xe,O,I)=>{"use strict";const{Symbol:C,SymbolAsyncIterator:H,SymbolIterator:N,SymbolFor:G}=I(43856),v=C("kDestroyed"),B=C("kIsErrored"),_=C("kIsReadable"),T=C("kIsDisturbed"),D=G("nodejs.webstream.isClosedPromise"),$=G("nodejs.webstream.controllerErrorFunction");function M(p,V=!1){var L;return!(!p||"function"!=typeof p.pipe||"function"!=typeof p.on||V&&("function"!=typeof p.pause||"function"!=typeof p.resume)||p._writableState&&!1===(null===(L=p._readableState)||void 0===L?void 0:L.readable)||p._writableState&&!p._readableState)}function F(p){var V;return!(!p||"function"!=typeof p.write||"function"!=typeof p.on||p._readableState&&!1===(null===(V=p._writableState)||void 0===V?void 0:V.writable))}function j(p){return p&&(p._readableState||p._writableState||"function"==typeof p.write&&"function"==typeof p.on||"function"==typeof p.pipe&&"function"==typeof p.on)}function Z(p){return!(!p||j(p)||"function"!=typeof p.pipeThrough||"function"!=typeof p.getReader||"function"!=typeof p.cancel)}function q(p){return!(!p||j(p)||"function"!=typeof p.getWriter||"function"!=typeof p.abort)}function W(p){return!(!p||j(p)||"object"!=typeof p.readable||"object"!=typeof p.writable)}function X(p){if(!j(p))return null;const Y=p._writableState||p._readableState;return!!(p.destroyed||p[v]||null!=Y&&Y.destroyed)}function Q(p){if(!F(p))return null;if(!0===p.writableEnded)return!0;const V=p._writableState;return(null==V||!V.errored)&&("boolean"!=typeof V?.ended?null:V.ended)}function me(p,V){if(!M(p))return null;const L=p._readableState;return(null==L||!L.errored)&&("boolean"!=typeof L?.endEmitted?null:!!(L.endEmitted||!1===V&&!0===L.ended&&0===L.length))}function pe(p){return p&&null!=p[_]?p[_]:"boolean"!=typeof p?.readable?null:!X(p)&&M(p)&&p.readable&&!me(p)}function Ie(p){return"boolean"!=typeof p?.writable?null:!X(p)&&F(p)&&p.writable&&!Q(p)}function h(p){return"boolean"==typeof p._closed&&"boolean"==typeof p._defaultKeepAlive&&"boolean"==typeof p._removedConnection&&"boolean"==typeof p._removedContLen}function g(p){return"boolean"==typeof p._sent100&&h(p)}xe.exports={kDestroyed:v,isDisturbed:function m(p){var V;return!(!p||!(null!==(V=p[T])&&void 0!==V?V:p.readableDidRead||p.readableAborted))},kIsDisturbed:T,isErrored:function d(p){var V,L,Y,le,Se,Oe,Ve,Re,ye,ke;return!(!p||!(null!==(V=null!==(L=null!==(Y=null!==(le=null!==(Se=null!==(Oe=p[B])&&void 0!==Oe?Oe:p.readableErrored)&&void 0!==Se?Se:p.writableErrored)&&void 0!==le?le:null===(Ve=p._readableState)||void 0===Ve?void 0:Ve.errorEmitted)&&void 0!==Y?Y:null===(Re=p._writableState)||void 0===Re?void 0:Re.errorEmitted)&&void 0!==L?L:null===(ye=p._readableState)||void 0===ye?void 0:ye.errored)&&void 0!==V?V:null!==(ke=p._writableState)&&void 0!==ke&&ke.errored))},kIsErrored:B,isReadable:pe,kIsReadable:_,kIsClosedPromise:D,kControllerErrorFunction:$,isClosed:function l(p){if(!j(p))return null;if("boolean"==typeof p.closed)return p.closed;const V=p._writableState,L=p._readableState;return"boolean"==typeof V?.closed||"boolean"==typeof L?.closed?V?.closed||L?.closed:"boolean"==typeof p._closed&&h(p)?p._closed:null},isDestroyed:X,isDuplexNodeStream:function k(p){return!(!p||"function"!=typeof p.pipe||!p._readableState||"function"!=typeof p.on||"function"!=typeof p.write)},isFinished:function E(p,V){return j(p)?!!X(p)||!(!1!==V?.readable&&pe(p)||!1!==V?.writable&&Ie(p)):null},isIterable:function J(p,V){return null!=p&&(!0===V?"function"==typeof p[H]:!1===V?"function"==typeof p[N]:"function"==typeof p[H]||"function"==typeof p[N])},isReadableNodeStream:M,isReadableStream:Z,isReadableEnded:function ne(p){if(!M(p))return null;if(!0===p.readableEnded)return!0;const V=p._readableState;return!(!V||V.errored)&&("boolean"!=typeof V?.ended?null:V.ended)},isReadableFinished:me,isReadableErrored:function f(p){var V,L;return j(p)?p.readableErrored?p.readableErrored:null!==(V=null===(L=p._readableState)||void 0===L?void 0:L.errored)&&void 0!==V?V:null:null},isNodeStream:j,isWebStream:function K(p){return Z(p)||q(p)||W(p)},isWritable:Ie,isWritableNodeStream:F,isWritableStream:q,isWritableEnded:Q,isWritableFinished:function oe(p,V){if(!F(p))return null;if(!0===p.writableFinished)return!0;const L=p._writableState;return(null==L||!L.errored)&&("boolean"!=typeof L?.finished?null:!!(L.finished||!1===V&&!0===L.ended&&0===L.length))},isWritableErrored:function a(p){var V,L;return j(p)?p.writableErrored?p.writableErrored:null!==(V=null===(L=p._writableState)||void 0===L?void 0:L.errored)&&void 0!==V?V:null:null},isServerRequest:function x(p){var V;return"boolean"==typeof p._consuming&&"boolean"==typeof p._dumped&&void 0===(null===(V=p.req)||void 0===V?void 0:V.upgradeOrConnect)},isServerResponse:g,willEmitClose:function P(p){if(!j(p))return null;const Y=p._writableState||p._readableState;return!Y&&g(p)||!!(Y&&Y.autoDestroy&&Y.emitClose&&!1===Y.closed)},isTransformStream:W}},40258:(xe,O,I)=>{const C=I(40573),{ArrayPrototypeSlice:H,Error:N,FunctionPrototypeSymbolHasInstance:G,ObjectDefineProperty:v,ObjectDefineProperties:B,ObjectSetPrototypeOf:_,StringPrototypeToLowerCase:T,Symbol:D,SymbolHasInstance:$}=I(43856);xe.exports=g,g.WritableState=l;const{EventEmitter:M}=I(44356),F=I(2649).Stream,{Buffer:k}=I(89565),j=I(45078),{addAbortSignal:Z}=I(24785),{getHighWaterMark:q,getDefaultHighWaterMark:W}=I(31081),{ERR_INVALID_ARG_TYPE:K,ERR_METHOD_NOT_IMPLEMENTED:J,ERR_MULTIPLE_CALLBACK:X,ERR_STREAM_CANNOT_PIPE:Q,ERR_STREAM_DESTROYED:oe,ERR_STREAM_ALREADY_FINISHED:ne,ERR_STREAM_NULL_VALUES:me,ERR_STREAM_WRITE_AFTER_END:pe,ERR_UNKNOWN_ENCODING:Ie}=I(65109).codes,{errorOrDestroy:E}=j;function a(){}_(g.prototype,F.prototype),_(g,F);const f=D("kOnFinished");function l(de,se,re){"boolean"!=typeof re&&(re=se instanceof I(97464)),this.objectMode=!(!de||!de.objectMode),re&&(this.objectMode=this.objectMode||!(!de||!de.writableObjectMode)),this.highWaterMark=de?q(this,de,"writableHighWaterMark",re):W(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(de&&!1===de.decodeStrings),this.defaultEncoding=de&&de.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=p.bind(void 0,se),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,h(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!de||!1!==de.emitClose,this.autoDestroy=!de||!1!==de.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[f]=[]}function h(de){de.buffered=[],de.bufferedIndex=0,de.allBuffers=!0,de.allNoop=!0}function g(de){const se=this instanceof I(97464);if(!se&&!G(g,this))return new g(de);this._writableState=new l(de,this,se),de&&("function"==typeof de.write&&(this._write=de.write),"function"==typeof de.writev&&(this._writev=de.writev),"function"==typeof de.destroy&&(this._destroy=de.destroy),"function"==typeof de.final&&(this._final=de.final),"function"==typeof de.construct&&(this._construct=de.construct),de.signal&&Z(de.signal,this)),F.call(this,de),j.construct(this,()=>{const re=this._writableState;re.writing||le(this,re),Re(this,re)})}function x(de,se,re,ce){const ue=de._writableState;if("function"==typeof re)ce=re,re=ue.defaultEncoding;else{if(re){if("buffer"!==re&&!k.isEncoding(re))throw new Ie(re)}else re=ue.defaultEncoding;"function"!=typeof ce&&(ce=a)}if(null===se)throw new me;if(!ue.objectMode)if("string"==typeof se)!1!==ue.decodeStrings&&(se=k.from(se,re),re="buffer");else if(se instanceof k)re="buffer";else{if(!F._isUint8Array(se))throw new K("chunk",["string","Buffer","Uint8Array"],se);se=F._uint8ArrayToBuffer(se),re="buffer"}let ge;return ue.ending?ge=new pe:ue.destroyed&&(ge=new oe("write")),ge?(C.nextTick(ce,ge),E(de,ge,!0),ge):(ue.pendingcb++,function P(de,se,re,ce,ue){const ge=se.objectMode?1:re.length;se.length+=ge;const Ee=se.length<se.highWaterMark;return Ee||(se.needDrain=!0),se.writing||se.corked||se.errored||!se.constructed?(se.buffered.push({chunk:re,encoding:ce,callback:ue}),se.allBuffers&&"buffer"!==ce&&(se.allBuffers=!1),se.allNoop&&ue!==a&&(se.allNoop=!1)):(se.writelen=ge,se.writecb=ue,se.writing=!0,se.sync=!0,de._write(re,ce,se.onwrite),se.sync=!1),Ee&&!se.errored&&!se.destroyed}(de,ue,se,re,ce))}function m(de,se,re,ce,ue,ge,Ee){se.writelen=ce,se.writecb=Ee,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new oe("write")):re?de._writev(ue,se.onwrite):de._write(ue,ge,se.onwrite),se.sync=!1}function d(de,se,re,ce){--se.pendingcb,ce(re),Y(se),E(de,re)}function p(de,se){const re=de._writableState,ce=re.sync,ue=re.writecb;"function"==typeof ue?(re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0,se?(re.errored||(re.errored=se),de._readableState&&!de._readableState.errored&&(de._readableState.errored=se),ce?C.nextTick(d,de,re,se,ue):d(de,re,se,ue)):(re.buffered.length>re.bufferedIndex&&le(de,re),ce?null!==re.afterWriteTickInfo&&re.afterWriteTickInfo.cb===ue?re.afterWriteTickInfo.count++:(re.afterWriteTickInfo={count:1,cb:ue,stream:de,state:re},C.nextTick(V,re.afterWriteTickInfo)):L(de,re,1,ue))):E(de,new X)}function V({stream:de,state:se,count:re,cb:ce}){return se.afterWriteTickInfo=null,L(de,se,re,ce)}function L(de,se,re,ce){for(!se.ending&&!de.destroyed&&0===se.length&&se.needDrain&&(se.needDrain=!1,de.emit("drain"));re-- >0;)se.pendingcb--,ce();se.destroyed&&Y(se),Re(de,se)}function Y(de){if(de.writing)return;for(let ue=de.bufferedIndex;ue<de.buffered.length;++ue){var se;const{chunk:ge,callback:Ee}=de.buffered[ue];de.length-=de.objectMode?1:ge.length,Ee(null!==(se=de.errored)&&void 0!==se?se:new oe("write"))}const re=de[f].splice(0);for(let ue=0;ue<re.length;ue++){var ce;re[ue](null!==(ce=de.errored)&&void 0!==ce?ce:new oe("end"))}h(de)}function le(de,se){if(se.corked||se.bufferProcessing||se.destroyed||!se.constructed)return;const{buffered:re,bufferedIndex:ce,objectMode:ue}=se,ge=re.length-ce;if(!ge)return;let Ee=ce;if(se.bufferProcessing=!0,ge>1&&de._writev){se.pendingcb-=ge-1;const Be=se.allNoop?a:et=>{for(let Ke=Ee;Ke<re.length;++Ke)re[Ke].callback(et)},De=se.allNoop&&0===Ee?re:H(re,Ee);De.allBuffers=se.allBuffers,m(de,se,!0,se.length,De,"",Be),h(se)}else{do{const{chunk:Be,encoding:De,callback:et}=re[Ee];re[Ee++]=null,m(de,se,!1,ue?1:Be.length,Be,De,et)}while(Ee<re.length&&!se.writing);Ee===re.length?h(se):Ee>256?(re.splice(0,Ee),se.bufferedIndex=0):se.bufferedIndex=Ee}se.bufferProcessing=!1}function Se(de){return de.ending&&!de.destroyed&&de.constructed&&0===de.length&&!de.errored&&0===de.buffered.length&&!de.finished&&!de.writing&&!de.errorEmitted&&!de.closeEmitted}function Re(de,se,re){Se(se)&&(function Ve(de,se){!se.prefinished&&!se.finalCalled&&("function"!=typeof de._final||se.destroyed?(se.prefinished=!0,de.emit("prefinish")):(se.finalCalled=!0,function Oe(de,se){let re=!1;function ce(ue){if(re)E(de,ue??X());else if(re=!0,se.pendingcb--,ue){const ge=se[f].splice(0);for(let Ee=0;Ee<ge.length;Ee++)ge[Ee](ue);E(de,ue,se.sync)}else Se(se)&&(se.prefinished=!0,de.emit("prefinish"),se.pendingcb++,C.nextTick(ye,de,se))}se.sync=!0,se.pendingcb++;try{de._final(ce)}catch(ue){ce(ue)}se.sync=!1}(de,se)))}(de,se),0===se.pendingcb&&(re?(se.pendingcb++,C.nextTick((ce,ue)=>{Se(ue)?ye(ce,ue):ue.pendingcb--},de,se)):Se(se)&&(se.pendingcb++,ye(de,se))))}function ye(de,se){se.pendingcb--,se.finished=!0;const re=se[f].splice(0);for(let ce=0;ce<re.length;ce++)re[ce]();if(de.emit("finish"),se.autoDestroy){const ce=de._readableState;(!ce||ce.autoDestroy&&(ce.endEmitted||!1===ce.readable))&&de.destroy()}}l.prototype.getBuffer=function(){return H(this.buffered,this.bufferedIndex)},v(l.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),v(g,$,{__proto__:null,value:function(de){return!!G(this,de)||this===g&&de&&de._writableState instanceof l}}),g.prototype.pipe=function(){E(this,new Q)},g.prototype.write=function(de,se,re){return!0===x(this,de,se,re)},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){const de=this._writableState;de.corked&&(de.corked--,de.writing||le(this,de))},g.prototype.setDefaultEncoding=function(se){if("string"==typeof se&&(se=T(se)),!k.isEncoding(se))throw new Ie(se);return this._writableState.defaultEncoding=se,this},g.prototype._write=function(de,se,re){if(!this._writev)throw new J("_write()");this._writev([{chunk:de,encoding:se}],re)},g.prototype._writev=null,g.prototype.end=function(de,se,re){const ce=this._writableState;let ue;if("function"==typeof de?(re=de,de=null,se=null):"function"==typeof se&&(re=se,se=null),null!=de){const ge=x(this,de,se);ge instanceof N&&(ue=ge)}return ce.corked&&(ce.corked=1,this.uncork()),ue||(ce.errored||ce.ending?ce.finished?ue=new ne("end"):ce.destroyed&&(ue=new oe("end")):(ce.ending=!0,Re(this,ce,!0),ce.ended=!0)),"function"==typeof re&&(ue||ce.finished?C.nextTick(re,ue):ce[f].push(re)),this},B(g.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(de){this._writableState&&(this._writableState.destroyed=de)}},writable:{__proto__:null,get(){const de=this._writableState;return!(!de||!1===de.writable||de.destroyed||de.errored||de.ending||de.ended)},set(de){this._writableState&&(this._writableState.writable=!!de)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const de=this._writableState;return!!de&&!de.destroyed&&!de.ending&&de.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const ke=j.destroy;let ve;function _e(){return void 0===ve&&(ve={}),ve}g.prototype.destroy=function(de,se){const re=this._writableState;return!re.destroyed&&(re.bufferedIndex<re.buffered.length||re[f].length)&&C.nextTick(Y,re),ke.call(this,de,se),this},g.prototype._undestroy=j.undestroy,g.prototype._destroy=function(de,se){se(de)},g.prototype[M.captureRejectionSymbol]=function(de){this.destroy(de)},g.fromWeb=function(de,se){return _e().newStreamWritableFromWritableStream(de,se)},g.toWeb=function(de){return _e().newWritableStreamFromStreamWritable(de)}},44323:(xe,O,I)=>{"use strict";const{ArrayIsArray:C,ArrayPrototypeIncludes:H,ArrayPrototypeJoin:N,ArrayPrototypeMap:G,NumberIsInteger:v,NumberIsNaN:B,NumberMAX_SAFE_INTEGER:_,NumberMIN_SAFE_INTEGER:T,NumberParseInt:D,ObjectPrototypeHasOwnProperty:$,RegExpPrototypeExec:M,String:F,StringPrototypeToUpperCase:k,StringPrototypeTrim:j}=I(43856),{hideStackFrames:Z,codes:{ERR_SOCKET_BAD_PORT:q,ERR_INVALID_ARG_TYPE:W,ERR_INVALID_ARG_VALUE:K,ERR_OUT_OF_RANGE:J,ERR_UNKNOWN_SIGNAL:X}}=I(65109),{normalizeEncoding:Q}=I(55830),{isAsyncFunction:oe,isArrayBufferView:ne}=I(55830).types,me={},E=/^[0-7]+$/,l=Z((ge,Ee,Be=T,De=_)=>{if("number"!=typeof ge)throw new W(Ee,"number",ge);if(!v(ge))throw new J(Ee,"an integer",ge);if(ge<Be||ge>De)throw new J(Ee,`>= ${Be} && <= ${De}`,ge)}),h=Z((ge,Ee,Be=-2147483648,De=2147483647)=>{if("number"!=typeof ge)throw new W(Ee,"number",ge);if(!v(ge))throw new J(Ee,"an integer",ge);if(ge<Be||ge>De)throw new J(Ee,`>= ${Be} && <= ${De}`,ge)}),g=Z((ge,Ee,Be=!1)=>{if("number"!=typeof ge)throw new W(Ee,"number",ge);if(!v(ge))throw new J(Ee,"an integer",ge);const De=Be?1:0,et=4294967295;if(ge<De||ge>et)throw new J(Ee,`>= ${De} && <= ${et}`,ge)});function x(ge,Ee){if("string"!=typeof ge)throw new W(Ee,"string",ge)}const m=Z((ge,Ee,Be)=>{if(!H(Be,ge)){const et="must be one of: "+N(G(Be,Ke=>"string"==typeof Ke?`'${Ke}'`:F(Ke)),", ");throw new K(Ee,ge,et)}});function d(ge,Ee){if("boolean"!=typeof ge)throw new W(Ee,"boolean",ge)}function p(ge,Ee,Be){return null!=ge&&$(ge,Ee)?ge[Ee]:Be}const V=Z((ge,Ee,Be=null)=>{const De=p(Be,"allowArray",!1),et=p(Be,"allowFunction",!1);if(!p(Be,"nullable",!1)&&null===ge||!De&&C(ge)||"object"!=typeof ge&&(!et||"function"!=typeof ge))throw new W(Ee,"Object",ge)}),L=Z((ge,Ee)=>{if(null!=ge&&"object"!=typeof ge&&"function"!=typeof ge)throw new W(Ee,"a dictionary",ge)}),Y=Z((ge,Ee,Be=0)=>{if(!C(ge))throw new W(Ee,"Array",ge);if(ge.length<Be)throw new K(Ee,ge,`must be longer than ${Be}`)}),Ve=Z((ge,Ee="buffer")=>{if(!ne(ge))throw new W(Ee,["Buffer","TypedArray","DataView"],ge)}),ke=Z((ge,Ee)=>{if(void 0!==ge&&(null===ge||"object"!=typeof ge||!("aborted"in ge)))throw new W(Ee,"AbortSignal",ge)}),ve=Z((ge,Ee)=>{if("function"!=typeof ge)throw new W(Ee,"Function",ge)}),_e=Z((ge,Ee)=>{if("function"!=typeof ge||oe(ge))throw new W(Ee,"Function",ge)}),de=Z((ge,Ee)=>{if(void 0!==ge)throw new W(Ee,"undefined",ge)}),re=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(ge,Ee){if(typeof ge>"u"||!M(re,ge))throw new K(Ee,ge,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}xe.exports={isInt32:function pe(ge){return ge===(0|ge)},isUint32:function Ie(ge){return ge===ge>>>0},parseFileMode:function f(ge,Ee,Be){if(typeof ge>"u"&&(ge=Be),"string"==typeof ge){if(null===M(E,ge))throw new K(Ee,ge,"must be a 32-bit unsigned integer or an octal string");ge=D(ge,8)}return g(ge,Ee),ge},validateArray:Y,validateStringArray:function le(ge,Ee){Y(ge,Ee);for(let Be=0;Be<ge.length;Be++)x(ge[Be],`${Ee}[${Be}]`)},validateBooleanArray:function Se(ge,Ee){Y(ge,Ee);for(let Be=0;Be<ge.length;Be++)d(ge[Be],`${Ee}[${Be}]`)},validateBoolean:d,validateBuffer:Ve,validateDictionary:L,validateEncoding:function Re(ge,Ee){const Be=Q(Ee),De=ge.length;if("hex"===Be&&De%2!=0)throw new K("encoding",Ee,`is invalid for data of length ${De}`)},validateFunction:ve,validateInt32:h,validateInteger:l,validateNumber:function P(ge,Ee,Be=void 0,De){if("number"!=typeof ge)throw new W(Ee,"number",ge);if(null!=Be&&ge<Be||null!=De&&ge>De||(null!=Be||null!=De)&&B(ge))throw new J(Ee,`${null!=Be?`>= ${Be}`:""}${null!=Be&&null!=De?" && ":""}${null!=De?`<= ${De}`:""}`,ge)},validateObject:V,validateOneOf:m,validatePlainFunction:_e,validatePort:function ye(ge,Ee="Port",Be=!0){if("number"!=typeof ge&&"string"!=typeof ge||"string"==typeof ge&&0===j(ge).length||+ge!=+ge>>>0||ge>65535||0===ge&&!Be)throw new q(Ee,ge,Be);return 0|ge},validateSignalName:function Oe(ge,Ee="signal"){if(x(ge,Ee),void 0===me[ge])throw void 0!==me[k(ge)]?new X(ge+" (signals must use all capital letters)"):new X(ge)},validateString:x,validateUint32:g,validateUndefined:de,validateUnion:function se(ge,Ee,Be){if(!H(Be,ge))throw new W(Ee,`('${N(Be,"|")}')`,ge)},validateAbortSignal:ke,validateLinkHeaderValue:function ue(ge){if("string"==typeof ge)return ce(ge,"hints"),ge;if(C(ge)){const Ee=ge.length;let Be="";if(0===Ee)return Be;for(let De=0;De<Ee;De++){const et=ge[De];ce(et,"hints"),Be+=et,De!==Ee-1&&(Be+=", ")}return Be}throw new K("hints",ge,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},95424:(xe,O,I)=>{"use strict";const C=I(3052),H=I(19905),N=C.Readable.destroy;xe.exports=C.Readable,xe.exports._uint8ArrayToBuffer=C._uint8ArrayToBuffer,xe.exports._isUint8Array=C._isUint8Array,xe.exports.isDisturbed=C.isDisturbed,xe.exports.isErrored=C.isErrored,xe.exports.isReadable=C.isReadable,xe.exports.Readable=C.Readable,xe.exports.Writable=C.Writable,xe.exports.Duplex=C.Duplex,xe.exports.Transform=C.Transform,xe.exports.PassThrough=C.PassThrough,xe.exports.addAbortSignal=C.addAbortSignal,xe.exports.finished=C.finished,xe.exports.destroy=C.destroy,xe.exports.destroy=N,xe.exports.pipeline=C.pipeline,xe.exports.compose=C.compose,Object.defineProperty(C,"promises",{configurable:!0,enumerable:!0,get:()=>H}),xe.exports.Stream=C.Stream,xe.exports.default=xe.exports},65109:(xe,O,I)=>{"use strict";const{format:C,inspect:H,AggregateError:N}=I(55830),G=globalThis.AggregateError||N,v=Symbol("kIsNodeError"),B=["string","function","number","object","Function","Object","boolean","bigint","symbol"],_=/^([A-Z][a-z0-9]*)+$/,D={};function $(W,K){if(!W)throw new D.ERR_INTERNAL_ASSERTION(K)}function M(W){let K="",J=W.length;const X="-"===W[0]?1:0;for(;J>=X+4;J-=3)K=`_${W.slice(J-3,J)}${K}`;return`${W.slice(0,J)}${K}`}function k(W,K,J){J||(J=Error);class X extends J{constructor(...oe){super(function F(W,K,J){if("function"==typeof K)return $(K.length<=J.length,`Code: ${W}; The provided arguments length (${J.length}) does not match the required ones (${K.length}).`),K(...J);const X=(K.match(/%[dfijoOs]/g)||[]).length;return $(X===J.length,`Code: ${W}; The provided arguments length (${J.length}) does not match the required ones (${X}).`),0===J.length?K:C(K,...J)}(W,K,oe))}toString(){return`${this.name} [${W}]: ${this.message}`}}Object.defineProperties(X.prototype,{name:{value:J.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${W}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),X.prototype.code=W,X.prototype[v]=!0,D[W]=X}function j(W){return Object.defineProperty(W,"name",{value:"__node_internal_"+W.name}),W}class q extends Error{constructor(K="The operation was aborted",J=void 0){if(void 0!==J&&"object"!=typeof J)throw new D.ERR_INVALID_ARG_TYPE("options","Object",J);super(K,J),this.code="ABORT_ERR",this.name="AbortError"}}k("ERR_ASSERTION","%s",Error),k("ERR_INVALID_ARG_TYPE",(W,K,J)=>{$("string"==typeof W,"'name' must be a string"),Array.isArray(K)||(K=[K]);let X="The ";W.endsWith(" argument")?X+=`${W} `:X+=`"${W}" ${W.includes(".")?"property":"argument"} `,X+="must be ";const Q=[],oe=[],ne=[];for(const pe of K)$("string"==typeof pe,"All expected entries have to be of type string"),B.includes(pe)?Q.push(pe.toLowerCase()):_.test(pe)?oe.push(pe):($("object"!==pe,'The value "object" should be written as "Object"'),ne.push(pe));if(oe.length>0){const pe=Q.indexOf("object");-1!==pe&&(Q.splice(Q,pe,1),oe.push("Object"))}if(Q.length>0){switch(Q.length){case 1:X+=`of type ${Q[0]}`;break;case 2:X+=`one of type ${Q[0]} or ${Q[1]}`;break;default:{const pe=Q.pop();X+=`one of type ${Q.join(", ")}, or ${pe}`}}(oe.length>0||ne.length>0)&&(X+=" or ")}if(oe.length>0){switch(oe.length){case 1:X+=`an instance of ${oe[0]}`;break;case 2:X+=`an instance of ${oe[0]} or ${oe[1]}`;break;default:{const pe=oe.pop();X+=`an instance of ${oe.join(", ")}, or ${pe}`}}ne.length>0&&(X+=" or ")}switch(ne.length){case 0:break;case 1:ne[0].toLowerCase()!==ne[0]&&(X+="an "),X+=`${ne[0]}`;break;case 2:X+=`one of ${ne[0]} or ${ne[1]}`;break;default:{const pe=ne.pop();X+=`one of ${ne.join(", ")}, or ${pe}`}}if(null==J)X+=`. Received ${J}`;else if("function"==typeof J&&J.name)X+=`. Received function ${J.name}`;else if("object"==typeof J){var me;null!==(me=J.constructor)&&void 0!==me&&me.name?X+=`. Received an instance of ${J.constructor.name}`:X+=`. Received ${H(J,{depth:-1})}`}else{let pe=H(J,{colors:!1});pe.length>25&&(pe=`${pe.slice(0,25)}...`),X+=`. Received type ${typeof J} (${pe})`}return X},TypeError),k("ERR_INVALID_ARG_VALUE",(W,K,J="is invalid")=>{let X=H(K);return X.length>128&&(X=X.slice(0,128)+"..."),`The ${W.includes(".")?"property":"argument"} '${W}' ${J}. Received ${X}`},TypeError),k("ERR_INVALID_RETURN_VALUE",(W,K,J)=>{var X;return`Expected ${W} to be returned from the "${K}" function but got ${null!=J&&null!==(X=J.constructor)&&void 0!==X&&X.name?`instance of ${J.constructor.name}`:"type "+typeof J}.`},TypeError),k("ERR_MISSING_ARGS",(...W)=>{let K;$(W.length>0,"At least one arg needs to be specified");const J=W.length;switch(W=(Array.isArray(W)?W:[W]).map(X=>`"${X}"`).join(" or "),J){case 1:K+=`The ${W[0]} argument`;break;case 2:K+=`The ${W[0]} and ${W[1]} arguments`;break;default:{const X=W.pop();K+=`The ${W.join(", ")}, and ${X} arguments`}}return`${K} must be specified`},TypeError),k("ERR_OUT_OF_RANGE",(W,K,J)=>{let X;return $(K,'Missing "range" argument'),Number.isInteger(J)&&Math.abs(J)>2**32?X=M(String(J)):"bigint"==typeof J?(X=String(J),(J>2n**32n||J<-(2n**32n))&&(X=M(X)),X+="n"):X=H(J),`The value of "${W}" is out of range. It must be ${K}. Received ${X}`},RangeError),k("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),k("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),k("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),k("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),k("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),k("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),k("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),k("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),k("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),k("ERR_STREAM_WRITE_AFTER_END","write after end",Error),k("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),xe.exports={AbortError:q,aggregateTwoErrors:j(function Z(W,K){if(W&&K&&W!==K){if(Array.isArray(K.errors))return K.errors.push(W),K;const J=new G([K,W],K.message);return J.code=K.code,J}return W||K}),hideStackFrames:j,codes:D}},43856:xe=>{"use strict";xe.exports={ArrayIsArray:O=>Array.isArray(O),ArrayPrototypeIncludes:(O,I)=>O.includes(I),ArrayPrototypeIndexOf:(O,I)=>O.indexOf(I),ArrayPrototypeJoin:(O,I)=>O.join(I),ArrayPrototypeMap:(O,I)=>O.map(I),ArrayPrototypePop:(O,I)=>O.pop(I),ArrayPrototypePush:(O,I)=>O.push(I),ArrayPrototypeSlice:(O,I,C)=>O.slice(I,C),Error,FunctionPrototypeCall:(O,I,...C)=>O.call(I,...C),FunctionPrototypeSymbolHasInstance:(O,I)=>Function.prototype[Symbol.hasInstance].call(O,I),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(O,I)=>Object.defineProperties(O,I),ObjectDefineProperty:(O,I,C)=>Object.defineProperty(O,I,C),ObjectGetOwnPropertyDescriptor:(O,I)=>Object.getOwnPropertyDescriptor(O,I),ObjectKeys:O=>Object.keys(O),ObjectSetPrototypeOf:(O,I)=>Object.setPrototypeOf(O,I),Promise,PromisePrototypeCatch:(O,I)=>O.catch(I),PromisePrototypeThen:(O,I,C)=>O.then(I,C),PromiseReject:O=>Promise.reject(O),ReflectApply:Reflect.apply,RegExpPrototypeTest:(O,I)=>O.test(I),SafeSet:Set,String,StringPrototypeSlice:(O,I,C)=>O.slice(I,C),StringPrototypeToLowerCase:O=>O.toLowerCase(),StringPrototypeToUpperCase:O=>O.toUpperCase(),StringPrototypeTrim:O=>O.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(O,I,C)=>O.set(I,C),Uint8Array}},55830:(xe,O,I)=>{"use strict";var C=I(29293).default;const H=I(89565),N=Object.getPrototypeOf(C(function*(){})).constructor,G=globalThis.Blob||H.Blob,v=typeof G<"u"?function(T){return T instanceof G}:function(T){return!1};class B extends Error{constructor(T){if(!Array.isArray(T))throw new TypeError("Expected input to be an Array, got "+typeof T);let D="";for(let $=0;$<T.length;$++)D+=`    ${T[$].stack}\n`;super(D),this.name="AggregateError",this.errors=T}}xe.exports={AggregateError:B,kEmptyObject:Object.freeze({}),once(_){let T=!1;return function(...D){T||(T=!0,_.apply(this,D))}},createDeferredPromise:function(){let _,T;return{promise:new Promise(($,M)=>{_=$,T=M}),resolve:_,reject:T}},promisify:_=>new Promise((T,D)=>{_(($,...M)=>$?D($):T(...M))}),debuglog:()=>function(){},format:(_,...T)=>_.replace(/%([sdifj])/g,function(...[D,$]){const M=T.shift();return"f"===$?M.toFixed(6):"j"===$?JSON.stringify(M):"s"===$&&"object"==typeof M?`${M.constructor!==Object?M.constructor.name:""} {}`.trim():M.toString()}),inspect(_){switch(typeof _){case"string":if(_.includes("'")){if(!_.includes('"'))return`"${_}"`;if(!_.includes("`")&&!_.includes("${"))return`\`${_}\``}return`'${_}'`;case"number":return isNaN(_)?"NaN":Object.is(_,-0)?String(_):_;case"bigint":return`${String(_)}n`;case"boolean":case"undefined":return String(_);case"object":return"{}"}},types:{isAsyncFunction:_=>_ instanceof N,isArrayBufferView:_=>ArrayBuffer.isView(_)},isBlob:v},xe.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},3052:(xe,O,I)=>{const{Buffer:C}=I(89565),{ObjectDefineProperty:H,ObjectKeys:N,ReflectApply:G}=I(43856),{promisify:{custom:v}}=I(55830),{streamReturningOperators:B,promiseReturningOperators:_}=I(37325),{codes:{ERR_ILLEGAL_CONSTRUCTOR:T}}=I(65109),D=I(5464),{pipeline:$}=I(96208),{destroyer:M}=I(45078),F=I(44268),j=I(19905),Z=I(51233),q=xe.exports=I(2649).Stream;q.isDisturbed=Z.isDisturbed,q.isErrored=Z.isErrored,q.isReadable=Z.isReadable,q.Readable=I(29710);for(const J of N(B)){let Q=function(...oe){if(new.target)throw T();return q.Readable.from(G(X,this,oe))};const X=B[J];H(Q,"name",{__proto__:null,value:X.name}),H(Q,"length",{__proto__:null,value:X.length}),H(q.Readable.prototype,J,{__proto__:null,value:Q,enumerable:!1,configurable:!0,writable:!0})}for(const J of N(_)){let Q=function(...ne){if(new.target)throw T();return G(X,this,ne)};const X=_[J];H(Q,"name",{__proto__:null,value:X.name}),H(Q,"length",{__proto__:null,value:X.length}),H(q.Readable.prototype,J,{__proto__:null,value:Q,enumerable:!1,configurable:!0,writable:!0})}q.Writable=I(40258),q.Duplex=I(97464),q.Transform=I(66344),q.PassThrough=I(70874),q.pipeline=$;const{addAbortSignal:W}=I(24785);q.addAbortSignal=W,q.finished=F,q.destroy=M,q.compose=D,H(q,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>j}),H($,v,{__proto__:null,enumerable:!0,get:()=>j.pipeline}),H(F,v,{__proto__:null,enumerable:!0,get:()=>j.finished}),q.Stream=q,q._isUint8Array=function(X){return X instanceof Uint8Array},q._uint8ArrayToBuffer=function(X){return C.from(X.buffer,X.byteOffset,X.byteLength)}},19905:(xe,O,I)=>{"use strict";const{ArrayPrototypePop:C,Promise:H}=I(43856),{isIterable:N,isNodeStream:G,isWebStream:v}=I(51233),{pipelineImpl:B}=I(96208),{finished:_}=I(44268);I(3052),xe.exports={finished:_,pipeline:function T(...D){return new H(($,M)=>{let F,k;const j=D[D.length-1];if(j&&"object"==typeof j&&!G(j)&&!N(j)&&!v(j)){const Z=C(D);F=Z.signal,k=Z.end}B(D,(Z,q)=>{Z?M(Z):$(q)},{signal:F,end:k})})}}},37477:(xe,O,I)=>{O.Level=I(23963).BrowserLevel},62108:xe=>{var O=1e3,I=60*O,C=60*I,H=24*C,N=7*H;function T(D,$,M,F){var k=$>=1.5*M;return Math.round(D/M)+" "+F+(k?"s":"")}xe.exports=function(D,$){$=$||{};var M=typeof D;if("string"===M&&D.length>0)return function v(D){if(!((D=String(D)).length>100)){var $=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(D);if($){var M=parseFloat($[1]);switch(($[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*M;case"weeks":case"week":case"w":return M*N;case"days":case"day":case"d":return M*H;case"hours":case"hour":case"hrs":case"hr":case"h":return M*C;case"minutes":case"minute":case"mins":case"min":case"m":return M*I;case"seconds":case"second":case"secs":case"sec":case"s":return M*O;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return M;default:return}}}}(D);if("number"===M&&isFinite(D))return $.long?function _(D){var $=Math.abs(D);return $>=H?T(D,$,H,"day"):$>=C?T(D,$,C,"hour"):$>=I?T(D,$,I,"minute"):$>=O?T(D,$,O,"second"):D+" ms"}(D):function B(D){var $=Math.abs(D);return $>=H?Math.round(D/H)+"d":$>=C?Math.round(D/C)+"h":$>=I?Math.round(D/I)+"m":$>=O?Math.round(D/O)+"s":D+"ms"}(D);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(D))}},9465:xe=>{"use strict";const{AbortController:O,AbortSignal:I}=typeof self<"u"?self:typeof window<"u"?window:void 0;xe.exports=O,xe.exports.AbortSignal=I,xe.exports.default=O},91463:(xe,O,I)=>{"use strict";const{fromCallback:C}=I(42381),H=I(61747),{getCallback:N,getOptions:G}=I(10475),v=Symbol("promise"),B=Symbol("status"),_=Symbol("operations"),T=Symbol("finishClose"),D=Symbol("closeCallbacks");O.AbstractChainedBatch=class ${constructor(F){if("object"!=typeof F||null===F)throw new TypeError("The first argument must be an abstract-level database, received "+(null===F?"null":typeof F));this[_]=[],this[D]=[],this[B]="open",this[T]=this[T].bind(this),this.db=F,this.db.attachResource(this),this.nextTick=F.nextTick}get length(){return this[_].length}put(F,k,j){if("open"!==this[B])throw new H("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const Z=this.db._checkKey(F)||this.db._checkValue(k);if(Z)throw Z;const q=j&&null!=j.sublevel?j.sublevel:this.db,W=j,K=q.keyEncoding(j&&j.keyEncoding),J=q.valueEncoding(j&&j.valueEncoding),X=K.format;j={...j,keyEncoding:X,valueEncoding:J.format},q!==this.db&&(j.sublevel=null);const Q=q.prefixKey(K.encode(F),X),oe=J.encode(k);return this._put(Q,oe,j),this[_].push({...W,type:"put",key:F,value:k}),this}_put(F,k,j){}del(F,k){if("open"!==this[B])throw new H("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const j=this.db._checkKey(F);if(j)throw j;const Z=k&&null!=k.sublevel?k.sublevel:this.db,q=k,W=Z.keyEncoding(k&&k.keyEncoding),K=W.format;return k={...k,keyEncoding:K},Z!==this.db&&(k.sublevel=null),this._del(Z.prefixKey(W.encode(F),K),k),this[_].push({...q,type:"del",key:F}),this}_del(F,k){}clear(){if("open"!==this[B])throw new H("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[_]=[],this}_clear(){}write(F,k){return k=N(F,k),k=C(k,v),F=G(F),"open"!==this[B]?this.nextTick(k,new H("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(k):(this[B]="writing",this._write(F,j=>{this[B]="closing",this[D].push(()=>k(j)),j||this.db.emit("batch",this[_]),this._close(this[T])})),k[v]}_write(F,k){}close(F){return F=C(F,v),"closing"===this[B]?this[D].push(F):"closed"===this[B]?this.nextTick(F):(this[D].push(F),"writing"!==this[B]&&(this[B]="closing",this._close(this[T]))),F[v]}_close(F){this.nextTick(F)}[T](){this[B]="closed",this.db.detachResource(this);const F=this[D];this[D]=[];for(const k of F)k()}}},63294:(xe,O,I)=>{"use strict";var C=I(53344).default,H=I(42958).default;const{fromCallback:N}=I(42381),G=I(61747),{getOptions:v,getCallback:B}=I(10475),_=Symbol("promise"),T=Symbol("callback"),D=Symbol("working"),$=Symbol("handleOne"),M=Symbol("handleMany"),F=Symbol("autoClose"),k=Symbol("finishWork"),j=Symbol("returnMany"),Z=Symbol("closing"),q=Symbol("handleClose"),W=Symbol("closed"),K=Symbol("closeCallbacks"),J=Symbol("keyEncoding"),X=Symbol("valueEncoding"),Q=Symbol("abortOnClose"),oe=Symbol("legacy"),ne=Symbol("keys"),me=Symbol("values"),pe=Symbol("limit"),Ie=Symbol("count"),E=Object.freeze({}),a=()=>{};let f=!1;class l{constructor(d,p,V){if("object"!=typeof d||null===d)throw new TypeError("The first argument must be an abstract-level database, received "+(null===d?"null":typeof d));if("object"!=typeof p||null===p)throw new TypeError("The second argument must be an options object");this[W]=!1,this[K]=[],this[D]=!1,this[Z]=!1,this[F]=!1,this[T]=null,this[$]=this[$].bind(this),this[M]=this[M].bind(this),this[q]=this[q].bind(this),this[J]=p[J],this[X]=p[X],this[oe]=V,this[pe]=Number.isInteger(p.limit)&&p.limit>=0?p.limit:1/0,this[Ie]=0,this[Q]=!!p.abortOnClose,this.db=d,this.db.attachResource(this),this.nextTick=d.nextTick}get count(){return this[Ie]}get limit(){return this[pe]}next(d){let p;if(void 0===d)p=new Promise((V,L)=>{d=(Y,le,Se)=>{Y?L(Y):this[oe]?void 0===le&&void 0===Se?V():V([le,Se]):V(le)}});else if("function"!=typeof d)throw new TypeError("Callback must be a function");return this[Z]?this.nextTick(d,new G("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[D]?this.nextTick(d,new G("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[D]=!0,this[T]=d,this[Ie]>=this[pe]?this.nextTick(this[$],null):this._next(this[$])),p}_next(d){this.nextTick(d)}nextv(d,p,V){return V=B(p,V),V=N(V,_),p=v(p,E),Number.isInteger(d)?(this[Z]?this.nextTick(V,new G("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[D]?this.nextTick(V,new G("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(d<1&&(d=1),this[pe]<1/0&&(d=Math.min(d,this[pe]-this[Ie])),this[D]=!0,this[T]=V,d<=0?this.nextTick(this[M],null,[]):this._nextv(d,p,this[M])),V[_]):(this.nextTick(V,new TypeError("The first argument 'size' must be an integer")),V[_])}_nextv(d,p,V){const L=[],Y=(le,Se,Oe)=>le?V(le):(this[oe]?void 0===Se&&void 0===Oe:void 0===Se)?V(null,L):(L.push(this[oe]?[Se,Oe]:Se),void(L.length===d?V(null,L):this._next(Y)));this._next(Y)}all(d,p){return p=B(d,p),p=N(p,_),d=v(d,E),this[Z]?this.nextTick(p,new G("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[D]?this.nextTick(p,new G("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[D]=!0,this[T]=p,this[F]=!0,this[Ie]>=this[pe]?this.nextTick(this[M],null,[]):this._all(d,this[M])),p[_]}_all(d,p){let V=this[Ie];const L=[],Y=()=>{const Se=this[pe]<1/0?Math.min(1e3,this[pe]-V):1e3;Se<=0?this.nextTick(p,null,L):this._nextv(Se,E,le)},le=(Se,Oe)=>{Se?p(Se):0===Oe.length?p(null,L):(L.push.apply(L,Oe),V+=Oe.length,Y())};Y()}[k](){const d=this[T];return this[Q]&&null===d?a:(this[D]=!1,this[T]=null,this[Z]&&this._close(this[q]),d)}[j](d,p,V){this[F]?this.close(d.bind(null,p,V)):d(p,V)}seek(d,p){if(p=v(p,E),!this[Z]){if(this[D])throw new G("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const V=this.db.keyEncoding(p.keyEncoding||this[J]),L=V.format;p.keyEncoding!==L&&(p={...p,keyEncoding:L});const Y=this.db.prefixKey(V.encode(d),L);this._seek(Y,p)}}}_seek(d,p){throw new G("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(d){return d=N(d,_),this[W]?this.nextTick(d):this[Z]?this[K].push(d):(this[Z]=!0,this[K].push(d),this[D]?this[Q]&&this[k]()(new G("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[q])),d[_]}_close(d){this.nextTick(d)}[q](){this[W]=!0,this.db.detachResource(this);const d=this[K];this[K]=[];for(const p of d)p()}[Symbol.asyncIterator](){var d=this;return H(function*(){try{let p;for(;void 0!==(p=yield C(d.next()));)yield p}finally{d[W]||(yield C(d.close()))}})()}}class h extends l{constructor(d,p){super(d,p,!0),this[ne]=!1!==p.keys,this[me]=!1!==p.values}[$](d,p,V){const L=this[k]();if(d)return L(d);try{p=this[ne]&&void 0!==p?this[J].decode(p):void 0,V=this[me]&&void 0!==V?this[X].decode(V):void 0}catch(Y){return L(new P("entry",Y))}void 0===p&&void 0===V||this[Ie]++,L(null,p,V)}[M](d,p){const V=this[k]();if(d)return this[j](V,d);try{for(const L of p){const Y=L[0],le=L[1];L[0]=this[ne]&&void 0!==Y?this[J].decode(Y):void 0,L[1]=this[me]&&void 0!==le?this[X].decode(le):void 0}}catch(L){return this[j](V,new P("entries",L))}this[Ie]+=p.length,this[j](V,null,p)}end(d){return!f&&typeof console<"u"&&(f=!0,console.warn(new G("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(d)}}class P extends G{constructor(d,p){super(`Iterator could not decode ${d}`,{code:"LEVEL_DECODE_ERROR",cause:p})}}for(const m of["_ended property","_nexting property","_end method"])Object.defineProperty(h.prototype,m.split(" ")[0],{get(){throw new G(`The ${m} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new G(`The ${m} has been removed`,{code:"LEVEL_LEGACY"})}});h.keyEncoding=J,h.valueEncoding=X,O.AbstractIterator=h,O.AbstractKeyIterator=class g extends l{constructor(d,p){super(d,p,!1)}[$](d,p){const V=this[k]();if(d)return V(d);try{p=void 0!==p?this[J].decode(p):void 0}catch(L){return V(new P("key",L))}void 0!==p&&this[Ie]++,V(null,p)}[M](d,p){const V=this[k]();if(d)return this[j](V,d);try{for(let L=0;L<p.length;L++){const Y=p[L];p[L]=void 0!==Y?this[J].decode(Y):void 0}}catch(L){return this[j](V,new P("keys",L))}this[Ie]+=p.length,this[j](V,null,p)}},O.AbstractValueIterator=class x extends l{constructor(d,p){super(d,p,!1)}[$](d,p){const V=this[k]();if(d)return V(d);try{p=void 0!==p?this[X].decode(p):void 0}catch(L){return V(new P("value",L))}void 0!==p&&this[Ie]++,V(null,p)}[M](d,p){const V=this[k]();if(d)return this[j](V,d);try{for(let L=0;L<p.length;L++){const Y=p[L];p[L]=void 0!==Y?this[X].decode(Y):void 0}}catch(L){return this[j](V,new P("values",L))}this[Ie]+=p.length,this[j](V,null,p)}}},83764:(xe,O,I)=>{"use strict";const{supports:C}=I(89061),{Transcoder:H}=I(25006),{EventEmitter:N}=I(44356),{fromCallback:G}=I(42381),v=I(61747),{AbstractIterator:B}=I(63294),{DefaultKeyIterator:_,DefaultValueIterator:T}=I(48335),{DeferredIterator:D,DeferredKeyIterator:$,DeferredValueIterator:M}=I(92745),{DefaultChainedBatch:F}=I(45776),{getCallback:k,getOptions:j}=I(10475),Z=I(4287),q=Symbol("promise"),W=Symbol("landed"),K=Symbol("resources"),J=Symbol("closeResources"),X=Symbol("operations"),Q=Symbol("undefer"),oe=Symbol("deferOpen"),ne=Symbol("options"),me=Symbol("status"),pe=Symbol("defaultOptions"),Ie=Symbol("transcoder"),E=Symbol("keyEncoding"),a=Symbol("valueEncoding"),f=()=>{};class l extends N{constructor(m,d){if(super(),"object"!=typeof m||null===m)throw new TypeError("The first argument 'manifest' must be an object");d=j(d);const{keyEncoding:p,valueEncoding:V,passive:L,...Y}=d;this[K]=new Set,this[X]=[],this[oe]=!0,this[ne]=Y,this[me]="opening",this.supports=C(m,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==m.snapshots,permanence:!1!==m.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:m.encodings||{},events:Object.assign({},m.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Ie]=new H(x(this)),this[E]=this[Ie].encoding(p||"utf8"),this[a]=this[Ie].encoding(V||"utf8");for(const le of this[Ie].encodings())this.supports.encodings[le.commonName]||(this.supports.encodings[le.commonName]=!0);this[pe]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[E].commonName,valueEncoding:this[a].commonName}),key:Object.freeze({keyEncoding:this[E].commonName})},this.nextTick(()=>{this[oe]&&this.open({passive:!1},f)})}get status(){return this[me]}keyEncoding(m){return this[Ie].encoding(m??this[E])}valueEncoding(m){return this[Ie].encoding(m??this[a])}open(m,d){d=k(m,d),d=G(d,q),(m={...this[ne],...j(m)}).createIfMissing=!1!==m.createIfMissing,m.errorIfExists=!!m.errorIfExists;const p=V=>{"closing"===this[me]||"opening"===this[me]?this.once(W,V?()=>p(V):p):"open"!==this[me]?d(new v("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:V})):d()};return m.passive?"opening"===this[me]?this.once(W,p):this.nextTick(p):"closed"===this[me]||this[oe]?(this[oe]=!1,this[me]="opening",this.emit("opening"),this._open(m,V=>{if(V)return this[me]="closed",this[J](()=>{this.emit(W),p(V)}),void this[Q]();this[me]="open",this[Q](),this.emit(W),"open"===this[me]&&this.emit("open"),"open"===this[me]&&this.emit("ready"),p()})):"open"===this[me]?this.nextTick(p):this.once(W,()=>this.open(m,d)),d[q]}_open(m,d){this.nextTick(d)}close(m){m=G(m,q);const d=p=>{"opening"===this[me]||"closing"===this[me]?this.once(W,p?d(p):d):"closed"!==this[me]?m(new v("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:p})):m()};if("open"===this[me]){this[me]="closing",this.emit("closing");const p=V=>{this[me]="open",this[Q](),this.emit(W),d(V)};this[J](()=>{this._close(V=>{if(V)return p(V);this[me]="closed",this[Q](),this.emit(W),"closed"===this[me]&&this.emit("closed"),d()})})}else"closed"===this[me]?this.nextTick(d):this.once(W,()=>this.close(m));return m[q]}[J](m){if(0===this[K].size)return this.nextTick(m);let d=this[K].size,p=!0;const V=()=>{0==--d&&(p?this.nextTick(m):m())};for(const L of this[K])L.close(V);p=!1,this[K].clear()}_close(m){this.nextTick(m)}get(m,d,p){if(p=k(d,p),p=G(p,q),d=j(d,this[pe].entry),"opening"===this[me])return this.defer(()=>this.get(m,d,p)),p[q];if(g(this,p))return p[q];const V=this._checkKey(m);if(V)return this.nextTick(p,V),p[q];const L=this.keyEncoding(d.keyEncoding),Y=this.valueEncoding(d.valueEncoding),le=L.format,Se=Y.format;return(d.keyEncoding!==le||d.valueEncoding!==Se)&&(d=Object.assign({},d,{keyEncoding:le,valueEncoding:Se})),this._get(this.prefixKey(L.encode(m),le),d,(Oe,Ve)=>{if(Oe)return("LEVEL_NOT_FOUND"===Oe.code||Oe.notFound||/NotFound/i.test(Oe))&&(Oe.code||(Oe.code="LEVEL_NOT_FOUND"),Oe.notFound||(Oe.notFound=!0),Oe.status||(Oe.status=404)),p(Oe);try{Ve=Y.decode(Ve)}catch(Re){return p(new v("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:Re}))}p(null,Ve)}),p[q]}_get(m,d,p){this.nextTick(p,new Error("NotFound"))}getMany(m,d,p){if(p=k(d,p),p=G(p,q),d=j(d,this[pe].entry),"opening"===this[me])return this.defer(()=>this.getMany(m,d,p)),p[q];if(g(this,p))return p[q];if(!Array.isArray(m))return this.nextTick(p,new TypeError("The first argument 'keys' must be an array")),p[q];if(0===m.length)return this.nextTick(p,null,[]),p[q];const V=this.keyEncoding(d.keyEncoding),L=this.valueEncoding(d.valueEncoding),Y=V.format,le=L.format;(d.keyEncoding!==Y||d.valueEncoding!==le)&&(d=Object.assign({},d,{keyEncoding:Y,valueEncoding:le}));const Se=new Array(m.length);for(let Oe=0;Oe<m.length;Oe++){const Ve=m[Oe],Re=this._checkKey(Ve);if(Re)return this.nextTick(p,Re),p[q];Se[Oe]=this.prefixKey(V.encode(Ve),Y)}return this._getMany(Se,d,(Oe,Ve)=>{if(Oe)return p(Oe);try{for(let Re=0;Re<Ve.length;Re++)void 0!==Ve[Re]&&(Ve[Re]=L.decode(Ve[Re]))}catch(Re){return p(new v(`Could not decode one or more of ${Ve.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:Re}))}p(null,Ve)}),p[q]}_getMany(m,d,p){this.nextTick(p,null,new Array(m.length).fill(void 0))}put(m,d,p,V){if(V=k(p,V),V=G(V,q),p=j(p,this[pe].entry),"opening"===this[me])return this.defer(()=>this.put(m,d,p,V)),V[q];if(g(this,V))return V[q];const L=this._checkKey(m)||this._checkValue(d);if(L)return this.nextTick(V,L),V[q];const Y=this.keyEncoding(p.keyEncoding),le=this.valueEncoding(p.valueEncoding),Se=Y.format,Oe=le.format;(p.keyEncoding!==Se||p.valueEncoding!==Oe)&&(p=Object.assign({},p,{keyEncoding:Se,valueEncoding:Oe}));const Ve=this.prefixKey(Y.encode(m),Se),Re=le.encode(d);return this._put(Ve,Re,p,ye=>{if(ye)return V(ye);this.emit("put",m,d),V()}),V[q]}_put(m,d,p,V){this.nextTick(V)}del(m,d,p){if(p=k(d,p),p=G(p,q),d=j(d,this[pe].key),"opening"===this[me])return this.defer(()=>this.del(m,d,p)),p[q];if(g(this,p))return p[q];const V=this._checkKey(m);if(V)return this.nextTick(p,V),p[q];const L=this.keyEncoding(d.keyEncoding),Y=L.format;return d.keyEncoding!==Y&&(d=Object.assign({},d,{keyEncoding:Y})),this._del(this.prefixKey(L.encode(m),Y),d,le=>{if(le)return p(le);this.emit("del",m),p()}),p[q]}_del(m,d,p){this.nextTick(p)}batch(m,d,p){if(!arguments.length){if("opening"===this[me])return new F(this);if("open"!==this[me])throw new v("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(p="function"==typeof m?m:k(d,p),p=G(p,q),d=j(d,this[pe].empty),"opening"===this[me])return this.defer(()=>this.batch(m,d,p)),p[q];if(g(this,p))return p[q];if(!Array.isArray(m))return this.nextTick(p,new TypeError("The first argument 'operations' must be an array")),p[q];if(0===m.length)return this.nextTick(p),p[q];const V=new Array(m.length),{keyEncoding:L,valueEncoding:Y,...le}=d;for(let Se=0;Se<m.length;Se++){if("object"!=typeof m[Se]||null===m[Se])return this.nextTick(p,new TypeError("A batch operation must be an object")),p[q];const Oe=Object.assign({},m[Se]);if("put"!==Oe.type&&"del"!==Oe.type)return this.nextTick(p,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),p[q];const Ve=this._checkKey(Oe.key);if(Ve)return this.nextTick(p,Ve),p[q];const Re=null!=Oe.sublevel?Oe.sublevel:this,ye=Re.keyEncoding(Oe.keyEncoding||L),ke=ye.format;if(Oe.key=Re.prefixKey(ye.encode(Oe.key),ke),Oe.keyEncoding=ke,"put"===Oe.type){const ve=this._checkValue(Oe.value);if(ve)return this.nextTick(p,ve),p[q];const _e=Re.valueEncoding(Oe.valueEncoding||Y);Oe.value=_e.encode(Oe.value),Oe.valueEncoding=_e.format}Re!==this&&(Oe.sublevel=null),V[Se]=Oe}return this._batch(V,le,Se=>{if(Se)return p(Se);this.emit("batch",m),p()}),p[q]}_batch(m,d,p){this.nextTick(p)}sublevel(m,d){return this._sublevel(m,h.defaults(d))}_sublevel(m,d){return new h(this,m,d)}prefixKey(m,d){return m}clear(m,d){if(d=k(m,d),d=G(d,q),m=j(m,this[pe].empty),"opening"===this[me])return this.defer(()=>this.clear(m,d)),d[q];if(g(this,d))return d[q];const p=m,V=this.keyEncoding(m.keyEncoding);return(m=Z(m,V)).keyEncoding=V.format,0===m.limit?this.nextTick(d):this._clear(m,L=>{if(L)return d(L);this.emit("clear",p),d()}),d[q]}_clear(m,d){this.nextTick(d)}iterator(m){const d=this.keyEncoding(m&&m.keyEncoding),p=this.valueEncoding(m&&m.valueEncoding);if((m=Z(m,d)).keys=!1!==m.keys,m.values=!1!==m.values,m[B.keyEncoding]=d,m[B.valueEncoding]=p,m.keyEncoding=d.format,m.valueEncoding=p.format,"opening"===this[me])return new D(this,m);if("open"!==this[me])throw new v("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(m)}_iterator(m){return new B(this,m)}keys(m){const d=this.keyEncoding(m&&m.keyEncoding),p=this.valueEncoding(m&&m.valueEncoding);if((m=Z(m,d))[B.keyEncoding]=d,m[B.valueEncoding]=p,m.keyEncoding=d.format,m.valueEncoding=p.format,"opening"===this[me])return new $(this,m);if("open"!==this[me])throw new v("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(m)}_keys(m){return new _(this,m)}values(m){const d=this.keyEncoding(m&&m.keyEncoding),p=this.valueEncoding(m&&m.valueEncoding);if((m=Z(m,d))[B.keyEncoding]=d,m[B.valueEncoding]=p,m.keyEncoding=d.format,m.valueEncoding=p.format,"opening"===this[me])return new M(this,m);if("open"!==this[me])throw new v("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(m)}_values(m){return new T(this,m)}defer(m){if("function"!=typeof m)throw new TypeError("The first argument must be a function");this[X].push(m)}[Q](){if(0===this[X].length)return;const m=this[X];this[X]=[];for(const d of m)d()}attachResource(m){if("object"!=typeof m||null===m||"function"!=typeof m.close)throw new TypeError("The first argument must be a resource object");this[K].add(m)}detachResource(m){this[K].delete(m)}_chainedBatch(){return new F(this)}_checkKey(m){if(null==m)return new v("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(m){if(null==m)return new v("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}l.prototype.nextTick=I(24585);const{AbstractSublevel:h}=I(25416)({AbstractLevel:l});O.AbstractLevel=l,O.AbstractSublevel=h;const g=function(P,m){return"open"!==P[me]&&(P.nextTick(m,new v("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},x=function(P){return Object.keys(P.supports.encodings).filter(m=>!!P.supports.encodings[m])}},75929:(xe,O,I)=>{"use strict";O.AbstractLevel=I(83764).AbstractLevel,O.AbstractSublevel=I(83764).AbstractSublevel,O.AbstractIterator=I(63294).AbstractIterator,O.AbstractKeyIterator=I(63294).AbstractKeyIterator,O.AbstractValueIterator=I(63294).AbstractValueIterator,O.AbstractChainedBatch=I(91463).AbstractChainedBatch},47519:(xe,O,I)=>{"use strict";const{AbstractIterator:C,AbstractKeyIterator:H,AbstractValueIterator:N}=I(63294),G=Symbol("unfix"),v=Symbol("iterator"),B=Symbol("handleOne"),_=Symbol("handleMany"),T=Symbol("callback");class D extends C{constructor(k,j,Z,q){super(k,j),this[v]=Z,this[G]=q,this[B]=this[B].bind(this),this[_]=this[_].bind(this),this[T]=null}[B](k,j,Z){const q=this[T];if(k)return q(k);void 0!==j&&(j=this[G](j)),q(k,j,Z)}[_](k,j){const Z=this[T];if(k)return Z(k);for(const q of j){const W=q[0];void 0!==W&&(q[0]=this[G](W))}Z(k,j)}}class $ extends H{constructor(k,j,Z,q){super(k,j),this[v]=Z,this[G]=q,this[B]=this[B].bind(this),this[_]=this[_].bind(this),this[T]=null}[B](k,j){const Z=this[T];if(k)return Z(k);void 0!==j&&(j=this[G](j)),Z(k,j)}[_](k,j){const Z=this[T];if(k)return Z(k);for(let q=0;q<j.length;q++){const W=j[q];void 0!==W&&(j[q]=this[G](W))}Z(k,j)}}class M extends N{constructor(k,j,Z){super(k,j),this[v]=Z}}for(const F of[D,$])F.prototype._next=function(k){this[T]=k,this[v].next(this[B])},F.prototype._nextv=function(k,j,Z){this[T]=Z,this[v].nextv(k,j,this[_])},F.prototype._all=function(k,j){this[T]=j,this[v].all(k,this[_])};for(const F of[M])F.prototype._next=function(k){this[v].next(k)},F.prototype._nextv=function(k,j,Z){this[v].nextv(k,j,Z)},F.prototype._all=function(k,j){this[v].all(k,j)};for(const F of[D,$,M])F.prototype._seek=function(k,j){this[v].seek(k,j)},F.prototype._close=function(k){this[v].close(k)};O.AbstractSublevelIterator=D,O.AbstractSublevelKeyIterator=$,O.AbstractSublevelValueIterator=M},25416:(xe,O,I)=>{"use strict";const C=I(61747),{Buffer:H}=I(1067)||{},{AbstractSublevelIterator:N,AbstractSublevelKeyIterator:G,AbstractSublevelValueIterator:v}=I(47519),B=Symbol("prefix"),_=Symbol("upperBound"),T=Symbol("prefixRange"),D=Symbol("parent"),$=Symbol("unfix"),M=new TextEncoder,F={separator:"!"};xe.exports=function({AbstractLevel:K}){class J extends K{static defaults(Q){if("string"==typeof Q)throw new C("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(Q&&Q.open)throw new C("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==Q?F:Q.separator?Q:{...Q,separator:"!"}}constructor(Q,oe,ne){const{separator:me,manifest:pe,...Ie}=J.defaults(ne);oe=W(oe,me);const E=me.charCodeAt(0)+1,a=Q[D]||Q;if(!M.encode(oe).every(h=>h>E&&h<127))throw new C(`Prefix must use bytes > ${E} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(k(a,pe),Ie);const f=(Q.prefix||"")+me+oe+me,l=f.slice(0,-1)+String.fromCharCode(E);this[D]=a,this[B]=new Z(f),this[_]=new Z(l),this[$]=new q,this.nextTick=a.nextTick}prefixKey(Q,oe){if("utf8"===oe)return this[B].utf8+Q;if(0===Q.byteLength)return this[B][oe];if("view"===oe){const ne=this[B].view,me=new Uint8Array(ne.byteLength+Q.byteLength);return me.set(ne,0),me.set(Q,ne.byteLength),me}{const ne=this[B].buffer;return H.concat([ne,Q],ne.byteLength+Q.byteLength)}}[T](Q,oe){void 0!==Q.gte?Q.gte=this.prefixKey(Q.gte,oe):void 0!==Q.gt?Q.gt=this.prefixKey(Q.gt,oe):Q.gte=this[B][oe],void 0!==Q.lte?Q.lte=this.prefixKey(Q.lte,oe):void 0!==Q.lt?Q.lt=this.prefixKey(Q.lt,oe):Q.lte=this[_][oe]}get prefix(){return this[B].utf8}get db(){return this[D]}_open(Q,oe){this[D].open({passive:!0},oe)}_put(Q,oe,ne,me){this[D].put(Q,oe,ne,me)}_get(Q,oe,ne){this[D].get(Q,oe,ne)}_getMany(Q,oe,ne){this[D].getMany(Q,oe,ne)}_del(Q,oe,ne){this[D].del(Q,oe,ne)}_batch(Q,oe,ne){this[D].batch(Q,oe,ne)}_clear(Q,oe){this[T](Q,Q.keyEncoding),this[D].clear(Q,oe)}_iterator(Q){this[T](Q,Q.keyEncoding);const oe=this[D].iterator(Q),ne=this[$].get(this[B].utf8.length,Q.keyEncoding);return new N(this,Q,oe,ne)}_keys(Q){this[T](Q,Q.keyEncoding);const oe=this[D].keys(Q),ne=this[$].get(this[B].utf8.length,Q.keyEncoding);return new G(this,Q,oe,ne)}_values(Q){this[T](Q,Q.keyEncoding);const oe=this[D].values(Q);return new v(this,Q,oe)}}return{AbstractSublevel:J}};const k=function(K,J){return{...K.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...J,encodings:{utf8:j(K,"utf8"),buffer:j(K,"buffer"),view:j(K,"view")}}},j=function(K,J){return!!K.supports.encodings[J]&&K.keyEncoding(J).name===J};class Z{constructor(J){this.utf8=J,this.view=M.encode(J),this.buffer=H?H.from(this.view.buffer,0,this.view.byteLength):{}}}class q{constructor(){this.cache=new Map}get(J,X){let Q=this.cache.get(X);return void 0===Q&&(Q="view"===X?function(oe,ne){return ne.subarray(oe)}.bind(null,J):function(oe,ne){return ne.slice(oe)}.bind(null,J),this.cache.set(X,Q)),Q}}const W=function(K,J){let X=0,Q=K.length;for(;X<Q&&K[X]===J;)X++;for(;Q>X&&K[Q-1]===J;)Q--;return K.slice(X,Q)}},10475:(xe,O)=>{"use strict";O.getCallback=function(I,C){return"function"==typeof I?I:C},O.getOptions=function(I,C){return"object"==typeof I&&null!==I?I:void 0!==C?C:{}}},45776:(xe,O,I)=>{"use strict";const{AbstractChainedBatch:C}=I(91463),H=I(61747),N=Symbol("encoded");O.DefaultChainedBatch=class G extends C{constructor(B){super(B),this[N]=[]}_put(B,_,T){this[N].push({...T,type:"put",key:B,value:_})}_del(B,_){this[N].push({..._,type:"del",key:B})}_clear(){this[N]=[]}_write(B,_){"opening"===this.db.status?this.db.defer(()=>this._write(B,_)):"open"===this.db.status?0===this[N].length?this.nextTick(_):this.db._batch(this[N],B,_):this.nextTick(_,new H("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}},48335:(xe,O,I)=>{"use strict";const{AbstractKeyIterator:C,AbstractValueIterator:H}=I(63294),N=Symbol("iterator"),G=Symbol("callback"),v=Symbol("handleOne"),B=Symbol("handleMany");class _ extends C{constructor($,M){super($,M),this[N]=$.iterator({...M,keys:!0,values:!1}),this[v]=this[v].bind(this),this[B]=this[B].bind(this)}}class T extends H{constructor($,M){super($,M),this[N]=$.iterator({...M,keys:!1,values:!0}),this[v]=this[v].bind(this),this[B]=this[B].bind(this)}}for(const D of[_,T]){const $=D===_,M=$?F=>F[0]:F=>F[1];D.prototype._next=function(F){this[G]=F,this[N].next(this[v])},D.prototype[v]=function(F,k,j){const Z=this[G];F?Z(F):Z(null,$?k:j)},D.prototype._nextv=function(F,k,j){this[G]=j,this[N].nextv(F,k,this[B])},D.prototype._all=function(F,k){this[G]=k,this[N].all(F,this[B])},D.prototype[B]=function(F,k){const j=this[G];F?j(F):j(null,k.map(M))},D.prototype._seek=function(F,k){this[N].seek(F,k)},D.prototype._close=function(F){this[N].close(F)}}O.DefaultKeyIterator=_,O.DefaultValueIterator=T},92745:(xe,O,I)=>{"use strict";const{AbstractIterator:C,AbstractKeyIterator:H,AbstractValueIterator:N}=I(63294),G=I(61747),v=Symbol("nut"),B=Symbol("undefer"),_=Symbol("factory");class T extends C{constructor(F,k){super(F,k),this[v]=null,this[_]=()=>F.iterator(k),this.db.defer(()=>this[B]())}}class D extends H{constructor(F,k){super(F,k),this[v]=null,this[_]=()=>F.keys(k),this.db.defer(()=>this[B]())}}class $ extends N{constructor(F,k){super(F,k),this[v]=null,this[_]=()=>F.values(k),this.db.defer(()=>this[B]())}}for(const M of[T,D,$])M.prototype[B]=function(){"open"===this.db.status&&(this[v]=this[_]())},M.prototype._next=function(F){null!==this[v]?this[v].next(F):"opening"===this.db.status?this.db.defer(()=>this._next(F)):this.nextTick(F,new G("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},M.prototype._nextv=function(F,k,j){null!==this[v]?this[v].nextv(F,k,j):"opening"===this.db.status?this.db.defer(()=>this._nextv(F,k,j)):this.nextTick(j,new G("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},M.prototype._all=function(F,k){null!==this[v]?this[v].all(k):"opening"===this.db.status?this.db.defer(()=>this._all(F,k)):this.nextTick(k,new G("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},M.prototype._seek=function(F,k){null!==this[v]?this[v]._seek(F,k):"opening"===this.db.status&&this.db.defer(()=>this._seek(F,k))},M.prototype._close=function(F){null!==this[v]?this[v].close(F):"opening"===this.db.status?this.db.defer(()=>this._close(F)):this.nextTick(F)};O.DeferredIterator=T,O.DeferredKeyIterator=D,O.DeferredValueIterator=$},24585:(xe,O,I)=>{"use strict";const C=I(24515);xe.exports=function(H,...N){C(0===N.length?H:()=>H(...N))}},4287:(xe,O,I)=>{"use strict";const C=I(61747),H=Object.prototype.hasOwnProperty,N=new Set(["lt","lte","gt","gte"]);xe.exports=function(G,v){const B={};for(const _ in G)if(H.call(G,_)&&"keyEncoding"!==_&&"valueEncoding"!==_){if("start"===_||"end"===_)throw new C(`The legacy range option '${_}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===_)throw new C("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});B[_]=N.has(_)?v.encode(G[_]):G[_]}return B.reverse=!!B.reverse,B.limit=Number.isInteger(B.limit)&&B.limit>=0?B.limit:-1,B}},1067:(xe,O,I)=>{"use strict";const C=I(13981),H=I(22020),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=_,O.SlowBuffer=function K(U){return+U!=U&&(U=0),_.alloc(+U)},O.INSPECT_MAX_BYTES=50;const G=2147483647;function B(U){if(U>G)throw new RangeError('The value "'+U+'" is invalid for option "size"');const w=new Uint8Array(U);return Object.setPrototypeOf(w,_.prototype),w}function _(U,w,b){if("number"==typeof U){if("string"==typeof w)throw new TypeError('The "string" argument must be of type string. Received type number');return M(U)}return T(U,w,b)}function T(U,w,b){if("string"==typeof U)return function F(U,w){if(("string"!=typeof w||""===w)&&(w="utf8"),!_.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const b=0|J(U,w);let z=B(b);const ie=z.write(U,w);return ie!==b&&(z=z.slice(0,ie)),z}(U,w);if(ArrayBuffer.isView(U))return function j(U){if(De(U,Uint8Array)){const w=new Uint8Array(U);return Z(w.buffer,w.byteOffset,w.byteLength)}return k(U)}(U);if(null==U)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(De(U,ArrayBuffer)||U&&De(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(U,SharedArrayBuffer)||U&&De(U.buffer,SharedArrayBuffer)))return Z(U,w,b);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');const z=U.valueOf&&U.valueOf();if(null!=z&&z!==U)return _.from(z,w,b);const ie=function q(U){if(_.isBuffer(U)){const w=0|W(U.length),b=B(w);return 0===b.length||U.copy(b,0,0,w),b}return void 0!==U.length?"number"!=typeof U.length||et(U.length)?B(0):k(U):"Buffer"===U.type&&Array.isArray(U.data)?k(U.data):void 0}(U);if(ie)return ie;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return _.from(U[Symbol.toPrimitive]("string"),w,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function D(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function M(U){return D(U),B(U<0?0:0|W(U))}function k(U){const w=U.length<0?0:0|W(U.length),b=B(w);for(let z=0;z<w;z+=1)b[z]=255&U[z];return b}function Z(U,w,b){if(w<0||U.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<w+(b||0))throw new RangeError('"length" is outside of buffer bounds');let z;return z=void 0===w&&void 0===b?new Uint8Array(U):void 0===b?new Uint8Array(U,w):new Uint8Array(U,w,b),Object.setPrototypeOf(z,_.prototype),z}function W(U){if(U>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|U}function J(U,w){if(_.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||De(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const b=U.length,z=arguments.length>2&&!0===arguments[2];if(!z&&0===b)return 0;let ie=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return ce(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return Ee(U).length;default:if(ie)return z?-1:ce(U).length;w=(""+w).toLowerCase(),ie=!0}}function X(U,w,b){let z=!1;if((void 0===w||w<0)&&(w=0),w>this.length||((void 0===b||b>this.length)&&(b=this.length),b<=0)||(b>>>=0)<=(w>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return m(this,w,b);case"utf8":case"utf-8":return l(this,w,b);case"ascii":return x(this,w,b);case"latin1":case"binary":return P(this,w,b);case"base64":return f(this,w,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,w,b);default:if(z)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),z=!0}}function Q(U,w,b){const z=U[w];U[w]=U[b],U[b]=z}function oe(U,w,b,z,ie){if(0===U.length)return-1;if("string"==typeof b?(z=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),et(b=+b)&&(b=ie?0:U.length-1),b<0&&(b=U.length+b),b>=U.length){if(ie)return-1;b=U.length-1}else if(b<0){if(!ie)return-1;b=0}if("string"==typeof w&&(w=_.from(w,z)),_.isBuffer(w))return 0===w.length?-1:ne(U,w,b,z,ie);if("number"==typeof w)return w&=255,"function"==typeof Uint8Array.prototype.indexOf?ie?Uint8Array.prototype.indexOf.call(U,w,b):Uint8Array.prototype.lastIndexOf.call(U,w,b):ne(U,[w],b,z,ie);throw new TypeError("val must be string, number or Buffer")}function ne(U,w,b,z,ie){let nt,be=1,Me=U.length,qe=w.length;if(void 0!==z&&("ucs2"===(z=String(z).toLowerCase())||"ucs-2"===z||"utf16le"===z||"utf-16le"===z)){if(U.length<2||w.length<2)return-1;be=2,Me/=2,qe/=2,b/=2}function At(rt,St){return 1===be?rt[St]:rt.readUInt16BE(St*be)}if(ie){let rt=-1;for(nt=b;nt<Me;nt++)if(At(U,nt)===At(w,-1===rt?0:nt-rt)){if(-1===rt&&(rt=nt),nt-rt+1===qe)return rt*be}else-1!==rt&&(nt-=nt-rt),rt=-1}else for(b+qe>Me&&(b=Me-qe),nt=b;nt>=0;nt--){let rt=!0;for(let St=0;St<qe;St++)if(At(U,nt+St)!==At(w,St)){rt=!1;break}if(rt)return nt}return-1}function me(U,w,b,z){b=Number(b)||0;const ie=U.length-b;z?(z=Number(z))>ie&&(z=ie):z=ie;const be=w.length;let Me;for(z>be/2&&(z=be/2),Me=0;Me<z;++Me){const qe=parseInt(w.substr(2*Me,2),16);if(et(qe))return Me;U[b+Me]=qe}return Me}function pe(U,w,b,z){return Be(ce(w,U.length-b),U,b,z)}function Ie(U,w,b,z){return Be(function ue(U){const w=[];for(let b=0;b<U.length;++b)w.push(255&U.charCodeAt(b));return w}(w),U,b,z)}function E(U,w,b,z){return Be(Ee(w),U,b,z)}function a(U,w,b,z){return Be(function ge(U,w){let b,z,ie;const be=[];for(let Me=0;Me<U.length&&!((w-=2)<0);++Me)b=U.charCodeAt(Me),z=b>>8,ie=b%256,be.push(ie),be.push(z);return be}(w,U.length-b),U,b,z)}function f(U,w,b){return C.fromByteArray(0===w&&b===U.length?U:U.slice(w,b))}function l(U,w,b){b=Math.min(U.length,b);const z=[];let ie=w;for(;ie<b;){const be=U[ie];let Me=null,qe=be>239?4:be>223?3:be>191?2:1;if(ie+qe<=b){let At,nt,rt,St;switch(qe){case 1:be<128&&(Me=be);break;case 2:At=U[ie+1],128==(192&At)&&(St=(31&be)<<6|63&At,St>127&&(Me=St));break;case 3:At=U[ie+1],nt=U[ie+2],128==(192&At)&&128==(192&nt)&&(St=(15&be)<<12|(63&At)<<6|63&nt,St>2047&&(St<55296||St>57343)&&(Me=St));break;case 4:At=U[ie+1],nt=U[ie+2],rt=U[ie+3],128==(192&At)&&128==(192&nt)&&128==(192&rt)&&(St=(15&be)<<18|(63&At)<<12|(63&nt)<<6|63&rt,St>65535&&St<1114112&&(Me=St))}}null===Me?(Me=65533,qe=1):Me>65535&&(Me-=65536,z.push(Me>>>10&1023|55296),Me=56320|1023&Me),z.push(Me),ie+=qe}return function g(U){const w=U.length;if(w<=h)return String.fromCharCode.apply(String,U);let b="",z=0;for(;z<w;)b+=String.fromCharCode.apply(String,U.slice(z,z+=h));return b}(z)}O.kMaxLength=G,!(_.TYPED_ARRAY_SUPPORT=function v(){try{const U=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(U,w),42===U.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),_.poolSize=8192,_.from=function(U,w,b){return T(U,w,b)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array),_.alloc=function(U,w,b){return function $(U,w,b){return D(U),U<=0?B(U):void 0!==w?"string"==typeof b?B(U).fill(w,b):B(U).fill(w):B(U)}(U,w,b)},_.allocUnsafe=function(U){return M(U)},_.allocUnsafeSlow=function(U){return M(U)},_.isBuffer=function(w){return null!=w&&!0===w._isBuffer&&w!==_.prototype},_.compare=function(w,b){if(De(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),De(b,Uint8Array)&&(b=_.from(b,b.offset,b.byteLength)),!_.isBuffer(w)||!_.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===b)return 0;let z=w.length,ie=b.length;for(let be=0,Me=Math.min(z,ie);be<Me;++be)if(w[be]!==b[be]){z=w[be],ie=b[be];break}return z<ie?-1:ie<z?1:0},_.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(w,b){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(0===w.length)return _.alloc(0);let z;if(void 0===b)for(b=0,z=0;z<w.length;++z)b+=w[z].length;const ie=_.allocUnsafe(b);let be=0;for(z=0;z<w.length;++z){let Me=w[z];if(De(Me,Uint8Array))be+Me.length>ie.length?(_.isBuffer(Me)||(Me=_.from(Me)),Me.copy(ie,be)):Uint8Array.prototype.set.call(ie,Me,be);else{if(!_.isBuffer(Me))throw new TypeError('"list" argument must be an Array of Buffers');Me.copy(ie,be)}be+=Me.length}return ie},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){const w=this.length;if(w%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<w;b+=2)Q(this,b,b+1);return this},_.prototype.swap32=function(){const w=this.length;if(w%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<w;b+=4)Q(this,b,b+3),Q(this,b+1,b+2);return this},_.prototype.swap64=function(){const w=this.length;if(w%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<w;b+=8)Q(this,b,b+7),Q(this,b+1,b+6),Q(this,b+2,b+5),Q(this,b+3,b+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){const w=this.length;return 0===w?"":0===arguments.length?l(this,0,w):X.apply(this,arguments)},_.prototype.equals=function(w){if(!_.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w||0===_.compare(this,w)},_.prototype.inspect=function(){let w="";const b=O.INSPECT_MAX_BYTES;return w=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(w+=" ... "),"<Buffer "+w+">"},N&&(_.prototype[N]=_.prototype.inspect),_.prototype.compare=function(w,b,z,ie,be){if(De(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),!_.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(void 0===b&&(b=0),void 0===z&&(z=w?w.length:0),void 0===ie&&(ie=0),void 0===be&&(be=this.length),b<0||z>w.length||ie<0||be>this.length)throw new RangeError("out of range index");if(ie>=be&&b>=z)return 0;if(ie>=be)return-1;if(b>=z)return 1;if(this===w)return 0;let Me=(be>>>=0)-(ie>>>=0),qe=(z>>>=0)-(b>>>=0);const At=Math.min(Me,qe),nt=this.slice(ie,be),rt=w.slice(b,z);for(let St=0;St<At;++St)if(nt[St]!==rt[St]){Me=nt[St],qe=rt[St];break}return Me<qe?-1:qe<Me?1:0},_.prototype.includes=function(w,b,z){return-1!==this.indexOf(w,b,z)},_.prototype.indexOf=function(w,b,z){return oe(this,w,b,z,!0)},_.prototype.lastIndexOf=function(w,b,z){return oe(this,w,b,z,!1)},_.prototype.write=function(w,b,z,ie){if(void 0===b)ie="utf8",z=this.length,b=0;else if(void 0===z&&"string"==typeof b)ie=b,z=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(z)?(z>>>=0,void 0===ie&&(ie="utf8")):(ie=z,z=void 0)}const be=this.length-b;if((void 0===z||z>be)&&(z=be),w.length>0&&(z<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let Me=!1;for(;;)switch(ie){case"hex":return me(this,w,b,z);case"utf8":case"utf-8":return pe(this,w,b,z);case"ascii":case"latin1":case"binary":return Ie(this,w,b,z);case"base64":return E(this,w,b,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a(this,w,b,z);default:if(Me)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),Me=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const h=4096;function x(U,w,b){let z="";b=Math.min(U.length,b);for(let ie=w;ie<b;++ie)z+=String.fromCharCode(127&U[ie]);return z}function P(U,w,b){let z="";b=Math.min(U.length,b);for(let ie=w;ie<b;++ie)z+=String.fromCharCode(U[ie]);return z}function m(U,w,b){const z=U.length;(!w||w<0)&&(w=0),(!b||b<0||b>z)&&(b=z);let ie="";for(let be=w;be<b;++be)ie+=Ke[U[be]];return ie}function d(U,w,b){const z=U.slice(w,b);let ie="";for(let be=0;be<z.length-1;be+=2)ie+=String.fromCharCode(z[be]+256*z[be+1]);return ie}function p(U,w,b){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+w>b)throw new RangeError("Trying to access beyond buffer length")}function V(U,w,b,z,ie,be){if(!_.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>ie||w<be)throw new RangeError('"value" argument is out of bounds');if(b+z>U.length)throw new RangeError("Index out of range")}function L(U,w,b,z,ie){ve(w,z,ie,U,b,7);let be=Number(w&BigInt(4294967295));U[b++]=be,be>>=8,U[b++]=be,be>>=8,U[b++]=be,be>>=8,U[b++]=be;let Me=Number(w>>BigInt(32)&BigInt(4294967295));return U[b++]=Me,Me>>=8,U[b++]=Me,Me>>=8,U[b++]=Me,Me>>=8,U[b++]=Me,b}function Y(U,w,b,z,ie){ve(w,z,ie,U,b,7);let be=Number(w&BigInt(4294967295));U[b+7]=be,be>>=8,U[b+6]=be,be>>=8,U[b+5]=be,be>>=8,U[b+4]=be;let Me=Number(w>>BigInt(32)&BigInt(4294967295));return U[b+3]=Me,Me>>=8,U[b+2]=Me,Me>>=8,U[b+1]=Me,Me>>=8,U[b]=Me,b+8}function le(U,w,b,z,ie,be){if(b+z>U.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Se(U,w,b,z,ie){return w=+w,b>>>=0,ie||le(U,0,b,4),H.write(U,w,b,z,23,4),b+4}function Oe(U,w,b,z,ie){return w=+w,b>>>=0,ie||le(U,0,b,8),H.write(U,w,b,z,52,8),b+8}_.prototype.slice=function(w,b){const z=this.length;(w=~~w)<0?(w+=z)<0&&(w=0):w>z&&(w=z),(b=void 0===b?z:~~b)<0?(b+=z)<0&&(b=0):b>z&&(b=z),b<w&&(b=w);const ie=this.subarray(w,b);return Object.setPrototypeOf(ie,_.prototype),ie},_.prototype.readUintLE=_.prototype.readUIntLE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w],be=1,Me=0;for(;++Me<b&&(be*=256);)ie+=this[w+Me]*be;return ie},_.prototype.readUintBE=_.prototype.readUIntBE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w+--b],be=1;for(;b>0&&(be*=256);)ie+=this[w+--b]*be;return ie},_.prototype.readUint8=_.prototype.readUInt8=function(w,b){return w>>>=0,b||p(w,1,this.length),this[w]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(w,b){return w>>>=0,b||p(w,2,this.length),this[w]|this[w+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(w,b){return w>>>=0,b||p(w,2,this.length),this[w]<<8|this[w+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(w,b){return w>>>=0,b||p(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+16777216*this[w+3]},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(w,b){return w>>>=0,b||p(w,4,this.length),16777216*this[w]+(this[w+1]<<16|this[w+2]<<8|this[w+3])},_.prototype.readBigUInt64LE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=b+256*this[++w]+65536*this[++w]+this[++w]*2**24,be=this[++w]+256*this[++w]+65536*this[++w]+z*2**24;return BigInt(ie)+(BigInt(be)<<BigInt(32))}),_.prototype.readBigUInt64BE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=b*2**24+65536*this[++w]+256*this[++w]+this[++w],be=this[++w]*2**24+65536*this[++w]+256*this[++w]+z;return(BigInt(ie)<<BigInt(32))+BigInt(be)}),_.prototype.readIntLE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w],be=1,Me=0;for(;++Me<b&&(be*=256);)ie+=this[w+Me]*be;return be*=128,ie>=be&&(ie-=Math.pow(2,8*b)),ie},_.prototype.readIntBE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=b,be=1,Me=this[w+--ie];for(;ie>0&&(be*=256);)Me+=this[w+--ie]*be;return be*=128,Me>=be&&(Me-=Math.pow(2,8*b)),Me},_.prototype.readInt8=function(w,b){return w>>>=0,b||p(w,1,this.length),128&this[w]?-1*(255-this[w]+1):this[w]},_.prototype.readInt16LE=function(w,b){w>>>=0,b||p(w,2,this.length);const z=this[w]|this[w+1]<<8;return 32768&z?4294901760|z:z},_.prototype.readInt16BE=function(w,b){w>>>=0,b||p(w,2,this.length);const z=this[w+1]|this[w]<<8;return 32768&z?4294901760|z:z},_.prototype.readInt32LE=function(w,b){return w>>>=0,b||p(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},_.prototype.readInt32BE=function(w,b){return w>>>=0,b||p(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},_.prototype.readBigInt64LE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];return(void 0===b||void 0===z)&&de(w,this.length-8),(BigInt(this[w+4]+256*this[w+5]+65536*this[w+6]+(z<<24))<<BigInt(32))+BigInt(b+256*this[++w]+65536*this[++w]+this[++w]*2**24)}),_.prototype.readBigInt64BE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=(b<<24)+65536*this[++w]+256*this[++w]+this[++w];return(BigInt(ie)<<BigInt(32))+BigInt(this[++w]*2**24+65536*this[++w]+256*this[++w]+z)}),_.prototype.readFloatLE=function(w,b){return w>>>=0,b||p(w,4,this.length),H.read(this,w,!0,23,4)},_.prototype.readFloatBE=function(w,b){return w>>>=0,b||p(w,4,this.length),H.read(this,w,!1,23,4)},_.prototype.readDoubleLE=function(w,b){return w>>>=0,b||p(w,8,this.length),H.read(this,w,!0,52,8)},_.prototype.readDoubleBE=function(w,b){return w>>>=0,b||p(w,8,this.length),H.read(this,w,!1,52,8)},_.prototype.writeUintLE=_.prototype.writeUIntLE=function(w,b,z,ie){w=+w,b>>>=0,z>>>=0,ie||V(this,w,b,z,Math.pow(2,8*z)-1,0);let be=1,Me=0;for(this[b]=255&w;++Me<z&&(be*=256);)this[b+Me]=w/be&255;return b+z},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(w,b,z,ie){w=+w,b>>>=0,z>>>=0,ie||V(this,w,b,z,Math.pow(2,8*z)-1,0);let be=z-1,Me=1;for(this[b+be]=255&w;--be>=0&&(Me*=256);)this[b+be]=w/Me&255;return b+z},_.prototype.writeUint8=_.prototype.writeUInt8=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,1,255,0),this[b]=255&w,b+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,65535,0),this[b]=255&w,this[b+1]=w>>>8,b+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,65535,0),this[b]=w>>>8,this[b+1]=255&w,b+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,4294967295,0),this[b+3]=w>>>24,this[b+2]=w>>>16,this[b+1]=w>>>8,this[b]=255&w,b+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,4294967295,0),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=255&w,b+4},_.prototype.writeBigUInt64LE=We(function(w,b=0){return L(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeBigUInt64BE=We(function(w,b=0){return Y(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeIntLE=function(w,b,z,ie){if(w=+w,b>>>=0,!ie){const At=Math.pow(2,8*z-1);V(this,w,b,z,At-1,-At)}let be=0,Me=1,qe=0;for(this[b]=255&w;++be<z&&(Me*=256);)w<0&&0===qe&&0!==this[b+be-1]&&(qe=1),this[b+be]=(w/Me|0)-qe&255;return b+z},_.prototype.writeIntBE=function(w,b,z,ie){if(w=+w,b>>>=0,!ie){const At=Math.pow(2,8*z-1);V(this,w,b,z,At-1,-At)}let be=z-1,Me=1,qe=0;for(this[b+be]=255&w;--be>=0&&(Me*=256);)w<0&&0===qe&&0!==this[b+be+1]&&(qe=1),this[b+be]=(w/Me|0)-qe&255;return b+z},_.prototype.writeInt8=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,1,127,-128),w<0&&(w=255+w+1),this[b]=255&w,b+1},_.prototype.writeInt16LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,32767,-32768),this[b]=255&w,this[b+1]=w>>>8,b+2},_.prototype.writeInt16BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,32767,-32768),this[b]=w>>>8,this[b+1]=255&w,b+2},_.prototype.writeInt32LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,2147483647,-2147483648),this[b]=255&w,this[b+1]=w>>>8,this[b+2]=w>>>16,this[b+3]=w>>>24,b+4},_.prototype.writeInt32BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=255&w,b+4},_.prototype.writeBigInt64LE=We(function(w,b=0){return L(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeBigInt64BE=We(function(w,b=0){return Y(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeFloatLE=function(w,b,z){return Se(this,w,b,!0,z)},_.prototype.writeFloatBE=function(w,b,z){return Se(this,w,b,!1,z)},_.prototype.writeDoubleLE=function(w,b,z){return Oe(this,w,b,!0,z)},_.prototype.writeDoubleBE=function(w,b,z){return Oe(this,w,b,!1,z)},_.prototype.copy=function(w,b,z,ie){if(!_.isBuffer(w))throw new TypeError("argument should be a Buffer");if(z||(z=0),!ie&&0!==ie&&(ie=this.length),b>=w.length&&(b=w.length),b||(b=0),ie>0&&ie<z&&(ie=z),ie===z||0===w.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),w.length-b<ie-z&&(ie=w.length-b+z);const be=ie-z;return this===w&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,z,ie):Uint8Array.prototype.set.call(w,this.subarray(z,ie),b),be},_.prototype.fill=function(w,b,z,ie){if("string"==typeof w){if("string"==typeof b?(ie=b,b=0,z=this.length):"string"==typeof z&&(ie=z,z=this.length),void 0!==ie&&"string"!=typeof ie)throw new TypeError("encoding must be a string");if("string"==typeof ie&&!_.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(1===w.length){const Me=w.charCodeAt(0);("utf8"===ie&&Me<128||"latin1"===ie)&&(w=Me)}}else"number"==typeof w?w&=255:"boolean"==typeof w&&(w=Number(w));if(b<0||this.length<b||this.length<z)throw new RangeError("Out of range index");if(z<=b)return this;let be;if(b>>>=0,z=void 0===z?this.length:z>>>0,w||(w=0),"number"==typeof w)for(be=b;be<z;++be)this[be]=w;else{const Me=_.isBuffer(w)?w:_.from(w,ie),qe=Me.length;if(0===qe)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(be=0;be<z-b;++be)this[be+b]=Me[be%qe]}return this};const Ve={};function Re(U,w,b){Ve[U]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,delete this.name}get code(){return U}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}function ye(U){let w="",b=U.length;const z="-"===U[0]?1:0;for(;b>=z+4;b-=3)w=`_${U.slice(b-3,b)}${w}`;return`${U.slice(0,b)}${w}`}function ve(U,w,b,z,ie,be){if(U>b||U<w){const Me="bigint"==typeof w?"n":"";let qe;throw qe=be>3?0===w||w===BigInt(0)?`>= 0${Me} and < 2${Me} ** ${8*(be+1)}${Me}`:`>= -(2${Me} ** ${8*(be+1)-1}${Me}) and < 2 ** ${8*(be+1)-1}${Me}`:`>= ${w}${Me} and <= ${b}${Me}`,new Ve.ERR_OUT_OF_RANGE("value",qe,U)}!function ke(U,w,b){_e(w,"offset"),(void 0===U[w]||void 0===U[w+b])&&de(w,U.length-(b+1))}(z,ie,be)}function _e(U,w){if("number"!=typeof U)throw new Ve.ERR_INVALID_ARG_TYPE(w,"number",U)}function de(U,w,b){throw Math.floor(U)!==U?(_e(U,b),new Ve.ERR_OUT_OF_RANGE(b||"offset","an integer",U)):w<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${w}`,U)}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(U,w){return`The "${U}" argument must be of type number. Received type ${typeof w}`},TypeError),Re("ERR_OUT_OF_RANGE",function(U,w,b){let z=`The value of "${U}" is out of range.`,ie=b;return Number.isInteger(b)&&Math.abs(b)>2**32?ie=ye(String(b)):"bigint"==typeof b&&(ie=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(ie=ye(ie)),ie+="n"),z+=` It must be ${w}. Received ${ie}`,z},RangeError);const se=/[^+/0-9A-Za-z-_]/g;function ce(U,w){let b;w=w||1/0;const z=U.length;let ie=null;const be=[];for(let Me=0;Me<z;++Me){if(b=U.charCodeAt(Me),b>55295&&b<57344){if(!ie){if(b>56319){(w-=3)>-1&&be.push(239,191,189);continue}if(Me+1===z){(w-=3)>-1&&be.push(239,191,189);continue}ie=b;continue}if(b<56320){(w-=3)>-1&&be.push(239,191,189),ie=b;continue}b=65536+(ie-55296<<10|b-56320)}else ie&&(w-=3)>-1&&be.push(239,191,189);if(ie=null,b<128){if((w-=1)<0)break;be.push(b)}else if(b<2048){if((w-=2)<0)break;be.push(b>>6|192,63&b|128)}else if(b<65536){if((w-=3)<0)break;be.push(b>>12|224,b>>6&63|128,63&b|128)}else{if(!(b<1114112))throw new Error("Invalid code point");if((w-=4)<0)break;be.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}}return be}function Ee(U){return C.toByteArray(function re(U){if((U=(U=U.split("=")[0]).trim().replace(se,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(U))}function Be(U,w,b,z){let ie;for(ie=0;ie<z&&!(ie+b>=w.length||ie>=U.length);++ie)w[ie+b]=U[ie];return ie}function De(U,w){return U instanceof w||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===w.name}function et(U){return U!=U}const Ke=function(){const U="0123456789abcdef",w=new Array(256);for(let b=0;b<16;++b){const z=16*b;for(let ie=0;ie<16;++ie)w[z+ie]=U[b]+U[ie]}return w}();function We(U){return typeof BigInt>"u"?_t:U}function _t(){throw new Error("BigInt not supported")}},49609:(xe,O,I)=>{var C=O;C.bignum=I(96867),C.define=I(16626).define,C.base=I(15066),C.constants=I(47740),C.decoders=I(91558),C.encoders=I(22714)},16626:(xe,O,I)=>{var C=I(49609),H=I(71993);function G(v,B){this.name=v,this.body=B,this.decoders={},this.encoders={}}O.define=function(B,_){return new G(B,_)},G.prototype._createNamed=function(B){var _;try{_=Object(function(){var D=new Error("Cannot find module 'vm'");throw D.code="MODULE_NOT_FOUND",D}())("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch{_=function(D){this._initNamed(D)}}return H(_,B),_.prototype._initNamed=function(D){B.call(this,D)},new _(this)},G.prototype._getDecoder=function(B){return this.decoders.hasOwnProperty(B=B||"der")||(this.decoders[B]=this._createNamed(C.decoders[B])),this.decoders[B]},G.prototype.decode=function(B,_,T){return this._getDecoder(_).decode(B,T)},G.prototype._getEncoder=function(B){return this.encoders.hasOwnProperty(B=B||"der")||(this.encoders[B]=this._createNamed(C.encoders[B])),this.encoders[B]},G.prototype.encode=function(B,_,T){return this._getEncoder(_).encode(B,T)}},97290:(xe,O,I)=>{var C=I(71993),H=I(15066).Reporter,N=I(83838).Buffer;function G(B,_){H.call(this,_),N.isBuffer(B)?(this.base=B,this.offset=0,this.length=B.length):this.error("Input not Buffer")}function v(B,_){if(Array.isArray(B))this.length=0,this.value=B.map(function(T){return T instanceof v||(T=new v(T,_)),this.length+=T.length,T},this);else if("number"==typeof B){if(!(0<=B&&B<=255))return _.error("non-byte EncoderBuffer value");this.value=B,this.length=1}else if("string"==typeof B)this.value=B,this.length=N.byteLength(B);else{if(!N.isBuffer(B))return _.error("Unsupported type: "+typeof B);this.value=B,this.length=B.length}}C(G,H),O.t=G,G.prototype.save=function(){return{offset:this.offset,reporter:H.prototype.save.call(this)}},G.prototype.restore=function(_){var T=new G(this.base);return T.offset=_.offset,T.length=this.offset,this.offset=_.offset,H.prototype.restore.call(this,_.reporter),T},G.prototype.isEmpty=function(){return this.offset===this.length},G.prototype.readUInt8=function(_){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(_||"DecoderBuffer overrun")},G.prototype.skip=function(_,T){if(!(this.offset+_<=this.length))return this.error(T||"DecoderBuffer overrun");var D=new G(this.base);return D._reporterState=this._reporterState,D.offset=this.offset,D.length=this.offset+_,this.offset+=_,D},G.prototype.raw=function(_){return this.base.slice(_?_.offset:this.offset,this.length)},O.d=v,v.prototype.join=function(_,T){return _||(_=new N(this.length)),T||(T=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(D){D.join(_,T),T+=D.length}):("number"==typeof this.value?_[T]=this.value:"string"==typeof this.value?_.write(this.value,T):N.isBuffer(this.value)&&this.value.copy(_,T),T+=this.length)),_}},15066:(xe,O,I)=>{var C=O;C.Reporter=I(85697).a,C.DecoderBuffer=I(97290).t,C.EncoderBuffer=I(97290).d,C.Node=I(34320)},34320:(xe,O,I)=>{var C=I(15066).Reporter,H=I(15066).EncoderBuffer,N=I(15066).DecoderBuffer,G=I(39210),v=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],B=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(v);function T($,M){var F={};this._baseState=F,F.enc=$,F.parent=M||null,F.children=null,F.tag=null,F.args=null,F.reverseArgs=null,F.choice=null,F.optional=!1,F.any=!1,F.obj=!1,F.use=null,F.useDecoder=null,F.key=null,F.default=null,F.explicit=null,F.implicit=null,F.contains=null,F.parent||(F.children=[],this._wrap())}xe.exports=T;var D=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];T.prototype.clone=function(){var M=this._baseState,F={};D.forEach(function(j){F[j]=M[j]});var k=new this.constructor(F.parent);return k._baseState=F,k},T.prototype._wrap=function(){var M=this._baseState;B.forEach(function(F){this[F]=function(){var j=new this.constructor(this);return M.children.push(j),j[F].apply(j,arguments)}},this)},T.prototype._init=function(M){var F=this._baseState;G(null===F.parent),M.call(this),F.children=F.children.filter(function(k){return k._baseState.parent===this},this),G.equal(F.children.length,1,"Root node can have only one child")},T.prototype._useArgs=function(M){var F=this._baseState,k=M.filter(function(j){return j instanceof this.constructor},this);M=M.filter(function(j){return!(j instanceof this.constructor)},this),0!==k.length&&(G(null===F.children),F.children=k,k.forEach(function(j){j._baseState.parent=this},this)),0!==M.length&&(G(null===F.args),F.args=M,F.reverseArgs=M.map(function(j){if("object"!=typeof j||j.constructor!==Object)return j;var Z={};return Object.keys(j).forEach(function(q){q==(0|q)&&(q|=0),Z[j[q]]=q}),Z}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function($){T.prototype[$]=function(){throw new Error($+" not implemented for encoding: "+this._baseState.enc)}}),v.forEach(function($){T.prototype[$]=function(){var F=this._baseState,k=Array.prototype.slice.call(arguments);return G(null===F.tag),F.tag=$,this._useArgs(k),this}}),T.prototype.use=function(M){G(M);var F=this._baseState;return G(null===F.use),F.use=M,this},T.prototype.optional=function(){return this._baseState.optional=!0,this},T.prototype.def=function(M){var F=this._baseState;return G(null===F.default),F.default=M,F.optional=!0,this},T.prototype.explicit=function(M){var F=this._baseState;return G(null===F.explicit&&null===F.implicit),F.explicit=M,this},T.prototype.implicit=function(M){var F=this._baseState;return G(null===F.explicit&&null===F.implicit),F.implicit=M,this},T.prototype.obj=function(){var M=this._baseState,F=Array.prototype.slice.call(arguments);return M.obj=!0,0!==F.length&&this._useArgs(F),this},T.prototype.key=function(M){var F=this._baseState;return G(null===F.key),F.key=M,this},T.prototype.any=function(){return this._baseState.any=!0,this},T.prototype.choice=function(M){var F=this._baseState;return G(null===F.choice),F.choice=M,this._useArgs(Object.keys(M).map(function(k){return M[k]})),this},T.prototype.contains=function(M){var F=this._baseState;return G(null===F.use),F.contains=M,this},T.prototype._decode=function(M,F){var k=this._baseState;if(null===k.parent)return M.wrapResult(k.children[0]._decode(M,F));var J,j=k.default,Z=!0,q=null;if(null!==k.key&&(q=M.enterKey(k.key)),k.optional){var W=null;if(null!==k.explicit?W=k.explicit:null!==k.implicit?W=k.implicit:null!==k.tag&&(W=k.tag),null!==W||k.any){if(Z=this._peekTag(M,W,k.any),M.isError(Z))return Z}else{var K=M.save();try{null===k.choice?this._decodeGeneric(k.tag,M,F):this._decodeChoice(M,F),Z=!0}catch{Z=!1}M.restore(K)}}if(k.obj&&Z&&(J=M.enterObject()),Z){if(null!==k.explicit){var X=this._decodeTag(M,k.explicit);if(M.isError(X))return X;M=X}var Q=M.offset;if(null===k.use&&null===k.choice){k.any&&(K=M.save());var oe=this._decodeTag(M,null!==k.implicit?k.implicit:k.tag,k.any);if(M.isError(oe))return oe;k.any?j=M.raw(K):M=oe}if(F&&F.track&&null!==k.tag&&F.track(M.path(),Q,M.length,"tagged"),F&&F.track&&null!==k.tag&&F.track(M.path(),M.offset,M.length,"content"),k.any||(j=null===k.choice?this._decodeGeneric(k.tag,M,F):this._decodeChoice(M,F)),M.isError(j))return j;if(!k.any&&null===k.choice&&null!==k.children&&k.children.forEach(function(pe){pe._decode(M,F)}),k.contains&&("octstr"===k.tag||"bitstr"===k.tag)){var ne=new N(j);j=this._getUse(k.contains,M._reporterState.obj)._decode(ne,F)}}return k.obj&&Z&&(j=M.leaveObject(J)),null===k.key||null===j&&!0!==Z?null!==q&&M.exitKey(q):M.leaveKey(q,k.key,j),j},T.prototype._decodeGeneric=function(M,F,k){var j=this._baseState;return"seq"===M||"set"===M?null:"seqof"===M||"setof"===M?this._decodeList(F,M,j.args[0],k):/str$/.test(M)?this._decodeStr(F,M,k):"objid"===M&&j.args?this._decodeObjid(F,j.args[0],j.args[1],k):"objid"===M?this._decodeObjid(F,null,null,k):"gentime"===M||"utctime"===M?this._decodeTime(F,M,k):"null_"===M?this._decodeNull(F,k):"bool"===M?this._decodeBool(F,k):"objDesc"===M?this._decodeStr(F,M,k):"int"===M||"enum"===M?this._decodeInt(F,j.args&&j.args[0],k):null!==j.use?this._getUse(j.use,F._reporterState.obj)._decode(F,k):F.error("unknown tag: "+M)},T.prototype._getUse=function(M,F){var k=this._baseState;return k.useDecoder=this._use(M,F),G(null===k.useDecoder._baseState.parent),k.useDecoder=k.useDecoder._baseState.children[0],k.implicit!==k.useDecoder._baseState.implicit&&(k.useDecoder=k.useDecoder.clone(),k.useDecoder._baseState.implicit=k.implicit),k.useDecoder},T.prototype._decodeChoice=function(M,F){var k=this._baseState,j=null,Z=!1;return Object.keys(k.choice).some(function(q){var W=M.save(),K=k.choice[q];try{var J=K._decode(M,F);if(M.isError(J))return!1;j={type:q,value:J},Z=!0}catch{return M.restore(W),!1}return!0},this),Z?j:M.error("Choice not matched")},T.prototype._createEncoderBuffer=function(M){return new H(M,this.reporter)},T.prototype._encode=function(M,F,k){var j=this._baseState;if(null===j.default||j.default!==M){var Z=this._encodeValue(M,F,k);if(void 0!==Z&&!this._skipDefault(Z,F,k))return Z}},T.prototype._encodeValue=function(M,F,k){var j=this._baseState;if(null===j.parent)return j.children[0]._encode(M,F||new C);var K=null;if(this.reporter=F,j.optional&&void 0===M){if(null===j.default)return;M=j.default}var Z=null,q=!1;if(j.any)K=this._createEncoderBuffer(M);else if(j.choice)K=this._encodeChoice(M,F);else if(j.contains)Z=this._getUse(j.contains,k)._encode(M,F),q=!0;else if(j.children)Z=j.children.map(function(Q){if("null_"===Q._baseState.tag)return Q._encode(null,F,M);if(null===Q._baseState.key)return F.error("Child should have a key");var oe=F.enterKey(Q._baseState.key);if("object"!=typeof M)return F.error("Child expected, but input is not object");var ne=Q._encode(M[Q._baseState.key],F,M);return F.leaveKey(oe),ne},this).filter(function(Q){return Q}),Z=this._createEncoderBuffer(Z);else if("seqof"===j.tag||"setof"===j.tag){if(!j.args||1!==j.args.length)return F.error("Too many args for : "+j.tag);if(!Array.isArray(M))return F.error("seqof/setof, but data is not Array");var W=this.clone();W._baseState.implicit=null,Z=this._createEncoderBuffer(M.map(function(Q){return this._getUse(this._baseState.args[0],M)._encode(Q,F)},W))}else null!==j.use?K=this._getUse(j.use,k)._encode(M,F):(Z=this._encodePrimitive(j.tag,M),q=!0);if(!j.any&&null===j.choice){var J=null!==j.implicit?j.implicit:j.tag,X=null===j.implicit?"universal":"context";null===J?null===j.use&&F.error("Tag could be omitted only for .use()"):null===j.use&&(K=this._encodeComposite(J,q,X,Z))}return null!==j.explicit&&(K=this._encodeComposite(j.explicit,!1,"context",K)),K},T.prototype._encodeChoice=function(M,F){var k=this._baseState,j=k.choice[M.type];return j||G(!1,M.type+" not found in "+JSON.stringify(Object.keys(k.choice))),j._encode(M.value,F)},T.prototype._encodePrimitive=function(M,F){var k=this._baseState;if(/str$/.test(M))return this._encodeStr(F,M);if("objid"===M&&k.args)return this._encodeObjid(F,k.reverseArgs[0],k.args[1]);if("objid"===M)return this._encodeObjid(F,null,null);if("gentime"===M||"utctime"===M)return this._encodeTime(F,M);if("null_"===M)return this._encodeNull();if("int"===M||"enum"===M)return this._encodeInt(F,k.args&&k.reverseArgs[0]);if("bool"===M)return this._encodeBool(F);if("objDesc"===M)return this._encodeStr(F,M);throw new Error("Unsupported tag: "+M)},T.prototype._isNumstr=function(M){return/^[0-9 ]*$/.test(M)},T.prototype._isPrintstr=function(M){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(M)}},85697:(xe,O,I)=>{var C=I(71993);function H(G){this._reporterState={obj:null,path:[],options:G||{},errors:[]}}function N(G,v){this.path=G,this.rethrow(v)}O.a=H,H.prototype.isError=function(v){return v instanceof N},H.prototype.save=function(){var v=this._reporterState;return{obj:v.obj,pathLen:v.path.length}},H.prototype.restore=function(v){var B=this._reporterState;B.obj=v.obj,B.path=B.path.slice(0,v.pathLen)},H.prototype.enterKey=function(v){return this._reporterState.path.push(v)},H.prototype.exitKey=function(v){var B=this._reporterState;B.path=B.path.slice(0,v-1)},H.prototype.leaveKey=function(v,B,_){var T=this._reporterState;this.exitKey(v),null!==T.obj&&(T.obj[B]=_)},H.prototype.path=function(){return this._reporterState.path.join("/")},H.prototype.enterObject=function(){var v=this._reporterState,B=v.obj;return v.obj={},B},H.prototype.leaveObject=function(v){var B=this._reporterState,_=B.obj;return B.obj=v,_},H.prototype.error=function(v){var B,_=this._reporterState,T=v instanceof N;if(B=T?v:new N(_.path.map(function(D){return"["+JSON.stringify(D)+"]"}).join(""),v.message||v,v.stack),!_.options.partial)throw B;return T||_.errors.push(B),B},H.prototype.wrapResult=function(v){var B=this._reporterState;return B.options.partial?{result:this.isError(v)?null:v,errors:B.errors}:v},C(N,Error),N.prototype.rethrow=function(v){if(this.message=v+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,N),!this.stack)try{throw new Error(this.message)}catch(B){this.stack=B.stack}return this}},36283:(xe,O,I)=>{var C=I(47740);O.tagClass={0:"universal",1:"application",2:"context",3:"private"},O.tagClassByName=C._reverse(O.tagClass),O.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},O.tagByName=C._reverse(O.tag)},47740:(xe,O,I)=>{var C=O;C._reverse=function(N){var G={};return Object.keys(N).forEach(function(v){(0|v)==v&&(v|=0),G[N[v]]=v}),G},C.der=I(36283)},55941:(xe,O,I)=>{var C=I(71993),H=I(49609),N=H.base,G=H.bignum,v=H.constants.der;function B($){this.enc="der",this.name=$.name,this.entity=$,this.tree=new _,this.tree._init($.body)}function _($){N.Node.call(this,"der",$)}function T($,M){var F=$.readUInt8(M);if($.isError(F))return F;var k=v.tagClass[F>>6],j=!(32&F);if(31&~F)F&=31;else{var Z=F;for(F=0;!(128&~Z);){if(Z=$.readUInt8(M),$.isError(Z))return Z;F<<=7,F|=127&Z}}return{cls:k,primitive:j,tag:F,tagStr:v.tag[F]}}function D($,M,F){var k=$.readUInt8(F);if($.isError(k))return k;if(!M&&128===k)return null;if(!(128&k))return k;var j=127&k;if(j>4)return $.error("length octect is too long");k=0;for(var Z=0;Z<j;Z++){k<<=8;var q=$.readUInt8(F);if($.isError(q))return q;k|=q}return k}xe.exports=B,B.prototype.decode=function(M,F){return M instanceof N.DecoderBuffer||(M=new N.DecoderBuffer(M,F)),this.tree._decode(M,F)},C(_,N.Node),_.prototype._peekTag=function(M,F,k){if(M.isEmpty())return!1;var j=M.save(),Z=T(M,'Failed to peek tag: "'+F+'"');return M.isError(Z)?Z:(M.restore(j),Z.tag===F||Z.tagStr===F||Z.tagStr+"of"===F||k)},_.prototype._decodeTag=function(M,F,k){var j=T(M,'Failed to decode tag of "'+F+'"');if(M.isError(j))return j;var Z=D(M,j.primitive,'Failed to get length of "'+F+'"');if(M.isError(Z))return Z;if(!k&&j.tag!==F&&j.tagStr!==F&&j.tagStr+"of"!==F)return M.error('Failed to match tag: "'+F+'"');if(j.primitive||null!==Z)return M.skip(Z,'Failed to match body of: "'+F+'"');var q=M.save(),W=this._skipUntilEnd(M,'Failed to skip indefinite length body: "'+this.tag+'"');return M.isError(W)?W:(Z=M.offset-q.offset,M.restore(q),M.skip(Z,'Failed to match body of: "'+F+'"'))},_.prototype._skipUntilEnd=function(M,F){for(;;){var k=T(M,F);if(M.isError(k))return k;var Z,j=D(M,k.primitive,F);if(M.isError(j))return j;if(Z=k.primitive||null!==j?M.skip(j):this._skipUntilEnd(M,F),M.isError(Z))return Z;if("end"===k.tagStr)break}},_.prototype._decodeList=function(M,F,k,j){for(var Z=[];!M.isEmpty();){var q=this._peekTag(M,"end");if(M.isError(q))return q;var W=k.decode(M,"der",j);if(M.isError(W)&&q)break;Z.push(W)}return Z},_.prototype._decodeStr=function(M,F){if("bitstr"===F){var k=M.readUInt8();return M.isError(k)?k:{unused:k,data:M.raw()}}if("bmpstr"===F){var j=M.raw();if(j.length%2==1)return M.error("Decoding of string type: bmpstr length mismatch");for(var Z="",q=0;q<j.length/2;q++)Z+=String.fromCharCode(j.readUInt16BE(2*q));return Z}if("numstr"===F){var W=M.raw().toString("ascii");return this._isNumstr(W)?W:M.error("Decoding of string type: numstr unsupported characters")}if("octstr"===F)return M.raw();if("objDesc"===F)return M.raw();if("printstr"===F){var K=M.raw().toString("ascii");return this._isPrintstr(K)?K:M.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(F)?M.raw().toString():M.error("Decoding of string type: "+F+" unsupported")},_.prototype._decodeObjid=function(M,F,k){for(var j,Z=[],q=0;!M.isEmpty();){var W=M.readUInt8();q<<=7,q|=127&W,128&W||(Z.push(q),q=0)}if(128&W&&Z.push(q),j=k?Z:[Z[0]/40|0,Z[0]%40].concat(Z.slice(1)),F){var X=F[j.join(" ")];void 0===X&&(X=F[j.join(".")]),void 0!==X&&(j=X)}return j},_.prototype._decodeTime=function(M,F){var k=M.raw().toString();if("gentime"===F)var j=0|k.slice(0,4),Z=0|k.slice(4,6),q=0|k.slice(6,8),W=0|k.slice(8,10),K=0|k.slice(10,12),J=0|k.slice(12,14);else{if("utctime"!==F)return M.error("Decoding "+F+" time is not supported yet");j=0|k.slice(0,2),Z=0|k.slice(2,4),q=0|k.slice(4,6),W=0|k.slice(6,8),K=0|k.slice(8,10),J=0|k.slice(10,12),j=j<70?2e3+j:1900+j}return Date.UTC(j,Z-1,q,W,K,J,0)},_.prototype._decodeNull=function(M){return null},_.prototype._decodeBool=function(M){var F=M.readUInt8();return M.isError(F)?F:0!==F},_.prototype._decodeInt=function(M,F){var k=M.raw(),j=new G(k);return F&&(j=F[j.toString(10)]||j),j},_.prototype._use=function(M,F){return"function"==typeof M&&(M=M(F)),M._getDecoder("der").tree}},91558:(xe,O,I)=>{var C=O;C.der=I(55941),C.pem=I(59316)},59316:(xe,O,I)=>{var C=I(71993),H=I(83838).Buffer,N=I(55941);function G(v){N.call(this,v),this.enc="pem"}C(G,N),xe.exports=G,G.prototype.decode=function(B,_){for(var T=B.toString().split(/[\r\n]+/g),D=_.label.toUpperCase(),$=/^-----(BEGIN|END) ([^-]+)-----$/,M=-1,F=-1,k=0;k<T.length;k++){var j=T[k].match($);if(null!==j&&j[2]===D){if(-1!==M){if("END"!==j[1])break;F=k;break}if("BEGIN"!==j[1])break;M=k}}if(-1===M||-1===F)throw new Error("PEM section not found for: "+D);var Z=T.slice(M+1,F).join("");Z.replace(/[^a-z0-9\+\/=]+/gi,"");var q=new H(Z,"base64");return N.prototype.decode.call(this,q,_)}},72193:(xe,O,I)=>{var C=I(71993),H=I(83838).Buffer,N=I(49609),G=N.base,v=N.constants.der;function B($){this.enc="der",this.name=$.name,this.entity=$,this.tree=new _,this.tree._init($.body)}function _($){G.Node.call(this,"der",$)}function T($){return $<10?"0"+$:$}xe.exports=B,B.prototype.encode=function(M,F){return this.tree._encode(M,F).join()},C(_,G.Node),_.prototype._encodeComposite=function(M,F,k,j){var K,Z=function D($,M,F,k){var j;if("seqof"===$?$="seq":"setof"===$&&($="set"),v.tagByName.hasOwnProperty($))j=v.tagByName[$];else{if("number"!=typeof $||(0|$)!==$)return k.error("Unknown tag: "+$);j=$}return j>=31?k.error("Multi-octet tag encoding unsupported"):(M||(j|=32),j|=v.tagClassByName[F||"universal"]<<6)}(M,F,k,this.reporter);if(j.length<128)return(K=new H(2))[0]=Z,K[1]=j.length,this._createEncoderBuffer([K,j]);for(var q=1,W=j.length;W>=256;W>>=8)q++;(K=new H(2+q))[0]=Z,K[1]=128|q,W=1+q;for(var J=j.length;J>0;W--,J>>=8)K[W]=255&J;return this._createEncoderBuffer([K,j])},_.prototype._encodeStr=function(M,F){if("bitstr"===F)return this._createEncoderBuffer([0|M.unused,M.data]);if("bmpstr"===F){for(var k=new H(2*M.length),j=0;j<M.length;j++)k.writeUInt16BE(M.charCodeAt(j),2*j);return this._createEncoderBuffer(k)}return"numstr"===F?this._isNumstr(M)?this._createEncoderBuffer(M):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===F?this._isPrintstr(M)?this._createEncoderBuffer(M):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(F)||"objDesc"===F?this._createEncoderBuffer(M):this.reporter.error("Encoding of string type: "+F+" unsupported")},_.prototype._encodeObjid=function(M,F,k){if("string"==typeof M){if(!F)return this.reporter.error("string objid given, but no values map found");if(!F.hasOwnProperty(M))return this.reporter.error("objid not found in values map");M=F[M].split(/[\s\.]+/g);for(var j=0;j<M.length;j++)M[j]|=0}else if(Array.isArray(M))for(M=M.slice(),j=0;j<M.length;j++)M[j]|=0;if(!Array.isArray(M))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(M));if(!k){if(M[1]>=40)return this.reporter.error("Second objid identifier OOB");M.splice(0,2,40*M[0]+M[1])}var Z=0;for(j=0;j<M.length;j++){var q=M[j];for(Z++;q>=128;q>>=7)Z++}var W=new H(Z),K=W.length-1;for(j=M.length-1;j>=0;j--)for(W[K--]=127&(q=M[j]);(q>>=7)>0;)W[K--]=128|127&q;return this._createEncoderBuffer(W)},_.prototype._encodeTime=function(M,F){var k,j=new Date(M);return"gentime"===F?k=[T(j.getFullYear()),T(j.getUTCMonth()+1),T(j.getUTCDate()),T(j.getUTCHours()),T(j.getUTCMinutes()),T(j.getUTCSeconds()),"Z"].join(""):"utctime"===F?k=[T(j.getFullYear()%100),T(j.getUTCMonth()+1),T(j.getUTCDate()),T(j.getUTCHours()),T(j.getUTCMinutes()),T(j.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+F+" time is not supported yet"),this._encodeStr(k,"octstr")},_.prototype._encodeNull=function(){return this._createEncoderBuffer("")},_.prototype._encodeInt=function(M,F){if("string"==typeof M){if(!F)return this.reporter.error("String int or enum given, but no values map");if(!F.hasOwnProperty(M))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(M));M=F[M]}if("number"!=typeof M&&!H.isBuffer(M)){var k=M.toArray();!M.sign&&128&k[0]&&k.unshift(0),M=new H(k)}if(H.isBuffer(M)){var j=M.length;0===M.length&&j++;var q=new H(j);return M.copy(q),0===M.length&&(q[0]=0),this._createEncoderBuffer(q)}if(M<128)return this._createEncoderBuffer(M);if(M<256)return this._createEncoderBuffer([0,M]);j=1;for(var Z=M;Z>=256;Z>>=8)j++;for(Z=(q=new Array(j)).length-1;Z>=0;Z--)q[Z]=255&M,M>>=8;return 128&q[0]&&q.unshift(0),this._createEncoderBuffer(new H(q))},_.prototype._encodeBool=function(M){return this._createEncoderBuffer(M?255:0)},_.prototype._use=function(M,F){return"function"==typeof M&&(M=M(F)),M._getEncoder("der").tree},_.prototype._skipDefault=function(M,F,k){var Z,j=this._baseState;if(null===j.default)return!1;var q=M.join();if(void 0===j.defaultBuffer&&(j.defaultBuffer=this._encodeValue(j.default,F,k).join()),q.length!==j.defaultBuffer.length)return!1;for(Z=0;Z<q.length;Z++)if(q[Z]!==j.defaultBuffer[Z])return!1;return!0}},22714:(xe,O,I)=>{var C=O;C.der=I(72193),C.pem=I(24816)},24816:(xe,O,I)=>{var C=I(71993),H=I(72193);function N(G){H.call(this,G),this.enc="pem"}C(N,H),xe.exports=N,N.prototype.encode=function(v,B){for(var T=H.prototype.encode.call(this,v).toString("base64"),D=["-----BEGIN "+B.label+"-----"],$=0;$<T.length;$+=64)D.push(T.slice($,$+64));return D.push("-----END "+B.label+"-----"),D.join("\n")}},96867:function(xe,O,I){!function(C,H){"use strict";function N(E,a){if(!E)throw new Error(a||"Assertion failed")}function G(E,a){E.super_=a;var f=function(){};f.prototype=a.prototype,E.prototype=new f,E.prototype.constructor=E}function v(E,a,f){if(v.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,null!==E&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(E||0,a||10,f||"be"))}var B;"object"==typeof C?C.exports=v:H.BN=v,v.BN=v,v.wordSize=26;try{B=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:I(78982).Buffer}catch{}function _(E,a){var f=E.charCodeAt(a);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function T(E,a,f){var l=_(E,f);return f-1>=a&&(l|=_(E,f-1)<<4),l}function D(E,a,f,l){for(var h=0,g=Math.min(E.length,f),x=a;x<g;x++){var P=E.charCodeAt(x)-48;h*=l,h+=P>=49?P-49+10:P>=17?P-17+10:P}return h}v.isBN=function(a){return a instanceof v||null!==a&&"object"==typeof a&&a.constructor.wordSize===v.wordSize&&Array.isArray(a.words)},v.max=function(a,f){return a.cmp(f)>0?a:f},v.min=function(a,f){return a.cmp(f)<0?a:f},v.prototype._init=function(a,f,l){if("number"==typeof a)return this._initNumber(a,f,l);if("object"==typeof a)return this._initArray(a,f,l);"hex"===f&&(f=16),N(f===(0|f)&&f>=2&&f<=36);var h=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(h++,this.negative=1),h<a.length&&(16===f?this._parseHex(a,h,l):(this._parseBase(a,f,h),"le"===l&&this._initArray(this.toArray(),f,l)))},v.prototype._initNumber=function(a,f,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(N(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),f,l)},v.prototype._initArray=function(a,f,l){if(N("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var g,x,P=0;if("be"===l)for(h=a.length-1,g=0;h>=0;h-=3)this.words[g]|=(x=a[h]|a[h-1]<<8|a[h-2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);else if("le"===l)for(h=0,g=0;h<a.length;h+=3)this.words[g]|=(x=a[h]|a[h+1]<<8|a[h+2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);return this.strip()},v.prototype._parseHex=function(a,f,l){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var P,g=0,x=0;if("be"===l)for(h=a.length-1;h>=f;h-=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;else for(h=(a.length-f)%2==0?f+1:f;h<a.length;h+=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;this.strip()},v.prototype._parseBase=function(a,f,l){this.words=[0],this.length=1;for(var h=0,g=1;g<=67108863;g*=f)h++;h--,g=g/f|0;for(var x=a.length-l,P=x%h,m=Math.min(x,x-P)+l,d=0,p=l;p<m;p+=h)d=D(a,p,p+h,f),this.imuln(g),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==P){var V=1;for(d=D(a,p,a.length,f),p=0;p<P;p++)V*=f;this.imuln(V),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},v.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},v.prototype.clone=function(){var a=new v(null);return this.copy(a),a},v.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var $=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function j(E,a,f){f.negative=a.negative^E.negative;var l=E.length+a.length|0;f.length=l,l=l-1|0;var h=0|E.words[0],g=0|a.words[0],x=h*g,m=x/67108864|0;f.words[0]=67108863&x;for(var d=1;d<l;d++){for(var p=m>>>26,V=67108863&m,L=Math.min(d,a.length-1),Y=Math.max(0,d-E.length+1);Y<=L;Y++)p+=(x=(h=0|E.words[d-Y|0])*(g=0|a.words[Y])+V)/67108864|0,V=67108863&x;f.words[d]=0|V,m=0|p}return 0!==m?f.words[d]=0|m:f.length--,f.strip()}v.prototype.toString=function(a,f){var l;if(f=0|f||1,16===(a=a||10)||"hex"===a){l="";for(var h=0,g=0,x=0;x<this.length;x++){var P=this.words[x],m=(16777215&(P<<h|g)).toString(16);l=0!=(g=P>>>24-h&16777215)||x!==this.length-1?$[6-m.length]+m+l:m+l,(h+=2)>=26&&(h-=26,x--)}for(0!==g&&(l=g.toString(16)+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(a===(0|a)&&a>=2&&a<=36){var d=M[a],p=F[a];l="";var V=this.clone();for(V.negative=0;!V.isZero();){var L=V.modn(p).toString(a);l=(V=V.idivn(p)).isZero()?L+l:$[d-L.length]+L+l}for(this.isZero()&&(l="0"+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}N(!1,"Base should be between 2 and 36")},v.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&N(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(a,f){return N(typeof B<"u"),this.toArrayLike(B,a,f)},v.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},v.prototype.toArrayLike=function(a,f,l){var h=this.byteLength(),g=l||Math.max(1,h);N(h<=g,"byte array longer than desired length"),N(g>0,"Requested array length <= 0"),this.strip();var m,d,x="le"===f,P=new a(g),p=this.clone();if(x){for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[d]=m;for(;d<g;d++)P[d]=0}else{for(d=0;d<g-h;d++)P[d]=0;for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[g-d-1]=m}return P},v.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},v.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,l=0;return 8191&f||(l+=13,f>>>=13),127&f||(l+=7,f>>>=7),15&f||(l+=4,f>>>=4),3&f||(l+=2,f>>>=2),1&f||l++,l},v.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(a+=l,26!==l)break}return a},v.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},v.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},v.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this.strip()},v.prototype.ior=function(a){return N(!(this.negative|a.negative)),this.iuor(a)},v.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},v.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},v.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=f.length,this.strip()},v.prototype.iand=function(a){return N(!(this.negative|a.negative)),this.iuand(a)},v.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},v.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},v.prototype.iuxor=function(a){var f,l;this.length>a.length?(f=this,l=a):(f=a,l=this);for(var h=0;h<l.length;h++)this.words[h]=f.words[h]^l.words[h];if(this!==f)for(;h<f.length;h++)this.words[h]=f.words[h];return this.length=f.length,this.strip()},v.prototype.ixor=function(a){return N(!(this.negative|a.negative)),this.iuxor(a)},v.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},v.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},v.prototype.inotn=function(a){N("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),l=a%26;this._expand(f),l>0&&f--;for(var h=0;h<f;h++)this.words[h]=67108863&~this.words[h];return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this.strip()},v.prototype.notn=function(a){return this.clone().inotn(a)},v.prototype.setn=function(a,f){N("number"==typeof a&&a>=0);var l=a/26|0,h=a%26;return this._expand(l+1),this.words[l]=f?this.words[l]|1<<h:this.words[l]&~(1<<h),this.strip()},v.prototype.iadd=function(a){var f,l,h;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(l=this,h=a):(l=a,h=this);for(var g=0,x=0;x<h.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+(0|h.words[x])+g),g=f>>>26;for(;0!==g&&x<l.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+g),g=f>>>26;if(this.length=l.length,0!==g)this.words[this.length]=g,this.length++;else if(l!==this)for(;x<l.length;x++)this.words[x]=l.words[x];return this},v.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},v.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h,g,l=this.cmp(a);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(h=this,g=a):(h=a,g=this);for(var x=0,P=0;P<g.length;P++)x=(f=(0|h.words[P])-(0|g.words[P])+x)>>26,this.words[P]=67108863&f;for(;0!==x&&P<h.length;P++)x=(f=(0|h.words[P])+x)>>26,this.words[P]=67108863&f;if(0===x&&P<h.length&&h!==this)for(;P<h.length;P++)this.words[P]=h.words[P];return this.length=Math.max(this.length,P),h!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(a){return this.clone().isub(a)};var Z=function(a,f,l){var m,d,p,h=a.words,g=f.words,x=l.words,P=0,V=0|h[0],L=8191&V,Y=V>>>13,le=0|h[1],Se=8191&le,Oe=le>>>13,Ve=0|h[2],Re=8191&Ve,ye=Ve>>>13,ke=0|h[3],ve=8191&ke,_e=ke>>>13,de=0|h[4],se=8191&de,re=de>>>13,ce=0|h[5],ue=8191&ce,ge=ce>>>13,Ee=0|h[6],Be=8191&Ee,De=Ee>>>13,et=0|h[7],Ke=8191&et,We=et>>>13,_t=0|h[8],U=8191&_t,w=_t>>>13,b=0|h[9],z=8191&b,ie=b>>>13,be=0|g[0],Me=8191&be,qe=be>>>13,At=0|g[1],nt=8191&At,rt=At>>>13,St=0|g[2],bt=8191&St,Mt=St>>>13,Ft=0|g[3],it=8191&Ft,mt=Ft>>>13,Rr=0|g[4],xt=8191&Rr,It=Rr>>>13,Qr=0|g[5],Tt=8191&Qr,Pt=Qr>>>13,kn=0|g[6],Fe=8191&kn,He=kn>>>13,Ze=0|g[7],Ue=8191&Ze,Ge=Ze>>>13,pt=0|g[8],Xe=8191&pt,dt=pt>>>13,Qt=0|g[9],gt=8191&Qt,wt=Qt>>>13;l.negative=a.negative^f.negative,l.length=19;var Br=(P+(m=Math.imul(L,Me))|0)+((8191&(d=(d=Math.imul(L,qe))+Math.imul(Y,Me)|0))<<13)|0;P=((p=Math.imul(Y,qe))+(d>>>13)|0)+(Br>>>26)|0,Br&=67108863,m=Math.imul(Se,Me),d=(d=Math.imul(Se,qe))+Math.imul(Oe,Me)|0,p=Math.imul(Oe,qe);var Vt=(P+(m=m+Math.imul(L,nt)|0)|0)+((8191&(d=(d=d+Math.imul(L,rt)|0)+Math.imul(Y,nt)|0))<<13)|0;P=((p=p+Math.imul(Y,rt)|0)+(d>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,m=Math.imul(Re,Me),d=(d=Math.imul(Re,qe))+Math.imul(ye,Me)|0,p=Math.imul(ye,qe),m=m+Math.imul(Se,nt)|0,d=(d=d+Math.imul(Se,rt)|0)+Math.imul(Oe,nt)|0,p=p+Math.imul(Oe,rt)|0;var Zt=(P+(m=m+Math.imul(L,bt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Mt)|0)+Math.imul(Y,bt)|0))<<13)|0;P=((p=p+Math.imul(Y,Mt)|0)+(d>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,m=Math.imul(ve,Me),d=(d=Math.imul(ve,qe))+Math.imul(_e,Me)|0,p=Math.imul(_e,qe),m=m+Math.imul(Re,nt)|0,d=(d=d+Math.imul(Re,rt)|0)+Math.imul(ye,nt)|0,p=p+Math.imul(ye,rt)|0,m=m+Math.imul(Se,bt)|0,d=(d=d+Math.imul(Se,Mt)|0)+Math.imul(Oe,bt)|0,p=p+Math.imul(Oe,Mt)|0;var Tr=(P+(m=m+Math.imul(L,it)|0)|0)+((8191&(d=(d=d+Math.imul(L,mt)|0)+Math.imul(Y,it)|0))<<13)|0;P=((p=p+Math.imul(Y,mt)|0)+(d>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,m=Math.imul(se,Me),d=(d=Math.imul(se,qe))+Math.imul(re,Me)|0,p=Math.imul(re,qe),m=m+Math.imul(ve,nt)|0,d=(d=d+Math.imul(ve,rt)|0)+Math.imul(_e,nt)|0,p=p+Math.imul(_e,rt)|0,m=m+Math.imul(Re,bt)|0,d=(d=d+Math.imul(Re,Mt)|0)+Math.imul(ye,bt)|0,p=p+Math.imul(ye,Mt)|0,m=m+Math.imul(Se,it)|0,d=(d=d+Math.imul(Se,mt)|0)+Math.imul(Oe,it)|0,p=p+Math.imul(Oe,mt)|0;var dr=(P+(m=m+Math.imul(L,xt)|0)|0)+((8191&(d=(d=d+Math.imul(L,It)|0)+Math.imul(Y,xt)|0))<<13)|0;P=((p=p+Math.imul(Y,It)|0)+(d>>>13)|0)+(dr>>>26)|0,dr&=67108863,m=Math.imul(ue,Me),d=(d=Math.imul(ue,qe))+Math.imul(ge,Me)|0,p=Math.imul(ge,qe),m=m+Math.imul(se,nt)|0,d=(d=d+Math.imul(se,rt)|0)+Math.imul(re,nt)|0,p=p+Math.imul(re,rt)|0,m=m+Math.imul(ve,bt)|0,d=(d=d+Math.imul(ve,Mt)|0)+Math.imul(_e,bt)|0,p=p+Math.imul(_e,Mt)|0,m=m+Math.imul(Re,it)|0,d=(d=d+Math.imul(Re,mt)|0)+Math.imul(ye,it)|0,p=p+Math.imul(ye,mt)|0,m=m+Math.imul(Se,xt)|0,d=(d=d+Math.imul(Se,It)|0)+Math.imul(Oe,xt)|0,p=p+Math.imul(Oe,It)|0;var or=(P+(m=m+Math.imul(L,Tt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Pt)|0)+Math.imul(Y,Tt)|0))<<13)|0;P=((p=p+Math.imul(Y,Pt)|0)+(d>>>13)|0)+(or>>>26)|0,or&=67108863,m=Math.imul(Be,Me),d=(d=Math.imul(Be,qe))+Math.imul(De,Me)|0,p=Math.imul(De,qe),m=m+Math.imul(ue,nt)|0,d=(d=d+Math.imul(ue,rt)|0)+Math.imul(ge,nt)|0,p=p+Math.imul(ge,rt)|0,m=m+Math.imul(se,bt)|0,d=(d=d+Math.imul(se,Mt)|0)+Math.imul(re,bt)|0,p=p+Math.imul(re,Mt)|0,m=m+Math.imul(ve,it)|0,d=(d=d+Math.imul(ve,mt)|0)+Math.imul(_e,it)|0,p=p+Math.imul(_e,mt)|0,m=m+Math.imul(Re,xt)|0,d=(d=d+Math.imul(Re,It)|0)+Math.imul(ye,xt)|0,p=p+Math.imul(ye,It)|0,m=m+Math.imul(Se,Tt)|0,d=(d=d+Math.imul(Se,Pt)|0)+Math.imul(Oe,Tt)|0,p=p+Math.imul(Oe,Pt)|0;var mr=(P+(m=m+Math.imul(L,Fe)|0)|0)+((8191&(d=(d=d+Math.imul(L,He)|0)+Math.imul(Y,Fe)|0))<<13)|0;P=((p=p+Math.imul(Y,He)|0)+(d>>>13)|0)+(mr>>>26)|0,mr&=67108863,m=Math.imul(Ke,Me),d=(d=Math.imul(Ke,qe))+Math.imul(We,Me)|0,p=Math.imul(We,qe),m=m+Math.imul(Be,nt)|0,d=(d=d+Math.imul(Be,rt)|0)+Math.imul(De,nt)|0,p=p+Math.imul(De,rt)|0,m=m+Math.imul(ue,bt)|0,d=(d=d+Math.imul(ue,Mt)|0)+Math.imul(ge,bt)|0,p=p+Math.imul(ge,Mt)|0,m=m+Math.imul(se,it)|0,d=(d=d+Math.imul(se,mt)|0)+Math.imul(re,it)|0,p=p+Math.imul(re,mt)|0,m=m+Math.imul(ve,xt)|0,d=(d=d+Math.imul(ve,It)|0)+Math.imul(_e,xt)|0,p=p+Math.imul(_e,It)|0,m=m+Math.imul(Re,Tt)|0,d=(d=d+Math.imul(Re,Pt)|0)+Math.imul(ye,Tt)|0,p=p+Math.imul(ye,Pt)|0,m=m+Math.imul(Se,Fe)|0,d=(d=d+Math.imul(Se,He)|0)+Math.imul(Oe,Fe)|0,p=p+Math.imul(Oe,He)|0;var ar=(P+(m=m+Math.imul(L,Ue)|0)|0)+((8191&(d=(d=d+Math.imul(L,Ge)|0)+Math.imul(Y,Ue)|0))<<13)|0;P=((p=p+Math.imul(Y,Ge)|0)+(d>>>13)|0)+(ar>>>26)|0,ar&=67108863,m=Math.imul(U,Me),d=(d=Math.imul(U,qe))+Math.imul(w,Me)|0,p=Math.imul(w,qe),m=m+Math.imul(Ke,nt)|0,d=(d=d+Math.imul(Ke,rt)|0)+Math.imul(We,nt)|0,p=p+Math.imul(We,rt)|0,m=m+Math.imul(Be,bt)|0,d=(d=d+Math.imul(Be,Mt)|0)+Math.imul(De,bt)|0,p=p+Math.imul(De,Mt)|0,m=m+Math.imul(ue,it)|0,d=(d=d+Math.imul(ue,mt)|0)+Math.imul(ge,it)|0,p=p+Math.imul(ge,mt)|0,m=m+Math.imul(se,xt)|0,d=(d=d+Math.imul(se,It)|0)+Math.imul(re,xt)|0,p=p+Math.imul(re,It)|0,m=m+Math.imul(ve,Tt)|0,d=(d=d+Math.imul(ve,Pt)|0)+Math.imul(_e,Tt)|0,p=p+Math.imul(_e,Pt)|0,m=m+Math.imul(Re,Fe)|0,d=(d=d+Math.imul(Re,He)|0)+Math.imul(ye,Fe)|0,p=p+Math.imul(ye,He)|0,m=m+Math.imul(Se,Ue)|0,d=(d=d+Math.imul(Se,Ge)|0)+Math.imul(Oe,Ue)|0,p=p+Math.imul(Oe,Ge)|0;var en=(P+(m=m+Math.imul(L,Xe)|0)|0)+((8191&(d=(d=d+Math.imul(L,dt)|0)+Math.imul(Y,Xe)|0))<<13)|0;P=((p=p+Math.imul(Y,dt)|0)+(d>>>13)|0)+(en>>>26)|0,en&=67108863,m=Math.imul(z,Me),d=(d=Math.imul(z,qe))+Math.imul(ie,Me)|0,p=Math.imul(ie,qe),m=m+Math.imul(U,nt)|0,d=(d=d+Math.imul(U,rt)|0)+Math.imul(w,nt)|0,p=p+Math.imul(w,rt)|0,m=m+Math.imul(Ke,bt)|0,d=(d=d+Math.imul(Ke,Mt)|0)+Math.imul(We,bt)|0,p=p+Math.imul(We,Mt)|0,m=m+Math.imul(Be,it)|0,d=(d=d+Math.imul(Be,mt)|0)+Math.imul(De,it)|0,p=p+Math.imul(De,mt)|0,m=m+Math.imul(ue,xt)|0,d=(d=d+Math.imul(ue,It)|0)+Math.imul(ge,xt)|0,p=p+Math.imul(ge,It)|0,m=m+Math.imul(se,Tt)|0,d=(d=d+Math.imul(se,Pt)|0)+Math.imul(re,Tt)|0,p=p+Math.imul(re,Pt)|0,m=m+Math.imul(ve,Fe)|0,d=(d=d+Math.imul(ve,He)|0)+Math.imul(_e,Fe)|0,p=p+Math.imul(_e,He)|0,m=m+Math.imul(Re,Ue)|0,d=(d=d+Math.imul(Re,Ge)|0)+Math.imul(ye,Ue)|0,p=p+Math.imul(ye,Ge)|0,m=m+Math.imul(Se,Xe)|0,d=(d=d+Math.imul(Se,dt)|0)+Math.imul(Oe,Xe)|0,p=p+Math.imul(Oe,dt)|0;var zr=(P+(m=m+Math.imul(L,gt)|0)|0)+((8191&(d=(d=d+Math.imul(L,wt)|0)+Math.imul(Y,gt)|0))<<13)|0;P=((p=p+Math.imul(Y,wt)|0)+(d>>>13)|0)+(zr>>>26)|0,zr&=67108863,m=Math.imul(z,nt),d=(d=Math.imul(z,rt))+Math.imul(ie,nt)|0,p=Math.imul(ie,rt),m=m+Math.imul(U,bt)|0,d=(d=d+Math.imul(U,Mt)|0)+Math.imul(w,bt)|0,p=p+Math.imul(w,Mt)|0,m=m+Math.imul(Ke,it)|0,d=(d=d+Math.imul(Ke,mt)|0)+Math.imul(We,it)|0,p=p+Math.imul(We,mt)|0,m=m+Math.imul(Be,xt)|0,d=(d=d+Math.imul(Be,It)|0)+Math.imul(De,xt)|0,p=p+Math.imul(De,It)|0,m=m+Math.imul(ue,Tt)|0,d=(d=d+Math.imul(ue,Pt)|0)+Math.imul(ge,Tt)|0,p=p+Math.imul(ge,Pt)|0,m=m+Math.imul(se,Fe)|0,d=(d=d+Math.imul(se,He)|0)+Math.imul(re,Fe)|0,p=p+Math.imul(re,He)|0,m=m+Math.imul(ve,Ue)|0,d=(d=d+Math.imul(ve,Ge)|0)+Math.imul(_e,Ue)|0,p=p+Math.imul(_e,Ge)|0,m=m+Math.imul(Re,Xe)|0,d=(d=d+Math.imul(Re,dt)|0)+Math.imul(ye,Xe)|0,p=p+Math.imul(ye,dt)|0;var Wr=(P+(m=m+Math.imul(Se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Se,wt)|0)+Math.imul(Oe,gt)|0))<<13)|0;P=((p=p+Math.imul(Oe,wt)|0)+(d>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,m=Math.imul(z,bt),d=(d=Math.imul(z,Mt))+Math.imul(ie,bt)|0,p=Math.imul(ie,Mt),m=m+Math.imul(U,it)|0,d=(d=d+Math.imul(U,mt)|0)+Math.imul(w,it)|0,p=p+Math.imul(w,mt)|0,m=m+Math.imul(Ke,xt)|0,d=(d=d+Math.imul(Ke,It)|0)+Math.imul(We,xt)|0,p=p+Math.imul(We,It)|0,m=m+Math.imul(Be,Tt)|0,d=(d=d+Math.imul(Be,Pt)|0)+Math.imul(De,Tt)|0,p=p+Math.imul(De,Pt)|0,m=m+Math.imul(ue,Fe)|0,d=(d=d+Math.imul(ue,He)|0)+Math.imul(ge,Fe)|0,p=p+Math.imul(ge,He)|0,m=m+Math.imul(se,Ue)|0,d=(d=d+Math.imul(se,Ge)|0)+Math.imul(re,Ue)|0,p=p+Math.imul(re,Ge)|0,m=m+Math.imul(ve,Xe)|0,d=(d=d+Math.imul(ve,dt)|0)+Math.imul(_e,Xe)|0,p=p+Math.imul(_e,dt)|0;var _r=(P+(m=m+Math.imul(Re,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Re,wt)|0)+Math.imul(ye,gt)|0))<<13)|0;P=((p=p+Math.imul(ye,wt)|0)+(d>>>13)|0)+(_r>>>26)|0,_r&=67108863,m=Math.imul(z,it),d=(d=Math.imul(z,mt))+Math.imul(ie,it)|0,p=Math.imul(ie,mt),m=m+Math.imul(U,xt)|0,d=(d=d+Math.imul(U,It)|0)+Math.imul(w,xt)|0,p=p+Math.imul(w,It)|0,m=m+Math.imul(Ke,Tt)|0,d=(d=d+Math.imul(Ke,Pt)|0)+Math.imul(We,Tt)|0,p=p+Math.imul(We,Pt)|0,m=m+Math.imul(Be,Fe)|0,d=(d=d+Math.imul(Be,He)|0)+Math.imul(De,Fe)|0,p=p+Math.imul(De,He)|0,m=m+Math.imul(ue,Ue)|0,d=(d=d+Math.imul(ue,Ge)|0)+Math.imul(ge,Ue)|0,p=p+Math.imul(ge,Ge)|0,m=m+Math.imul(se,Xe)|0,d=(d=d+Math.imul(se,dt)|0)+Math.imul(re,Xe)|0,p=p+Math.imul(re,dt)|0;var Gr=(P+(m=m+Math.imul(ve,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ve,wt)|0)+Math.imul(_e,gt)|0))<<13)|0;P=((p=p+Math.imul(_e,wt)|0)+(d>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,m=Math.imul(z,xt),d=(d=Math.imul(z,It))+Math.imul(ie,xt)|0,p=Math.imul(ie,It),m=m+Math.imul(U,Tt)|0,d=(d=d+Math.imul(U,Pt)|0)+Math.imul(w,Tt)|0,p=p+Math.imul(w,Pt)|0,m=m+Math.imul(Ke,Fe)|0,d=(d=d+Math.imul(Ke,He)|0)+Math.imul(We,Fe)|0,p=p+Math.imul(We,He)|0,m=m+Math.imul(Be,Ue)|0,d=(d=d+Math.imul(Be,Ge)|0)+Math.imul(De,Ue)|0,p=p+Math.imul(De,Ge)|0,m=m+Math.imul(ue,Xe)|0,d=(d=d+Math.imul(ue,dt)|0)+Math.imul(ge,Xe)|0,p=p+Math.imul(ge,dt)|0;var qr=(P+(m=m+Math.imul(se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(se,wt)|0)+Math.imul(re,gt)|0))<<13)|0;P=((p=p+Math.imul(re,wt)|0)+(d>>>13)|0)+(qr>>>26)|0,qr&=67108863,m=Math.imul(z,Tt),d=(d=Math.imul(z,Pt))+Math.imul(ie,Tt)|0,p=Math.imul(ie,Pt),m=m+Math.imul(U,Fe)|0,d=(d=d+Math.imul(U,He)|0)+Math.imul(w,Fe)|0,p=p+Math.imul(w,He)|0,m=m+Math.imul(Ke,Ue)|0,d=(d=d+Math.imul(Ke,Ge)|0)+Math.imul(We,Ue)|0,p=p+Math.imul(We,Ge)|0,m=m+Math.imul(Be,Xe)|0,d=(d=d+Math.imul(Be,dt)|0)+Math.imul(De,Xe)|0,p=p+Math.imul(De,dt)|0;var Yr=(P+(m=m+Math.imul(ue,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ue,wt)|0)+Math.imul(ge,gt)|0))<<13)|0;P=((p=p+Math.imul(ge,wt)|0)+(d>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,m=Math.imul(z,Fe),d=(d=Math.imul(z,He))+Math.imul(ie,Fe)|0,p=Math.imul(ie,He),m=m+Math.imul(U,Ue)|0,d=(d=d+Math.imul(U,Ge)|0)+Math.imul(w,Ue)|0,p=p+Math.imul(w,Ge)|0,m=m+Math.imul(Ke,Xe)|0,d=(d=d+Math.imul(Ke,dt)|0)+Math.imul(We,Xe)|0,p=p+Math.imul(We,dt)|0;var mn=(P+(m=m+Math.imul(Be,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Be,wt)|0)+Math.imul(De,gt)|0))<<13)|0;P=((p=p+Math.imul(De,wt)|0)+(d>>>13)|0)+(mn>>>26)|0,mn&=67108863,m=Math.imul(z,Ue),d=(d=Math.imul(z,Ge))+Math.imul(ie,Ue)|0,p=Math.imul(ie,Ge),m=m+Math.imul(U,Xe)|0,d=(d=d+Math.imul(U,dt)|0)+Math.imul(w,Xe)|0,p=p+Math.imul(w,dt)|0;var un=(P+(m=m+Math.imul(Ke,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Ke,wt)|0)+Math.imul(We,gt)|0))<<13)|0;P=((p=p+Math.imul(We,wt)|0)+(d>>>13)|0)+(un>>>26)|0,un&=67108863,m=Math.imul(z,Xe),d=(d=Math.imul(z,dt))+Math.imul(ie,Xe)|0,p=Math.imul(ie,dt);var fn=(P+(m=m+Math.imul(U,gt)|0)|0)+((8191&(d=(d=d+Math.imul(U,wt)|0)+Math.imul(w,gt)|0))<<13)|0;P=((p=p+Math.imul(w,wt)|0)+(d>>>13)|0)+(fn>>>26)|0,fn&=67108863;var xn=(P+(m=Math.imul(z,gt))|0)+((8191&(d=(d=Math.imul(z,wt))+Math.imul(ie,gt)|0))<<13)|0;return P=((p=Math.imul(ie,wt))+(d>>>13)|0)+(xn>>>26)|0,xn&=67108863,x[0]=Br,x[1]=Vt,x[2]=Zt,x[3]=Tr,x[4]=dr,x[5]=or,x[6]=mr,x[7]=ar,x[8]=en,x[9]=zr,x[10]=Wr,x[11]=_r,x[12]=Gr,x[13]=qr,x[14]=Yr,x[15]=mn,x[16]=un,x[17]=fn,x[18]=xn,0!==P&&(x[19]=P,l.length++),l};function W(E,a,f){return(new K).mulp(E,a,f)}function K(E,a){this.x=E,this.y=a}Math.imul||(Z=j),v.prototype.mulTo=function(a,f){var l,h=this.length+a.length;return l=10===this.length&&10===a.length?Z(this,a,f):h<63?j(this,a,f):h<1024?function q(E,a,f){f.negative=a.negative^E.negative,f.length=E.length+a.length;for(var l=0,h=0,g=0;g<f.length-1;g++){var x=h;h=0;for(var P=67108863&l,m=Math.min(g,a.length-1),d=Math.max(0,g-E.length+1);d<=m;d++){var Y=(0|E.words[g-d])*(0|a.words[d]),le=67108863&Y;P=67108863&(le=le+P|0),h+=(x=(x=x+(Y/67108864|0)|0)+(le>>>26)|0)>>>26,x&=67108863}f.words[g]=P,l=x,x=h}return 0!==l?f.words[g]=l:f.length--,f.strip()}(this,a,f):W(this,a,f),l},K.prototype.makeRBT=function(a){for(var f=new Array(a),l=v.prototype._countBits(a)-1,h=0;h<a;h++)f[h]=this.revBin(h,l,a);return f},K.prototype.revBin=function(a,f,l){if(0===a||a===l-1)return a;for(var h=0,g=0;g<f;g++)h|=(1&a)<<f-g-1,a>>=1;return h},K.prototype.permute=function(a,f,l,h,g,x){for(var P=0;P<x;P++)h[P]=f[a[P]],g[P]=l[a[P]]},K.prototype.transform=function(a,f,l,h,g,x){this.permute(x,a,f,l,h,g);for(var P=1;P<g;P<<=1)for(var m=P<<1,d=Math.cos(2*Math.PI/m),p=Math.sin(2*Math.PI/m),V=0;V<g;V+=m)for(var L=d,Y=p,le=0;le<P;le++){var Se=l[V+le],Oe=h[V+le],Ve=l[V+le+P],Re=h[V+le+P],ye=L*Ve-Y*Re;Re=L*Re+Y*Ve,l[V+le]=Se+(Ve=ye),h[V+le]=Oe+Re,l[V+le+P]=Se-Ve,h[V+le+P]=Oe-Re,le!==m&&(ye=d*L-p*Y,Y=d*Y+p*L,L=ye)}},K.prototype.guessLen13b=function(a,f){var l=1|Math.max(f,a),h=1&l,g=0;for(l=l/2|0;l;l>>>=1)g++;return 1<<g+1+h},K.prototype.conjugate=function(a,f,l){if(!(l<=1))for(var h=0;h<l/2;h++){var g=a[h];a[h]=a[l-h-1],a[l-h-1]=g,g=f[h],f[h]=-f[l-h-1],f[l-h-1]=-g}},K.prototype.normalize13b=function(a,f){for(var l=0,h=0;h<f/2;h++){var g=8192*Math.round(a[2*h+1]/f)+Math.round(a[2*h]/f)+l;a[h]=67108863&g,l=g<67108864?0:g/67108864|0}return a},K.prototype.convert13b=function(a,f,l,h){for(var g=0,x=0;x<f;x++)l[2*x]=8191&(g+=0|a[x]),l[2*x+1]=8191&(g>>>=13),g>>>=13;for(x=2*f;x<h;++x)l[x]=0;N(0===g),N(!(-8192&g))},K.prototype.stub=function(a){for(var f=new Array(a),l=0;l<a;l++)f[l]=0;return f},K.prototype.mulp=function(a,f,l){var h=2*this.guessLen13b(a.length,f.length),g=this.makeRBT(h),x=this.stub(h),P=new Array(h),m=new Array(h),d=new Array(h),p=new Array(h),V=new Array(h),L=new Array(h),Y=l.words;Y.length=h,this.convert13b(a.words,a.length,P,h),this.convert13b(f.words,f.length,p,h),this.transform(P,x,m,d,h,g),this.transform(p,x,V,L,h,g);for(var le=0;le<h;le++){var Se=m[le]*V[le]-d[le]*L[le];d[le]=m[le]*L[le]+d[le]*V[le],m[le]=Se}return this.conjugate(m,d,h),this.transform(m,d,Y,x,h,g),this.conjugate(Y,x,h),this.normalize13b(Y,h),l.negative=a.negative^f.negative,l.length=a.length+f.length,l.strip()},v.prototype.mul=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},v.prototype.mulf=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),W(this,a,f)},v.prototype.imul=function(a){return this.clone().mulTo(a,this)},v.prototype.imuln=function(a){N("number"==typeof a),N(a<67108864);for(var f=0,l=0;l<this.length;l++){var h=(0|this.words[l])*a,g=(67108863&h)+(67108863&f);f>>=26,f+=h/67108864|0,f+=g>>>26,this.words[l]=67108863&g}return 0!==f&&(this.words[l]=f,this.length++),this},v.prototype.muln=function(a){return this.clone().imuln(a)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(a){var f=function k(E){for(var a=new Array(E.bitLength()),f=0;f<a.length;f++){var h=f%26;a[f]=(E.words[f/26|0]&1<<h)>>>h}return a}(a);if(0===f.length)return new v(1);for(var l=this,h=0;h<f.length&&0===f[h];h++,l=l.sqr());if(++h<f.length)for(var g=l.sqr();h<f.length;h++,g=g.sqr())0!==f[h]&&(l=l.mul(g));return l},v.prototype.iushln=function(a){N("number"==typeof a&&a>=0);var g,f=a%26,l=(a-f)/26,h=67108863>>>26-f<<26-f;if(0!==f){var x=0;for(g=0;g<this.length;g++){var P=this.words[g]&h;this.words[g]=(0|this.words[g])-P<<f|x,x=P>>>26-f}x&&(this.words[g]=x,this.length++)}if(0!==l){for(g=this.length-1;g>=0;g--)this.words[g+l]=this.words[g];for(g=0;g<l;g++)this.words[g]=0;this.length+=l}return this.strip()},v.prototype.ishln=function(a){return N(0===this.negative),this.iushln(a)},v.prototype.iushrn=function(a,f,l){var h;N("number"==typeof a&&a>=0),h=f?(f-f%26)/26:0;var g=a%26,x=Math.min((a-g)/26,this.length),P=67108863^67108863>>>g<<g,m=l;if(h-=x,h=Math.max(0,h),m){for(var d=0;d<x;d++)m.words[d]=this.words[d];m.length=x}if(0!==x)if(this.length>x)for(this.length-=x,d=0;d<this.length;d++)this.words[d]=this.words[d+x];else this.words[0]=0,this.length=1;var p=0;for(d=this.length-1;d>=0&&(0!==p||d>=h);d--){var V=0|this.words[d];this.words[d]=p<<26-g|V>>>g,p=V&P}return m&&0!==p&&(m.words[m.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(a,f,l){return N(0===this.negative),this.iushrn(a,f,l)},v.prototype.shln=function(a){return this.clone().ishln(a)},v.prototype.ushln=function(a){return this.clone().iushln(a)},v.prototype.shrn=function(a){return this.clone().ishrn(a)},v.prototype.ushrn=function(a){return this.clone().iushrn(a)},v.prototype.testn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return!(this.length<=l||!(this.words[l]&1<<f))},v.prototype.imaskn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return N(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==f&&l++,this.length=Math.min(l,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this.strip())},v.prototype.maskn=function(a){return this.clone().imaskn(a)},v.prototype.iaddn=function(a){return N("number"==typeof a),N(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},v.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},v.prototype.isubn=function(a){if(N("number"==typeof a),N(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},v.prototype.addn=function(a){return this.clone().iaddn(a)},v.prototype.subn=function(a){return this.clone().isubn(a)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(a,f,l){var g;this._expand(a.length+l);var x,P=0;for(g=0;g<a.length;g++){x=(0|this.words[g+l])+P;var m=(0|a.words[g])*f;P=((x-=67108863&m)>>26)-(m/67108864|0),this.words[g+l]=67108863&x}for(;g<this.length-l;g++)P=(x=(0|this.words[g+l])+P)>>26,this.words[g+l]=67108863&x;if(0===P)return this.strip();for(N(-1===P),P=0,g=0;g<this.length;g++)P=(x=-(0|this.words[g])+P)>>26,this.words[g]=67108863&x;return this.negative=1,this.strip()},v.prototype._wordDiv=function(a,f){var l,h=this.clone(),g=a,x=0|g.words[g.length-1];0!=(l=26-this._countBits(x))&&(g=g.ushln(l),h.iushln(l),x=0|g.words[g.length-1]);var d,m=h.length-g.length;if("mod"!==f){(d=new v(null)).length=m+1,d.words=new Array(d.length);for(var p=0;p<d.length;p++)d.words[p]=0}var V=h.clone()._ishlnsubmul(g,1,m);0===V.negative&&(h=V,d&&(d.words[m]=1));for(var L=m-1;L>=0;L--){var Y=67108864*(0|h.words[g.length+L])+(0|h.words[g.length+L-1]);for(Y=Math.min(Y/x|0,67108863),h._ishlnsubmul(g,Y,L);0!==h.negative;)Y--,h.negative=0,h._ishlnsubmul(g,1,L),h.isZero()||(h.negative^=1);d&&(d.words[L]=Y)}return d&&d.strip(),h.strip(),"div"!==f&&0!==l&&h.iushrn(l),{div:d||null,mod:h}},v.prototype.divmod=function(a,f,l){return N(!a.isZero()),this.isZero()?{div:new v(0),mod:new v(0)}:0!==this.negative&&0===a.negative?(x=this.neg().divmod(a,f),"mod"!==f&&(h=x.div.neg()),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.iadd(a)),{div:h,mod:g}):0===this.negative&&0!==a.negative?(x=this.divmod(a.neg(),f),"mod"!==f&&(h=x.div.neg()),{div:h,mod:x.mod}):this.negative&a.negative?(x=this.neg().divmod(a.neg(),f),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.isub(a)),{div:x.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new v(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new v(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new v(this.modn(a.words[0]))}:this._wordDiv(a,f);var h,g,x},v.prototype.div=function(a){return this.divmod(a,"div",!1).div},v.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},v.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},v.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var l=0!==f.div.negative?f.mod.isub(a):f.mod,h=a.ushrn(1),g=a.andln(1),x=l.cmp(h);return x<0||1===g&&0===x?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},v.prototype.modn=function(a){N(a<=67108863);for(var f=(1<<26)%a,l=0,h=this.length-1;h>=0;h--)l=(f*l+(0|this.words[h]))%a;return l},v.prototype.idivn=function(a){N(a<=67108863);for(var f=0,l=this.length-1;l>=0;l--){var h=(0|this.words[l])+67108864*f;this.words[l]=h/a|0,f=h%a}return this.strip()},v.prototype.divn=function(a){return this.clone().idivn(a)},v.prototype.egcd=function(a){N(0===a.negative),N(!a.isZero());var f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=new v(0),P=new v(1),m=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++m;for(var d=l.clone(),p=f.clone();!f.isZero();){for(var V=0,L=1;!(f.words[0]&L)&&V<26;++V,L<<=1);if(V>0)for(f.iushrn(V);V-- >0;)(h.isOdd()||g.isOdd())&&(h.iadd(d),g.isub(p)),h.iushrn(1),g.iushrn(1);for(var Y=0,le=1;!(l.words[0]&le)&&Y<26;++Y,le<<=1);if(Y>0)for(l.iushrn(Y);Y-- >0;)(x.isOdd()||P.isOdd())&&(x.iadd(d),P.isub(p)),x.iushrn(1),P.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(x),g.isub(P)):(l.isub(f),x.isub(h),P.isub(g))}return{a:x,b:P,gcd:l.iushln(m)}},v.prototype._invmp=function(a){N(0===a.negative),N(!a.isZero());var V,f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var P=0,m=1;!(f.words[0]&m)&&P<26;++P,m<<=1);if(P>0)for(f.iushrn(P);P-- >0;)h.isOdd()&&h.iadd(x),h.iushrn(1);for(var d=0,p=1;!(l.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(l.iushrn(d);d-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(g)):(l.isub(f),g.isub(h))}return(V=0===f.cmpn(1)?h:g).cmpn(0)<0&&V.iadd(a),V},v.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),l=a.clone();f.negative=0,l.negative=0;for(var h=0;f.isEven()&&l.isEven();h++)f.iushrn(1),l.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var g=f.cmp(l);if(g<0){var x=f;f=l,l=x}else if(0===g||0===l.cmpn(1))break;f.isub(l)}return l.iushln(h)},v.prototype.invm=function(a){return this.egcd(a).a.umod(a)},v.prototype.isEven=function(){return!(1&this.words[0])},v.prototype.isOdd=function(){return!(1&~this.words[0])},v.prototype.andln=function(a){return this.words[0]&a},v.prototype.bincn=function(a){N("number"==typeof a);var f=a%26,l=(a-f)/26,h=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var g=h,x=l;0!==g&&x<this.length;x++){var P=0|this.words[x];g=(P+=g)>>>26,this.words[x]=P&=67108863}return 0!==g&&(this.words[x]=g,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(a){var l,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this.strip(),this.length>1)l=1;else{f&&(a=-a),N(a<=67108863,"Number is too big");var h=0|this.words[0];l=h===a?0:h<a?-1:1}return 0!==this.negative?0|-l:l},v.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},v.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var h=0|this.words[l],g=0|a.words[l];if(h!==g){h<g?f=-1:h>g&&(f=1);break}}return f},v.prototype.gtn=function(a){return 1===this.cmpn(a)},v.prototype.gt=function(a){return 1===this.cmp(a)},v.prototype.gten=function(a){return this.cmpn(a)>=0},v.prototype.gte=function(a){return this.cmp(a)>=0},v.prototype.ltn=function(a){return-1===this.cmpn(a)},v.prototype.lt=function(a){return-1===this.cmp(a)},v.prototype.lten=function(a){return this.cmpn(a)<=0},v.prototype.lte=function(a){return this.cmp(a)<=0},v.prototype.eqn=function(a){return 0===this.cmpn(a)},v.prototype.eq=function(a){return 0===this.cmp(a)},v.red=function(a){return new pe(a)},v.prototype.toRed=function(a){return N(!this.red,"Already a number in reduction context"),N(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},v.prototype.fromRed=function(){return N(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},v.prototype._forceRed=function(a){return this.red=a,this},v.prototype.forceRed=function(a){return N(!this.red,"Already a number in reduction context"),this._forceRed(a)},v.prototype.redAdd=function(a){return N(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},v.prototype.redIAdd=function(a){return N(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},v.prototype.redSub=function(a){return N(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},v.prototype.redISub=function(a){return N(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},v.prototype.redShl=function(a){return N(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},v.prototype.redMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},v.prototype.redIMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},v.prototype.redSqr=function(){return N(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return N(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return N(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return N(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return N(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(a){return N(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var J={k256:null,p224:null,p192:null,p25519:null};function X(E,a){this.name=E,this.p=new v(a,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Q(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function oe(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ne(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function me(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function pe(E){if("string"==typeof E){var a=v._prime(E);this.m=a.p,this.prime=a}else N(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}function Ie(E){pe.call(this,E),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}X.prototype._tmp=function(){var a=new v(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var l,f=a;do{this.split(f,this.tmp),l=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(l>this.n);var h=l<this.n?-1:f.ucmp(this.p);return 0===h?(f.words[0]=0,f.length=1):h>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},X.prototype.split=function(a,f){a.iushrn(this.n,0,f)},X.prototype.imulK=function(a){return a.imul(this.k)},G(Q,X),Q.prototype.split=function(a,f){for(var l=4194303,h=Math.min(a.length,9),g=0;g<h;g++)f.words[g]=a.words[g];if(f.length=h,a.length<=9)return a.words[0]=0,void(a.length=1);var x=a.words[9];for(f.words[f.length++]=x&l,g=10;g<a.length;g++){var P=0|a.words[g];a.words[g-10]=(P&l)<<4|x>>>22,x=P}a.words[g-10]=x>>>=22,a.length-=0===x&&a.length>10?10:9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,l=0;l<a.length;l++){var h=0|a.words[l];a.words[l]=67108863&(f+=977*h),f=64*h+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},G(oe,X),G(ne,X),G(me,X),me.prototype.imulK=function(a){for(var f=0,l=0;l<a.length;l++){var h=19*(0|a.words[l])+f,g=67108863&h;h>>>=26,a.words[l]=g,f=h}return 0!==f&&(a.words[a.length++]=f),a},v._prime=function(a){if(J[a])return J[a];var f;if("k256"===a)f=new Q;else if("p224"===a)f=new oe;else if("p192"===a)f=new ne;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new me}return J[a]=f,f},pe.prototype._verify1=function(a){N(0===a.negative,"red works only with positives"),N(a.red,"red works only with red numbers")},pe.prototype._verify2=function(a,f){N(!(a.negative|f.negative),"red works only with positives"),N(a.red&&a.red===f.red,"red works only with red numbers")},pe.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},pe.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},pe.prototype.add=function(a,f){this._verify2(a,f);var l=a.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},pe.prototype.iadd=function(a,f){this._verify2(a,f);var l=a.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},pe.prototype.sub=function(a,f){this._verify2(a,f);var l=a.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},pe.prototype.isub=function(a,f){this._verify2(a,f);var l=a.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},pe.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},pe.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},pe.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},pe.prototype.isqr=function(a){return this.imul(a,a.clone())},pe.prototype.sqr=function(a){return this.mul(a,a)},pe.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(N(f%2==1),3===f){var l=this.m.add(new v(1)).iushrn(2);return this.pow(a,l)}for(var h=this.m.subn(1),g=0;!h.isZero()&&0===h.andln(1);)g++,h.iushrn(1);N(!h.isZero());var x=new v(1).toRed(this),P=x.redNeg(),m=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new v(2*d*d).toRed(this);0!==this.pow(d,m).cmp(P);)d.redIAdd(P);for(var p=this.pow(d,h),V=this.pow(a,h.addn(1).iushrn(1)),L=this.pow(a,h),Y=g;0!==L.cmp(x);){for(var le=L,Se=0;0!==le.cmp(x);Se++)le=le.redSqr();N(Se<Y);var Oe=this.pow(p,new v(1).iushln(Y-Se-1));V=V.redMul(Oe),p=Oe.redSqr(),L=L.redMul(p),Y=Se}return V},pe.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},pe.prototype.pow=function(a,f){if(f.isZero())return new v(1).toRed(this);if(0===f.cmpn(1))return a.clone();var h=new Array(16);h[0]=new v(1).toRed(this),h[1]=a;for(var g=2;g<h.length;g++)h[g]=this.mul(h[g-1],a);var x=h[0],P=0,m=0,d=f.bitLength()%26;for(0===d&&(d=26),g=f.length-1;g>=0;g--){for(var p=f.words[g],V=d-1;V>=0;V--){var L=p>>V&1;x!==h[0]&&(x=this.sqr(x)),0!==L||0!==P?(P<<=1,P|=L,(4==++m||0===g&&0===V)&&(x=this.mul(x,h[P]),m=0,P=0)):m=0}d=26}return x},pe.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},pe.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},v.mont=function(a){return new Ie(a)},G(Ie,pe),Ie.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Ie.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},Ie.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new v(0)._forceRed(this);var l=a.mul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(xe=I.nmd(xe),this)},13981:(xe,O)=>{"use strict";O.byteLength=function _(k){var j=B(k),q=j[1];return 3*(j[0]+q)/4-q},O.toByteArray=function D(k){var j,Q,Z=B(k),q=Z[0],W=Z[1],K=new H(function T(k,j,Z){return 3*(j+Z)/4-Z}(0,q,W)),J=0,X=W>0?q-4:q;for(Q=0;Q<X;Q+=4)j=C[k.charCodeAt(Q)]<<18|C[k.charCodeAt(Q+1)]<<12|C[k.charCodeAt(Q+2)]<<6|C[k.charCodeAt(Q+3)],K[J++]=j>>16&255,K[J++]=j>>8&255,K[J++]=255&j;return 2===W&&(j=C[k.charCodeAt(Q)]<<2|C[k.charCodeAt(Q+1)]>>4,K[J++]=255&j),1===W&&(j=C[k.charCodeAt(Q)]<<10|C[k.charCodeAt(Q+1)]<<4|C[k.charCodeAt(Q+2)]>>2,K[J++]=j>>8&255,K[J++]=255&j),K},O.fromByteArray=function F(k){for(var j,Z=k.length,q=Z%3,W=[],K=16383,J=0,X=Z-q;J<X;J+=K)W.push(M(k,J,J+K>X?X:J+K));return 1===q?W.push(I[(j=k[Z-1])>>2]+I[j<<4&63]+"=="):2===q&&W.push(I[(j=(k[Z-2]<<8)+k[Z-1])>>10]+I[j>>4&63]+I[j<<2&63]+"="),W.join("")};for(var I=[],C=[],H=typeof Uint8Array<"u"?Uint8Array:Array,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0;G<64;++G)I[G]=N[G],C[N.charCodeAt(G)]=G;function B(k){var j=k.length;if(j%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Z=k.indexOf("=");return-1===Z&&(Z=j),[Z,Z===j?0:4-Z%4]}function $(k){return I[k>>18&63]+I[k>>12&63]+I[k>>6&63]+I[63&k]}function M(k,j,Z){for(var W=[],K=j;K<Z;K+=3)W.push($((k[K]<<16&16711680)+(k[K+1]<<8&65280)+(255&k[K+2])));return W.join("")}C[45]=62,C[95]=63},917:function(xe,O,I){!function(C,H){"use strict";function N(l,h){if(!l)throw new Error(h||"Assertion failed")}function G(l,h){l.super_=h;var g=function(){};g.prototype=h.prototype,l.prototype=new g,l.prototype.constructor=l}function v(l,h,g){if(v.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,null!==l&&(("le"===h||"be"===h)&&(g=h,h=10),this._init(l||0,h||10,g||"be"))}var B;"object"==typeof C?C.exports=v:H.BN=v,v.BN=v,v.wordSize=26;try{B=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:I(47790).Buffer}catch{}function _(l,h){var g=l.charCodeAt(h);return g>=48&&g<=57?g-48:g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:void N(!1,"Invalid character in "+l)}function T(l,h,g){var x=_(l,g);return g-1>=h&&(x|=_(l,g-1)<<4),x}function D(l,h,g,x){for(var P=0,m=0,d=Math.min(l.length,g),p=h;p<d;p++){var V=l.charCodeAt(p)-48;P*=x,m=V>=49?V-49+10:V>=17?V-17+10:V,N(V>=0&&m<x,"Invalid character"),P+=m}return P}function $(l,h){l.words=h.words,l.length=h.length,l.negative=h.negative,l.red=h.red}if(v.isBN=function(h){return h instanceof v||null!==h&&"object"==typeof h&&h.constructor.wordSize===v.wordSize&&Array.isArray(h.words)},v.max=function(h,g){return h.cmp(g)>0?h:g},v.min=function(h,g){return h.cmp(g)<0?h:g},v.prototype._init=function(h,g,x){if("number"==typeof h)return this._initNumber(h,g,x);if("object"==typeof h)return this._initArray(h,g,x);"hex"===g&&(g=16),N(g===(0|g)&&g>=2&&g<=36);var P=0;"-"===(h=h.toString().replace(/\s+/g,""))[0]&&(P++,this.negative=1),P<h.length&&(16===g?this._parseHex(h,P,x):(this._parseBase(h,g,P),"le"===x&&this._initArray(this.toArray(),g,x)))},v.prototype._initNumber=function(h,g,x){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[67108863&h],this.length=1):h<4503599627370496?(this.words=[67108863&h,h/67108864&67108863],this.length=2):(N(h<9007199254740992),this.words=[67108863&h,h/67108864&67108863,1],this.length=3),"le"===x&&this._initArray(this.toArray(),g,x)},v.prototype._initArray=function(h,g,x){if(N("number"==typeof h.length),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var m,d,p=0;if("be"===x)for(P=h.length-1,m=0;P>=0;P-=3)this.words[m]|=(d=h[P]|h[P-1]<<8|h[P-2]<<16)<<p&67108863,this.words[m+1]=d>>>26-p&67108863,(p+=24)>=26&&(p-=26,m++);else if("le"===x)for(P=0,m=0;P<h.length;P+=3)this.words[m]|=(d=h[P]|h[P+1]<<8|h[P+2]<<16)<<p&67108863,this.words[m+1]=d>>>26-p&67108863,(p+=24)>=26&&(p-=26,m++);return this._strip()},v.prototype._parseHex=function(h,g,x){this.length=Math.ceil((h.length-g)/6),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var p,m=0,d=0;if("be"===x)for(P=h.length-1;P>=g;P-=2)p=T(h,g,P)<<m,this.words[d]|=67108863&p,m>=18?(m-=18,this.words[d+=1]|=p>>>26):m+=8;else for(P=(h.length-g)%2==0?g+1:g;P<h.length;P+=2)p=T(h,g,P)<<m,this.words[d]|=67108863&p,m>=18?(m-=18,this.words[d+=1]|=p>>>26):m+=8;this._strip()},v.prototype._parseBase=function(h,g,x){this.words=[0],this.length=1;for(var P=0,m=1;m<=67108863;m*=g)P++;P--,m=m/g|0;for(var d=h.length-x,p=d%P,V=Math.min(d,d-p)+x,L=0,Y=x;Y<V;Y+=P)L=D(h,Y,Y+P,g),this.imuln(m),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L);if(0!==p){var le=1;for(L=D(h,Y,h.length,g),Y=0;Y<p;Y++)le*=g;this.imuln(le),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L)}this._strip()},v.prototype.copy=function(h){h.words=new Array(this.length);for(var g=0;g<this.length;g++)h.words[g]=this.words[g];h.length=this.length,h.negative=this.negative,h.red=this.red},v.prototype._move=function(h){$(h,this)},v.prototype.clone=function(){var h=new v(null);return this.copy(h),h},v.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},v.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},typeof Symbol<"u"&&"function"==typeof Symbol.for)try{v.prototype[Symbol.for("nodejs.util.inspect.custom")]=M}catch{v.prototype.inspect=M}else v.prototype.inspect=M;function M(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var F=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function W(l,h,g){g.negative=h.negative^l.negative;var x=l.length+h.length|0;g.length=x,x=x-1|0;var P=0|l.words[0],m=0|h.words[0],d=P*m,V=d/67108864|0;g.words[0]=67108863&d;for(var L=1;L<x;L++){for(var Y=V>>>26,le=67108863&V,Se=Math.min(L,h.length-1),Oe=Math.max(0,L-l.length+1);Oe<=Se;Oe++)Y+=(d=(P=0|l.words[L-Oe|0])*(m=0|h.words[Oe])+le)/67108864|0,le=67108863&d;g.words[L]=0|le,V=0|Y}return 0!==V?g.words[L]=0|V:g.length--,g._strip()}v.prototype.toString=function(h,g){var x;if(g=0|g||1,16===(h=h||10)||"hex"===h){x="";for(var P=0,m=0,d=0;d<this.length;d++){var p=this.words[d],V=(16777215&(p<<P|m)).toString(16);m=p>>>24-P&16777215,(P+=2)>=26&&(P-=26,d--),x=0!==m||d!==this.length-1?F[6-V.length]+V+x:V+x}for(0!==m&&(x=m.toString(16)+x);x.length%g!=0;)x="0"+x;return 0!==this.negative&&(x="-"+x),x}if(h===(0|h)&&h>=2&&h<=36){var L=k[h],Y=j[h];x="";var le=this.clone();for(le.negative=0;!le.isZero();){var Se=le.modrn(Y).toString(h);x=(le=le.idivn(Y)).isZero()?Se+x:F[L-Se.length]+Se+x}for(this.isZero()&&(x="0"+x);x.length%g!=0;)x="0"+x;return 0!==this.negative&&(x="-"+x),x}N(!1,"Base should be between 2 and 36")},v.prototype.toNumber=function(){var h=this.words[0];return 2===this.length?h+=67108864*this.words[1]:3===this.length&&1===this.words[2]?h+=4503599627370496+67108864*this.words[1]:this.length>2&&N(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-h:h},v.prototype.toJSON=function(){return this.toString(16,2)},B&&(v.prototype.toBuffer=function(h,g){return this.toArrayLike(B,h,g)}),v.prototype.toArray=function(h,g){return this.toArrayLike(Array,h,g)},v.prototype.toArrayLike=function(h,g,x){this._strip();var P=this.byteLength(),m=x||Math.max(1,P);N(P<=m,"byte array longer than desired length"),N(m>0,"Requested array length <= 0");var d=function(h,g){return h.allocUnsafe?h.allocUnsafe(g):new h(g)}(h,m);return this["_toArrayLike"+("le"===g?"LE":"BE")](d,P),d},v.prototype._toArrayLikeLE=function(h,g){for(var x=0,P=0,m=0,d=0;m<this.length;m++){var p=this.words[m]<<d|P;h[x++]=255&p,x<h.length&&(h[x++]=p>>8&255),x<h.length&&(h[x++]=p>>16&255),6===d?(x<h.length&&(h[x++]=p>>24&255),P=0,d=0):(P=p>>>24,d+=2)}if(x<h.length)for(h[x++]=P;x<h.length;)h[x++]=0},v.prototype._toArrayLikeBE=function(h,g){for(var x=h.length-1,P=0,m=0,d=0;m<this.length;m++){var p=this.words[m]<<d|P;h[x--]=255&p,x>=0&&(h[x--]=p>>8&255),x>=0&&(h[x--]=p>>16&255),6===d?(x>=0&&(h[x--]=p>>24&255),P=0,d=0):(P=p>>>24,d+=2)}if(x>=0)for(h[x--]=P;x>=0;)h[x--]=0},v.prototype._countBits=Math.clz32?function(h){return 32-Math.clz32(h)}:function(h){var g=h,x=0;return g>=4096&&(x+=13,g>>>=13),g>=64&&(x+=7,g>>>=7),g>=8&&(x+=4,g>>>=4),g>=2&&(x+=2,g>>>=2),x+g},v.prototype._zeroBits=function(h){if(0===h)return 26;var g=h,x=0;return 8191&g||(x+=13,g>>>=13),127&g||(x+=7,g>>>=7),15&g||(x+=4,g>>>=4),3&g||(x+=2,g>>>=2),1&g||x++,x},v.prototype.bitLength=function(){var g=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+g},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,g=0;g<this.length;g++){var x=this._zeroBits(this.words[g]);if(h+=x,26!==x)break}return h},v.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},v.prototype.toTwos=function(h){return 0!==this.negative?this.abs().inotn(h).iaddn(1):this.clone()},v.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var g=0;g<h.length;g++)this.words[g]=this.words[g]|h.words[g];return this._strip()},v.prototype.ior=function(h){return N(!(this.negative|h.negative)),this.iuor(h)},v.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},v.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},v.prototype.iuand=function(h){var g;g=this.length>h.length?h:this;for(var x=0;x<g.length;x++)this.words[x]=this.words[x]&h.words[x];return this.length=g.length,this._strip()},v.prototype.iand=function(h){return N(!(this.negative|h.negative)),this.iuand(h)},v.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},v.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},v.prototype.iuxor=function(h){var g,x;this.length>h.length?(g=this,x=h):(g=h,x=this);for(var P=0;P<x.length;P++)this.words[P]=g.words[P]^x.words[P];if(this!==g)for(;P<g.length;P++)this.words[P]=g.words[P];return this.length=g.length,this._strip()},v.prototype.ixor=function(h){return N(!(this.negative|h.negative)),this.iuxor(h)},v.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},v.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},v.prototype.inotn=function(h){N("number"==typeof h&&h>=0);var g=0|Math.ceil(h/26),x=h%26;this._expand(g),x>0&&g--;for(var P=0;P<g;P++)this.words[P]=67108863&~this.words[P];return x>0&&(this.words[P]=~this.words[P]&67108863>>26-x),this._strip()},v.prototype.notn=function(h){return this.clone().inotn(h)},v.prototype.setn=function(h,g){N("number"==typeof h&&h>=0);var x=h/26|0,P=h%26;return this._expand(x+1),this.words[x]=g?this.words[x]|1<<P:this.words[x]&~(1<<P),this._strip()},v.prototype.iadd=function(h){var g,x,P;if(0!==this.negative&&0===h.negative)return this.negative=0,g=this.isub(h),this.negative^=1,this._normSign();if(0===this.negative&&0!==h.negative)return h.negative=0,g=this.isub(h),h.negative=1,g._normSign();this.length>h.length?(x=this,P=h):(x=h,P=this);for(var m=0,d=0;d<P.length;d++)this.words[d]=67108863&(g=(0|x.words[d])+(0|P.words[d])+m),m=g>>>26;for(;0!==m&&d<x.length;d++)this.words[d]=67108863&(g=(0|x.words[d])+m),m=g>>>26;if(this.length=x.length,0!==m)this.words[this.length]=m,this.length++;else if(x!==this)for(;d<x.length;d++)this.words[d]=x.words[d];return this},v.prototype.add=function(h){var g;return 0!==h.negative&&0===this.negative?(h.negative=0,g=this.sub(h),h.negative^=1,g):0===h.negative&&0!==this.negative?(this.negative=0,g=h.sub(this),this.negative=1,g):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},v.prototype.isub=function(h){if(0!==h.negative){h.negative=0;var g=this.iadd(h);return h.negative=1,g._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var P,m,x=this.cmp(h);if(0===x)return this.negative=0,this.length=1,this.words[0]=0,this;x>0?(P=this,m=h):(P=h,m=this);for(var d=0,p=0;p<m.length;p++)d=(g=(0|P.words[p])-(0|m.words[p])+d)>>26,this.words[p]=67108863&g;for(;0!==d&&p<P.length;p++)d=(g=(0|P.words[p])+d)>>26,this.words[p]=67108863&g;if(0===d&&p<P.length&&P!==this)for(;p<P.length;p++)this.words[p]=P.words[p];return this.length=Math.max(this.length,p),P!==this&&(this.negative=1),this._strip()},v.prototype.sub=function(h){return this.clone().isub(h)};var K=function(h,g,x){var V,L,Y,P=h.words,m=g.words,d=x.words,p=0,le=0|P[0],Se=8191&le,Oe=le>>>13,Ve=0|P[1],Re=8191&Ve,ye=Ve>>>13,ke=0|P[2],ve=8191&ke,_e=ke>>>13,de=0|P[3],se=8191&de,re=de>>>13,ce=0|P[4],ue=8191&ce,ge=ce>>>13,Ee=0|P[5],Be=8191&Ee,De=Ee>>>13,et=0|P[6],Ke=8191&et,We=et>>>13,_t=0|P[7],U=8191&_t,w=_t>>>13,b=0|P[8],z=8191&b,ie=b>>>13,be=0|P[9],Me=8191&be,qe=be>>>13,At=0|m[0],nt=8191&At,rt=At>>>13,St=0|m[1],bt=8191&St,Mt=St>>>13,Ft=0|m[2],it=8191&Ft,mt=Ft>>>13,Rr=0|m[3],xt=8191&Rr,It=Rr>>>13,Qr=0|m[4],Tt=8191&Qr,Pt=Qr>>>13,kn=0|m[5],Fe=8191&kn,He=kn>>>13,Ze=0|m[6],Ue=8191&Ze,Ge=Ze>>>13,pt=0|m[7],Xe=8191&pt,dt=pt>>>13,Qt=0|m[8],gt=8191&Qt,wt=Qt>>>13,Br=0|m[9],Vt=8191&Br,Zt=Br>>>13;x.negative=h.negative^g.negative,x.length=19;var Tr=(p+(V=Math.imul(Se,nt))|0)+((8191&(L=(L=Math.imul(Se,rt))+Math.imul(Oe,nt)|0))<<13)|0;p=((Y=Math.imul(Oe,rt))+(L>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,V=Math.imul(Re,nt),L=(L=Math.imul(Re,rt))+Math.imul(ye,nt)|0,Y=Math.imul(ye,rt);var dr=(p+(V=V+Math.imul(Se,bt)|0)|0)+((8191&(L=(L=L+Math.imul(Se,Mt)|0)+Math.imul(Oe,bt)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,Mt)|0)+(L>>>13)|0)+(dr>>>26)|0,dr&=67108863,V=Math.imul(ve,nt),L=(L=Math.imul(ve,rt))+Math.imul(_e,nt)|0,Y=Math.imul(_e,rt),V=V+Math.imul(Re,bt)|0,L=(L=L+Math.imul(Re,Mt)|0)+Math.imul(ye,bt)|0,Y=Y+Math.imul(ye,Mt)|0;var or=(p+(V=V+Math.imul(Se,it)|0)|0)+((8191&(L=(L=L+Math.imul(Se,mt)|0)+Math.imul(Oe,it)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,mt)|0)+(L>>>13)|0)+(or>>>26)|0,or&=67108863,V=Math.imul(se,nt),L=(L=Math.imul(se,rt))+Math.imul(re,nt)|0,Y=Math.imul(re,rt),V=V+Math.imul(ve,bt)|0,L=(L=L+Math.imul(ve,Mt)|0)+Math.imul(_e,bt)|0,Y=Y+Math.imul(_e,Mt)|0,V=V+Math.imul(Re,it)|0,L=(L=L+Math.imul(Re,mt)|0)+Math.imul(ye,it)|0,Y=Y+Math.imul(ye,mt)|0;var mr=(p+(V=V+Math.imul(Se,xt)|0)|0)+((8191&(L=(L=L+Math.imul(Se,It)|0)+Math.imul(Oe,xt)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,It)|0)+(L>>>13)|0)+(mr>>>26)|0,mr&=67108863,V=Math.imul(ue,nt),L=(L=Math.imul(ue,rt))+Math.imul(ge,nt)|0,Y=Math.imul(ge,rt),V=V+Math.imul(se,bt)|0,L=(L=L+Math.imul(se,Mt)|0)+Math.imul(re,bt)|0,Y=Y+Math.imul(re,Mt)|0,V=V+Math.imul(ve,it)|0,L=(L=L+Math.imul(ve,mt)|0)+Math.imul(_e,it)|0,Y=Y+Math.imul(_e,mt)|0,V=V+Math.imul(Re,xt)|0,L=(L=L+Math.imul(Re,It)|0)+Math.imul(ye,xt)|0,Y=Y+Math.imul(ye,It)|0;var ar=(p+(V=V+Math.imul(Se,Tt)|0)|0)+((8191&(L=(L=L+Math.imul(Se,Pt)|0)+Math.imul(Oe,Tt)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,Pt)|0)+(L>>>13)|0)+(ar>>>26)|0,ar&=67108863,V=Math.imul(Be,nt),L=(L=Math.imul(Be,rt))+Math.imul(De,nt)|0,Y=Math.imul(De,rt),V=V+Math.imul(ue,bt)|0,L=(L=L+Math.imul(ue,Mt)|0)+Math.imul(ge,bt)|0,Y=Y+Math.imul(ge,Mt)|0,V=V+Math.imul(se,it)|0,L=(L=L+Math.imul(se,mt)|0)+Math.imul(re,it)|0,Y=Y+Math.imul(re,mt)|0,V=V+Math.imul(ve,xt)|0,L=(L=L+Math.imul(ve,It)|0)+Math.imul(_e,xt)|0,Y=Y+Math.imul(_e,It)|0,V=V+Math.imul(Re,Tt)|0,L=(L=L+Math.imul(Re,Pt)|0)+Math.imul(ye,Tt)|0,Y=Y+Math.imul(ye,Pt)|0;var en=(p+(V=V+Math.imul(Se,Fe)|0)|0)+((8191&(L=(L=L+Math.imul(Se,He)|0)+Math.imul(Oe,Fe)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,He)|0)+(L>>>13)|0)+(en>>>26)|0,en&=67108863,V=Math.imul(Ke,nt),L=(L=Math.imul(Ke,rt))+Math.imul(We,nt)|0,Y=Math.imul(We,rt),V=V+Math.imul(Be,bt)|0,L=(L=L+Math.imul(Be,Mt)|0)+Math.imul(De,bt)|0,Y=Y+Math.imul(De,Mt)|0,V=V+Math.imul(ue,it)|0,L=(L=L+Math.imul(ue,mt)|0)+Math.imul(ge,it)|0,Y=Y+Math.imul(ge,mt)|0,V=V+Math.imul(se,xt)|0,L=(L=L+Math.imul(se,It)|0)+Math.imul(re,xt)|0,Y=Y+Math.imul(re,It)|0,V=V+Math.imul(ve,Tt)|0,L=(L=L+Math.imul(ve,Pt)|0)+Math.imul(_e,Tt)|0,Y=Y+Math.imul(_e,Pt)|0,V=V+Math.imul(Re,Fe)|0,L=(L=L+Math.imul(Re,He)|0)+Math.imul(ye,Fe)|0,Y=Y+Math.imul(ye,He)|0;var zr=(p+(V=V+Math.imul(Se,Ue)|0)|0)+((8191&(L=(L=L+Math.imul(Se,Ge)|0)+Math.imul(Oe,Ue)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,Ge)|0)+(L>>>13)|0)+(zr>>>26)|0,zr&=67108863,V=Math.imul(U,nt),L=(L=Math.imul(U,rt))+Math.imul(w,nt)|0,Y=Math.imul(w,rt),V=V+Math.imul(Ke,bt)|0,L=(L=L+Math.imul(Ke,Mt)|0)+Math.imul(We,bt)|0,Y=Y+Math.imul(We,Mt)|0,V=V+Math.imul(Be,it)|0,L=(L=L+Math.imul(Be,mt)|0)+Math.imul(De,it)|0,Y=Y+Math.imul(De,mt)|0,V=V+Math.imul(ue,xt)|0,L=(L=L+Math.imul(ue,It)|0)+Math.imul(ge,xt)|0,Y=Y+Math.imul(ge,It)|0,V=V+Math.imul(se,Tt)|0,L=(L=L+Math.imul(se,Pt)|0)+Math.imul(re,Tt)|0,Y=Y+Math.imul(re,Pt)|0,V=V+Math.imul(ve,Fe)|0,L=(L=L+Math.imul(ve,He)|0)+Math.imul(_e,Fe)|0,Y=Y+Math.imul(_e,He)|0,V=V+Math.imul(Re,Ue)|0,L=(L=L+Math.imul(Re,Ge)|0)+Math.imul(ye,Ue)|0,Y=Y+Math.imul(ye,Ge)|0;var Wr=(p+(V=V+Math.imul(Se,Xe)|0)|0)+((8191&(L=(L=L+Math.imul(Se,dt)|0)+Math.imul(Oe,Xe)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,dt)|0)+(L>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,V=Math.imul(z,nt),L=(L=Math.imul(z,rt))+Math.imul(ie,nt)|0,Y=Math.imul(ie,rt),V=V+Math.imul(U,bt)|0,L=(L=L+Math.imul(U,Mt)|0)+Math.imul(w,bt)|0,Y=Y+Math.imul(w,Mt)|0,V=V+Math.imul(Ke,it)|0,L=(L=L+Math.imul(Ke,mt)|0)+Math.imul(We,it)|0,Y=Y+Math.imul(We,mt)|0,V=V+Math.imul(Be,xt)|0,L=(L=L+Math.imul(Be,It)|0)+Math.imul(De,xt)|0,Y=Y+Math.imul(De,It)|0,V=V+Math.imul(ue,Tt)|0,L=(L=L+Math.imul(ue,Pt)|0)+Math.imul(ge,Tt)|0,Y=Y+Math.imul(ge,Pt)|0,V=V+Math.imul(se,Fe)|0,L=(L=L+Math.imul(se,He)|0)+Math.imul(re,Fe)|0,Y=Y+Math.imul(re,He)|0,V=V+Math.imul(ve,Ue)|0,L=(L=L+Math.imul(ve,Ge)|0)+Math.imul(_e,Ue)|0,Y=Y+Math.imul(_e,Ge)|0,V=V+Math.imul(Re,Xe)|0,L=(L=L+Math.imul(Re,dt)|0)+Math.imul(ye,Xe)|0,Y=Y+Math.imul(ye,dt)|0;var _r=(p+(V=V+Math.imul(Se,gt)|0)|0)+((8191&(L=(L=L+Math.imul(Se,wt)|0)+Math.imul(Oe,gt)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,wt)|0)+(L>>>13)|0)+(_r>>>26)|0,_r&=67108863,V=Math.imul(Me,nt),L=(L=Math.imul(Me,rt))+Math.imul(qe,nt)|0,Y=Math.imul(qe,rt),V=V+Math.imul(z,bt)|0,L=(L=L+Math.imul(z,Mt)|0)+Math.imul(ie,bt)|0,Y=Y+Math.imul(ie,Mt)|0,V=V+Math.imul(U,it)|0,L=(L=L+Math.imul(U,mt)|0)+Math.imul(w,it)|0,Y=Y+Math.imul(w,mt)|0,V=V+Math.imul(Ke,xt)|0,L=(L=L+Math.imul(Ke,It)|0)+Math.imul(We,xt)|0,Y=Y+Math.imul(We,It)|0,V=V+Math.imul(Be,Tt)|0,L=(L=L+Math.imul(Be,Pt)|0)+Math.imul(De,Tt)|0,Y=Y+Math.imul(De,Pt)|0,V=V+Math.imul(ue,Fe)|0,L=(L=L+Math.imul(ue,He)|0)+Math.imul(ge,Fe)|0,Y=Y+Math.imul(ge,He)|0,V=V+Math.imul(se,Ue)|0,L=(L=L+Math.imul(se,Ge)|0)+Math.imul(re,Ue)|0,Y=Y+Math.imul(re,Ge)|0,V=V+Math.imul(ve,Xe)|0,L=(L=L+Math.imul(ve,dt)|0)+Math.imul(_e,Xe)|0,Y=Y+Math.imul(_e,dt)|0,V=V+Math.imul(Re,gt)|0,L=(L=L+Math.imul(Re,wt)|0)+Math.imul(ye,gt)|0,Y=Y+Math.imul(ye,wt)|0;var Gr=(p+(V=V+Math.imul(Se,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(Se,Zt)|0)+Math.imul(Oe,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(Oe,Zt)|0)+(L>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,V=Math.imul(Me,bt),L=(L=Math.imul(Me,Mt))+Math.imul(qe,bt)|0,Y=Math.imul(qe,Mt),V=V+Math.imul(z,it)|0,L=(L=L+Math.imul(z,mt)|0)+Math.imul(ie,it)|0,Y=Y+Math.imul(ie,mt)|0,V=V+Math.imul(U,xt)|0,L=(L=L+Math.imul(U,It)|0)+Math.imul(w,xt)|0,Y=Y+Math.imul(w,It)|0,V=V+Math.imul(Ke,Tt)|0,L=(L=L+Math.imul(Ke,Pt)|0)+Math.imul(We,Tt)|0,Y=Y+Math.imul(We,Pt)|0,V=V+Math.imul(Be,Fe)|0,L=(L=L+Math.imul(Be,He)|0)+Math.imul(De,Fe)|0,Y=Y+Math.imul(De,He)|0,V=V+Math.imul(ue,Ue)|0,L=(L=L+Math.imul(ue,Ge)|0)+Math.imul(ge,Ue)|0,Y=Y+Math.imul(ge,Ge)|0,V=V+Math.imul(se,Xe)|0,L=(L=L+Math.imul(se,dt)|0)+Math.imul(re,Xe)|0,Y=Y+Math.imul(re,dt)|0,V=V+Math.imul(ve,gt)|0,L=(L=L+Math.imul(ve,wt)|0)+Math.imul(_e,gt)|0,Y=Y+Math.imul(_e,wt)|0;var qr=(p+(V=V+Math.imul(Re,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(Re,Zt)|0)+Math.imul(ye,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(ye,Zt)|0)+(L>>>13)|0)+(qr>>>26)|0,qr&=67108863,V=Math.imul(Me,it),L=(L=Math.imul(Me,mt))+Math.imul(qe,it)|0,Y=Math.imul(qe,mt),V=V+Math.imul(z,xt)|0,L=(L=L+Math.imul(z,It)|0)+Math.imul(ie,xt)|0,Y=Y+Math.imul(ie,It)|0,V=V+Math.imul(U,Tt)|0,L=(L=L+Math.imul(U,Pt)|0)+Math.imul(w,Tt)|0,Y=Y+Math.imul(w,Pt)|0,V=V+Math.imul(Ke,Fe)|0,L=(L=L+Math.imul(Ke,He)|0)+Math.imul(We,Fe)|0,Y=Y+Math.imul(We,He)|0,V=V+Math.imul(Be,Ue)|0,L=(L=L+Math.imul(Be,Ge)|0)+Math.imul(De,Ue)|0,Y=Y+Math.imul(De,Ge)|0,V=V+Math.imul(ue,Xe)|0,L=(L=L+Math.imul(ue,dt)|0)+Math.imul(ge,Xe)|0,Y=Y+Math.imul(ge,dt)|0,V=V+Math.imul(se,gt)|0,L=(L=L+Math.imul(se,wt)|0)+Math.imul(re,gt)|0,Y=Y+Math.imul(re,wt)|0;var Yr=(p+(V=V+Math.imul(ve,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(ve,Zt)|0)+Math.imul(_e,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(_e,Zt)|0)+(L>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,V=Math.imul(Me,xt),L=(L=Math.imul(Me,It))+Math.imul(qe,xt)|0,Y=Math.imul(qe,It),V=V+Math.imul(z,Tt)|0,L=(L=L+Math.imul(z,Pt)|0)+Math.imul(ie,Tt)|0,Y=Y+Math.imul(ie,Pt)|0,V=V+Math.imul(U,Fe)|0,L=(L=L+Math.imul(U,He)|0)+Math.imul(w,Fe)|0,Y=Y+Math.imul(w,He)|0,V=V+Math.imul(Ke,Ue)|0,L=(L=L+Math.imul(Ke,Ge)|0)+Math.imul(We,Ue)|0,Y=Y+Math.imul(We,Ge)|0,V=V+Math.imul(Be,Xe)|0,L=(L=L+Math.imul(Be,dt)|0)+Math.imul(De,Xe)|0,Y=Y+Math.imul(De,dt)|0,V=V+Math.imul(ue,gt)|0,L=(L=L+Math.imul(ue,wt)|0)+Math.imul(ge,gt)|0,Y=Y+Math.imul(ge,wt)|0;var mn=(p+(V=V+Math.imul(se,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(se,Zt)|0)+Math.imul(re,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(re,Zt)|0)+(L>>>13)|0)+(mn>>>26)|0,mn&=67108863,V=Math.imul(Me,Tt),L=(L=Math.imul(Me,Pt))+Math.imul(qe,Tt)|0,Y=Math.imul(qe,Pt),V=V+Math.imul(z,Fe)|0,L=(L=L+Math.imul(z,He)|0)+Math.imul(ie,Fe)|0,Y=Y+Math.imul(ie,He)|0,V=V+Math.imul(U,Ue)|0,L=(L=L+Math.imul(U,Ge)|0)+Math.imul(w,Ue)|0,Y=Y+Math.imul(w,Ge)|0,V=V+Math.imul(Ke,Xe)|0,L=(L=L+Math.imul(Ke,dt)|0)+Math.imul(We,Xe)|0,Y=Y+Math.imul(We,dt)|0,V=V+Math.imul(Be,gt)|0,L=(L=L+Math.imul(Be,wt)|0)+Math.imul(De,gt)|0,Y=Y+Math.imul(De,wt)|0;var un=(p+(V=V+Math.imul(ue,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(ue,Zt)|0)+Math.imul(ge,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(ge,Zt)|0)+(L>>>13)|0)+(un>>>26)|0,un&=67108863,V=Math.imul(Me,Fe),L=(L=Math.imul(Me,He))+Math.imul(qe,Fe)|0,Y=Math.imul(qe,He),V=V+Math.imul(z,Ue)|0,L=(L=L+Math.imul(z,Ge)|0)+Math.imul(ie,Ue)|0,Y=Y+Math.imul(ie,Ge)|0,V=V+Math.imul(U,Xe)|0,L=(L=L+Math.imul(U,dt)|0)+Math.imul(w,Xe)|0,Y=Y+Math.imul(w,dt)|0,V=V+Math.imul(Ke,gt)|0,L=(L=L+Math.imul(Ke,wt)|0)+Math.imul(We,gt)|0,Y=Y+Math.imul(We,wt)|0;var fn=(p+(V=V+Math.imul(Be,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(Be,Zt)|0)+Math.imul(De,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(De,Zt)|0)+(L>>>13)|0)+(fn>>>26)|0,fn&=67108863,V=Math.imul(Me,Ue),L=(L=Math.imul(Me,Ge))+Math.imul(qe,Ue)|0,Y=Math.imul(qe,Ge),V=V+Math.imul(z,Xe)|0,L=(L=L+Math.imul(z,dt)|0)+Math.imul(ie,Xe)|0,Y=Y+Math.imul(ie,dt)|0,V=V+Math.imul(U,gt)|0,L=(L=L+Math.imul(U,wt)|0)+Math.imul(w,gt)|0,Y=Y+Math.imul(w,wt)|0;var xn=(p+(V=V+Math.imul(Ke,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(Ke,Zt)|0)+Math.imul(We,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(We,Zt)|0)+(L>>>13)|0)+(xn>>>26)|0,xn&=67108863,V=Math.imul(Me,Xe),L=(L=Math.imul(Me,dt))+Math.imul(qe,Xe)|0,Y=Math.imul(qe,dt),V=V+Math.imul(z,gt)|0,L=(L=L+Math.imul(z,wt)|0)+Math.imul(ie,gt)|0,Y=Y+Math.imul(ie,wt)|0;var Fa=(p+(V=V+Math.imul(U,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(U,Zt)|0)+Math.imul(w,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(w,Zt)|0)+(L>>>13)|0)+(Fa>>>26)|0,Fa&=67108863,V=Math.imul(Me,gt),L=(L=Math.imul(Me,wt))+Math.imul(qe,gt)|0,Y=Math.imul(qe,wt);var ya=(p+(V=V+Math.imul(z,Vt)|0)|0)+((8191&(L=(L=L+Math.imul(z,Zt)|0)+Math.imul(ie,Vt)|0))<<13)|0;p=((Y=Y+Math.imul(ie,Zt)|0)+(L>>>13)|0)+(ya>>>26)|0,ya&=67108863;var xo=(p+(V=Math.imul(Me,Vt))|0)+((8191&(L=(L=Math.imul(Me,Zt))+Math.imul(qe,Vt)|0))<<13)|0;return p=((Y=Math.imul(qe,Zt))+(L>>>13)|0)+(xo>>>26)|0,xo&=67108863,d[0]=Tr,d[1]=dr,d[2]=or,d[3]=mr,d[4]=ar,d[5]=en,d[6]=zr,d[7]=Wr,d[8]=_r,d[9]=Gr,d[10]=qr,d[11]=Yr,d[12]=mn,d[13]=un,d[14]=fn,d[15]=xn,d[16]=Fa,d[17]=ya,d[18]=xo,0!==p&&(d[19]=p,x.length++),x};function J(l,h,g){g.negative=h.negative^l.negative,g.length=l.length+h.length;for(var x=0,P=0,m=0;m<g.length-1;m++){var d=P;P=0;for(var p=67108863&x,V=Math.min(m,h.length-1),L=Math.max(0,m-l.length+1);L<=V;L++){var Oe=(0|l.words[m-L])*(0|h.words[L]),Ve=67108863&Oe;p=67108863&(Ve=Ve+p|0),P+=(d=(d=d+(Oe/67108864|0)|0)+(Ve>>>26)|0)>>>26,d&=67108863}g.words[m]=p,x=d,d=P}return 0!==x?g.words[m]=x:g.length--,g._strip()}function X(l,h,g){return J(l,h,g)}function Q(l,h){this.x=l,this.y=h}Math.imul||(K=W),v.prototype.mulTo=function(h,g){var P=this.length+h.length;return 10===this.length&&10===h.length?K(this,h,g):P<63?W(this,h,g):P<1024?J(this,h,g):X(this,h,g)},Q.prototype.makeRBT=function(h){for(var g=new Array(h),x=v.prototype._countBits(h)-1,P=0;P<h;P++)g[P]=this.revBin(P,x,h);return g},Q.prototype.revBin=function(h,g,x){if(0===h||h===x-1)return h;for(var P=0,m=0;m<g;m++)P|=(1&h)<<g-m-1,h>>=1;return P},Q.prototype.permute=function(h,g,x,P,m,d){for(var p=0;p<d;p++)P[p]=g[h[p]],m[p]=x[h[p]]},Q.prototype.transform=function(h,g,x,P,m,d){this.permute(d,h,g,x,P,m);for(var p=1;p<m;p<<=1)for(var V=p<<1,L=Math.cos(2*Math.PI/V),Y=Math.sin(2*Math.PI/V),le=0;le<m;le+=V)for(var Se=L,Oe=Y,Ve=0;Ve<p;Ve++){var Re=x[le+Ve],ye=P[le+Ve],ke=x[le+Ve+p],ve=P[le+Ve+p],_e=Se*ke-Oe*ve;ve=Se*ve+Oe*ke,x[le+Ve]=Re+(ke=_e),P[le+Ve]=ye+ve,x[le+Ve+p]=Re-ke,P[le+Ve+p]=ye-ve,Ve!==V&&(_e=L*Se-Y*Oe,Oe=L*Oe+Y*Se,Se=_e)}},Q.prototype.guessLen13b=function(h,g){var x=1|Math.max(g,h),P=1&x,m=0;for(x=x/2|0;x;x>>>=1)m++;return 1<<m+1+P},Q.prototype.conjugate=function(h,g,x){if(!(x<=1))for(var P=0;P<x/2;P++){var m=h[P];h[P]=h[x-P-1],h[x-P-1]=m,m=g[P],g[P]=-g[x-P-1],g[x-P-1]=-m}},Q.prototype.normalize13b=function(h,g){for(var x=0,P=0;P<g/2;P++){var m=8192*Math.round(h[2*P+1]/g)+Math.round(h[2*P]/g)+x;h[P]=67108863&m,x=m<67108864?0:m/67108864|0}return h},Q.prototype.convert13b=function(h,g,x,P){for(var m=0,d=0;d<g;d++)x[2*d]=8191&(m+=0|h[d]),x[2*d+1]=8191&(m>>>=13),m>>>=13;for(d=2*g;d<P;++d)x[d]=0;N(0===m),N(!(-8192&m))},Q.prototype.stub=function(h){for(var g=new Array(h),x=0;x<h;x++)g[x]=0;return g},Q.prototype.mulp=function(h,g,x){var P=2*this.guessLen13b(h.length,g.length),m=this.makeRBT(P),d=this.stub(P),p=new Array(P),V=new Array(P),L=new Array(P),Y=new Array(P),le=new Array(P),Se=new Array(P),Oe=x.words;Oe.length=P,this.convert13b(h.words,h.length,p,P),this.convert13b(g.words,g.length,Y,P),this.transform(p,d,V,L,P,m),this.transform(Y,d,le,Se,P,m);for(var Ve=0;Ve<P;Ve++){var Re=V[Ve]*le[Ve]-L[Ve]*Se[Ve];L[Ve]=V[Ve]*Se[Ve]+L[Ve]*le[Ve],V[Ve]=Re}return this.conjugate(V,L,P),this.transform(V,L,Oe,d,P,m),this.conjugate(Oe,d,P),this.normalize13b(Oe,P),x.negative=h.negative^g.negative,x.length=h.length+g.length,x._strip()},v.prototype.mul=function(h){var g=new v(null);return g.words=new Array(this.length+h.length),this.mulTo(h,g)},v.prototype.mulf=function(h){var g=new v(null);return g.words=new Array(this.length+h.length),X(this,h,g)},v.prototype.imul=function(h){return this.clone().mulTo(h,this)},v.prototype.imuln=function(h){var g=h<0;g&&(h=-h),N("number"==typeof h),N(h<67108864);for(var x=0,P=0;P<this.length;P++){var m=(0|this.words[P])*h,d=(67108863&m)+(67108863&x);x>>=26,x+=m/67108864|0,x+=d>>>26,this.words[P]=67108863&d}return 0!==x&&(this.words[P]=x,this.length++),g?this.ineg():this},v.prototype.muln=function(h){return this.clone().imuln(h)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(h){var g=function q(l){for(var h=new Array(l.bitLength()),g=0;g<h.length;g++)h[g]=l.words[g/26|0]>>>g%26&1;return h}(h);if(0===g.length)return new v(1);for(var x=this,P=0;P<g.length&&0===g[P];P++,x=x.sqr());if(++P<g.length)for(var m=x.sqr();P<g.length;P++,m=m.sqr())0!==g[P]&&(x=x.mul(m));return x},v.prototype.iushln=function(h){N("number"==typeof h&&h>=0);var m,g=h%26,x=(h-g)/26,P=67108863>>>26-g<<26-g;if(0!==g){var d=0;for(m=0;m<this.length;m++){var p=this.words[m]&P;this.words[m]=(0|this.words[m])-p<<g|d,d=p>>>26-g}d&&(this.words[m]=d,this.length++)}if(0!==x){for(m=this.length-1;m>=0;m--)this.words[m+x]=this.words[m];for(m=0;m<x;m++)this.words[m]=0;this.length+=x}return this._strip()},v.prototype.ishln=function(h){return N(0===this.negative),this.iushln(h)},v.prototype.iushrn=function(h,g,x){var P;N("number"==typeof h&&h>=0),P=g?(g-g%26)/26:0;var m=h%26,d=Math.min((h-m)/26,this.length),p=67108863^67108863>>>m<<m,V=x;if(P-=d,P=Math.max(0,P),V){for(var L=0;L<d;L++)V.words[L]=this.words[L];V.length=d}if(0!==d)if(this.length>d)for(this.length-=d,L=0;L<this.length;L++)this.words[L]=this.words[L+d];else this.words[0]=0,this.length=1;var Y=0;for(L=this.length-1;L>=0&&(0!==Y||L>=P);L--){var le=0|this.words[L];this.words[L]=Y<<26-m|le>>>m,Y=le&p}return V&&0!==Y&&(V.words[V.length++]=Y),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},v.prototype.ishrn=function(h,g,x){return N(0===this.negative),this.iushrn(h,g,x)},v.prototype.shln=function(h){return this.clone().ishln(h)},v.prototype.ushln=function(h){return this.clone().iushln(h)},v.prototype.shrn=function(h){return this.clone().ishrn(h)},v.prototype.ushrn=function(h){return this.clone().iushrn(h)},v.prototype.testn=function(h){N("number"==typeof h&&h>=0);var g=h%26,x=(h-g)/26;return!(this.length<=x||!(this.words[x]&1<<g))},v.prototype.imaskn=function(h){N("number"==typeof h&&h>=0);var g=h%26,x=(h-g)/26;return N(0===this.negative,"imaskn works only with positive numbers"),this.length<=x?this:(0!==g&&x++,this.length=Math.min(x,this.length),0!==g&&(this.words[this.length-1]&=67108863^67108863>>>g<<g),this._strip())},v.prototype.maskn=function(h){return this.clone().imaskn(h)},v.prototype.iaddn=function(h){return N("number"==typeof h),N(h<67108864),h<0?this.isubn(-h):0!==this.negative?1===this.length&&(0|this.words[0])<=h?(this.words[0]=h-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},v.prototype._iaddn=function(h){this.words[0]+=h;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},v.prototype.isubn=function(h){if(N("number"==typeof h),N(h<67108864),h<0)return this.iaddn(-h);if(0!==this.negative)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},v.prototype.addn=function(h){return this.clone().iaddn(h)},v.prototype.subn=function(h){return this.clone().isubn(h)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(h,g,x){var m;this._expand(h.length+x);var d,p=0;for(m=0;m<h.length;m++){d=(0|this.words[m+x])+p;var V=(0|h.words[m])*g;p=((d-=67108863&V)>>26)-(V/67108864|0),this.words[m+x]=67108863&d}for(;m<this.length-x;m++)p=(d=(0|this.words[m+x])+p)>>26,this.words[m+x]=67108863&d;if(0===p)return this._strip();for(N(-1===p),p=0,m=0;m<this.length;m++)p=(d=-(0|this.words[m])+p)>>26,this.words[m]=67108863&d;return this.negative=1,this._strip()},v.prototype._wordDiv=function(h,g){var x,P=this.clone(),m=h,d=0|m.words[m.length-1];0!=(x=26-this._countBits(d))&&(m=m.ushln(x),P.iushln(x),d=0|m.words[m.length-1]);var L,V=P.length-m.length;if("mod"!==g){(L=new v(null)).length=V+1,L.words=new Array(L.length);for(var Y=0;Y<L.length;Y++)L.words[Y]=0}var le=P.clone()._ishlnsubmul(m,1,V);0===le.negative&&(P=le,L&&(L.words[V]=1));for(var Se=V-1;Se>=0;Se--){var Oe=67108864*(0|P.words[m.length+Se])+(0|P.words[m.length+Se-1]);for(Oe=Math.min(Oe/d|0,67108863),P._ishlnsubmul(m,Oe,Se);0!==P.negative;)Oe--,P.negative=0,P._ishlnsubmul(m,1,Se),P.isZero()||(P.negative^=1);L&&(L.words[Se]=Oe)}return L&&L._strip(),P._strip(),"div"!==g&&0!==x&&P.iushrn(x),{div:L||null,mod:P}},v.prototype.divmod=function(h,g,x){return N(!h.isZero()),this.isZero()?{div:new v(0),mod:new v(0)}:0!==this.negative&&0===h.negative?(d=this.neg().divmod(h,g),"mod"!==g&&(P=d.div.neg()),"div"!==g&&(m=d.mod.neg(),x&&0!==m.negative&&m.iadd(h)),{div:P,mod:m}):0===this.negative&&0!==h.negative?(d=this.divmod(h.neg(),g),"mod"!==g&&(P=d.div.neg()),{div:P,mod:d.mod}):this.negative&h.negative?(d=this.neg().divmod(h.neg(),g),"div"!==g&&(m=d.mod.neg(),x&&0!==m.negative&&m.isub(h)),{div:d.div,mod:m}):h.length>this.length||this.cmp(h)<0?{div:new v(0),mod:this}:1===h.length?"div"===g?{div:this.divn(h.words[0]),mod:null}:"mod"===g?{div:null,mod:new v(this.modrn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new v(this.modrn(h.words[0]))}:this._wordDiv(h,g);var P,m,d},v.prototype.div=function(h){return this.divmod(h,"div",!1).div},v.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},v.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},v.prototype.divRound=function(h){var g=this.divmod(h);if(g.mod.isZero())return g.div;var x=0!==g.div.negative?g.mod.isub(h):g.mod,P=h.ushrn(1),m=h.andln(1),d=x.cmp(P);return d<0||1===m&&0===d?g.div:0!==g.div.negative?g.div.isubn(1):g.div.iaddn(1)},v.prototype.modrn=function(h){var g=h<0;g&&(h=-h),N(h<=67108863);for(var x=(1<<26)%h,P=0,m=this.length-1;m>=0;m--)P=(x*P+(0|this.words[m]))%h;return g?-P:P},v.prototype.modn=function(h){return this.modrn(h)},v.prototype.idivn=function(h){var g=h<0;g&&(h=-h),N(h<=67108863);for(var x=0,P=this.length-1;P>=0;P--){var m=(0|this.words[P])+67108864*x;this.words[P]=m/h|0,x=m%h}return this._strip(),g?this.ineg():this},v.prototype.divn=function(h){return this.clone().idivn(h)},v.prototype.egcd=function(h){N(0===h.negative),N(!h.isZero());var g=this,x=h.clone();g=0!==g.negative?g.umod(h):g.clone();for(var P=new v(1),m=new v(0),d=new v(0),p=new v(1),V=0;g.isEven()&&x.isEven();)g.iushrn(1),x.iushrn(1),++V;for(var L=x.clone(),Y=g.clone();!g.isZero();){for(var le=0,Se=1;!(g.words[0]&Se)&&le<26;++le,Se<<=1);if(le>0)for(g.iushrn(le);le-- >0;)(P.isOdd()||m.isOdd())&&(P.iadd(L),m.isub(Y)),P.iushrn(1),m.iushrn(1);for(var Oe=0,Ve=1;!(x.words[0]&Ve)&&Oe<26;++Oe,Ve<<=1);if(Oe>0)for(x.iushrn(Oe);Oe-- >0;)(d.isOdd()||p.isOdd())&&(d.iadd(L),p.isub(Y)),d.iushrn(1),p.iushrn(1);g.cmp(x)>=0?(g.isub(x),P.isub(d),m.isub(p)):(x.isub(g),d.isub(P),p.isub(m))}return{a:d,b:p,gcd:x.iushln(V)}},v.prototype._invmp=function(h){N(0===h.negative),N(!h.isZero());var le,g=this,x=h.clone();g=0!==g.negative?g.umod(h):g.clone();for(var P=new v(1),m=new v(0),d=x.clone();g.cmpn(1)>0&&x.cmpn(1)>0;){for(var p=0,V=1;!(g.words[0]&V)&&p<26;++p,V<<=1);if(p>0)for(g.iushrn(p);p-- >0;)P.isOdd()&&P.iadd(d),P.iushrn(1);for(var L=0,Y=1;!(x.words[0]&Y)&&L<26;++L,Y<<=1);if(L>0)for(x.iushrn(L);L-- >0;)m.isOdd()&&m.iadd(d),m.iushrn(1);g.cmp(x)>=0?(g.isub(x),P.isub(m)):(x.isub(g),m.isub(P))}return(le=0===g.cmpn(1)?P:m).cmpn(0)<0&&le.iadd(h),le},v.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var g=this.clone(),x=h.clone();g.negative=0,x.negative=0;for(var P=0;g.isEven()&&x.isEven();P++)g.iushrn(1),x.iushrn(1);for(;;){for(;g.isEven();)g.iushrn(1);for(;x.isEven();)x.iushrn(1);var m=g.cmp(x);if(m<0){var d=g;g=x,x=d}else if(0===m||0===x.cmpn(1))break;g.isub(x)}return x.iushln(P)},v.prototype.invm=function(h){return this.egcd(h).a.umod(h)},v.prototype.isEven=function(){return!(1&this.words[0])},v.prototype.isOdd=function(){return!(1&~this.words[0])},v.prototype.andln=function(h){return this.words[0]&h},v.prototype.bincn=function(h){N("number"==typeof h);var g=h%26,x=(h-g)/26,P=1<<g;if(this.length<=x)return this._expand(x+1),this.words[x]|=P,this;for(var m=P,d=x;0!==m&&d<this.length;d++){var p=0|this.words[d];m=(p+=m)>>>26,this.words[d]=p&=67108863}return 0!==m&&(this.words[d]=m,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(h){var x,g=h<0;if(0!==this.negative&&!g)return-1;if(0===this.negative&&g)return 1;if(this._strip(),this.length>1)x=1;else{g&&(h=-h),N(h<=67108863,"Number is too big");var P=0|this.words[0];x=P===h?0:P<h?-1:1}return 0!==this.negative?0|-x:x},v.prototype.cmp=function(h){if(0!==this.negative&&0===h.negative)return-1;if(0===this.negative&&0!==h.negative)return 1;var g=this.ucmp(h);return 0!==this.negative?0|-g:g},v.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var g=0,x=this.length-1;x>=0;x--){var P=0|this.words[x],m=0|h.words[x];if(P!==m){P<m?g=-1:P>m&&(g=1);break}}return g},v.prototype.gtn=function(h){return 1===this.cmpn(h)},v.prototype.gt=function(h){return 1===this.cmp(h)},v.prototype.gten=function(h){return this.cmpn(h)>=0},v.prototype.gte=function(h){return this.cmp(h)>=0},v.prototype.ltn=function(h){return-1===this.cmpn(h)},v.prototype.lt=function(h){return-1===this.cmp(h)},v.prototype.lten=function(h){return this.cmpn(h)<=0},v.prototype.lte=function(h){return this.cmp(h)<=0},v.prototype.eqn=function(h){return 0===this.cmpn(h)},v.prototype.eq=function(h){return 0===this.cmp(h)},v.red=function(h){return new a(h)},v.prototype.toRed=function(h){return N(!this.red,"Already a number in reduction context"),N(0===this.negative,"red works only with positives"),h.convertTo(this)._forceRed(h)},v.prototype.fromRed=function(){return N(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},v.prototype._forceRed=function(h){return this.red=h,this},v.prototype.forceRed=function(h){return N(!this.red,"Already a number in reduction context"),this._forceRed(h)},v.prototype.redAdd=function(h){return N(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},v.prototype.redIAdd=function(h){return N(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},v.prototype.redSub=function(h){return N(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},v.prototype.redISub=function(h){return N(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},v.prototype.redShl=function(h){return N(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},v.prototype.redMul=function(h){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},v.prototype.redIMul=function(h){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},v.prototype.redSqr=function(){return N(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return N(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return N(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return N(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return N(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(h){return N(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var oe={k256:null,p224:null,p192:null,p25519:null};function ne(l,h){this.name=l,this.p=new v(h,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function me(){ne.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function pe(){ne.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ie(){ne.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){ne.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function a(l){if("string"==typeof l){var h=v._prime(l);this.m=h.p,this.prime=h}else N(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}function f(l){a.call(this,l),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}ne.prototype._tmp=function(){var h=new v(null);return h.words=new Array(Math.ceil(this.n/13)),h},ne.prototype.ireduce=function(h){var x,g=h;do{this.split(g,this.tmp),x=(g=(g=this.imulK(g)).iadd(this.tmp)).bitLength()}while(x>this.n);var P=x<this.n?-1:g.ucmp(this.p);return 0===P?(g.words[0]=0,g.length=1):P>0?g.isub(this.p):void 0!==g.strip?g.strip():g._strip(),g},ne.prototype.split=function(h,g){h.iushrn(this.n,0,g)},ne.prototype.imulK=function(h){return h.imul(this.k)},G(me,ne),me.prototype.split=function(h,g){for(var x=4194303,P=Math.min(h.length,9),m=0;m<P;m++)g.words[m]=h.words[m];if(g.length=P,h.length<=9)return h.words[0]=0,void(h.length=1);var d=h.words[9];for(g.words[g.length++]=d&x,m=10;m<h.length;m++){var p=0|h.words[m];h.words[m-10]=(p&x)<<4|d>>>22,d=p}h.words[m-10]=d>>>=22,h.length-=0===d&&h.length>10?10:9},me.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var g=0,x=0;x<h.length;x++){var P=0|h.words[x];h.words[x]=67108863&(g+=977*P),g=64*P+(g/67108864|0)}return 0===h.words[h.length-1]&&(h.length--,0===h.words[h.length-1]&&h.length--),h},G(pe,ne),G(Ie,ne),G(E,ne),E.prototype.imulK=function(h){for(var g=0,x=0;x<h.length;x++){var P=19*(0|h.words[x])+g,m=67108863&P;P>>>=26,h.words[x]=m,g=P}return 0!==g&&(h.words[h.length++]=g),h},v._prime=function(h){if(oe[h])return oe[h];var g;if("k256"===h)g=new me;else if("p224"===h)g=new pe;else if("p192"===h)g=new Ie;else{if("p25519"!==h)throw new Error("Unknown prime "+h);g=new E}return oe[h]=g,g},a.prototype._verify1=function(h){N(0===h.negative,"red works only with positives"),N(h.red,"red works only with red numbers")},a.prototype._verify2=function(h,g){N(!(h.negative|g.negative),"red works only with positives"),N(h.red&&h.red===g.red,"red works only with red numbers")},a.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):($(h,h.umod(this.m)._forceRed(this)),h)},a.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},a.prototype.add=function(h,g){this._verify2(h,g);var x=h.add(g);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},a.prototype.iadd=function(h,g){this._verify2(h,g);var x=h.iadd(g);return x.cmp(this.m)>=0&&x.isub(this.m),x},a.prototype.sub=function(h,g){this._verify2(h,g);var x=h.sub(g);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},a.prototype.isub=function(h,g){this._verify2(h,g);var x=h.isub(g);return x.cmpn(0)<0&&x.iadd(this.m),x},a.prototype.shl=function(h,g){return this._verify1(h),this.imod(h.ushln(g))},a.prototype.imul=function(h,g){return this._verify2(h,g),this.imod(h.imul(g))},a.prototype.mul=function(h,g){return this._verify2(h,g),this.imod(h.mul(g))},a.prototype.isqr=function(h){return this.imul(h,h.clone())},a.prototype.sqr=function(h){return this.mul(h,h)},a.prototype.sqrt=function(h){if(h.isZero())return h.clone();var g=this.m.andln(3);if(N(g%2==1),3===g){var x=this.m.add(new v(1)).iushrn(2);return this.pow(h,x)}for(var P=this.m.subn(1),m=0;!P.isZero()&&0===P.andln(1);)m++,P.iushrn(1);N(!P.isZero());var d=new v(1).toRed(this),p=d.redNeg(),V=this.m.subn(1).iushrn(1),L=this.m.bitLength();for(L=new v(2*L*L).toRed(this);0!==this.pow(L,V).cmp(p);)L.redIAdd(p);for(var Y=this.pow(L,P),le=this.pow(h,P.addn(1).iushrn(1)),Se=this.pow(h,P),Oe=m;0!==Se.cmp(d);){for(var Ve=Se,Re=0;0!==Ve.cmp(d);Re++)Ve=Ve.redSqr();N(Re<Oe);var ye=this.pow(Y,new v(1).iushln(Oe-Re-1));le=le.redMul(ye),Y=ye.redSqr(),Se=Se.redMul(Y),Oe=Re}return le},a.prototype.invm=function(h){var g=h._invmp(this.m);return 0!==g.negative?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},a.prototype.pow=function(h,g){if(g.isZero())return new v(1).toRed(this);if(0===g.cmpn(1))return h.clone();var P=new Array(16);P[0]=new v(1).toRed(this),P[1]=h;for(var m=2;m<P.length;m++)P[m]=this.mul(P[m-1],h);var d=P[0],p=0,V=0,L=g.bitLength()%26;for(0===L&&(L=26),m=g.length-1;m>=0;m--){for(var Y=g.words[m],le=L-1;le>=0;le--){var Se=Y>>le&1;d!==P[0]&&(d=this.sqr(d)),0!==Se||0!==p?(p<<=1,p|=Se,(4==++V||0===m&&0===le)&&(d=this.mul(d,P[p]),V=0,p=0)):V=0}L=26}return d},a.prototype.convertTo=function(h){var g=h.umod(this.m);return g===h?g.clone():g},a.prototype.convertFrom=function(h){var g=h.clone();return g.red=null,g},v.mont=function(h){return new f(h)},G(f,a),f.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},f.prototype.convertFrom=function(h){var g=this.imod(h.mul(this.rinv));return g.red=null,g},f.prototype.imul=function(h,g){if(h.isZero()||g.isZero())return h.words[0]=0,h.length=1,h;var x=h.imul(g),P=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=x.isub(P).iushrn(this.shift),d=m;return m.cmp(this.m)>=0?d=m.isub(this.m):m.cmpn(0)<0&&(d=m.iadd(this.m)),d._forceRed(this)},f.prototype.mul=function(h,g){if(h.isZero()||g.isZero())return new v(0)._forceRed(this);var x=h.mul(g),P=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=x.isub(P).iushrn(this.shift),d=m;return m.cmp(this.m)>=0?d=m.isub(this.m):m.cmpn(0)<0&&(d=m.iadd(this.m)),d._forceRed(this)},f.prototype.invm=function(h){return this.imod(h._invmp(this.m).mul(this.r2))._forceRed(this)}}(xe=I.nmd(xe),this)},35294:(xe,O,I)=>{var C;function H(G){this.rand=G}if(xe.exports=function(v){return C||(C=new H(null)),C.generate(v)},xe.exports.Rand=H,H.prototype.generate=function(v){return this._rand(v)},H.prototype._rand=function(v){if(this.rand.getBytes)return this.rand.getBytes(v);for(var B=new Uint8Array(v),_=0;_<B.length;_++)B[_]=this.rand.getByte();return B},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?H.prototype._rand=function(v){var B=new Uint8Array(v);return self.crypto.getRandomValues(B),B}:self.msCrypto&&self.msCrypto.getRandomValues?H.prototype._rand=function(v){var B=new Uint8Array(v);return self.msCrypto.getRandomValues(B),B}:"object"==typeof window&&(H.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var N=I(91426);if("function"!=typeof N.randomBytes)throw new Error("Not supported");H.prototype._rand=function(v){return N.randomBytes(v)}}catch{}},23963:(xe,O,I)=>{"use strict";const{AbstractLevel:C}=I(75929),H=I(61747),N=I(81725),{fromCallback:G}=I(42381),{Iterator:v}=I(18229),B=I(97899),_=I(19857),T=I(57059),D="level-js-",$=Symbol("idb"),M=Symbol("namePrefix"),F=Symbol("location"),k=Symbol("version"),j=Symbol("store"),Z=Symbol("onComplete"),q=Symbol("promise");O.BrowserLevel=(()=>{class K extends C{constructor(X,Q,oe){if("function"==typeof Q||"function"==typeof oe)throw new H("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:ne,version:me,...pe}=Q||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},pe),"string"!=typeof X)throw new Error("constructor requires a location string argument");this[F]=X,this[M]=ne??D,this[k]=parseInt(me||1,10),this[$]=null}get location(){return this[F]}get namePrefix(){return this[M]}get version(){return this[k]}get db(){return this[$]}get type(){return"browser-level"}_open(X,Q){const oe=indexedDB.open(this[M]+this[F],this[k]);oe.onerror=function(){Q(oe.error||new Error("unknown error"))},oe.onsuccess=()=>{this[$]=oe.result,Q()},oe.onupgradeneeded=ne=>{const me=ne.target.result;me.objectStoreNames.contains(this[F])||me.createObjectStore(this[F])}}[j](X){return this[$].transaction([this[F]],X).objectStore(this[F])}[Z](X,Q){const oe=X.transaction;oe.onabort=function(){Q(oe.error||new Error("aborted by user"))},oe.oncomplete=function(){Q(null,X.result)}}_get(X,Q,oe){const ne=this[j]("readonly");let me;try{me=ne.get(X)}catch(pe){return this.nextTick(oe,pe)}this[Z](me,function(pe,Ie){return pe?oe(pe):void 0===Ie?oe(new H("Entry not found",{code:"LEVEL_NOT_FOUND"})):void oe(null,B(Ie))})}_getMany(X,Q,oe){const ne=this[j]("readonly"),me=X.map(pe=>Ie=>{let E;try{E=ne.get(pe)}catch(a){return Ie(a)}E.onsuccess=()=>{const a=E.result;Ie(null,void 0===a?a:B(a))},E.onerror=a=>{a.stopPropagation(),Ie(E.error)}});N(me,16,oe)}_del(X,Q,oe){const ne=this[j]("readwrite");let me;try{me=ne.delete(X)}catch(pe){return this.nextTick(oe,pe)}this[Z](me,oe)}_put(X,Q,oe,ne){const me=this[j]("readwrite");let pe;try{pe=me.put(Q,X)}catch(Ie){return this.nextTick(ne,Ie)}this[Z](pe,ne)}_iterator(X){return new v(this,this[F],X)}_batch(X,Q,oe){const ne=this[j]("readwrite"),me=ne.transaction;let Ie,pe=0;me.onabort=function(){oe(Ie||me.error||new Error("aborted by user"))},me.oncomplete=function(){oe()},function E(){const a=X[pe++],f=a.key;let l;try{l="del"===a.type?ne.delete(f):ne.put(a.value,f)}catch(h){return Ie=h,void me.abort()}pe<X.length?l.onsuccess=E:"function"==typeof me.commit&&me.commit()}()}_clear(X,Q){let oe,ne;try{oe=T(X)}catch{return this.nextTick(Q)}if(X.limit>=0)return _(this,this[F],oe,X,Q);try{const me=this[j]("readwrite");ne=oe?me.delete(oe):me.clear()}catch(me){return this.nextTick(Q,me)}this[Z](ne,Q)}_close(X){this[$].close(),this.nextTick(X)}}return K.destroy=function(J,X,Q){"function"==typeof X&&(Q=X,X=D),Q=G(Q,q);const oe=indexedDB.deleteDatabase(X+J);return oe.onsuccess=function(){Q()},oe.onerror=function(ne){Q(ne)},Q[q]},K})()},18229:(xe,O,I)=>{"use strict";const{AbstractIterator:C}=I(75929),H=I(57059),N=I(97899),G=Symbol("cache"),v=Symbol("finished"),B=Symbol("options"),_=Symbol("currentOptions"),T=Symbol("position"),D=Symbol("location"),$=Symbol("first"),M={};function k(j){"function"==typeof j.commit&&j.commit()}O.Iterator=class F extends C{constructor(Z,q,W){super(Z,W),this[G]=[],this[v]=0===this.limit,this[B]=W,this[_]={...W},this[T]=void 0,this[D]=q,this[$]=!0}_nextv(Z,q,W){if(this[$]=!1,this[v])return this.nextTick(W,null,[]);if(this[G].length>0)return Z=Math.min(Z,this[G].length),this.nextTick(W,null,this[G].splice(0,Z));let K;void 0!==this[T]&&(this[B].reverse?(this[_].lt=this[T],this[_].lte=void 0):(this[_].gt=this[T],this[_].gte=void 0));try{K=H(this[_])}catch{return this[v]=!0,this.nextTick(W,null,[])}const J=this.db.db.transaction([this[D]],"readonly"),X=J.objectStore(this[D]),Q=[];if(this[B].reverse)X[!this[B].values&&X.openKeyCursor?"openKeyCursor":"openCursor"](K,"prev").onsuccess=ne=>{const me=ne.target.result;if(me){const{key:pe,value:Ie}=me;this[T]=pe,Q.push([this[B].keys&&void 0!==pe?N(pe):void 0,this[B].values&&void 0!==Ie?N(Ie):void 0]),Q.length<Z?me.continue():k(J)}else this[v]=!0};else{let oe,ne;const me=()=>{if(void 0===oe||void 0===ne)return;const pe=Math.max(oe.length,ne.length);0===pe||Z===1/0?this[v]=!0:this[T]=oe[pe-1],Q.length=pe;for(let Ie=0;Ie<pe;Ie++){const E=oe[Ie],a=ne[Ie];Q[Ie]=[this[B].keys&&void 0!==E?N(E):void 0,this[B].values&&void 0!==a?N(a):void 0]}k(J)};this[B].keys||Z<1/0?X.getAllKeys(K,Z<1/0?Z:void 0).onsuccess=pe=>{oe=pe.target.result,me()}:(oe=[],this.nextTick(me)),this[B].values?X.getAll(K,Z<1/0?Z:void 0).onsuccess=pe=>{ne=pe.target.result,me()}:(ne=[],this.nextTick(me))}J.onabort=()=>{W(J.error||new Error("aborted by user")),W=null},J.oncomplete=()=>{W(null,Q),W=null}}_next(Z){if(this[G].length>0){const[q,W]=this[G].shift();this.nextTick(Z,null,q,W)}else if(this[v])this.nextTick(Z);else{let q=Math.min(100,this.limit-this.count);this[$]&&(this[$]=!1,q=1),this._nextv(q,M,(W,K)=>{if(W)return Z(W);this[G]=K,this._next(Z)})}}_all(Z,q){this[$]=!1;const W=this[G].splice(0,this[G].length),K=this.limit-this.count-W.length;if(K<=0)return this.nextTick(q,null,W);this._nextv(K,M,(J,X)=>{if(J)return q(J);W.length>0&&(X=W.concat(X)),q(null,X)})}_seek(Z,q){let W;this[$]=!0,this[G]=[],this[v]=!1,this[T]=void 0,this[_]={...this[B]};try{W=H(this[B])}catch{return void(this[v]=!0)}null===W||W.includes(Z)?this[B].reverse?this[_].lte=Z:this[_].gte=Z:this[v]=!0}}},19857:xe=>{"use strict";xe.exports=function(I,C,H,N,G){if(0===N.limit)return I.nextTick(G);const v=I.db.transaction([C],"readwrite"),B=v.objectStore(C);let _=0;v.oncomplete=function(){G()},v.onabort=function(){G(v.error||new Error("aborted by user"))},B[B.openKeyCursor?"openKeyCursor":"openCursor"](H,N.reverse?"prev":"next").onsuccess=function($){const M=$.target.result;M&&(B.delete(M.key).onsuccess=function(){(N.limit<=0||++_<N.limit)&&M.continue()})}}},97899:xe=>{"use strict";const O=new TextEncoder;xe.exports=function(I){return I instanceof Uint8Array?I:I instanceof ArrayBuffer?new Uint8Array(I):O.encode(I)}},57059:xe=>{"use strict";xe.exports=function(I){const C=void 0!==I.gte?I.gte:void 0!==I.gt?I.gt:void 0,H=void 0!==I.lte?I.lte:void 0!==I.lt?I.lt:void 0,N=void 0===I.gte,G=void 0===I.lte;return void 0!==C&&void 0!==H?IDBKeyRange.bound(C,H,N,G):void 0!==C?IDBKeyRange.lowerBound(C,N):void 0!==H?IDBKeyRange.upperBound(H,G):null}},12375:(xe,O,I)=>{var C=I(27054).Buffer;function H(T){C.isBuffer(T)||(T=C.from(T));for(var D=T.length/4|0,$=new Array(D),M=0;M<D;M++)$[M]=T.readUInt32BE(4*M);return $}function N(T){for(;0<T.length;T++)T[0]=0}function G(T,D,$,M,F){for(var Q,oe,ne,me,k=$[0],j=$[1],Z=$[2],q=$[3],W=T[0]^D[0],K=T[1]^D[1],J=T[2]^D[2],X=T[3]^D[3],pe=4,Ie=1;Ie<F;Ie++)Q=k[W>>>24]^j[K>>>16&255]^Z[J>>>8&255]^q[255&X]^D[pe++],oe=k[K>>>24]^j[J>>>16&255]^Z[X>>>8&255]^q[255&W]^D[pe++],ne=k[J>>>24]^j[X>>>16&255]^Z[W>>>8&255]^q[255&K]^D[pe++],me=k[X>>>24]^j[W>>>16&255]^Z[K>>>8&255]^q[255&J]^D[pe++],W=Q,K=oe,J=ne,X=me;return Q=(M[W>>>24]<<24|M[K>>>16&255]<<16|M[J>>>8&255]<<8|M[255&X])^D[pe++],oe=(M[K>>>24]<<24|M[J>>>16&255]<<16|M[X>>>8&255]<<8|M[255&W])^D[pe++],ne=(M[J>>>24]<<24|M[X>>>16&255]<<16|M[W>>>8&255]<<8|M[255&K])^D[pe++],me=(M[X>>>24]<<24|M[W>>>16&255]<<16|M[K>>>8&255]<<8|M[255&J])^D[pe++],[Q>>>=0,oe>>>=0,ne>>>=0,me>>>=0]}var v=[0,1,2,4,8,16,32,64,128,27,54],B=function(){for(var T=new Array(256),D=0;D<256;D++)T[D]=D<128?D<<1:D<<1^283;for(var $=[],M=[],F=[[],[],[],[]],k=[[],[],[],[]],j=0,Z=0,q=0;q<256;++q){var W=Z^Z<<1^Z<<2^Z<<3^Z<<4;$[j]=W=W>>>8^255&W^99,M[W]=j;var K=T[j],J=T[K],X=T[J],Q=257*T[W]^16843008*W;F[0][j]=Q<<24|Q>>>8,F[1][j]=Q<<16|Q>>>16,F[2][j]=Q<<8|Q>>>24,F[3][j]=Q,k[0][W]=(Q=16843009*X^65537*J^257*K^16843008*j)<<24|Q>>>8,k[1][W]=Q<<16|Q>>>16,k[2][W]=Q<<8|Q>>>24,k[3][W]=Q,0===j?j=Z=1:(j=K^T[T[T[X^K]]],Z^=T[T[Z]])}return{SBOX:$,INV_SBOX:M,SUB_MIX:F,INV_SUB_MIX:k}}();function _(T){this._key=H(T),this._reset()}_.blockSize=16,_.keySize=32,_.prototype.blockSize=_.blockSize,_.prototype.keySize=_.keySize,_.prototype._reset=function(){for(var T=this._key,D=T.length,$=D+6,M=4*($+1),F=[],k=0;k<D;k++)F[k]=T[k];for(k=D;k<M;k++){var j=F[k-1];k%D==0?(j=B.SBOX[(j=j<<8|j>>>24)>>>24]<<24|B.SBOX[j>>>16&255]<<16|B.SBOX[j>>>8&255]<<8|B.SBOX[255&j],j^=v[k/D|0]<<24):D>6&&k%D==4&&(j=B.SBOX[j>>>24]<<24|B.SBOX[j>>>16&255]<<16|B.SBOX[j>>>8&255]<<8|B.SBOX[255&j]),F[k]=F[k-D]^j}for(var Z=[],q=0;q<M;q++){var W=M-q,K=F[W-(q%4?0:4)];Z[q]=q<4||W<=4?K:B.INV_SUB_MIX[0][B.SBOX[K>>>24]]^B.INV_SUB_MIX[1][B.SBOX[K>>>16&255]]^B.INV_SUB_MIX[2][B.SBOX[K>>>8&255]]^B.INV_SUB_MIX[3][B.SBOX[255&K]]}this._nRounds=$,this._keySchedule=F,this._invKeySchedule=Z},_.prototype.encryptBlockRaw=function(T){return G(T=H(T),this._keySchedule,B.SUB_MIX,B.SBOX,this._nRounds)},_.prototype.encryptBlock=function(T){var D=this.encryptBlockRaw(T),$=C.allocUnsafe(16);return $.writeUInt32BE(D[0],0),$.writeUInt32BE(D[1],4),$.writeUInt32BE(D[2],8),$.writeUInt32BE(D[3],12),$},_.prototype.decryptBlock=function(T){var D=(T=H(T))[1];T[1]=T[3],T[3]=D;var $=G(T,this._invKeySchedule,B.INV_SUB_MIX,B.INV_SBOX,this._nRounds),M=C.allocUnsafe(16);return M.writeUInt32BE($[0],0),M.writeUInt32BE($[3],4),M.writeUInt32BE($[2],8),M.writeUInt32BE($[1],12),M},_.prototype.scrub=function(){N(this._keySchedule),N(this._invKeySchedule),N(this._key)},xe.exports.AES=_},19307:(xe,O,I)=>{var C=I(12375),H=I(27054).Buffer,N=I(3247),G=I(71993),v=I(85917),B=I(13546),_=I(95725);function $(M,F,k,j){N.call(this);var Z=H.alloc(4,0);this._cipher=new C.AES(F);var q=this._cipher.encryptBlock(Z);this._ghash=new v(q),k=function D(M,F,k){if(12===F.length)return M._finID=H.concat([F,H.from([0,0,0,1])]),H.concat([F,H.from([0,0,0,2])]);var j=new v(k),Z=F.length,q=Z%16;j.update(F),q&&j.update(H.alloc(q=16-q,0)),j.update(H.alloc(8,0));var W=8*Z,K=H.alloc(8);K.writeUIntBE(W,0,8),j.update(K),M._finID=j.state;var J=H.from(M._finID);return _(J),J}(this,k,q),this._prev=H.from(k),this._cache=H.allocUnsafe(0),this._secCache=H.allocUnsafe(0),this._decrypt=j,this._alen=0,this._len=0,this._mode=M,this._authTag=null,this._called=!1}G($,N),$.prototype._update=function(M){if(!this._called&&this._alen){var F=16-this._alen%16;F<16&&(F=H.alloc(F,0),this._ghash.update(F))}this._called=!0;var k=this._mode.encrypt(this,M);return this._ghash.update(this._decrypt?M:k),this._len+=M.length,k},$.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var M=B(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function T(M,F){var k=0;M.length!==F.length&&k++;for(var j=Math.min(M.length,F.length),Z=0;Z<j;++Z)k+=M[Z]^F[Z];return k}(M,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=M,this._cipher.scrub()},$.prototype.getAuthTag=function(){if(this._decrypt||!H.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},$.prototype.setAuthTag=function(F){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=F},$.prototype.setAAD=function(F){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(F),this._alen+=F.length},xe.exports=$},43388:(xe,O,I)=>{var C=I(350),H=I(60102),N=I(3219);O.createCipher=O.Cipher=C.createCipher,O.createCipheriv=O.Cipheriv=C.createCipheriv,O.createDecipher=O.Decipher=H.createDecipher,O.createDecipheriv=O.Decipheriv=H.createDecipheriv,O.listCiphers=O.getCiphers=function G(){return Object.keys(N)}},60102:(xe,O,I)=>{var C=I(19307),H=I(27054).Buffer,N=I(60503),G=I(91821),v=I(3247),B=I(12375),_=I(18211);function D(j,Z,q){v.call(this),this._cache=new $,this._last=void 0,this._cipher=new B.AES(Z),this._prev=H.from(q),this._mode=j,this._autopadding=!0}function $(){this.cache=H.allocUnsafe(0)}function F(j,Z,q){var W=N[j.toLowerCase()];if(!W)throw new TypeError("invalid suite type");if("string"==typeof q&&(q=H.from(q)),"GCM"!==W.mode&&q.length!==W.iv)throw new TypeError("invalid iv length "+q.length);if("string"==typeof Z&&(Z=H.from(Z)),Z.length!==W.key/8)throw new TypeError("invalid key length "+Z.length);return"stream"===W.type?new G(W.module,Z,q,!0):"auth"===W.type?new C(W.module,Z,q,!0):new D(W.module,Z,q)}I(71993)(D,v),D.prototype._update=function(j){this._cache.add(j);for(var Z,q,W=[];Z=this._cache.get(this._autopadding);)q=this._mode.decrypt(this,Z),W.push(q);return H.concat(W)},D.prototype._final=function(){var j=this._cache.flush();if(this._autopadding)return function M(j){var Z=j[15];if(Z<1||Z>16)throw new Error("unable to decrypt data");for(var q=-1;++q<Z;)if(j[q+(16-Z)]!==Z)throw new Error("unable to decrypt data");if(16!==Z)return j.slice(0,16-Z)}(this._mode.decrypt(this,j));if(j)throw new Error("data not multiple of block length")},D.prototype.setAutoPadding=function(j){return this._autopadding=!!j,this},$.prototype.add=function(j){this.cache=H.concat([this.cache,j])},$.prototype.get=function(j){var Z;if(j){if(this.cache.length>16)return Z=this.cache.slice(0,16),this.cache=this.cache.slice(16),Z}else if(this.cache.length>=16)return Z=this.cache.slice(0,16),this.cache=this.cache.slice(16),Z;return null},$.prototype.flush=function(){if(this.cache.length)return this.cache},O.createDecipher=function k(j,Z){var q=N[j.toLowerCase()];if(!q)throw new TypeError("invalid suite type");var W=_(Z,!1,q.key,q.iv);return F(j,W.key,W.iv)},O.createDecipheriv=F},350:(xe,O,I)=>{var C=I(60503),H=I(19307),N=I(27054).Buffer,G=I(91821),v=I(3247),B=I(12375),_=I(18211);function D(j,Z,q){v.call(this),this._cache=new M,this._cipher=new B.AES(Z),this._prev=N.from(q),this._mode=j,this._autopadding=!0}I(71993)(D,v),D.prototype._update=function(j){this._cache.add(j);for(var Z,q,W=[];Z=this._cache.get();)q=this._mode.encrypt(this,Z),W.push(q);return N.concat(W)};var $=N.alloc(16,16);function M(){this.cache=N.allocUnsafe(0)}function F(j,Z,q){var W=C[j.toLowerCase()];if(!W)throw new TypeError("invalid suite type");if("string"==typeof Z&&(Z=N.from(Z)),Z.length!==W.key/8)throw new TypeError("invalid key length "+Z.length);if("string"==typeof q&&(q=N.from(q)),"GCM"!==W.mode&&q.length!==W.iv)throw new TypeError("invalid iv length "+q.length);return"stream"===W.type?new G(W.module,Z,q):"auth"===W.type?new H(W.module,Z,q):new D(W.module,Z,q)}D.prototype._final=function(){var j=this._cache.flush();if(this._autopadding)return j=this._mode.encrypt(this,j),this._cipher.scrub(),j;if(!j.equals($))throw this._cipher.scrub(),new Error("data not multiple of block length")},D.prototype.setAutoPadding=function(j){return this._autopadding=!!j,this},M.prototype.add=function(j){this.cache=N.concat([this.cache,j])},M.prototype.get=function(){if(this.cache.length>15){var j=this.cache.slice(0,16);return this.cache=this.cache.slice(16),j}return null},M.prototype.flush=function(){for(var j=16-this.cache.length,Z=N.allocUnsafe(j),q=-1;++q<j;)Z.writeUInt8(j,q);return N.concat([this.cache,Z])},O.createCipheriv=F,O.createCipher=function k(j,Z){var q=C[j.toLowerCase()];if(!q)throw new TypeError("invalid suite type");var W=_(Z,!1,q.key,q.iv);return F(j,W.key,W.iv)}},85917:(xe,O,I)=>{var C=I(27054).Buffer,H=C.alloc(16,0);function G(B){var _=C.allocUnsafe(16);return _.writeUInt32BE(B[0]>>>0,0),_.writeUInt32BE(B[1]>>>0,4),_.writeUInt32BE(B[2]>>>0,8),_.writeUInt32BE(B[3]>>>0,12),_}function v(B){this.h=B,this.state=C.alloc(16,0),this.cache=C.allocUnsafe(0)}v.prototype.ghash=function(B){for(var _=-1;++_<B.length;)this.state[_]^=B[_];this._multiply()},v.prototype._multiply=function(){for(var T,$,B=function N(B){return[B.readUInt32BE(0),B.readUInt32BE(4),B.readUInt32BE(8),B.readUInt32BE(12)]}(this.h),_=[0,0,0,0],M=-1;++M<128;){for(!!(this.state[~~(M/8)]&1<<7-M%8)&&(_[0]^=B[0],_[1]^=B[1],_[2]^=B[2],_[3]^=B[3]),$=!!(1&B[3]),T=3;T>0;T--)B[T]=B[T]>>>1|(1&B[T-1])<<31;B[0]=B[0]>>>1,$&&(B[0]=B[0]^225<<24)}this.state=G(_)},v.prototype.update=function(B){this.cache=C.concat([this.cache,B]);for(var _;this.cache.length>=16;)_=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(_)},v.prototype.final=function(B,_){return this.cache.length&&this.ghash(C.concat([this.cache,H],16)),this.ghash(G([0,B,0,_])),this.state},xe.exports=v},95725:xe=>{xe.exports=function O(I){for(var H,C=I.length;C--;){if(255!==(H=I.readUInt8(C))){H++,I.writeUInt8(H,C);break}I.writeUInt8(0,C)}}},34133:(xe,O,I)=>{var C=I(13546);O.encrypt=function(H,N){var G=C(N,H._prev);return H._prev=H._cipher.encryptBlock(G),H._prev},O.decrypt=function(H,N){var G=H._prev;H._prev=N;var v=H._cipher.decryptBlock(N);return C(v,G)}},17090:(xe,O,I)=>{var C=I(27054).Buffer,H=I(13546);function N(G,v,B){var _=v.length,T=H(v,G._cache);return G._cache=G._cache.slice(_),G._prev=C.concat([G._prev,B?v:T]),T}O.encrypt=function(G,v,B){for(var T,_=C.allocUnsafe(0);v.length;){if(0===G._cache.length&&(G._cache=G._cipher.encryptBlock(G._prev),G._prev=C.allocUnsafe(0)),!(G._cache.length<=v.length)){_=C.concat([_,N(G,v,B)]);break}_=C.concat([_,N(G,v.slice(0,T=G._cache.length),B)]),v=v.slice(T)}return _}},71039:(xe,O,I)=>{var C=I(27054).Buffer;function H(G,v,B){for(var M,F,T=-1,$=0;++T<8;)$+=(128&(F=G._cipher.encryptBlock(G._prev)[0]^(M=v&1<<7-T?128:0)))>>T%8,G._prev=N(G._prev,B?M:F);return $}function N(G,v){var B=G.length,_=-1,T=C.allocUnsafe(G.length);for(G=C.concat([G,C.from([v])]);++_<B;)T[_]=G[_]<<1|G[_+1]>>7;return T}O.encrypt=function(G,v,B){for(var _=v.length,T=C.allocUnsafe(_),D=-1;++D<_;)T[D]=H(G,v[D],B);return T}},72576:(xe,O,I)=>{var C=I(27054).Buffer;function H(N,G,v){var _=N._cipher.encryptBlock(N._prev)[0]^G;return N._prev=C.concat([N._prev.slice(1),C.from([v?G:_])]),_}O.encrypt=function(N,G,v){for(var B=G.length,_=C.allocUnsafe(B),T=-1;++T<B;)_[T]=H(N,G[T],v);return _}},70336:(xe,O,I)=>{var C=I(13546),H=I(27054).Buffer,N=I(95725);function G(B){var _=B._cipher.encryptBlockRaw(B._prev);return N(B._prev),_}O.encrypt=function(B,_){var T=Math.ceil(_.length/16),D=B._cache.length;B._cache=H.concat([B._cache,H.allocUnsafe(16*T)]);for(var $=0;$<T;$++){var M=G(B),F=D+16*$;B._cache.writeUInt32BE(M[0],F+0),B._cache.writeUInt32BE(M[1],F+4),B._cache.writeUInt32BE(M[2],F+8),B._cache.writeUInt32BE(M[3],F+12)}var k=B._cache.slice(0,_.length);return B._cache=B._cache.slice(_.length),C(_,k)}},37513:(xe,O)=>{O.encrypt=function(I,C){return I._cipher.encryptBlock(C)},O.decrypt=function(I,C){return I._cipher.decryptBlock(C)}},60503:(xe,O,I)=>{var C={ECB:I(37513),CBC:I(34133),CFB:I(17090),CFB8:I(72576),CFB1:I(71039),OFB:I(46854),CTR:I(70336),GCM:I(70336)},H=I(3219);for(var N in H)H[N].module=C[H[N].mode];xe.exports=H},46854:(xe,O,I)=>{var C=I(13546);function H(N){return N._prev=N._cipher.encryptBlock(N._prev),N._prev}O.encrypt=function(N,G){for(;N._cache.length<G.length;)N._cache=Buffer.concat([N._cache,H(N)]);var v=N._cache.slice(0,G.length);return N._cache=N._cache.slice(G.length),C(G,v)}},91821:(xe,O,I)=>{var C=I(12375),H=I(27054).Buffer,N=I(3247);function v(B,_,T,D){N.call(this),this._cipher=new C.AES(_),this._prev=H.from(T),this._cache=H.allocUnsafe(0),this._secCache=H.allocUnsafe(0),this._decrypt=D,this._mode=B}I(71993)(v,N),v.prototype._update=function(B){return this._mode.encrypt(this,B,this._decrypt)},v.prototype._final=function(){this._cipher.scrub()},xe.exports=v},88862:(xe,O,I)=>{var C=I(39799),H=I(43388),N=I(60503),G=I(59571),v=I(18211);function T(M,F,k){if(M=M.toLowerCase(),N[M])return H.createCipheriv(M,F,k);if(G[M])return new C({key:F,iv:k,mode:M});throw new TypeError("invalid suite type")}function D(M,F,k){if(M=M.toLowerCase(),N[M])return H.createDecipheriv(M,F,k);if(G[M])return new C({key:F,iv:k,mode:M,decrypt:!0});throw new TypeError("invalid suite type")}O.createCipher=O.Cipher=function B(M,F){var k,j;if(M=M.toLowerCase(),N[M])k=N[M].key,j=N[M].iv;else{if(!G[M])throw new TypeError("invalid suite type");k=8*G[M].key,j=G[M].iv}var Z=v(F,!1,k,j);return T(M,Z.key,Z.iv)},O.createCipheriv=O.Cipheriv=T,O.createDecipher=O.Decipher=function _(M,F){var k,j;if(M=M.toLowerCase(),N[M])k=N[M].key,j=N[M].iv;else{if(!G[M])throw new TypeError("invalid suite type");k=8*G[M].key,j=G[M].iv}var Z=v(F,!1,k,j);return D(M,Z.key,Z.iv)},O.createDecipheriv=O.Decipheriv=D,O.listCiphers=O.getCiphers=function $(){return Object.keys(G).concat(H.getCiphers())}},39799:(xe,O,I)=>{var C=I(3247),H=I(71549),N=I(71993),G=I(27054).Buffer,v={"des-ede3-cbc":H.CBC.instantiate(H.EDE),"des-ede3":H.EDE,"des-ede-cbc":H.CBC.instantiate(H.EDE),"des-ede":H.EDE,"des-cbc":H.CBC.instantiate(H.DES),"des-ecb":H.DES};function B(_){C.call(this);var $,T=_.mode.toLowerCase(),D=v[T];$=_.decrypt?"decrypt":"encrypt";var M=_.key;G.isBuffer(M)||(M=G.from(M)),("des-ede"===T||"des-ede-cbc"===T)&&(M=G.concat([M,M.slice(0,8)]));var F=_.iv;G.isBuffer(F)||(F=G.from(F)),this._des=D.create({key:M,iv:F,type:$})}v.des=v["des-cbc"],v.des3=v["des-ede3-cbc"],xe.exports=B,N(B,C),B.prototype._update=function(_){return G.from(this._des.update(_))},B.prototype._final=function(){return G.from(this._des.final())}},59571:(xe,O)=>{O["des-ecb"]={key:8,iv:0},O["des-cbc"]=O.des={key:8,iv:8},O["des-ede3-cbc"]=O.des3={key:24,iv:8},O["des-ede3"]={key:24,iv:0},O["des-ede-cbc"]={key:16,iv:8},O["des-ede"]={key:16,iv:0}},14105:(xe,O,I)=>{var C=I(917),H=I(3342);function G(B){var T,_=B.modulus.byteLength();do{T=new C(H(_))}while(T.cmp(B.modulus)>=0||!T.umod(B.prime1)||!T.umod(B.prime2));return T}function v(B,_){var T=function N(B){var _=G(B);return{blinder:_.toRed(C.mont(B.modulus)).redPow(new C(B.publicExponent)).fromRed(),unblinder:_.invm(B.modulus)}}(_),D=_.modulus.byteLength(),$=new C(B).mul(T.blinder).umod(_.modulus),M=$.toRed(C.mont(_.prime1)),F=$.toRed(C.mont(_.prime2)),k=_.coefficient,j=_.prime1,Z=_.prime2,q=M.redPow(_.exponent1).fromRed(),W=F.redPow(_.exponent2).fromRed(),K=q.isub(W).imul(k).umod(j).imul(Z);return W.iadd(K).imul(T.unblinder).umod(_.modulus).toArrayLike(Buffer,"be",D)}v.getr=G,xe.exports=v},99560:(xe,O,I)=>{"use strict";xe.exports=I(62951)},79143:(xe,O,I)=>{"use strict";var C=I(27054).Buffer,H=I(67211),N=I(64670),G=I(71993),v=I(43150),B=I(74754),_=I(62951);function T(F){N.Writable.call(this);var k=_[F];if(!k)throw new Error("Unknown message digest");this._hashType=k.hash,this._hash=H(k.hash),this._tag=k.id,this._signType=k.sign}function D(F){N.Writable.call(this);var k=_[F];if(!k)throw new Error("Unknown message digest");this._hash=H(k.hash),this._tag=k.id,this._signType=k.sign}function $(F){return new T(F)}function M(F){return new D(F)}Object.keys(_).forEach(function(F){_[F].id=C.from(_[F].id,"hex"),_[F.toLowerCase()]=_[F]}),G(T,N.Writable),T.prototype._write=function(k,j,Z){this._hash.update(k),Z()},T.prototype.update=function(k,j){return this._hash.update("string"==typeof k?C.from(k,j):k),this},T.prototype.sign=function(k,j){this.end();var Z=this._hash.digest(),q=v(Z,k,this._hashType,this._signType,this._tag);return j?q.toString(j):q},G(D,N.Writable),D.prototype._write=function(k,j,Z){this._hash.update(k),Z()},D.prototype.update=function(k,j){return this._hash.update("string"==typeof k?C.from(k,j):k),this},D.prototype.verify=function(k,j,Z){var q="string"==typeof j?C.from(j,Z):j;this.end();var W=this._hash.digest();return B(q,W,k,this._signType,this._tag)},xe.exports={Sign:$,Verify:M,createSign:$,createVerify:M}},43150:(xe,O,I)=>{"use strict";var C=I(27054).Buffer,H=I(56432),N=I(14105),G=I(90518).ec,v=I(917),B=I(65667),_=I(64589);function k(K,J,X,Q){if((K=C.from(K.toArray())).length<J.byteLength()){var oe=C.alloc(J.byteLength()-K.length);K=C.concat([oe,K])}var ne=X.length,me=function Z(K,J){K=(K=j(K,J)).mod(J);var X=C.from(K.toArray());if(X.length<J.byteLength()){var Q=C.alloc(J.byteLength()-X.length);X=C.concat([Q,X])}return X}(X,J),pe=C.alloc(ne);pe.fill(1);var Ie=C.alloc(ne);return Ie=H(Q,Ie).update(pe).update(C.from([0])).update(K).update(me).digest(),pe=H(Q,Ie).update(pe).digest(),{k:Ie=H(Q,Ie).update(pe).update(C.from([1])).update(K).update(me).digest(),v:pe=H(Q,Ie).update(pe).digest()}}function j(K,J){var X=new v(K),Q=(K.length<<3)-J.bitLength();return Q>0&&X.ishrn(Q),X}function q(K,J,X){var Q,oe;do{for(Q=C.alloc(0);8*Q.length<K.bitLength();)J.v=H(X,J.k).update(J.v).digest(),Q=C.concat([Q,J.v]);oe=j(Q,K),J.k=H(X,J.k).update(J.v).update(C.from([0])).digest(),J.v=H(X,J.k).update(J.v).digest()}while(-1!==oe.cmp(K));return oe}function W(K,J,X,Q){return K.toRed(v.mont(X)).redPow(J).fromRed().mod(Q)}xe.exports=function D(K,J,X,Q,oe){var ne=B(J);if(ne.curve){if("ecdsa"!==Q&&"ecdsa/rsa"!==Q)throw new Error("wrong private key type");return function $(K,J){var X=_[J.curve.join(".")];if(!X)throw new Error("unknown curve "+J.curve.join("."));var ne=new G(X).keyFromPrivate(J.privateKey).sign(K);return C.from(ne.toDER())}(K,ne)}if("dsa"===ne.type){if("dsa"!==Q)throw new Error("wrong private key type");return function M(K,J,X){for(var Ie,Q=J.params.priv_key,oe=J.params.p,ne=J.params.q,me=J.params.g,pe=new v(0),E=j(K,ne).mod(ne),a=!1,f=k(Q,ne,K,X);!1===a;)pe=W(me,Ie=q(ne,f,X),oe,ne),0===(a=Ie.invm(ne).imul(E.add(Q.mul(pe))).mod(ne)).cmpn(0)&&(a=!1,pe=new v(0));return function F(K,J){K=K.toArray(),J=J.toArray(),128&K[0]&&(K=[0].concat(K)),128&J[0]&&(J=[0].concat(J));var Q=[48,K.length+J.length+4,2,K.length];return Q=Q.concat(K,[2,J.length],J),C.from(Q)}(pe,a)}(K,ne,X)}if("rsa"!==Q&&"ecdsa/rsa"!==Q)throw new Error("wrong private key type");if(void 0!==J.padding&&1!==J.padding)throw new Error("illegal or unsupported padding mode");K=C.concat([oe,K]);for(var me=ne.modulus.byteLength(),pe=[0,1];K.length+pe.length+1<me;)pe.push(255);pe.push(0);for(var Ie=-1;++Ie<K.length;)pe.push(K[Ie]);return N(pe,ne)},xe.exports.getKey=k,xe.exports.makeKey=q},74754:(xe,O,I)=>{"use strict";var C=I(27054).Buffer,H=I(917),N=I(90518).ec,G=I(65667),v=I(64589);function D($,M){if($.cmpn(0)<=0)throw new Error("invalid sig");if($.cmp(M)>=0)throw new Error("invalid sig")}xe.exports=function B($,M,F,k,j){var Z=G(F);if("ec"===Z.type){if("ecdsa"!==k&&"ecdsa/rsa"!==k)throw new Error("wrong public key type");return function _($,M,F){var k=v[F.data.algorithm.curve.join(".")];if(!k)throw new Error("unknown curve "+F.data.algorithm.curve.join("."));return new N(k).verify(M,$,F.data.subjectPrivateKey.data)}($,M,Z)}if("dsa"===Z.type){if("dsa"!==k)throw new Error("wrong public key type");return function T($,M,F){var k=F.data.p,j=F.data.q,Z=F.data.g,q=F.data.pub_key,W=G.signature.decode($,"der"),K=W.s,J=W.r;D(K,j),D(J,j);var X=H.mont(k),Q=K.invm(j);return 0===Z.toRed(X).redPow(new H(M).mul(Q).mod(j)).fromRed().mul(q.toRed(X).redPow(J.mul(Q).mod(j)).fromRed()).mod(k).mod(j).cmp(J)}($,M,Z)}if("rsa"!==k&&"ecdsa/rsa"!==k)throw new Error("wrong public key type");M=C.concat([j,M]);for(var q=Z.modulus.byteLength(),W=[1],K=0;M.length+W.length+2<q;)W.push(255),K+=1;W.push(0);for(var J=-1;++J<M.length;)W.push(M[J]);W=C.from(W);var X=H.mont(Z.modulus);$=($=new H($).toRed(X)).redPow(new H(Z.publicExponent)),$=C.from($.fromRed().toArray());var Q=K<8?1:0;for(q=Math.min($.length,W.length),$.length!==W.length&&(Q=1),J=-1;++J<q;)Q|=$[J]^W[J];return 0===Q}},23827:(xe,O,I)=>{"use strict";var C=I(9656),H=Object.keys||function(F){var k=[];for(var j in F)k.push(j);return k};xe.exports=D;var N=Object.create(I(27637));N.inherits=I(71993);var G=I(81217),v=I(14817);N.inherits(D,G);for(var B=H(v.prototype),_=0;_<B.length;_++){var T=B[_];D.prototype[T]||(D.prototype[T]=v.prototype[T])}function D(F){if(!(this instanceof D))return new D(F);G.call(this,F),v.call(this,F),F&&!1===F.readable&&(this.readable=!1),F&&!1===F.writable&&(this.writable=!1),this.allowHalfOpen=!0,F&&!1===F.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",$)}function $(){this.allowHalfOpen||this._writableState.ended||C.nextTick(M,this)}function M(F){F.end()}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(D.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(F){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=F,this._writableState.destroyed=F)}}),D.prototype._destroy=function(F,k){this.push(null),this.end(),C.nextTick(k,F)}},75519:(xe,O,I)=>{"use strict";xe.exports=N;var C=I(93045),H=Object.create(I(27637));function N(G){if(!(this instanceof N))return new N(G);C.call(this,G)}H.inherits=I(71993),H.inherits(N,C),N.prototype._transform=function(G,v,B){B(null,G)}},81217:(xe,O,I)=>{"use strict";var C=I(40573),H=I(9656);xe.exports=Q;var G,N=I(20053);Q.ReadableState=X,I(44356);var B=function(ye,ke){return ye.listeners(ke).length},_=I(62078),T=I(29783).Buffer,D=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},F=Object.create(I(27637));F.inherits=I(71993);var k=I(92668),j=void 0;j=k&&k.debuglog?k.debuglog("stream"):function(){};var W,Z=I(10793),q=I(43357);F.inherits(Q,_);var K=["error","close","destroy","pause","resume"];function X(ye,ke){var ve=ke instanceof(G=G||I(23827));this.objectMode=!!(ye=ye||{}).objectMode,ve&&(this.objectMode=this.objectMode||!!ye.readableObjectMode);var _e=ye.highWaterMark,de=ye.readableHighWaterMark;this.highWaterMark=_e||0===_e?_e:ve&&(de||0===de)?de:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=ye.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ye.encoding&&(W||(W=I(49937).I),this.decoder=new W(ye.encoding),this.encoding=ye.encoding)}function Q(ye){if(G=G||I(23827),!(this instanceof Q))return new Q(ye);this._readableState=new X(ye,this),this.readable=!0,ye&&("function"==typeof ye.read&&(this._read=ye.read),"function"==typeof ye.destroy&&(this._destroy=ye.destroy)),_.call(this)}function oe(ye,ke,ve,_e,de){var re,se=ye._readableState;return null===ke?(se.reading=!1,function f(ye,ke){if(!ke.ended){if(ke.decoder){var ve=ke.decoder.end();ve&&ve.length&&(ke.buffer.push(ve),ke.length+=ke.objectMode?1:ve.length)}ke.ended=!0,l(ye)}}(ye,se)):(de||(re=function me(ye,ke){var ve;return!function M(ye){return T.isBuffer(ye)||ye instanceof D}(ke)&&"string"!=typeof ke&&void 0!==ke&&!ye.objectMode&&(ve=new TypeError("Invalid non-string/buffer chunk")),ve}(se,ke)),re?ye.emit("error",re):se.objectMode||ke&&ke.length>0?("string"!=typeof ke&&!se.objectMode&&Object.getPrototypeOf(ke)!==T.prototype&&(ke=function $(ye){return T.from(ye)}(ke)),_e?se.endEmitted?ye.emit("error",new Error("stream.unshift() after end event")):ne(ye,se,ke,!0):se.ended?ye.emit("error",new Error("stream.push() after EOF")):(se.reading=!1,se.decoder&&!ve?(ke=se.decoder.write(ke),se.objectMode||0!==ke.length?ne(ye,se,ke,!1):g(ye,se)):ne(ye,se,ke,!1))):_e||(se.reading=!1)),function pe(ye){return!ye.ended&&(ye.needReadable||ye.length<ye.highWaterMark||0===ye.length)}(se)}function ne(ye,ke,ve,_e){ke.flowing&&0===ke.length&&!ke.sync?(ye.emit("data",ve),ye.read(0)):(ke.length+=ke.objectMode?1:ve.length,_e?ke.buffer.unshift(ve):ke.buffer.push(ve),ke.needReadable&&l(ye)),g(ye,ke)}Object.defineProperty(Q.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ye){this._readableState&&(this._readableState.destroyed=ye)}}),Q.prototype.destroy=q.destroy,Q.prototype._undestroy=q.undestroy,Q.prototype._destroy=function(ye,ke){this.push(null),ke(ye)},Q.prototype.push=function(ye,ke){var _e,ve=this._readableState;return ve.objectMode?_e=!0:"string"==typeof ye&&((ke=ke||ve.defaultEncoding)!==ve.encoding&&(ye=T.from(ye,ke),ke=""),_e=!0),oe(this,ye,ke,!1,_e)},Q.prototype.unshift=function(ye){return oe(this,ye,null,!0,!1)},Q.prototype.isPaused=function(){return!1===this._readableState.flowing},Q.prototype.setEncoding=function(ye){return W||(W=I(49937).I),this._readableState.decoder=new W(ye),this._readableState.encoding=ye,this};function a(ye,ke){return ye<=0||0===ke.length&&ke.ended?0:ke.objectMode?1:ye!=ye?ke.flowing&&ke.length?ke.buffer.head.data.length:ke.length:(ye>ke.highWaterMark&&(ke.highWaterMark=function E(ye){return ye>=8388608?ye=8388608:(ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++),ye}(ye)),ye<=ke.length?ye:ke.ended?ke.length:(ke.needReadable=!0,0))}function l(ye){var ke=ye._readableState;ke.needReadable=!1,ke.emittedReadable||(j("emitReadable",ke.flowing),ke.emittedReadable=!0,ke.sync?H.nextTick(h,ye):h(ye))}function h(ye){j("emit readable"),ye.emit("readable"),V(ye)}function g(ye,ke){ke.readingMore||(ke.readingMore=!0,H.nextTick(x,ye,ke))}function x(ye,ke){for(var ve=ke.length;!ke.reading&&!ke.flowing&&!ke.ended&&ke.length<ke.highWaterMark&&(j("maybeReadMore read 0"),ye.read(0),ve!==ke.length);)ve=ke.length;ke.readingMore=!1}function m(ye){j("readable nexttick read 0"),ye.read(0)}function p(ye,ke){ke.reading||(j("resume read 0"),ye.read(0)),ke.resumeScheduled=!1,ke.awaitDrain=0,ye.emit("resume"),V(ye),ke.flowing&&!ke.reading&&ye.read(0)}function V(ye){var ke=ye._readableState;for(j("flow",ke.flowing);ke.flowing&&null!==ye.read(););}function L(ye,ke){return 0===ke.length?null:(ke.objectMode?ve=ke.buffer.shift():!ye||ye>=ke.length?(ve=ke.decoder?ke.buffer.join(""):1===ke.buffer.length?ke.buffer.head.data:ke.buffer.concat(ke.length),ke.buffer.clear()):ve=function Y(ye,ke,ve){var _e;return ye<ke.head.data.length?(_e=ke.head.data.slice(0,ye),ke.head.data=ke.head.data.slice(ye)):_e=ye===ke.head.data.length?ke.shift():ve?function le(ye,ke){var ve=ke.head,_e=1,de=ve.data;for(ye-=de.length;ve=ve.next;){var se=ve.data,re=ye>se.length?se.length:ye;if(de+=re===se.length?se:se.slice(0,ye),0==(ye-=re)){re===se.length?(++_e,ke.head=ve.next?ve.next:ke.tail=null):(ke.head=ve,ve.data=se.slice(re));break}++_e}return ke.length-=_e,de}(ye,ke):function Se(ye,ke){var ve=T.allocUnsafe(ye),_e=ke.head,de=1;for(_e.data.copy(ve),ye-=_e.data.length;_e=_e.next;){var se=_e.data,re=ye>se.length?se.length:ye;if(se.copy(ve,ve.length-ye,0,re),0==(ye-=re)){re===se.length?(++de,ke.head=_e.next?_e.next:ke.tail=null):(ke.head=_e,_e.data=se.slice(re));break}++de}return ke.length-=de,ve}(ye,ke),_e}(ye,ke.buffer,ke.decoder),ve);var ve}function Oe(ye){var ke=ye._readableState;if(ke.length>0)throw new Error('"endReadable()" called on non-empty stream');ke.endEmitted||(ke.ended=!0,H.nextTick(Ve,ke,ye))}function Ve(ye,ke){!ye.endEmitted&&0===ye.length&&(ye.endEmitted=!0,ke.readable=!1,ke.emit("end"))}function Re(ye,ke){for(var ve=0,_e=ye.length;ve<_e;ve++)if(ye[ve]===ke)return ve;return-1}Q.prototype.read=function(ye){j("read",ye),ye=parseInt(ye,10);var ke=this._readableState,ve=ye;if(0!==ye&&(ke.emittedReadable=!1),0===ye&&ke.needReadable&&(ke.length>=ke.highWaterMark||ke.ended))return j("read: emitReadable",ke.length,ke.ended),0===ke.length&&ke.ended?Oe(this):l(this),null;if(0===(ye=a(ye,ke))&&ke.ended)return 0===ke.length&&Oe(this),null;var de,_e=ke.needReadable;return j("need readable",_e),(0===ke.length||ke.length-ye<ke.highWaterMark)&&j("length less than watermark",_e=!0),ke.ended||ke.reading?j("reading or ended",_e=!1):_e&&(j("do read"),ke.reading=!0,ke.sync=!0,0===ke.length&&(ke.needReadable=!0),this._read(ke.highWaterMark),ke.sync=!1,ke.reading||(ye=a(ve,ke))),null===(de=ye>0?L(ye,ke):null)?(ke.needReadable=!0,ye=0):ke.length-=ye,0===ke.length&&(ke.ended||(ke.needReadable=!0),ve!==ye&&ke.ended&&Oe(this)),null!==de&&this.emit("data",de),de},Q.prototype._read=function(ye){this.emit("error",new Error("_read() is not implemented"))},Q.prototype.pipe=function(ye,ke){var ve=this,_e=this._readableState;switch(_e.pipesCount){case 0:_e.pipes=ye;break;case 1:_e.pipes=[_e.pipes,ye];break;default:_e.pipes.push(ye)}_e.pipesCount+=1,j("pipe count=%d opts=%j",_e.pipesCount,ke);var se=ke&&!1===ke.end||ye===C.stdout||ye===C.stderr?_t:ce;function ce(){j("onend"),ye.end()}_e.endEmitted?H.nextTick(se):ve.once("end",se),ye.on("unpipe",function re(U,w){j("onunpipe"),U===ve&&w&&!1===w.hasUnpiped&&(w.hasUnpiped=!0,function Ee(){j("cleanup"),ye.removeListener("close",Ke),ye.removeListener("finish",We),ye.removeListener("drain",ue),ye.removeListener("error",et),ye.removeListener("unpipe",re),ve.removeListener("end",ce),ve.removeListener("end",_t),ve.removeListener("data",De),ge=!0,_e.awaitDrain&&(!ye._writableState||ye._writableState.needDrain)&&ue()}())});var ue=function P(ye){return function(){var ke=ye._readableState;j("pipeOnDrain",ke.awaitDrain),ke.awaitDrain&&ke.awaitDrain--,0===ke.awaitDrain&&B(ye,"data")&&(ke.flowing=!0,V(ye))}}(ve);ye.on("drain",ue);var ge=!1,Be=!1;function De(U){j("ondata"),Be=!1,!1===ye.write(U)&&!Be&&((1===_e.pipesCount&&_e.pipes===ye||_e.pipesCount>1&&-1!==Re(_e.pipes,ye))&&!ge&&(j("false write response, pause",_e.awaitDrain),_e.awaitDrain++,Be=!0),ve.pause())}function et(U){j("onerror",U),_t(),ye.removeListener("error",et),0===B(ye,"error")&&ye.emit("error",U)}function Ke(){ye.removeListener("finish",We),_t()}function We(){j("onfinish"),ye.removeListener("close",Ke),_t()}function _t(){j("unpipe"),ve.unpipe(ye)}return ve.on("data",De),function J(ye,ke,ve){if("function"==typeof ye.prependListener)return ye.prependListener(ke,ve);ye._events&&ye._events[ke]?N(ye._events[ke])?ye._events[ke].unshift(ve):ye._events[ke]=[ve,ye._events[ke]]:ye.on(ke,ve)}(ye,"error",et),ye.once("close",Ke),ye.once("finish",We),ye.emit("pipe",ve),_e.flowing||(j("pipe resume"),ve.resume()),ye},Q.prototype.unpipe=function(ye){var ke=this._readableState,ve={hasUnpiped:!1};if(0===ke.pipesCount)return this;if(1===ke.pipesCount)return ye&&ye!==ke.pipes||(ye||(ye=ke.pipes),ke.pipes=null,ke.pipesCount=0,ke.flowing=!1,ye&&ye.emit("unpipe",this,ve)),this;if(!ye){var _e=ke.pipes,de=ke.pipesCount;ke.pipes=null,ke.pipesCount=0,ke.flowing=!1;for(var se=0;se<de;se++)_e[se].emit("unpipe",this,{hasUnpiped:!1});return this}var re=Re(ke.pipes,ye);return-1===re||(ke.pipes.splice(re,1),ke.pipesCount-=1,1===ke.pipesCount&&(ke.pipes=ke.pipes[0]),ye.emit("unpipe",this,ve)),this},Q.prototype.addListener=Q.prototype.on=function(ye,ke){var ve=_.prototype.on.call(this,ye,ke);if("data"===ye)!1!==this._readableState.flowing&&this.resume();else if("readable"===ye){var _e=this._readableState;!_e.endEmitted&&!_e.readableListening&&(_e.readableListening=_e.needReadable=!0,_e.emittedReadable=!1,_e.reading?_e.length&&l(this):H.nextTick(m,this))}return ve},Q.prototype.resume=function(){var ye=this._readableState;return ye.flowing||(j("resume"),ye.flowing=!0,function d(ye,ke){ke.resumeScheduled||(ke.resumeScheduled=!0,H.nextTick(p,ye,ke))}(this,ye)),this},Q.prototype.pause=function(){return j("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(j("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Q.prototype.wrap=function(ye){var ke=this,ve=this._readableState,_e=!1;for(var de in ye.on("end",function(){if(j("wrapped end"),ve.decoder&&!ve.ended){var re=ve.decoder.end();re&&re.length&&ke.push(re)}ke.push(null)}),ye.on("data",function(re){j("wrapped data"),ve.decoder&&(re=ve.decoder.write(re)),ve.objectMode&&null==re||!(ve.objectMode||re&&re.length)||ke.push(re)||(_e=!0,ye.pause())}),ye)void 0===this[de]&&"function"==typeof ye[de]&&(this[de]=function(re){return function(){return ye[re].apply(ye,arguments)}}(de));for(var se=0;se<K.length;se++)ye.on(K[se],this.emit.bind(this,K[se]));return this._read=function(re){j("wrapped _read",re),_e&&(_e=!1,ye.resume())},this},Object.defineProperty(Q.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Q._fromList=L},93045:(xe,O,I)=>{"use strict";xe.exports=G;var C=I(23827),H=Object.create(I(27637));function N(_,T){var D=this._transformState;D.transforming=!1;var $=D.writecb;if(!$)return this.emit("error",new Error("write callback called multiple times"));D.writechunk=null,D.writecb=null,null!=T&&this.push(T),$(_);var M=this._readableState;M.reading=!1,(M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}function G(_){if(!(this instanceof G))return new G(_);C.call(this,_),this._transformState={afterTransform:N.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,_&&("function"==typeof _.transform&&(this._transform=_.transform),"function"==typeof _.flush&&(this._flush=_.flush)),this.on("prefinish",v)}function v(){var _=this;"function"==typeof this._flush?this._flush(function(T,D){B(_,T,D)}):B(this,null,null)}function B(_,T,D){if(T)return _.emit("error",T);if(null!=D&&_.push(D),_._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(_._transformState.transforming)throw new Error("Calling transform done when still transforming");return _.push(null)}H.inherits=I(71993),H.inherits(G,C),G.prototype.push=function(_,T){return this._transformState.needTransform=!1,C.prototype.push.call(this,_,T)},G.prototype._transform=function(_,T,D){throw new Error("_transform() is not implemented")},G.prototype._write=function(_,T,D){var $=this._transformState;if($.writecb=D,$.writechunk=_,$.writeencoding=T,!$.transforming){var M=this._readableState;($.needTransform||M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}},G.prototype._read=function(_){var T=this._transformState;null!==T.writechunk&&T.writecb&&!T.transforming?(T.transforming=!0,this._transform(T.writechunk,T.writeencoding,T.afterTransform)):T.needTransform=!0},G.prototype._destroy=function(_,T){var D=this;C.prototype._destroy.call(this,_,function($){T($),D.emit("close")})}},14817:(xe,O,I)=>{"use strict";var C=I(40573),H=I(9656);function G(d){var p=this;this.next=null,this.entry=null,this.finish=function(){!function m(d,p,V){var L=d.entry;for(d.entry=null;L;){var Y=L.callback;p.pendingcb--,Y(V),L=L.next}p.corkedRequestsFree.next=d}(p,d)}}xe.exports=K;var B,v=!C.browser&&["v0.10","v0.9."].indexOf(C.version.slice(0,5))>-1?setImmediate:H.nextTick;K.WritableState=q;var _=Object.create(I(27637));_.inherits=I(71993);var W,T={deprecate:I(3398)},D=I(62078),$=I(29783).Buffer,M=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},j=I(43357);function Z(){}function q(d,p){B=B||I(23827);var V=p instanceof B;this.objectMode=!!(d=d||{}).objectMode,V&&(this.objectMode=this.objectMode||!!d.writableObjectMode);var L=d.highWaterMark,Y=d.writableHighWaterMark;this.highWaterMark=L||0===L?L:V&&(Y||0===Y)?Y:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===d.decodeStrings),this.defaultEncoding=d.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Oe){!function Ie(d,p){var V=d._writableState,L=V.sync,Y=V.writecb;if(function pe(d){d.writing=!1,d.writecb=null,d.length-=d.writelen,d.writelen=0}(V),p)!function me(d,p,V,L,Y){--p.pendingcb,V?(H.nextTick(Y,L),H.nextTick(x,d,p),d._writableState.errorEmitted=!0,d.emit("error",L)):(Y(L),d._writableState.errorEmitted=!0,d.emit("error",L),x(d,p))}(d,V,L,p,Y);else{var le=l(V);!le&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&f(d,V),L?v(E,d,V,le,Y):E(d,V,le,Y)}}(p,Oe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new G(this)}function K(d){if(B=B||I(23827),!(W.call(K,this)||this instanceof B))return new K(d);this._writableState=new q(d,this),this.writable=!0,d&&("function"==typeof d.write&&(this._write=d.write),"function"==typeof d.writev&&(this._writev=d.writev),"function"==typeof d.destroy&&(this._destroy=d.destroy),"function"==typeof d.final&&(this._final=d.final)),D.call(this)}function ne(d,p,V,L,Y,le,Se){p.writelen=L,p.writecb=Se,p.writing=!0,p.sync=!0,V?d._writev(Y,p.onwrite):d._write(Y,le,p.onwrite),p.sync=!1}function E(d,p,V,L){V||function a(d,p){0===p.length&&p.needDrain&&(p.needDrain=!1,d.emit("drain"))}(d,p),p.pendingcb--,L(),x(d,p)}function f(d,p){p.bufferProcessing=!0;var V=p.bufferedRequest;if(d._writev&&V&&V.next){var Y=new Array(p.bufferedRequestCount),le=p.corkedRequestsFree;le.entry=V;for(var Se=0,Oe=!0;V;)Y[Se]=V,V.isBuf||(Oe=!1),V=V.next,Se+=1;Y.allBuffers=Oe,ne(d,p,!0,p.length,Y,"",le.finish),p.pendingcb++,p.lastBufferedRequest=null,le.next?(p.corkedRequestsFree=le.next,le.next=null):p.corkedRequestsFree=new G(p),p.bufferedRequestCount=0}else{for(;V;){var Ve=V.chunk;if(ne(d,p,!1,p.objectMode?1:Ve.length,Ve,V.encoding,V.callback),V=V.next,p.bufferedRequestCount--,p.writing)break}null===V&&(p.lastBufferedRequest=null)}p.bufferedRequest=V,p.bufferProcessing=!1}function l(d){return d.ending&&0===d.length&&null===d.bufferedRequest&&!d.finished&&!d.writing}function h(d,p){d._final(function(V){p.pendingcb--,V&&d.emit("error",V),p.prefinished=!0,d.emit("prefinish"),x(d,p)})}function x(d,p){var V=l(p);return V&&(function g(d,p){!p.prefinished&&!p.finalCalled&&("function"==typeof d._final?(p.pendingcb++,p.finalCalled=!0,H.nextTick(h,d,p)):(p.prefinished=!0,d.emit("prefinish")))}(d,p),0===p.pendingcb&&(p.finished=!0,d.emit("finish"))),V}_.inherits(K,D),q.prototype.getBuffer=function(){for(var p=this.bufferedRequest,V=[];p;)V.push(p),p=p.next;return V},function(){try{Object.defineProperty(q.prototype,"buffer",{get:T.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:function(d){return!!W.call(this,d)||this===K&&d&&d._writableState instanceof q}})):W=function(d){return d instanceof this},K.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},K.prototype.write=function(d,p,V){var L=this._writableState,Y=!1,le=!L.objectMode&&function k(d){return $.isBuffer(d)||d instanceof M}(d);return le&&!$.isBuffer(d)&&(d=function F(d){return $.from(d)}(d)),"function"==typeof p&&(V=p,p=null),le?p="buffer":p||(p=L.defaultEncoding),"function"!=typeof V&&(V=Z),L.ended?function J(d,p){var V=new Error("write after end");d.emit("error",V),H.nextTick(p,V)}(this,V):(le||function X(d,p,V,L){var Y=!0,le=!1;return null===V?le=new TypeError("May not write null values to stream"):"string"!=typeof V&&void 0!==V&&!p.objectMode&&(le=new TypeError("Invalid non-string/buffer chunk")),le&&(d.emit("error",le),H.nextTick(L,le),Y=!1),Y}(this,L,d,V))&&(L.pendingcb++,Y=function oe(d,p,V,L,Y,le){if(!V){var Se=function Q(d,p,V){return!d.objectMode&&!1!==d.decodeStrings&&"string"==typeof p&&(p=$.from(p,V)),p}(p,L,Y);L!==Se&&(V=!0,Y="buffer",L=Se)}var Oe=p.objectMode?1:L.length;p.length+=Oe;var Ve=p.length<p.highWaterMark;if(Ve||(p.needDrain=!0),p.writing||p.corked){var Re=p.lastBufferedRequest;p.lastBufferedRequest={chunk:L,encoding:Y,isBuf:V,callback:le,next:null},Re?Re.next=p.lastBufferedRequest:p.bufferedRequest=p.lastBufferedRequest,p.bufferedRequestCount+=1}else ne(d,p,!1,Oe,L,Y,le);return Ve}(this,L,le,d,p,V)),Y},K.prototype.cork=function(){this._writableState.corked++},K.prototype.uncork=function(){var d=this._writableState;d.corked&&(d.corked--,!d.writing&&!d.corked&&!d.bufferProcessing&&d.bufferedRequest&&f(this,d))},K.prototype.setDefaultEncoding=function(p){if("string"==typeof p&&(p=p.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((p+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+p);return this._writableState.defaultEncoding=p,this},Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),K.prototype._write=function(d,p,V){V(new Error("_write() is not implemented"))},K.prototype._writev=null,K.prototype.end=function(d,p,V){var L=this._writableState;"function"==typeof d?(V=d,d=null,p=null):"function"==typeof p&&(V=p,p=null),null!=d&&this.write(d,p),L.corked&&(L.corked=1,this.uncork()),L.ending||function P(d,p,V){p.ending=!0,x(d,p),V&&(p.finished?H.nextTick(V):d.once("finish",V)),p.ended=!0,d.writable=!1}(this,L,V)},Object.defineProperty(K.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(d){this._writableState&&(this._writableState.destroyed=d)}}),K.prototype.destroy=j.destroy,K.prototype._undestroy=j.undestroy,K.prototype._destroy=function(d,p){this.end(),p(d)}},10793:(xe,O,I)=>{"use strict";var H=I(29783).Buffer,N=I(21638);function G(v,B,_){v.copy(B,_)}xe.exports=function(){function v(){(function C(v,B){if(!(v instanceof B))throw new TypeError("Cannot call a class as a function")})(this,v),this.head=null,this.tail=null,this.length=0}return v.prototype.push=function(_){var T={data:_,next:null};this.length>0?this.tail.next=T:this.head=T,this.tail=T,++this.length},v.prototype.unshift=function(_){var T={data:_,next:this.head};0===this.length&&(this.tail=T),this.head=T,++this.length},v.prototype.shift=function(){if(0!==this.length){var _=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,_}},v.prototype.clear=function(){this.head=this.tail=null,this.length=0},v.prototype.join=function(_){if(0===this.length)return"";for(var T=this.head,D=""+T.data;T=T.next;)D+=_+T.data;return D},v.prototype.concat=function(_){if(0===this.length)return H.alloc(0);for(var T=H.allocUnsafe(_>>>0),D=this.head,$=0;D;)G(D.data,T,$),$+=D.data.length,D=D.next;return T},v}(),N&&N.inspect&&N.inspect.custom&&(xe.exports.prototype[N.inspect.custom]=function(){var v=N.inspect({length:this.length});return this.constructor.name+" "+v})},43357:(xe,O,I)=>{"use strict";var C=I(9656);function G(v,B){v.emit("error",B)}xe.exports={destroy:function H(v,B){var _=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(B?B(v):v&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,C.nextTick(G,this,v)):C.nextTick(G,this,v)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(v||null,function($){!B&&$?_._writableState?_._writableState.errorEmitted||(_._writableState.errorEmitted=!0,C.nextTick(G,_,$)):C.nextTick(G,_,$):B&&B($)}),this)},undestroy:function N(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},62078:(xe,O,I)=>{xe.exports=I(44356).EventEmitter},29783:(xe,O,I)=>{var C=I(83838),H=C.Buffer;function N(v,B){for(var _ in v)B[_]=v[_]}function G(v,B,_){return H(v,B,_)}H.from&&H.alloc&&H.allocUnsafe&&H.allocUnsafeSlow?xe.exports=C:(N(C,O),O.Buffer=G),N(H,G),G.from=function(v,B,_){if("number"==typeof v)throw new TypeError("Argument must not be a number");return H(v,B,_)},G.alloc=function(v,B,_){if("number"!=typeof v)throw new TypeError("Argument must be a number");var T=H(v);return void 0!==B?"string"==typeof _?T.fill(B,_):T.fill(B):T.fill(0),T},G.allocUnsafe=function(v){if("number"!=typeof v)throw new TypeError("Argument must be a number");return H(v)},G.allocUnsafeSlow=function(v){if("number"!=typeof v)throw new TypeError("Argument must be a number");return C.SlowBuffer(v)}},64670:(xe,O,I)=>{(O=xe.exports=I(81217)).Stream=O,O.Readable=O,O.Writable=I(14817),O.Duplex=I(23827),O.Transform=I(93045),O.PassThrough=I(75519)},49937:(xe,O,I)=>{"use strict";var C=I(37656).Buffer,H=C.isEncoding||function(K){switch((K=""+K)&&K.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function v(K){var J;switch(this.encoding=function G(K){var J=function N(K){if(!K)return"utf8";for(var J;;)switch(K){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return K;default:if(J)return;K=(""+K).toLowerCase(),J=!0}}(K);if("string"!=typeof J&&(C.isEncoding===H||!H(K)))throw new Error("Unknown encoding: "+K);return J||K}(K),this.encoding){case"utf16le":this.text=F,this.end=k,J=4;break;case"utf8":this.fillLast=D,J=4;break;case"base64":this.text=j,this.end=Z,J=3;break;default:return this.write=q,void(this.end=W)}this.lastNeed=0,this.lastTotal=0,this.lastChar=C.allocUnsafe(J)}function B(K){return K<=127?0:K>>5==6?2:K>>4==14?3:K>>3==30?4:K>>6==2?-1:-2}function D(K){var J=this.lastTotal-this.lastNeed,X=function T(K,J,X){if(128!=(192&J[0]))return K.lastNeed=0,"\ufffd";if(K.lastNeed>1&&J.length>1){if(128!=(192&J[1]))return K.lastNeed=1,"\ufffd";if(K.lastNeed>2&&J.length>2&&128!=(192&J[2]))return K.lastNeed=2,"\ufffd"}}(this,K);return void 0!==X?X:this.lastNeed<=K.length?(K.copy(this.lastChar,J,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(K.copy(this.lastChar,J,0,K.length),void(this.lastNeed-=K.length))}function F(K,J){if((K.length-J)%2==0){var X=K.toString("utf16le",J);if(X){var Q=X.charCodeAt(X.length-1);if(Q>=55296&&Q<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=K[K.length-2],this.lastChar[1]=K[K.length-1],X.slice(0,-1)}return X}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=K[K.length-1],K.toString("utf16le",J,K.length-1)}function k(K){var J=K&&K.length?this.write(K):"";return this.lastNeed?J+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):J}function j(K,J){var X=(K.length-J)%3;return 0===X?K.toString("base64",J):(this.lastNeed=3-X,this.lastTotal=3,1===X?this.lastChar[0]=K[K.length-1]:(this.lastChar[0]=K[K.length-2],this.lastChar[1]=K[K.length-1]),K.toString("base64",J,K.length-X))}function Z(K){var J=K&&K.length?this.write(K):"";return this.lastNeed?J+this.lastChar.toString("base64",0,3-this.lastNeed):J}function q(K){return K.toString(this.encoding)}function W(K){return K&&K.length?this.write(K):""}O.I=v,v.prototype.write=function(K){if(0===K.length)return"";var J,X;if(this.lastNeed){if(void 0===(J=this.fillLast(K)))return"";X=this.lastNeed,this.lastNeed=0}else X=0;return X<K.length?J?J+this.text(K,X):this.text(K,X):J||""},v.prototype.end=function M(K){var J=K&&K.length?this.write(K):"";return this.lastNeed?J+"\ufffd":J},v.prototype.text=function $(K,J){var X=function _(K,J,X){var Q=J.length-1;if(Q<X)return 0;var oe=B(J[Q]);return oe>=0?(oe>0&&(K.lastNeed=oe-1),oe):--Q<X||-2===oe?0:(oe=B(J[Q]))>=0?(oe>0&&(K.lastNeed=oe-2),oe):--Q<X||-2===oe?0:(oe=B(J[Q]))>=0?(oe>0&&(2===oe?oe=0:K.lastNeed=oe-3),oe):0}(this,K,J);if(!this.lastNeed)return K.toString("utf8",J);this.lastTotal=X;var Q=K.length-(X-this.lastNeed);return K.copy(this.lastChar,0,Q),K.toString("utf8",J,Q)},v.prototype.fillLast=function(K){if(this.lastNeed<=K.length)return K.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);K.copy(this.lastChar,this.lastTotal-this.lastNeed,0,K.length),this.lastNeed-=K.length}},37656:(xe,O,I)=>{var C=I(83838),H=C.Buffer;function N(v,B){for(var _ in v)B[_]=v[_]}function G(v,B,_){return H(v,B,_)}H.from&&H.alloc&&H.allocUnsafe&&H.allocUnsafeSlow?xe.exports=C:(N(C,O),O.Buffer=G),N(H,G),G.from=function(v,B,_){if("number"==typeof v)throw new TypeError("Argument must not be a number");return H(v,B,_)},G.alloc=function(v,B,_){if("number"!=typeof v)throw new TypeError("Argument must be a number");var T=H(v);return void 0!==B?"string"==typeof _?T.fill(B,_):T.fill(B):T.fill(0),T},G.allocUnsafe=function(v){if("number"!=typeof v)throw new TypeError("Argument must be a number");return H(v)},G.allocUnsafeSlow=function(v){if("number"!=typeof v)throw new TypeError("Argument must be a number");return C.SlowBuffer(v)}},13546:xe=>{xe.exports=function(I,C){for(var H=Math.min(I.length,C.length),N=new Buffer(H),G=0;G<H;++G)N[G]=I[G]^C[G];return N}},83838:(xe,O,I)=>{"use strict";var C=I(13981),H=I(22020),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=_,O.SlowBuffer=function K(re){return+re!=re&&(re=0),_.alloc(+re)},O.INSPECT_MAX_BYTES=50;var G=2147483647;function B(re){if(re>G)throw new RangeError('The value "'+re+'" is invalid for option "size"');var ce=new Uint8Array(re);return Object.setPrototypeOf(ce,_.prototype),ce}function _(re,ce,ue){if("number"==typeof re){if("string"==typeof ce)throw new TypeError('The "string" argument must be of type string. Received type number');return M(re)}return T(re,ce,ue)}function T(re,ce,ue){if("string"==typeof re)return function F(re,ce){if(("string"!=typeof ce||""===ce)&&(ce="utf8"),!_.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);var ue=0|J(re,ce),ge=B(ue),Ee=ge.write(re,ce);return Ee!==ue&&(ge=ge.slice(0,Ee)),ge}(re,ce);if(ArrayBuffer.isView(re))return function j(re){if(_e(re,Uint8Array)){var ce=new Uint8Array(re);return Z(ce.buffer,ce.byteOffset,ce.byteLength)}return k(re)}(re);if(null==re)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(_e(re,ArrayBuffer)||re&&_e(re.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_e(re,SharedArrayBuffer)||re&&_e(re.buffer,SharedArrayBuffer)))return Z(re,ce,ue);if("number"==typeof re)throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=re.valueOf&&re.valueOf();if(null!=ge&&ge!==re)return _.from(ge,ce,ue);var Ee=function q(re){if(_.isBuffer(re)){var ce=0|W(re.length),ue=B(ce);return 0===ue.length||re.copy(ue,0,0,ce),ue}return void 0!==re.length?"number"!=typeof re.length||de(re.length)?B(0):k(re):"Buffer"===re.type&&Array.isArray(re.data)?k(re.data):void 0}(re);if(Ee)return Ee;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof re[Symbol.toPrimitive])return _.from(re[Symbol.toPrimitive]("string"),ce,ue);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}function D(re){if("number"!=typeof re)throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function M(re){return D(re),B(re<0?0:0|W(re))}function k(re){for(var ce=re.length<0?0:0|W(re.length),ue=B(ce),ge=0;ge<ce;ge+=1)ue[ge]=255&re[ge];return ue}function Z(re,ce,ue){if(ce<0||re.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<ce+(ue||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return ge=void 0===ce&&void 0===ue?new Uint8Array(re):void 0===ue?new Uint8Array(re,ce):new Uint8Array(re,ce,ue),Object.setPrototypeOf(ge,_.prototype),ge}function W(re){if(re>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|re}function J(re,ce){if(_.isBuffer(re))return re.length;if(ArrayBuffer.isView(re)||_e(re,ArrayBuffer))return re.byteLength;if("string"!=typeof re)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);var ue=re.length,ge=arguments.length>2&&!0===arguments[2];if(!ge&&0===ue)return 0;for(var Ee=!1;;)switch(ce){case"ascii":case"latin1":case"binary":return ue;case"utf8":case"utf-8":return Ve(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ue;case"hex":return ue>>>1;case"base64":return ke(re).length;default:if(Ee)return ge?-1:Ve(re).length;ce=(""+ce).toLowerCase(),Ee=!0}}function X(re,ce,ue){var ge=!1;if((void 0===ce||ce<0)&&(ce=0),ce>this.length||((void 0===ue||ue>this.length)&&(ue=this.length),ue<=0)||(ue>>>=0)<=(ce>>>=0))return"";for(re||(re="utf8");;)switch(re){case"hex":return m(this,ce,ue);case"utf8":case"utf-8":return l(this,ce,ue);case"ascii":return x(this,ce,ue);case"latin1":case"binary":return P(this,ce,ue);case"base64":return f(this,ce,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,ce,ue);default:if(ge)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),ge=!0}}function Q(re,ce,ue){var ge=re[ce];re[ce]=re[ue],re[ue]=ge}function oe(re,ce,ue,ge,Ee){if(0===re.length)return-1;if("string"==typeof ue?(ge=ue,ue=0):ue>2147483647?ue=2147483647:ue<-2147483648&&(ue=-2147483648),de(ue=+ue)&&(ue=Ee?0:re.length-1),ue<0&&(ue=re.length+ue),ue>=re.length){if(Ee)return-1;ue=re.length-1}else if(ue<0){if(!Ee)return-1;ue=0}if("string"==typeof ce&&(ce=_.from(ce,ge)),_.isBuffer(ce))return 0===ce.length?-1:ne(re,ce,ue,ge,Ee);if("number"==typeof ce)return ce&=255,"function"==typeof Uint8Array.prototype.indexOf?Ee?Uint8Array.prototype.indexOf.call(re,ce,ue):Uint8Array.prototype.lastIndexOf.call(re,ce,ue):ne(re,[ce],ue,ge,Ee);throw new TypeError("val must be string, number or Buffer")}function ne(re,ce,ue,ge,Ee){var We,Be=1,De=re.length,et=ce.length;if(void 0!==ge&&("ucs2"===(ge=String(ge).toLowerCase())||"ucs-2"===ge||"utf16le"===ge||"utf-16le"===ge)){if(re.length<2||ce.length<2)return-1;Be=2,De/=2,et/=2,ue/=2}function Ke(b,z){return 1===Be?b[z]:b.readUInt16BE(z*Be)}if(Ee){var _t=-1;for(We=ue;We<De;We++)if(Ke(re,We)===Ke(ce,-1===_t?0:We-_t)){if(-1===_t&&(_t=We),We-_t+1===et)return _t*Be}else-1!==_t&&(We-=We-_t),_t=-1}else for(ue+et>De&&(ue=De-et),We=ue;We>=0;We--){for(var U=!0,w=0;w<et;w++)if(Ke(re,We+w)!==Ke(ce,w)){U=!1;break}if(U)return We}return-1}function me(re,ce,ue,ge){ue=Number(ue)||0;var Ee=re.length-ue;ge?(ge=Number(ge))>Ee&&(ge=Ee):ge=Ee;var Be=ce.length;ge>Be/2&&(ge=Be/2);for(var De=0;De<ge;++De){var et=parseInt(ce.substr(2*De,2),16);if(de(et))return De;re[ue+De]=et}return De}function pe(re,ce,ue,ge){return ve(Ve(ce,re.length-ue),re,ue,ge)}function Ie(re,ce,ue,ge){return ve(function Re(re){for(var ce=[],ue=0;ue<re.length;++ue)ce.push(255&re.charCodeAt(ue));return ce}(ce),re,ue,ge)}function E(re,ce,ue,ge){return ve(ke(ce),re,ue,ge)}function a(re,ce,ue,ge){return ve(function ye(re,ce){for(var ue,ge,Be=[],De=0;De<re.length&&!((ce-=2)<0);++De)ge=(ue=re.charCodeAt(De))>>8,Be.push(ue%256),Be.push(ge);return Be}(ce,re.length-ue),re,ue,ge)}function f(re,ce,ue){return C.fromByteArray(0===ce&&ue===re.length?re:re.slice(ce,ue))}function l(re,ce,ue){ue=Math.min(re.length,ue);for(var ge=[],Ee=ce;Ee<ue;){var Ke,We,_t,U,Be=re[Ee],De=null,et=Be>239?4:Be>223?3:Be>191?2:1;if(Ee+et<=ue)switch(et){case 1:Be<128&&(De=Be);break;case 2:128==(192&(Ke=re[Ee+1]))&&(U=(31&Be)<<6|63&Ke)>127&&(De=U);break;case 3:We=re[Ee+2],128==(192&(Ke=re[Ee+1]))&&128==(192&We)&&(U=(15&Be)<<12|(63&Ke)<<6|63&We)>2047&&(U<55296||U>57343)&&(De=U);break;case 4:We=re[Ee+2],_t=re[Ee+3],128==(192&(Ke=re[Ee+1]))&&128==(192&We)&&128==(192&_t)&&(U=(15&Be)<<18|(63&Ke)<<12|(63&We)<<6|63&_t)>65535&&U<1114112&&(De=U)}null===De?(De=65533,et=1):De>65535&&(ge.push((De-=65536)>>>10&1023|55296),De=56320|1023&De),ge.push(De),Ee+=et}return function g(re){var ce=re.length;if(ce<=h)return String.fromCharCode.apply(String,re);for(var ue="",ge=0;ge<ce;)ue+=String.fromCharCode.apply(String,re.slice(ge,ge+=h));return ue}(ge)}O.kMaxLength=G,!(_.TYPED_ARRAY_SUPPORT=function v(){try{var re=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(re,ce),42===re.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),_.poolSize=8192,_.from=function(re,ce,ue){return T(re,ce,ue)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array),_.alloc=function(re,ce,ue){return function $(re,ce,ue){return D(re),re<=0?B(re):void 0!==ce?"string"==typeof ue?B(re).fill(ce,ue):B(re).fill(ce):B(re)}(re,ce,ue)},_.allocUnsafe=function(re){return M(re)},_.allocUnsafeSlow=function(re){return M(re)},_.isBuffer=function(ce){return null!=ce&&!0===ce._isBuffer&&ce!==_.prototype},_.compare=function(ce,ue){if(_e(ce,Uint8Array)&&(ce=_.from(ce,ce.offset,ce.byteLength)),_e(ue,Uint8Array)&&(ue=_.from(ue,ue.offset,ue.byteLength)),!_.isBuffer(ce)||!_.isBuffer(ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===ue)return 0;for(var ge=ce.length,Ee=ue.length,Be=0,De=Math.min(ge,Ee);Be<De;++Be)if(ce[Be]!==ue[Be]){ge=ce[Be],Ee=ue[Be];break}return ge<Ee?-1:Ee<ge?1:0},_.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(ce,ue){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ce.length)return _.alloc(0);var ge;if(void 0===ue)for(ue=0,ge=0;ge<ce.length;++ge)ue+=ce[ge].length;var Ee=_.allocUnsafe(ue),Be=0;for(ge=0;ge<ce.length;++ge){var De=ce[ge];if(_e(De,Uint8Array))Be+De.length>Ee.length?_.from(De).copy(Ee,Be):Uint8Array.prototype.set.call(Ee,De,Be);else{if(!_.isBuffer(De))throw new TypeError('"list" argument must be an Array of Buffers');De.copy(Ee,Be)}Be+=De.length}return Ee},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var ce=this.length;if(ce%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ue=0;ue<ce;ue+=2)Q(this,ue,ue+1);return this},_.prototype.swap32=function(){var ce=this.length;if(ce%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ue=0;ue<ce;ue+=4)Q(this,ue,ue+3),Q(this,ue+1,ue+2);return this},_.prototype.swap64=function(){var ce=this.length;if(ce%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ue=0;ue<ce;ue+=8)Q(this,ue,ue+7),Q(this,ue+1,ue+6),Q(this,ue+2,ue+5),Q(this,ue+3,ue+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){var ce=this.length;return 0===ce?"":0===arguments.length?l(this,0,ce):X.apply(this,arguments)},_.prototype.equals=function(ce){if(!_.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce||0===_.compare(this,ce)},_.prototype.inspect=function(){var ce="",ue=O.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,ue).replace(/(.{2})/g,"$1 ").trim(),this.length>ue&&(ce+=" ... "),"<Buffer "+ce+">"},N&&(_.prototype[N]=_.prototype.inspect),_.prototype.compare=function(ce,ue,ge,Ee,Be){if(_e(ce,Uint8Array)&&(ce=_.from(ce,ce.offset,ce.byteLength)),!_.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ce);if(void 0===ue&&(ue=0),void 0===ge&&(ge=ce?ce.length:0),void 0===Ee&&(Ee=0),void 0===Be&&(Be=this.length),ue<0||ge>ce.length||Ee<0||Be>this.length)throw new RangeError("out of range index");if(Ee>=Be&&ue>=ge)return 0;if(Ee>=Be)return-1;if(ue>=ge)return 1;if(this===ce)return 0;for(var De=(Be>>>=0)-(Ee>>>=0),et=(ge>>>=0)-(ue>>>=0),Ke=Math.min(De,et),We=this.slice(Ee,Be),_t=ce.slice(ue,ge),U=0;U<Ke;++U)if(We[U]!==_t[U]){De=We[U],et=_t[U];break}return De<et?-1:et<De?1:0},_.prototype.includes=function(ce,ue,ge){return-1!==this.indexOf(ce,ue,ge)},_.prototype.indexOf=function(ce,ue,ge){return oe(this,ce,ue,ge,!0)},_.prototype.lastIndexOf=function(ce,ue,ge){return oe(this,ce,ue,ge,!1)},_.prototype.write=function(ce,ue,ge,Ee){if(void 0===ue)Ee="utf8",ge=this.length,ue=0;else if(void 0===ge&&"string"==typeof ue)Ee=ue,ge=this.length,ue=0;else{if(!isFinite(ue))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ue>>>=0,isFinite(ge)?(ge>>>=0,void 0===Ee&&(Ee="utf8")):(Ee=ge,ge=void 0)}var Be=this.length-ue;if((void 0===ge||ge>Be)&&(ge=Be),ce.length>0&&(ge<0||ue<0)||ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");for(var De=!1;;)switch(Ee){case"hex":return me(this,ce,ue,ge);case"utf8":case"utf-8":return pe(this,ce,ue,ge);case"ascii":case"latin1":case"binary":return Ie(this,ce,ue,ge);case"base64":return E(this,ce,ue,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a(this,ce,ue,ge);default:if(De)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),De=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var h=4096;function x(re,ce,ue){var ge="";ue=Math.min(re.length,ue);for(var Ee=ce;Ee<ue;++Ee)ge+=String.fromCharCode(127&re[Ee]);return ge}function P(re,ce,ue){var ge="";ue=Math.min(re.length,ue);for(var Ee=ce;Ee<ue;++Ee)ge+=String.fromCharCode(re[Ee]);return ge}function m(re,ce,ue){var ge=re.length;(!ce||ce<0)&&(ce=0),(!ue||ue<0||ue>ge)&&(ue=ge);for(var Ee="",Be=ce;Be<ue;++Be)Ee+=se[re[Be]];return Ee}function d(re,ce,ue){for(var ge=re.slice(ce,ue),Ee="",Be=0;Be<ge.length-1;Be+=2)Ee+=String.fromCharCode(ge[Be]+256*ge[Be+1]);return Ee}function p(re,ce,ue){if(re%1!=0||re<0)throw new RangeError("offset is not uint");if(re+ce>ue)throw new RangeError("Trying to access beyond buffer length")}function V(re,ce,ue,ge,Ee,Be){if(!_.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>Ee||ce<Be)throw new RangeError('"value" argument is out of bounds');if(ue+ge>re.length)throw new RangeError("Index out of range")}function L(re,ce,ue,ge,Ee,Be){if(ue+ge>re.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("Index out of range")}function Y(re,ce,ue,ge,Ee){return ce=+ce,ue>>>=0,Ee||L(re,0,ue,4),H.write(re,ce,ue,ge,23,4),ue+4}function le(re,ce,ue,ge,Ee){return ce=+ce,ue>>>=0,Ee||L(re,0,ue,8),H.write(re,ce,ue,ge,52,8),ue+8}_.prototype.slice=function(ce,ue){var ge=this.length;(ce=~~ce)<0?(ce+=ge)<0&&(ce=0):ce>ge&&(ce=ge),(ue=void 0===ue?ge:~~ue)<0?(ue+=ge)<0&&(ue=0):ue>ge&&(ue=ge),ue<ce&&(ue=ce);var Ee=this.subarray(ce,ue);return Object.setPrototypeOf(Ee,_.prototype),Ee},_.prototype.readUintLE=_.prototype.readUIntLE=function(ce,ue,ge){ce>>>=0,ue>>>=0,ge||p(ce,ue,this.length);for(var Ee=this[ce],Be=1,De=0;++De<ue&&(Be*=256);)Ee+=this[ce+De]*Be;return Ee},_.prototype.readUintBE=_.prototype.readUIntBE=function(ce,ue,ge){ce>>>=0,ue>>>=0,ge||p(ce,ue,this.length);for(var Ee=this[ce+--ue],Be=1;ue>0&&(Be*=256);)Ee+=this[ce+--ue]*Be;return Ee},_.prototype.readUint8=_.prototype.readUInt8=function(ce,ue){return ce>>>=0,ue||p(ce,1,this.length),this[ce]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(ce,ue){return ce>>>=0,ue||p(ce,2,this.length),this[ce]|this[ce+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(ce,ue){return ce>>>=0,ue||p(ce,2,this.length),this[ce]<<8|this[ce+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(ce,ue){return ce>>>=0,ue||p(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+16777216*this[ce+3]},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(ce,ue){return ce>>>=0,ue||p(ce,4,this.length),16777216*this[ce]+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},_.prototype.readIntLE=function(ce,ue,ge){ce>>>=0,ue>>>=0,ge||p(ce,ue,this.length);for(var Ee=this[ce],Be=1,De=0;++De<ue&&(Be*=256);)Ee+=this[ce+De]*Be;return Ee>=(Be*=128)&&(Ee-=Math.pow(2,8*ue)),Ee},_.prototype.readIntBE=function(ce,ue,ge){ce>>>=0,ue>>>=0,ge||p(ce,ue,this.length);for(var Ee=ue,Be=1,De=this[ce+--Ee];Ee>0&&(Be*=256);)De+=this[ce+--Ee]*Be;return De>=(Be*=128)&&(De-=Math.pow(2,8*ue)),De},_.prototype.readInt8=function(ce,ue){return ce>>>=0,ue||p(ce,1,this.length),128&this[ce]?-1*(255-this[ce]+1):this[ce]},_.prototype.readInt16LE=function(ce,ue){ce>>>=0,ue||p(ce,2,this.length);var ge=this[ce]|this[ce+1]<<8;return 32768&ge?4294901760|ge:ge},_.prototype.readInt16BE=function(ce,ue){ce>>>=0,ue||p(ce,2,this.length);var ge=this[ce+1]|this[ce]<<8;return 32768&ge?4294901760|ge:ge},_.prototype.readInt32LE=function(ce,ue){return ce>>>=0,ue||p(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},_.prototype.readInt32BE=function(ce,ue){return ce>>>=0,ue||p(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},_.prototype.readFloatLE=function(ce,ue){return ce>>>=0,ue||p(ce,4,this.length),H.read(this,ce,!0,23,4)},_.prototype.readFloatBE=function(ce,ue){return ce>>>=0,ue||p(ce,4,this.length),H.read(this,ce,!1,23,4)},_.prototype.readDoubleLE=function(ce,ue){return ce>>>=0,ue||p(ce,8,this.length),H.read(this,ce,!0,52,8)},_.prototype.readDoubleBE=function(ce,ue){return ce>>>=0,ue||p(ce,8,this.length),H.read(this,ce,!1,52,8)},_.prototype.writeUintLE=_.prototype.writeUIntLE=function(ce,ue,ge,Ee){ce=+ce,ue>>>=0,ge>>>=0,Ee||V(this,ce,ue,ge,Math.pow(2,8*ge)-1,0);var De=1,et=0;for(this[ue]=255&ce;++et<ge&&(De*=256);)this[ue+et]=ce/De&255;return ue+ge},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(ce,ue,ge,Ee){ce=+ce,ue>>>=0,ge>>>=0,Ee||V(this,ce,ue,ge,Math.pow(2,8*ge)-1,0);var De=ge-1,et=1;for(this[ue+De]=255&ce;--De>=0&&(et*=256);)this[ue+De]=ce/et&255;return ue+ge},_.prototype.writeUint8=_.prototype.writeUInt8=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,1,255,0),this[ue]=255&ce,ue+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,2,65535,0),this[ue]=255&ce,this[ue+1]=ce>>>8,ue+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,2,65535,0),this[ue]=ce>>>8,this[ue+1]=255&ce,ue+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,4,4294967295,0),this[ue+3]=ce>>>24,this[ue+2]=ce>>>16,this[ue+1]=ce>>>8,this[ue]=255&ce,ue+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,4,4294967295,0),this[ue]=ce>>>24,this[ue+1]=ce>>>16,this[ue+2]=ce>>>8,this[ue+3]=255&ce,ue+4},_.prototype.writeIntLE=function(ce,ue,ge,Ee){if(ce=+ce,ue>>>=0,!Ee){var Be=Math.pow(2,8*ge-1);V(this,ce,ue,ge,Be-1,-Be)}var De=0,et=1,Ke=0;for(this[ue]=255&ce;++De<ge&&(et*=256);)ce<0&&0===Ke&&0!==this[ue+De-1]&&(Ke=1),this[ue+De]=(ce/et|0)-Ke&255;return ue+ge},_.prototype.writeIntBE=function(ce,ue,ge,Ee){if(ce=+ce,ue>>>=0,!Ee){var Be=Math.pow(2,8*ge-1);V(this,ce,ue,ge,Be-1,-Be)}var De=ge-1,et=1,Ke=0;for(this[ue+De]=255&ce;--De>=0&&(et*=256);)ce<0&&0===Ke&&0!==this[ue+De+1]&&(Ke=1),this[ue+De]=(ce/et|0)-Ke&255;return ue+ge},_.prototype.writeInt8=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,1,127,-128),ce<0&&(ce=255+ce+1),this[ue]=255&ce,ue+1},_.prototype.writeInt16LE=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,2,32767,-32768),this[ue]=255&ce,this[ue+1]=ce>>>8,ue+2},_.prototype.writeInt16BE=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,2,32767,-32768),this[ue]=ce>>>8,this[ue+1]=255&ce,ue+2},_.prototype.writeInt32LE=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,4,2147483647,-2147483648),this[ue]=255&ce,this[ue+1]=ce>>>8,this[ue+2]=ce>>>16,this[ue+3]=ce>>>24,ue+4},_.prototype.writeInt32BE=function(ce,ue,ge){return ce=+ce,ue>>>=0,ge||V(this,ce,ue,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[ue]=ce>>>24,this[ue+1]=ce>>>16,this[ue+2]=ce>>>8,this[ue+3]=255&ce,ue+4},_.prototype.writeFloatLE=function(ce,ue,ge){return Y(this,ce,ue,!0,ge)},_.prototype.writeFloatBE=function(ce,ue,ge){return Y(this,ce,ue,!1,ge)},_.prototype.writeDoubleLE=function(ce,ue,ge){return le(this,ce,ue,!0,ge)},_.prototype.writeDoubleBE=function(ce,ue,ge){return le(this,ce,ue,!1,ge)},_.prototype.copy=function(ce,ue,ge,Ee){if(!_.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!Ee&&0!==Ee&&(Ee=this.length),ue>=ce.length&&(ue=ce.length),ue||(ue=0),Ee>0&&Ee<ge&&(Ee=ge),Ee===ge||0===ce.length||0===this.length)return 0;if(ue<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),ce.length-ue<Ee-ge&&(Ee=ce.length-ue+ge);var Be=Ee-ge;return this===ce&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ue,ge,Ee):Uint8Array.prototype.set.call(ce,this.subarray(ge,Ee),ue),Be},_.prototype.fill=function(ce,ue,ge,Ee){if("string"==typeof ce){if("string"==typeof ue?(Ee=ue,ue=0,ge=this.length):"string"==typeof ge&&(Ee=ge,ge=this.length),void 0!==Ee&&"string"!=typeof Ee)throw new TypeError("encoding must be a string");if("string"==typeof Ee&&!_.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);if(1===ce.length){var Be=ce.charCodeAt(0);("utf8"===Ee&&Be<128||"latin1"===Ee)&&(ce=Be)}}else"number"==typeof ce?ce&=255:"boolean"==typeof ce&&(ce=Number(ce));if(ue<0||this.length<ue||this.length<ge)throw new RangeError("Out of range index");if(ge<=ue)return this;var De;if(ue>>>=0,ge=void 0===ge?this.length:ge>>>0,ce||(ce=0),"number"==typeof ce)for(De=ue;De<ge;++De)this[De]=ce;else{var et=_.isBuffer(ce)?ce:_.from(ce,Ee),Ke=et.length;if(0===Ke)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(De=0;De<ge-ue;++De)this[De+ue]=et[De%Ke]}return this};var Se=/[^+/0-9A-Za-z-_]/g;function Ve(re,ce){ce=ce||1/0;for(var ue,ge=re.length,Ee=null,Be=[],De=0;De<ge;++De){if((ue=re.charCodeAt(De))>55295&&ue<57344){if(!Ee){if(ue>56319){(ce-=3)>-1&&Be.push(239,191,189);continue}if(De+1===ge){(ce-=3)>-1&&Be.push(239,191,189);continue}Ee=ue;continue}if(ue<56320){(ce-=3)>-1&&Be.push(239,191,189),Ee=ue;continue}ue=65536+(Ee-55296<<10|ue-56320)}else Ee&&(ce-=3)>-1&&Be.push(239,191,189);if(Ee=null,ue<128){if((ce-=1)<0)break;Be.push(ue)}else if(ue<2048){if((ce-=2)<0)break;Be.push(ue>>6|192,63&ue|128)}else if(ue<65536){if((ce-=3)<0)break;Be.push(ue>>12|224,ue>>6&63|128,63&ue|128)}else{if(!(ue<1114112))throw new Error("Invalid code point");if((ce-=4)<0)break;Be.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,63&ue|128)}}return Be}function ke(re){return C.toByteArray(function Oe(re){if((re=(re=re.split("=")[0]).trim().replace(Se,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(re))}function ve(re,ce,ue,ge){for(var Ee=0;Ee<ge&&!(Ee+ue>=ce.length||Ee>=re.length);++Ee)ce[Ee+ue]=re[Ee];return Ee}function _e(re,ce){return re instanceof ce||null!=re&&null!=re.constructor&&null!=re.constructor.name&&re.constructor.name===ce.name}function de(re){return re!=re}var se=function(){for(var re="0123456789abcdef",ce=new Array(256),ue=0;ue<16;++ue)for(var ge=16*ue,Ee=0;Ee<16;++Ee)ce[ge+Ee]=re[ue]+re[Ee];return ce}()},28846:xe=>{"use strict";xe.exports=function O(I){if("number"==typeof I&&isNaN(I))throw new Error("NaN is not allowed");if("number"==typeof I&&!isFinite(I))throw new Error("Infinity is not allowed");return null===I||"object"!=typeof I?JSON.stringify(I):I.toJSON instanceof Function?O(I.toJSON()):Array.isArray(I)?`[${I.reduce((N,G,v)=>`${N}${0===v?"":","}${O(void 0===G||"symbol"==typeof G?null:G)}`,"")}]`:`{${Object.keys(I).sort().reduce((H,N)=>void 0===I[N]||"symbol"==typeof I[N]?H:`${H}${0===H.length?"":","}${O(N)}:${O(I[N])}`,"")}}`}},42381:(xe,O,I)=>{"use strict";var C=I(78341);O.fromCallback=function(H,N){if(void 0===H){var G=new Promise(function(v,B){H=function(_,T){_?B(_):v(T)}});H[void 0!==N?N:"promise"]=G}else if("function"!=typeof H)throw new TypeError("Callback must be a function");return H},O.fromPromise=function(H,N){if(void 0===N)return H;H.then(function(G){C(()=>N(null,G))}).catch(function(G){C(()=>N(G))})}},78341:xe=>{xe.exports="function"==typeof queueMicrotask?queueMicrotask:O=>Promise.resolve().then(O)},3247:(xe,O,I)=>{var C=I(27054).Buffer,H=I(7045).Transform,N=I(78454).StringDecoder;function v(B){H.call(this),this.hashMode="string"==typeof B,this.hashMode?this[B]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}I(71993)(v,H),v.prototype.update=function(B,_,T){"string"==typeof B&&(B=C.from(B,_));var D=this._update(B);return this.hashMode?this:(T&&(D=this._toString(D,T)),D)},v.prototype.setAutoPadding=function(){},v.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},v.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},v.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},v.prototype._transform=function(B,_,T){var D;try{this.hashMode?this._update(B):this.push(this._update(B))}catch($){D=$}finally{T(D)}},v.prototype._flush=function(B){var _;try{this.push(this.__final())}catch(T){_=T}B(_)},v.prototype._finalOrDigest=function(B){var _=this.__final()||C.alloc(0);return B&&(_=this._toString(_,B,!0)),_},v.prototype._toString=function(B,_,T){if(this._decoder||(this._decoder=new N(_),this._encoding=_),this._encoding!==_)throw new Error("can't switch encodings");var D=this._decoder.write(B);return T&&(D+=this._decoder.end()),D},xe.exports=v},27637:(xe,O,I)=>{function Z(q){return Object.prototype.toString.call(q)}O.isArray=function C(q){return Array.isArray?Array.isArray(q):"[object Array]"===Z(q)},O.isBoolean=function H(q){return"boolean"==typeof q},O.isNull=function N(q){return null===q},O.isNullOrUndefined=function G(q){return null==q},O.isNumber=function v(q){return"number"==typeof q},O.isString=function B(q){return"string"==typeof q},O.isSymbol=function _(q){return"symbol"==typeof q},O.isUndefined=function T(q){return void 0===q},O.isRegExp=function D(q){return"[object RegExp]"===Z(q)},O.isObject=function $(q){return"object"==typeof q&&null!==q},O.isDate=function M(q){return"[object Date]"===Z(q)},O.isError=function F(q){return"[object Error]"===Z(q)||q instanceof Error},O.isFunction=function k(q){return"function"==typeof q},O.isPrimitive=function j(q){return null===q||"boolean"==typeof q||"number"==typeof q||"string"==typeof q||"symbol"==typeof q||typeof q>"u"},O.isBuffer=I(83838).Buffer.isBuffer},87303:(xe,O,I)=>{var C=I(90518),H=I(89606);xe.exports=function(_){return new G(_)};var N={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function G(B){this.curveType=N[B],this.curveType||(this.curveType={name:B}),this.curve=new C.ec(this.curveType.name),this.keys=void 0}function v(B,_,T){Array.isArray(B)||(B=B.toArray());var D=new Buffer(B);if(T&&D.length<T){var $=new Buffer(T-D.length);$.fill(0),D=Buffer.concat([$,D])}return _?D.toString(_):D}N.p224=N.secp224r1,N.p256=N.secp256r1=N.prime256v1,N.p192=N.secp192r1=N.prime192v1,N.p384=N.secp384r1,N.p521=N.secp521r1,G.prototype.generateKeys=function(B,_){return this.keys=this.curve.genKeyPair(),this.getPublicKey(B,_)},G.prototype.computeSecret=function(B,_,T){return _=_||"utf8",Buffer.isBuffer(B)||(B=new Buffer(B,_)),v(this.curve.keyFromPublic(B).getPublic().mul(this.keys.getPrivate()).getX(),T,this.curveType.byteLength)},G.prototype.getPublicKey=function(B,_){var T=this.keys.getPublic("compressed"===_,!0);return"hybrid"===_&&(T[0]=T[T.length-1]%2?7:6),v(T,B)},G.prototype.getPrivateKey=function(B){return v(this.keys.getPrivate(),B)},G.prototype.setPublicKey=function(B,_){return _=_||"utf8",Buffer.isBuffer(B)||(B=new Buffer(B,_)),this.keys._importPublic(B),this},G.prototype.setPrivateKey=function(B,_){_=_||"utf8",Buffer.isBuffer(B)||(B=new Buffer(B,_));var T=new H(B);return T=T.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(T),this}},89606:function(xe,O,I){!function(C,H){"use strict";function N(E,a){if(!E)throw new Error(a||"Assertion failed")}function G(E,a){E.super_=a;var f=function(){};f.prototype=a.prototype,E.prototype=new f,E.prototype.constructor=E}function v(E,a,f){if(v.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,null!==E&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(E||0,a||10,f||"be"))}var B;"object"==typeof C?C.exports=v:H.BN=v,v.BN=v,v.wordSize=26;try{B=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:I(77965).Buffer}catch{}function _(E,a){var f=E.charCodeAt(a);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function T(E,a,f){var l=_(E,f);return f-1>=a&&(l|=_(E,f-1)<<4),l}function D(E,a,f,l){for(var h=0,g=Math.min(E.length,f),x=a;x<g;x++){var P=E.charCodeAt(x)-48;h*=l,h+=P>=49?P-49+10:P>=17?P-17+10:P}return h}v.isBN=function(a){return a instanceof v||null!==a&&"object"==typeof a&&a.constructor.wordSize===v.wordSize&&Array.isArray(a.words)},v.max=function(a,f){return a.cmp(f)>0?a:f},v.min=function(a,f){return a.cmp(f)<0?a:f},v.prototype._init=function(a,f,l){if("number"==typeof a)return this._initNumber(a,f,l);if("object"==typeof a)return this._initArray(a,f,l);"hex"===f&&(f=16),N(f===(0|f)&&f>=2&&f<=36);var h=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(h++,this.negative=1),h<a.length&&(16===f?this._parseHex(a,h,l):(this._parseBase(a,f,h),"le"===l&&this._initArray(this.toArray(),f,l)))},v.prototype._initNumber=function(a,f,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(N(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),f,l)},v.prototype._initArray=function(a,f,l){if(N("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var g,x,P=0;if("be"===l)for(h=a.length-1,g=0;h>=0;h-=3)this.words[g]|=(x=a[h]|a[h-1]<<8|a[h-2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);else if("le"===l)for(h=0,g=0;h<a.length;h+=3)this.words[g]|=(x=a[h]|a[h+1]<<8|a[h+2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);return this.strip()},v.prototype._parseHex=function(a,f,l){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var P,g=0,x=0;if("be"===l)for(h=a.length-1;h>=f;h-=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;else for(h=(a.length-f)%2==0?f+1:f;h<a.length;h+=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;this.strip()},v.prototype._parseBase=function(a,f,l){this.words=[0],this.length=1;for(var h=0,g=1;g<=67108863;g*=f)h++;h--,g=g/f|0;for(var x=a.length-l,P=x%h,m=Math.min(x,x-P)+l,d=0,p=l;p<m;p+=h)d=D(a,p,p+h,f),this.imuln(g),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==P){var V=1;for(d=D(a,p,a.length,f),p=0;p<P;p++)V*=f;this.imuln(V),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},v.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},v.prototype.clone=function(){var a=new v(null);return this.copy(a),a},v.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var $=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function j(E,a,f){f.negative=a.negative^E.negative;var l=E.length+a.length|0;f.length=l,l=l-1|0;var h=0|E.words[0],g=0|a.words[0],x=h*g,m=x/67108864|0;f.words[0]=67108863&x;for(var d=1;d<l;d++){for(var p=m>>>26,V=67108863&m,L=Math.min(d,a.length-1),Y=Math.max(0,d-E.length+1);Y<=L;Y++)p+=(x=(h=0|E.words[d-Y|0])*(g=0|a.words[Y])+V)/67108864|0,V=67108863&x;f.words[d]=0|V,m=0|p}return 0!==m?f.words[d]=0|m:f.length--,f.strip()}v.prototype.toString=function(a,f){var l;if(f=0|f||1,16===(a=a||10)||"hex"===a){l="";for(var h=0,g=0,x=0;x<this.length;x++){var P=this.words[x],m=(16777215&(P<<h|g)).toString(16);l=0!=(g=P>>>24-h&16777215)||x!==this.length-1?$[6-m.length]+m+l:m+l,(h+=2)>=26&&(h-=26,x--)}for(0!==g&&(l=g.toString(16)+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(a===(0|a)&&a>=2&&a<=36){var d=M[a],p=F[a];l="";var V=this.clone();for(V.negative=0;!V.isZero();){var L=V.modn(p).toString(a);l=(V=V.idivn(p)).isZero()?L+l:$[d-L.length]+L+l}for(this.isZero()&&(l="0"+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}N(!1,"Base should be between 2 and 36")},v.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&N(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(a,f){return N(typeof B<"u"),this.toArrayLike(B,a,f)},v.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},v.prototype.toArrayLike=function(a,f,l){var h=this.byteLength(),g=l||Math.max(1,h);N(h<=g,"byte array longer than desired length"),N(g>0,"Requested array length <= 0"),this.strip();var m,d,x="le"===f,P=new a(g),p=this.clone();if(x){for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[d]=m;for(;d<g;d++)P[d]=0}else{for(d=0;d<g-h;d++)P[d]=0;for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[g-d-1]=m}return P},v.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},v.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,l=0;return 8191&f||(l+=13,f>>>=13),127&f||(l+=7,f>>>=7),15&f||(l+=4,f>>>=4),3&f||(l+=2,f>>>=2),1&f||l++,l},v.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(a+=l,26!==l)break}return a},v.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},v.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},v.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this.strip()},v.prototype.ior=function(a){return N(!(this.negative|a.negative)),this.iuor(a)},v.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},v.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},v.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=f.length,this.strip()},v.prototype.iand=function(a){return N(!(this.negative|a.negative)),this.iuand(a)},v.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},v.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},v.prototype.iuxor=function(a){var f,l;this.length>a.length?(f=this,l=a):(f=a,l=this);for(var h=0;h<l.length;h++)this.words[h]=f.words[h]^l.words[h];if(this!==f)for(;h<f.length;h++)this.words[h]=f.words[h];return this.length=f.length,this.strip()},v.prototype.ixor=function(a){return N(!(this.negative|a.negative)),this.iuxor(a)},v.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},v.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},v.prototype.inotn=function(a){N("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),l=a%26;this._expand(f),l>0&&f--;for(var h=0;h<f;h++)this.words[h]=67108863&~this.words[h];return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this.strip()},v.prototype.notn=function(a){return this.clone().inotn(a)},v.prototype.setn=function(a,f){N("number"==typeof a&&a>=0);var l=a/26|0,h=a%26;return this._expand(l+1),this.words[l]=f?this.words[l]|1<<h:this.words[l]&~(1<<h),this.strip()},v.prototype.iadd=function(a){var f,l,h;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(l=this,h=a):(l=a,h=this);for(var g=0,x=0;x<h.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+(0|h.words[x])+g),g=f>>>26;for(;0!==g&&x<l.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+g),g=f>>>26;if(this.length=l.length,0!==g)this.words[this.length]=g,this.length++;else if(l!==this)for(;x<l.length;x++)this.words[x]=l.words[x];return this},v.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},v.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h,g,l=this.cmp(a);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(h=this,g=a):(h=a,g=this);for(var x=0,P=0;P<g.length;P++)x=(f=(0|h.words[P])-(0|g.words[P])+x)>>26,this.words[P]=67108863&f;for(;0!==x&&P<h.length;P++)x=(f=(0|h.words[P])+x)>>26,this.words[P]=67108863&f;if(0===x&&P<h.length&&h!==this)for(;P<h.length;P++)this.words[P]=h.words[P];return this.length=Math.max(this.length,P),h!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(a){return this.clone().isub(a)};var Z=function(a,f,l){var m,d,p,h=a.words,g=f.words,x=l.words,P=0,V=0|h[0],L=8191&V,Y=V>>>13,le=0|h[1],Se=8191&le,Oe=le>>>13,Ve=0|h[2],Re=8191&Ve,ye=Ve>>>13,ke=0|h[3],ve=8191&ke,_e=ke>>>13,de=0|h[4],se=8191&de,re=de>>>13,ce=0|h[5],ue=8191&ce,ge=ce>>>13,Ee=0|h[6],Be=8191&Ee,De=Ee>>>13,et=0|h[7],Ke=8191&et,We=et>>>13,_t=0|h[8],U=8191&_t,w=_t>>>13,b=0|h[9],z=8191&b,ie=b>>>13,be=0|g[0],Me=8191&be,qe=be>>>13,At=0|g[1],nt=8191&At,rt=At>>>13,St=0|g[2],bt=8191&St,Mt=St>>>13,Ft=0|g[3],it=8191&Ft,mt=Ft>>>13,Rr=0|g[4],xt=8191&Rr,It=Rr>>>13,Qr=0|g[5],Tt=8191&Qr,Pt=Qr>>>13,kn=0|g[6],Fe=8191&kn,He=kn>>>13,Ze=0|g[7],Ue=8191&Ze,Ge=Ze>>>13,pt=0|g[8],Xe=8191&pt,dt=pt>>>13,Qt=0|g[9],gt=8191&Qt,wt=Qt>>>13;l.negative=a.negative^f.negative,l.length=19;var Br=(P+(m=Math.imul(L,Me))|0)+((8191&(d=(d=Math.imul(L,qe))+Math.imul(Y,Me)|0))<<13)|0;P=((p=Math.imul(Y,qe))+(d>>>13)|0)+(Br>>>26)|0,Br&=67108863,m=Math.imul(Se,Me),d=(d=Math.imul(Se,qe))+Math.imul(Oe,Me)|0,p=Math.imul(Oe,qe);var Vt=(P+(m=m+Math.imul(L,nt)|0)|0)+((8191&(d=(d=d+Math.imul(L,rt)|0)+Math.imul(Y,nt)|0))<<13)|0;P=((p=p+Math.imul(Y,rt)|0)+(d>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,m=Math.imul(Re,Me),d=(d=Math.imul(Re,qe))+Math.imul(ye,Me)|0,p=Math.imul(ye,qe),m=m+Math.imul(Se,nt)|0,d=(d=d+Math.imul(Se,rt)|0)+Math.imul(Oe,nt)|0,p=p+Math.imul(Oe,rt)|0;var Zt=(P+(m=m+Math.imul(L,bt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Mt)|0)+Math.imul(Y,bt)|0))<<13)|0;P=((p=p+Math.imul(Y,Mt)|0)+(d>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,m=Math.imul(ve,Me),d=(d=Math.imul(ve,qe))+Math.imul(_e,Me)|0,p=Math.imul(_e,qe),m=m+Math.imul(Re,nt)|0,d=(d=d+Math.imul(Re,rt)|0)+Math.imul(ye,nt)|0,p=p+Math.imul(ye,rt)|0,m=m+Math.imul(Se,bt)|0,d=(d=d+Math.imul(Se,Mt)|0)+Math.imul(Oe,bt)|0,p=p+Math.imul(Oe,Mt)|0;var Tr=(P+(m=m+Math.imul(L,it)|0)|0)+((8191&(d=(d=d+Math.imul(L,mt)|0)+Math.imul(Y,it)|0))<<13)|0;P=((p=p+Math.imul(Y,mt)|0)+(d>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,m=Math.imul(se,Me),d=(d=Math.imul(se,qe))+Math.imul(re,Me)|0,p=Math.imul(re,qe),m=m+Math.imul(ve,nt)|0,d=(d=d+Math.imul(ve,rt)|0)+Math.imul(_e,nt)|0,p=p+Math.imul(_e,rt)|0,m=m+Math.imul(Re,bt)|0,d=(d=d+Math.imul(Re,Mt)|0)+Math.imul(ye,bt)|0,p=p+Math.imul(ye,Mt)|0,m=m+Math.imul(Se,it)|0,d=(d=d+Math.imul(Se,mt)|0)+Math.imul(Oe,it)|0,p=p+Math.imul(Oe,mt)|0;var dr=(P+(m=m+Math.imul(L,xt)|0)|0)+((8191&(d=(d=d+Math.imul(L,It)|0)+Math.imul(Y,xt)|0))<<13)|0;P=((p=p+Math.imul(Y,It)|0)+(d>>>13)|0)+(dr>>>26)|0,dr&=67108863,m=Math.imul(ue,Me),d=(d=Math.imul(ue,qe))+Math.imul(ge,Me)|0,p=Math.imul(ge,qe),m=m+Math.imul(se,nt)|0,d=(d=d+Math.imul(se,rt)|0)+Math.imul(re,nt)|0,p=p+Math.imul(re,rt)|0,m=m+Math.imul(ve,bt)|0,d=(d=d+Math.imul(ve,Mt)|0)+Math.imul(_e,bt)|0,p=p+Math.imul(_e,Mt)|0,m=m+Math.imul(Re,it)|0,d=(d=d+Math.imul(Re,mt)|0)+Math.imul(ye,it)|0,p=p+Math.imul(ye,mt)|0,m=m+Math.imul(Se,xt)|0,d=(d=d+Math.imul(Se,It)|0)+Math.imul(Oe,xt)|0,p=p+Math.imul(Oe,It)|0;var or=(P+(m=m+Math.imul(L,Tt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Pt)|0)+Math.imul(Y,Tt)|0))<<13)|0;P=((p=p+Math.imul(Y,Pt)|0)+(d>>>13)|0)+(or>>>26)|0,or&=67108863,m=Math.imul(Be,Me),d=(d=Math.imul(Be,qe))+Math.imul(De,Me)|0,p=Math.imul(De,qe),m=m+Math.imul(ue,nt)|0,d=(d=d+Math.imul(ue,rt)|0)+Math.imul(ge,nt)|0,p=p+Math.imul(ge,rt)|0,m=m+Math.imul(se,bt)|0,d=(d=d+Math.imul(se,Mt)|0)+Math.imul(re,bt)|0,p=p+Math.imul(re,Mt)|0,m=m+Math.imul(ve,it)|0,d=(d=d+Math.imul(ve,mt)|0)+Math.imul(_e,it)|0,p=p+Math.imul(_e,mt)|0,m=m+Math.imul(Re,xt)|0,d=(d=d+Math.imul(Re,It)|0)+Math.imul(ye,xt)|0,p=p+Math.imul(ye,It)|0,m=m+Math.imul(Se,Tt)|0,d=(d=d+Math.imul(Se,Pt)|0)+Math.imul(Oe,Tt)|0,p=p+Math.imul(Oe,Pt)|0;var mr=(P+(m=m+Math.imul(L,Fe)|0)|0)+((8191&(d=(d=d+Math.imul(L,He)|0)+Math.imul(Y,Fe)|0))<<13)|0;P=((p=p+Math.imul(Y,He)|0)+(d>>>13)|0)+(mr>>>26)|0,mr&=67108863,m=Math.imul(Ke,Me),d=(d=Math.imul(Ke,qe))+Math.imul(We,Me)|0,p=Math.imul(We,qe),m=m+Math.imul(Be,nt)|0,d=(d=d+Math.imul(Be,rt)|0)+Math.imul(De,nt)|0,p=p+Math.imul(De,rt)|0,m=m+Math.imul(ue,bt)|0,d=(d=d+Math.imul(ue,Mt)|0)+Math.imul(ge,bt)|0,p=p+Math.imul(ge,Mt)|0,m=m+Math.imul(se,it)|0,d=(d=d+Math.imul(se,mt)|0)+Math.imul(re,it)|0,p=p+Math.imul(re,mt)|0,m=m+Math.imul(ve,xt)|0,d=(d=d+Math.imul(ve,It)|0)+Math.imul(_e,xt)|0,p=p+Math.imul(_e,It)|0,m=m+Math.imul(Re,Tt)|0,d=(d=d+Math.imul(Re,Pt)|0)+Math.imul(ye,Tt)|0,p=p+Math.imul(ye,Pt)|0,m=m+Math.imul(Se,Fe)|0,d=(d=d+Math.imul(Se,He)|0)+Math.imul(Oe,Fe)|0,p=p+Math.imul(Oe,He)|0;var ar=(P+(m=m+Math.imul(L,Ue)|0)|0)+((8191&(d=(d=d+Math.imul(L,Ge)|0)+Math.imul(Y,Ue)|0))<<13)|0;P=((p=p+Math.imul(Y,Ge)|0)+(d>>>13)|0)+(ar>>>26)|0,ar&=67108863,m=Math.imul(U,Me),d=(d=Math.imul(U,qe))+Math.imul(w,Me)|0,p=Math.imul(w,qe),m=m+Math.imul(Ke,nt)|0,d=(d=d+Math.imul(Ke,rt)|0)+Math.imul(We,nt)|0,p=p+Math.imul(We,rt)|0,m=m+Math.imul(Be,bt)|0,d=(d=d+Math.imul(Be,Mt)|0)+Math.imul(De,bt)|0,p=p+Math.imul(De,Mt)|0,m=m+Math.imul(ue,it)|0,d=(d=d+Math.imul(ue,mt)|0)+Math.imul(ge,it)|0,p=p+Math.imul(ge,mt)|0,m=m+Math.imul(se,xt)|0,d=(d=d+Math.imul(se,It)|0)+Math.imul(re,xt)|0,p=p+Math.imul(re,It)|0,m=m+Math.imul(ve,Tt)|0,d=(d=d+Math.imul(ve,Pt)|0)+Math.imul(_e,Tt)|0,p=p+Math.imul(_e,Pt)|0,m=m+Math.imul(Re,Fe)|0,d=(d=d+Math.imul(Re,He)|0)+Math.imul(ye,Fe)|0,p=p+Math.imul(ye,He)|0,m=m+Math.imul(Se,Ue)|0,d=(d=d+Math.imul(Se,Ge)|0)+Math.imul(Oe,Ue)|0,p=p+Math.imul(Oe,Ge)|0;var en=(P+(m=m+Math.imul(L,Xe)|0)|0)+((8191&(d=(d=d+Math.imul(L,dt)|0)+Math.imul(Y,Xe)|0))<<13)|0;P=((p=p+Math.imul(Y,dt)|0)+(d>>>13)|0)+(en>>>26)|0,en&=67108863,m=Math.imul(z,Me),d=(d=Math.imul(z,qe))+Math.imul(ie,Me)|0,p=Math.imul(ie,qe),m=m+Math.imul(U,nt)|0,d=(d=d+Math.imul(U,rt)|0)+Math.imul(w,nt)|0,p=p+Math.imul(w,rt)|0,m=m+Math.imul(Ke,bt)|0,d=(d=d+Math.imul(Ke,Mt)|0)+Math.imul(We,bt)|0,p=p+Math.imul(We,Mt)|0,m=m+Math.imul(Be,it)|0,d=(d=d+Math.imul(Be,mt)|0)+Math.imul(De,it)|0,p=p+Math.imul(De,mt)|0,m=m+Math.imul(ue,xt)|0,d=(d=d+Math.imul(ue,It)|0)+Math.imul(ge,xt)|0,p=p+Math.imul(ge,It)|0,m=m+Math.imul(se,Tt)|0,d=(d=d+Math.imul(se,Pt)|0)+Math.imul(re,Tt)|0,p=p+Math.imul(re,Pt)|0,m=m+Math.imul(ve,Fe)|0,d=(d=d+Math.imul(ve,He)|0)+Math.imul(_e,Fe)|0,p=p+Math.imul(_e,He)|0,m=m+Math.imul(Re,Ue)|0,d=(d=d+Math.imul(Re,Ge)|0)+Math.imul(ye,Ue)|0,p=p+Math.imul(ye,Ge)|0,m=m+Math.imul(Se,Xe)|0,d=(d=d+Math.imul(Se,dt)|0)+Math.imul(Oe,Xe)|0,p=p+Math.imul(Oe,dt)|0;var zr=(P+(m=m+Math.imul(L,gt)|0)|0)+((8191&(d=(d=d+Math.imul(L,wt)|0)+Math.imul(Y,gt)|0))<<13)|0;P=((p=p+Math.imul(Y,wt)|0)+(d>>>13)|0)+(zr>>>26)|0,zr&=67108863,m=Math.imul(z,nt),d=(d=Math.imul(z,rt))+Math.imul(ie,nt)|0,p=Math.imul(ie,rt),m=m+Math.imul(U,bt)|0,d=(d=d+Math.imul(U,Mt)|0)+Math.imul(w,bt)|0,p=p+Math.imul(w,Mt)|0,m=m+Math.imul(Ke,it)|0,d=(d=d+Math.imul(Ke,mt)|0)+Math.imul(We,it)|0,p=p+Math.imul(We,mt)|0,m=m+Math.imul(Be,xt)|0,d=(d=d+Math.imul(Be,It)|0)+Math.imul(De,xt)|0,p=p+Math.imul(De,It)|0,m=m+Math.imul(ue,Tt)|0,d=(d=d+Math.imul(ue,Pt)|0)+Math.imul(ge,Tt)|0,p=p+Math.imul(ge,Pt)|0,m=m+Math.imul(se,Fe)|0,d=(d=d+Math.imul(se,He)|0)+Math.imul(re,Fe)|0,p=p+Math.imul(re,He)|0,m=m+Math.imul(ve,Ue)|0,d=(d=d+Math.imul(ve,Ge)|0)+Math.imul(_e,Ue)|0,p=p+Math.imul(_e,Ge)|0,m=m+Math.imul(Re,Xe)|0,d=(d=d+Math.imul(Re,dt)|0)+Math.imul(ye,Xe)|0,p=p+Math.imul(ye,dt)|0;var Wr=(P+(m=m+Math.imul(Se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Se,wt)|0)+Math.imul(Oe,gt)|0))<<13)|0;P=((p=p+Math.imul(Oe,wt)|0)+(d>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,m=Math.imul(z,bt),d=(d=Math.imul(z,Mt))+Math.imul(ie,bt)|0,p=Math.imul(ie,Mt),m=m+Math.imul(U,it)|0,d=(d=d+Math.imul(U,mt)|0)+Math.imul(w,it)|0,p=p+Math.imul(w,mt)|0,m=m+Math.imul(Ke,xt)|0,d=(d=d+Math.imul(Ke,It)|0)+Math.imul(We,xt)|0,p=p+Math.imul(We,It)|0,m=m+Math.imul(Be,Tt)|0,d=(d=d+Math.imul(Be,Pt)|0)+Math.imul(De,Tt)|0,p=p+Math.imul(De,Pt)|0,m=m+Math.imul(ue,Fe)|0,d=(d=d+Math.imul(ue,He)|0)+Math.imul(ge,Fe)|0,p=p+Math.imul(ge,He)|0,m=m+Math.imul(se,Ue)|0,d=(d=d+Math.imul(se,Ge)|0)+Math.imul(re,Ue)|0,p=p+Math.imul(re,Ge)|0,m=m+Math.imul(ve,Xe)|0,d=(d=d+Math.imul(ve,dt)|0)+Math.imul(_e,Xe)|0,p=p+Math.imul(_e,dt)|0;var _r=(P+(m=m+Math.imul(Re,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Re,wt)|0)+Math.imul(ye,gt)|0))<<13)|0;P=((p=p+Math.imul(ye,wt)|0)+(d>>>13)|0)+(_r>>>26)|0,_r&=67108863,m=Math.imul(z,it),d=(d=Math.imul(z,mt))+Math.imul(ie,it)|0,p=Math.imul(ie,mt),m=m+Math.imul(U,xt)|0,d=(d=d+Math.imul(U,It)|0)+Math.imul(w,xt)|0,p=p+Math.imul(w,It)|0,m=m+Math.imul(Ke,Tt)|0,d=(d=d+Math.imul(Ke,Pt)|0)+Math.imul(We,Tt)|0,p=p+Math.imul(We,Pt)|0,m=m+Math.imul(Be,Fe)|0,d=(d=d+Math.imul(Be,He)|0)+Math.imul(De,Fe)|0,p=p+Math.imul(De,He)|0,m=m+Math.imul(ue,Ue)|0,d=(d=d+Math.imul(ue,Ge)|0)+Math.imul(ge,Ue)|0,p=p+Math.imul(ge,Ge)|0,m=m+Math.imul(se,Xe)|0,d=(d=d+Math.imul(se,dt)|0)+Math.imul(re,Xe)|0,p=p+Math.imul(re,dt)|0;var Gr=(P+(m=m+Math.imul(ve,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ve,wt)|0)+Math.imul(_e,gt)|0))<<13)|0;P=((p=p+Math.imul(_e,wt)|0)+(d>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,m=Math.imul(z,xt),d=(d=Math.imul(z,It))+Math.imul(ie,xt)|0,p=Math.imul(ie,It),m=m+Math.imul(U,Tt)|0,d=(d=d+Math.imul(U,Pt)|0)+Math.imul(w,Tt)|0,p=p+Math.imul(w,Pt)|0,m=m+Math.imul(Ke,Fe)|0,d=(d=d+Math.imul(Ke,He)|0)+Math.imul(We,Fe)|0,p=p+Math.imul(We,He)|0,m=m+Math.imul(Be,Ue)|0,d=(d=d+Math.imul(Be,Ge)|0)+Math.imul(De,Ue)|0,p=p+Math.imul(De,Ge)|0,m=m+Math.imul(ue,Xe)|0,d=(d=d+Math.imul(ue,dt)|0)+Math.imul(ge,Xe)|0,p=p+Math.imul(ge,dt)|0;var qr=(P+(m=m+Math.imul(se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(se,wt)|0)+Math.imul(re,gt)|0))<<13)|0;P=((p=p+Math.imul(re,wt)|0)+(d>>>13)|0)+(qr>>>26)|0,qr&=67108863,m=Math.imul(z,Tt),d=(d=Math.imul(z,Pt))+Math.imul(ie,Tt)|0,p=Math.imul(ie,Pt),m=m+Math.imul(U,Fe)|0,d=(d=d+Math.imul(U,He)|0)+Math.imul(w,Fe)|0,p=p+Math.imul(w,He)|0,m=m+Math.imul(Ke,Ue)|0,d=(d=d+Math.imul(Ke,Ge)|0)+Math.imul(We,Ue)|0,p=p+Math.imul(We,Ge)|0,m=m+Math.imul(Be,Xe)|0,d=(d=d+Math.imul(Be,dt)|0)+Math.imul(De,Xe)|0,p=p+Math.imul(De,dt)|0;var Yr=(P+(m=m+Math.imul(ue,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ue,wt)|0)+Math.imul(ge,gt)|0))<<13)|0;P=((p=p+Math.imul(ge,wt)|0)+(d>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,m=Math.imul(z,Fe),d=(d=Math.imul(z,He))+Math.imul(ie,Fe)|0,p=Math.imul(ie,He),m=m+Math.imul(U,Ue)|0,d=(d=d+Math.imul(U,Ge)|0)+Math.imul(w,Ue)|0,p=p+Math.imul(w,Ge)|0,m=m+Math.imul(Ke,Xe)|0,d=(d=d+Math.imul(Ke,dt)|0)+Math.imul(We,Xe)|0,p=p+Math.imul(We,dt)|0;var mn=(P+(m=m+Math.imul(Be,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Be,wt)|0)+Math.imul(De,gt)|0))<<13)|0;P=((p=p+Math.imul(De,wt)|0)+(d>>>13)|0)+(mn>>>26)|0,mn&=67108863,m=Math.imul(z,Ue),d=(d=Math.imul(z,Ge))+Math.imul(ie,Ue)|0,p=Math.imul(ie,Ge),m=m+Math.imul(U,Xe)|0,d=(d=d+Math.imul(U,dt)|0)+Math.imul(w,Xe)|0,p=p+Math.imul(w,dt)|0;var un=(P+(m=m+Math.imul(Ke,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Ke,wt)|0)+Math.imul(We,gt)|0))<<13)|0;P=((p=p+Math.imul(We,wt)|0)+(d>>>13)|0)+(un>>>26)|0,un&=67108863,m=Math.imul(z,Xe),d=(d=Math.imul(z,dt))+Math.imul(ie,Xe)|0,p=Math.imul(ie,dt);var fn=(P+(m=m+Math.imul(U,gt)|0)|0)+((8191&(d=(d=d+Math.imul(U,wt)|0)+Math.imul(w,gt)|0))<<13)|0;P=((p=p+Math.imul(w,wt)|0)+(d>>>13)|0)+(fn>>>26)|0,fn&=67108863;var xn=(P+(m=Math.imul(z,gt))|0)+((8191&(d=(d=Math.imul(z,wt))+Math.imul(ie,gt)|0))<<13)|0;return P=((p=Math.imul(ie,wt))+(d>>>13)|0)+(xn>>>26)|0,xn&=67108863,x[0]=Br,x[1]=Vt,x[2]=Zt,x[3]=Tr,x[4]=dr,x[5]=or,x[6]=mr,x[7]=ar,x[8]=en,x[9]=zr,x[10]=Wr,x[11]=_r,x[12]=Gr,x[13]=qr,x[14]=Yr,x[15]=mn,x[16]=un,x[17]=fn,x[18]=xn,0!==P&&(x[19]=P,l.length++),l};function W(E,a,f){return(new K).mulp(E,a,f)}function K(E,a){this.x=E,this.y=a}Math.imul||(Z=j),v.prototype.mulTo=function(a,f){var l,h=this.length+a.length;return l=10===this.length&&10===a.length?Z(this,a,f):h<63?j(this,a,f):h<1024?function q(E,a,f){f.negative=a.negative^E.negative,f.length=E.length+a.length;for(var l=0,h=0,g=0;g<f.length-1;g++){var x=h;h=0;for(var P=67108863&l,m=Math.min(g,a.length-1),d=Math.max(0,g-E.length+1);d<=m;d++){var Y=(0|E.words[g-d])*(0|a.words[d]),le=67108863&Y;P=67108863&(le=le+P|0),h+=(x=(x=x+(Y/67108864|0)|0)+(le>>>26)|0)>>>26,x&=67108863}f.words[g]=P,l=x,x=h}return 0!==l?f.words[g]=l:f.length--,f.strip()}(this,a,f):W(this,a,f),l},K.prototype.makeRBT=function(a){for(var f=new Array(a),l=v.prototype._countBits(a)-1,h=0;h<a;h++)f[h]=this.revBin(h,l,a);return f},K.prototype.revBin=function(a,f,l){if(0===a||a===l-1)return a;for(var h=0,g=0;g<f;g++)h|=(1&a)<<f-g-1,a>>=1;return h},K.prototype.permute=function(a,f,l,h,g,x){for(var P=0;P<x;P++)h[P]=f[a[P]],g[P]=l[a[P]]},K.prototype.transform=function(a,f,l,h,g,x){this.permute(x,a,f,l,h,g);for(var P=1;P<g;P<<=1)for(var m=P<<1,d=Math.cos(2*Math.PI/m),p=Math.sin(2*Math.PI/m),V=0;V<g;V+=m)for(var L=d,Y=p,le=0;le<P;le++){var Se=l[V+le],Oe=h[V+le],Ve=l[V+le+P],Re=h[V+le+P],ye=L*Ve-Y*Re;Re=L*Re+Y*Ve,l[V+le]=Se+(Ve=ye),h[V+le]=Oe+Re,l[V+le+P]=Se-Ve,h[V+le+P]=Oe-Re,le!==m&&(ye=d*L-p*Y,Y=d*Y+p*L,L=ye)}},K.prototype.guessLen13b=function(a,f){var l=1|Math.max(f,a),h=1&l,g=0;for(l=l/2|0;l;l>>>=1)g++;return 1<<g+1+h},K.prototype.conjugate=function(a,f,l){if(!(l<=1))for(var h=0;h<l/2;h++){var g=a[h];a[h]=a[l-h-1],a[l-h-1]=g,g=f[h],f[h]=-f[l-h-1],f[l-h-1]=-g}},K.prototype.normalize13b=function(a,f){for(var l=0,h=0;h<f/2;h++){var g=8192*Math.round(a[2*h+1]/f)+Math.round(a[2*h]/f)+l;a[h]=67108863&g,l=g<67108864?0:g/67108864|0}return a},K.prototype.convert13b=function(a,f,l,h){for(var g=0,x=0;x<f;x++)l[2*x]=8191&(g+=0|a[x]),l[2*x+1]=8191&(g>>>=13),g>>>=13;for(x=2*f;x<h;++x)l[x]=0;N(0===g),N(!(-8192&g))},K.prototype.stub=function(a){for(var f=new Array(a),l=0;l<a;l++)f[l]=0;return f},K.prototype.mulp=function(a,f,l){var h=2*this.guessLen13b(a.length,f.length),g=this.makeRBT(h),x=this.stub(h),P=new Array(h),m=new Array(h),d=new Array(h),p=new Array(h),V=new Array(h),L=new Array(h),Y=l.words;Y.length=h,this.convert13b(a.words,a.length,P,h),this.convert13b(f.words,f.length,p,h),this.transform(P,x,m,d,h,g),this.transform(p,x,V,L,h,g);for(var le=0;le<h;le++){var Se=m[le]*V[le]-d[le]*L[le];d[le]=m[le]*L[le]+d[le]*V[le],m[le]=Se}return this.conjugate(m,d,h),this.transform(m,d,Y,x,h,g),this.conjugate(Y,x,h),this.normalize13b(Y,h),l.negative=a.negative^f.negative,l.length=a.length+f.length,l.strip()},v.prototype.mul=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},v.prototype.mulf=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),W(this,a,f)},v.prototype.imul=function(a){return this.clone().mulTo(a,this)},v.prototype.imuln=function(a){N("number"==typeof a),N(a<67108864);for(var f=0,l=0;l<this.length;l++){var h=(0|this.words[l])*a,g=(67108863&h)+(67108863&f);f>>=26,f+=h/67108864|0,f+=g>>>26,this.words[l]=67108863&g}return 0!==f&&(this.words[l]=f,this.length++),this},v.prototype.muln=function(a){return this.clone().imuln(a)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(a){var f=function k(E){for(var a=new Array(E.bitLength()),f=0;f<a.length;f++){var h=f%26;a[f]=(E.words[f/26|0]&1<<h)>>>h}return a}(a);if(0===f.length)return new v(1);for(var l=this,h=0;h<f.length&&0===f[h];h++,l=l.sqr());if(++h<f.length)for(var g=l.sqr();h<f.length;h++,g=g.sqr())0!==f[h]&&(l=l.mul(g));return l},v.prototype.iushln=function(a){N("number"==typeof a&&a>=0);var g,f=a%26,l=(a-f)/26,h=67108863>>>26-f<<26-f;if(0!==f){var x=0;for(g=0;g<this.length;g++){var P=this.words[g]&h;this.words[g]=(0|this.words[g])-P<<f|x,x=P>>>26-f}x&&(this.words[g]=x,this.length++)}if(0!==l){for(g=this.length-1;g>=0;g--)this.words[g+l]=this.words[g];for(g=0;g<l;g++)this.words[g]=0;this.length+=l}return this.strip()},v.prototype.ishln=function(a){return N(0===this.negative),this.iushln(a)},v.prototype.iushrn=function(a,f,l){var h;N("number"==typeof a&&a>=0),h=f?(f-f%26)/26:0;var g=a%26,x=Math.min((a-g)/26,this.length),P=67108863^67108863>>>g<<g,m=l;if(h-=x,h=Math.max(0,h),m){for(var d=0;d<x;d++)m.words[d]=this.words[d];m.length=x}if(0!==x)if(this.length>x)for(this.length-=x,d=0;d<this.length;d++)this.words[d]=this.words[d+x];else this.words[0]=0,this.length=1;var p=0;for(d=this.length-1;d>=0&&(0!==p||d>=h);d--){var V=0|this.words[d];this.words[d]=p<<26-g|V>>>g,p=V&P}return m&&0!==p&&(m.words[m.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(a,f,l){return N(0===this.negative),this.iushrn(a,f,l)},v.prototype.shln=function(a){return this.clone().ishln(a)},v.prototype.ushln=function(a){return this.clone().iushln(a)},v.prototype.shrn=function(a){return this.clone().ishrn(a)},v.prototype.ushrn=function(a){return this.clone().iushrn(a)},v.prototype.testn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return!(this.length<=l||!(this.words[l]&1<<f))},v.prototype.imaskn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return N(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==f&&l++,this.length=Math.min(l,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this.strip())},v.prototype.maskn=function(a){return this.clone().imaskn(a)},v.prototype.iaddn=function(a){return N("number"==typeof a),N(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},v.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},v.prototype.isubn=function(a){if(N("number"==typeof a),N(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},v.prototype.addn=function(a){return this.clone().iaddn(a)},v.prototype.subn=function(a){return this.clone().isubn(a)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(a,f,l){var g;this._expand(a.length+l);var x,P=0;for(g=0;g<a.length;g++){x=(0|this.words[g+l])+P;var m=(0|a.words[g])*f;P=((x-=67108863&m)>>26)-(m/67108864|0),this.words[g+l]=67108863&x}for(;g<this.length-l;g++)P=(x=(0|this.words[g+l])+P)>>26,this.words[g+l]=67108863&x;if(0===P)return this.strip();for(N(-1===P),P=0,g=0;g<this.length;g++)P=(x=-(0|this.words[g])+P)>>26,this.words[g]=67108863&x;return this.negative=1,this.strip()},v.prototype._wordDiv=function(a,f){var l,h=this.clone(),g=a,x=0|g.words[g.length-1];0!=(l=26-this._countBits(x))&&(g=g.ushln(l),h.iushln(l),x=0|g.words[g.length-1]);var d,m=h.length-g.length;if("mod"!==f){(d=new v(null)).length=m+1,d.words=new Array(d.length);for(var p=0;p<d.length;p++)d.words[p]=0}var V=h.clone()._ishlnsubmul(g,1,m);0===V.negative&&(h=V,d&&(d.words[m]=1));for(var L=m-1;L>=0;L--){var Y=67108864*(0|h.words[g.length+L])+(0|h.words[g.length+L-1]);for(Y=Math.min(Y/x|0,67108863),h._ishlnsubmul(g,Y,L);0!==h.negative;)Y--,h.negative=0,h._ishlnsubmul(g,1,L),h.isZero()||(h.negative^=1);d&&(d.words[L]=Y)}return d&&d.strip(),h.strip(),"div"!==f&&0!==l&&h.iushrn(l),{div:d||null,mod:h}},v.prototype.divmod=function(a,f,l){return N(!a.isZero()),this.isZero()?{div:new v(0),mod:new v(0)}:0!==this.negative&&0===a.negative?(x=this.neg().divmod(a,f),"mod"!==f&&(h=x.div.neg()),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.iadd(a)),{div:h,mod:g}):0===this.negative&&0!==a.negative?(x=this.divmod(a.neg(),f),"mod"!==f&&(h=x.div.neg()),{div:h,mod:x.mod}):this.negative&a.negative?(x=this.neg().divmod(a.neg(),f),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.isub(a)),{div:x.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new v(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new v(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new v(this.modn(a.words[0]))}:this._wordDiv(a,f);var h,g,x},v.prototype.div=function(a){return this.divmod(a,"div",!1).div},v.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},v.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},v.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var l=0!==f.div.negative?f.mod.isub(a):f.mod,h=a.ushrn(1),g=a.andln(1),x=l.cmp(h);return x<0||1===g&&0===x?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},v.prototype.modn=function(a){N(a<=67108863);for(var f=(1<<26)%a,l=0,h=this.length-1;h>=0;h--)l=(f*l+(0|this.words[h]))%a;return l},v.prototype.idivn=function(a){N(a<=67108863);for(var f=0,l=this.length-1;l>=0;l--){var h=(0|this.words[l])+67108864*f;this.words[l]=h/a|0,f=h%a}return this.strip()},v.prototype.divn=function(a){return this.clone().idivn(a)},v.prototype.egcd=function(a){N(0===a.negative),N(!a.isZero());var f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=new v(0),P=new v(1),m=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++m;for(var d=l.clone(),p=f.clone();!f.isZero();){for(var V=0,L=1;!(f.words[0]&L)&&V<26;++V,L<<=1);if(V>0)for(f.iushrn(V);V-- >0;)(h.isOdd()||g.isOdd())&&(h.iadd(d),g.isub(p)),h.iushrn(1),g.iushrn(1);for(var Y=0,le=1;!(l.words[0]&le)&&Y<26;++Y,le<<=1);if(Y>0)for(l.iushrn(Y);Y-- >0;)(x.isOdd()||P.isOdd())&&(x.iadd(d),P.isub(p)),x.iushrn(1),P.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(x),g.isub(P)):(l.isub(f),x.isub(h),P.isub(g))}return{a:x,b:P,gcd:l.iushln(m)}},v.prototype._invmp=function(a){N(0===a.negative),N(!a.isZero());var V,f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var P=0,m=1;!(f.words[0]&m)&&P<26;++P,m<<=1);if(P>0)for(f.iushrn(P);P-- >0;)h.isOdd()&&h.iadd(x),h.iushrn(1);for(var d=0,p=1;!(l.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(l.iushrn(d);d-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(g)):(l.isub(f),g.isub(h))}return(V=0===f.cmpn(1)?h:g).cmpn(0)<0&&V.iadd(a),V},v.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),l=a.clone();f.negative=0,l.negative=0;for(var h=0;f.isEven()&&l.isEven();h++)f.iushrn(1),l.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var g=f.cmp(l);if(g<0){var x=f;f=l,l=x}else if(0===g||0===l.cmpn(1))break;f.isub(l)}return l.iushln(h)},v.prototype.invm=function(a){return this.egcd(a).a.umod(a)},v.prototype.isEven=function(){return!(1&this.words[0])},v.prototype.isOdd=function(){return!(1&~this.words[0])},v.prototype.andln=function(a){return this.words[0]&a},v.prototype.bincn=function(a){N("number"==typeof a);var f=a%26,l=(a-f)/26,h=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var g=h,x=l;0!==g&&x<this.length;x++){var P=0|this.words[x];g=(P+=g)>>>26,this.words[x]=P&=67108863}return 0!==g&&(this.words[x]=g,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(a){var l,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this.strip(),this.length>1)l=1;else{f&&(a=-a),N(a<=67108863,"Number is too big");var h=0|this.words[0];l=h===a?0:h<a?-1:1}return 0!==this.negative?0|-l:l},v.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},v.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var h=0|this.words[l],g=0|a.words[l];if(h!==g){h<g?f=-1:h>g&&(f=1);break}}return f},v.prototype.gtn=function(a){return 1===this.cmpn(a)},v.prototype.gt=function(a){return 1===this.cmp(a)},v.prototype.gten=function(a){return this.cmpn(a)>=0},v.prototype.gte=function(a){return this.cmp(a)>=0},v.prototype.ltn=function(a){return-1===this.cmpn(a)},v.prototype.lt=function(a){return-1===this.cmp(a)},v.prototype.lten=function(a){return this.cmpn(a)<=0},v.prototype.lte=function(a){return this.cmp(a)<=0},v.prototype.eqn=function(a){return 0===this.cmpn(a)},v.prototype.eq=function(a){return 0===this.cmp(a)},v.red=function(a){return new pe(a)},v.prototype.toRed=function(a){return N(!this.red,"Already a number in reduction context"),N(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},v.prototype.fromRed=function(){return N(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},v.prototype._forceRed=function(a){return this.red=a,this},v.prototype.forceRed=function(a){return N(!this.red,"Already a number in reduction context"),this._forceRed(a)},v.prototype.redAdd=function(a){return N(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},v.prototype.redIAdd=function(a){return N(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},v.prototype.redSub=function(a){return N(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},v.prototype.redISub=function(a){return N(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},v.prototype.redShl=function(a){return N(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},v.prototype.redMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},v.prototype.redIMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},v.prototype.redSqr=function(){return N(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return N(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return N(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return N(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return N(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(a){return N(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var J={k256:null,p224:null,p192:null,p25519:null};function X(E,a){this.name=E,this.p=new v(a,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Q(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function oe(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ne(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function me(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function pe(E){if("string"==typeof E){var a=v._prime(E);this.m=a.p,this.prime=a}else N(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}function Ie(E){pe.call(this,E),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}X.prototype._tmp=function(){var a=new v(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var l,f=a;do{this.split(f,this.tmp),l=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(l>this.n);var h=l<this.n?-1:f.ucmp(this.p);return 0===h?(f.words[0]=0,f.length=1):h>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},X.prototype.split=function(a,f){a.iushrn(this.n,0,f)},X.prototype.imulK=function(a){return a.imul(this.k)},G(Q,X),Q.prototype.split=function(a,f){for(var l=4194303,h=Math.min(a.length,9),g=0;g<h;g++)f.words[g]=a.words[g];if(f.length=h,a.length<=9)return a.words[0]=0,void(a.length=1);var x=a.words[9];for(f.words[f.length++]=x&l,g=10;g<a.length;g++){var P=0|a.words[g];a.words[g-10]=(P&l)<<4|x>>>22,x=P}a.words[g-10]=x>>>=22,a.length-=0===x&&a.length>10?10:9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,l=0;l<a.length;l++){var h=0|a.words[l];a.words[l]=67108863&(f+=977*h),f=64*h+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},G(oe,X),G(ne,X),G(me,X),me.prototype.imulK=function(a){for(var f=0,l=0;l<a.length;l++){var h=19*(0|a.words[l])+f,g=67108863&h;h>>>=26,a.words[l]=g,f=h}return 0!==f&&(a.words[a.length++]=f),a},v._prime=function(a){if(J[a])return J[a];var f;if("k256"===a)f=new Q;else if("p224"===a)f=new oe;else if("p192"===a)f=new ne;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new me}return J[a]=f,f},pe.prototype._verify1=function(a){N(0===a.negative,"red works only with positives"),N(a.red,"red works only with red numbers")},pe.prototype._verify2=function(a,f){N(!(a.negative|f.negative),"red works only with positives"),N(a.red&&a.red===f.red,"red works only with red numbers")},pe.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},pe.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},pe.prototype.add=function(a,f){this._verify2(a,f);var l=a.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},pe.prototype.iadd=function(a,f){this._verify2(a,f);var l=a.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},pe.prototype.sub=function(a,f){this._verify2(a,f);var l=a.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},pe.prototype.isub=function(a,f){this._verify2(a,f);var l=a.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},pe.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},pe.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},pe.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},pe.prototype.isqr=function(a){return this.imul(a,a.clone())},pe.prototype.sqr=function(a){return this.mul(a,a)},pe.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(N(f%2==1),3===f){var l=this.m.add(new v(1)).iushrn(2);return this.pow(a,l)}for(var h=this.m.subn(1),g=0;!h.isZero()&&0===h.andln(1);)g++,h.iushrn(1);N(!h.isZero());var x=new v(1).toRed(this),P=x.redNeg(),m=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new v(2*d*d).toRed(this);0!==this.pow(d,m).cmp(P);)d.redIAdd(P);for(var p=this.pow(d,h),V=this.pow(a,h.addn(1).iushrn(1)),L=this.pow(a,h),Y=g;0!==L.cmp(x);){for(var le=L,Se=0;0!==le.cmp(x);Se++)le=le.redSqr();N(Se<Y);var Oe=this.pow(p,new v(1).iushln(Y-Se-1));V=V.redMul(Oe),p=Oe.redSqr(),L=L.redMul(p),Y=Se}return V},pe.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},pe.prototype.pow=function(a,f){if(f.isZero())return new v(1).toRed(this);if(0===f.cmpn(1))return a.clone();var h=new Array(16);h[0]=new v(1).toRed(this),h[1]=a;for(var g=2;g<h.length;g++)h[g]=this.mul(h[g-1],a);var x=h[0],P=0,m=0,d=f.bitLength()%26;for(0===d&&(d=26),g=f.length-1;g>=0;g--){for(var p=f.words[g],V=d-1;V>=0;V--){var L=p>>V&1;x!==h[0]&&(x=this.sqr(x)),0!==L||0!==P?(P<<=1,P|=L,(4==++m||0===g&&0===V)&&(x=this.mul(x,h[P]),m=0,P=0)):m=0}d=26}return x},pe.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},pe.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},v.mont=function(a){return new Ie(a)},G(Ie,pe),Ie.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Ie.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},Ie.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new v(0)._forceRed(this);var l=a.mul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(xe=I.nmd(xe),this)},67211:(xe,O,I)=>{"use strict";var C=I(71993),H=I(34725),N=I(36636),G=I(25443),v=I(3247);function B(_){v.call(this,"digest"),this._hash=_}C(B,v),B.prototype._update=function(_){this._hash.update(_)},B.prototype._final=function(){return this._hash.digest()},xe.exports=function(T){return"md5"===(T=T.toLowerCase())?new H:"rmd160"===T||"ripemd160"===T?new N:new B(G(T))}},83407:(xe,O,I)=>{var C=I(34725);xe.exports=function(H){return(new C).update(H).digest()}},56432:(xe,O,I)=>{"use strict";var C=I(71993),H=I(90509),N=I(3247),G=I(27054).Buffer,v=I(83407),B=I(36636),_=I(25443),T=G.alloc(128);function D($,M){N.call(this,"digest"),"string"==typeof M&&(M=G.from(M));var F="sha512"===$||"sha384"===$?128:64;this._alg=$,this._key=M,M.length>F?M=("rmd160"===$?new B:_($)).update(M).digest():M.length<F&&(M=G.concat([M,T],F));for(var j=this._ipad=G.allocUnsafe(F),Z=this._opad=G.allocUnsafe(F),q=0;q<F;q++)j[q]=54^M[q],Z[q]=92^M[q];this._hash="rmd160"===$?new B:_($),this._hash.update(j)}C(D,N),D.prototype._update=function($){this._hash.update($)},D.prototype._final=function(){var $=this._hash.digest();return("rmd160"===this._alg?new B:_(this._alg)).update(this._opad).update($).digest()},xe.exports=function(M,F){return"rmd160"===(M=M.toLowerCase())||"ripemd160"===M?new D("rmd160",F):"md5"===M?new H(v,F):new D(M,F)}},90509:(xe,O,I)=>{"use strict";var C=I(71993),H=I(27054).Buffer,N=I(3247),G=H.alloc(128),v=64;function B(_,T){N.call(this,"digest"),"string"==typeof T&&(T=H.from(T)),this._alg=_,this._key=T,T.length>v?T=_(T):T.length<v&&(T=H.concat([T,G],v));for(var D=this._ipad=H.allocUnsafe(v),$=this._opad=H.allocUnsafe(v),M=0;M<v;M++)D[M]=54^T[M],$[M]=92^T[M];this._hash=[D]}C(B,N),B.prototype._update=function(_){this._hash.push(_)},B.prototype._final=function(){var _=this._alg(H.concat(this._hash));return this._alg(H.concat([this._opad,_]))},xe.exports=B},91426:(xe,O,I)=>{"use strict";O.randomBytes=O.rng=O.pseudoRandomBytes=O.prng=I(3342),O.createHash=O.Hash=I(67211),O.createHmac=O.Hmac=I(56432);var C=I(99560),H=Object.keys(C),N=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(H);O.getHashes=function(){return N};var G=I(93397);O.pbkdf2=G.pbkdf2,O.pbkdf2Sync=G.pbkdf2Sync;var v=I(88862);O.Cipher=v.Cipher,O.createCipher=v.createCipher,O.Cipheriv=v.Cipheriv,O.createCipheriv=v.createCipheriv,O.Decipher=v.Decipher,O.createDecipher=v.createDecipher,O.Decipheriv=v.Decipheriv,O.createDecipheriv=v.createDecipheriv,O.getCiphers=v.getCiphers,O.listCiphers=v.listCiphers;var B=I(4377);O.DiffieHellmanGroup=B.DiffieHellmanGroup,O.createDiffieHellmanGroup=B.createDiffieHellmanGroup,O.getDiffieHellman=B.getDiffieHellman,O.createDiffieHellman=B.createDiffieHellman,O.DiffieHellman=B.DiffieHellman;var _=I(79143);O.createSign=_.createSign,O.Sign=_.Sign,O.createVerify=_.createVerify,O.Verify=_.Verify,O.createECDH=I(87303);var T=I(52965);O.publicEncrypt=T.publicEncrypt,O.privateEncrypt=T.privateEncrypt,O.publicDecrypt=T.publicDecrypt,O.privateDecrypt=T.privateDecrypt;var D=I(9682);O.randomFill=D.randomFill,O.randomFillSync=D.randomFillSync,O.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},O.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},71549:(xe,O,I)=>{"use strict";O.utils=I(85671),O.Cipher=I(10219),O.DES=I(64166),O.CBC=I(88800),O.EDE=I(62122)},88800:(xe,O,I)=>{"use strict";var C=I(39210),H=I(71993),N={};function G(B){C.equal(B.length,8,"Invalid IV length"),this.iv=new Array(8);for(var _=0;_<this.iv.length;_++)this.iv[_]=B[_]}O.instantiate=function v(B){function _(M){B.call(this,M),this._cbcInit()}H(_,B);for(var T=Object.keys(N),D=0;D<T.length;D++){var $=T[D];_.prototype[$]=N[$]}return _.create=function(F){return new _(F)},_},N._cbcInit=function(){var _=new G(this.options.iv);this._cbcState=_},N._update=function(_,T,D,$){var F=this.constructor.super_.prototype,k=this._cbcState.iv;if("encrypt"===this.type){for(var j=0;j<this.blockSize;j++)k[j]^=_[T+j];for(F._update.call(this,k,0,D,$),j=0;j<this.blockSize;j++)k[j]=D[$+j]}else{for(F._update.call(this,_,T,D,$),j=0;j<this.blockSize;j++)D[$+j]^=k[j];for(j=0;j<this.blockSize;j++)k[j]=_[T+j]}}},10219:(xe,O,I)=>{"use strict";var C=I(39210);function H(N){this.options=N,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==N.padding}xe.exports=H,H.prototype._init=function(){},H.prototype.update=function(G){return 0===G.length?[]:"decrypt"===this.type?this._updateDecrypt(G):this._updateEncrypt(G)},H.prototype._buffer=function(G,v){for(var B=Math.min(this.buffer.length-this.bufferOff,G.length-v),_=0;_<B;_++)this.buffer[this.bufferOff+_]=G[v+_];return this.bufferOff+=B,B},H.prototype._flushBuffer=function(G,v){return this._update(this.buffer,0,G,v),this.bufferOff=0,this.blockSize},H.prototype._updateEncrypt=function(G){var v=0,B=0,T=new Array(((this.bufferOff+G.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(v+=this._buffer(G,v),this.bufferOff===this.buffer.length&&(B+=this._flushBuffer(T,B)));for(var D=G.length-(G.length-v)%this.blockSize;v<D;v+=this.blockSize)this._update(G,v,T,B),B+=this.blockSize;for(;v<G.length;v++,this.bufferOff++)this.buffer[this.bufferOff]=G[v];return T},H.prototype._updateDecrypt=function(G){for(var v=0,B=0,_=Math.ceil((this.bufferOff+G.length)/this.blockSize)-1,T=new Array(_*this.blockSize);_>0;_--)v+=this._buffer(G,v),B+=this._flushBuffer(T,B);return v+=this._buffer(G,v),T},H.prototype.final=function(G){var v,B;return G&&(v=this.update(G)),B="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),v?v.concat(B):B},H.prototype._pad=function(G,v){if(0===v)return!1;for(;v<G.length;)G[v++]=0;return!0},H.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var G=new Array(this.blockSize);return this._update(this.buffer,0,G,0),G},H.prototype._unpad=function(G){return G},H.prototype._finalDecrypt=function(){C.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var G=new Array(this.blockSize);return this._flushBuffer(G,0),this._unpad(G)}},64166:(xe,O,I)=>{"use strict";var C=I(39210),H=I(71993),N=I(85671),G=I(10219);function v(){this.tmp=new Array(2),this.keys=null}function B(T){G.call(this,T);var D=new v;this._desState=D,this.deriveKeys(D,T.key)}H(B,G),xe.exports=B,B.create=function(D){return new B(D)};var _=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];B.prototype.deriveKeys=function(D,$){D.keys=new Array(32),C.equal($.length,this.blockSize,"Invalid key length");var M=N.readUInt32BE($,0),F=N.readUInt32BE($,4);N.pc1(M,F,D.tmp,0),M=D.tmp[0],F=D.tmp[1];for(var k=0;k<D.keys.length;k+=2){var j=_[k>>>1];M=N.r28shl(M,j),F=N.r28shl(F,j),N.pc2(M,F,D.keys,k)}},B.prototype._update=function(D,$,M,F){var k=this._desState,j=N.readUInt32BE(D,$),Z=N.readUInt32BE(D,$+4);N.ip(j,Z,k.tmp,0),j=k.tmp[0],Z=k.tmp[1],"encrypt"===this.type?this._encrypt(k,j,Z,k.tmp,0):this._decrypt(k,j,Z,k.tmp,0),Z=k.tmp[1],N.writeUInt32BE(M,j=k.tmp[0],F),N.writeUInt32BE(M,Z,F+4)},B.prototype._pad=function(D,$){if(!1===this.padding)return!1;for(var M=D.length-$,F=$;F<D.length;F++)D[F]=M;return!0},B.prototype._unpad=function(D){if(!1===this.padding)return D;for(var $=D[D.length-1],M=D.length-$;M<D.length;M++)C.equal(D[M],$);return D.slice(0,D.length-$)},B.prototype._encrypt=function(D,$,M,F,k){for(var j=$,Z=M,q=0;q<D.keys.length;q+=2){var W=D.keys[q],K=D.keys[q+1];N.expand(Z,D.tmp,0);var J=N.substitute(W^=D.tmp[0],K^=D.tmp[1]),Q=Z;Z=(j^N.permute(J))>>>0,j=Q}N.rip(Z,j,F,k)},B.prototype._decrypt=function(D,$,M,F,k){for(var j=M,Z=$,q=D.keys.length-2;q>=0;q-=2){var W=D.keys[q],K=D.keys[q+1];N.expand(j,D.tmp,0);var J=N.substitute(W^=D.tmp[0],K^=D.tmp[1]),Q=j;j=(Z^N.permute(J))>>>0,Z=Q}N.rip(j,Z,F,k)}},62122:(xe,O,I)=>{"use strict";var C=I(39210),H=I(71993),N=I(10219),G=I(64166);function v(_,T){C.equal(T.length,24,"Invalid key length");var D=T.slice(0,8),$=T.slice(8,16),M=T.slice(16,24);this.ciphers="encrypt"===_?[G.create({type:"encrypt",key:D}),G.create({type:"decrypt",key:$}),G.create({type:"encrypt",key:M})]:[G.create({type:"decrypt",key:M}),G.create({type:"encrypt",key:$}),G.create({type:"decrypt",key:D})]}function B(_){N.call(this,_);var T=new v(this.type,this.options.key);this._edeState=T}H(B,N),xe.exports=B,B.create=function(T){return new B(T)},B.prototype._update=function(T,D,$,M){var F=this._edeState;F.ciphers[0]._update(T,D,$,M),F.ciphers[1]._update($,M,$,M),F.ciphers[2]._update($,M,$,M)},B.prototype._pad=G.prototype._pad,B.prototype._unpad=G.prototype._unpad},85671:(xe,O)=>{"use strict";O.readUInt32BE=function(G,v){return(G[0+v]<<24|G[1+v]<<16|G[2+v]<<8|G[3+v])>>>0},O.writeUInt32BE=function(G,v,B){G[0+B]=v>>>24,G[1+B]=v>>>16&255,G[2+B]=v>>>8&255,G[3+B]=255&v},O.ip=function(G,v,B,_){for(var T=0,D=0,$=6;$>=0;$-=2){for(var M=0;M<=24;M+=8)T<<=1,T|=v>>>M+$&1;for(M=0;M<=24;M+=8)T<<=1,T|=G>>>M+$&1}for($=6;$>=0;$-=2){for(M=1;M<=25;M+=8)D<<=1,D|=v>>>M+$&1;for(M=1;M<=25;M+=8)D<<=1,D|=G>>>M+$&1}B[_+0]=T>>>0,B[_+1]=D>>>0},O.rip=function(G,v,B,_){for(var T=0,D=0,$=0;$<4;$++)for(var M=24;M>=0;M-=8)T<<=1,T|=v>>>M+$&1,T<<=1,T|=G>>>M+$&1;for($=4;$<8;$++)for(M=24;M>=0;M-=8)D<<=1,D|=v>>>M+$&1,D<<=1,D|=G>>>M+$&1;B[_+0]=T>>>0,B[_+1]=D>>>0},O.pc1=function(G,v,B,_){for(var T=0,D=0,$=7;$>=5;$--){for(var M=0;M<=24;M+=8)T<<=1,T|=v>>M+$&1;for(M=0;M<=24;M+=8)T<<=1,T|=G>>M+$&1}for(M=0;M<=24;M+=8)T<<=1,T|=v>>M+$&1;for($=1;$<=3;$++){for(M=0;M<=24;M+=8)D<<=1,D|=v>>M+$&1;for(M=0;M<=24;M+=8)D<<=1,D|=G>>M+$&1}for(M=0;M<=24;M+=8)D<<=1,D|=G>>M+$&1;B[_+0]=T>>>0,B[_+1]=D>>>0},O.r28shl=function(G,v){return G<<v&268435455|G>>>28-v};var I=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];O.pc2=function(G,v,B,_){for(var T=0,D=0,$=I.length>>>1,M=0;M<$;M++)T<<=1,T|=G>>>I[M]&1;for(M=$;M<I.length;M++)D<<=1,D|=v>>>I[M]&1;B[_+0]=T>>>0,B[_+1]=D>>>0},O.expand=function(G,v,B){var _=0,T=0;_=(1&G)<<5|G>>>27;for(var D=23;D>=15;D-=4)_<<=6,_|=G>>>D&63;for(D=11;D>=3;D-=4)T|=G>>>D&63,T<<=6;T|=(31&G)<<1|G>>>31,v[B+0]=_>>>0,v[B+1]=T>>>0};var C=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];O.substitute=function(G,v){for(var B=0,_=0;_<4;_++)B<<=4,B|=C[64*_+(G>>>18-6*_&63)];for(_=0;_<4;_++)B<<=4,B|=C[256+64*_+(v>>>18-6*_&63)];return B>>>0};var H=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];O.permute=function(G){for(var v=0,B=0;B<H.length;B++)v<<=1,v|=G>>>H[B]&1;return v>>>0},O.padSplit=function(G,v,B){for(var _=G.toString(2);_.length<v;)_="0"+_;for(var T=[],D=0;D<v;D+=B)T.push(_.slice(D,D+B));return T.join(" ")}},4377:(xe,O,I)=>{var C=I(12727),H=I(23241),N=I(94593),v={binary:!0,hex:!0,base64:!0};O.DiffieHellmanGroup=O.createDiffieHellmanGroup=O.getDiffieHellman=function G(_){var T=new Buffer(H[_].prime,"hex"),D=new Buffer(H[_].gen,"hex");return new N(T,D)},O.createDiffieHellman=O.DiffieHellman=function B(_,T,D,$){return Buffer.isBuffer(T)||void 0===v[T]?B(_,"binary",T,D):(T=T||"binary",$=$||"binary",D=D||new Buffer([2]),Buffer.isBuffer(D)||(D=new Buffer(D,$)),"number"==typeof _?new N(C(_,D),D,!0):(Buffer.isBuffer(_)||(_=new Buffer(_,T)),new N(_,D,!0)))}},94593:(xe,O,I)=>{var C=I(38280),N=new(I(53459)),G=new C(24),v=new C(11),B=new C(10),_=new C(3),T=new C(7),D=I(12727),$=I(3342);function M(W,K){return K=K||"utf8",Buffer.isBuffer(W)||(W=new Buffer(W,K)),this._pub=new C(W),this}function F(W,K){return K=K||"utf8",Buffer.isBuffer(W)||(W=new Buffer(W,K)),this._priv=new C(W),this}xe.exports=Z;var k={};function Z(W,K,J){this.setGenerator(K),this.__prime=new C(W),this._prime=C.mont(this.__prime),this._primeLen=W.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,J?(this.setPublicKey=M,this.setPrivateKey=F):this._primeCode=8}function q(W,K){var J=new Buffer(W.toArray());return K?J.toString(K):J}Object.defineProperty(Z.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function j(W,K){var J=K.toString("hex"),X=[J,W.toString(16)].join("_");if(X in k)return k[X];var oe,Q=0;if(W.isEven()||!D.simpleSieve||!D.fermatTest(W)||!N.test(W))return Q+=1,k[X]=Q+="02"===J||"05"===J?8:4,Q;switch(N.test(W.shrn(1))||(Q+=2),J){case"02":W.mod(G).cmp(v)&&(Q+=8);break;case"05":(oe=W.mod(B)).cmp(_)&&oe.cmp(T)&&(Q+=8);break;default:Q+=4}return k[X]=Q,Q}(this.__prime,this.__gen)),this._primeCode}}),Z.prototype.generateKeys=function(){return this._priv||(this._priv=new C($(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},Z.prototype.computeSecret=function(W){var K=(W=(W=new C(W)).toRed(this._prime)).redPow(this._priv).fromRed(),J=new Buffer(K.toArray()),X=this.getPrime();if(J.length<X.length){var Q=new Buffer(X.length-J.length);Q.fill(0),J=Buffer.concat([Q,J])}return J},Z.prototype.getPublicKey=function(K){return q(this._pub,K)},Z.prototype.getPrivateKey=function(K){return q(this._priv,K)},Z.prototype.getPrime=function(W){return q(this.__prime,W)},Z.prototype.getGenerator=function(W){return q(this._gen,W)},Z.prototype.setGenerator=function(W,K){return K=K||"utf8",Buffer.isBuffer(W)||(W=new Buffer(W,K)),this.__gen=W,this._gen=new C(W),this}},12727:(xe,O,I)=>{var C=I(3342);xe.exports=Q,Q.simpleSieve=J,Q.fermatTest=X;var H=I(38280),N=new H(24),v=new(I(53459)),B=new H(1),_=new H(2),T=new H(5),M=(new H(16),new H(8),new H(10)),F=new H(3),j=(new H(7),new H(11)),Z=new H(4),W=(new H(12),null);function J(oe){for(var ne=function K(){if(null!==W)return W;var ne=[];ne[0]=2;for(var me=1,pe=3;pe<1048576;pe+=2){for(var Ie=Math.ceil(Math.sqrt(pe)),E=0;E<me&&ne[E]<=Ie&&pe%ne[E]!=0;E++);me!==E&&ne[E]<=Ie||(ne[me++]=pe)}return W=ne,ne}(),me=0;me<ne.length;me++)if(0===oe.modn(ne[me]))return 0===oe.cmpn(ne[me]);return!0}function X(oe){var ne=H.mont(oe);return 0===_.toRed(ne).redPow(oe.subn(1)).fromRed().cmpn(1)}function Q(oe,ne){if(oe<16)return new H(2===ne||5===ne?[140,123]:[140,39]);ne=new H(ne);for(var me,pe;;){for(me=new H(C(Math.ceil(oe/8)));me.bitLength()>oe;)me.ishrn(1);if(me.isEven()&&me.iadd(B),me.testn(1)||me.iadd(_),ne.cmp(_)){if(!ne.cmp(T))for(;me.mod(M).cmp(F);)me.iadd(Z)}else for(;me.mod(N).cmp(j);)me.iadd(Z);if(J(pe=me.shrn(1))&&J(me)&&X(pe)&&X(me)&&v.test(pe)&&v.test(me))return me}}},38280:function(xe,O,I){!function(C,H){"use strict";function N(E,a){if(!E)throw new Error(a||"Assertion failed")}function G(E,a){E.super_=a;var f=function(){};f.prototype=a.prototype,E.prototype=new f,E.prototype.constructor=E}function v(E,a,f){if(v.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,null!==E&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(E||0,a||10,f||"be"))}var B;"object"==typeof C?C.exports=v:H.BN=v,v.BN=v,v.wordSize=26;try{B=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:I(66089).Buffer}catch{}function _(E,a){var f=E.charCodeAt(a);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function T(E,a,f){var l=_(E,f);return f-1>=a&&(l|=_(E,f-1)<<4),l}function D(E,a,f,l){for(var h=0,g=Math.min(E.length,f),x=a;x<g;x++){var P=E.charCodeAt(x)-48;h*=l,h+=P>=49?P-49+10:P>=17?P-17+10:P}return h}v.isBN=function(a){return a instanceof v||null!==a&&"object"==typeof a&&a.constructor.wordSize===v.wordSize&&Array.isArray(a.words)},v.max=function(a,f){return a.cmp(f)>0?a:f},v.min=function(a,f){return a.cmp(f)<0?a:f},v.prototype._init=function(a,f,l){if("number"==typeof a)return this._initNumber(a,f,l);if("object"==typeof a)return this._initArray(a,f,l);"hex"===f&&(f=16),N(f===(0|f)&&f>=2&&f<=36);var h=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(h++,this.negative=1),h<a.length&&(16===f?this._parseHex(a,h,l):(this._parseBase(a,f,h),"le"===l&&this._initArray(this.toArray(),f,l)))},v.prototype._initNumber=function(a,f,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(N(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),f,l)},v.prototype._initArray=function(a,f,l){if(N("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var g,x,P=0;if("be"===l)for(h=a.length-1,g=0;h>=0;h-=3)this.words[g]|=(x=a[h]|a[h-1]<<8|a[h-2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);else if("le"===l)for(h=0,g=0;h<a.length;h+=3)this.words[g]|=(x=a[h]|a[h+1]<<8|a[h+2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);return this.strip()},v.prototype._parseHex=function(a,f,l){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var P,g=0,x=0;if("be"===l)for(h=a.length-1;h>=f;h-=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;else for(h=(a.length-f)%2==0?f+1:f;h<a.length;h+=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;this.strip()},v.prototype._parseBase=function(a,f,l){this.words=[0],this.length=1;for(var h=0,g=1;g<=67108863;g*=f)h++;h--,g=g/f|0;for(var x=a.length-l,P=x%h,m=Math.min(x,x-P)+l,d=0,p=l;p<m;p+=h)d=D(a,p,p+h,f),this.imuln(g),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==P){var V=1;for(d=D(a,p,a.length,f),p=0;p<P;p++)V*=f;this.imuln(V),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},v.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},v.prototype.clone=function(){var a=new v(null);return this.copy(a),a},v.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var $=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function j(E,a,f){f.negative=a.negative^E.negative;var l=E.length+a.length|0;f.length=l,l=l-1|0;var h=0|E.words[0],g=0|a.words[0],x=h*g,m=x/67108864|0;f.words[0]=67108863&x;for(var d=1;d<l;d++){for(var p=m>>>26,V=67108863&m,L=Math.min(d,a.length-1),Y=Math.max(0,d-E.length+1);Y<=L;Y++)p+=(x=(h=0|E.words[d-Y|0])*(g=0|a.words[Y])+V)/67108864|0,V=67108863&x;f.words[d]=0|V,m=0|p}return 0!==m?f.words[d]=0|m:f.length--,f.strip()}v.prototype.toString=function(a,f){var l;if(f=0|f||1,16===(a=a||10)||"hex"===a){l="";for(var h=0,g=0,x=0;x<this.length;x++){var P=this.words[x],m=(16777215&(P<<h|g)).toString(16);l=0!=(g=P>>>24-h&16777215)||x!==this.length-1?$[6-m.length]+m+l:m+l,(h+=2)>=26&&(h-=26,x--)}for(0!==g&&(l=g.toString(16)+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(a===(0|a)&&a>=2&&a<=36){var d=M[a],p=F[a];l="";var V=this.clone();for(V.negative=0;!V.isZero();){var L=V.modn(p).toString(a);l=(V=V.idivn(p)).isZero()?L+l:$[d-L.length]+L+l}for(this.isZero()&&(l="0"+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}N(!1,"Base should be between 2 and 36")},v.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&N(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(a,f){return N(typeof B<"u"),this.toArrayLike(B,a,f)},v.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},v.prototype.toArrayLike=function(a,f,l){var h=this.byteLength(),g=l||Math.max(1,h);N(h<=g,"byte array longer than desired length"),N(g>0,"Requested array length <= 0"),this.strip();var m,d,x="le"===f,P=new a(g),p=this.clone();if(x){for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[d]=m;for(;d<g;d++)P[d]=0}else{for(d=0;d<g-h;d++)P[d]=0;for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[g-d-1]=m}return P},v.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},v.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,l=0;return 8191&f||(l+=13,f>>>=13),127&f||(l+=7,f>>>=7),15&f||(l+=4,f>>>=4),3&f||(l+=2,f>>>=2),1&f||l++,l},v.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(a+=l,26!==l)break}return a},v.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},v.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},v.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this.strip()},v.prototype.ior=function(a){return N(!(this.negative|a.negative)),this.iuor(a)},v.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},v.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},v.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=f.length,this.strip()},v.prototype.iand=function(a){return N(!(this.negative|a.negative)),this.iuand(a)},v.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},v.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},v.prototype.iuxor=function(a){var f,l;this.length>a.length?(f=this,l=a):(f=a,l=this);for(var h=0;h<l.length;h++)this.words[h]=f.words[h]^l.words[h];if(this!==f)for(;h<f.length;h++)this.words[h]=f.words[h];return this.length=f.length,this.strip()},v.prototype.ixor=function(a){return N(!(this.negative|a.negative)),this.iuxor(a)},v.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},v.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},v.prototype.inotn=function(a){N("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),l=a%26;this._expand(f),l>0&&f--;for(var h=0;h<f;h++)this.words[h]=67108863&~this.words[h];return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this.strip()},v.prototype.notn=function(a){return this.clone().inotn(a)},v.prototype.setn=function(a,f){N("number"==typeof a&&a>=0);var l=a/26|0,h=a%26;return this._expand(l+1),this.words[l]=f?this.words[l]|1<<h:this.words[l]&~(1<<h),this.strip()},v.prototype.iadd=function(a){var f,l,h;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(l=this,h=a):(l=a,h=this);for(var g=0,x=0;x<h.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+(0|h.words[x])+g),g=f>>>26;for(;0!==g&&x<l.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+g),g=f>>>26;if(this.length=l.length,0!==g)this.words[this.length]=g,this.length++;else if(l!==this)for(;x<l.length;x++)this.words[x]=l.words[x];return this},v.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},v.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h,g,l=this.cmp(a);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(h=this,g=a):(h=a,g=this);for(var x=0,P=0;P<g.length;P++)x=(f=(0|h.words[P])-(0|g.words[P])+x)>>26,this.words[P]=67108863&f;for(;0!==x&&P<h.length;P++)x=(f=(0|h.words[P])+x)>>26,this.words[P]=67108863&f;if(0===x&&P<h.length&&h!==this)for(;P<h.length;P++)this.words[P]=h.words[P];return this.length=Math.max(this.length,P),h!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(a){return this.clone().isub(a)};var Z=function(a,f,l){var m,d,p,h=a.words,g=f.words,x=l.words,P=0,V=0|h[0],L=8191&V,Y=V>>>13,le=0|h[1],Se=8191&le,Oe=le>>>13,Ve=0|h[2],Re=8191&Ve,ye=Ve>>>13,ke=0|h[3],ve=8191&ke,_e=ke>>>13,de=0|h[4],se=8191&de,re=de>>>13,ce=0|h[5],ue=8191&ce,ge=ce>>>13,Ee=0|h[6],Be=8191&Ee,De=Ee>>>13,et=0|h[7],Ke=8191&et,We=et>>>13,_t=0|h[8],U=8191&_t,w=_t>>>13,b=0|h[9],z=8191&b,ie=b>>>13,be=0|g[0],Me=8191&be,qe=be>>>13,At=0|g[1],nt=8191&At,rt=At>>>13,St=0|g[2],bt=8191&St,Mt=St>>>13,Ft=0|g[3],it=8191&Ft,mt=Ft>>>13,Rr=0|g[4],xt=8191&Rr,It=Rr>>>13,Qr=0|g[5],Tt=8191&Qr,Pt=Qr>>>13,kn=0|g[6],Fe=8191&kn,He=kn>>>13,Ze=0|g[7],Ue=8191&Ze,Ge=Ze>>>13,pt=0|g[8],Xe=8191&pt,dt=pt>>>13,Qt=0|g[9],gt=8191&Qt,wt=Qt>>>13;l.negative=a.negative^f.negative,l.length=19;var Br=(P+(m=Math.imul(L,Me))|0)+((8191&(d=(d=Math.imul(L,qe))+Math.imul(Y,Me)|0))<<13)|0;P=((p=Math.imul(Y,qe))+(d>>>13)|0)+(Br>>>26)|0,Br&=67108863,m=Math.imul(Se,Me),d=(d=Math.imul(Se,qe))+Math.imul(Oe,Me)|0,p=Math.imul(Oe,qe);var Vt=(P+(m=m+Math.imul(L,nt)|0)|0)+((8191&(d=(d=d+Math.imul(L,rt)|0)+Math.imul(Y,nt)|0))<<13)|0;P=((p=p+Math.imul(Y,rt)|0)+(d>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,m=Math.imul(Re,Me),d=(d=Math.imul(Re,qe))+Math.imul(ye,Me)|0,p=Math.imul(ye,qe),m=m+Math.imul(Se,nt)|0,d=(d=d+Math.imul(Se,rt)|0)+Math.imul(Oe,nt)|0,p=p+Math.imul(Oe,rt)|0;var Zt=(P+(m=m+Math.imul(L,bt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Mt)|0)+Math.imul(Y,bt)|0))<<13)|0;P=((p=p+Math.imul(Y,Mt)|0)+(d>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,m=Math.imul(ve,Me),d=(d=Math.imul(ve,qe))+Math.imul(_e,Me)|0,p=Math.imul(_e,qe),m=m+Math.imul(Re,nt)|0,d=(d=d+Math.imul(Re,rt)|0)+Math.imul(ye,nt)|0,p=p+Math.imul(ye,rt)|0,m=m+Math.imul(Se,bt)|0,d=(d=d+Math.imul(Se,Mt)|0)+Math.imul(Oe,bt)|0,p=p+Math.imul(Oe,Mt)|0;var Tr=(P+(m=m+Math.imul(L,it)|0)|0)+((8191&(d=(d=d+Math.imul(L,mt)|0)+Math.imul(Y,it)|0))<<13)|0;P=((p=p+Math.imul(Y,mt)|0)+(d>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,m=Math.imul(se,Me),d=(d=Math.imul(se,qe))+Math.imul(re,Me)|0,p=Math.imul(re,qe),m=m+Math.imul(ve,nt)|0,d=(d=d+Math.imul(ve,rt)|0)+Math.imul(_e,nt)|0,p=p+Math.imul(_e,rt)|0,m=m+Math.imul(Re,bt)|0,d=(d=d+Math.imul(Re,Mt)|0)+Math.imul(ye,bt)|0,p=p+Math.imul(ye,Mt)|0,m=m+Math.imul(Se,it)|0,d=(d=d+Math.imul(Se,mt)|0)+Math.imul(Oe,it)|0,p=p+Math.imul(Oe,mt)|0;var dr=(P+(m=m+Math.imul(L,xt)|0)|0)+((8191&(d=(d=d+Math.imul(L,It)|0)+Math.imul(Y,xt)|0))<<13)|0;P=((p=p+Math.imul(Y,It)|0)+(d>>>13)|0)+(dr>>>26)|0,dr&=67108863,m=Math.imul(ue,Me),d=(d=Math.imul(ue,qe))+Math.imul(ge,Me)|0,p=Math.imul(ge,qe),m=m+Math.imul(se,nt)|0,d=(d=d+Math.imul(se,rt)|0)+Math.imul(re,nt)|0,p=p+Math.imul(re,rt)|0,m=m+Math.imul(ve,bt)|0,d=(d=d+Math.imul(ve,Mt)|0)+Math.imul(_e,bt)|0,p=p+Math.imul(_e,Mt)|0,m=m+Math.imul(Re,it)|0,d=(d=d+Math.imul(Re,mt)|0)+Math.imul(ye,it)|0,p=p+Math.imul(ye,mt)|0,m=m+Math.imul(Se,xt)|0,d=(d=d+Math.imul(Se,It)|0)+Math.imul(Oe,xt)|0,p=p+Math.imul(Oe,It)|0;var or=(P+(m=m+Math.imul(L,Tt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Pt)|0)+Math.imul(Y,Tt)|0))<<13)|0;P=((p=p+Math.imul(Y,Pt)|0)+(d>>>13)|0)+(or>>>26)|0,or&=67108863,m=Math.imul(Be,Me),d=(d=Math.imul(Be,qe))+Math.imul(De,Me)|0,p=Math.imul(De,qe),m=m+Math.imul(ue,nt)|0,d=(d=d+Math.imul(ue,rt)|0)+Math.imul(ge,nt)|0,p=p+Math.imul(ge,rt)|0,m=m+Math.imul(se,bt)|0,d=(d=d+Math.imul(se,Mt)|0)+Math.imul(re,bt)|0,p=p+Math.imul(re,Mt)|0,m=m+Math.imul(ve,it)|0,d=(d=d+Math.imul(ve,mt)|0)+Math.imul(_e,it)|0,p=p+Math.imul(_e,mt)|0,m=m+Math.imul(Re,xt)|0,d=(d=d+Math.imul(Re,It)|0)+Math.imul(ye,xt)|0,p=p+Math.imul(ye,It)|0,m=m+Math.imul(Se,Tt)|0,d=(d=d+Math.imul(Se,Pt)|0)+Math.imul(Oe,Tt)|0,p=p+Math.imul(Oe,Pt)|0;var mr=(P+(m=m+Math.imul(L,Fe)|0)|0)+((8191&(d=(d=d+Math.imul(L,He)|0)+Math.imul(Y,Fe)|0))<<13)|0;P=((p=p+Math.imul(Y,He)|0)+(d>>>13)|0)+(mr>>>26)|0,mr&=67108863,m=Math.imul(Ke,Me),d=(d=Math.imul(Ke,qe))+Math.imul(We,Me)|0,p=Math.imul(We,qe),m=m+Math.imul(Be,nt)|0,d=(d=d+Math.imul(Be,rt)|0)+Math.imul(De,nt)|0,p=p+Math.imul(De,rt)|0,m=m+Math.imul(ue,bt)|0,d=(d=d+Math.imul(ue,Mt)|0)+Math.imul(ge,bt)|0,p=p+Math.imul(ge,Mt)|0,m=m+Math.imul(se,it)|0,d=(d=d+Math.imul(se,mt)|0)+Math.imul(re,it)|0,p=p+Math.imul(re,mt)|0,m=m+Math.imul(ve,xt)|0,d=(d=d+Math.imul(ve,It)|0)+Math.imul(_e,xt)|0,p=p+Math.imul(_e,It)|0,m=m+Math.imul(Re,Tt)|0,d=(d=d+Math.imul(Re,Pt)|0)+Math.imul(ye,Tt)|0,p=p+Math.imul(ye,Pt)|0,m=m+Math.imul(Se,Fe)|0,d=(d=d+Math.imul(Se,He)|0)+Math.imul(Oe,Fe)|0,p=p+Math.imul(Oe,He)|0;var ar=(P+(m=m+Math.imul(L,Ue)|0)|0)+((8191&(d=(d=d+Math.imul(L,Ge)|0)+Math.imul(Y,Ue)|0))<<13)|0;P=((p=p+Math.imul(Y,Ge)|0)+(d>>>13)|0)+(ar>>>26)|0,ar&=67108863,m=Math.imul(U,Me),d=(d=Math.imul(U,qe))+Math.imul(w,Me)|0,p=Math.imul(w,qe),m=m+Math.imul(Ke,nt)|0,d=(d=d+Math.imul(Ke,rt)|0)+Math.imul(We,nt)|0,p=p+Math.imul(We,rt)|0,m=m+Math.imul(Be,bt)|0,d=(d=d+Math.imul(Be,Mt)|0)+Math.imul(De,bt)|0,p=p+Math.imul(De,Mt)|0,m=m+Math.imul(ue,it)|0,d=(d=d+Math.imul(ue,mt)|0)+Math.imul(ge,it)|0,p=p+Math.imul(ge,mt)|0,m=m+Math.imul(se,xt)|0,d=(d=d+Math.imul(se,It)|0)+Math.imul(re,xt)|0,p=p+Math.imul(re,It)|0,m=m+Math.imul(ve,Tt)|0,d=(d=d+Math.imul(ve,Pt)|0)+Math.imul(_e,Tt)|0,p=p+Math.imul(_e,Pt)|0,m=m+Math.imul(Re,Fe)|0,d=(d=d+Math.imul(Re,He)|0)+Math.imul(ye,Fe)|0,p=p+Math.imul(ye,He)|0,m=m+Math.imul(Se,Ue)|0,d=(d=d+Math.imul(Se,Ge)|0)+Math.imul(Oe,Ue)|0,p=p+Math.imul(Oe,Ge)|0;var en=(P+(m=m+Math.imul(L,Xe)|0)|0)+((8191&(d=(d=d+Math.imul(L,dt)|0)+Math.imul(Y,Xe)|0))<<13)|0;P=((p=p+Math.imul(Y,dt)|0)+(d>>>13)|0)+(en>>>26)|0,en&=67108863,m=Math.imul(z,Me),d=(d=Math.imul(z,qe))+Math.imul(ie,Me)|0,p=Math.imul(ie,qe),m=m+Math.imul(U,nt)|0,d=(d=d+Math.imul(U,rt)|0)+Math.imul(w,nt)|0,p=p+Math.imul(w,rt)|0,m=m+Math.imul(Ke,bt)|0,d=(d=d+Math.imul(Ke,Mt)|0)+Math.imul(We,bt)|0,p=p+Math.imul(We,Mt)|0,m=m+Math.imul(Be,it)|0,d=(d=d+Math.imul(Be,mt)|0)+Math.imul(De,it)|0,p=p+Math.imul(De,mt)|0,m=m+Math.imul(ue,xt)|0,d=(d=d+Math.imul(ue,It)|0)+Math.imul(ge,xt)|0,p=p+Math.imul(ge,It)|0,m=m+Math.imul(se,Tt)|0,d=(d=d+Math.imul(se,Pt)|0)+Math.imul(re,Tt)|0,p=p+Math.imul(re,Pt)|0,m=m+Math.imul(ve,Fe)|0,d=(d=d+Math.imul(ve,He)|0)+Math.imul(_e,Fe)|0,p=p+Math.imul(_e,He)|0,m=m+Math.imul(Re,Ue)|0,d=(d=d+Math.imul(Re,Ge)|0)+Math.imul(ye,Ue)|0,p=p+Math.imul(ye,Ge)|0,m=m+Math.imul(Se,Xe)|0,d=(d=d+Math.imul(Se,dt)|0)+Math.imul(Oe,Xe)|0,p=p+Math.imul(Oe,dt)|0;var zr=(P+(m=m+Math.imul(L,gt)|0)|0)+((8191&(d=(d=d+Math.imul(L,wt)|0)+Math.imul(Y,gt)|0))<<13)|0;P=((p=p+Math.imul(Y,wt)|0)+(d>>>13)|0)+(zr>>>26)|0,zr&=67108863,m=Math.imul(z,nt),d=(d=Math.imul(z,rt))+Math.imul(ie,nt)|0,p=Math.imul(ie,rt),m=m+Math.imul(U,bt)|0,d=(d=d+Math.imul(U,Mt)|0)+Math.imul(w,bt)|0,p=p+Math.imul(w,Mt)|0,m=m+Math.imul(Ke,it)|0,d=(d=d+Math.imul(Ke,mt)|0)+Math.imul(We,it)|0,p=p+Math.imul(We,mt)|0,m=m+Math.imul(Be,xt)|0,d=(d=d+Math.imul(Be,It)|0)+Math.imul(De,xt)|0,p=p+Math.imul(De,It)|0,m=m+Math.imul(ue,Tt)|0,d=(d=d+Math.imul(ue,Pt)|0)+Math.imul(ge,Tt)|0,p=p+Math.imul(ge,Pt)|0,m=m+Math.imul(se,Fe)|0,d=(d=d+Math.imul(se,He)|0)+Math.imul(re,Fe)|0,p=p+Math.imul(re,He)|0,m=m+Math.imul(ve,Ue)|0,d=(d=d+Math.imul(ve,Ge)|0)+Math.imul(_e,Ue)|0,p=p+Math.imul(_e,Ge)|0,m=m+Math.imul(Re,Xe)|0,d=(d=d+Math.imul(Re,dt)|0)+Math.imul(ye,Xe)|0,p=p+Math.imul(ye,dt)|0;var Wr=(P+(m=m+Math.imul(Se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Se,wt)|0)+Math.imul(Oe,gt)|0))<<13)|0;P=((p=p+Math.imul(Oe,wt)|0)+(d>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,m=Math.imul(z,bt),d=(d=Math.imul(z,Mt))+Math.imul(ie,bt)|0,p=Math.imul(ie,Mt),m=m+Math.imul(U,it)|0,d=(d=d+Math.imul(U,mt)|0)+Math.imul(w,it)|0,p=p+Math.imul(w,mt)|0,m=m+Math.imul(Ke,xt)|0,d=(d=d+Math.imul(Ke,It)|0)+Math.imul(We,xt)|0,p=p+Math.imul(We,It)|0,m=m+Math.imul(Be,Tt)|0,d=(d=d+Math.imul(Be,Pt)|0)+Math.imul(De,Tt)|0,p=p+Math.imul(De,Pt)|0,m=m+Math.imul(ue,Fe)|0,d=(d=d+Math.imul(ue,He)|0)+Math.imul(ge,Fe)|0,p=p+Math.imul(ge,He)|0,m=m+Math.imul(se,Ue)|0,d=(d=d+Math.imul(se,Ge)|0)+Math.imul(re,Ue)|0,p=p+Math.imul(re,Ge)|0,m=m+Math.imul(ve,Xe)|0,d=(d=d+Math.imul(ve,dt)|0)+Math.imul(_e,Xe)|0,p=p+Math.imul(_e,dt)|0;var _r=(P+(m=m+Math.imul(Re,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Re,wt)|0)+Math.imul(ye,gt)|0))<<13)|0;P=((p=p+Math.imul(ye,wt)|0)+(d>>>13)|0)+(_r>>>26)|0,_r&=67108863,m=Math.imul(z,it),d=(d=Math.imul(z,mt))+Math.imul(ie,it)|0,p=Math.imul(ie,mt),m=m+Math.imul(U,xt)|0,d=(d=d+Math.imul(U,It)|0)+Math.imul(w,xt)|0,p=p+Math.imul(w,It)|0,m=m+Math.imul(Ke,Tt)|0,d=(d=d+Math.imul(Ke,Pt)|0)+Math.imul(We,Tt)|0,p=p+Math.imul(We,Pt)|0,m=m+Math.imul(Be,Fe)|0,d=(d=d+Math.imul(Be,He)|0)+Math.imul(De,Fe)|0,p=p+Math.imul(De,He)|0,m=m+Math.imul(ue,Ue)|0,d=(d=d+Math.imul(ue,Ge)|0)+Math.imul(ge,Ue)|0,p=p+Math.imul(ge,Ge)|0,m=m+Math.imul(se,Xe)|0,d=(d=d+Math.imul(se,dt)|0)+Math.imul(re,Xe)|0,p=p+Math.imul(re,dt)|0;var Gr=(P+(m=m+Math.imul(ve,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ve,wt)|0)+Math.imul(_e,gt)|0))<<13)|0;P=((p=p+Math.imul(_e,wt)|0)+(d>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,m=Math.imul(z,xt),d=(d=Math.imul(z,It))+Math.imul(ie,xt)|0,p=Math.imul(ie,It),m=m+Math.imul(U,Tt)|0,d=(d=d+Math.imul(U,Pt)|0)+Math.imul(w,Tt)|0,p=p+Math.imul(w,Pt)|0,m=m+Math.imul(Ke,Fe)|0,d=(d=d+Math.imul(Ke,He)|0)+Math.imul(We,Fe)|0,p=p+Math.imul(We,He)|0,m=m+Math.imul(Be,Ue)|0,d=(d=d+Math.imul(Be,Ge)|0)+Math.imul(De,Ue)|0,p=p+Math.imul(De,Ge)|0,m=m+Math.imul(ue,Xe)|0,d=(d=d+Math.imul(ue,dt)|0)+Math.imul(ge,Xe)|0,p=p+Math.imul(ge,dt)|0;var qr=(P+(m=m+Math.imul(se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(se,wt)|0)+Math.imul(re,gt)|0))<<13)|0;P=((p=p+Math.imul(re,wt)|0)+(d>>>13)|0)+(qr>>>26)|0,qr&=67108863,m=Math.imul(z,Tt),d=(d=Math.imul(z,Pt))+Math.imul(ie,Tt)|0,p=Math.imul(ie,Pt),m=m+Math.imul(U,Fe)|0,d=(d=d+Math.imul(U,He)|0)+Math.imul(w,Fe)|0,p=p+Math.imul(w,He)|0,m=m+Math.imul(Ke,Ue)|0,d=(d=d+Math.imul(Ke,Ge)|0)+Math.imul(We,Ue)|0,p=p+Math.imul(We,Ge)|0,m=m+Math.imul(Be,Xe)|0,d=(d=d+Math.imul(Be,dt)|0)+Math.imul(De,Xe)|0,p=p+Math.imul(De,dt)|0;var Yr=(P+(m=m+Math.imul(ue,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ue,wt)|0)+Math.imul(ge,gt)|0))<<13)|0;P=((p=p+Math.imul(ge,wt)|0)+(d>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,m=Math.imul(z,Fe),d=(d=Math.imul(z,He))+Math.imul(ie,Fe)|0,p=Math.imul(ie,He),m=m+Math.imul(U,Ue)|0,d=(d=d+Math.imul(U,Ge)|0)+Math.imul(w,Ue)|0,p=p+Math.imul(w,Ge)|0,m=m+Math.imul(Ke,Xe)|0,d=(d=d+Math.imul(Ke,dt)|0)+Math.imul(We,Xe)|0,p=p+Math.imul(We,dt)|0;var mn=(P+(m=m+Math.imul(Be,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Be,wt)|0)+Math.imul(De,gt)|0))<<13)|0;P=((p=p+Math.imul(De,wt)|0)+(d>>>13)|0)+(mn>>>26)|0,mn&=67108863,m=Math.imul(z,Ue),d=(d=Math.imul(z,Ge))+Math.imul(ie,Ue)|0,p=Math.imul(ie,Ge),m=m+Math.imul(U,Xe)|0,d=(d=d+Math.imul(U,dt)|0)+Math.imul(w,Xe)|0,p=p+Math.imul(w,dt)|0;var un=(P+(m=m+Math.imul(Ke,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Ke,wt)|0)+Math.imul(We,gt)|0))<<13)|0;P=((p=p+Math.imul(We,wt)|0)+(d>>>13)|0)+(un>>>26)|0,un&=67108863,m=Math.imul(z,Xe),d=(d=Math.imul(z,dt))+Math.imul(ie,Xe)|0,p=Math.imul(ie,dt);var fn=(P+(m=m+Math.imul(U,gt)|0)|0)+((8191&(d=(d=d+Math.imul(U,wt)|0)+Math.imul(w,gt)|0))<<13)|0;P=((p=p+Math.imul(w,wt)|0)+(d>>>13)|0)+(fn>>>26)|0,fn&=67108863;var xn=(P+(m=Math.imul(z,gt))|0)+((8191&(d=(d=Math.imul(z,wt))+Math.imul(ie,gt)|0))<<13)|0;return P=((p=Math.imul(ie,wt))+(d>>>13)|0)+(xn>>>26)|0,xn&=67108863,x[0]=Br,x[1]=Vt,x[2]=Zt,x[3]=Tr,x[4]=dr,x[5]=or,x[6]=mr,x[7]=ar,x[8]=en,x[9]=zr,x[10]=Wr,x[11]=_r,x[12]=Gr,x[13]=qr,x[14]=Yr,x[15]=mn,x[16]=un,x[17]=fn,x[18]=xn,0!==P&&(x[19]=P,l.length++),l};function W(E,a,f){return(new K).mulp(E,a,f)}function K(E,a){this.x=E,this.y=a}Math.imul||(Z=j),v.prototype.mulTo=function(a,f){var l,h=this.length+a.length;return l=10===this.length&&10===a.length?Z(this,a,f):h<63?j(this,a,f):h<1024?function q(E,a,f){f.negative=a.negative^E.negative,f.length=E.length+a.length;for(var l=0,h=0,g=0;g<f.length-1;g++){var x=h;h=0;for(var P=67108863&l,m=Math.min(g,a.length-1),d=Math.max(0,g-E.length+1);d<=m;d++){var Y=(0|E.words[g-d])*(0|a.words[d]),le=67108863&Y;P=67108863&(le=le+P|0),h+=(x=(x=x+(Y/67108864|0)|0)+(le>>>26)|0)>>>26,x&=67108863}f.words[g]=P,l=x,x=h}return 0!==l?f.words[g]=l:f.length--,f.strip()}(this,a,f):W(this,a,f),l},K.prototype.makeRBT=function(a){for(var f=new Array(a),l=v.prototype._countBits(a)-1,h=0;h<a;h++)f[h]=this.revBin(h,l,a);return f},K.prototype.revBin=function(a,f,l){if(0===a||a===l-1)return a;for(var h=0,g=0;g<f;g++)h|=(1&a)<<f-g-1,a>>=1;return h},K.prototype.permute=function(a,f,l,h,g,x){for(var P=0;P<x;P++)h[P]=f[a[P]],g[P]=l[a[P]]},K.prototype.transform=function(a,f,l,h,g,x){this.permute(x,a,f,l,h,g);for(var P=1;P<g;P<<=1)for(var m=P<<1,d=Math.cos(2*Math.PI/m),p=Math.sin(2*Math.PI/m),V=0;V<g;V+=m)for(var L=d,Y=p,le=0;le<P;le++){var Se=l[V+le],Oe=h[V+le],Ve=l[V+le+P],Re=h[V+le+P],ye=L*Ve-Y*Re;Re=L*Re+Y*Ve,l[V+le]=Se+(Ve=ye),h[V+le]=Oe+Re,l[V+le+P]=Se-Ve,h[V+le+P]=Oe-Re,le!==m&&(ye=d*L-p*Y,Y=d*Y+p*L,L=ye)}},K.prototype.guessLen13b=function(a,f){var l=1|Math.max(f,a),h=1&l,g=0;for(l=l/2|0;l;l>>>=1)g++;return 1<<g+1+h},K.prototype.conjugate=function(a,f,l){if(!(l<=1))for(var h=0;h<l/2;h++){var g=a[h];a[h]=a[l-h-1],a[l-h-1]=g,g=f[h],f[h]=-f[l-h-1],f[l-h-1]=-g}},K.prototype.normalize13b=function(a,f){for(var l=0,h=0;h<f/2;h++){var g=8192*Math.round(a[2*h+1]/f)+Math.round(a[2*h]/f)+l;a[h]=67108863&g,l=g<67108864?0:g/67108864|0}return a},K.prototype.convert13b=function(a,f,l,h){for(var g=0,x=0;x<f;x++)l[2*x]=8191&(g+=0|a[x]),l[2*x+1]=8191&(g>>>=13),g>>>=13;for(x=2*f;x<h;++x)l[x]=0;N(0===g),N(!(-8192&g))},K.prototype.stub=function(a){for(var f=new Array(a),l=0;l<a;l++)f[l]=0;return f},K.prototype.mulp=function(a,f,l){var h=2*this.guessLen13b(a.length,f.length),g=this.makeRBT(h),x=this.stub(h),P=new Array(h),m=new Array(h),d=new Array(h),p=new Array(h),V=new Array(h),L=new Array(h),Y=l.words;Y.length=h,this.convert13b(a.words,a.length,P,h),this.convert13b(f.words,f.length,p,h),this.transform(P,x,m,d,h,g),this.transform(p,x,V,L,h,g);for(var le=0;le<h;le++){var Se=m[le]*V[le]-d[le]*L[le];d[le]=m[le]*L[le]+d[le]*V[le],m[le]=Se}return this.conjugate(m,d,h),this.transform(m,d,Y,x,h,g),this.conjugate(Y,x,h),this.normalize13b(Y,h),l.negative=a.negative^f.negative,l.length=a.length+f.length,l.strip()},v.prototype.mul=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},v.prototype.mulf=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),W(this,a,f)},v.prototype.imul=function(a){return this.clone().mulTo(a,this)},v.prototype.imuln=function(a){N("number"==typeof a),N(a<67108864);for(var f=0,l=0;l<this.length;l++){var h=(0|this.words[l])*a,g=(67108863&h)+(67108863&f);f>>=26,f+=h/67108864|0,f+=g>>>26,this.words[l]=67108863&g}return 0!==f&&(this.words[l]=f,this.length++),this},v.prototype.muln=function(a){return this.clone().imuln(a)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(a){var f=function k(E){for(var a=new Array(E.bitLength()),f=0;f<a.length;f++){var h=f%26;a[f]=(E.words[f/26|0]&1<<h)>>>h}return a}(a);if(0===f.length)return new v(1);for(var l=this,h=0;h<f.length&&0===f[h];h++,l=l.sqr());if(++h<f.length)for(var g=l.sqr();h<f.length;h++,g=g.sqr())0!==f[h]&&(l=l.mul(g));return l},v.prototype.iushln=function(a){N("number"==typeof a&&a>=0);var g,f=a%26,l=(a-f)/26,h=67108863>>>26-f<<26-f;if(0!==f){var x=0;for(g=0;g<this.length;g++){var P=this.words[g]&h;this.words[g]=(0|this.words[g])-P<<f|x,x=P>>>26-f}x&&(this.words[g]=x,this.length++)}if(0!==l){for(g=this.length-1;g>=0;g--)this.words[g+l]=this.words[g];for(g=0;g<l;g++)this.words[g]=0;this.length+=l}return this.strip()},v.prototype.ishln=function(a){return N(0===this.negative),this.iushln(a)},v.prototype.iushrn=function(a,f,l){var h;N("number"==typeof a&&a>=0),h=f?(f-f%26)/26:0;var g=a%26,x=Math.min((a-g)/26,this.length),P=67108863^67108863>>>g<<g,m=l;if(h-=x,h=Math.max(0,h),m){for(var d=0;d<x;d++)m.words[d]=this.words[d];m.length=x}if(0!==x)if(this.length>x)for(this.length-=x,d=0;d<this.length;d++)this.words[d]=this.words[d+x];else this.words[0]=0,this.length=1;var p=0;for(d=this.length-1;d>=0&&(0!==p||d>=h);d--){var V=0|this.words[d];this.words[d]=p<<26-g|V>>>g,p=V&P}return m&&0!==p&&(m.words[m.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(a,f,l){return N(0===this.negative),this.iushrn(a,f,l)},v.prototype.shln=function(a){return this.clone().ishln(a)},v.prototype.ushln=function(a){return this.clone().iushln(a)},v.prototype.shrn=function(a){return this.clone().ishrn(a)},v.prototype.ushrn=function(a){return this.clone().iushrn(a)},v.prototype.testn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return!(this.length<=l||!(this.words[l]&1<<f))},v.prototype.imaskn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return N(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==f&&l++,this.length=Math.min(l,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this.strip())},v.prototype.maskn=function(a){return this.clone().imaskn(a)},v.prototype.iaddn=function(a){return N("number"==typeof a),N(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},v.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},v.prototype.isubn=function(a){if(N("number"==typeof a),N(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},v.prototype.addn=function(a){return this.clone().iaddn(a)},v.prototype.subn=function(a){return this.clone().isubn(a)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(a,f,l){var g;this._expand(a.length+l);var x,P=0;for(g=0;g<a.length;g++){x=(0|this.words[g+l])+P;var m=(0|a.words[g])*f;P=((x-=67108863&m)>>26)-(m/67108864|0),this.words[g+l]=67108863&x}for(;g<this.length-l;g++)P=(x=(0|this.words[g+l])+P)>>26,this.words[g+l]=67108863&x;if(0===P)return this.strip();for(N(-1===P),P=0,g=0;g<this.length;g++)P=(x=-(0|this.words[g])+P)>>26,this.words[g]=67108863&x;return this.negative=1,this.strip()},v.prototype._wordDiv=function(a,f){var l,h=this.clone(),g=a,x=0|g.words[g.length-1];0!=(l=26-this._countBits(x))&&(g=g.ushln(l),h.iushln(l),x=0|g.words[g.length-1]);var d,m=h.length-g.length;if("mod"!==f){(d=new v(null)).length=m+1,d.words=new Array(d.length);for(var p=0;p<d.length;p++)d.words[p]=0}var V=h.clone()._ishlnsubmul(g,1,m);0===V.negative&&(h=V,d&&(d.words[m]=1));for(var L=m-1;L>=0;L--){var Y=67108864*(0|h.words[g.length+L])+(0|h.words[g.length+L-1]);for(Y=Math.min(Y/x|0,67108863),h._ishlnsubmul(g,Y,L);0!==h.negative;)Y--,h.negative=0,h._ishlnsubmul(g,1,L),h.isZero()||(h.negative^=1);d&&(d.words[L]=Y)}return d&&d.strip(),h.strip(),"div"!==f&&0!==l&&h.iushrn(l),{div:d||null,mod:h}},v.prototype.divmod=function(a,f,l){return N(!a.isZero()),this.isZero()?{div:new v(0),mod:new v(0)}:0!==this.negative&&0===a.negative?(x=this.neg().divmod(a,f),"mod"!==f&&(h=x.div.neg()),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.iadd(a)),{div:h,mod:g}):0===this.negative&&0!==a.negative?(x=this.divmod(a.neg(),f),"mod"!==f&&(h=x.div.neg()),{div:h,mod:x.mod}):this.negative&a.negative?(x=this.neg().divmod(a.neg(),f),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.isub(a)),{div:x.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new v(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new v(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new v(this.modn(a.words[0]))}:this._wordDiv(a,f);var h,g,x},v.prototype.div=function(a){return this.divmod(a,"div",!1).div},v.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},v.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},v.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var l=0!==f.div.negative?f.mod.isub(a):f.mod,h=a.ushrn(1),g=a.andln(1),x=l.cmp(h);return x<0||1===g&&0===x?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},v.prototype.modn=function(a){N(a<=67108863);for(var f=(1<<26)%a,l=0,h=this.length-1;h>=0;h--)l=(f*l+(0|this.words[h]))%a;return l},v.prototype.idivn=function(a){N(a<=67108863);for(var f=0,l=this.length-1;l>=0;l--){var h=(0|this.words[l])+67108864*f;this.words[l]=h/a|0,f=h%a}return this.strip()},v.prototype.divn=function(a){return this.clone().idivn(a)},v.prototype.egcd=function(a){N(0===a.negative),N(!a.isZero());var f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=new v(0),P=new v(1),m=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++m;for(var d=l.clone(),p=f.clone();!f.isZero();){for(var V=0,L=1;!(f.words[0]&L)&&V<26;++V,L<<=1);if(V>0)for(f.iushrn(V);V-- >0;)(h.isOdd()||g.isOdd())&&(h.iadd(d),g.isub(p)),h.iushrn(1),g.iushrn(1);for(var Y=0,le=1;!(l.words[0]&le)&&Y<26;++Y,le<<=1);if(Y>0)for(l.iushrn(Y);Y-- >0;)(x.isOdd()||P.isOdd())&&(x.iadd(d),P.isub(p)),x.iushrn(1),P.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(x),g.isub(P)):(l.isub(f),x.isub(h),P.isub(g))}return{a:x,b:P,gcd:l.iushln(m)}},v.prototype._invmp=function(a){N(0===a.negative),N(!a.isZero());var V,f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var P=0,m=1;!(f.words[0]&m)&&P<26;++P,m<<=1);if(P>0)for(f.iushrn(P);P-- >0;)h.isOdd()&&h.iadd(x),h.iushrn(1);for(var d=0,p=1;!(l.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(l.iushrn(d);d-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(g)):(l.isub(f),g.isub(h))}return(V=0===f.cmpn(1)?h:g).cmpn(0)<0&&V.iadd(a),V},v.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),l=a.clone();f.negative=0,l.negative=0;for(var h=0;f.isEven()&&l.isEven();h++)f.iushrn(1),l.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var g=f.cmp(l);if(g<0){var x=f;f=l,l=x}else if(0===g||0===l.cmpn(1))break;f.isub(l)}return l.iushln(h)},v.prototype.invm=function(a){return this.egcd(a).a.umod(a)},v.prototype.isEven=function(){return!(1&this.words[0])},v.prototype.isOdd=function(){return!(1&~this.words[0])},v.prototype.andln=function(a){return this.words[0]&a},v.prototype.bincn=function(a){N("number"==typeof a);var f=a%26,l=(a-f)/26,h=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var g=h,x=l;0!==g&&x<this.length;x++){var P=0|this.words[x];g=(P+=g)>>>26,this.words[x]=P&=67108863}return 0!==g&&(this.words[x]=g,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(a){var l,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this.strip(),this.length>1)l=1;else{f&&(a=-a),N(a<=67108863,"Number is too big");var h=0|this.words[0];l=h===a?0:h<a?-1:1}return 0!==this.negative?0|-l:l},v.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},v.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var h=0|this.words[l],g=0|a.words[l];if(h!==g){h<g?f=-1:h>g&&(f=1);break}}return f},v.prototype.gtn=function(a){return 1===this.cmpn(a)},v.prototype.gt=function(a){return 1===this.cmp(a)},v.prototype.gten=function(a){return this.cmpn(a)>=0},v.prototype.gte=function(a){return this.cmp(a)>=0},v.prototype.ltn=function(a){return-1===this.cmpn(a)},v.prototype.lt=function(a){return-1===this.cmp(a)},v.prototype.lten=function(a){return this.cmpn(a)<=0},v.prototype.lte=function(a){return this.cmp(a)<=0},v.prototype.eqn=function(a){return 0===this.cmpn(a)},v.prototype.eq=function(a){return 0===this.cmp(a)},v.red=function(a){return new pe(a)},v.prototype.toRed=function(a){return N(!this.red,"Already a number in reduction context"),N(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},v.prototype.fromRed=function(){return N(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},v.prototype._forceRed=function(a){return this.red=a,this},v.prototype.forceRed=function(a){return N(!this.red,"Already a number in reduction context"),this._forceRed(a)},v.prototype.redAdd=function(a){return N(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},v.prototype.redIAdd=function(a){return N(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},v.prototype.redSub=function(a){return N(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},v.prototype.redISub=function(a){return N(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},v.prototype.redShl=function(a){return N(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},v.prototype.redMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},v.prototype.redIMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},v.prototype.redSqr=function(){return N(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return N(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return N(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return N(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return N(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(a){return N(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var J={k256:null,p224:null,p192:null,p25519:null};function X(E,a){this.name=E,this.p=new v(a,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Q(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function oe(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ne(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function me(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function pe(E){if("string"==typeof E){var a=v._prime(E);this.m=a.p,this.prime=a}else N(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}function Ie(E){pe.call(this,E),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}X.prototype._tmp=function(){var a=new v(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var l,f=a;do{this.split(f,this.tmp),l=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(l>this.n);var h=l<this.n?-1:f.ucmp(this.p);return 0===h?(f.words[0]=0,f.length=1):h>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},X.prototype.split=function(a,f){a.iushrn(this.n,0,f)},X.prototype.imulK=function(a){return a.imul(this.k)},G(Q,X),Q.prototype.split=function(a,f){for(var l=4194303,h=Math.min(a.length,9),g=0;g<h;g++)f.words[g]=a.words[g];if(f.length=h,a.length<=9)return a.words[0]=0,void(a.length=1);var x=a.words[9];for(f.words[f.length++]=x&l,g=10;g<a.length;g++){var P=0|a.words[g];a.words[g-10]=(P&l)<<4|x>>>22,x=P}a.words[g-10]=x>>>=22,a.length-=0===x&&a.length>10?10:9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,l=0;l<a.length;l++){var h=0|a.words[l];a.words[l]=67108863&(f+=977*h),f=64*h+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},G(oe,X),G(ne,X),G(me,X),me.prototype.imulK=function(a){for(var f=0,l=0;l<a.length;l++){var h=19*(0|a.words[l])+f,g=67108863&h;h>>>=26,a.words[l]=g,f=h}return 0!==f&&(a.words[a.length++]=f),a},v._prime=function(a){if(J[a])return J[a];var f;if("k256"===a)f=new Q;else if("p224"===a)f=new oe;else if("p192"===a)f=new ne;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new me}return J[a]=f,f},pe.prototype._verify1=function(a){N(0===a.negative,"red works only with positives"),N(a.red,"red works only with red numbers")},pe.prototype._verify2=function(a,f){N(!(a.negative|f.negative),"red works only with positives"),N(a.red&&a.red===f.red,"red works only with red numbers")},pe.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},pe.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},pe.prototype.add=function(a,f){this._verify2(a,f);var l=a.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},pe.prototype.iadd=function(a,f){this._verify2(a,f);var l=a.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},pe.prototype.sub=function(a,f){this._verify2(a,f);var l=a.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},pe.prototype.isub=function(a,f){this._verify2(a,f);var l=a.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},pe.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},pe.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},pe.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},pe.prototype.isqr=function(a){return this.imul(a,a.clone())},pe.prototype.sqr=function(a){return this.mul(a,a)},pe.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(N(f%2==1),3===f){var l=this.m.add(new v(1)).iushrn(2);return this.pow(a,l)}for(var h=this.m.subn(1),g=0;!h.isZero()&&0===h.andln(1);)g++,h.iushrn(1);N(!h.isZero());var x=new v(1).toRed(this),P=x.redNeg(),m=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new v(2*d*d).toRed(this);0!==this.pow(d,m).cmp(P);)d.redIAdd(P);for(var p=this.pow(d,h),V=this.pow(a,h.addn(1).iushrn(1)),L=this.pow(a,h),Y=g;0!==L.cmp(x);){for(var le=L,Se=0;0!==le.cmp(x);Se++)le=le.redSqr();N(Se<Y);var Oe=this.pow(p,new v(1).iushln(Y-Se-1));V=V.redMul(Oe),p=Oe.redSqr(),L=L.redMul(p),Y=Se}return V},pe.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},pe.prototype.pow=function(a,f){if(f.isZero())return new v(1).toRed(this);if(0===f.cmpn(1))return a.clone();var h=new Array(16);h[0]=new v(1).toRed(this),h[1]=a;for(var g=2;g<h.length;g++)h[g]=this.mul(h[g-1],a);var x=h[0],P=0,m=0,d=f.bitLength()%26;for(0===d&&(d=26),g=f.length-1;g>=0;g--){for(var p=f.words[g],V=d-1;V>=0;V--){var L=p>>V&1;x!==h[0]&&(x=this.sqr(x)),0!==L||0!==P?(P<<=1,P|=L,(4==++m||0===g&&0===V)&&(x=this.mul(x,h[P]),m=0,P=0)):m=0}d=26}return x},pe.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},pe.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},v.mont=function(a){return new Ie(a)},G(Ie,pe),Ie.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Ie.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},Ie.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new v(0)._forceRed(this);var l=a.mul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(xe=I.nmd(xe),this)},48967:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ephemeralKeySize=O.symmetricNonceLength=O.symmetricAlgorithm=O.isHkdfKeyCompressed=O.isEphemeralKeyCompressed=O.ellipticCurve=O.ECIES_CONFIG=void 0;var C=I(29277);O.ECIES_CONFIG=new(function(){return function D(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16}}()),O.ellipticCurve=function(){return O.ECIES_CONFIG.ellipticCurve},O.isEphemeralKeyCompressed=function(){return O.ECIES_CONFIG.isEphemeralKeyCompressed},O.isHkdfKeyCompressed=function(){return O.ECIES_CONFIG.isHkdfKeyCompressed},O.symmetricAlgorithm=function(){return O.ECIES_CONFIG.symmetricAlgorithm},O.symmetricNonceLength=function(){return O.ECIES_CONFIG.symmetricNonceLength},O.ephemeralKeySize=function(){var D={secp256k1:O.ECIES_CONFIG.isEphemeralKeyCompressed?C.COMPRESSED_PUBLIC_KEY_SIZE:C.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:C.CURVE25519_PUBLIC_KEY_SIZE,ed25519:C.CURVE25519_PUBLIC_KEY_SIZE};if(O.ECIES_CONFIG.ellipticCurve in D)return D[O.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}},29277:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.AEAD_TAG_LENGTH=O.XCHACHA20_NONCE_LENGTH=O.CURVE25519_PUBLIC_KEY_SIZE=O.ETH_PUBLIC_KEY_SIZE=O.UNCOMPRESSED_PUBLIC_KEY_SIZE=O.COMPRESSED_PUBLIC_KEY_SIZE=O.SECRET_KEY_LENGTH=void 0,O.SECRET_KEY_LENGTH=32,O.COMPRESSED_PUBLIC_KEY_SIZE=33,O.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,O.ETH_PUBLIC_KEY_SIZE=64,O.CURVE25519_PUBLIC_KEY_SIZE=32,O.XCHACHA20_NONCE_LENGTH=24,O.AEAD_TAG_LENGTH=16},63397:(xe,O,I)=>{"use strict";O.VV=O.Yc=O.w=void 0;var H=I(23790),N=I(48967),G=I(40774),v=I(77399);O.w=function B($,M){var q,F=new G.PrivateKey,k=$ instanceof Uint8Array?new G.PublicKey($):G.PublicKey.fromHex($),j=F.encapsulate(k),Z=(0,v.aesEncrypt)(j,M);return q=(0,N.isEphemeralKeyCompressed)()?F.publicKey.compressed:F.publicKey.uncompressed,Buffer.from((0,H.concatBytes)(q,Z))},O.Yc=function _($,M){var F=$ instanceof Uint8Array?new G.PrivateKey($):G.PrivateKey.fromHex($),k=(0,N.ephemeralKeySize)(),j=new G.PublicKey(M.subarray(0,k)),Z=M.subarray(k),q=j.decapsulate(F);return Buffer.from((0,v.aesDecrypt)(q,Z))};var T=I(48967);Object.defineProperty(O,"VV",{enumerable:!0,get:function(){return T.ECIES_CONFIG}});I(40774)},1210:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.PrivateKey=void 0;var C=I(23790),H=I(48967),N=I(77399),G=I(40762),v=function(){function B(_){var T=void 0===_?(0,N.getValidSecret)():_;if(!(0,N.isValidPrivateKey)(T))throw new Error("Invalid private key");this.data=T,this.publicKey=new G.PublicKey((0,N.getPublicKey)(T))}return B.fromHex=function(_){return new B((0,N.decodeHex)(_))},Object.defineProperty(B.prototype,"secret",{get:function(){return Buffer.from(this.data)},enumerable:!1,configurable:!0}),B.prototype.toHex=function(){return(0,C.bytesToHex)(this.data)},B.prototype.encapsulate=function(_){var T,D;return(0,H.isHkdfKeyCompressed)()?(T=this.publicKey.compressed,D=this.multiply(_,!0)):(T=this.publicKey.uncompressed,D=this.multiply(_,!1)),(0,N.getSharedKey)(T,D)},B.prototype.multiply=function(_,T){return void 0===T&&(T=!1),(0,N.getSharedPoint)(this.data,_.compressed,T)},B.prototype.equals=function(_){return(0,C.equalBytes)(this.data,_.data)},B}();O.PrivateKey=v},40762:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.PublicKey=void 0;var C=I(23790),H=I(48967),N=I(77399),G=function(){function v(B){this.data=(0,N.convertPublicKeyFormat)(B,!0)}return v.fromHex=function(B){return new v((0,N.hexToPublicKey)(B))},Object.defineProperty(v.prototype,"uncompressed",{get:function(){return Buffer.from((0,N.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"compressed",{get:function(){return Buffer.from(this.data)},enumerable:!1,configurable:!0}),v.prototype.toHex=function(B){return void 0===B&&(B=!0),(0,C.bytesToHex)(B?this.data:this.uncompressed)},v.prototype.decapsulate=function(B){var _,T;return(0,H.isHkdfKeyCompressed)()?(_=this.data,T=B.multiply(this,!0)):(_=this.uncompressed,T=B.multiply(this,!1)),(0,N.getSharedKey)(_,T)},v.prototype.equals=function(B){return(0,C.equalBytes)(this.data,B.data)},v}();O.PublicKey=G},40774:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.PublicKey=O.PrivateKey=void 0;var C=I(1210);Object.defineProperty(O,"PrivateKey",{enumerable:!0,get:function(){return C.PrivateKey}});var H=I(40762);Object.defineProperty(O,"PublicKey",{enumerable:!0,get:function(){return H.PublicKey}})},1849:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.aes256gcm=void 0;var C=I(23790),H=I(91426),N=I(29277);O.aes256gcm=function G(v,B,_){return{tagLength:N.AEAD_TAG_LENGTH,encrypt:function($){var M=(0,H.createCipheriv)("aes-256-gcm",v,B);_&&M.setAAD(_);var F=M.update($),k=M.final();return(0,C.concatBytes)(F,k,M.getAuthTag())},decrypt:function($){var M=$.subarray(0,$.length-N.AEAD_TAG_LENGTH),F=$.subarray(-N.AEAD_TAG_LENGTH),k=(0,H.createDecipheriv)("aes-256-gcm",v,B);_&&k.setAAD(_),k.setAuthTag(F);var j=k.update(M),Z=k.final();return(0,C.concatBytes)(j,Z)}}}},77553:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.hexToPublicKey=O.convertPublicKeyFormat=O.getSharedPoint=O.getSharedKey=O.getPublicKey=O.isValidPrivateKey=O.getValidSecret=void 0;var C=I(23790),H=I(42098),N=I(57340),G=I(91717),v=I(48967),B=I(29277),_=I(99666),T=I(63364);function $(W){return q(function(K){return K.utils.isValidPrivateKey(W)},function(){return!0},function(){return!0})}function q(W,K,J){if("secp256k1"===(0,v.ellipticCurve)())return W(G.secp256k1);if("x25519"===(0,v.ellipticCurve)())return K(N.x25519);if("ed25519"===(0,v.ellipticCurve)())return J(N.ed25519);throw new Error("Not implemented")}O.getValidSecret=function D(){var W;do{W=(0,H.randomBytes)(B.SECRET_KEY_LENGTH)}while(!$(W));return W},O.isValidPrivateKey=$,O.getPublicKey=function M(W){return q(function(K){return K.getPublicKey(W)},function(K){return K.getPublicKey(W)},function(K){return K.getPublicKey(W)})},O.getSharedKey=function F(W,K){return(0,T.deriveKey)((0,C.concatBytes)(W,K))},O.getSharedPoint=function k(W,K,J){return q(function(X){return X.getSharedSecret(W,K,J)},function(X){return X.getSharedSecret(W,K)},function(X){var Q=X.utils.getExtendedPublicKey(W).scalar;return X.ExtendedPoint.fromHex(K).multiply(Q).toRawBytes()})},O.convertPublicKeyFormat=function j(W,K){return q(function(J){return J.getSharedSecret(BigInt(1),W,K)},function(){return W},function(){return W})},O.hexToPublicKey=function Z(W){var K=(0,_.decodeHex)(W);return q(function(){if(K.length===B.ETH_PUBLIC_KEY_SIZE){var J=new Uint8Array(1+K.length);return J.set([4]),J.set(K,1),J}return K},function(){return K},function(){return K})}},99666:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.decodeHex=O.remove0x=void 0;var C=I(23790);function H(G){return G.startsWith("0x")||G.startsWith("0X")?G.slice(2):G}O.remove0x=H,O.decodeHex=function N(G){return(0,C.hexToBytes)(H(G))}},77399:function(xe,O,I){"use strict";var C=this&&this.__createBinding||(Object.create?function(N,G,v,B){void 0===B&&(B=v);var _=Object.getOwnPropertyDescriptor(G,v);(!_||("get"in _?!G.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return G[v]}}),Object.defineProperty(N,B,_)}:function(N,G,v,B){void 0===B&&(B=v),N[B]=G[v]}),H=this&&this.__exportStar||function(N,G){for(var v in N)"default"!==v&&!Object.prototype.hasOwnProperty.call(G,v)&&C(G,N,v)};Object.defineProperty(O,"__esModule",{value:!0}),H(I(77553),O),H(I(99666),O),H(I(63364),O)},63364:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.deriveKey=O.aesDecrypt=O.aesEncrypt=void 0;var C=I(59219),H=I(23790),N=I(42098),G=I(57334),v=I(1806),B=I(48967),_=I(29277),T=I(1849);function F(Z,q,W){var K=(0,B.symmetricAlgorithm)(),J=Z?k:j;if("aes-256-gcm"===K)return J(T.aes256gcm,q,W,(0,B.symmetricNonceLength)());if("xchacha20"===K)return J(C.xchacha20poly1305,q,W,_.XCHACHA20_NONCE_LENGTH);throw new Error("Not implemented")}function k(Z,q,W,K){var J=(0,N.randomBytes)(K),Q=Z(q,J).encrypt(W),oe=Q.subarray(0,Q.length-_.AEAD_TAG_LENGTH),ne=Q.subarray(-_.AEAD_TAG_LENGTH);return(0,H.concatBytes)(J,ne,oe)}function j(Z,q,W,K){var J=K+_.AEAD_TAG_LENGTH,X=W.subarray(0,K),Q=W.subarray(K,J),oe=W.subarray(J),ne=Z(q,Uint8Array.from(X)),me=(0,H.concatBytes)(oe,Q);return ne.decrypt(me)}O.aesEncrypt=function D(Z,q){return F(!0,Z,q)},O.aesDecrypt=function $(Z,q){return F(!1,Z,q)},O.deriveKey=function M(Z){return(0,G.hkdf)(v.sha256,Z,void 0,void 0,32)}},32856:(xe,O)=>{"use strict";function I(_){if(!Number.isSafeInteger(_)||_<0)throw new Error(`Wrong positive integer: ${_}`)}function C(_){if("boolean"!=typeof _)throw new Error(`Expected boolean, not ${_}`)}function H(_,...T){if(!(_ instanceof Uint8Array))throw new Error("Expected Uint8Array");if(T.length>0&&!T.includes(_.length))throw new Error(`Expected Uint8Array of length ${T}, not of length=${_.length}`)}function N(_){if("function"!=typeof _||"function"!=typeof _.create)throw new Error("hash must be wrapped by utils.wrapConstructor");I(_.outputLen),I(_.blockLen)}function G(_,T=!0){if(_.destroyed)throw new Error("Hash instance has been destroyed");if(T&&_.finished)throw new Error("Hash#digest() has already been called")}function v(_,T){H(_);const D=T.outputLen;if(_.length<D)throw new Error(`digestInto() expects output buffer of length at least ${D}`)}Object.defineProperty(O,"__esModule",{value:!0}),O.output=O.exists=O.hash=O.bytes=O.bool=O.number=void 0,O.number=I,O.bool=C,O.bytes=H,O.hash=N,O.exists=G,O.output=v,O.default={number:I,bool:C,bytes:H,hash:N,exists:G,output:v}},17035:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.poly1305=O.wrapConstructorWithKey=void 0;const C=I(23790),H=I(32856),N=(B,_)=>255&B[_++]|(255&B[_++])<<8;class G{constructor(_){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,_=(0,C.toBytes)(_),(0,C.ensureBytes)(_,32);const T=N(_,0),D=N(_,2),$=N(_,4),M=N(_,6),F=N(_,8),k=N(_,10),j=N(_,12),Z=N(_,14);this.r[0]=8191&T,this.r[1]=8191&(T>>>13|D<<3),this.r[2]=7939&(D>>>10|$<<6),this.r[3]=8191&($>>>7|M<<9),this.r[4]=255&(M>>>4|F<<12),this.r[5]=F>>>1&8190,this.r[6]=8191&(F>>>14|k<<2),this.r[7]=8065&(k>>>11|j<<5),this.r[8]=8191&(j>>>8|Z<<8),this.r[9]=Z>>>5&127;for(let q=0;q<8;q++)this.pad[q]=N(_,16+2*q)}process(_,T,D=!1){const $=D?0:2048,{h:M,r:F}=this,k=F[0],j=F[1],Z=F[2],q=F[3],W=F[4],K=F[5],J=F[6],X=F[7],Q=F[8],oe=F[9],ne=N(_,T+0),me=N(_,T+2),pe=N(_,T+4),Ie=N(_,T+6),E=N(_,T+8),a=N(_,T+10),f=N(_,T+12),l=N(_,T+14);let h=M[0]+(8191&ne),g=M[1]+(8191&(ne>>>13|me<<3)),x=M[2]+(8191&(me>>>10|pe<<6)),P=M[3]+(8191&(pe>>>7|Ie<<9)),m=M[4]+(8191&(Ie>>>4|E<<12)),d=M[5]+(E>>>1&8191),p=M[6]+(8191&(E>>>14|a<<2)),V=M[7]+(8191&(a>>>11|f<<5)),L=M[8]+(8191&(f>>>8|l<<8)),Y=M[9]+(l>>>5|$),le=0,Se=le+h*k+g*(5*oe)+x*(5*Q)+P*(5*X)+m*(5*J);le=Se>>>13,Se&=8191,Se+=d*(5*K)+p*(5*W)+V*(5*q)+L*(5*Z)+Y*(5*j),le+=Se>>>13,Se&=8191;let Oe=le+h*j+g*k+x*(5*oe)+P*(5*Q)+m*(5*X);le=Oe>>>13,Oe&=8191,Oe+=d*(5*J)+p*(5*K)+V*(5*W)+L*(5*q)+Y*(5*Z),le+=Oe>>>13,Oe&=8191;let Ve=le+h*Z+g*j+x*k+P*(5*oe)+m*(5*Q);le=Ve>>>13,Ve&=8191,Ve+=d*(5*X)+p*(5*J)+V*(5*K)+L*(5*W)+Y*(5*q),le+=Ve>>>13,Ve&=8191;let Re=le+h*q+g*Z+x*j+P*k+m*(5*oe);le=Re>>>13,Re&=8191,Re+=d*(5*Q)+p*(5*X)+V*(5*J)+L*(5*K)+Y*(5*W),le+=Re>>>13,Re&=8191;let ye=le+h*W+g*q+x*Z+P*j+m*k;le=ye>>>13,ye&=8191,ye+=d*(5*oe)+p*(5*Q)+V*(5*X)+L*(5*J)+Y*(5*K),le+=ye>>>13,ye&=8191;let ke=le+h*K+g*W+x*q+P*Z+m*j;le=ke>>>13,ke&=8191,ke+=d*k+p*(5*oe)+V*(5*Q)+L*(5*X)+Y*(5*J),le+=ke>>>13,ke&=8191;let ve=le+h*J+g*K+x*W+P*q+m*Z;le=ve>>>13,ve&=8191,ve+=d*j+p*k+V*(5*oe)+L*(5*Q)+Y*(5*X),le+=ve>>>13,ve&=8191;let _e=le+h*X+g*J+x*K+P*W+m*q;le=_e>>>13,_e&=8191,_e+=d*Z+p*j+V*k+L*(5*oe)+Y*(5*Q),le+=_e>>>13,_e&=8191;let de=le+h*Q+g*X+x*J+P*K+m*W;le=de>>>13,de&=8191,de+=d*q+p*Z+V*j+L*k+Y*(5*oe),le+=de>>>13,de&=8191;let se=le+h*oe+g*Q+x*X+P*J+m*K;le=se>>>13,se&=8191,se+=d*W+p*q+V*Z+L*j+Y*k,le+=se>>>13,se&=8191,le=(le<<2)+le|0,le=le+Se|0,Se=8191&le,le>>>=13,Oe+=le,M[0]=Se,M[1]=Oe,M[2]=Ve,M[3]=Re,M[4]=ye,M[5]=ke,M[6]=ve,M[7]=_e,M[8]=de,M[9]=se}finalize(){const{h:_,pad:T}=this,D=new Uint16Array(10);let $=_[1]>>>13;_[1]&=8191;for(let k=2;k<10;k++)_[k]+=$,$=_[k]>>>13,_[k]&=8191;_[0]+=5*$,$=_[0]>>>13,_[0]&=8191,_[1]+=$,$=_[1]>>>13,_[1]&=8191,_[2]+=$,D[0]=_[0]+5,$=D[0]>>>13,D[0]&=8191;for(let k=1;k<10;k++)D[k]=_[k]+$,$=D[k]>>>13,D[k]&=8191;D[9]-=8192;let M=(1^$)-1;for(let k=0;k<10;k++)D[k]&=M;M=~M;for(let k=0;k<10;k++)_[k]=_[k]&M|D[k];_[0]=65535&(_[0]|_[1]<<13),_[1]=65535&(_[1]>>>3|_[2]<<10),_[2]=65535&(_[2]>>>6|_[3]<<7),_[3]=65535&(_[3]>>>9|_[4]<<4),_[4]=65535&(_[4]>>>12|_[5]<<1|_[6]<<14),_[5]=65535&(_[6]>>>2|_[7]<<11),_[6]=65535&(_[7]>>>5|_[8]<<8),_[7]=65535&(_[8]>>>8|_[9]<<5);let F=_[0]+T[0];_[0]=65535&F;for(let k=1;k<8;k++)F=(_[k]+T[k]|0)+(F>>>16)|0,_[k]=65535&F}update(_){H.default.exists(this);const{buffer:T,blockLen:D}=this,$=(_=(0,C.toBytes)(_)).length;for(let M=0;M<$;){const F=Math.min(D-this.pos,$-M);if(F!==D)T.set(_.subarray(M,M+F),this.pos),this.pos+=F,M+=F,this.pos===D&&(this.process(T,0,!1),this.pos=0);else for(;D<=$-M;M+=D)this.process(_,M)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(_){H.default.exists(this),H.default.output(_,this),this.finished=!0;const{buffer:T,h:D}=this;let{pos:$}=this;if($){for(T[$++]=1;$<16;$++)T[$]=0;this.process(T,0,!0)}this.finalize();let M=0;for(let F=0;F<8;F++)_[M++]=D[F]>>>0,_[M++]=D[F]>>>8;return _}digest(){const{buffer:_,outputLen:T}=this;this.digestInto(_);const D=_.slice(0,T);return this.destroy(),D}}function v(B){const _=(D,$)=>B($).update((0,C.toBytes)(D)).digest(),T=B(new Uint8Array(32));return _.outputLen=T.outputLen,_.blockLen=T.blockLen,_.create=D=>B(D),_}O.wrapConstructorWithKey=v,O.poly1305=v(B=>new G(B))},70580:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.salsaBasic=void 0;const C=I(32856),H=I(23790),N=(0,H.utf8ToBytes)("expand 16-byte k"),G=(0,H.utf8ToBytes)("expand 32-byte k"),v=(0,H.u32)(N),B=(0,H.u32)(G),_=D=>!(D.byteOffset%4);O.salsaBasic=D=>{const{core:$,rounds:M,counterRight:F,counterLen:k,allow128bitKeys:j,extendNonceFn:Z,blockLen:q}=(0,H.checkOpts)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},D);C.default.number(k),C.default.number(M),C.default.number(q),C.default.bool(F),C.default.bool(j);const W=q/4;if(q%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(K,J,X,Q,oe=0)=>{if(C.default.bytes(K),C.default.bytes(J),C.default.bytes(X),Q||(Q=new Uint8Array(X.length)),C.default.bytes(Q),C.default.number(oe),oe<0||oe>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(Q.length<X.length)throw new Error(`Salsa/ChaCha: output (${Q.length}) is shorter than data (${X.length})`);const ne=[];let me,pe;if(32===K.length)_(K)?me=K:(me=K.slice(),ne.push(me)),pe=B;else{if(16!==K.length||!j)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${K.length}`);me=new Uint8Array(32),me.set(K),me.set(K,16),pe=v,ne.push(me)}if(_(J)||(J=J.slice(),ne.push(J)),Z){if(J.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");me=Z(pe,me,J.subarray(0,16),new Uint8Array(32)),ne.push(me),J=J.subarray(16)}const Ie=16-k;if(J.length!==Ie)throw new Error(`Salsa/ChaCha: nonce must be ${Ie} or 16 bytes`);if(12!==Ie){const P=new Uint8Array(12);P.set(J,F?0:12-J.length),ne.push(J=P)}const E=new Uint8Array(q),a=(0,H.u32)(E),f=(0,H.u32)(me),l=(0,H.u32)(J),h=_(X)&&(0,H.u32)(X),g=_(Q)&&(0,H.u32)(Q);ne.push(a);const x=X.length;for(let P=0,m=oe;P<x;m++){if($(pe,f,l,a,m,M),m>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const d=Math.min(q,x-P);if(d===q&&g&&h){const p=P/4;if(P%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let V=0;V<W;V++)g[p+V]=h[p+V]^a[V];P+=q}else{for(let p=0;p<d;p++)Q[P+p]=X[P+p]^E[p];P+=d}}for(let P=0;P<ne.length;P++)ne[P].fill(0);return Q}}},59219:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.xchacha20poly1305=O.chacha20poly1305=O._poly1305_aead=O.chacha12=O.chacha8=O.xchacha20=O.chacha20=O.chacha20orig=O.hchacha=void 0;const C=I(23790),H=I(17035),N=I(70580),G=(M,F)=>M<<F|M>>>32-F;function v(M,F,k,j,Z,q=20){let W=M[0],K=M[1],J=M[2],X=M[3],Q=F[0],oe=F[1],ne=F[2],me=F[3],pe=F[4],Ie=F[5],E=F[6],a=F[7],f=Z,l=k[0],h=k[1],g=k[2],x=W,P=K,m=J,d=X,p=Q,V=oe,L=ne,Y=me,le=pe,Se=Ie,Oe=E,Ve=a,Re=f,ye=l,ke=h,ve=g;for(let de=0;de<q;de+=2)x=x+p|0,Re=G(Re^x,16),le=le+Re|0,p=G(p^le,12),x=x+p|0,Re=G(Re^x,8),le=le+Re|0,p=G(p^le,7),P=P+V|0,ye=G(ye^P,16),Se=Se+ye|0,V=G(V^Se,12),P=P+V|0,ye=G(ye^P,8),Se=Se+ye|0,V=G(V^Se,7),m=m+L|0,ke=G(ke^m,16),Oe=Oe+ke|0,L=G(L^Oe,12),m=m+L|0,ke=G(ke^m,8),Oe=Oe+ke|0,L=G(L^Oe,7),d=d+Y|0,ve=G(ve^d,16),Ve=Ve+ve|0,Y=G(Y^Ve,12),d=d+Y|0,ve=G(ve^d,8),Ve=Ve+ve|0,Y=G(Y^Ve,7),x=x+V|0,ve=G(ve^x,16),Oe=Oe+ve|0,V=G(V^Oe,12),x=x+V|0,ve=G(ve^x,8),Oe=Oe+ve|0,V=G(V^Oe,7),P=P+L|0,Re=G(Re^P,16),Ve=Ve+Re|0,L=G(L^Ve,12),P=P+L|0,Re=G(Re^P,8),Ve=Ve+Re|0,L=G(L^Ve,7),m=m+Y|0,ye=G(ye^m,16),le=le+ye|0,Y=G(Y^le,12),m=m+Y|0,ye=G(ye^m,8),le=le+ye|0,Y=G(Y^le,7),d=d+p|0,ke=G(ke^d,16),Se=Se+ke|0,p=G(p^Se,12),d=d+p|0,ke=G(ke^d,8),Se=Se+ke|0,p=G(p^Se,7);let _e=0;j[_e++]=W+x|0,j[_e++]=K+P|0,j[_e++]=J+m|0,j[_e++]=X+d|0,j[_e++]=Q+p|0,j[_e++]=oe+V|0,j[_e++]=ne+L|0,j[_e++]=me+Y|0,j[_e++]=pe+le|0,j[_e++]=Ie+Se|0,j[_e++]=E+Oe|0,j[_e++]=a+Ve|0,j[_e++]=f+Re|0,j[_e++]=l+ye|0,j[_e++]=h+ke|0,j[_e++]=g+ve|0}function B(M,F,k,j){const Z=(0,C.u32)(F),q=(0,C.u32)(k),W=(0,C.u32)(j);let K=M[0],J=M[1],X=M[2],Q=M[3],oe=Z[0],ne=Z[1],me=Z[2],pe=Z[3],Ie=Z[4],E=Z[5],a=Z[6],f=Z[7],l=q[0],h=q[1],g=q[2],x=q[3];for(let P=0;P<20;P+=2)K=K+oe|0,l=G(l^K,16),Ie=Ie+l|0,oe=G(oe^Ie,12),K=K+oe|0,l=G(l^K,8),Ie=Ie+l|0,oe=G(oe^Ie,7),J=J+ne|0,h=G(h^J,16),E=E+h|0,ne=G(ne^E,12),J=J+ne|0,h=G(h^J,8),E=E+h|0,ne=G(ne^E,7),X=X+me|0,g=G(g^X,16),a=a+g|0,me=G(me^a,12),X=X+me|0,g=G(g^X,8),a=a+g|0,me=G(me^a,7),Q=Q+pe|0,x=G(x^Q,16),f=f+x|0,pe=G(pe^f,12),Q=Q+pe|0,x=G(x^Q,8),f=f+x|0,pe=G(pe^f,7),K=K+ne|0,x=G(x^K,16),a=a+x|0,ne=G(ne^a,12),K=K+ne|0,x=G(x^K,8),a=a+x|0,ne=G(ne^a,7),J=J+me|0,l=G(l^J,16),f=f+l|0,me=G(me^f,12),J=J+me|0,l=G(l^J,8),f=f+l|0,me=G(me^f,7),X=X+pe|0,h=G(h^X,16),Ie=Ie+h|0,pe=G(pe^Ie,12),X=X+pe|0,h=G(h^X,8),Ie=Ie+h|0,pe=G(pe^Ie,7),Q=Q+oe|0,g=G(g^Q,16),E=E+g|0,oe=G(oe^E,12),Q=Q+oe|0,g=G(g^Q,8),E=E+g|0,oe=G(oe^E,7);return W[0]=K,W[1]=J,W[2]=X,W[3]=Q,W[4]=l,W[5]=h,W[6]=g,W[7]=x,j}O.hchacha=B,O.chacha20orig=(0,N.salsaBasic)({core:v,counterRight:!1,counterLen:8}),O.chacha20=(0,N.salsaBasic)({core:v,counterRight:!1,counterLen:4,allow128bitKeys:!1}),O.xchacha20=(0,N.salsaBasic)({core:v,counterRight:!1,counterLen:8,extendNonceFn:B,allow128bitKeys:!1}),O.chacha8=(0,N.salsaBasic)({core:v,counterRight:!1,counterLen:4,rounds:8}),O.chacha12=(0,N.salsaBasic)({core:v,counterRight:!1,counterLen:4,rounds:12});const _=new Uint8Array(16),T=(M,F)=>{M.update(F);const k=F.length%16;k&&M.update(_.subarray(k))},D=(M,F,k,j,Z)=>{const q=M(F,k,new Uint8Array(32)),W=H.poly1305.create(q);Z&&T(W,Z),T(W,j);const K=new Uint8Array(16),J=(0,C.createView)(K);(0,C.setBigUint64)(J,0,BigInt(Z?Z.length:0),!0),(0,C.setBigUint64)(J,8,BigInt(j.length),!0),W.update(K);const X=W.digest();return q.fill(0),X};O._poly1305_aead=M=>(F,k,j)=>((0,C.ensureBytes)(F,32),(0,C.ensureBytes)(k),{tagLength:16,encrypt:(q,W)=>{const K=q.length,J=K+16;W?(0,C.ensureBytes)(W,J):W=new Uint8Array(J),M(F,k,q,W,1);const X=D(M,F,k,W.subarray(0,-16),j);return W.set(X,K),W},decrypt:(q,W)=>{const K=q.length,J=K-16;if(K<16)throw new Error("encrypted data must be at least 16 bytes");W?(0,C.ensureBytes)(W,J):W=new Uint8Array(J);const X=q.subarray(0,-16),Q=q.subarray(-16),oe=D(M,F,k,X,j);if(!(0,C.equalBytes)(Q,oe))throw new Error("invalid tag");return M(F,k,X,W,1),W}}),O.chacha20poly1305=(0,O._poly1305_aead)(O.chacha20),O.xchacha20poly1305=(0,O._poly1305_aead)(O.xchacha20)},23790:(xe,O,I)=>{"use strict";var C=I(29293).default;Object.defineProperty(O,"__esModule",{value:!0}),O.setBigUint64=O.Hash=O.equalBytes=O.ensureBytes=O.checkOpts=O.concatBytes=O.toBytes=O.bytesToUtf8=O.utf8ToBytes=O.asyncLoop=O.nextTick=O.hexToBytes=O.bytesToHex=O.isLE=O.createView=O.u32=O.u16=O.u8=void 0;const H=ne=>ne instanceof Uint8Array;if(O.u8=ne=>new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength),O.u16=ne=>new Uint16Array(ne.buffer,ne.byteOffset,Math.floor(ne.byteLength/2)),O.u32=ne=>new Uint32Array(ne.buffer,ne.byteOffset,Math.floor(ne.byteLength/4)),O.createView=ne=>new DataView(ne.buffer,ne.byteOffset,ne.byteLength),O.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!O.isLE)throw new Error("Non little-endian hardware is not supported");const _=Array.from({length:256},(ne,me)=>me.toString(16).padStart(2,"0"));function F(){return(F=C(function*(ne,me,pe){let Ie=Date.now();for(let E=0;E<ne;E++){pe(E);const a=Date.now()-Ie;a>=0&&a<me||(yield(0,O.nextTick)(),Ie+=a)}})).apply(this,arguments)}function k(ne){if("string"!=typeof ne)throw new Error("utf8ToBytes expected string, got "+typeof ne);return new Uint8Array((new TextEncoder).encode(ne))}O.bytesToHex=function T(ne){if(!H(ne))throw new Error("Uint8Array expected");let me="";for(let pe=0;pe<ne.length;pe++)me+=_[ne[pe]];return me},O.hexToBytes=function D(ne){if("string"!=typeof ne)throw new Error("hex string expected, got "+typeof ne);const me=ne.length;if(me%2)throw new Error("padded hex string expected, got unpadded hex of length "+me);const pe=new Uint8Array(me/2);for(let Ie=0;Ie<pe.length;Ie++){const E=2*Ie,a=ne.slice(E,E+2),f=Number.parseInt(a,16);if(Number.isNaN(f)||f<0)throw new Error("Invalid byte sequence");pe[Ie]=f}return pe},O.nextTick=function(){var ne=C(function*(){});return function(){return ne.apply(this,arguments)}}(),O.asyncLoop=function M(ne,me,pe){return F.apply(this,arguments)},O.utf8ToBytes=k,O.bytesToUtf8=function j(ne){return(new TextDecoder).decode(ne)},O.toBytes=function Z(ne){if("string"==typeof ne&&(ne=k(ne)),!H(ne))throw new Error("expected Uint8Array, got "+typeof ne);return ne},O.concatBytes=function q(...ne){const me=new Uint8Array(ne.reduce((Ie,E)=>Ie+E.length,0));let pe=0;return ne.forEach(Ie=>{if(!H(Ie))throw new Error("Uint8Array expected");me.set(Ie,pe),pe+=Ie.length}),me},O.checkOpts=function K(ne,me){if(void 0!==me&&("object"!=typeof me||!(ne=>"[object Object]"===Object.prototype.toString.call(ne)&&ne.constructor===Object)(me)))throw new Error("options must be object or undefined");return Object.assign(ne,me)},O.ensureBytes=function J(ne,me){if(!(ne instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof me&&ne.length!==me)throw new Error(`Uint8Array length ${me} expected`)},O.equalBytes=function X(ne,me){if(ne.length!==me.length)throw new Error("equalBytes: Different size of Uint8Arrays");let pe=!0;for(let Ie=0;Ie<ne.length;Ie++)pe&&(pe=ne[Ie]===me[Ie]);return pe},O.Hash=class Q{},O.setBigUint64=function oe(ne,me,pe,Ie){if("function"==typeof ne.setBigUint64)return ne.setBigUint64(me,pe,Ie);const E=BigInt(32),a=BigInt(4294967295),f=Number(pe>>E&a),l=Number(pe&a),g=Ie?0:4;ne.setUint32(me+(Ie?4:0),f,Ie),ne.setUint32(me+g,l,Ie)}},89742:(xe,O)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.crypto=void 0,O.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},42098:(xe,O,I)=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getWebcryptoSubtle=O.randomBytes=void 0;const C=I(89742);O.randomBytes=function H(G=32){if(C.crypto&&"function"==typeof C.crypto.getRandomValues)return C.crypto.getRandomValues(new Uint8Array(G));throw new Error("crypto.getRandomValues must be defined")},O.getWebcryptoSubtle=function N(){if(C.crypto&&"object"==typeof C.crypto.subtle&&null!=C.crypto.subtle)return C.crypto.subtle;throw new Error("crypto.subtle must be defined")}},90518:(xe,O,I)=>{"use strict";var C=O;C.version=I(1636).rE,C.utils=I(3136),C.rand=I(35294),C.curve=I(8729),C.curves=I(23401),C.ec=I(29042),C.eddsa=I(83045)},98828:(xe,O,I)=>{"use strict";var C=I(88723),H=I(3136),N=H.getNAF,G=H.getJSF,v=H.assert;function B(T,D){this.type=T,this.p=new C(D.p,16),this.red=D.prime?C.red(D.prime):C.mont(this.p),this.zero=new C(0).toRed(this.red),this.one=new C(1).toRed(this.red),this.two=new C(2).toRed(this.red),this.n=D.n&&new C(D.n,16),this.g=D.g&&this.pointFromJSON(D.g,D.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var $=this.n&&this.p.div(this.n);!$||$.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function _(T,D){this.curve=T,this.type=D,this.precomputed=null}xe.exports=B,B.prototype.point=function(){throw new Error("Not implemented")},B.prototype.validate=function(){throw new Error("Not implemented")},B.prototype._fixedNafMul=function(D,$){v(D.precomputed);var M=D._getDoubles(),F=N($,1,this._bitLength),k=(1<<M.step+1)-(M.step%2==0?2:1);k/=3;var Z,q,j=[];for(Z=0;Z<F.length;Z+=M.step){q=0;for(var W=Z+M.step-1;W>=Z;W--)q=(q<<1)+F[W];j.push(q)}for(var K=this.jpoint(null,null,null),J=this.jpoint(null,null,null),X=k;X>0;X--){for(Z=0;Z<j.length;Z++)(q=j[Z])===X?J=J.mixedAdd(M.points[Z]):q===-X&&(J=J.mixedAdd(M.points[Z].neg()));K=K.add(J)}return K.toP()},B.prototype._wnafMul=function(D,$){for(var M=4,F=D._getNAFPoints(M),k=F.points,j=N($,M=F.wnd,this._bitLength),Z=this.jpoint(null,null,null),q=j.length-1;q>=0;q--){for(var W=0;q>=0&&0===j[q];q--)W++;if(q>=0&&W++,Z=Z.dblp(W),q<0)break;var K=j[q];v(0!==K),Z="affine"===D.type?Z.mixedAdd(K>0?k[K-1>>1]:k[-K-1>>1].neg()):Z.add(K>0?k[K-1>>1]:k[-K-1>>1].neg())}return"affine"===D.type?Z.toP():Z},B.prototype._wnafMulAdd=function(D,$,M,F,k){var K,J,X,j=this._wnafT1,Z=this._wnafT2,q=this._wnafT3,W=0;for(K=0;K<F;K++){var Q=(X=$[K])._getNAFPoints(D);j[K]=Q.wnd,Z[K]=Q.points}for(K=F-1;K>=1;K-=2){var oe=K-1,ne=K;if(1===j[oe]&&1===j[ne]){var me=[$[oe],null,null,$[ne]];0===$[oe].y.cmp($[ne].y)?(me[1]=$[oe].add($[ne]),me[2]=$[oe].toJ().mixedAdd($[ne].neg())):0===$[oe].y.cmp($[ne].y.redNeg())?(me[1]=$[oe].toJ().mixedAdd($[ne]),me[2]=$[oe].add($[ne].neg())):(me[1]=$[oe].toJ().mixedAdd($[ne]),me[2]=$[oe].toJ().mixedAdd($[ne].neg()));var pe=[-3,-1,-5,-7,0,7,5,1,3],Ie=G(M[oe],M[ne]);for(W=Math.max(Ie[0].length,W),q[oe]=new Array(W),q[ne]=new Array(W),J=0;J<W;J++)q[oe][J]=pe[3*(1+(0|Ie[0][J]))+(1+(0|Ie[1][J]))],q[ne][J]=0,Z[oe]=me}else q[oe]=N(M[oe],j[oe],this._bitLength),q[ne]=N(M[ne],j[ne],this._bitLength),W=Math.max(q[oe].length,W),W=Math.max(q[ne].length,W)}var f=this.jpoint(null,null,null),l=this._wnafT4;for(K=W;K>=0;K--){for(var h=0;K>=0;){var g=!0;for(J=0;J<F;J++)l[J]=0|q[J][K],0!==l[J]&&(g=!1);if(!g)break;h++,K--}if(K>=0&&h++,f=f.dblp(h),K<0)break;for(J=0;J<F;J++){var x=l[J];0!==x&&(x>0?X=Z[J][x-1>>1]:x<0&&(X=Z[J][-x-1>>1].neg()),f="affine"===X.type?f.mixedAdd(X):f.add(X))}}for(K=0;K<F;K++)Z[K]=null;return k?f:f.toP()},B.BasePoint=_,_.prototype.eq=function(){throw new Error("Not implemented")},_.prototype.validate=function(){return this.curve.validate(this)},B.prototype.decodePoint=function(D,$){D=H.toArray(D,$);var M=this.p.byteLength();if((4===D[0]||6===D[0]||7===D[0])&&D.length-1==2*M)return 6===D[0]?v(D[D.length-1]%2==0):7===D[0]&&v(D[D.length-1]%2==1),this.point(D.slice(1,1+M),D.slice(1+M,1+2*M));if((2===D[0]||3===D[0])&&D.length-1===M)return this.pointFromX(D.slice(1,1+M),3===D[0]);throw new Error("Unknown point format")},_.prototype.encodeCompressed=function(D){return this.encode(D,!0)},_.prototype._encode=function(D){var $=this.curve.p.byteLength(),M=this.getX().toArray("be",$);return D?[this.getY().isEven()?2:3].concat(M):[4].concat(M,this.getY().toArray("be",$))},_.prototype.encode=function(D,$){return H.encode(this._encode($),D)},_.prototype.precompute=function(D){if(this.precomputed)return this;var $={doubles:null,naf:null,beta:null};return $.naf=this._getNAFPoints(8),$.doubles=this._getDoubles(4,D),$.beta=this._getBeta(),this.precomputed=$,this},_.prototype._hasDoubles=function(D){if(!this.precomputed)return!1;var $=this.precomputed.doubles;return!!$&&$.points.length>=Math.ceil((D.bitLength()+1)/$.step)},_.prototype._getDoubles=function(D,$){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var M=[this],F=this,k=0;k<$;k+=D){for(var j=0;j<D;j++)F=F.dbl();M.push(F)}return{step:D,points:M}},_.prototype._getNAFPoints=function(D){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var $=[this],M=(1<<D)-1,F=1===M?null:this.dbl(),k=1;k<M;k++)$[k]=$[k-1].add(F);return{wnd:D,points:$}},_.prototype._getBeta=function(){return null},_.prototype.dblp=function(D){for(var $=this,M=0;M<D;M++)$=$.dbl();return $}},55537:(xe,O,I)=>{"use strict";var C=I(3136),H=I(88723),N=I(71993),G=I(98828),v=C.assert;function B(T){this.twisted=1!=(0|T.a),this.mOneA=this.twisted&&-1==(0|T.a),this.extended=this.mOneA,G.call(this,"edwards",T),this.a=new H(T.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new H(T.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new H(T.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),v(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|T.c)}function _(T,D,$,M,F){G.BasePoint.call(this,T,"projective"),null===D&&null===$&&null===M?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new H(D,16),this.y=new H($,16),this.z=M?new H(M,16):this.curve.one,this.t=F&&new H(F,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}N(B,G),xe.exports=B,B.prototype._mulA=function(D){return this.mOneA?D.redNeg():this.a.redMul(D)},B.prototype._mulC=function(D){return this.oneC?D:this.c.redMul(D)},B.prototype.jpoint=function(D,$,M,F){return this.point(D,$,M,F)},B.prototype.pointFromX=function(D,$){(D=new H(D,16)).red||(D=D.toRed(this.red));var M=D.redSqr(),F=this.c2.redSub(this.a.redMul(M)),k=this.one.redSub(this.c2.redMul(this.d).redMul(M)),j=F.redMul(k.redInvm()),Z=j.redSqrt();if(0!==Z.redSqr().redSub(j).cmp(this.zero))throw new Error("invalid point");var q=Z.fromRed().isOdd();return($&&!q||!$&&q)&&(Z=Z.redNeg()),this.point(D,Z)},B.prototype.pointFromY=function(D,$){(D=new H(D,16)).red||(D=D.toRed(this.red));var M=D.redSqr(),F=M.redSub(this.c2),k=M.redMul(this.d).redMul(this.c2).redSub(this.a),j=F.redMul(k.redInvm());if(0===j.cmp(this.zero)){if($)throw new Error("invalid point");return this.point(this.zero,D)}var Z=j.redSqrt();if(0!==Z.redSqr().redSub(j).cmp(this.zero))throw new Error("invalid point");return Z.fromRed().isOdd()!==$&&(Z=Z.redNeg()),this.point(Z,D)},B.prototype.validate=function(D){if(D.isInfinity())return!0;D.normalize();var $=D.x.redSqr(),M=D.y.redSqr(),F=$.redMul(this.a).redAdd(M),k=this.c2.redMul(this.one.redAdd(this.d.redMul($).redMul(M)));return 0===F.cmp(k)},N(_,G.BasePoint),B.prototype.pointFromJSON=function(D){return _.fromJSON(this,D)},B.prototype.point=function(D,$,M,F){return new _(this,D,$,M,F)},_.fromJSON=function(D,$){return new _(D,$[0],$[1],$[2])},_.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},_.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},_.prototype._extDbl=function(){var D=this.x.redSqr(),$=this.y.redSqr(),M=this.z.redSqr();M=M.redIAdd(M);var F=this.curve._mulA(D),k=this.x.redAdd(this.y).redSqr().redISub(D).redISub($),j=F.redAdd($),Z=j.redSub(M),q=F.redSub($),W=k.redMul(Z),K=j.redMul(q),J=k.redMul(q),X=Z.redMul(j);return this.curve.point(W,K,X,J)},_.prototype._projDbl=function(){var F,k,j,Z,q,W,D=this.x.redAdd(this.y).redSqr(),$=this.x.redSqr(),M=this.y.redSqr();if(this.curve.twisted){var K=(Z=this.curve._mulA($)).redAdd(M);this.zOne?(F=D.redSub($).redSub(M).redMul(K.redSub(this.curve.two)),k=K.redMul(Z.redSub(M)),j=K.redSqr().redSub(K).redSub(K)):(q=this.z.redSqr(),W=K.redSub(q).redISub(q),F=D.redSub($).redISub(M).redMul(W),k=K.redMul(Z.redSub(M)),j=K.redMul(W))}else Z=$.redAdd(M),q=this.curve._mulC(this.z).redSqr(),W=Z.redSub(q).redSub(q),F=this.curve._mulC(D.redISub(Z)).redMul(W),k=this.curve._mulC(Z).redMul($.redISub(M)),j=Z.redMul(W);return this.curve.point(F,k,j)},_.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},_.prototype._extAdd=function(D){var $=this.y.redSub(this.x).redMul(D.y.redSub(D.x)),M=this.y.redAdd(this.x).redMul(D.y.redAdd(D.x)),F=this.t.redMul(this.curve.dd).redMul(D.t),k=this.z.redMul(D.z.redAdd(D.z)),j=M.redSub($),Z=k.redSub(F),q=k.redAdd(F),W=M.redAdd($),K=j.redMul(Z),J=q.redMul(W),X=j.redMul(W),Q=Z.redMul(q);return this.curve.point(K,J,Q,X)},_.prototype._projAdd=function(D){var J,X,$=this.z.redMul(D.z),M=$.redSqr(),F=this.x.redMul(D.x),k=this.y.redMul(D.y),j=this.curve.d.redMul(F).redMul(k),Z=M.redSub(j),q=M.redAdd(j),W=this.x.redAdd(this.y).redMul(D.x.redAdd(D.y)).redISub(F).redISub(k),K=$.redMul(Z).redMul(W);return this.curve.twisted?(J=$.redMul(q).redMul(k.redSub(this.curve._mulA(F))),X=Z.redMul(q)):(J=$.redMul(q).redMul(k.redSub(F)),X=this.curve._mulC(Z).redMul(q)),this.curve.point(K,J,X)},_.prototype.add=function(D){return this.isInfinity()?D:D.isInfinity()?this:this.curve.extended?this._extAdd(D):this._projAdd(D)},_.prototype.mul=function(D){return this._hasDoubles(D)?this.curve._fixedNafMul(this,D):this.curve._wnafMul(this,D)},_.prototype.mulAdd=function(D,$,M){return this.curve._wnafMulAdd(1,[this,$],[D,M],2,!1)},_.prototype.jmulAdd=function(D,$,M){return this.curve._wnafMulAdd(1,[this,$],[D,M],2,!0)},_.prototype.normalize=function(){if(this.zOne)return this;var D=this.z.redInvm();return this.x=this.x.redMul(D),this.y=this.y.redMul(D),this.t&&(this.t=this.t.redMul(D)),this.z=this.curve.one,this.zOne=!0,this},_.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},_.prototype.getX=function(){return this.normalize(),this.x.fromRed()},_.prototype.getY=function(){return this.normalize(),this.y.fromRed()},_.prototype.eq=function(D){return this===D||0===this.getX().cmp(D.getX())&&0===this.getY().cmp(D.getY())},_.prototype.eqXToP=function(D){var $=D.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp($))return!0;for(var M=D.clone(),F=this.curve.redN.redMul(this.z);;){if(M.iadd(this.curve.n),M.cmp(this.curve.p)>=0)return!1;if($.redIAdd(F),0===this.x.cmp($))return!0}},_.prototype.toP=_.prototype.normalize,_.prototype.mixedAdd=_.prototype.add},8729:(xe,O,I)=>{"use strict";var C=O;C.base=I(98828),C.short=I(68075),C.mont=I(64947),C.edwards=I(55537)},64947:(xe,O,I)=>{"use strict";var C=I(88723),H=I(71993),N=I(98828),G=I(3136);function v(_){N.call(this,"mont",_),this.a=new C(_.a,16).toRed(this.red),this.b=new C(_.b,16).toRed(this.red),this.i4=new C(4).toRed(this.red).redInvm(),this.two=new C(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function B(_,T,D){N.BasePoint.call(this,_,"projective"),null===T&&null===D?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new C(T,16),this.z=new C(D,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}H(v,N),xe.exports=v,v.prototype.validate=function(T){var D=T.normalize().x,$=D.redSqr(),M=$.redMul(D).redAdd($.redMul(this.a)).redAdd(D);return 0===M.redSqrt().redSqr().cmp(M)},H(B,N.BasePoint),v.prototype.decodePoint=function(T,D){return this.point(G.toArray(T,D),1)},v.prototype.point=function(T,D){return new B(this,T,D)},v.prototype.pointFromJSON=function(T){return B.fromJSON(this,T)},B.prototype.precompute=function(){},B.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},B.fromJSON=function(T,D){return new B(T,D[0],D[1]||T.one)},B.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},B.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},B.prototype.dbl=function(){var D=this.x.redAdd(this.z).redSqr(),M=this.x.redSub(this.z).redSqr(),F=D.redSub(M),k=D.redMul(M),j=F.redMul(M.redAdd(this.curve.a24.redMul(F)));return this.curve.point(k,j)},B.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},B.prototype.diffAdd=function(T,D){var $=this.x.redAdd(this.z),M=this.x.redSub(this.z),F=T.x.redAdd(T.z),j=T.x.redSub(T.z).redMul($),Z=F.redMul(M),q=D.z.redMul(j.redAdd(Z).redSqr()),W=D.x.redMul(j.redISub(Z).redSqr());return this.curve.point(q,W)},B.prototype.mul=function(T){for(var D=T.clone(),$=this,M=this.curve.point(null,null),k=[];0!==D.cmpn(0);D.iushrn(1))k.push(D.andln(1));for(var j=k.length-1;j>=0;j--)0===k[j]?($=$.diffAdd(M,this),M=M.dbl()):(M=$.diffAdd(M,this),$=$.dbl());return M},B.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},B.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},B.prototype.eq=function(T){return 0===this.getX().cmp(T.getX())},B.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},B.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},68075:(xe,O,I)=>{"use strict";var C=I(3136),H=I(88723),N=I(71993),G=I(98828),v=C.assert;function B(D){G.call(this,"short",D),this.a=new H(D.a,16).toRed(this.red),this.b=new H(D.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(D),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function _(D,$,M,F){G.BasePoint.call(this,D,"affine"),null===$&&null===M?(this.x=null,this.y=null,this.inf=!0):(this.x=new H($,16),this.y=new H(M,16),F&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function T(D,$,M,F){G.BasePoint.call(this,D,"jacobian"),null===$&&null===M&&null===F?(this.x=this.curve.one,this.y=this.curve.one,this.z=new H(0)):(this.x=new H($,16),this.y=new H(M,16),this.z=new H(F,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}N(B,G),xe.exports=B,B.prototype._getEndomorphism=function($){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var M,F;if($.beta)M=new H($.beta,16).toRed(this.red);else{var k=this._getEndoRoots(this.p);M=(M=k[0].cmp(k[1])<0?k[0]:k[1]).toRed(this.red)}if($.lambda)F=new H($.lambda,16);else{var j=this._getEndoRoots(this.n);0===this.g.mul(j[0]).x.cmp(this.g.x.redMul(M))?F=j[0]:v(0===this.g.mul(F=j[1]).x.cmp(this.g.x.redMul(M)))}return{beta:M,lambda:F,basis:$.basis?$.basis.map(function(q){return{a:new H(q.a,16),b:new H(q.b,16)}}):this._getEndoBasis(F)}}},B.prototype._getEndoRoots=function($){var M=$===this.p?this.red:H.mont($),F=new H(2).toRed(M).redInvm(),k=F.redNeg(),j=new H(3).toRed(M).redNeg().redSqrt().redMul(F);return[k.redAdd(j).fromRed(),k.redSub(j).fromRed()]},B.prototype._getEndoBasis=function($){for(var K,J,X,Q,oe,ne,me,Ie,E,M=this.n.ushrn(Math.floor(this.n.bitLength()/2)),F=$,k=this.n.clone(),j=new H(1),Z=new H(0),q=new H(0),W=new H(1),pe=0;0!==F.cmpn(0);){var a=k.div(F);Ie=k.sub(a.mul(F)),E=q.sub(a.mul(j));var f=W.sub(a.mul(Z));if(!X&&Ie.cmp(M)<0)K=me.neg(),J=j,X=Ie.neg(),Q=E;else if(X&&2==++pe)break;me=Ie,k=F,F=Ie,q=j,j=E,W=Z,Z=f}oe=Ie.neg(),ne=E;var l=X.sqr().add(Q.sqr());return oe.sqr().add(ne.sqr()).cmp(l)>=0&&(oe=K,ne=J),X.negative&&(X=X.neg(),Q=Q.neg()),oe.negative&&(oe=oe.neg(),ne=ne.neg()),[{a:X,b:Q},{a:oe,b:ne}]},B.prototype._endoSplit=function($){var M=this.endo.basis,F=M[0],k=M[1],j=k.b.mul($).divRound(this.n),Z=F.b.neg().mul($).divRound(this.n),q=j.mul(F.a),W=Z.mul(k.a),K=j.mul(F.b),J=Z.mul(k.b);return{k1:$.sub(q).sub(W),k2:K.add(J).neg()}},B.prototype.pointFromX=function($,M){($=new H($,16)).red||($=$.toRed(this.red));var F=$.redSqr().redMul($).redIAdd($.redMul(this.a)).redIAdd(this.b),k=F.redSqrt();if(0!==k.redSqr().redSub(F).cmp(this.zero))throw new Error("invalid point");var j=k.fromRed().isOdd();return(M&&!j||!M&&j)&&(k=k.redNeg()),this.point($,k)},B.prototype.validate=function($){if($.inf)return!0;var M=$.x,F=$.y,k=this.a.redMul(M),j=M.redSqr().redMul(M).redIAdd(k).redIAdd(this.b);return 0===F.redSqr().redISub(j).cmpn(0)},B.prototype._endoWnafMulAdd=function($,M,F){for(var k=this._endoWnafT1,j=this._endoWnafT2,Z=0;Z<$.length;Z++){var q=this._endoSplit(M[Z]),W=$[Z],K=W._getBeta();q.k1.negative&&(q.k1.ineg(),W=W.neg(!0)),q.k2.negative&&(q.k2.ineg(),K=K.neg(!0)),k[2*Z]=W,k[2*Z+1]=K,j[2*Z]=q.k1,j[2*Z+1]=q.k2}for(var J=this._wnafMulAdd(1,k,j,2*Z,F),X=0;X<2*Z;X++)k[X]=null,j[X]=null;return J},N(_,G.BasePoint),B.prototype.point=function($,M,F){return new _(this,$,M,F)},B.prototype.pointFromJSON=function($,M){return _.fromJSON(this,$,M)},_.prototype._getBeta=function(){if(this.curve.endo){var $=this.precomputed;if($&&$.beta)return $.beta;var M=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if($){var F=this.curve,k=function(j){return F.point(j.x.redMul(F.endo.beta),j.y)};$.beta=M,M.precomputed={beta:null,naf:$.naf&&{wnd:$.naf.wnd,points:$.naf.points.map(k)},doubles:$.doubles&&{step:$.doubles.step,points:$.doubles.points.map(k)}}}return M}},_.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},_.fromJSON=function($,M,F){"string"==typeof M&&(M=JSON.parse(M));var k=$.point(M[0],M[1],F);if(!M[2])return k;function j(q){return $.point(q[0],q[1],F)}var Z=M[2];return k.precomputed={beta:null,doubles:Z.doubles&&{step:Z.doubles.step,points:[k].concat(Z.doubles.points.map(j))},naf:Z.naf&&{wnd:Z.naf.wnd,points:[k].concat(Z.naf.points.map(j))}},k},_.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},_.prototype.isInfinity=function(){return this.inf},_.prototype.add=function($){if(this.inf)return $;if($.inf)return this;if(this.eq($))return this.dbl();if(this.neg().eq($))return this.curve.point(null,null);if(0===this.x.cmp($.x))return this.curve.point(null,null);var M=this.y.redSub($.y);0!==M.cmpn(0)&&(M=M.redMul(this.x.redSub($.x).redInvm()));var F=M.redSqr().redISub(this.x).redISub($.x),k=M.redMul(this.x.redSub(F)).redISub(this.y);return this.curve.point(F,k)},_.prototype.dbl=function(){if(this.inf)return this;var $=this.y.redAdd(this.y);if(0===$.cmpn(0))return this.curve.point(null,null);var M=this.curve.a,F=this.x.redSqr(),k=$.redInvm(),j=F.redAdd(F).redIAdd(F).redIAdd(M).redMul(k),Z=j.redSqr().redISub(this.x.redAdd(this.x)),q=j.redMul(this.x.redSub(Z)).redISub(this.y);return this.curve.point(Z,q)},_.prototype.getX=function(){return this.x.fromRed()},_.prototype.getY=function(){return this.y.fromRed()},_.prototype.mul=function($){return $=new H($,16),this.isInfinity()?this:this._hasDoubles($)?this.curve._fixedNafMul(this,$):this.curve.endo?this.curve._endoWnafMulAdd([this],[$]):this.curve._wnafMul(this,$)},_.prototype.mulAdd=function($,M,F){var k=[this,M],j=[$,F];return this.curve.endo?this.curve._endoWnafMulAdd(k,j):this.curve._wnafMulAdd(1,k,j,2)},_.prototype.jmulAdd=function($,M,F){var k=[this,M],j=[$,F];return this.curve.endo?this.curve._endoWnafMulAdd(k,j,!0):this.curve._wnafMulAdd(1,k,j,2,!0)},_.prototype.eq=function($){return this===$||this.inf===$.inf&&(this.inf||0===this.x.cmp($.x)&&0===this.y.cmp($.y))},_.prototype.neg=function($){if(this.inf)return this;var M=this.curve.point(this.x,this.y.redNeg());if($&&this.precomputed){var F=this.precomputed,k=function(j){return j.neg()};M.precomputed={naf:F.naf&&{wnd:F.naf.wnd,points:F.naf.points.map(k)},doubles:F.doubles&&{step:F.doubles.step,points:F.doubles.points.map(k)}}}return M},_.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},N(T,G.BasePoint),B.prototype.jpoint=function($,M,F){return new T(this,$,M,F)},T.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var $=this.z.redInvm(),M=$.redSqr(),F=this.x.redMul(M),k=this.y.redMul(M).redMul($);return this.curve.point(F,k)},T.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},T.prototype.add=function($){if(this.isInfinity())return $;if($.isInfinity())return this;var M=$.z.redSqr(),F=this.z.redSqr(),k=this.x.redMul(M),j=$.x.redMul(F),Z=this.y.redMul(M.redMul($.z)),q=$.y.redMul(F.redMul(this.z)),W=k.redSub(j),K=Z.redSub(q);if(0===W.cmpn(0))return 0!==K.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var J=W.redSqr(),X=J.redMul(W),Q=k.redMul(J),oe=K.redSqr().redIAdd(X).redISub(Q).redISub(Q),ne=K.redMul(Q.redISub(oe)).redISub(Z.redMul(X)),me=this.z.redMul($.z).redMul(W);return this.curve.jpoint(oe,ne,me)},T.prototype.mixedAdd=function($){if(this.isInfinity())return $.toJ();if($.isInfinity())return this;var M=this.z.redSqr(),F=this.x,k=$.x.redMul(M),j=this.y,Z=$.y.redMul(M).redMul(this.z),q=F.redSub(k),W=j.redSub(Z);if(0===q.cmpn(0))return 0!==W.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var K=q.redSqr(),J=K.redMul(q),X=F.redMul(K),Q=W.redSqr().redIAdd(J).redISub(X).redISub(X),oe=W.redMul(X.redISub(Q)).redISub(j.redMul(J)),ne=this.z.redMul(q);return this.curve.jpoint(Q,oe,ne)},T.prototype.dblp=function($){if(0===$)return this;if(this.isInfinity())return this;if(!$)return this.dbl();var M;if(this.curve.zeroA||this.curve.threeA){var F=this;for(M=0;M<$;M++)F=F.dbl();return F}var k=this.curve.a,j=this.curve.tinv,Z=this.x,q=this.y,W=this.z,K=W.redSqr().redSqr(),J=q.redAdd(q);for(M=0;M<$;M++){var X=Z.redSqr(),Q=J.redSqr(),oe=Q.redSqr(),ne=X.redAdd(X).redIAdd(X).redIAdd(k.redMul(K)),me=Z.redMul(Q),pe=ne.redSqr().redISub(me.redAdd(me)),Ie=me.redISub(pe),E=ne.redMul(Ie);E=E.redIAdd(E).redISub(oe);var a=J.redMul(W);M+1<$&&(K=K.redMul(oe)),Z=pe,W=a,J=E}return this.curve.jpoint(Z,J.redMul(j),W)},T.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},T.prototype._zeroDbl=function(){var $,M,F;if(this.zOne){var k=this.x.redSqr(),j=this.y.redSqr(),Z=j.redSqr(),q=this.x.redAdd(j).redSqr().redISub(k).redISub(Z);q=q.redIAdd(q);var W=k.redAdd(k).redIAdd(k),K=W.redSqr().redISub(q).redISub(q),J=Z.redIAdd(Z);J=(J=J.redIAdd(J)).redIAdd(J),$=K,M=W.redMul(q.redISub(K)).redISub(J),F=this.y.redAdd(this.y)}else{var X=this.x.redSqr(),Q=this.y.redSqr(),oe=Q.redSqr(),ne=this.x.redAdd(Q).redSqr().redISub(X).redISub(oe);ne=ne.redIAdd(ne);var me=X.redAdd(X).redIAdd(X),pe=me.redSqr(),Ie=oe.redIAdd(oe);Ie=(Ie=Ie.redIAdd(Ie)).redIAdd(Ie),$=pe.redISub(ne).redISub(ne),M=me.redMul(ne.redISub($)).redISub(Ie),F=(F=this.y.redMul(this.z)).redIAdd(F)}return this.curve.jpoint($,M,F)},T.prototype._threeDbl=function(){var $,M,F;if(this.zOne){var k=this.x.redSqr(),j=this.y.redSqr(),Z=j.redSqr(),q=this.x.redAdd(j).redSqr().redISub(k).redISub(Z);q=q.redIAdd(q);var W=k.redAdd(k).redIAdd(k).redIAdd(this.curve.a),K=W.redSqr().redISub(q).redISub(q);$=K;var J=Z.redIAdd(Z);J=(J=J.redIAdd(J)).redIAdd(J),M=W.redMul(q.redISub(K)).redISub(J),F=this.y.redAdd(this.y)}else{var X=this.z.redSqr(),Q=this.y.redSqr(),oe=this.x.redMul(Q),ne=this.x.redSub(X).redMul(this.x.redAdd(X));ne=ne.redAdd(ne).redIAdd(ne);var me=oe.redIAdd(oe),pe=(me=me.redIAdd(me)).redAdd(me);$=ne.redSqr().redISub(pe),F=this.y.redAdd(this.z).redSqr().redISub(Q).redISub(X);var Ie=Q.redSqr();Ie=(Ie=(Ie=Ie.redIAdd(Ie)).redIAdd(Ie)).redIAdd(Ie),M=ne.redMul(me.redISub($)).redISub(Ie)}return this.curve.jpoint($,M,F)},T.prototype._dbl=function(){var $=this.curve.a,M=this.x,F=this.y,k=this.z,j=k.redSqr().redSqr(),Z=M.redSqr(),q=F.redSqr(),W=Z.redAdd(Z).redIAdd(Z).redIAdd($.redMul(j)),K=M.redAdd(M),J=(K=K.redIAdd(K)).redMul(q),X=W.redSqr().redISub(J.redAdd(J)),Q=J.redISub(X),oe=q.redSqr();oe=(oe=(oe=oe.redIAdd(oe)).redIAdd(oe)).redIAdd(oe);var ne=W.redMul(Q).redISub(oe),me=F.redAdd(F).redMul(k);return this.curve.jpoint(X,ne,me)},T.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var $=this.x.redSqr(),M=this.y.redSqr(),F=this.z.redSqr(),k=M.redSqr(),j=$.redAdd($).redIAdd($),Z=j.redSqr(),q=this.x.redAdd(M).redSqr().redISub($).redISub(k),W=(q=(q=(q=q.redIAdd(q)).redAdd(q).redIAdd(q)).redISub(Z)).redSqr(),K=k.redIAdd(k);K=(K=(K=K.redIAdd(K)).redIAdd(K)).redIAdd(K);var J=j.redIAdd(q).redSqr().redISub(Z).redISub(W).redISub(K),X=M.redMul(J);X=(X=X.redIAdd(X)).redIAdd(X);var Q=this.x.redMul(W).redISub(X);Q=(Q=Q.redIAdd(Q)).redIAdd(Q);var oe=this.y.redMul(J.redMul(K.redISub(J)).redISub(q.redMul(W)));oe=(oe=(oe=oe.redIAdd(oe)).redIAdd(oe)).redIAdd(oe);var ne=this.z.redAdd(q).redSqr().redISub(F).redISub(W);return this.curve.jpoint(Q,oe,ne)},T.prototype.mul=function($,M){return $=new H($,M),this.curve._wnafMul(this,$)},T.prototype.eq=function($){if("affine"===$.type)return this.eq($.toJ());if(this===$)return!0;var M=this.z.redSqr(),F=$.z.redSqr();if(0!==this.x.redMul(F).redISub($.x.redMul(M)).cmpn(0))return!1;var k=M.redMul(this.z),j=F.redMul($.z);return 0===this.y.redMul(j).redISub($.y.redMul(k)).cmpn(0)},T.prototype.eqXToP=function($){var M=this.z.redSqr(),F=$.toRed(this.curve.red).redMul(M);if(0===this.x.cmp(F))return!0;for(var k=$.clone(),j=this.curve.redN.redMul(M);;){if(k.iadd(this.curve.n),k.cmp(this.curve.p)>=0)return!1;if(F.redIAdd(j),0===this.x.cmp(F))return!0}},T.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},T.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},23401:(xe,O,I)=>{"use strict";var T,C=O,H=I(52529),N=I(8729),v=I(3136).assert;function B(D){this.curve="short"===D.type?new N.short(D):"edwards"===D.type?new N.edwards(D):new N.mont(D),this.g=this.curve.g,this.n=this.curve.n,this.hash=D.hash,v(this.g.validate(),"Invalid curve"),v(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function _(D,$){Object.defineProperty(C,D,{configurable:!0,enumerable:!0,get:function(){var M=new B($);return Object.defineProperty(C,D,{configurable:!0,enumerable:!0,value:M}),M}})}C.PresetCurve=B,_("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:H.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),_("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:H.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),_("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:H.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),_("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:H.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),_("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:H.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),_("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:H.sha256,gRed:!1,g:["9"]}),_("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:H.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{T=I(51416)}catch{T=void 0}_("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:H.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",T]})},29042:(xe,O,I)=>{"use strict";var C=I(88723),H=I(33556),N=I(3136),G=I(23401),v=I(35294),B=N.assert,_=I(60541),T=I(40484);function D($){if(!(this instanceof D))return new D($);"string"==typeof $&&(B(Object.prototype.hasOwnProperty.call(G,$),"Unknown curve "+$),$=G[$]),$ instanceof G.PresetCurve&&($={curve:$}),this.curve=$.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=$.curve.g,this.g.precompute($.curve.n.bitLength()+1),this.hash=$.hash||$.curve.hash}xe.exports=D,D.prototype.keyPair=function(M){return new _(this,M)},D.prototype.keyFromPrivate=function(M,F){return _.fromPrivate(this,M,F)},D.prototype.keyFromPublic=function(M,F){return _.fromPublic(this,M,F)},D.prototype.genKeyPair=function(M){M||(M={});for(var F=new H({hash:this.hash,pers:M.pers,persEnc:M.persEnc||"utf8",entropy:M.entropy||v(this.hash.hmacStrength),entropyEnc:M.entropy&&M.entropyEnc||"utf8",nonce:this.n.toArray()}),k=this.n.byteLength(),j=this.n.sub(new C(2));;){var Z=new C(F.generate(k));if(!(Z.cmp(j)>0))return Z.iaddn(1),this.keyFromPrivate(Z)}},D.prototype._truncateToN=function(M,F){var k=8*M.byteLength()-this.n.bitLength();return k>0&&(M=M.ushrn(k)),!F&&M.cmp(this.n)>=0?M.sub(this.n):M},D.prototype.sign=function(M,F,k,j){"object"==typeof k&&(j=k,k=null),j||(j={}),F=this.keyFromPrivate(F,k),M=this._truncateToN(new C(M,16));for(var Z=this.n.byteLength(),q=F.getPrivate().toArray("be",Z),W=M.toArray("be",Z),K=new H({hash:this.hash,entropy:q,nonce:W,pers:j.pers,persEnc:j.persEnc||"utf8"}),J=this.n.sub(new C(1)),X=0;;X++){var Q=j.k?j.k(X):new C(K.generate(this.n.byteLength()));if(!((Q=this._truncateToN(Q,!0)).cmpn(1)<=0||Q.cmp(J)>=0)){var oe=this.g.mul(Q);if(!oe.isInfinity()){var ne=oe.getX(),me=ne.umod(this.n);if(0!==me.cmpn(0)){var pe=Q.invm(this.n).mul(me.mul(F.getPrivate()).iadd(M));if(0!==(pe=pe.umod(this.n)).cmpn(0)){var Ie=(oe.getY().isOdd()?1:0)|(0!==ne.cmp(me)?2:0);return j.canonical&&pe.cmp(this.nh)>0&&(pe=this.n.sub(pe),Ie^=1),new T({r:me,s:pe,recoveryParam:Ie})}}}}}},D.prototype.verify=function(M,F,k,j){M=this._truncateToN(new C(M,16)),k=this.keyFromPublic(k,j);var Z=(F=new T(F,"hex")).r,q=F.s;if(Z.cmpn(1)<0||Z.cmp(this.n)>=0||q.cmpn(1)<0||q.cmp(this.n)>=0)return!1;var X,W=q.invm(this.n),K=W.mul(M).umod(this.n),J=W.mul(Z).umod(this.n);return this.curve._maxwellTrick?!(X=this.g.jmulAdd(K,k.getPublic(),J)).isInfinity()&&X.eqXToP(Z):!(X=this.g.mulAdd(K,k.getPublic(),J)).isInfinity()&&0===X.getX().umod(this.n).cmp(Z)},D.prototype.recoverPubKey=function($,M,F,k){B((3&F)===F,"The recovery param is more than two bits"),M=new T(M,k);var j=this.n,Z=new C($),q=M.r,W=M.s,K=1&F,J=F>>1;if(q.cmp(this.curve.p.umod(this.curve.n))>=0&&J)throw new Error("Unable to find sencond key candinate");q=this.curve.pointFromX(J?q.add(this.curve.n):q,K);var X=M.r.invm(j),Q=j.sub(Z).mul(X).umod(j),oe=W.mul(X).umod(j);return this.g.mulAdd(Q,q,oe)},D.prototype.getKeyRecoveryParam=function($,M,F,k){if(null!==(M=new T(M,k)).recoveryParam)return M.recoveryParam;for(var j=0;j<4;j++){var Z;try{Z=this.recoverPubKey($,M,j)}catch{continue}if(Z.eq(F))return j}throw new Error("Unable to find valid recovery factor")}},60541:(xe,O,I)=>{"use strict";var C=I(88723),N=I(3136).assert;function G(v,B){this.ec=v,this.priv=null,this.pub=null,B.priv&&this._importPrivate(B.priv,B.privEnc),B.pub&&this._importPublic(B.pub,B.pubEnc)}xe.exports=G,G.fromPublic=function(B,_,T){return _ instanceof G?_:new G(B,{pub:_,pubEnc:T})},G.fromPrivate=function(B,_,T){return _ instanceof G?_:new G(B,{priv:_,privEnc:T})},G.prototype.validate=function(){var B=this.getPublic();return B.isInfinity()?{result:!1,reason:"Invalid public key"}:B.validate()?B.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},G.prototype.getPublic=function(B,_){return"string"==typeof B&&(_=B,B=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),_?this.pub.encode(_,B):this.pub},G.prototype.getPrivate=function(B){return"hex"===B?this.priv.toString(16,2):this.priv},G.prototype._importPrivate=function(B,_){this.priv=new C(B,_||16),this.priv=this.priv.umod(this.ec.curve.n)},G.prototype._importPublic=function(B,_){if(B.x||B.y)return"mont"===this.ec.curve.type?N(B.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&N(B.x&&B.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(B.x,B.y));this.pub=this.ec.curve.decodePoint(B,_)},G.prototype.derive=function(B){return B.validate()||N(B.validate(),"public point not validated"),B.mul(this.priv).getX()},G.prototype.sign=function(B,_,T){return this.ec.sign(B,this,_,T)},G.prototype.verify=function(B,_){return this.ec.verify(B,_,this)},G.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},40484:(xe,O,I)=>{"use strict";var C=I(88723),H=I(3136),N=H.assert;function G(D,$){if(D instanceof G)return D;this._importDER(D,$)||(N(D.r&&D.s,"Signature without r or s"),this.r=new C(D.r,16),this.s=new C(D.s,16),this.recoveryParam=void 0===D.recoveryParam?null:D.recoveryParam)}function v(){this.place=0}function B(D,$){var M=D[$.place++];if(!(128&M))return M;var F=15&M;if(0===F||F>4)return!1;for(var k=0,j=0,Z=$.place;j<F;j++,Z++)k<<=8,k|=D[Z],k>>>=0;return!(k<=127)&&($.place=Z,k)}function _(D){for(var $=0,M=D.length-1;!D[$]&&!(128&D[$+1])&&$<M;)$++;return 0===$?D:D.slice($)}function T(D,$){if($<128)D.push($);else{var M=1+(Math.log($)/Math.LN2>>>3);for(D.push(128|M);--M;)D.push($>>>(M<<3)&255);D.push($)}}xe.exports=G,G.prototype._importDER=function($,M){$=H.toArray($,M);var F=new v;if(48!==$[F.place++])return!1;var k=B($,F);if(!1===k||k+F.place!==$.length||2!==$[F.place++])return!1;var j=B($,F);if(!1===j)return!1;var Z=$.slice(F.place,j+F.place);if(F.place+=j,2!==$[F.place++])return!1;var q=B($,F);if(!1===q||$.length!==q+F.place)return!1;var W=$.slice(F.place,q+F.place);if(0===Z[0]){if(!(128&Z[1]))return!1;Z=Z.slice(1)}if(0===W[0]){if(!(128&W[1]))return!1;W=W.slice(1)}return this.r=new C(Z),this.s=new C(W),this.recoveryParam=null,!0},G.prototype.toDER=function($){var M=this.r.toArray(),F=this.s.toArray();for(128&M[0]&&(M=[0].concat(M)),128&F[0]&&(F=[0].concat(F)),M=_(M),F=_(F);!(F[0]||128&F[1]);)F=F.slice(1);var k=[2];T(k,M.length),(k=k.concat(M)).push(2),T(k,F.length);var j=k.concat(F),Z=[48];return T(Z,j.length),Z=Z.concat(j),H.encode(Z,$)}},83045:(xe,O,I)=>{"use strict";var C=I(52529),H=I(23401),N=I(3136),G=N.assert,v=N.parseBytes,B=I(87222),_=I(5451);function T(D){if(G("ed25519"===D,"only tested with ed25519 so far"),!(this instanceof T))return new T(D);this.curve=D=H[D].curve,this.g=D.g,this.g.precompute(D.n.bitLength()+1),this.pointClass=D.point().constructor,this.encodingLength=Math.ceil(D.n.bitLength()/8),this.hash=C.sha512}xe.exports=T,T.prototype.sign=function($,M){$=v($);var F=this.keyFromSecret(M),k=this.hashInt(F.messagePrefix(),$),j=this.g.mul(k),Z=this.encodePoint(j),q=this.hashInt(Z,F.pubBytes(),$).mul(F.priv()),W=k.add(q).umod(this.curve.n);return this.makeSignature({R:j,S:W,Rencoded:Z})},T.prototype.verify=function($,M,F){$=v($),M=this.makeSignature(M);var k=this.keyFromPublic(F),j=this.hashInt(M.Rencoded(),k.pubBytes(),$),Z=this.g.mul(M.S());return M.R().add(k.pub().mul(j)).eq(Z)},T.prototype.hashInt=function(){for(var $=this.hash(),M=0;M<arguments.length;M++)$.update(arguments[M]);return N.intFromLE($.digest()).umod(this.curve.n)},T.prototype.keyFromPublic=function($){return B.fromPublic(this,$)},T.prototype.keyFromSecret=function($){return B.fromSecret(this,$)},T.prototype.makeSignature=function($){return $ instanceof _?$:new _(this,$)},T.prototype.encodePoint=function($){var M=$.getY().toArray("le",this.encodingLength);return M[this.encodingLength-1]|=$.getX().isOdd()?128:0,M},T.prototype.decodePoint=function($){var M=($=N.parseBytes($)).length-1,F=$.slice(0,M).concat(-129&$[M]),k=!!(128&$[M]),j=N.intFromLE(F);return this.curve.pointFromY(j,k)},T.prototype.encodeInt=function($){return $.toArray("le",this.encodingLength)},T.prototype.decodeInt=function($){return N.intFromLE($)},T.prototype.isPoint=function($){return $ instanceof this.pointClass}},87222:(xe,O,I)=>{"use strict";var C=I(3136),H=C.assert,N=C.parseBytes,G=C.cachedProperty;function v(B,_){this.eddsa=B,this._secret=N(_.secret),B.isPoint(_.pub)?this._pub=_.pub:this._pubBytes=N(_.pub)}v.fromPublic=function(_,T){return T instanceof v?T:new v(_,{pub:T})},v.fromSecret=function(_,T){return T instanceof v?T:new v(_,{secret:T})},v.prototype.secret=function(){return this._secret},G(v,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),G(v,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),G(v,"privBytes",function(){var _=this.eddsa,T=this.hash(),D=_.encodingLength-1,$=T.slice(0,_.encodingLength);return $[0]&=248,$[D]&=127,$[D]|=64,$}),G(v,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),G(v,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),G(v,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),v.prototype.sign=function(_){return H(this._secret,"KeyPair can only verify"),this.eddsa.sign(_,this)},v.prototype.verify=function(_,T){return this.eddsa.verify(_,T,this)},v.prototype.getSecret=function(_){return H(this._secret,"KeyPair is public only"),C.encode(this.secret(),_)},v.prototype.getPublic=function(_){return C.encode(this.pubBytes(),_)},xe.exports=v},5451:(xe,O,I)=>{"use strict";var C=I(88723),H=I(3136),N=H.assert,G=H.cachedProperty,v=H.parseBytes;function B(_,T){this.eddsa=_,"object"!=typeof T&&(T=v(T)),Array.isArray(T)&&(T={R:T.slice(0,_.encodingLength),S:T.slice(_.encodingLength)}),N(T.R&&T.S,"Signature without R or S"),_.isPoint(T.R)&&(this._R=T.R),T.S instanceof C&&(this._S=T.S),this._Rencoded=Array.isArray(T.R)?T.R:T.Rencoded,this._Sencoded=Array.isArray(T.S)?T.S:T.Sencoded}G(B,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),G(B,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),G(B,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),G(B,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),B.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},B.prototype.toHex=function(){return H.encode(this.toBytes(),"hex").toUpperCase()},xe.exports=B},51416:xe=>{xe.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},3136:(xe,O,I)=>{"use strict";var C=O,H=I(88723),N=I(39210),G=I(21832);C.assert=N,C.toArray=G.toArray,C.zero2=G.zero2,C.toHex=G.toHex,C.encode=G.encode,C.getNAF=function v($,M,F){var j,k=new Array(Math.max($.bitLength(),F)+1);for(j=0;j<k.length;j+=1)k[j]=0;var Z=1<<M+1,q=$.clone();for(j=0;j<k.length;j++){var W,K=q.andln(Z-1);q.isOdd()?q.isubn(W=K>(Z>>1)-1?(Z>>1)-K:K):W=0,k[j]=W,q.iushrn(1)}return k},C.getJSF=function B($,M){var F=[[],[]];$=$.clone(),M=M.clone();for(var Z,k=0,j=0;$.cmpn(-k)>0||M.cmpn(-j)>0;){var K,J,q=$.andln(3)+k&3,W=M.andln(3)+j&3;3===q&&(q=-1),3===W&&(W=-1),K=1&q?3!=(Z=$.andln(7)+k&7)&&5!==Z||2!==W?q:-q:0,F[0].push(K),J=1&W?3!=(Z=M.andln(7)+j&7)&&5!==Z||2!==q?W:-W:0,F[1].push(J),2*k===K+1&&(k=1-k),2*j===J+1&&(j=1-j),$.iushrn(1),M.iushrn(1)}return F},C.cachedProperty=function _($,M,F){var k="_"+M;$.prototype[M]=function(){return void 0!==this[k]?this[k]:this[k]=F.call(this)}},C.parseBytes=function T($){return"string"==typeof $?C.toArray($,"hex"):$},C.intFromLE=function D($){return new H($,"hex","le")}},88723:function(xe,O,I){!function(C,H){"use strict";function N(E,a){if(!E)throw new Error(a||"Assertion failed")}function G(E,a){E.super_=a;var f=function(){};f.prototype=a.prototype,E.prototype=new f,E.prototype.constructor=E}function v(E,a,f){if(v.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,null!==E&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(E||0,a||10,f||"be"))}var B;"object"==typeof C?C.exports=v:H.BN=v,v.BN=v,v.wordSize=26;try{B=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:I(79368).Buffer}catch{}function _(E,a){var f=E.charCodeAt(a);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function T(E,a,f){var l=_(E,f);return f-1>=a&&(l|=_(E,f-1)<<4),l}function D(E,a,f,l){for(var h=0,g=Math.min(E.length,f),x=a;x<g;x++){var P=E.charCodeAt(x)-48;h*=l,h+=P>=49?P-49+10:P>=17?P-17+10:P}return h}v.isBN=function(a){return a instanceof v||null!==a&&"object"==typeof a&&a.constructor.wordSize===v.wordSize&&Array.isArray(a.words)},v.max=function(a,f){return a.cmp(f)>0?a:f},v.min=function(a,f){return a.cmp(f)<0?a:f},v.prototype._init=function(a,f,l){if("number"==typeof a)return this._initNumber(a,f,l);if("object"==typeof a)return this._initArray(a,f,l);"hex"===f&&(f=16),N(f===(0|f)&&f>=2&&f<=36);var h=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(h++,this.negative=1),h<a.length&&(16===f?this._parseHex(a,h,l):(this._parseBase(a,f,h),"le"===l&&this._initArray(this.toArray(),f,l)))},v.prototype._initNumber=function(a,f,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(N(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),f,l)},v.prototype._initArray=function(a,f,l){if(N("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var g,x,P=0;if("be"===l)for(h=a.length-1,g=0;h>=0;h-=3)this.words[g]|=(x=a[h]|a[h-1]<<8|a[h-2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);else if("le"===l)for(h=0,g=0;h<a.length;h+=3)this.words[g]|=(x=a[h]|a[h+1]<<8|a[h+2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);return this.strip()},v.prototype._parseHex=function(a,f,l){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var P,g=0,x=0;if("be"===l)for(h=a.length-1;h>=f;h-=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;else for(h=(a.length-f)%2==0?f+1:f;h<a.length;h+=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;this.strip()},v.prototype._parseBase=function(a,f,l){this.words=[0],this.length=1;for(var h=0,g=1;g<=67108863;g*=f)h++;h--,g=g/f|0;for(var x=a.length-l,P=x%h,m=Math.min(x,x-P)+l,d=0,p=l;p<m;p+=h)d=D(a,p,p+h,f),this.imuln(g),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==P){var V=1;for(d=D(a,p,a.length,f),p=0;p<P;p++)V*=f;this.imuln(V),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},v.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},v.prototype.clone=function(){var a=new v(null);return this.copy(a),a},v.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var $=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function j(E,a,f){f.negative=a.negative^E.negative;var l=E.length+a.length|0;f.length=l,l=l-1|0;var h=0|E.words[0],g=0|a.words[0],x=h*g,m=x/67108864|0;f.words[0]=67108863&x;for(var d=1;d<l;d++){for(var p=m>>>26,V=67108863&m,L=Math.min(d,a.length-1),Y=Math.max(0,d-E.length+1);Y<=L;Y++)p+=(x=(h=0|E.words[d-Y|0])*(g=0|a.words[Y])+V)/67108864|0,V=67108863&x;f.words[d]=0|V,m=0|p}return 0!==m?f.words[d]=0|m:f.length--,f.strip()}v.prototype.toString=function(a,f){var l;if(f=0|f||1,16===(a=a||10)||"hex"===a){l="";for(var h=0,g=0,x=0;x<this.length;x++){var P=this.words[x],m=(16777215&(P<<h|g)).toString(16);l=0!=(g=P>>>24-h&16777215)||x!==this.length-1?$[6-m.length]+m+l:m+l,(h+=2)>=26&&(h-=26,x--)}for(0!==g&&(l=g.toString(16)+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(a===(0|a)&&a>=2&&a<=36){var d=M[a],p=F[a];l="";var V=this.clone();for(V.negative=0;!V.isZero();){var L=V.modn(p).toString(a);l=(V=V.idivn(p)).isZero()?L+l:$[d-L.length]+L+l}for(this.isZero()&&(l="0"+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}N(!1,"Base should be between 2 and 36")},v.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&N(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(a,f){return N(typeof B<"u"),this.toArrayLike(B,a,f)},v.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},v.prototype.toArrayLike=function(a,f,l){var h=this.byteLength(),g=l||Math.max(1,h);N(h<=g,"byte array longer than desired length"),N(g>0,"Requested array length <= 0"),this.strip();var m,d,x="le"===f,P=new a(g),p=this.clone();if(x){for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[d]=m;for(;d<g;d++)P[d]=0}else{for(d=0;d<g-h;d++)P[d]=0;for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[g-d-1]=m}return P},v.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},v.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,l=0;return 8191&f||(l+=13,f>>>=13),127&f||(l+=7,f>>>=7),15&f||(l+=4,f>>>=4),3&f||(l+=2,f>>>=2),1&f||l++,l},v.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(a+=l,26!==l)break}return a},v.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},v.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},v.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this.strip()},v.prototype.ior=function(a){return N(!(this.negative|a.negative)),this.iuor(a)},v.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},v.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},v.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=f.length,this.strip()},v.prototype.iand=function(a){return N(!(this.negative|a.negative)),this.iuand(a)},v.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},v.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},v.prototype.iuxor=function(a){var f,l;this.length>a.length?(f=this,l=a):(f=a,l=this);for(var h=0;h<l.length;h++)this.words[h]=f.words[h]^l.words[h];if(this!==f)for(;h<f.length;h++)this.words[h]=f.words[h];return this.length=f.length,this.strip()},v.prototype.ixor=function(a){return N(!(this.negative|a.negative)),this.iuxor(a)},v.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},v.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},v.prototype.inotn=function(a){N("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),l=a%26;this._expand(f),l>0&&f--;for(var h=0;h<f;h++)this.words[h]=67108863&~this.words[h];return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this.strip()},v.prototype.notn=function(a){return this.clone().inotn(a)},v.prototype.setn=function(a,f){N("number"==typeof a&&a>=0);var l=a/26|0,h=a%26;return this._expand(l+1),this.words[l]=f?this.words[l]|1<<h:this.words[l]&~(1<<h),this.strip()},v.prototype.iadd=function(a){var f,l,h;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(l=this,h=a):(l=a,h=this);for(var g=0,x=0;x<h.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+(0|h.words[x])+g),g=f>>>26;for(;0!==g&&x<l.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+g),g=f>>>26;if(this.length=l.length,0!==g)this.words[this.length]=g,this.length++;else if(l!==this)for(;x<l.length;x++)this.words[x]=l.words[x];return this},v.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},v.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h,g,l=this.cmp(a);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(h=this,g=a):(h=a,g=this);for(var x=0,P=0;P<g.length;P++)x=(f=(0|h.words[P])-(0|g.words[P])+x)>>26,this.words[P]=67108863&f;for(;0!==x&&P<h.length;P++)x=(f=(0|h.words[P])+x)>>26,this.words[P]=67108863&f;if(0===x&&P<h.length&&h!==this)for(;P<h.length;P++)this.words[P]=h.words[P];return this.length=Math.max(this.length,P),h!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(a){return this.clone().isub(a)};var Z=function(a,f,l){var m,d,p,h=a.words,g=f.words,x=l.words,P=0,V=0|h[0],L=8191&V,Y=V>>>13,le=0|h[1],Se=8191&le,Oe=le>>>13,Ve=0|h[2],Re=8191&Ve,ye=Ve>>>13,ke=0|h[3],ve=8191&ke,_e=ke>>>13,de=0|h[4],se=8191&de,re=de>>>13,ce=0|h[5],ue=8191&ce,ge=ce>>>13,Ee=0|h[6],Be=8191&Ee,De=Ee>>>13,et=0|h[7],Ke=8191&et,We=et>>>13,_t=0|h[8],U=8191&_t,w=_t>>>13,b=0|h[9],z=8191&b,ie=b>>>13,be=0|g[0],Me=8191&be,qe=be>>>13,At=0|g[1],nt=8191&At,rt=At>>>13,St=0|g[2],bt=8191&St,Mt=St>>>13,Ft=0|g[3],it=8191&Ft,mt=Ft>>>13,Rr=0|g[4],xt=8191&Rr,It=Rr>>>13,Qr=0|g[5],Tt=8191&Qr,Pt=Qr>>>13,kn=0|g[6],Fe=8191&kn,He=kn>>>13,Ze=0|g[7],Ue=8191&Ze,Ge=Ze>>>13,pt=0|g[8],Xe=8191&pt,dt=pt>>>13,Qt=0|g[9],gt=8191&Qt,wt=Qt>>>13;l.negative=a.negative^f.negative,l.length=19;var Br=(P+(m=Math.imul(L,Me))|0)+((8191&(d=(d=Math.imul(L,qe))+Math.imul(Y,Me)|0))<<13)|0;P=((p=Math.imul(Y,qe))+(d>>>13)|0)+(Br>>>26)|0,Br&=67108863,m=Math.imul(Se,Me),d=(d=Math.imul(Se,qe))+Math.imul(Oe,Me)|0,p=Math.imul(Oe,qe);var Vt=(P+(m=m+Math.imul(L,nt)|0)|0)+((8191&(d=(d=d+Math.imul(L,rt)|0)+Math.imul(Y,nt)|0))<<13)|0;P=((p=p+Math.imul(Y,rt)|0)+(d>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,m=Math.imul(Re,Me),d=(d=Math.imul(Re,qe))+Math.imul(ye,Me)|0,p=Math.imul(ye,qe),m=m+Math.imul(Se,nt)|0,d=(d=d+Math.imul(Se,rt)|0)+Math.imul(Oe,nt)|0,p=p+Math.imul(Oe,rt)|0;var Zt=(P+(m=m+Math.imul(L,bt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Mt)|0)+Math.imul(Y,bt)|0))<<13)|0;P=((p=p+Math.imul(Y,Mt)|0)+(d>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,m=Math.imul(ve,Me),d=(d=Math.imul(ve,qe))+Math.imul(_e,Me)|0,p=Math.imul(_e,qe),m=m+Math.imul(Re,nt)|0,d=(d=d+Math.imul(Re,rt)|0)+Math.imul(ye,nt)|0,p=p+Math.imul(ye,rt)|0,m=m+Math.imul(Se,bt)|0,d=(d=d+Math.imul(Se,Mt)|0)+Math.imul(Oe,bt)|0,p=p+Math.imul(Oe,Mt)|0;var Tr=(P+(m=m+Math.imul(L,it)|0)|0)+((8191&(d=(d=d+Math.imul(L,mt)|0)+Math.imul(Y,it)|0))<<13)|0;P=((p=p+Math.imul(Y,mt)|0)+(d>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,m=Math.imul(se,Me),d=(d=Math.imul(se,qe))+Math.imul(re,Me)|0,p=Math.imul(re,qe),m=m+Math.imul(ve,nt)|0,d=(d=d+Math.imul(ve,rt)|0)+Math.imul(_e,nt)|0,p=p+Math.imul(_e,rt)|0,m=m+Math.imul(Re,bt)|0,d=(d=d+Math.imul(Re,Mt)|0)+Math.imul(ye,bt)|0,p=p+Math.imul(ye,Mt)|0,m=m+Math.imul(Se,it)|0,d=(d=d+Math.imul(Se,mt)|0)+Math.imul(Oe,it)|0,p=p+Math.imul(Oe,mt)|0;var dr=(P+(m=m+Math.imul(L,xt)|0)|0)+((8191&(d=(d=d+Math.imul(L,It)|0)+Math.imul(Y,xt)|0))<<13)|0;P=((p=p+Math.imul(Y,It)|0)+(d>>>13)|0)+(dr>>>26)|0,dr&=67108863,m=Math.imul(ue,Me),d=(d=Math.imul(ue,qe))+Math.imul(ge,Me)|0,p=Math.imul(ge,qe),m=m+Math.imul(se,nt)|0,d=(d=d+Math.imul(se,rt)|0)+Math.imul(re,nt)|0,p=p+Math.imul(re,rt)|0,m=m+Math.imul(ve,bt)|0,d=(d=d+Math.imul(ve,Mt)|0)+Math.imul(_e,bt)|0,p=p+Math.imul(_e,Mt)|0,m=m+Math.imul(Re,it)|0,d=(d=d+Math.imul(Re,mt)|0)+Math.imul(ye,it)|0,p=p+Math.imul(ye,mt)|0,m=m+Math.imul(Se,xt)|0,d=(d=d+Math.imul(Se,It)|0)+Math.imul(Oe,xt)|0,p=p+Math.imul(Oe,It)|0;var or=(P+(m=m+Math.imul(L,Tt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Pt)|0)+Math.imul(Y,Tt)|0))<<13)|0;P=((p=p+Math.imul(Y,Pt)|0)+(d>>>13)|0)+(or>>>26)|0,or&=67108863,m=Math.imul(Be,Me),d=(d=Math.imul(Be,qe))+Math.imul(De,Me)|0,p=Math.imul(De,qe),m=m+Math.imul(ue,nt)|0,d=(d=d+Math.imul(ue,rt)|0)+Math.imul(ge,nt)|0,p=p+Math.imul(ge,rt)|0,m=m+Math.imul(se,bt)|0,d=(d=d+Math.imul(se,Mt)|0)+Math.imul(re,bt)|0,p=p+Math.imul(re,Mt)|0,m=m+Math.imul(ve,it)|0,d=(d=d+Math.imul(ve,mt)|0)+Math.imul(_e,it)|0,p=p+Math.imul(_e,mt)|0,m=m+Math.imul(Re,xt)|0,d=(d=d+Math.imul(Re,It)|0)+Math.imul(ye,xt)|0,p=p+Math.imul(ye,It)|0,m=m+Math.imul(Se,Tt)|0,d=(d=d+Math.imul(Se,Pt)|0)+Math.imul(Oe,Tt)|0,p=p+Math.imul(Oe,Pt)|0;var mr=(P+(m=m+Math.imul(L,Fe)|0)|0)+((8191&(d=(d=d+Math.imul(L,He)|0)+Math.imul(Y,Fe)|0))<<13)|0;P=((p=p+Math.imul(Y,He)|0)+(d>>>13)|0)+(mr>>>26)|0,mr&=67108863,m=Math.imul(Ke,Me),d=(d=Math.imul(Ke,qe))+Math.imul(We,Me)|0,p=Math.imul(We,qe),m=m+Math.imul(Be,nt)|0,d=(d=d+Math.imul(Be,rt)|0)+Math.imul(De,nt)|0,p=p+Math.imul(De,rt)|0,m=m+Math.imul(ue,bt)|0,d=(d=d+Math.imul(ue,Mt)|0)+Math.imul(ge,bt)|0,p=p+Math.imul(ge,Mt)|0,m=m+Math.imul(se,it)|0,d=(d=d+Math.imul(se,mt)|0)+Math.imul(re,it)|0,p=p+Math.imul(re,mt)|0,m=m+Math.imul(ve,xt)|0,d=(d=d+Math.imul(ve,It)|0)+Math.imul(_e,xt)|0,p=p+Math.imul(_e,It)|0,m=m+Math.imul(Re,Tt)|0,d=(d=d+Math.imul(Re,Pt)|0)+Math.imul(ye,Tt)|0,p=p+Math.imul(ye,Pt)|0,m=m+Math.imul(Se,Fe)|0,d=(d=d+Math.imul(Se,He)|0)+Math.imul(Oe,Fe)|0,p=p+Math.imul(Oe,He)|0;var ar=(P+(m=m+Math.imul(L,Ue)|0)|0)+((8191&(d=(d=d+Math.imul(L,Ge)|0)+Math.imul(Y,Ue)|0))<<13)|0;P=((p=p+Math.imul(Y,Ge)|0)+(d>>>13)|0)+(ar>>>26)|0,ar&=67108863,m=Math.imul(U,Me),d=(d=Math.imul(U,qe))+Math.imul(w,Me)|0,p=Math.imul(w,qe),m=m+Math.imul(Ke,nt)|0,d=(d=d+Math.imul(Ke,rt)|0)+Math.imul(We,nt)|0,p=p+Math.imul(We,rt)|0,m=m+Math.imul(Be,bt)|0,d=(d=d+Math.imul(Be,Mt)|0)+Math.imul(De,bt)|0,p=p+Math.imul(De,Mt)|0,m=m+Math.imul(ue,it)|0,d=(d=d+Math.imul(ue,mt)|0)+Math.imul(ge,it)|0,p=p+Math.imul(ge,mt)|0,m=m+Math.imul(se,xt)|0,d=(d=d+Math.imul(se,It)|0)+Math.imul(re,xt)|0,p=p+Math.imul(re,It)|0,m=m+Math.imul(ve,Tt)|0,d=(d=d+Math.imul(ve,Pt)|0)+Math.imul(_e,Tt)|0,p=p+Math.imul(_e,Pt)|0,m=m+Math.imul(Re,Fe)|0,d=(d=d+Math.imul(Re,He)|0)+Math.imul(ye,Fe)|0,p=p+Math.imul(ye,He)|0,m=m+Math.imul(Se,Ue)|0,d=(d=d+Math.imul(Se,Ge)|0)+Math.imul(Oe,Ue)|0,p=p+Math.imul(Oe,Ge)|0;var en=(P+(m=m+Math.imul(L,Xe)|0)|0)+((8191&(d=(d=d+Math.imul(L,dt)|0)+Math.imul(Y,Xe)|0))<<13)|0;P=((p=p+Math.imul(Y,dt)|0)+(d>>>13)|0)+(en>>>26)|0,en&=67108863,m=Math.imul(z,Me),d=(d=Math.imul(z,qe))+Math.imul(ie,Me)|0,p=Math.imul(ie,qe),m=m+Math.imul(U,nt)|0,d=(d=d+Math.imul(U,rt)|0)+Math.imul(w,nt)|0,p=p+Math.imul(w,rt)|0,m=m+Math.imul(Ke,bt)|0,d=(d=d+Math.imul(Ke,Mt)|0)+Math.imul(We,bt)|0,p=p+Math.imul(We,Mt)|0,m=m+Math.imul(Be,it)|0,d=(d=d+Math.imul(Be,mt)|0)+Math.imul(De,it)|0,p=p+Math.imul(De,mt)|0,m=m+Math.imul(ue,xt)|0,d=(d=d+Math.imul(ue,It)|0)+Math.imul(ge,xt)|0,p=p+Math.imul(ge,It)|0,m=m+Math.imul(se,Tt)|0,d=(d=d+Math.imul(se,Pt)|0)+Math.imul(re,Tt)|0,p=p+Math.imul(re,Pt)|0,m=m+Math.imul(ve,Fe)|0,d=(d=d+Math.imul(ve,He)|0)+Math.imul(_e,Fe)|0,p=p+Math.imul(_e,He)|0,m=m+Math.imul(Re,Ue)|0,d=(d=d+Math.imul(Re,Ge)|0)+Math.imul(ye,Ue)|0,p=p+Math.imul(ye,Ge)|0,m=m+Math.imul(Se,Xe)|0,d=(d=d+Math.imul(Se,dt)|0)+Math.imul(Oe,Xe)|0,p=p+Math.imul(Oe,dt)|0;var zr=(P+(m=m+Math.imul(L,gt)|0)|0)+((8191&(d=(d=d+Math.imul(L,wt)|0)+Math.imul(Y,gt)|0))<<13)|0;P=((p=p+Math.imul(Y,wt)|0)+(d>>>13)|0)+(zr>>>26)|0,zr&=67108863,m=Math.imul(z,nt),d=(d=Math.imul(z,rt))+Math.imul(ie,nt)|0,p=Math.imul(ie,rt),m=m+Math.imul(U,bt)|0,d=(d=d+Math.imul(U,Mt)|0)+Math.imul(w,bt)|0,p=p+Math.imul(w,Mt)|0,m=m+Math.imul(Ke,it)|0,d=(d=d+Math.imul(Ke,mt)|0)+Math.imul(We,it)|0,p=p+Math.imul(We,mt)|0,m=m+Math.imul(Be,xt)|0,d=(d=d+Math.imul(Be,It)|0)+Math.imul(De,xt)|0,p=p+Math.imul(De,It)|0,m=m+Math.imul(ue,Tt)|0,d=(d=d+Math.imul(ue,Pt)|0)+Math.imul(ge,Tt)|0,p=p+Math.imul(ge,Pt)|0,m=m+Math.imul(se,Fe)|0,d=(d=d+Math.imul(se,He)|0)+Math.imul(re,Fe)|0,p=p+Math.imul(re,He)|0,m=m+Math.imul(ve,Ue)|0,d=(d=d+Math.imul(ve,Ge)|0)+Math.imul(_e,Ue)|0,p=p+Math.imul(_e,Ge)|0,m=m+Math.imul(Re,Xe)|0,d=(d=d+Math.imul(Re,dt)|0)+Math.imul(ye,Xe)|0,p=p+Math.imul(ye,dt)|0;var Wr=(P+(m=m+Math.imul(Se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Se,wt)|0)+Math.imul(Oe,gt)|0))<<13)|0;P=((p=p+Math.imul(Oe,wt)|0)+(d>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,m=Math.imul(z,bt),d=(d=Math.imul(z,Mt))+Math.imul(ie,bt)|0,p=Math.imul(ie,Mt),m=m+Math.imul(U,it)|0,d=(d=d+Math.imul(U,mt)|0)+Math.imul(w,it)|0,p=p+Math.imul(w,mt)|0,m=m+Math.imul(Ke,xt)|0,d=(d=d+Math.imul(Ke,It)|0)+Math.imul(We,xt)|0,p=p+Math.imul(We,It)|0,m=m+Math.imul(Be,Tt)|0,d=(d=d+Math.imul(Be,Pt)|0)+Math.imul(De,Tt)|0,p=p+Math.imul(De,Pt)|0,m=m+Math.imul(ue,Fe)|0,d=(d=d+Math.imul(ue,He)|0)+Math.imul(ge,Fe)|0,p=p+Math.imul(ge,He)|0,m=m+Math.imul(se,Ue)|0,d=(d=d+Math.imul(se,Ge)|0)+Math.imul(re,Ue)|0,p=p+Math.imul(re,Ge)|0,m=m+Math.imul(ve,Xe)|0,d=(d=d+Math.imul(ve,dt)|0)+Math.imul(_e,Xe)|0,p=p+Math.imul(_e,dt)|0;var _r=(P+(m=m+Math.imul(Re,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Re,wt)|0)+Math.imul(ye,gt)|0))<<13)|0;P=((p=p+Math.imul(ye,wt)|0)+(d>>>13)|0)+(_r>>>26)|0,_r&=67108863,m=Math.imul(z,it),d=(d=Math.imul(z,mt))+Math.imul(ie,it)|0,p=Math.imul(ie,mt),m=m+Math.imul(U,xt)|0,d=(d=d+Math.imul(U,It)|0)+Math.imul(w,xt)|0,p=p+Math.imul(w,It)|0,m=m+Math.imul(Ke,Tt)|0,d=(d=d+Math.imul(Ke,Pt)|0)+Math.imul(We,Tt)|0,p=p+Math.imul(We,Pt)|0,m=m+Math.imul(Be,Fe)|0,d=(d=d+Math.imul(Be,He)|0)+Math.imul(De,Fe)|0,p=p+Math.imul(De,He)|0,m=m+Math.imul(ue,Ue)|0,d=(d=d+Math.imul(ue,Ge)|0)+Math.imul(ge,Ue)|0,p=p+Math.imul(ge,Ge)|0,m=m+Math.imul(se,Xe)|0,d=(d=d+Math.imul(se,dt)|0)+Math.imul(re,Xe)|0,p=p+Math.imul(re,dt)|0;var Gr=(P+(m=m+Math.imul(ve,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ve,wt)|0)+Math.imul(_e,gt)|0))<<13)|0;P=((p=p+Math.imul(_e,wt)|0)+(d>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,m=Math.imul(z,xt),d=(d=Math.imul(z,It))+Math.imul(ie,xt)|0,p=Math.imul(ie,It),m=m+Math.imul(U,Tt)|0,d=(d=d+Math.imul(U,Pt)|0)+Math.imul(w,Tt)|0,p=p+Math.imul(w,Pt)|0,m=m+Math.imul(Ke,Fe)|0,d=(d=d+Math.imul(Ke,He)|0)+Math.imul(We,Fe)|0,p=p+Math.imul(We,He)|0,m=m+Math.imul(Be,Ue)|0,d=(d=d+Math.imul(Be,Ge)|0)+Math.imul(De,Ue)|0,p=p+Math.imul(De,Ge)|0,m=m+Math.imul(ue,Xe)|0,d=(d=d+Math.imul(ue,dt)|0)+Math.imul(ge,Xe)|0,p=p+Math.imul(ge,dt)|0;var qr=(P+(m=m+Math.imul(se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(se,wt)|0)+Math.imul(re,gt)|0))<<13)|0;P=((p=p+Math.imul(re,wt)|0)+(d>>>13)|0)+(qr>>>26)|0,qr&=67108863,m=Math.imul(z,Tt),d=(d=Math.imul(z,Pt))+Math.imul(ie,Tt)|0,p=Math.imul(ie,Pt),m=m+Math.imul(U,Fe)|0,d=(d=d+Math.imul(U,He)|0)+Math.imul(w,Fe)|0,p=p+Math.imul(w,He)|0,m=m+Math.imul(Ke,Ue)|0,d=(d=d+Math.imul(Ke,Ge)|0)+Math.imul(We,Ue)|0,p=p+Math.imul(We,Ge)|0,m=m+Math.imul(Be,Xe)|0,d=(d=d+Math.imul(Be,dt)|0)+Math.imul(De,Xe)|0,p=p+Math.imul(De,dt)|0;var Yr=(P+(m=m+Math.imul(ue,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ue,wt)|0)+Math.imul(ge,gt)|0))<<13)|0;P=((p=p+Math.imul(ge,wt)|0)+(d>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,m=Math.imul(z,Fe),d=(d=Math.imul(z,He))+Math.imul(ie,Fe)|0,p=Math.imul(ie,He),m=m+Math.imul(U,Ue)|0,d=(d=d+Math.imul(U,Ge)|0)+Math.imul(w,Ue)|0,p=p+Math.imul(w,Ge)|0,m=m+Math.imul(Ke,Xe)|0,d=(d=d+Math.imul(Ke,dt)|0)+Math.imul(We,Xe)|0,p=p+Math.imul(We,dt)|0;var mn=(P+(m=m+Math.imul(Be,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Be,wt)|0)+Math.imul(De,gt)|0))<<13)|0;P=((p=p+Math.imul(De,wt)|0)+(d>>>13)|0)+(mn>>>26)|0,mn&=67108863,m=Math.imul(z,Ue),d=(d=Math.imul(z,Ge))+Math.imul(ie,Ue)|0,p=Math.imul(ie,Ge),m=m+Math.imul(U,Xe)|0,d=(d=d+Math.imul(U,dt)|0)+Math.imul(w,Xe)|0,p=p+Math.imul(w,dt)|0;var un=(P+(m=m+Math.imul(Ke,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Ke,wt)|0)+Math.imul(We,gt)|0))<<13)|0;P=((p=p+Math.imul(We,wt)|0)+(d>>>13)|0)+(un>>>26)|0,un&=67108863,m=Math.imul(z,Xe),d=(d=Math.imul(z,dt))+Math.imul(ie,Xe)|0,p=Math.imul(ie,dt);var fn=(P+(m=m+Math.imul(U,gt)|0)|0)+((8191&(d=(d=d+Math.imul(U,wt)|0)+Math.imul(w,gt)|0))<<13)|0;P=((p=p+Math.imul(w,wt)|0)+(d>>>13)|0)+(fn>>>26)|0,fn&=67108863;var xn=(P+(m=Math.imul(z,gt))|0)+((8191&(d=(d=Math.imul(z,wt))+Math.imul(ie,gt)|0))<<13)|0;return P=((p=Math.imul(ie,wt))+(d>>>13)|0)+(xn>>>26)|0,xn&=67108863,x[0]=Br,x[1]=Vt,x[2]=Zt,x[3]=Tr,x[4]=dr,x[5]=or,x[6]=mr,x[7]=ar,x[8]=en,x[9]=zr,x[10]=Wr,x[11]=_r,x[12]=Gr,x[13]=qr,x[14]=Yr,x[15]=mn,x[16]=un,x[17]=fn,x[18]=xn,0!==P&&(x[19]=P,l.length++),l};function W(E,a,f){return(new K).mulp(E,a,f)}function K(E,a){this.x=E,this.y=a}Math.imul||(Z=j),v.prototype.mulTo=function(a,f){var l,h=this.length+a.length;return l=10===this.length&&10===a.length?Z(this,a,f):h<63?j(this,a,f):h<1024?function q(E,a,f){f.negative=a.negative^E.negative,f.length=E.length+a.length;for(var l=0,h=0,g=0;g<f.length-1;g++){var x=h;h=0;for(var P=67108863&l,m=Math.min(g,a.length-1),d=Math.max(0,g-E.length+1);d<=m;d++){var Y=(0|E.words[g-d])*(0|a.words[d]),le=67108863&Y;P=67108863&(le=le+P|0),h+=(x=(x=x+(Y/67108864|0)|0)+(le>>>26)|0)>>>26,x&=67108863}f.words[g]=P,l=x,x=h}return 0!==l?f.words[g]=l:f.length--,f.strip()}(this,a,f):W(this,a,f),l},K.prototype.makeRBT=function(a){for(var f=new Array(a),l=v.prototype._countBits(a)-1,h=0;h<a;h++)f[h]=this.revBin(h,l,a);return f},K.prototype.revBin=function(a,f,l){if(0===a||a===l-1)return a;for(var h=0,g=0;g<f;g++)h|=(1&a)<<f-g-1,a>>=1;return h},K.prototype.permute=function(a,f,l,h,g,x){for(var P=0;P<x;P++)h[P]=f[a[P]],g[P]=l[a[P]]},K.prototype.transform=function(a,f,l,h,g,x){this.permute(x,a,f,l,h,g);for(var P=1;P<g;P<<=1)for(var m=P<<1,d=Math.cos(2*Math.PI/m),p=Math.sin(2*Math.PI/m),V=0;V<g;V+=m)for(var L=d,Y=p,le=0;le<P;le++){var Se=l[V+le],Oe=h[V+le],Ve=l[V+le+P],Re=h[V+le+P],ye=L*Ve-Y*Re;Re=L*Re+Y*Ve,l[V+le]=Se+(Ve=ye),h[V+le]=Oe+Re,l[V+le+P]=Se-Ve,h[V+le+P]=Oe-Re,le!==m&&(ye=d*L-p*Y,Y=d*Y+p*L,L=ye)}},K.prototype.guessLen13b=function(a,f){var l=1|Math.max(f,a),h=1&l,g=0;for(l=l/2|0;l;l>>>=1)g++;return 1<<g+1+h},K.prototype.conjugate=function(a,f,l){if(!(l<=1))for(var h=0;h<l/2;h++){var g=a[h];a[h]=a[l-h-1],a[l-h-1]=g,g=f[h],f[h]=-f[l-h-1],f[l-h-1]=-g}},K.prototype.normalize13b=function(a,f){for(var l=0,h=0;h<f/2;h++){var g=8192*Math.round(a[2*h+1]/f)+Math.round(a[2*h]/f)+l;a[h]=67108863&g,l=g<67108864?0:g/67108864|0}return a},K.prototype.convert13b=function(a,f,l,h){for(var g=0,x=0;x<f;x++)l[2*x]=8191&(g+=0|a[x]),l[2*x+1]=8191&(g>>>=13),g>>>=13;for(x=2*f;x<h;++x)l[x]=0;N(0===g),N(!(-8192&g))},K.prototype.stub=function(a){for(var f=new Array(a),l=0;l<a;l++)f[l]=0;return f},K.prototype.mulp=function(a,f,l){var h=2*this.guessLen13b(a.length,f.length),g=this.makeRBT(h),x=this.stub(h),P=new Array(h),m=new Array(h),d=new Array(h),p=new Array(h),V=new Array(h),L=new Array(h),Y=l.words;Y.length=h,this.convert13b(a.words,a.length,P,h),this.convert13b(f.words,f.length,p,h),this.transform(P,x,m,d,h,g),this.transform(p,x,V,L,h,g);for(var le=0;le<h;le++){var Se=m[le]*V[le]-d[le]*L[le];d[le]=m[le]*L[le]+d[le]*V[le],m[le]=Se}return this.conjugate(m,d,h),this.transform(m,d,Y,x,h,g),this.conjugate(Y,x,h),this.normalize13b(Y,h),l.negative=a.negative^f.negative,l.length=a.length+f.length,l.strip()},v.prototype.mul=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},v.prototype.mulf=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),W(this,a,f)},v.prototype.imul=function(a){return this.clone().mulTo(a,this)},v.prototype.imuln=function(a){N("number"==typeof a),N(a<67108864);for(var f=0,l=0;l<this.length;l++){var h=(0|this.words[l])*a,g=(67108863&h)+(67108863&f);f>>=26,f+=h/67108864|0,f+=g>>>26,this.words[l]=67108863&g}return 0!==f&&(this.words[l]=f,this.length++),this},v.prototype.muln=function(a){return this.clone().imuln(a)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(a){var f=function k(E){for(var a=new Array(E.bitLength()),f=0;f<a.length;f++){var h=f%26;a[f]=(E.words[f/26|0]&1<<h)>>>h}return a}(a);if(0===f.length)return new v(1);for(var l=this,h=0;h<f.length&&0===f[h];h++,l=l.sqr());if(++h<f.length)for(var g=l.sqr();h<f.length;h++,g=g.sqr())0!==f[h]&&(l=l.mul(g));return l},v.prototype.iushln=function(a){N("number"==typeof a&&a>=0);var g,f=a%26,l=(a-f)/26,h=67108863>>>26-f<<26-f;if(0!==f){var x=0;for(g=0;g<this.length;g++){var P=this.words[g]&h;this.words[g]=(0|this.words[g])-P<<f|x,x=P>>>26-f}x&&(this.words[g]=x,this.length++)}if(0!==l){for(g=this.length-1;g>=0;g--)this.words[g+l]=this.words[g];for(g=0;g<l;g++)this.words[g]=0;this.length+=l}return this.strip()},v.prototype.ishln=function(a){return N(0===this.negative),this.iushln(a)},v.prototype.iushrn=function(a,f,l){var h;N("number"==typeof a&&a>=0),h=f?(f-f%26)/26:0;var g=a%26,x=Math.min((a-g)/26,this.length),P=67108863^67108863>>>g<<g,m=l;if(h-=x,h=Math.max(0,h),m){for(var d=0;d<x;d++)m.words[d]=this.words[d];m.length=x}if(0!==x)if(this.length>x)for(this.length-=x,d=0;d<this.length;d++)this.words[d]=this.words[d+x];else this.words[0]=0,this.length=1;var p=0;for(d=this.length-1;d>=0&&(0!==p||d>=h);d--){var V=0|this.words[d];this.words[d]=p<<26-g|V>>>g,p=V&P}return m&&0!==p&&(m.words[m.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(a,f,l){return N(0===this.negative),this.iushrn(a,f,l)},v.prototype.shln=function(a){return this.clone().ishln(a)},v.prototype.ushln=function(a){return this.clone().iushln(a)},v.prototype.shrn=function(a){return this.clone().ishrn(a)},v.prototype.ushrn=function(a){return this.clone().iushrn(a)},v.prototype.testn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return!(this.length<=l||!(this.words[l]&1<<f))},v.prototype.imaskn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return N(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==f&&l++,this.length=Math.min(l,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this.strip())},v.prototype.maskn=function(a){return this.clone().imaskn(a)},v.prototype.iaddn=function(a){return N("number"==typeof a),N(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},v.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},v.prototype.isubn=function(a){if(N("number"==typeof a),N(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},v.prototype.addn=function(a){return this.clone().iaddn(a)},v.prototype.subn=function(a){return this.clone().isubn(a)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(a,f,l){var g;this._expand(a.length+l);var x,P=0;for(g=0;g<a.length;g++){x=(0|this.words[g+l])+P;var m=(0|a.words[g])*f;P=((x-=67108863&m)>>26)-(m/67108864|0),this.words[g+l]=67108863&x}for(;g<this.length-l;g++)P=(x=(0|this.words[g+l])+P)>>26,this.words[g+l]=67108863&x;if(0===P)return this.strip();for(N(-1===P),P=0,g=0;g<this.length;g++)P=(x=-(0|this.words[g])+P)>>26,this.words[g]=67108863&x;return this.negative=1,this.strip()},v.prototype._wordDiv=function(a,f){var l,h=this.clone(),g=a,x=0|g.words[g.length-1];0!=(l=26-this._countBits(x))&&(g=g.ushln(l),h.iushln(l),x=0|g.words[g.length-1]);var d,m=h.length-g.length;if("mod"!==f){(d=new v(null)).length=m+1,d.words=new Array(d.length);for(var p=0;p<d.length;p++)d.words[p]=0}var V=h.clone()._ishlnsubmul(g,1,m);0===V.negative&&(h=V,d&&(d.words[m]=1));for(var L=m-1;L>=0;L--){var Y=67108864*(0|h.words[g.length+L])+(0|h.words[g.length+L-1]);for(Y=Math.min(Y/x|0,67108863),h._ishlnsubmul(g,Y,L);0!==h.negative;)Y--,h.negative=0,h._ishlnsubmul(g,1,L),h.isZero()||(h.negative^=1);d&&(d.words[L]=Y)}return d&&d.strip(),h.strip(),"div"!==f&&0!==l&&h.iushrn(l),{div:d||null,mod:h}},v.prototype.divmod=function(a,f,l){return N(!a.isZero()),this.isZero()?{div:new v(0),mod:new v(0)}:0!==this.negative&&0===a.negative?(x=this.neg().divmod(a,f),"mod"!==f&&(h=x.div.neg()),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.iadd(a)),{div:h,mod:g}):0===this.negative&&0!==a.negative?(x=this.divmod(a.neg(),f),"mod"!==f&&(h=x.div.neg()),{div:h,mod:x.mod}):this.negative&a.negative?(x=this.neg().divmod(a.neg(),f),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.isub(a)),{div:x.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new v(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new v(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new v(this.modn(a.words[0]))}:this._wordDiv(a,f);var h,g,x},v.prototype.div=function(a){return this.divmod(a,"div",!1).div},v.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},v.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},v.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var l=0!==f.div.negative?f.mod.isub(a):f.mod,h=a.ushrn(1),g=a.andln(1),x=l.cmp(h);return x<0||1===g&&0===x?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},v.prototype.modn=function(a){N(a<=67108863);for(var f=(1<<26)%a,l=0,h=this.length-1;h>=0;h--)l=(f*l+(0|this.words[h]))%a;return l},v.prototype.idivn=function(a){N(a<=67108863);for(var f=0,l=this.length-1;l>=0;l--){var h=(0|this.words[l])+67108864*f;this.words[l]=h/a|0,f=h%a}return this.strip()},v.prototype.divn=function(a){return this.clone().idivn(a)},v.prototype.egcd=function(a){N(0===a.negative),N(!a.isZero());var f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=new v(0),P=new v(1),m=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++m;for(var d=l.clone(),p=f.clone();!f.isZero();){for(var V=0,L=1;!(f.words[0]&L)&&V<26;++V,L<<=1);if(V>0)for(f.iushrn(V);V-- >0;)(h.isOdd()||g.isOdd())&&(h.iadd(d),g.isub(p)),h.iushrn(1),g.iushrn(1);for(var Y=0,le=1;!(l.words[0]&le)&&Y<26;++Y,le<<=1);if(Y>0)for(l.iushrn(Y);Y-- >0;)(x.isOdd()||P.isOdd())&&(x.iadd(d),P.isub(p)),x.iushrn(1),P.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(x),g.isub(P)):(l.isub(f),x.isub(h),P.isub(g))}return{a:x,b:P,gcd:l.iushln(m)}},v.prototype._invmp=function(a){N(0===a.negative),N(!a.isZero());var V,f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var P=0,m=1;!(f.words[0]&m)&&P<26;++P,m<<=1);if(P>0)for(f.iushrn(P);P-- >0;)h.isOdd()&&h.iadd(x),h.iushrn(1);for(var d=0,p=1;!(l.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(l.iushrn(d);d-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(g)):(l.isub(f),g.isub(h))}return(V=0===f.cmpn(1)?h:g).cmpn(0)<0&&V.iadd(a),V},v.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),l=a.clone();f.negative=0,l.negative=0;for(var h=0;f.isEven()&&l.isEven();h++)f.iushrn(1),l.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var g=f.cmp(l);if(g<0){var x=f;f=l,l=x}else if(0===g||0===l.cmpn(1))break;f.isub(l)}return l.iushln(h)},v.prototype.invm=function(a){return this.egcd(a).a.umod(a)},v.prototype.isEven=function(){return!(1&this.words[0])},v.prototype.isOdd=function(){return!(1&~this.words[0])},v.prototype.andln=function(a){return this.words[0]&a},v.prototype.bincn=function(a){N("number"==typeof a);var f=a%26,l=(a-f)/26,h=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var g=h,x=l;0!==g&&x<this.length;x++){var P=0|this.words[x];g=(P+=g)>>>26,this.words[x]=P&=67108863}return 0!==g&&(this.words[x]=g,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(a){var l,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this.strip(),this.length>1)l=1;else{f&&(a=-a),N(a<=67108863,"Number is too big");var h=0|this.words[0];l=h===a?0:h<a?-1:1}return 0!==this.negative?0|-l:l},v.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},v.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var h=0|this.words[l],g=0|a.words[l];if(h!==g){h<g?f=-1:h>g&&(f=1);break}}return f},v.prototype.gtn=function(a){return 1===this.cmpn(a)},v.prototype.gt=function(a){return 1===this.cmp(a)},v.prototype.gten=function(a){return this.cmpn(a)>=0},v.prototype.gte=function(a){return this.cmp(a)>=0},v.prototype.ltn=function(a){return-1===this.cmpn(a)},v.prototype.lt=function(a){return-1===this.cmp(a)},v.prototype.lten=function(a){return this.cmpn(a)<=0},v.prototype.lte=function(a){return this.cmp(a)<=0},v.prototype.eqn=function(a){return 0===this.cmpn(a)},v.prototype.eq=function(a){return 0===this.cmp(a)},v.red=function(a){return new pe(a)},v.prototype.toRed=function(a){return N(!this.red,"Already a number in reduction context"),N(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},v.prototype.fromRed=function(){return N(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},v.prototype._forceRed=function(a){return this.red=a,this},v.prototype.forceRed=function(a){return N(!this.red,"Already a number in reduction context"),this._forceRed(a)},v.prototype.redAdd=function(a){return N(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},v.prototype.redIAdd=function(a){return N(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},v.prototype.redSub=function(a){return N(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},v.prototype.redISub=function(a){return N(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},v.prototype.redShl=function(a){return N(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},v.prototype.redMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},v.prototype.redIMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},v.prototype.redSqr=function(){return N(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return N(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return N(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return N(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return N(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(a){return N(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var J={k256:null,p224:null,p192:null,p25519:null};function X(E,a){this.name=E,this.p=new v(a,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Q(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function oe(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ne(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function me(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function pe(E){if("string"==typeof E){var a=v._prime(E);this.m=a.p,this.prime=a}else N(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}function Ie(E){pe.call(this,E),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}X.prototype._tmp=function(){var a=new v(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var l,f=a;do{this.split(f,this.tmp),l=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(l>this.n);var h=l<this.n?-1:f.ucmp(this.p);return 0===h?(f.words[0]=0,f.length=1):h>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},X.prototype.split=function(a,f){a.iushrn(this.n,0,f)},X.prototype.imulK=function(a){return a.imul(this.k)},G(Q,X),Q.prototype.split=function(a,f){for(var l=4194303,h=Math.min(a.length,9),g=0;g<h;g++)f.words[g]=a.words[g];if(f.length=h,a.length<=9)return a.words[0]=0,void(a.length=1);var x=a.words[9];for(f.words[f.length++]=x&l,g=10;g<a.length;g++){var P=0|a.words[g];a.words[g-10]=(P&l)<<4|x>>>22,x=P}a.words[g-10]=x>>>=22,a.length-=0===x&&a.length>10?10:9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,l=0;l<a.length;l++){var h=0|a.words[l];a.words[l]=67108863&(f+=977*h),f=64*h+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},G(oe,X),G(ne,X),G(me,X),me.prototype.imulK=function(a){for(var f=0,l=0;l<a.length;l++){var h=19*(0|a.words[l])+f,g=67108863&h;h>>>=26,a.words[l]=g,f=h}return 0!==f&&(a.words[a.length++]=f),a},v._prime=function(a){if(J[a])return J[a];var f;if("k256"===a)f=new Q;else if("p224"===a)f=new oe;else if("p192"===a)f=new ne;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new me}return J[a]=f,f},pe.prototype._verify1=function(a){N(0===a.negative,"red works only with positives"),N(a.red,"red works only with red numbers")},pe.prototype._verify2=function(a,f){N(!(a.negative|f.negative),"red works only with positives"),N(a.red&&a.red===f.red,"red works only with red numbers")},pe.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},pe.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},pe.prototype.add=function(a,f){this._verify2(a,f);var l=a.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},pe.prototype.iadd=function(a,f){this._verify2(a,f);var l=a.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},pe.prototype.sub=function(a,f){this._verify2(a,f);var l=a.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},pe.prototype.isub=function(a,f){this._verify2(a,f);var l=a.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},pe.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},pe.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},pe.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},pe.prototype.isqr=function(a){return this.imul(a,a.clone())},pe.prototype.sqr=function(a){return this.mul(a,a)},pe.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(N(f%2==1),3===f){var l=this.m.add(new v(1)).iushrn(2);return this.pow(a,l)}for(var h=this.m.subn(1),g=0;!h.isZero()&&0===h.andln(1);)g++,h.iushrn(1);N(!h.isZero());var x=new v(1).toRed(this),P=x.redNeg(),m=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new v(2*d*d).toRed(this);0!==this.pow(d,m).cmp(P);)d.redIAdd(P);for(var p=this.pow(d,h),V=this.pow(a,h.addn(1).iushrn(1)),L=this.pow(a,h),Y=g;0!==L.cmp(x);){for(var le=L,Se=0;0!==le.cmp(x);Se++)le=le.redSqr();N(Se<Y);var Oe=this.pow(p,new v(1).iushln(Y-Se-1));V=V.redMul(Oe),p=Oe.redSqr(),L=L.redMul(p),Y=Se}return V},pe.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},pe.prototype.pow=function(a,f){if(f.isZero())return new v(1).toRed(this);if(0===f.cmpn(1))return a.clone();var h=new Array(16);h[0]=new v(1).toRed(this),h[1]=a;for(var g=2;g<h.length;g++)h[g]=this.mul(h[g-1],a);var x=h[0],P=0,m=0,d=f.bitLength()%26;for(0===d&&(d=26),g=f.length-1;g>=0;g--){for(var p=f.words[g],V=d-1;V>=0;V--){var L=p>>V&1;x!==h[0]&&(x=this.sqr(x)),0!==L||0!==P?(P<<=1,P|=L,(4==++m||0===g&&0===V)&&(x=this.mul(x,h[P]),m=0,P=0)):m=0}d=26}return x},pe.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},pe.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},v.mont=function(a){return new Ie(a)},G(Ie,pe),Ie.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Ie.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},Ie.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new v(0)._forceRed(this);var l=a.mul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(xe=I.nmd(xe),this)},44356:xe=>{"use strict";var C,O="object"==typeof Reflect?Reflect:null,I=O&&"function"==typeof O.apply?O.apply:function(X,Q,oe){return Function.prototype.apply.call(X,Q,oe)};C=O&&"function"==typeof O.ownKeys?O.ownKeys:Object.getOwnPropertySymbols?function(X){return Object.getOwnPropertyNames(X).concat(Object.getOwnPropertySymbols(X))}:function(X){return Object.getOwnPropertyNames(X)};var N=Number.isNaN||function(X){return X!=X};function G(){G.init.call(this)}xe.exports=G,xe.exports.once=function q(J,X){return new Promise(function(Q,oe){function ne(pe){J.removeListener(X,me),oe(pe)}function me(){"function"==typeof J.removeListener&&J.removeListener("error",ne),Q([].slice.call(arguments))}K(J,X,me,{once:!0}),"error"!==X&&function W(J,X,Q){"function"==typeof J.on&&K(J,"error",X,Q)}(J,ne,{once:!0})})},G.EventEmitter=G,G.prototype._events=void 0,G.prototype._eventsCount=0,G.prototype._maxListeners=void 0;var v=10;function B(J){if("function"!=typeof J)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof J)}function _(J){return void 0===J._maxListeners?G.defaultMaxListeners:J._maxListeners}function T(J,X,Q,oe){var ne,me,pe;if(B(Q),void 0===(me=J._events)?(me=J._events=Object.create(null),J._eventsCount=0):(void 0!==me.newListener&&(J.emit("newListener",X,Q.listener?Q.listener:Q),me=J._events),pe=me[X]),void 0===pe)pe=me[X]=Q,++J._eventsCount;else if("function"==typeof pe?pe=me[X]=oe?[Q,pe]:[pe,Q]:oe?pe.unshift(Q):pe.push(Q),(ne=_(J))>0&&pe.length>ne&&!pe.warned){pe.warned=!0;var Ie=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String(X)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ie.name="MaxListenersExceededWarning",Ie.emitter=J,Ie.type=X,Ie.count=pe.length,function H(J){console&&console.warn&&console.warn(J)}(Ie)}return J}function D(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $(J,X,Q){var oe={fired:!1,wrapFn:void 0,target:J,type:X,listener:Q},ne=D.bind(oe);return ne.listener=Q,oe.wrapFn=ne,ne}function M(J,X,Q){var oe=J._events;if(void 0===oe)return[];var ne=oe[X];return void 0===ne?[]:"function"==typeof ne?Q?[ne.listener||ne]:[ne]:Q?function Z(J){for(var X=new Array(J.length),Q=0;Q<X.length;++Q)X[Q]=J[Q].listener||J[Q];return X}(ne):k(ne,ne.length)}function F(J){var X=this._events;if(void 0!==X){var Q=X[J];if("function"==typeof Q)return 1;if(void 0!==Q)return Q.length}return 0}function k(J,X){for(var Q=new Array(X),oe=0;oe<X;++oe)Q[oe]=J[oe];return Q}function K(J,X,Q,oe){if("function"==typeof J.on)oe.once?J.once(X,Q):J.on(X,Q);else{if("function"!=typeof J.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof J);J.addEventListener(X,function ne(me){oe.once&&J.removeEventListener(X,ne),Q(me)})}}Object.defineProperty(G,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(J){if("number"!=typeof J||J<0||N(J))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+J+".");v=J}}),G.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},G.prototype.setMaxListeners=function(X){if("number"!=typeof X||X<0||N(X))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+X+".");return this._maxListeners=X,this},G.prototype.getMaxListeners=function(){return _(this)},G.prototype.emit=function(X){for(var Q=[],oe=1;oe<arguments.length;oe++)Q.push(arguments[oe]);var ne="error"===X,me=this._events;if(void 0!==me)ne=ne&&void 0===me.error;else if(!ne)return!1;if(ne){var pe;if(Q.length>0&&(pe=Q[0]),pe instanceof Error)throw pe;var Ie=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw Ie.context=pe,Ie}var E=me[X];if(void 0===E)return!1;if("function"==typeof E)I(E,this,Q);else{var a=E.length,f=k(E,a);for(oe=0;oe<a;++oe)I(f[oe],this,Q)}return!0},G.prototype.on=G.prototype.addListener=function(X,Q){return T(this,X,Q,!1)},G.prototype.prependListener=function(X,Q){return T(this,X,Q,!0)},G.prototype.once=function(X,Q){return B(Q),this.on(X,$(this,X,Q)),this},G.prototype.prependOnceListener=function(X,Q){return B(Q),this.prependListener(X,$(this,X,Q)),this},G.prototype.off=G.prototype.removeListener=function(X,Q){var oe,ne,me,pe,Ie;if(B(Q),void 0===(ne=this._events))return this;if(void 0===(oe=ne[X]))return this;if(oe===Q||oe.listener===Q)0==--this._eventsCount?this._events=Object.create(null):(delete ne[X],ne.removeListener&&this.emit("removeListener",X,oe.listener||Q));else if("function"!=typeof oe){for(me=-1,pe=oe.length-1;pe>=0;pe--)if(oe[pe]===Q||oe[pe].listener===Q){Ie=oe[pe].listener,me=pe;break}if(me<0)return this;0===me?oe.shift():function j(J,X){for(;X+1<J.length;X++)J[X]=J[X+1];J.pop()}(oe,me),1===oe.length&&(ne[X]=oe[0]),void 0!==ne.removeListener&&this.emit("removeListener",X,Ie||Q)}return this},G.prototype.removeAllListeners=function(X){var Q,oe,ne;if(void 0===(oe=this._events))return this;if(void 0===oe.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==oe[X]&&(0==--this._eventsCount?this._events=Object.create(null):delete oe[X]),this;if(0===arguments.length){var pe,me=Object.keys(oe);for(ne=0;ne<me.length;++ne)"removeListener"!==(pe=me[ne])&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(Q=oe[X]))this.removeListener(X,Q);else if(void 0!==Q)for(ne=Q.length-1;ne>=0;ne--)this.removeListener(X,Q[ne]);return this},G.prototype.listeners=function(X){return M(this,X,!0)},G.prototype.rawListeners=function(X){return M(this,X,!1)},G.listenerCount=function(J,X){return"function"==typeof J.listenerCount?J.listenerCount(X):F.call(J,X)},G.prototype.listenerCount=F,G.prototype.eventNames=function(){return this._eventsCount>0?C(this._events):[]}},18211:(xe,O,I)=>{var C=I(27054).Buffer,H=I(34725);xe.exports=function N(G,v,B,_){if(C.isBuffer(G)||(G=C.from(G,"binary")),v&&(C.isBuffer(v)||(v=C.from(v,"binary")),8!==v.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var T=B/8,D=C.alloc(T),$=C.alloc(_||0),M=C.alloc(0);T>0||_>0;){var F=new H;F.update(M),F.update(G),v&&F.update(v),M=F.digest();var k=0;if(T>0){var j=D.length-T;k=Math.min(T,M.length),M.copy(D,j,0,k),T-=k}if(k<M.length&&_>0){var Z=$.length-_,q=Math.min(_,M.length-k);M.copy($,Z,k,k+q),_-=q}}return M.fill(0),{key:D,iv:$}}},40362:xe=>{"use strict";xe.exports=function O(I,C){if(I===C)return!0;if(I&&C&&"object"==typeof I&&"object"==typeof C){if(I.constructor!==C.constructor)return!1;var H,N,G;if(Array.isArray(I)){if((H=I.length)!=C.length)return!1;for(N=H;0!=N--;)if(!O(I[N],C[N]))return!1;return!0}if(I.constructor===RegExp)return I.source===C.source&&I.flags===C.flags;if(I.valueOf!==Object.prototype.valueOf)return I.valueOf()===C.valueOf();if(I.toString!==Object.prototype.toString)return I.toString()===C.toString();if((H=(G=Object.keys(I)).length)!==Object.keys(C).length)return!1;for(N=H;0!=N--;)if(!Object.prototype.hasOwnProperty.call(C,G[N]))return!1;for(N=H;0!=N--;){var v=G[N];if(!O(I[v],C[v]))return!1}return!0}return I!=I&&C!=C}},13686:(xe,O,I)=>{"use strict";var C=I(27054).Buffer,H=I(7045).Transform;function v(B){H.call(this),this._block=C.allocUnsafe(B),this._blockSize=B,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}I(71993)(v,H),v.prototype._transform=function(B,_,T){var D=null;try{this.update(B,_)}catch($){D=$}T(D)},v.prototype._flush=function(B){var _=null;try{this.push(this.digest())}catch(T){_=T}B(_)},v.prototype.update=function(B,_){if(function G(B,_){if(!C.isBuffer(B)&&"string"!=typeof B)throw new TypeError(_+" must be a string or a buffer")}(B,"Data"),this._finalized)throw new Error("Digest already called");C.isBuffer(B)||(B=C.from(B,_));for(var T=this._block,D=0;this._blockOffset+B.length-D>=this._blockSize;){for(var $=this._blockOffset;$<this._blockSize;)T[$++]=B[D++];this._update(),this._blockOffset=0}for(;D<B.length;)T[this._blockOffset++]=B[D++];for(var M=0,F=8*B.length;F>0;++M)this._length[M]+=F,(F=this._length[M]/4294967296|0)>0&&(this._length[M]-=4294967296*F);return this},v.prototype._update=function(){throw new Error("_update is not implemented")},v.prototype.digest=function(B){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var _=this._digest();void 0!==B&&(_=_.toString(B)),this._block.fill(0),this._blockOffset=0;for(var T=0;T<4;++T)this._length[T]=0;return _},v.prototype._digest=function(){throw new Error("_digest is not implemented")},xe.exports=v},52529:(xe,O,I)=>{var C=O;C.utils=I(68283),C.common=I(12901),C.sha=I(78528),C.ripemd=I(15283),C.hmac=I(37163),C.sha1=C.sha.sha1,C.sha256=C.sha.sha256,C.sha224=C.sha.sha224,C.sha384=C.sha.sha384,C.sha512=C.sha.sha512,C.ripemd160=C.ripemd.ripemd160},12901:(xe,O,I)=>{"use strict";var C=I(68283),H=I(39210);function N(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}O.BlockHash=N,N.prototype.update=function(v,B){if(v=C.toArray(v,B),this.pending=this.pending?this.pending.concat(v):v,this.pendingTotal+=v.length,this.pending.length>=this._delta8){var _=(v=this.pending).length%this._delta8;this.pending=v.slice(v.length-_,v.length),0===this.pending.length&&(this.pending=null),v=C.join32(v,0,v.length-_,this.endian);for(var T=0;T<v.length;T+=this._delta32)this._update(v,T,T+this._delta32)}return this},N.prototype.digest=function(v){return this.update(this._pad()),H(null===this.pending),this._digest(v)},N.prototype._pad=function(){var v=this.pendingTotal,B=this._delta8,_=B-(v+this.padLength)%B,T=new Array(_+this.padLength);T[0]=128;for(var D=1;D<_;D++)T[D]=0;if(v<<=3,"big"===this.endian){for(var $=8;$<this.padLength;$++)T[D++]=0;T[D++]=0,T[D++]=0,T[D++]=0,T[D++]=0,T[D++]=v>>>24&255,T[D++]=v>>>16&255,T[D++]=v>>>8&255,T[D++]=255&v}else for(T[D++]=255&v,T[D++]=v>>>8&255,T[D++]=v>>>16&255,T[D++]=v>>>24&255,T[D++]=0,T[D++]=0,T[D++]=0,T[D++]=0,$=8;$<this.padLength;$++)T[D++]=0;return T}},37163:(xe,O,I)=>{"use strict";var C=I(68283),H=I(39210);function N(G,v,B){if(!(this instanceof N))return new N(G,v,B);this.Hash=G,this.blockSize=G.blockSize/8,this.outSize=G.outSize/8,this.inner=null,this.outer=null,this._init(C.toArray(v,B))}xe.exports=N,N.prototype._init=function(v){v.length>this.blockSize&&(v=(new this.Hash).update(v).digest()),H(v.length<=this.blockSize);for(var B=v.length;B<this.blockSize;B++)v.push(0);for(B=0;B<v.length;B++)v[B]^=54;for(this.inner=(new this.Hash).update(v),B=0;B<v.length;B++)v[B]^=106;this.outer=(new this.Hash).update(v)},N.prototype.update=function(v,B){return this.inner.update(v,B),this},N.prototype.digest=function(v){return this.outer.update(this.inner.digest()),this.outer.digest(v)}},15283:(xe,O,I)=>{"use strict";var C=I(68283),H=I(12901),N=C.rotl32,G=C.sum32,v=C.sum32_3,B=C.sum32_4,_=H.BlockHash;function T(){if(!(this instanceof T))return new T;_.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function D(q,W,K,J){return q<=15?W^K^J:q<=31?W&K|~W&J:q<=47?(W|~K)^J:q<=63?W&J|K&~J:W^(K|~J)}function M(q){return q<=15?1352829926:q<=31?1548603684:q<=47?1836072691:q<=63?2053994217:0}C.inherits(T,_),O.ripemd160=T,T.blockSize=512,T.outSize=160,T.hmacStrength=192,T.padLength=64,T.prototype._update=function(W,K){for(var J=this.h[0],X=this.h[1],Q=this.h[2],oe=this.h[3],ne=this.h[4],me=J,pe=X,Ie=Q,E=oe,a=ne,f=0;f<80;f++){var l=G(N(B(J,D(f,X,Q,oe),W[F[f]+K],(q=f)<=15?0:q<=31?1518500249:q<=47?1859775393:q<=63?2400959708:2840853838),j[f]),ne);J=ne,ne=oe,oe=N(Q,10),Q=X,X=l,l=G(N(B(me,D(79-f,pe,Ie,E),W[k[f]+K],M(f)),Z[f]),a),me=a,a=E,E=N(Ie,10),Ie=pe,pe=l}var q;l=v(this.h[1],Q,E),this.h[1]=v(this.h[2],oe,a),this.h[2]=v(this.h[3],ne,me),this.h[3]=v(this.h[4],J,pe),this.h[4]=v(this.h[0],X,Ie),this.h[0]=l},T.prototype._digest=function(W){return"hex"===W?C.toHex32(this.h,"little"):C.split32(this.h,"little")};var F=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],k=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],j=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Z=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},78528:(xe,O,I)=>{"use strict";O.sha1=I(33468),O.sha224=I(5563),O.sha256=I(27138),O.sha384=I(93898),O.sha512=I(10827)},33468:(xe,O,I)=>{"use strict";var C=I(68283),H=I(12901),N=I(95542),G=C.rotl32,v=C.sum32,B=C.sum32_5,_=N.ft_1,T=H.BlockHash,D=[1518500249,1859775393,2400959708,3395469782];function $(){if(!(this instanceof $))return new $;T.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}C.inherits($,T),xe.exports=$,$.blockSize=512,$.outSize=160,$.hmacStrength=80,$.padLength=64,$.prototype._update=function(F,k){for(var j=this.W,Z=0;Z<16;Z++)j[Z]=F[k+Z];for(;Z<j.length;Z++)j[Z]=G(j[Z-3]^j[Z-8]^j[Z-14]^j[Z-16],1);var q=this.h[0],W=this.h[1],K=this.h[2],J=this.h[3],X=this.h[4];for(Z=0;Z<j.length;Z++){var Q=~~(Z/20),oe=B(G(q,5),_(Q,W,K,J),X,j[Z],D[Q]);X=J,J=K,K=G(W,30),W=q,q=oe}this.h[0]=v(this.h[0],q),this.h[1]=v(this.h[1],W),this.h[2]=v(this.h[2],K),this.h[3]=v(this.h[3],J),this.h[4]=v(this.h[4],X)},$.prototype._digest=function(F){return"hex"===F?C.toHex32(this.h,"big"):C.split32(this.h,"big")}},5563:(xe,O,I)=>{"use strict";var C=I(68283),H=I(27138);function N(){if(!(this instanceof N))return new N;H.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}C.inherits(N,H),xe.exports=N,N.blockSize=512,N.outSize=224,N.hmacStrength=192,N.padLength=64,N.prototype._digest=function(v){return"hex"===v?C.toHex32(this.h.slice(0,7),"big"):C.split32(this.h.slice(0,7),"big")}},27138:(xe,O,I)=>{"use strict";var C=I(68283),H=I(12901),N=I(95542),G=I(39210),v=C.sum32,B=C.sum32_4,_=C.sum32_5,T=N.ch32,D=N.maj32,$=N.s0_256,M=N.s1_256,F=N.g0_256,k=N.g1_256,j=H.BlockHash,Z=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function q(){if(!(this instanceof q))return new q;j.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Z,this.W=new Array(64)}C.inherits(q,j),xe.exports=q,q.blockSize=512,q.outSize=256,q.hmacStrength=192,q.padLength=64,q.prototype._update=function(K,J){for(var X=this.W,Q=0;Q<16;Q++)X[Q]=K[J+Q];for(;Q<X.length;Q++)X[Q]=B(k(X[Q-2]),X[Q-7],F(X[Q-15]),X[Q-16]);var oe=this.h[0],ne=this.h[1],me=this.h[2],pe=this.h[3],Ie=this.h[4],E=this.h[5],a=this.h[6],f=this.h[7];for(G(this.k.length===X.length),Q=0;Q<X.length;Q++){var l=_(f,M(Ie),T(Ie,E,a),this.k[Q],X[Q]),h=v($(oe),D(oe,ne,me));f=a,a=E,E=Ie,Ie=v(pe,l),pe=me,me=ne,ne=oe,oe=v(l,h)}this.h[0]=v(this.h[0],oe),this.h[1]=v(this.h[1],ne),this.h[2]=v(this.h[2],me),this.h[3]=v(this.h[3],pe),this.h[4]=v(this.h[4],Ie),this.h[5]=v(this.h[5],E),this.h[6]=v(this.h[6],a),this.h[7]=v(this.h[7],f)},q.prototype._digest=function(K){return"hex"===K?C.toHex32(this.h,"big"):C.split32(this.h,"big")}},93898:(xe,O,I)=>{"use strict";var C=I(68283),H=I(10827);function N(){if(!(this instanceof N))return new N;H.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}C.inherits(N,H),xe.exports=N,N.blockSize=1024,N.outSize=384,N.hmacStrength=192,N.padLength=128,N.prototype._digest=function(v){return"hex"===v?C.toHex32(this.h.slice(0,12),"big"):C.split32(this.h.slice(0,12),"big")}},10827:(xe,O,I)=>{"use strict";var C=I(68283),H=I(12901),N=I(39210),G=C.rotr64_hi,v=C.rotr64_lo,B=C.shr64_hi,_=C.shr64_lo,T=C.sum64,D=C.sum64_hi,$=C.sum64_lo,M=C.sum64_4_hi,F=C.sum64_4_lo,k=C.sum64_5_hi,j=C.sum64_5_lo,Z=H.BlockHash,q=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function W(){if(!(this instanceof W))return new W;Z.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=q,this.W=new Array(160)}function K(l,h,g,x,P){var m=l&g^~l&P;return m<0&&(m+=4294967296),m}function J(l,h,g,x,P,m){var d=h&x^~h&m;return d<0&&(d+=4294967296),d}function X(l,h,g,x,P){var m=l&g^l&P^g&P;return m<0&&(m+=4294967296),m}function Q(l,h,g,x,P,m){var d=h&x^h&m^x&m;return d<0&&(d+=4294967296),d}function oe(l,h){var m=G(l,h,28)^G(h,l,2)^G(h,l,7);return m<0&&(m+=4294967296),m}function ne(l,h){var m=v(l,h,28)^v(h,l,2)^v(h,l,7);return m<0&&(m+=4294967296),m}function me(l,h){var m=G(l,h,14)^G(l,h,18)^G(h,l,9);return m<0&&(m+=4294967296),m}function pe(l,h){var m=v(l,h,14)^v(l,h,18)^v(h,l,9);return m<0&&(m+=4294967296),m}function Ie(l,h){var m=G(l,h,1)^G(l,h,8)^B(l,h,7);return m<0&&(m+=4294967296),m}function E(l,h){var m=v(l,h,1)^v(l,h,8)^_(l,h,7);return m<0&&(m+=4294967296),m}function a(l,h){var m=G(l,h,19)^G(h,l,29)^B(l,h,6);return m<0&&(m+=4294967296),m}function f(l,h){var m=v(l,h,19)^v(h,l,29)^_(l,h,6);return m<0&&(m+=4294967296),m}C.inherits(W,Z),xe.exports=W,W.blockSize=1024,W.outSize=512,W.hmacStrength=192,W.padLength=128,W.prototype._prepareBlock=function(h,g){for(var x=this.W,P=0;P<32;P++)x[P]=h[g+P];for(;P<x.length;P+=2){var m=a(x[P-4],x[P-3]),d=f(x[P-4],x[P-3]),p=x[P-14],V=x[P-13],L=Ie(x[P-30],x[P-29]),Y=E(x[P-30],x[P-29]),le=x[P-32],Se=x[P-31];x[P]=M(m,d,p,V,L,Y,le,Se),x[P+1]=F(m,d,p,V,L,Y,le,Se)}},W.prototype._update=function(h,g){this._prepareBlock(h,g);var x=this.W,P=this.h[0],m=this.h[1],d=this.h[2],p=this.h[3],V=this.h[4],L=this.h[5],Y=this.h[6],le=this.h[7],Se=this.h[8],Oe=this.h[9],Ve=this.h[10],Re=this.h[11],ye=this.h[12],ke=this.h[13],ve=this.h[14],_e=this.h[15];N(this.k.length===x.length);for(var de=0;de<x.length;de+=2){var se=ve,re=_e,ce=me(Se,Oe),ue=pe(Se,Oe),ge=K(Se,0,Ve,0,ye),Ee=J(0,Oe,0,Re,0,ke),Be=this.k[de],De=this.k[de+1],et=x[de],Ke=x[de+1],We=k(se,re,ce,ue,ge,Ee,Be,De,et,Ke),_t=j(se,re,ce,ue,ge,Ee,Be,De,et,Ke);se=oe(P,m),re=ne(P,m),ce=X(P,0,d,0,V),ue=Q(0,m,0,p,0,L);var U=D(se,re,ce,ue),w=$(se,re,ce,ue);ve=ye,_e=ke,ye=Ve,ke=Re,Ve=Se,Re=Oe,Se=D(Y,le,We,_t),Oe=$(le,le,We,_t),Y=V,le=L,V=d,L=p,d=P,p=m,P=D(We,_t,U,w),m=$(We,_t,U,w)}T(this.h,0,P,m),T(this.h,2,d,p),T(this.h,4,V,L),T(this.h,6,Y,le),T(this.h,8,Se,Oe),T(this.h,10,Ve,Re),T(this.h,12,ye,ke),T(this.h,14,ve,_e)},W.prototype._digest=function(h){return"hex"===h?C.toHex32(this.h,"big"):C.split32(this.h,"big")}},95542:(xe,O,I)=>{"use strict";var H=I(68283).rotr32;function G(M,F,k){return M&F^~M&k}function v(M,F,k){return M&F^M&k^F&k}function B(M,F,k){return M^F^k}O.ft_1=function N(M,F,k,j){return 0===M?G(F,k,j):1===M||3===M?B(F,k,j):2===M?v(F,k,j):void 0},O.ch32=G,O.maj32=v,O.p32=B,O.s0_256=function _(M){return H(M,2)^H(M,13)^H(M,22)},O.s1_256=function T(M){return H(M,6)^H(M,11)^H(M,25)},O.g0_256=function D(M){return H(M,7)^H(M,18)^M>>>3},O.g1_256=function $(M){return H(M,17)^H(M,19)^M>>>10}},68283:(xe,O,I)=>{"use strict";var C=I(39210),H=I(71993);function N(f,l){return!(55296!=(64512&f.charCodeAt(l))||l<0||l+1>=f.length)&&56320==(64512&f.charCodeAt(l+1))}function B(f){return(f>>>24|f>>>8&65280|f<<8&16711680|(255&f)<<24)>>>0}function T(f){return 1===f.length?"0"+f:f}function D(f){return 7===f.length?"0"+f:6===f.length?"00"+f:5===f.length?"000"+f:4===f.length?"0000"+f:3===f.length?"00000"+f:2===f.length?"000000"+f:1===f.length?"0000000"+f:f}O.inherits=H,O.toArray=function G(f,l){if(Array.isArray(f))return f.slice();if(!f)return[];var h=[];if("string"==typeof f)if(l){if("hex"===l)for((f=f.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(f="0"+f),x=0;x<f.length;x+=2)h.push(parseInt(f[x]+f[x+1],16))}else for(var g=0,x=0;x<f.length;x++){var P=f.charCodeAt(x);P<128?h[g++]=P:P<2048?(h[g++]=P>>6|192,h[g++]=63&P|128):N(f,x)?(P=65536+((1023&P)<<10)+(1023&f.charCodeAt(++x)),h[g++]=P>>18|240,h[g++]=P>>12&63|128,h[g++]=P>>6&63|128,h[g++]=63&P|128):(h[g++]=P>>12|224,h[g++]=P>>6&63|128,h[g++]=63&P|128)}else for(x=0;x<f.length;x++)h[x]=0|f[x];return h},O.toHex=function v(f){for(var l="",h=0;h<f.length;h++)l+=T(f[h].toString(16));return l},O.htonl=B,O.toHex32=function _(f,l){for(var h="",g=0;g<f.length;g++){var x=f[g];"little"===l&&(x=B(x)),h+=D(x.toString(16))}return h},O.zero2=T,O.zero8=D,O.join32=function $(f,l,h,g){var x=h-l;C(x%4==0);for(var P=new Array(x/4),m=0,d=l;m<P.length;m++,d+=4)P[m]=("big"===g?f[d]<<24|f[d+1]<<16|f[d+2]<<8|f[d+3]:f[d+3]<<24|f[d+2]<<16|f[d+1]<<8|f[d])>>>0;return P},O.split32=function M(f,l){for(var h=new Array(4*f.length),g=0,x=0;g<f.length;g++,x+=4){var P=f[g];"big"===l?(h[x]=P>>>24,h[x+1]=P>>>16&255,h[x+2]=P>>>8&255,h[x+3]=255&P):(h[x+3]=P>>>24,h[x+2]=P>>>16&255,h[x+1]=P>>>8&255,h[x]=255&P)}return h},O.rotr32=function F(f,l){return f>>>l|f<<32-l},O.rotl32=function k(f,l){return f<<l|f>>>32-l},O.sum32=function j(f,l){return f+l>>>0},O.sum32_3=function Z(f,l,h){return f+l+h>>>0},O.sum32_4=function q(f,l,h,g){return f+l+h+g>>>0},O.sum32_5=function W(f,l,h,g,x){return f+l+h+g+x>>>0},O.sum64=function K(f,l,h,g){var m=g+f[l+1]>>>0;f[l]=(m<g?1:0)+h+f[l]>>>0,f[l+1]=m},O.sum64_hi=function J(f,l,h,g){return(l+g>>>0<l?1:0)+f+h>>>0},O.sum64_lo=function X(f,l,h,g){return l+g>>>0},O.sum64_4_hi=function Q(f,l,h,g,x,P,m,d){var p=0,V=l;return p+=(V=V+g>>>0)<l?1:0,p+=(V=V+P>>>0)<P?1:0,f+h+x+m+(p+=(V=V+d>>>0)<d?1:0)>>>0},O.sum64_4_lo=function oe(f,l,h,g,x,P,m,d){return l+g+P+d>>>0},O.sum64_5_hi=function ne(f,l,h,g,x,P,m,d,p,V){var L=0,Y=l;return L+=(Y=Y+g>>>0)<l?1:0,L+=(Y=Y+P>>>0)<P?1:0,L+=(Y=Y+d>>>0)<d?1:0,f+h+x+m+p+(L+=(Y=Y+V>>>0)<V?1:0)>>>0},O.sum64_5_lo=function me(f,l,h,g,x,P,m,d,p,V){return l+g+P+d+V>>>0},O.rotr64_hi=function pe(f,l,h){return(l<<32-h|f>>>h)>>>0},O.rotr64_lo=function Ie(f,l,h){return(f<<32-h|l>>>h)>>>0},O.shr64_hi=function E(f,l,h){return f>>>h},O.shr64_lo=function a(f,l,h){return(f<<32-h|l>>>h)>>>0}},33556:(xe,O,I)=>{"use strict";var C=I(52529),H=I(21832),N=I(39210);function G(v){if(!(this instanceof G))return new G(v);this.hash=v.hash,this.predResist=!!v.predResist,this.outLen=this.hash.outSize,this.minEntropy=v.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var B=H.toArray(v.entropy,v.entropyEnc||"hex"),_=H.toArray(v.nonce,v.nonceEnc||"hex"),T=H.toArray(v.pers,v.persEnc||"hex");N(B.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(B,_,T)}xe.exports=G,G.prototype._init=function(B,_,T){var D=B.concat(_).concat(T);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var $=0;$<this.V.length;$++)this.K[$]=0,this.V[$]=1;this._update(D),this._reseed=1,this.reseedInterval=281474976710656},G.prototype._hmac=function(){return new C.hmac(this.hash,this.K)},G.prototype._update=function(B){var _=this._hmac().update(this.V).update([0]);B&&(_=_.update(B)),this.K=_.digest(),this.V=this._hmac().update(this.V).digest(),B&&(this.K=this._hmac().update(this.V).update([1]).update(B).digest(),this.V=this._hmac().update(this.V).digest())},G.prototype.reseed=function(B,_,T,D){"string"!=typeof _&&(D=T,T=_,_=null),B=H.toArray(B,_),T=H.toArray(T,D),N(B.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(B.concat(T||[])),this._reseed=1},G.prototype.generate=function(B,_,T,D){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof _&&(D=T,T=_,_=null),T&&(T=H.toArray(T,D||"hex"),this._update(T));for(var $=[];$.length<B;)this.V=this._hmac().update(this.V).digest(),$=$.concat(this.V);var M=$.slice(0,B);return this._update(T),this._reseed++,H.encode(M,_)}},22020:(xe,O)=>{O.read=function(I,C,H,N,G){var v,B,_=8*G-N-1,T=(1<<_)-1,D=T>>1,$=-7,M=H?G-1:0,F=H?-1:1,k=I[C+M];for(M+=F,v=k&(1<<-$)-1,k>>=-$,$+=_;$>0;v=256*v+I[C+M],M+=F,$-=8);for(B=v&(1<<-$)-1,v>>=-$,$+=N;$>0;B=256*B+I[C+M],M+=F,$-=8);if(0===v)v=1-D;else{if(v===T)return B?NaN:1/0*(k?-1:1);B+=Math.pow(2,N),v-=D}return(k?-1:1)*B*Math.pow(2,v-N)},O.write=function(I,C,H,N,G,v){var B,_,T,D=8*v-G-1,$=(1<<D)-1,M=$>>1,F=23===G?Math.pow(2,-24)-Math.pow(2,-77):0,k=N?0:v-1,j=N?1:-1,Z=C<0||0===C&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(_=isNaN(C)?1:0,B=$):(B=Math.floor(Math.log(C)/Math.LN2),C*(T=Math.pow(2,-B))<1&&(B--,T*=2),(C+=B+M>=1?F/T:F*Math.pow(2,1-M))*T>=2&&(B++,T/=2),B+M>=$?(_=0,B=$):B+M>=1?(_=(C*T-1)*Math.pow(2,G),B+=M):(_=C*Math.pow(2,M-1)*Math.pow(2,G),B=0));G>=8;I[H+k]=255&_,k+=j,_/=256,G-=8);for(B=B<<G|_,D+=G;D>0;I[H+k]=255&B,k+=j,B/=256,D-=8);I[H+k-j]|=128*Z}},71993:xe=>{xe.exports="function"==typeof Object.create?function(I,C){C&&(I.super_=C,I.prototype=Object.create(C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}))}:function(I,C){if(C){I.super_=C;var H=function(){};H.prototype=C.prototype,I.prototype=new H,I.prototype.constructor=I}}},42853:xe=>{"use strict";function O(C,H){for(const N in H)Object.defineProperty(C,N,{value:H[N],enumerable:!0,configurable:!0});return C}xe.exports=function I(C,H,N){if(!C||"string"==typeof C)throw new TypeError("Please pass an Error to err-code");N||(N={}),"object"==typeof H&&(N=H,H=""),H&&(N.code=H);try{return O(C,N)}catch{N.message=C.message,N.stack=C.stack;const v=function(){};return v.prototype=Object.create(Object.getPrototypeOf(C)),O(new v,N)}}},5014:xe=>{"use strict";function O(C,H){for(const N in H)Object.defineProperty(C,N,{value:H[N],enumerable:!0,configurable:!0});return C}xe.exports=function I(C,H,N){if(!C||"string"==typeof C)throw new TypeError("Please pass an Error to err-code");N||(N={}),"object"==typeof H&&(N=H,H=""),H&&(N.code=H);try{return O(C,N)}catch{N.message=C.message,N.stack=C.stack;const v=function(){};return v.prototype=Object.create(Object.getPrototypeOf(C)),O(new v,N)}}},3087:xe=>{"use strict";function O(C,H){for(const N in H)Object.defineProperty(C,N,{value:H[N],enumerable:!0,configurable:!0});return C}xe.exports=function I(C,H,N){if(!C||"string"==typeof C)throw new TypeError("Please pass an Error to err-code");N||(N={}),"object"==typeof H&&(N=H,H=""),H&&(N.code=H);try{return O(C,N)}catch{N.message=C.message,N.stack=C.stack;const v=function(){};return v.prototype=Object.create(Object.getPrototypeOf(C)),O(new v,N)}}},20053:xe=>{var O={}.toString;xe.exports=Array.isArray||function(I){return"[object Array]"==O.call(I)}},89994:function(xe){xe.exports=function(){"use strict";var O=Math.imul,I=Math.clz32;function C(ne){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(me){return typeof me}:function(me){return me&&"function"==typeof Symbol&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(ne)}function N(ne,me){for(var pe,Ie=0;Ie<me.length;Ie++)(pe=me[Ie]).enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ne,pe.key,pe)}function B(ne){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(me){return me.__proto__||Object.getPrototypeOf(me)})(ne)}function _(ne,me){return(_=Object.setPrototypeOf||function(pe,Ie){return pe.__proto__=Ie,pe})(ne,me)}function T(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(){return(D=T()?Reflect.construct:function(ne,me,pe){var Ie=[null];Ie.push.apply(Ie,me);var a=new(Function.bind.apply(ne,Ie));return pe&&_(a,pe.prototype),a}).apply(null,arguments)}function M(ne){var me="function"==typeof Map?new Map:void 0;return M=function(pe){function Ie(){return D(pe,arguments,B(this).constructor)}if(null===pe||!function $(ne){return-1!==Function.toString.call(ne).indexOf("[native code]")}(pe))return pe;if("function"!=typeof pe)throw new TypeError("Super expression must either be null or a function");if(typeof me<"u"){if(me.has(pe))return me.get(pe);me.set(pe,Ie)}return Ie.prototype=Object.create(pe.prototype,{constructor:{value:Ie,enumerable:!1,writable:!0,configurable:!0}}),_(Ie,pe)},M(ne)}function F(ne){if(void 0===ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function j(ne){var me=T();return function(){var pe,Ie=B(ne);if(me){var E=B(this).constructor;pe=Reflect.construct(Ie,arguments,E)}else pe=Ie.apply(this,arguments);return function k(ne,me){if(me&&("object"==typeof me||"function"==typeof me))return me;if(void 0!==me)throw new TypeError("Derived constructors may only return object or undefined");return F(ne)}(this,pe)}}function Z(ne,me){return function q(ne){if(Array.isArray(ne))return ne}(ne)||function W(ne,me){var pe=null==ne?null:typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(null!=pe){var Ie,E,a=[],f=!0,l=!1;try{for(pe=pe.call(ne);!(f=(Ie=pe.next()).done)&&(a.push(Ie.value),!me||a.length!==me);f=!0);}catch(h){l=!0,E=h}finally{try{f||null==pe.return||pe.return()}finally{if(l)throw E}}return a}}(ne,me)||K(ne,me)||function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(ne,me){if(ne){if("string"==typeof ne)return J(ne,me);var pe=Object.prototype.toString.call(ne).slice(8,-1);return"Object"===pe&&ne.constructor&&(pe=ne.constructor.name),"Map"===pe||"Set"===pe?Array.from(ne):"Arguments"===pe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe)?J(ne,me):void 0}}function J(ne,me){(null==me||me>ne.length)&&(me=ne.length);for(var pe=0,Ie=Array(me);pe<me;pe++)Ie[pe]=ne[pe];return Ie}var oe=function(ne){var me=Math.abs,pe=Math.max,Ie=Math.floor;function E(f,l){var h;if(function H(ne,me){if(!(ne instanceof me))throw new TypeError("Cannot call a class as a function")}(this,E),(h=a.call(this,f)).sign=l,Object.setPrototypeOf(F(h),E.prototype),f>E.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return h}!function v(ne,me){if("function"!=typeof me&&null!==me)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(me&&me.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),Object.defineProperty(ne,"prototype",{writable:!1}),me&&_(ne,me)}(E,ne);var a=j(E);return function G(ne,me,pe){return me&&N(ne.prototype,me),pe&&N(ne,pe),Object.defineProperty(ne,"prototype",{writable:!1}),ne}(E,[{key:"toDebugString",value:function(){var f,l=["BigInt["],h=function Q(ne,me){var pe=typeof Symbol<"u"&&ne[Symbol.iterator]||ne["@@iterator"];if(!pe){if(Array.isArray(ne)||(pe=K(ne))||me&&ne&&"number"==typeof ne.length){pe&&(ne=pe);var Ie=0,E=function(){};return{s:E,n:function(){return Ie>=ne.length?{done:!0}:{done:!1,value:ne[Ie++]}},e:function(h){throw h},f:E}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,f=!0,l=!1;return{s:function(){pe=pe.call(ne)},n:function(){var h=pe.next();return f=h.done,h},e:function(h){l=!0,a=h},f:function(){try{f||null==pe.return||pe.return()}finally{if(l)throw a}}}}(this);try{for(h.s();!(f=h.n()).done;){var g=f.value;l.push((g&&(g>>>0).toString(16))+", ")}}catch(x){h.e(x)}finally{h.f()}return l.push("]"),l.join("")}},{key:"toString",value:function(){var f=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>f||36<f)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":f&f-1?E.__toStringGeneric(this,f,!1):E.__toStringBasePowerOfTwo(this,f)}},{key:"valueOf",value:function(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}},{key:"__copy",value:function(){for(var f=new E(this.length,this.sign),l=0;l<this.length;l++)f[l]=this[l];return f}},{key:"__trim",value:function(){for(var f=this.length,l=this[f-1];0===l;)l=this[--f-1],this.pop();return 0===f&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var f=0;f<this.length;f++)this[f]=0}},{key:"__clzmsd",value:function(){return E.__clz30(this.__digit(this.length-1))}},{key:"__inplaceMultiplyAdd",value:function(f,l,h){h>this.length&&(h=this.length);for(var g=32767&f,x=f>>>15,P=0,m=l,d=0;d<h;d++){var p=this.__digit(d),V=32767&p,L=p>>>15,Y=E.__imul(V,g),le=E.__imul(V,x),Se=E.__imul(L,g),Ve=m+Y+P;P=Ve>>>30,Ve&=1073741823,P+=(Ve+=((32767&le)<<15)+((32767&Se)<<15))>>>30,m=E.__imul(L,x)+(le>>>15)+(Se>>>15),this.__setDigit(d,1073741823&Ve)}if(0!==P||0!==m)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(f,l,h){for(var g,x=0,P=0;P<h;P++)x=(g=this.__halfDigit(l+P)+f.__halfDigit(P)+x)>>>15,this.__setHalfDigit(l+P,32767&g);return x}},{key:"__inplaceSub",value:function(f,l,h){var g=0;if(1&l){for(var x=this.__digit(l>>=1),P=32767&x,m=0;m<h-1>>>1;m++){var d=f.__digit(m),p=(x>>>15)-(32767&d)-g;g=1&p>>>15,this.__setDigit(l+m,(32767&p)<<15|32767&P),g=1&(P=(32767&(x=this.__digit(l+m+1)))-(d>>>15)-g)>>>15}var V=f.__digit(m),L=(x>>>15)-(32767&V)-g;if(g=1&L>>>15,this.__setDigit(l+m,(32767&L)<<15|32767&P),l+m+1>=this.length)throw new RangeError("out of bounds");!(1&h)&&(g=1&(P=(32767&(x=this.__digit(l+m+1)))-(V>>>15)-g)>>>15,this.__setDigit(l+f.length,1073709056&x|32767&P))}else{l>>=1;for(var Y=0;Y<f.length-1;Y++){var le=this.__digit(l+Y),Se=f.__digit(Y),Oe=(32767&le)-(32767&Se)-g,Ve=(le>>>15)-(Se>>>15)-(g=1&Oe>>>15);g=1&Ve>>>15,this.__setDigit(l+Y,(32767&Ve)<<15|32767&Oe)}var Re=this.__digit(l+Y),ye=f.__digit(Y),ke=(32767&Re)-(32767&ye)-g;g=1&ke>>>15;var ve=0;!(1&h)&&(g=1&(ve=(Re>>>15)-(ye>>>15)-g)>>>15),this.__setDigit(l+Y,(32767&ve)<<15|32767&ke)}return g}},{key:"__inplaceRightShift",value:function(f){if(0!==f){for(var l,h=this.__digit(0)>>>f,g=this.length-1,x=0;x<g;x++)l=this.__digit(x+1),this.__setDigit(x,1073741823&l<<30-f|h),h=l>>>f;this.__setDigit(g,h)}}},{key:"__digit",value:function(f){return this[f]}},{key:"__unsignedDigit",value:function(f){return this[f]>>>0}},{key:"__setDigit",value:function(f,l){this[f]=0|l}},{key:"__setDigitGrow",value:function(f,l){this[f]=0|l}},{key:"__halfDigitLength",value:function(){var f=this.length;return 32767>=this.__unsignedDigit(f-1)?2*f-1:2*f}},{key:"__halfDigit",value:function(f){return 32767&this[f>>>1]>>>15*(1&f)}},{key:"__setHalfDigit",value:function(f,l){var h=f>>>1,g=this.__digit(h);this.__setDigit(h,1&f?32767&g|l<<15:1073709056&g|32767&l)}}],[{key:"BigInt",value:function(f){var l=Number.isFinite;if("number"==typeof f){if(0===f)return E.__zero();if(E.__isOneDigitInt(f))return 0>f?E.__oneDigit(-f,!0):E.__oneDigit(f,!1);if(!l(f)||Ie(f)!==f)throw new RangeError("The number "+f+" cannot be converted to BigInt because it is not an integer");return E.__fromDouble(f)}if("string"==typeof f){var h=E.__fromString(f);if(null===h)throw new SyntaxError("Cannot convert "+f+" to a BigInt");return h}if("boolean"==typeof f)return!0===f?E.__oneDigit(1,!1):E.__zero();if("object"===C(f)){if(f.constructor===E)return f;var g=E.__toPrimitive(f);return E.BigInt(g)}throw new TypeError("Cannot convert "+f+" to a BigInt")}},{key:"toNumber",value:function(f){var l=f.length;if(0===l)return 0;if(1===l){var h=f.__unsignedDigit(0);return f.sign?-h:h}var g=f.__digit(l-1),x=E.__clz30(g),P=30*l-x;if(1024<P)return f.sign?-1/0:1/0;var m=P-1,d=g,p=l-1,V=x+3,L=32===V?0:d<<V;L>>>=12;var Y=V-12,le=12<=V?0:d<<20+V,Se=20+V;for(0<Y&&0<p&&(p--,L|=(d=f.__digit(p))>>>30-Y,le=d<<Y+2,Se=Y+2);0<Se&&0<p;)p--,d=f.__digit(p),le|=30<=Se?d<<Se-30:d>>>30-Se,Se-=30;var Oe=E.__decideRounding(f,Se,p,d);return 1!==Oe&&(0!==Oe||1&~le)||0!=(le=le+1>>>0)||!(++L>>>20!=0&&(L=0,1023<++m))?(E.__kBitConversionInts[1]=(f.sign?-2147483648:0)|(m=m+1023<<20)|L,E.__kBitConversionInts[0]=le,E.__kBitConversionDouble[0]):f.sign?-1/0:1/0}},{key:"unaryMinus",value:function(f){if(0===f.length)return f;var l=f.__copy();return l.sign=!f.sign,l}},{key:"bitwiseNot",value:function(f){return f.sign?E.__absoluteSubOne(f).__trim():E.__absoluteAddOne(f,!0)}},{key:"exponentiate",value:function(f,l){if(l.sign)throw new RangeError("Exponent must be positive");if(0===l.length)return E.__oneDigit(1,!1);if(0===f.length)return f;if(1===f.length&&1===f.__digit(0))return!f.sign||1&l.__digit(0)?f:E.unaryMinus(f);if(1<l.length)throw new RangeError("BigInt too big");var h=l.__unsignedDigit(0);if(1===h)return f;if(h>=E.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===f.length&&2===f.__digit(0)){var g=1+(0|h/30),P=new E(g,f.sign&&!!(1&h));return P.__initializeDigits(),P.__setDigit(g-1,1<<h%30),P}var d=null,p=f;for(1&h&&(d=f),h>>=1;0!==h;h>>=1)p=E.multiply(p,p),1&h&&(d=null===d?p:E.multiply(d,p));return d}},{key:"multiply",value:function(f,l){if(0===f.length)return f;if(0===l.length)return l;var h=f.length+l.length;30<=f.__clzmsd()+l.__clzmsd()&&h--;var g=new E(h,f.sign!==l.sign);g.__initializeDigits();for(var x=0;x<f.length;x++)E.__multiplyAccumulate(l,f.__digit(x),g,x);return g.__trim()}},{key:"divide",value:function(f,l){if(0===l.length)throw new RangeError("Division by zero");if(0>E.__absoluteCompare(f,l))return E.__zero();var h,g=f.sign!==l.sign,x=l.__unsignedDigit(0);if(1===l.length&&32767>=x){if(1===x)return g===f.sign?f:E.unaryMinus(f);h=E.__absoluteDivSmall(f,x,null)}else h=E.__absoluteDivLarge(f,l,!0,!1);return h.sign=g,h.__trim()}},{key:"remainder",value:function(l,h){if(0===h.length)throw new RangeError("Division by zero");if(0>E.__absoluteCompare(l,h))return l;var g=h.__unsignedDigit(0);if(1===h.length&&32767>=g){if(1===g)return E.__zero();var x=E.__absoluteModSmall(l,g);return 0===x?E.__zero():E.__oneDigit(x,l.sign)}var P=E.__absoluteDivLarge(l,h,!1,!0);return P.sign=l.sign,P.__trim()}},{key:"add",value:function(f,l){var h=f.sign;return h===l.sign?E.__absoluteAdd(f,l,h):0<=E.__absoluteCompare(f,l)?E.__absoluteSub(f,l,h):E.__absoluteSub(l,f,!h)}},{key:"subtract",value:function(f,l){var h=f.sign;return h===l.sign?0<=E.__absoluteCompare(f,l)?E.__absoluteSub(f,l,h):E.__absoluteSub(l,f,!h):E.__absoluteAdd(f,l,h)}},{key:"leftShift",value:function(f,l){return 0===l.length||0===f.length?f:l.sign?E.__rightShiftByAbsolute(f,l):E.__leftShiftByAbsolute(f,l)}},{key:"signedRightShift",value:function(f,l){return 0===l.length||0===f.length?f:l.sign?E.__leftShiftByAbsolute(f,l):E.__rightShiftByAbsolute(f,l)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(f,l){return 0>E.__compareToBigInt(f,l)}},{key:"lessThanOrEqual",value:function(f,l){return 0>=E.__compareToBigInt(f,l)}},{key:"greaterThan",value:function(f,l){return 0<E.__compareToBigInt(f,l)}},{key:"greaterThanOrEqual",value:function(f,l){return 0<=E.__compareToBigInt(f,l)}},{key:"equal",value:function(f,l){if(f.sign!==l.sign||f.length!==l.length)return!1;for(var h=0;h<f.length;h++)if(f.__digit(h)!==l.__digit(h))return!1;return!0}},{key:"notEqual",value:function(f,l){return!E.equal(f,l)}},{key:"bitwiseAnd",value:function(f,l){if(!f.sign&&!l.sign)return E.__absoluteAnd(f,l).__trim();if(f.sign&&l.sign){var h=pe(f.length,l.length)+1,g=E.__absoluteSubOne(f,h),x=E.__absoluteSubOne(l);return g=E.__absoluteOr(g,x,g),E.__absoluteAddOne(g,!0,g).__trim()}if(f.sign){var P=[l,f];f=P[0],l=P[1]}return E.__absoluteAndNot(f,E.__absoluteSubOne(l)).__trim()}},{key:"bitwiseXor",value:function(f,l){if(!f.sign&&!l.sign)return E.__absoluteXor(f,l).__trim();if(f.sign&&l.sign){var h=pe(f.length,l.length),g=E.__absoluteSubOne(f,h),x=E.__absoluteSubOne(l);return E.__absoluteXor(g,x,g).__trim()}var P=pe(f.length,l.length)+1;if(f.sign){var m=[l,f];f=m[0],l=m[1]}var d=E.__absoluteSubOne(l,P);return d=E.__absoluteXor(d,f,d),E.__absoluteAddOne(d,!0,d).__trim()}},{key:"bitwiseOr",value:function(f,l){var h=pe(f.length,l.length);if(!f.sign&&!l.sign)return E.__absoluteOr(f,l).__trim();if(f.sign&&l.sign){var g=E.__absoluteSubOne(f,h),x=E.__absoluteSubOne(l);return g=E.__absoluteAnd(g,x,g),E.__absoluteAddOne(g,!0,g).__trim()}if(f.sign){var P=[l,f];f=P[0],l=P[1]}var m=E.__absoluteSubOne(l,h);return m=E.__absoluteAndNot(m,f,m),E.__absoluteAddOne(m,!0,m).__trim()}},{key:"asIntN",value:function(f,l){if(0===l.length)return l;if(0>(f=Ie(f)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===f)return E.__zero();if(f>=E.__kMaxLengthBits)return l;var h=0|(f+29)/30;if(l.length<h)return l;var g=l.__unsignedDigit(h-1),x=1<<(f-1)%30;if(l.length===h&&g<x)return l;if((g&x)!==x)return E.__truncateToNBits(f,l);if(!l.sign)return E.__truncateAndSubFromPowerOfTwo(f,l,!0);if(!(g&x-1)){for(var P=h-2;0<=P;P--)if(0!==l.__digit(P))return E.__truncateAndSubFromPowerOfTwo(f,l,!1);return l.length===h&&g===x?l:E.__truncateToNBits(f,l)}return E.__truncateAndSubFromPowerOfTwo(f,l,!1)}},{key:"asUintN",value:function(f,l){if(0===l.length)return l;if(0>(f=Ie(f)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===f)return E.__zero();if(l.sign){if(f>E.__kMaxLengthBits)throw new RangeError("BigInt too big");return E.__truncateAndSubFromPowerOfTwo(f,l,!1)}if(f>=E.__kMaxLengthBits)return l;var h=0|(f+29)/30;if(l.length<h)return l;var g=f%30;if(l.length==h){if(0===g)return l;if(!(l.__digit(h-1)>>>g))return l}return E.__truncateToNBits(f,l)}},{key:"ADD",value:function(f,l){if(f=E.__toPrimitive(f),l=E.__toPrimitive(l),"string"==typeof f)return"string"!=typeof l&&(l=l.toString()),f+l;if("string"==typeof l)return f.toString()+l;if(f=E.__toNumeric(f),l=E.__toNumeric(l),E.__isBigInt(f)&&E.__isBigInt(l))return E.add(f,l);if("number"==typeof f&&"number"==typeof l)return f+l;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(f,l){return E.__compare(f,l,0)}},{key:"LE",value:function(f,l){return E.__compare(f,l,1)}},{key:"GT",value:function(f,l){return E.__compare(f,l,2)}},{key:"GE",value:function(f,l){return E.__compare(f,l,3)}},{key:"EQ",value:function(f,l){for(;;){if(E.__isBigInt(f))return E.__isBigInt(l)?E.equal(f,l):E.EQ(l,f);if("number"==typeof f){if(E.__isBigInt(l))return E.__equalToNumber(l,f);if("object"!==C(l))return f==l;l=E.__toPrimitive(l)}else if("string"==typeof f){if(E.__isBigInt(l))return null!==(f=E.__fromString(f))&&E.equal(f,l);if("object"!==C(l))return f==l;l=E.__toPrimitive(l)}else if("boolean"==typeof f){if(E.__isBigInt(l))return E.__equalToNumber(l,+f);if("object"!==C(l))return f==l;l=E.__toPrimitive(l)}else if("symbol"===C(f)){if(E.__isBigInt(l))return!1;if("object"!==C(l))return f==l;l=E.__toPrimitive(l)}else{if("object"!==C(f))return f==l;if("object"===C(l)&&l.constructor!==E)return f==l;f=E.__toPrimitive(f)}}}},{key:"NE",value:function(f,l){return!E.EQ(f,l)}},{key:"DataViewGetBigInt64",value:function(f,l){return E.asIntN(64,E.DataViewGetBigUint64(f,l,2<arguments.length&&void 0!==arguments[2]&&arguments[2]))}},{key:"DataViewGetBigUint64",value:function(f,l){var h=2<arguments.length&&void 0!==arguments[2]&&arguments[2],x=Z(h?[4,0]:[0,4],2),m=x[1],d=f.getUint32(l+x[0],h),p=f.getUint32(l+m,h),V=new E(3,!1);return V.__setDigit(0,1073741823&p),V.__setDigit(1,(268435455&d)<<2|p>>>30),V.__setDigit(2,d>>>28),V.__trim()}},{key:"DataViewSetBigInt64",value:function(f,l,h){E.DataViewSetBigUint64(f,l,h,3<arguments.length&&void 0!==arguments[3]&&arguments[3])}},{key:"DataViewSetBigUint64",value:function(f,l,h){var g=3<arguments.length&&void 0!==arguments[3]&&arguments[3],x=0,P=0;if(0<(h=E.asUintN(64,h)).length&&(P=h.__digit(0),1<h.length)){var m=h.__digit(1);P|=m<<30,x=m>>>2,2<h.length&&(x|=h.__digit(2)<<28)}var p=Z(g?[4,0]:[0,4],2),L=p[1];f.setUint32(l+p[0],x,g),f.setUint32(l+L,P,g)}},{key:"__zero",value:function(){return new E(0,!1)}},{key:"__oneDigit",value:function(f,l){var h=new E(1,l);return h.__setDigit(0,f),h}},{key:"__decideRounding",value:function(f,l,h,g){if(0<l)return-1;var x;if(0>l)x=-l-1;else{if(0===h)return-1;h--,g=f.__digit(h),x=29}var P=1<<x;if(!(g&P))return-1;if(g&(P-=1))return 1;for(;0<h;)if(h--,0!==f.__digit(h))return 1;return 0}},{key:"__fromDouble",value:function(f){E.__kBitConversionDouble[0]=f;var l,g=(2047&E.__kBitConversionInts[1]>>>20)-1023,x=1+(0|g/30),P=new E(x,0>f),m=1048575&E.__kBitConversionInts[1]|1048576,d=E.__kBitConversionInts[0],V=g%30,L=0;if(V<20){var Y=20-V;L=Y+32,l=m>>>Y,m=m<<32-Y|d>>>Y,d<<=32-Y}else if(20===V)L=32,l=m,m=d,d=0;else{var le=V-20;L=32-le,l=m<<le|d>>>32-le,m=d<<le,d=0}P.__setDigit(x-1,l);for(var Se=x-2;0<=Se;Se--)0<L?(L-=30,l=m>>>2,m=m<<30|d>>>2,d<<=30):l=0,P.__setDigit(Se,l);return P.__trim()}},{key:"__isWhitespace",value:function(f){return 13>=f&&9<=f||(159>=f?32==f:131071>=f?160==f||5760==f:196607>=f?10>=(f&=131071)||40==f||41==f||47==f||95==f||4096==f:65279==f)}},{key:"__fromString",value:function(f){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,h=0,g=f.length,x=0;if(x===g)return E.__zero();for(var P=f.charCodeAt(x);E.__isWhitespace(P);){if(++x===g)return E.__zero();P=f.charCodeAt(x)}if(43===P){if(++x===g)return null;P=f.charCodeAt(x),h=1}else if(45===P){if(++x===g)return null;P=f.charCodeAt(x),h=-1}if(0===l){if(l=10,48===P){if(++x===g)return E.__zero();if(88===(P=f.charCodeAt(x))||120===P){if(l=16,++x===g)return null;P=f.charCodeAt(x)}else if(79===P||111===P){if(l=8,++x===g)return null;P=f.charCodeAt(x)}else if(66===P||98===P){if(l=2,++x===g)return null;P=f.charCodeAt(x)}}}else if(16===l&&48===P){if(++x===g)return E.__zero();if(88===(P=f.charCodeAt(x))||120===P){if(++x===g)return null;P=f.charCodeAt(x)}}if(0!==h&&10!==l)return null;for(;48===P;){if(++x===g)return E.__zero();P=f.charCodeAt(x)}var m=g-x,d=E.__kMaxBitsPerChar[l],p=E.__kBitsPerCharTableMultiplier-1;if(m>1073741824/d)return null;var L=new E(0|(29+(d*m+p>>>E.__kBitsPerCharTableShift))/30,!1),Y=10>l?l:10,le=10<l?l-10:0;if(l&l-1){L.__initializeDigits();var ve=!1,_e=0;do{for(var de,se=0,re=1;;){if(de=void 0,P-48>>>0<Y)de=P-48;else{if(!((32|P)-97>>>0<le)){ve=!0;break}de=(32|P)-87}var ce=re*l;if(1073741823<ce)break;if(re=ce,se=se*l+de,_e++,++x===g){ve=!0;break}P=f.charCodeAt(x)}L.__inplaceMultiplyAdd(re,se,0|(d*_e+(p=30*E.__kBitsPerCharTableMultiplier-1)>>>E.__kBitsPerCharTableShift)/30)}while(!ve)}else{d>>=E.__kBitsPerCharTableShift;var Se=[],Oe=[],Ve=!1;do{for(var Re,ye=0,ke=0;;){if(Re=void 0,P-48>>>0<Y)Re=P-48;else{if(!((32|P)-97>>>0<le)){Ve=!0;break}Re=(32|P)-87}if(ke+=d,ye=ye<<d|Re,++x===g){Ve=!0;break}if(P=f.charCodeAt(x),30<ke+d)break}Se.push(ye),Oe.push(ke)}while(!Ve);E.__fillFromParts(L,Se,Oe)}if(x!==g){if(!E.__isWhitespace(P))return null;for(x++;x<g;x++)if(P=f.charCodeAt(x),!E.__isWhitespace(P))return null}return L.sign=-1===h,L.__trim()}},{key:"__fillFromParts",value:function(f,l,h){for(var g=0,x=0,P=0,m=l.length-1;0<=m;m--){var d=l[m],p=h[m];x|=d<<P,30===(P+=p)?(f.__setDigit(g++,x),P=0,x=0):30<P&&(f.__setDigit(g++,1073741823&x),x=d>>>p-(P-=30))}if(0!==x){if(g>=f.length)throw new Error("implementation bug");f.__setDigit(g++,x)}for(;g<f.length;g++)f.__setDigit(g,0)}},{key:"__toStringBasePowerOfTwo",value:function(f,l){var h=f.length,g=l-1,x=g=(15&(g=(51&(g=(85&g>>>1)+(85&g))>>>2)+(51&g))>>>4)+(15&g),P=l-1,m=f.__digit(h-1),p=0|(30*h-E.__clz30(m)+x-1)/x;if(f.sign&&p++,268435456<p)throw new Error("string too long");for(var V=Array(p),L=p-1,Y=0,le=0,Se=0;Se<h-1;Se++){var Oe=f.__digit(Se);V[L--]=E.__kConversionChars[(Y|Oe<<le)&P];var Re=x-le;for(Y=Oe>>>Re,le=30-Re;le>=x;)V[L--]=E.__kConversionChars[Y&P],Y>>>=x,le-=x}for(V[L--]=E.__kConversionChars[(Y|m<<le)&P],Y=m>>>x-le;0!==Y;)V[L--]=E.__kConversionChars[Y&P],Y>>>=x;if(f.sign&&(V[L--]="-"),-1!==L)throw new Error("implementation bug");return V.join("")}},{key:"__toStringGeneric",value:function(f,l,h){var g=f.length;if(0===g)return"";if(1===g){var x=f.__unsignedDigit(0).toString(l);return!1===h&&f.sign&&(x="-"+x),x}var V,L,P=30*g-E.__clz30(f.__digit(g-1)),d=E.__kMaxBitsPerChar[l]-1,p=P*E.__kBitsPerCharTableMultiplier,Y=1+(p=0|(p+=d-1)/d)>>1,le=E.exponentiate(E.__oneDigit(l,!1),E.__oneDigit(Y,!1)),Se=le.__unsignedDigit(0);if(1===le.length&&32767>=Se){(V=new E(f.length,!1)).__initializeDigits();for(var Oe,Ve=0,Re=2*f.length-1;0<=Re;Re--)Oe=Ve<<15|f.__halfDigit(Re),V.__setHalfDigit(Re,0|Oe/Se),Ve=0|Oe%Se;L=Ve.toString(l)}else{var ye=E.__absoluteDivLarge(f,le,!0,!0);V=ye.quotient;var ke=ye.remainder.__trim();L=E.__toStringGeneric(ke,l,!0)}V.__trim();for(var ve=E.__toStringGeneric(V,l,!0);L.length<Y;)L="0"+L;return!1===h&&f.sign&&(ve="-"+ve),ve+L}},{key:"__unequalSign",value:function(f){return f?-1:1}},{key:"__absoluteGreater",value:function(f){return f?-1:1}},{key:"__absoluteLess",value:function(f){return f?1:-1}},{key:"__compareToBigInt",value:function(f,l){var h=f.sign;if(h!==l.sign)return E.__unequalSign(h);var g=E.__absoluteCompare(f,l);return 0<g?E.__absoluteGreater(h):0>g?E.__absoluteLess(h):0}},{key:"__compareToNumber",value:function(f,l){if(E.__isOneDigitInt(l)){var h=f.sign,g=0>l;if(h!==g)return E.__unequalSign(h);if(0===f.length){if(g)throw new Error("implementation bug");return 0===l?0:-1}if(1<f.length)return E.__absoluteGreater(h);var x=me(l),P=f.__unsignedDigit(0);return P>x?E.__absoluteGreater(h):P<x?E.__absoluteLess(h):0}return E.__compareToDouble(f,l)}},{key:"__compareToDouble",value:function(f,l){if(l!=l)return l;if(l===1/0)return-1;if(l===-1/0)return 1;var h=f.sign;if(h!==0>l)return E.__unequalSign(h);if(0===l)throw new Error("implementation bug: should be handled elsewhere");if(0===f.length)return-1;E.__kBitConversionDouble[0]=l;var g=2047&E.__kBitConversionInts[1]>>>20;if(2047==g)throw new Error("implementation bug: handled elsewhere");var x=g-1023;if(0>x)return E.__absoluteGreater(h);var P=f.length,m=f.__digit(P-1),d=E.__clz30(m),p=30*P-d,V=x+1;if(p<V)return E.__absoluteLess(h);if(p>V)return E.__absoluteGreater(h);var L=1048576|1048575&E.__kBitConversionInts[1],Y=E.__kBitConversionInts[0],Se=29-d;if(Se!==(0|(p-1)%30))throw new Error("implementation bug");var Oe,Ve=0;if(Se<20){var Re=20-Se;Ve=Re+32,Oe=L>>>Re,L=L<<32-Re|Y>>>Re,Y<<=32-Re}else if(20===Se)Ve=32,Oe=L,L=Y,Y=0;else{var ye=Se-20;Ve=32-ye,Oe=L<<ye|Y>>>32-ye,L=Y<<ye,Y=0}if((m>>>=0)>(Oe>>>=0))return E.__absoluteGreater(h);if(m<Oe)return E.__absoluteLess(h);for(var ke=P-2;0<=ke;ke--){0<Ve?(Ve-=30,Oe=L>>>2,L=L<<30|Y>>>2,Y<<=30):Oe=0;var ve=f.__unsignedDigit(ke);if(ve>Oe)return E.__absoluteGreater(h);if(ve<Oe)return E.__absoluteLess(h)}if(0!==L||0!==Y){if(0===Ve)throw new Error("implementation bug");return E.__absoluteLess(h)}return 0}},{key:"__equalToNumber",value:function(f,l){return E.__isOneDigitInt(l)?0===l?0===f.length:1===f.length&&f.sign===0>l&&f.__unsignedDigit(0)===me(l):0===E.__compareToDouble(f,l)}},{key:"__comparisonResultToBool",value:function(f,l){return 0===l?0>f:1===l?0>=f:2===l?0<f:3===l?0<=f:void 0}},{key:"__compare",value:function(f,l,h){if(f=E.__toPrimitive(f),l=E.__toPrimitive(l),"string"==typeof f&&"string"==typeof l)switch(h){case 0:return f<l;case 1:return f<=l;case 2:return f>l;case 3:return f>=l}if(E.__isBigInt(f)&&"string"==typeof l)return null!==(l=E.__fromString(l))&&E.__comparisonResultToBool(E.__compareToBigInt(f,l),h);if("string"==typeof f&&E.__isBigInt(l))return null!==(f=E.__fromString(f))&&E.__comparisonResultToBool(E.__compareToBigInt(f,l),h);if(f=E.__toNumeric(f),l=E.__toNumeric(l),E.__isBigInt(f)){if(E.__isBigInt(l))return E.__comparisonResultToBool(E.__compareToBigInt(f,l),h);if("number"!=typeof l)throw new Error("implementation bug");return E.__comparisonResultToBool(E.__compareToNumber(f,l),h)}if("number"!=typeof f)throw new Error("implementation bug");if(E.__isBigInt(l))return E.__comparisonResultToBool(E.__compareToNumber(l,f),2^h);if("number"!=typeof l)throw new Error("implementation bug");return 0===h?f<l:1===h?f<=l:2===h?f>l:3===h?f>=l:void 0}},{key:"__absoluteAdd",value:function(f,l,h){if(f.length<l.length)return E.__absoluteAdd(l,f,h);if(0===f.length)return f;if(0===l.length)return f.sign===h?f:E.unaryMinus(f);var g=f.length;(0===f.__clzmsd()||l.length===f.length&&0===l.__clzmsd())&&g++;for(var x,P=new E(g,h),m=0,d=0;d<l.length;d++)m=(x=f.__digit(d)+l.__digit(d)+m)>>>30,P.__setDigit(d,1073741823&x);for(;d<f.length;d++){var p=f.__digit(d)+m;m=p>>>30,P.__setDigit(d,1073741823&p)}return d<P.length&&P.__setDigit(d,m),P.__trim()}},{key:"__absoluteSub",value:function(f,l,h){if(0===f.length)return f;if(0===l.length)return f.sign===h?f:E.unaryMinus(f);for(var g,x=new E(f.length,h),P=0,m=0;m<l.length;m++)P=1&(g=f.__digit(m)-l.__digit(m)-P)>>>30,x.__setDigit(m,1073741823&g);for(;m<f.length;m++){var d=f.__digit(m)-P;P=1&d>>>30,x.__setDigit(m,1073741823&d)}return x.__trim()}},{key:"__absoluteAddOne",value:function(f,l){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,g=f.length;null===h?h=new E(g,l):h.sign=l;for(var x,P=1,m=0;m<g;m++)P=(x=f.__digit(m)+P)>>>30,h.__setDigit(m,1073741823&x);return 0!==P&&h.__setDigitGrow(g,1),h}},{key:"__absoluteSubOne",value:function(f,l){for(var g,h=f.length,x=new E(l=l||h,!1),P=1,m=0;m<h;m++)P=1&(g=f.__digit(m)-P)>>>30,x.__setDigit(m,1073741823&g);if(0!==P)throw new Error("implementation bug");for(var d=h;d<l;d++)x.__setDigit(d,0);return x}},{key:"__absoluteAnd",value:function(f,l){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,g=f.length,x=l.length,P=x;if(g<x){P=g;var m=f,d=g;f=l,g=x,l=m,x=d}var p=P;null===h?h=new E(p,!1):p=h.length;for(var V=0;V<P;V++)h.__setDigit(V,f.__digit(V)&l.__digit(V));for(;V<p;V++)h.__setDigit(V,0);return h}},{key:"__absoluteAndNot",value:function(f,l){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,g=f.length,x=l.length,P=x;g<x&&(P=g);var m=g;null===h?h=new E(m,!1):m=h.length;for(var d=0;d<P;d++)h.__setDigit(d,f.__digit(d)&~l.__digit(d));for(;d<g;d++)h.__setDigit(d,f.__digit(d));for(;d<m;d++)h.__setDigit(d,0);return h}},{key:"__absoluteOr",value:function(f,l){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,g=f.length,x=l.length,P=x;if(g<x){P=g;var m=f,d=g;f=l,g=x,l=m,x=d}var p=g;null===h?h=new E(p,!1):p=h.length;for(var V=0;V<P;V++)h.__setDigit(V,f.__digit(V)|l.__digit(V));for(;V<g;V++)h.__setDigit(V,f.__digit(V));for(;V<p;V++)h.__setDigit(V,0);return h}},{key:"__absoluteXor",value:function(f,l){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,g=f.length,x=l.length,P=x;if(g<x){P=g;var m=f,d=g;f=l,g=x,l=m,x=d}var p=g;null===h?h=new E(p,!1):p=h.length;for(var V=0;V<P;V++)h.__setDigit(V,f.__digit(V)^l.__digit(V));for(;V<g;V++)h.__setDigit(V,f.__digit(V));for(;V<p;V++)h.__setDigit(V,0);return h}},{key:"__absoluteCompare",value:function(f,l){var h=f.length-l.length;if(0!=h)return h;for(var g=f.length-1;0<=g&&f.__digit(g)===l.__digit(g);)g--;return 0>g?0:f.__unsignedDigit(g)>l.__unsignedDigit(g)?1:-1}},{key:"__multiplyAccumulate",value:function(f,l,h,g){if(0!==l){for(var x=32767&l,P=l>>>15,m=0,d=0,p=0;p<f.length;p++,g++){var V=h.__digit(g),L=f.__digit(p),Y=32767&L,le=L>>>15,Se=E.__imul(Y,x),Oe=E.__imul(Y,P),Ve=E.__imul(le,x);m=(V+=d+Se+m)>>>30,V&=1073741823,m+=(V+=((32767&Oe)<<15)+((32767&Ve)<<15))>>>30,d=E.__imul(le,P)+(Oe>>>15)+(Ve>>>15),h.__setDigit(g,1073741823&V)}for(;0!==m||0!==d;g++){var ye=h.__digit(g);ye+=m+d,d=0,m=ye>>>30,h.__setDigit(g,1073741823&ye)}}}},{key:"__internalMultiplyAdd",value:function(f,l,h,g,x){for(var P=h,m=0,d=0;d<g;d++){var p=f.__digit(d),V=E.__imul(32767&p,l),L=E.__imul(p>>>15,l),Y=V+((32767&L)<<15)+m+P;P=Y>>>30,m=L>>>15,x.__setDigit(d,1073741823&Y)}if(x.length>g)for(x.__setDigit(g++,P+m);g<x.length;)x.__setDigit(g++,0);else if(P+m!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(f,l){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;null===h&&(h=new E(f.length,!1));for(var g=0,x=2*f.length-1;0<=x;x-=2){var P=(g<<15|f.__halfDigit(x))>>>0,m=0|P/l;g=0|(P=((g=0|P%l)<<15|f.__halfDigit(x-1))>>>0)%l,h.__setDigit(x>>>1,m<<15|P/l)}return h}},{key:"__absoluteModSmall",value:function(f,l){for(var g=0,x=2*f.length-1;0<=x;x--)g=0|((g<<15|f.__halfDigit(x))>>>0)%l;return g}},{key:"__absoluteDivLarge",value:function(f,l,h,g){var x=l.__halfDigitLength(),P=l.length,m=f.__halfDigitLength()-x,d=null;h&&(d=new E(m+2>>>1,!1)).__initializeDigits();var p=new E(x+2>>>1,!1);p.__initializeDigits();var V=E.__clz15(l.__halfDigit(x-1));0<V&&(l=E.__specialLeftShift(l,V,0));for(var L=E.__specialLeftShift(f,V,1),Y=l.__halfDigit(x-1),le=0,Se=m;0<=Se;Se--){var Oe=32767,Ve=L.__halfDigit(Se+x);if(Ve!==Y){var Re=(Ve<<15|L.__halfDigit(Se+x-1))>>>0;Oe=0|Re/Y;for(var ye=0|Re%Y,ke=l.__halfDigit(x-2),ve=L.__halfDigit(Se+x-2);E.__imul(Oe,ke)>>>0>(ye<<16|ve)>>>0&&(Oe--,!(32767<(ye+=Y))););}E.__internalMultiplyAdd(l,Oe,0,P,p);var _e=L.__inplaceSub(p,Se,x+1);0!==_e&&(_e=L.__inplaceAdd(l,Se,x),L.__setHalfDigit(Se+x,32767&L.__halfDigit(Se+x)+_e),Oe--),h&&(1&Se?le=Oe<<15:d.__setDigit(Se>>>1,le|Oe))}if(g)return L.__inplaceRightShift(V),h?{quotient:d,remainder:L}:L;if(h)return d;throw new Error("unreachable")}},{key:"__clz15",value:function(f){return E.__clz30(f)-15}},{key:"__specialLeftShift",value:function(f,l,h){var g=f.length,x=new E(g+h,!1);if(0===l){for(var P=0;P<g;P++)x.__setDigit(P,f.__digit(P));return 0<h&&x.__setDigit(g,0),x}for(var m,d=0,p=0;p<g;p++)m=f.__digit(p),x.__setDigit(p,1073741823&m<<l|d),d=m>>>30-l;return 0<h&&x.__setDigit(g,d),x}},{key:"__leftShiftByAbsolute",value:function(f,l){var h=E.__toShiftAmount(l);if(0>h)throw new RangeError("BigInt too big");var g=0|h/30,x=h%30,P=f.length,m=0!==x&&f.__digit(P-1)>>>30-x!=0,d=P+g+(m?1:0),p=new E(d,f.sign);if(0===x){for(var V=0;V<g;V++)p.__setDigit(V,0);for(;V<d;V++)p.__setDigit(V,f.__digit(V-g))}else{for(var L=0,Y=0;Y<g;Y++)p.__setDigit(Y,0);for(var le,Se=0;Se<P;Se++)le=f.__digit(Se),p.__setDigit(Se+g,1073741823&le<<x|L),L=le>>>30-x;if(m)p.__setDigit(P+g,L);else if(0!==L)throw new Error("implementation bug")}return p.__trim()}},{key:"__rightShiftByAbsolute",value:function(f,l){var h=f.length,g=f.sign,x=E.__toShiftAmount(l);if(0>x)return E.__rightShiftByMaximum(g);var P=0|x/30,m=x%30,d=h-P;if(0>=d)return E.__rightShiftByMaximum(g);var p=!1;if(g)if(f.__digit(P)&(1<<m)-1)p=!0;else for(var V=0;V<P;V++)if(0!==f.__digit(V)){p=!0;break}p&&0===m&&!~f.__digit(h-1)&&d++;var Y=new E(d,g);if(0===m){Y.__setDigit(d-1,0);for(var le=P;le<h;le++)Y.__setDigit(le-P,f.__digit(le))}else{for(var Se,Oe=f.__digit(P)>>>m,Ve=h-P-1,Re=0;Re<Ve;Re++)Se=f.__digit(Re+P+1),Y.__setDigit(Re,1073741823&Se<<30-m|Oe),Oe=Se>>>m;Y.__setDigit(Ve,Oe)}return p&&(Y=E.__absoluteAddOne(Y,!0,Y)),Y.__trim()}},{key:"__rightShiftByMaximum",value:function(f){return f?E.__oneDigit(1,!0):E.__zero()}},{key:"__toShiftAmount",value:function(f){if(1<f.length)return-1;var l=f.__unsignedDigit(0);return l>E.__kMaxLengthBits?-1:l}},{key:"__toPrimitive",value:function(f){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==C(f)||f.constructor===E)return f;if(typeof Symbol<"u"&&"symbol"===C(Symbol.toPrimitive)){var h=f[Symbol.toPrimitive];if(h){var g=h(l);if("object"!==C(g))return g;throw new TypeError("Cannot convert object to primitive value")}}var x=f.valueOf;if(x){var P=x.call(f);if("object"!==C(P))return P}var m=f.toString;if(m){var d=m.call(f);if("object"!==C(d))return d}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(f){return E.__isBigInt(f)?f:+f}},{key:"__isBigInt",value:function(f){return"object"===C(f)&&null!==f&&f.constructor===E}},{key:"__truncateToNBits",value:function(f,l){for(var h=0|(f+29)/30,g=new E(h,l.sign),x=h-1,P=0;P<x;P++)g.__setDigit(P,l.__digit(P));var m=l.__digit(x);if(f%30!=0){var d=32-f%30;m=m<<d>>>d}return g.__setDigit(x,m),g.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(f,l,h){for(var x,g=Math.min,P=0|(f+29)/30,m=new E(P,h),d=0,p=P-1,V=0,L=g(p,l.length);d<L;d++)V=1&(x=0-l.__digit(d)-V)>>>30,m.__setDigit(d,1073741823&x);for(;d<p;d++)m.__setDigit(d,1073741823&-V);var Y,le=p<l.length?l.__digit(p):0,Se=f%30;if(0===Se)Y=0-le-V,Y&=1073741823;else{var Oe=32-Se,Ve=1<<32-Oe;Y=Ve-(le=le<<Oe>>>Oe)-V,Y&=Ve-1}return m.__setDigit(p,Y),m.__trim()}},{key:"__digitPow",value:function(f,l){for(var h=1;0<l;)1&l&&(h*=f),l>>>=1,f*=f;return h}},{key:"__isOneDigitInt",value:function(f){return(1073741823&f)===f}}]),E}(M(Array));return oe.__kMaxLength=33554432,oe.__kMaxLengthBits=oe.__kMaxLength<<5,oe.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],oe.__kBitsPerCharTableShift=5,oe.__kBitsPerCharTableMultiplier=1<<oe.__kBitsPerCharTableShift,oe.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],oe.__kBitConversionBuffer=new ArrayBuffer(8),oe.__kBitConversionDouble=new Float64Array(oe.__kBitConversionBuffer),oe.__kBitConversionInts=new Int32Array(oe.__kBitConversionBuffer),oe.__clz30=I?function(ne){return I(ne)-2}:function(ne){var me=Math.LN2,pe=Math.log;return 0===ne?30:0|29-(0|pe(ne>>>0)/me)},oe.__imul=O||function(ne,me){return 0|ne*me},oe}()},44331:xe=>{"use strict";var O=xe.exports=function(H,N,G){"function"==typeof N&&(G=N,N={}),I(N,"function"==typeof(G=N.cb||G)?G:G.pre||function(){},G.post||function(){},H,"",H)};function I(H,N,G,v,B,_,T,D,$,M){if(v&&"object"==typeof v&&!Array.isArray(v)){for(var F in N(v,B,_,T,D,$,M),v){var k=v[F];if(Array.isArray(k)){if(F in O.arrayKeywords)for(var j=0;j<k.length;j++)I(H,N,G,k[j],B+"/"+F+"/"+j,_,B,F,v,j)}else if(F in O.propsKeywords){if(k&&"object"==typeof k)for(var Z in k)I(H,N,G,k[Z],B+"/"+F+"/"+C(Z),_,B,F,v,Z)}else(F in O.keywords||H.allKeys&&!(F in O.skipKeywords))&&I(H,N,G,k,B+"/"+F,_,B,F,v)}G(v,B,_,T,D,$,M)}}function C(H){return H.replace(/~/g,"~0").replace(/\//g,"~1")}O.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},O.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},O.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},O.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},89061:(xe,O)=>{"use strict";O.supports=function(...C){const H=C.reduce((N,G)=>Object.assign(N,G),{});return Object.assign(H,{snapshots:H.snapshots||!1,permanence:H.permanence||!1,seek:H.seek||!1,clear:H.clear||!1,getMany:H.getMany||!1,keyIterator:H.keyIterator||!1,valueIterator:H.valueIterator||!1,iteratorNextv:H.iteratorNextv||!1,iteratorAll:H.iteratorAll||!1,status:H.status||!1,createIfMissing:H.createIfMissing||!1,errorIfExists:H.errorIfExists||!1,deferredOpen:H.deferredOpen||!1,promises:H.promises||!1,streams:H.streams||!1,encodings:Object.assign({},H.encodings),events:Object.assign({},H.events),additionalMethods:Object.assign({},H.additionalMethods)})}},25006:(xe,O,I)=>{"use strict";const C=I(61747),H=I(40080),{Encoding:N}=I(15045),{BufferFormat:G,ViewFormat:v,UTF8Format:B}=I(48262),_=Symbol("formats"),T=Symbol("encodings"),D=new Set(["buffer","view","utf8"]);O.Transcoder=class ${constructor(W){if(!Array.isArray(W))throw new TypeError("The first argument 'formats' must be an array");if(!W.every(K=>D.has(K)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[T]=new Map,this[_]=new Set(W);for(const K in H)try{this.encoding(K)}catch(J){if("LEVEL_ENCODING_NOT_SUPPORTED"!==J.code)throw J}}encodings(){return Array.from(new Set(this[T].values()))}encoding(W){let K=this[T].get(W);if(void 0===K){if("string"==typeof W&&""!==W){if(K=j[W],!K)throw new C(`Encoding '${W}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!=typeof W||null===W)throw new TypeError("First argument 'encoding' must be a string or object");K=function M(q){if(q instanceof N)return q;const K=q.name||("type"in q&&"string"==typeof q.type?q.type:void 0)||"anonymous-"+Z++;switch(function F(q){return"format"in q&&void 0!==q.format?q.format:"buffer"in q&&"boolean"==typeof q.buffer?q.buffer?"buffer":"utf8":"code"in q&&Number.isInteger(q.code)?"view":"buffer"}(q)){case"view":return new v({...q,name:K});case"utf8":return new B({...q,name:K});case"buffer":return new G({...q,name:K});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(W)}const{name:J,format:X}=K;if(!this[_].has(X))if(this[_].has("view"))K=K.createViewTranscoder();else if(this[_].has("buffer"))K=K.createBufferTranscoder();else{if(!this[_].has("utf8"))throw new C(`Encoding '${J}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});K=K.createUTF8Transcoder()}for(const Q of[W,J,K.name,K.commonName])this[T].set(Q,K)}return K}};const k={binary:H.buffer,"utf-8":H.utf8},j={...H,...k};let Z=0},15045:(xe,O,I)=>{"use strict";const C=I(61747),H=new Set(["buffer","view","utf8"]);O.Encoding=class N{constructor(v){if(this.encode=v.encode||this.encode,this.decode=v.decode||this.decode,this.name=v.name||this.name,this.format=v.format||this.format,"function"!=typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!=typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!=typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!=typeof this.format||!H.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");v.createViewTranscoder&&(this.createViewTranscoder=v.createViewTranscoder),v.createBufferTranscoder&&(this.createBufferTranscoder=v.createBufferTranscoder),v.createUTF8Transcoder&&(this.createUTF8Transcoder=v.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new C(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new C(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new C(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}},40080:(xe,O,I)=>{"use strict";const{Buffer:C}=I(484)||{Buffer:{isBuffer:()=>!1}},{textEncoder:H,textDecoder:N}=I(33619)(),{BufferFormat:G,ViewFormat:v,UTF8Format:B}=I(48262),_=T=>T;O.utf8=new B({encode:function(T){return C.isBuffer(T)?T.toString("utf8"):ArrayBuffer.isView(T)?N.decode(T):String(T)},decode:_,name:"utf8",createViewTranscoder(){return new v({encode:function(T){return ArrayBuffer.isView(T)?T:H.encode(T)},decode:function(T){return N.decode(T)},name:`${this.name}+view`})},createBufferTranscoder(){return new G({encode:function(T){return C.isBuffer(T)?T:ArrayBuffer.isView(T)?C.from(T.buffer,T.byteOffset,T.byteLength):C.from(String(T),"utf8")},decode:function(T){return T.toString("utf8")},name:`${this.name}+buffer`})}}),O.json=new B({encode:JSON.stringify,decode:JSON.parse,name:"json"}),O.buffer=new G({encode:function(T){return C.isBuffer(T)?T:ArrayBuffer.isView(T)?C.from(T.buffer,T.byteOffset,T.byteLength):C.from(String(T),"utf8")},decode:_,name:"buffer",createViewTranscoder(){return new v({encode:function(T){return ArrayBuffer.isView(T)?T:C.from(String(T),"utf8")},decode:function(T){return C.from(T.buffer,T.byteOffset,T.byteLength)},name:`${this.name}+view`})}}),O.view=new v({encode:function(T){return ArrayBuffer.isView(T)?T:H.encode(T)},decode:_,name:"view",createBufferTranscoder(){return new G({encode:function(T){return C.isBuffer(T)?T:ArrayBuffer.isView(T)?C.from(T.buffer,T.byteOffset,T.byteLength):C.from(String(T),"utf8")},decode:_,name:`${this.name}+buffer`})}}),O.hex=new G({encode:function(T){return C.isBuffer(T)?T:C.from(String(T),"hex")},decode:function(T){return T.toString("hex")},name:"hex"}),O.base64=new G({encode:function(T){return C.isBuffer(T)?T:C.from(String(T),"base64")},decode:function(T){return T.toString("base64")},name:"base64"})},48262:(xe,O,I)=>{"use strict";const{Buffer:C}=I(484)||{},{Encoding:H}=I(15045),N=I(33619);class G extends H{constructor(T){super({...T,format:"buffer"})}createViewTranscoder(){return new v({encode:this.encode,decode:T=>this.decode(C.from(T.buffer,T.byteOffset,T.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class v extends H{constructor(T){super({...T,format:"view"})}createBufferTranscoder(){return new G({encode:T=>{const D=this.encode(T);return C.from(D.buffer,D.byteOffset,D.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}O.BufferFormat=G,O.ViewFormat=v,O.UTF8Format=class B extends H{constructor(T){super({...T,format:"utf8"})}createBufferTranscoder(){return new G({encode:T=>C.from(this.encode(T),"utf8"),decode:T=>this.decode(T.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:T,textDecoder:D}=N();return new v({encode:$=>T.encode(this.encode($)),decode:$=>this.decode(D.decode($)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}},33619:xe=>{"use strict";let O=null;xe.exports=function(){return null===O&&(O={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),O}},484:(xe,O,I)=>{"use strict";const C=I(13981),H=I(22020),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=_,O.SlowBuffer=function K(U){return+U!=U&&(U=0),_.alloc(+U)},O.INSPECT_MAX_BYTES=50;const G=2147483647;function B(U){if(U>G)throw new RangeError('The value "'+U+'" is invalid for option "size"');const w=new Uint8Array(U);return Object.setPrototypeOf(w,_.prototype),w}function _(U,w,b){if("number"==typeof U){if("string"==typeof w)throw new TypeError('The "string" argument must be of type string. Received type number');return M(U)}return T(U,w,b)}function T(U,w,b){if("string"==typeof U)return function F(U,w){if(("string"!=typeof w||""===w)&&(w="utf8"),!_.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const b=0|J(U,w);let z=B(b);const ie=z.write(U,w);return ie!==b&&(z=z.slice(0,ie)),z}(U,w);if(ArrayBuffer.isView(U))return function j(U){if(De(U,Uint8Array)){const w=new Uint8Array(U);return Z(w.buffer,w.byteOffset,w.byteLength)}return k(U)}(U);if(null==U)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(De(U,ArrayBuffer)||U&&De(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(U,SharedArrayBuffer)||U&&De(U.buffer,SharedArrayBuffer)))return Z(U,w,b);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');const z=U.valueOf&&U.valueOf();if(null!=z&&z!==U)return _.from(z,w,b);const ie=function q(U){if(_.isBuffer(U)){const w=0|W(U.length),b=B(w);return 0===b.length||U.copy(b,0,0,w),b}return void 0!==U.length?"number"!=typeof U.length||et(U.length)?B(0):k(U):"Buffer"===U.type&&Array.isArray(U.data)?k(U.data):void 0}(U);if(ie)return ie;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return _.from(U[Symbol.toPrimitive]("string"),w,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function D(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function M(U){return D(U),B(U<0?0:0|W(U))}function k(U){const w=U.length<0?0:0|W(U.length),b=B(w);for(let z=0;z<w;z+=1)b[z]=255&U[z];return b}function Z(U,w,b){if(w<0||U.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<w+(b||0))throw new RangeError('"length" is outside of buffer bounds');let z;return z=void 0===w&&void 0===b?new Uint8Array(U):void 0===b?new Uint8Array(U,w):new Uint8Array(U,w,b),Object.setPrototypeOf(z,_.prototype),z}function W(U){if(U>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|U}function J(U,w){if(_.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||De(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const b=U.length,z=arguments.length>2&&!0===arguments[2];if(!z&&0===b)return 0;let ie=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return ce(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return Ee(U).length;default:if(ie)return z?-1:ce(U).length;w=(""+w).toLowerCase(),ie=!0}}function X(U,w,b){let z=!1;if((void 0===w||w<0)&&(w=0),w>this.length||((void 0===b||b>this.length)&&(b=this.length),b<=0)||(b>>>=0)<=(w>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return m(this,w,b);case"utf8":case"utf-8":return l(this,w,b);case"ascii":return x(this,w,b);case"latin1":case"binary":return P(this,w,b);case"base64":return f(this,w,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,w,b);default:if(z)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),z=!0}}function Q(U,w,b){const z=U[w];U[w]=U[b],U[b]=z}function oe(U,w,b,z,ie){if(0===U.length)return-1;if("string"==typeof b?(z=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),et(b=+b)&&(b=ie?0:U.length-1),b<0&&(b=U.length+b),b>=U.length){if(ie)return-1;b=U.length-1}else if(b<0){if(!ie)return-1;b=0}if("string"==typeof w&&(w=_.from(w,z)),_.isBuffer(w))return 0===w.length?-1:ne(U,w,b,z,ie);if("number"==typeof w)return w&=255,"function"==typeof Uint8Array.prototype.indexOf?ie?Uint8Array.prototype.indexOf.call(U,w,b):Uint8Array.prototype.lastIndexOf.call(U,w,b):ne(U,[w],b,z,ie);throw new TypeError("val must be string, number or Buffer")}function ne(U,w,b,z,ie){let nt,be=1,Me=U.length,qe=w.length;if(void 0!==z&&("ucs2"===(z=String(z).toLowerCase())||"ucs-2"===z||"utf16le"===z||"utf-16le"===z)){if(U.length<2||w.length<2)return-1;be=2,Me/=2,qe/=2,b/=2}function At(rt,St){return 1===be?rt[St]:rt.readUInt16BE(St*be)}if(ie){let rt=-1;for(nt=b;nt<Me;nt++)if(At(U,nt)===At(w,-1===rt?0:nt-rt)){if(-1===rt&&(rt=nt),nt-rt+1===qe)return rt*be}else-1!==rt&&(nt-=nt-rt),rt=-1}else for(b+qe>Me&&(b=Me-qe),nt=b;nt>=0;nt--){let rt=!0;for(let St=0;St<qe;St++)if(At(U,nt+St)!==At(w,St)){rt=!1;break}if(rt)return nt}return-1}function me(U,w,b,z){b=Number(b)||0;const ie=U.length-b;z?(z=Number(z))>ie&&(z=ie):z=ie;const be=w.length;let Me;for(z>be/2&&(z=be/2),Me=0;Me<z;++Me){const qe=parseInt(w.substr(2*Me,2),16);if(et(qe))return Me;U[b+Me]=qe}return Me}function pe(U,w,b,z){return Be(ce(w,U.length-b),U,b,z)}function Ie(U,w,b,z){return Be(function ue(U){const w=[];for(let b=0;b<U.length;++b)w.push(255&U.charCodeAt(b));return w}(w),U,b,z)}function E(U,w,b,z){return Be(Ee(w),U,b,z)}function a(U,w,b,z){return Be(function ge(U,w){let b,z,ie;const be=[];for(let Me=0;Me<U.length&&!((w-=2)<0);++Me)b=U.charCodeAt(Me),z=b>>8,ie=b%256,be.push(ie),be.push(z);return be}(w,U.length-b),U,b,z)}function f(U,w,b){return C.fromByteArray(0===w&&b===U.length?U:U.slice(w,b))}function l(U,w,b){b=Math.min(U.length,b);const z=[];let ie=w;for(;ie<b;){const be=U[ie];let Me=null,qe=be>239?4:be>223?3:be>191?2:1;if(ie+qe<=b){let At,nt,rt,St;switch(qe){case 1:be<128&&(Me=be);break;case 2:At=U[ie+1],128==(192&At)&&(St=(31&be)<<6|63&At,St>127&&(Me=St));break;case 3:At=U[ie+1],nt=U[ie+2],128==(192&At)&&128==(192&nt)&&(St=(15&be)<<12|(63&At)<<6|63&nt,St>2047&&(St<55296||St>57343)&&(Me=St));break;case 4:At=U[ie+1],nt=U[ie+2],rt=U[ie+3],128==(192&At)&&128==(192&nt)&&128==(192&rt)&&(St=(15&be)<<18|(63&At)<<12|(63&nt)<<6|63&rt,St>65535&&St<1114112&&(Me=St))}}null===Me?(Me=65533,qe=1):Me>65535&&(Me-=65536,z.push(Me>>>10&1023|55296),Me=56320|1023&Me),z.push(Me),ie+=qe}return function g(U){const w=U.length;if(w<=h)return String.fromCharCode.apply(String,U);let b="",z=0;for(;z<w;)b+=String.fromCharCode.apply(String,U.slice(z,z+=h));return b}(z)}O.kMaxLength=G,!(_.TYPED_ARRAY_SUPPORT=function v(){try{const U=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(U,w),42===U.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),_.poolSize=8192,_.from=function(U,w,b){return T(U,w,b)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array),_.alloc=function(U,w,b){return function $(U,w,b){return D(U),U<=0?B(U):void 0!==w?"string"==typeof b?B(U).fill(w,b):B(U).fill(w):B(U)}(U,w,b)},_.allocUnsafe=function(U){return M(U)},_.allocUnsafeSlow=function(U){return M(U)},_.isBuffer=function(w){return null!=w&&!0===w._isBuffer&&w!==_.prototype},_.compare=function(w,b){if(De(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),De(b,Uint8Array)&&(b=_.from(b,b.offset,b.byteLength)),!_.isBuffer(w)||!_.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===b)return 0;let z=w.length,ie=b.length;for(let be=0,Me=Math.min(z,ie);be<Me;++be)if(w[be]!==b[be]){z=w[be],ie=b[be];break}return z<ie?-1:ie<z?1:0},_.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(w,b){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(0===w.length)return _.alloc(0);let z;if(void 0===b)for(b=0,z=0;z<w.length;++z)b+=w[z].length;const ie=_.allocUnsafe(b);let be=0;for(z=0;z<w.length;++z){let Me=w[z];if(De(Me,Uint8Array))be+Me.length>ie.length?(_.isBuffer(Me)||(Me=_.from(Me)),Me.copy(ie,be)):Uint8Array.prototype.set.call(ie,Me,be);else{if(!_.isBuffer(Me))throw new TypeError('"list" argument must be an Array of Buffers');Me.copy(ie,be)}be+=Me.length}return ie},_.byteLength=J,_.prototype._isBuffer=!0,_.prototype.swap16=function(){const w=this.length;if(w%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<w;b+=2)Q(this,b,b+1);return this},_.prototype.swap32=function(){const w=this.length;if(w%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<w;b+=4)Q(this,b,b+3),Q(this,b+1,b+2);return this},_.prototype.swap64=function(){const w=this.length;if(w%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<w;b+=8)Q(this,b,b+7),Q(this,b+1,b+6),Q(this,b+2,b+5),Q(this,b+3,b+4);return this},_.prototype.toLocaleString=_.prototype.toString=function(){const w=this.length;return 0===w?"":0===arguments.length?l(this,0,w):X.apply(this,arguments)},_.prototype.equals=function(w){if(!_.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w||0===_.compare(this,w)},_.prototype.inspect=function(){let w="";const b=O.INSPECT_MAX_BYTES;return w=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(w+=" ... "),"<Buffer "+w+">"},N&&(_.prototype[N]=_.prototype.inspect),_.prototype.compare=function(w,b,z,ie,be){if(De(w,Uint8Array)&&(w=_.from(w,w.offset,w.byteLength)),!_.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(void 0===b&&(b=0),void 0===z&&(z=w?w.length:0),void 0===ie&&(ie=0),void 0===be&&(be=this.length),b<0||z>w.length||ie<0||be>this.length)throw new RangeError("out of range index");if(ie>=be&&b>=z)return 0;if(ie>=be)return-1;if(b>=z)return 1;if(this===w)return 0;let Me=(be>>>=0)-(ie>>>=0),qe=(z>>>=0)-(b>>>=0);const At=Math.min(Me,qe),nt=this.slice(ie,be),rt=w.slice(b,z);for(let St=0;St<At;++St)if(nt[St]!==rt[St]){Me=nt[St],qe=rt[St];break}return Me<qe?-1:qe<Me?1:0},_.prototype.includes=function(w,b,z){return-1!==this.indexOf(w,b,z)},_.prototype.indexOf=function(w,b,z){return oe(this,w,b,z,!0)},_.prototype.lastIndexOf=function(w,b,z){return oe(this,w,b,z,!1)},_.prototype.write=function(w,b,z,ie){if(void 0===b)ie="utf8",z=this.length,b=0;else if(void 0===z&&"string"==typeof b)ie=b,z=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b>>>=0,isFinite(z)?(z>>>=0,void 0===ie&&(ie="utf8")):(ie=z,z=void 0)}const be=this.length-b;if((void 0===z||z>be)&&(z=be),w.length>0&&(z<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let Me=!1;for(;;)switch(ie){case"hex":return me(this,w,b,z);case"utf8":case"utf-8":return pe(this,w,b,z);case"ascii":case"latin1":case"binary":return Ie(this,w,b,z);case"base64":return E(this,w,b,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a(this,w,b,z);default:if(Me)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),Me=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const h=4096;function x(U,w,b){let z="";b=Math.min(U.length,b);for(let ie=w;ie<b;++ie)z+=String.fromCharCode(127&U[ie]);return z}function P(U,w,b){let z="";b=Math.min(U.length,b);for(let ie=w;ie<b;++ie)z+=String.fromCharCode(U[ie]);return z}function m(U,w,b){const z=U.length;(!w||w<0)&&(w=0),(!b||b<0||b>z)&&(b=z);let ie="";for(let be=w;be<b;++be)ie+=Ke[U[be]];return ie}function d(U,w,b){const z=U.slice(w,b);let ie="";for(let be=0;be<z.length-1;be+=2)ie+=String.fromCharCode(z[be]+256*z[be+1]);return ie}function p(U,w,b){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+w>b)throw new RangeError("Trying to access beyond buffer length")}function V(U,w,b,z,ie,be){if(!_.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>ie||w<be)throw new RangeError('"value" argument is out of bounds');if(b+z>U.length)throw new RangeError("Index out of range")}function L(U,w,b,z,ie){ve(w,z,ie,U,b,7);let be=Number(w&BigInt(4294967295));U[b++]=be,be>>=8,U[b++]=be,be>>=8,U[b++]=be,be>>=8,U[b++]=be;let Me=Number(w>>BigInt(32)&BigInt(4294967295));return U[b++]=Me,Me>>=8,U[b++]=Me,Me>>=8,U[b++]=Me,Me>>=8,U[b++]=Me,b}function Y(U,w,b,z,ie){ve(w,z,ie,U,b,7);let be=Number(w&BigInt(4294967295));U[b+7]=be,be>>=8,U[b+6]=be,be>>=8,U[b+5]=be,be>>=8,U[b+4]=be;let Me=Number(w>>BigInt(32)&BigInt(4294967295));return U[b+3]=Me,Me>>=8,U[b+2]=Me,Me>>=8,U[b+1]=Me,Me>>=8,U[b]=Me,b+8}function le(U,w,b,z,ie,be){if(b+z>U.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Se(U,w,b,z,ie){return w=+w,b>>>=0,ie||le(U,0,b,4),H.write(U,w,b,z,23,4),b+4}function Oe(U,w,b,z,ie){return w=+w,b>>>=0,ie||le(U,0,b,8),H.write(U,w,b,z,52,8),b+8}_.prototype.slice=function(w,b){const z=this.length;(w=~~w)<0?(w+=z)<0&&(w=0):w>z&&(w=z),(b=void 0===b?z:~~b)<0?(b+=z)<0&&(b=0):b>z&&(b=z),b<w&&(b=w);const ie=this.subarray(w,b);return Object.setPrototypeOf(ie,_.prototype),ie},_.prototype.readUintLE=_.prototype.readUIntLE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w],be=1,Me=0;for(;++Me<b&&(be*=256);)ie+=this[w+Me]*be;return ie},_.prototype.readUintBE=_.prototype.readUIntBE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w+--b],be=1;for(;b>0&&(be*=256);)ie+=this[w+--b]*be;return ie},_.prototype.readUint8=_.prototype.readUInt8=function(w,b){return w>>>=0,b||p(w,1,this.length),this[w]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(w,b){return w>>>=0,b||p(w,2,this.length),this[w]|this[w+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(w,b){return w>>>=0,b||p(w,2,this.length),this[w]<<8|this[w+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(w,b){return w>>>=0,b||p(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+16777216*this[w+3]},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(w,b){return w>>>=0,b||p(w,4,this.length),16777216*this[w]+(this[w+1]<<16|this[w+2]<<8|this[w+3])},_.prototype.readBigUInt64LE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=b+256*this[++w]+65536*this[++w]+this[++w]*2**24,be=this[++w]+256*this[++w]+65536*this[++w]+z*2**24;return BigInt(ie)+(BigInt(be)<<BigInt(32))}),_.prototype.readBigUInt64BE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=b*2**24+65536*this[++w]+256*this[++w]+this[++w],be=this[++w]*2**24+65536*this[++w]+256*this[++w]+z;return(BigInt(ie)<<BigInt(32))+BigInt(be)}),_.prototype.readIntLE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=this[w],be=1,Me=0;for(;++Me<b&&(be*=256);)ie+=this[w+Me]*be;return be*=128,ie>=be&&(ie-=Math.pow(2,8*b)),ie},_.prototype.readIntBE=function(w,b,z){w>>>=0,b>>>=0,z||p(w,b,this.length);let ie=b,be=1,Me=this[w+--ie];for(;ie>0&&(be*=256);)Me+=this[w+--ie]*be;return be*=128,Me>=be&&(Me-=Math.pow(2,8*b)),Me},_.prototype.readInt8=function(w,b){return w>>>=0,b||p(w,1,this.length),128&this[w]?-1*(255-this[w]+1):this[w]},_.prototype.readInt16LE=function(w,b){w>>>=0,b||p(w,2,this.length);const z=this[w]|this[w+1]<<8;return 32768&z?4294901760|z:z},_.prototype.readInt16BE=function(w,b){w>>>=0,b||p(w,2,this.length);const z=this[w+1]|this[w]<<8;return 32768&z?4294901760|z:z},_.prototype.readInt32LE=function(w,b){return w>>>=0,b||p(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},_.prototype.readInt32BE=function(w,b){return w>>>=0,b||p(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},_.prototype.readBigInt64LE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];return(void 0===b||void 0===z)&&de(w,this.length-8),(BigInt(this[w+4]+256*this[w+5]+65536*this[w+6]+(z<<24))<<BigInt(32))+BigInt(b+256*this[++w]+65536*this[++w]+this[++w]*2**24)}),_.prototype.readBigInt64BE=We(function(w){_e(w>>>=0,"offset");const b=this[w],z=this[w+7];(void 0===b||void 0===z)&&de(w,this.length-8);const ie=(b<<24)+65536*this[++w]+256*this[++w]+this[++w];return(BigInt(ie)<<BigInt(32))+BigInt(this[++w]*2**24+65536*this[++w]+256*this[++w]+z)}),_.prototype.readFloatLE=function(w,b){return w>>>=0,b||p(w,4,this.length),H.read(this,w,!0,23,4)},_.prototype.readFloatBE=function(w,b){return w>>>=0,b||p(w,4,this.length),H.read(this,w,!1,23,4)},_.prototype.readDoubleLE=function(w,b){return w>>>=0,b||p(w,8,this.length),H.read(this,w,!0,52,8)},_.prototype.readDoubleBE=function(w,b){return w>>>=0,b||p(w,8,this.length),H.read(this,w,!1,52,8)},_.prototype.writeUintLE=_.prototype.writeUIntLE=function(w,b,z,ie){w=+w,b>>>=0,z>>>=0,ie||V(this,w,b,z,Math.pow(2,8*z)-1,0);let be=1,Me=0;for(this[b]=255&w;++Me<z&&(be*=256);)this[b+Me]=w/be&255;return b+z},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(w,b,z,ie){w=+w,b>>>=0,z>>>=0,ie||V(this,w,b,z,Math.pow(2,8*z)-1,0);let be=z-1,Me=1;for(this[b+be]=255&w;--be>=0&&(Me*=256);)this[b+be]=w/Me&255;return b+z},_.prototype.writeUint8=_.prototype.writeUInt8=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,1,255,0),this[b]=255&w,b+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,65535,0),this[b]=255&w,this[b+1]=w>>>8,b+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,65535,0),this[b]=w>>>8,this[b+1]=255&w,b+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,4294967295,0),this[b+3]=w>>>24,this[b+2]=w>>>16,this[b+1]=w>>>8,this[b]=255&w,b+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,4294967295,0),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=255&w,b+4},_.prototype.writeBigUInt64LE=We(function(w,b=0){return L(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeBigUInt64BE=We(function(w,b=0){return Y(this,w,b,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeIntLE=function(w,b,z,ie){if(w=+w,b>>>=0,!ie){const At=Math.pow(2,8*z-1);V(this,w,b,z,At-1,-At)}let be=0,Me=1,qe=0;for(this[b]=255&w;++be<z&&(Me*=256);)w<0&&0===qe&&0!==this[b+be-1]&&(qe=1),this[b+be]=(w/Me|0)-qe&255;return b+z},_.prototype.writeIntBE=function(w,b,z,ie){if(w=+w,b>>>=0,!ie){const At=Math.pow(2,8*z-1);V(this,w,b,z,At-1,-At)}let be=z-1,Me=1,qe=0;for(this[b+be]=255&w;--be>=0&&(Me*=256);)w<0&&0===qe&&0!==this[b+be+1]&&(qe=1),this[b+be]=(w/Me|0)-qe&255;return b+z},_.prototype.writeInt8=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,1,127,-128),w<0&&(w=255+w+1),this[b]=255&w,b+1},_.prototype.writeInt16LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,32767,-32768),this[b]=255&w,this[b+1]=w>>>8,b+2},_.prototype.writeInt16BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,2,32767,-32768),this[b]=w>>>8,this[b+1]=255&w,b+2},_.prototype.writeInt32LE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,2147483647,-2147483648),this[b]=255&w,this[b+1]=w>>>8,this[b+2]=w>>>16,this[b+3]=w>>>24,b+4},_.prototype.writeInt32BE=function(w,b,z){return w=+w,b>>>=0,z||V(this,w,b,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[b]=w>>>24,this[b+1]=w>>>16,this[b+2]=w>>>8,this[b+3]=255&w,b+4},_.prototype.writeBigInt64LE=We(function(w,b=0){return L(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeBigInt64BE=We(function(w,b=0){return Y(this,w,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeFloatLE=function(w,b,z){return Se(this,w,b,!0,z)},_.prototype.writeFloatBE=function(w,b,z){return Se(this,w,b,!1,z)},_.prototype.writeDoubleLE=function(w,b,z){return Oe(this,w,b,!0,z)},_.prototype.writeDoubleBE=function(w,b,z){return Oe(this,w,b,!1,z)},_.prototype.copy=function(w,b,z,ie){if(!_.isBuffer(w))throw new TypeError("argument should be a Buffer");if(z||(z=0),!ie&&0!==ie&&(ie=this.length),b>=w.length&&(b=w.length),b||(b=0),ie>0&&ie<z&&(ie=z),ie===z||0===w.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),w.length-b<ie-z&&(ie=w.length-b+z);const be=ie-z;return this===w&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,z,ie):Uint8Array.prototype.set.call(w,this.subarray(z,ie),b),be},_.prototype.fill=function(w,b,z,ie){if("string"==typeof w){if("string"==typeof b?(ie=b,b=0,z=this.length):"string"==typeof z&&(ie=z,z=this.length),void 0!==ie&&"string"!=typeof ie)throw new TypeError("encoding must be a string");if("string"==typeof ie&&!_.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(1===w.length){const Me=w.charCodeAt(0);("utf8"===ie&&Me<128||"latin1"===ie)&&(w=Me)}}else"number"==typeof w?w&=255:"boolean"==typeof w&&(w=Number(w));if(b<0||this.length<b||this.length<z)throw new RangeError("Out of range index");if(z<=b)return this;let be;if(b>>>=0,z=void 0===z?this.length:z>>>0,w||(w=0),"number"==typeof w)for(be=b;be<z;++be)this[be]=w;else{const Me=_.isBuffer(w)?w:_.from(w,ie),qe=Me.length;if(0===qe)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(be=0;be<z-b;++be)this[be+b]=Me[be%qe]}return this};const Ve={};function Re(U,w,b){Ve[U]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,delete this.name}get code(){return U}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}function ye(U){let w="",b=U.length;const z="-"===U[0]?1:0;for(;b>=z+4;b-=3)w=`_${U.slice(b-3,b)}${w}`;return`${U.slice(0,b)}${w}`}function ve(U,w,b,z,ie,be){if(U>b||U<w){const Me="bigint"==typeof w?"n":"";let qe;throw qe=be>3?0===w||w===BigInt(0)?`>= 0${Me} and < 2${Me} ** ${8*(be+1)}${Me}`:`>= -(2${Me} ** ${8*(be+1)-1}${Me}) and < 2 ** ${8*(be+1)-1}${Me}`:`>= ${w}${Me} and <= ${b}${Me}`,new Ve.ERR_OUT_OF_RANGE("value",qe,U)}!function ke(U,w,b){_e(w,"offset"),(void 0===U[w]||void 0===U[w+b])&&de(w,U.length-(b+1))}(z,ie,be)}function _e(U,w){if("number"!=typeof U)throw new Ve.ERR_INVALID_ARG_TYPE(w,"number",U)}function de(U,w,b){throw Math.floor(U)!==U?(_e(U,b),new Ve.ERR_OUT_OF_RANGE(b||"offset","an integer",U)):w<0?new Ve.ERR_BUFFER_OUT_OF_BOUNDS:new Ve.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${w}`,U)}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(U,w){return`The "${U}" argument must be of type number. Received type ${typeof w}`},TypeError),Re("ERR_OUT_OF_RANGE",function(U,w,b){let z=`The value of "${U}" is out of range.`,ie=b;return Number.isInteger(b)&&Math.abs(b)>2**32?ie=ye(String(b)):"bigint"==typeof b&&(ie=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(ie=ye(ie)),ie+="n"),z+=` It must be ${w}. Received ${ie}`,z},RangeError);const se=/[^+/0-9A-Za-z-_]/g;function ce(U,w){let b;w=w||1/0;const z=U.length;let ie=null;const be=[];for(let Me=0;Me<z;++Me){if(b=U.charCodeAt(Me),b>55295&&b<57344){if(!ie){if(b>56319){(w-=3)>-1&&be.push(239,191,189);continue}if(Me+1===z){(w-=3)>-1&&be.push(239,191,189);continue}ie=b;continue}if(b<56320){(w-=3)>-1&&be.push(239,191,189),ie=b;continue}b=65536+(ie-55296<<10|b-56320)}else ie&&(w-=3)>-1&&be.push(239,191,189);if(ie=null,b<128){if((w-=1)<0)break;be.push(b)}else if(b<2048){if((w-=2)<0)break;be.push(b>>6|192,63&b|128)}else if(b<65536){if((w-=3)<0)break;be.push(b>>12|224,b>>6&63|128,63&b|128)}else{if(!(b<1114112))throw new Error("Invalid code point");if((w-=4)<0)break;be.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}}return be}function Ee(U){return C.toByteArray(function re(U){if((U=(U=U.split("=")[0]).trim().replace(se,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(U))}function Be(U,w,b,z){let ie;for(ie=0;ie<z&&!(ie+b>=w.length||ie>=U.length);++ie)w[ie+b]=U[ie];return ie}function De(U,w){return U instanceof w||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===w.name}function et(U){return U!=U}const Ke=function(){const U="0123456789abcdef",w=new Array(256);for(let b=0;b<16;++b){const z=16*b;for(let ie=0;ie<16;++ie)w[z+ie]=U[b]+U[ie]}return w}();function We(U){return typeof BigInt>"u"?_t:U}function _t(){throw new Error("BigInt not supported")}},54626:(xe,O,I)=>{O.Level=I(23963).BrowserLevel},8516:(xe,O,I)=>{var C=I(81464);xe.exports=C.Symbol},61057:(xe,O,I)=>{var C=I(8516),H=I(8488),N=I(53327),B=C?C.toStringTag:void 0;xe.exports=function _(T){return null==T?void 0===T?"[object Undefined]":"[object Null]":B&&B in Object(T)?H(T):N(T)}},78657:xe=>{var O="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis;xe.exports=O},46902:(xe,O,I)=>{var H=I(72852)(Object.getPrototypeOf,Object);xe.exports=H},8488:(xe,O,I)=>{var C=I(8516),H=Object.prototype,N=H.hasOwnProperty,G=H.toString,v=C?C.toStringTag:void 0;xe.exports=function B(_){var T=N.call(_,v),D=_[v];try{_[v]=void 0;var $=!0}catch{}var M=G.call(_);return $&&(T?_[v]=D:delete _[v]),M}},53327:xe=>{var I=Object.prototype.toString;xe.exports=function C(H){return I.call(H)}},72852:xe=>{xe.exports=function O(I,C){return function(H){return I(C(H))}}},81464:(xe,O,I)=>{var C=I(78657),H="object"==typeof self&&self&&self.Object===Object&&self,N=C||H||Function("return this")();xe.exports=N},57433:xe=>{xe.exports=function O(I){return null!=I&&"object"==typeof I}},49970:(xe,O,I)=>{var C=I(61057),H=I(46902),N=I(57433),_=Function.prototype.toString,T=Object.prototype.hasOwnProperty,D=_.call(Object);xe.exports=function $(M){if(!N(M)||"[object Object]"!=C(M))return!1;var F=H(M);if(null===F)return!0;var k=T.call(F,"constructor")&&F.constructor;return"function"==typeof k&&k instanceof k&&_.call(k)==D}},34725:(xe,O,I)=>{"use strict";var C=I(71993),H=I(13686),N=I(27054).Buffer,G=new Array(16);function v(){H.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function B(M,F){return M<<F|M>>>32-F}function _(M,F,k,j,Z,q,W){return B(M+(F&k|~F&j)+Z+q|0,W)+F|0}function T(M,F,k,j,Z,q,W){return B(M+(F&j|k&~j)+Z+q|0,W)+F|0}function D(M,F,k,j,Z,q,W){return B(M+(F^k^j)+Z+q|0,W)+F|0}function $(M,F,k,j,Z,q,W){return B(M+(k^(F|~j))+Z+q|0,W)+F|0}C(v,H),v.prototype._update=function(){for(var M=G,F=0;F<16;++F)M[F]=this._block.readInt32LE(4*F);var k=this._a,j=this._b,Z=this._c,q=this._d;k=_(k,j,Z,q,M[0],3614090360,7),q=_(q,k,j,Z,M[1],3905402710,12),Z=_(Z,q,k,j,M[2],606105819,17),j=_(j,Z,q,k,M[3],3250441966,22),k=_(k,j,Z,q,M[4],4118548399,7),q=_(q,k,j,Z,M[5],1200080426,12),Z=_(Z,q,k,j,M[6],2821735955,17),j=_(j,Z,q,k,M[7],4249261313,22),k=_(k,j,Z,q,M[8],1770035416,7),q=_(q,k,j,Z,M[9],2336552879,12),Z=_(Z,q,k,j,M[10],4294925233,17),j=_(j,Z,q,k,M[11],2304563134,22),k=_(k,j,Z,q,M[12],1804603682,7),q=_(q,k,j,Z,M[13],4254626195,12),Z=_(Z,q,k,j,M[14],2792965006,17),k=T(k,j=_(j,Z,q,k,M[15],1236535329,22),Z,q,M[1],4129170786,5),q=T(q,k,j,Z,M[6],3225465664,9),Z=T(Z,q,k,j,M[11],643717713,14),j=T(j,Z,q,k,M[0],3921069994,20),k=T(k,j,Z,q,M[5],3593408605,5),q=T(q,k,j,Z,M[10],38016083,9),Z=T(Z,q,k,j,M[15],3634488961,14),j=T(j,Z,q,k,M[4],3889429448,20),k=T(k,j,Z,q,M[9],568446438,5),q=T(q,k,j,Z,M[14],3275163606,9),Z=T(Z,q,k,j,M[3],4107603335,14),j=T(j,Z,q,k,M[8],1163531501,20),k=T(k,j,Z,q,M[13],2850285829,5),q=T(q,k,j,Z,M[2],4243563512,9),Z=T(Z,q,k,j,M[7],1735328473,14),k=D(k,j=T(j,Z,q,k,M[12],2368359562,20),Z,q,M[5],4294588738,4),q=D(q,k,j,Z,M[8],2272392833,11),Z=D(Z,q,k,j,M[11],1839030562,16),j=D(j,Z,q,k,M[14],4259657740,23),k=D(k,j,Z,q,M[1],2763975236,4),q=D(q,k,j,Z,M[4],1272893353,11),Z=D(Z,q,k,j,M[7],4139469664,16),j=D(j,Z,q,k,M[10],3200236656,23),k=D(k,j,Z,q,M[13],681279174,4),q=D(q,k,j,Z,M[0],3936430074,11),Z=D(Z,q,k,j,M[3],3572445317,16),j=D(j,Z,q,k,M[6],76029189,23),k=D(k,j,Z,q,M[9],3654602809,4),q=D(q,k,j,Z,M[12],3873151461,11),Z=D(Z,q,k,j,M[15],530742520,16),k=$(k,j=D(j,Z,q,k,M[2],3299628645,23),Z,q,M[0],4096336452,6),q=$(q,k,j,Z,M[7],1126891415,10),Z=$(Z,q,k,j,M[14],2878612391,15),j=$(j,Z,q,k,M[5],4237533241,21),k=$(k,j,Z,q,M[12],1700485571,6),q=$(q,k,j,Z,M[3],2399980690,10),Z=$(Z,q,k,j,M[10],4293915773,15),j=$(j,Z,q,k,M[1],2240044497,21),k=$(k,j,Z,q,M[8],1873313359,6),q=$(q,k,j,Z,M[15],4264355552,10),Z=$(Z,q,k,j,M[6],2734768916,15),j=$(j,Z,q,k,M[13],1309151649,21),k=$(k,j,Z,q,M[4],4149444226,6),q=$(q,k,j,Z,M[11],3174756917,10),Z=$(Z,q,k,j,M[2],718787259,15),j=$(j,Z,q,k,M[9],3951481745,21),this._a=this._a+k|0,this._b=this._b+j|0,this._c=this._c+Z|0,this._d=this._d+q|0},v.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var M=N.allocUnsafe(16);return M.writeInt32LE(this._a,0),M.writeInt32LE(this._b,4),M.writeInt32LE(this._c,8),M.writeInt32LE(this._d,12),M},xe.exports=v},53459:(xe,O,I)=>{var C=I(57223),H=I(35294);function N(G){this.rand=G||new H.Rand}xe.exports=N,N.create=function(v){return new N(v)},N.prototype._randbelow=function(v){var B=v.bitLength(),_=Math.ceil(B/8);do{var T=new C(this.rand.generate(_))}while(T.cmp(v)>=0);return T},N.prototype._randrange=function(v,B){var _=B.sub(v);return v.add(this._randbelow(_))},N.prototype.test=function(v,B,_){var T=v.bitLength(),D=C.mont(v),$=new C(1).toRed(D);B||(B=Math.max(1,T/48|0));for(var M=v.subn(1),F=0;!M.testn(F);F++);for(var k=v.shrn(F),j=M.toRed(D);B>0;B--){var q=this._randrange(new C(2),M);_&&_(q);var W=q.toRed(D).redPow(k);if(0!==W.cmp($)&&0!==W.cmp(j)){for(var K=1;K<F;K++){if(0===(W=W.redSqr()).cmp($))return!1;if(0===W.cmp(j))break}if(K===F)return!1}}return!0},N.prototype.getDivisor=function(v,B){var _=v.bitLength(),T=C.mont(v),D=new C(1).toRed(T);B||(B=Math.max(1,_/48|0));for(var $=v.subn(1),M=0;!$.testn(M);M++);for(var F=v.shrn(M),k=$.toRed(T);B>0;B--){var j=this._randrange(new C(2),$),Z=v.gcd(j);if(0!==Z.cmpn(1))return Z;var q=j.toRed(T).redPow(F);if(0!==q.cmp(D)&&0!==q.cmp(k)){for(var W=1;W<M;W++){if(0===(q=q.redSqr()).cmp(D))return q.fromRed().subn(1).gcd(v);if(0===q.cmp(k))break}if(W===M)return(q=q.redSqr()).fromRed().subn(1).gcd(v)}}return!1}},57223:function(xe,O,I){!function(C,H){"use strict";function N(E,a){if(!E)throw new Error(a||"Assertion failed")}function G(E,a){E.super_=a;var f=function(){};f.prototype=a.prototype,E.prototype=new f,E.prototype.constructor=E}function v(E,a,f){if(v.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,null!==E&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(E||0,a||10,f||"be"))}var B;"object"==typeof C?C.exports=v:H.BN=v,v.BN=v,v.wordSize=26;try{B=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:I(64688).Buffer}catch{}function _(E,a){var f=E.charCodeAt(a);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function T(E,a,f){var l=_(E,f);return f-1>=a&&(l|=_(E,f-1)<<4),l}function D(E,a,f,l){for(var h=0,g=Math.min(E.length,f),x=a;x<g;x++){var P=E.charCodeAt(x)-48;h*=l,h+=P>=49?P-49+10:P>=17?P-17+10:P}return h}v.isBN=function(a){return a instanceof v||null!==a&&"object"==typeof a&&a.constructor.wordSize===v.wordSize&&Array.isArray(a.words)},v.max=function(a,f){return a.cmp(f)>0?a:f},v.min=function(a,f){return a.cmp(f)<0?a:f},v.prototype._init=function(a,f,l){if("number"==typeof a)return this._initNumber(a,f,l);if("object"==typeof a)return this._initArray(a,f,l);"hex"===f&&(f=16),N(f===(0|f)&&f>=2&&f<=36);var h=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(h++,this.negative=1),h<a.length&&(16===f?this._parseHex(a,h,l):(this._parseBase(a,f,h),"le"===l&&this._initArray(this.toArray(),f,l)))},v.prototype._initNumber=function(a,f,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(N(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),f,l)},v.prototype._initArray=function(a,f,l){if(N("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var g,x,P=0;if("be"===l)for(h=a.length-1,g=0;h>=0;h-=3)this.words[g]|=(x=a[h]|a[h-1]<<8|a[h-2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);else if("le"===l)for(h=0,g=0;h<a.length;h+=3)this.words[g]|=(x=a[h]|a[h+1]<<8|a[h+2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);return this.strip()},v.prototype._parseHex=function(a,f,l){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var P,g=0,x=0;if("be"===l)for(h=a.length-1;h>=f;h-=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;else for(h=(a.length-f)%2==0?f+1:f;h<a.length;h+=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;this.strip()},v.prototype._parseBase=function(a,f,l){this.words=[0],this.length=1;for(var h=0,g=1;g<=67108863;g*=f)h++;h--,g=g/f|0;for(var x=a.length-l,P=x%h,m=Math.min(x,x-P)+l,d=0,p=l;p<m;p+=h)d=D(a,p,p+h,f),this.imuln(g),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==P){var V=1;for(d=D(a,p,a.length,f),p=0;p<P;p++)V*=f;this.imuln(V),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},v.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},v.prototype.clone=function(){var a=new v(null);return this.copy(a),a},v.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var $=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function j(E,a,f){f.negative=a.negative^E.negative;var l=E.length+a.length|0;f.length=l,l=l-1|0;var h=0|E.words[0],g=0|a.words[0],x=h*g,m=x/67108864|0;f.words[0]=67108863&x;for(var d=1;d<l;d++){for(var p=m>>>26,V=67108863&m,L=Math.min(d,a.length-1),Y=Math.max(0,d-E.length+1);Y<=L;Y++)p+=(x=(h=0|E.words[d-Y|0])*(g=0|a.words[Y])+V)/67108864|0,V=67108863&x;f.words[d]=0|V,m=0|p}return 0!==m?f.words[d]=0|m:f.length--,f.strip()}v.prototype.toString=function(a,f){var l;if(f=0|f||1,16===(a=a||10)||"hex"===a){l="";for(var h=0,g=0,x=0;x<this.length;x++){var P=this.words[x],m=(16777215&(P<<h|g)).toString(16);l=0!=(g=P>>>24-h&16777215)||x!==this.length-1?$[6-m.length]+m+l:m+l,(h+=2)>=26&&(h-=26,x--)}for(0!==g&&(l=g.toString(16)+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(a===(0|a)&&a>=2&&a<=36){var d=M[a],p=F[a];l="";var V=this.clone();for(V.negative=0;!V.isZero();){var L=V.modn(p).toString(a);l=(V=V.idivn(p)).isZero()?L+l:$[d-L.length]+L+l}for(this.isZero()&&(l="0"+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}N(!1,"Base should be between 2 and 36")},v.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&N(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(a,f){return N(typeof B<"u"),this.toArrayLike(B,a,f)},v.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},v.prototype.toArrayLike=function(a,f,l){var h=this.byteLength(),g=l||Math.max(1,h);N(h<=g,"byte array longer than desired length"),N(g>0,"Requested array length <= 0"),this.strip();var m,d,x="le"===f,P=new a(g),p=this.clone();if(x){for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[d]=m;for(;d<g;d++)P[d]=0}else{for(d=0;d<g-h;d++)P[d]=0;for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[g-d-1]=m}return P},v.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},v.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,l=0;return 8191&f||(l+=13,f>>>=13),127&f||(l+=7,f>>>=7),15&f||(l+=4,f>>>=4),3&f||(l+=2,f>>>=2),1&f||l++,l},v.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(a+=l,26!==l)break}return a},v.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},v.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},v.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this.strip()},v.prototype.ior=function(a){return N(!(this.negative|a.negative)),this.iuor(a)},v.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},v.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},v.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=f.length,this.strip()},v.prototype.iand=function(a){return N(!(this.negative|a.negative)),this.iuand(a)},v.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},v.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},v.prototype.iuxor=function(a){var f,l;this.length>a.length?(f=this,l=a):(f=a,l=this);for(var h=0;h<l.length;h++)this.words[h]=f.words[h]^l.words[h];if(this!==f)for(;h<f.length;h++)this.words[h]=f.words[h];return this.length=f.length,this.strip()},v.prototype.ixor=function(a){return N(!(this.negative|a.negative)),this.iuxor(a)},v.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},v.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},v.prototype.inotn=function(a){N("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),l=a%26;this._expand(f),l>0&&f--;for(var h=0;h<f;h++)this.words[h]=67108863&~this.words[h];return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this.strip()},v.prototype.notn=function(a){return this.clone().inotn(a)},v.prototype.setn=function(a,f){N("number"==typeof a&&a>=0);var l=a/26|0,h=a%26;return this._expand(l+1),this.words[l]=f?this.words[l]|1<<h:this.words[l]&~(1<<h),this.strip()},v.prototype.iadd=function(a){var f,l,h;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(l=this,h=a):(l=a,h=this);for(var g=0,x=0;x<h.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+(0|h.words[x])+g),g=f>>>26;for(;0!==g&&x<l.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+g),g=f>>>26;if(this.length=l.length,0!==g)this.words[this.length]=g,this.length++;else if(l!==this)for(;x<l.length;x++)this.words[x]=l.words[x];return this},v.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},v.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h,g,l=this.cmp(a);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(h=this,g=a):(h=a,g=this);for(var x=0,P=0;P<g.length;P++)x=(f=(0|h.words[P])-(0|g.words[P])+x)>>26,this.words[P]=67108863&f;for(;0!==x&&P<h.length;P++)x=(f=(0|h.words[P])+x)>>26,this.words[P]=67108863&f;if(0===x&&P<h.length&&h!==this)for(;P<h.length;P++)this.words[P]=h.words[P];return this.length=Math.max(this.length,P),h!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(a){return this.clone().isub(a)};var Z=function(a,f,l){var m,d,p,h=a.words,g=f.words,x=l.words,P=0,V=0|h[0],L=8191&V,Y=V>>>13,le=0|h[1],Se=8191&le,Oe=le>>>13,Ve=0|h[2],Re=8191&Ve,ye=Ve>>>13,ke=0|h[3],ve=8191&ke,_e=ke>>>13,de=0|h[4],se=8191&de,re=de>>>13,ce=0|h[5],ue=8191&ce,ge=ce>>>13,Ee=0|h[6],Be=8191&Ee,De=Ee>>>13,et=0|h[7],Ke=8191&et,We=et>>>13,_t=0|h[8],U=8191&_t,w=_t>>>13,b=0|h[9],z=8191&b,ie=b>>>13,be=0|g[0],Me=8191&be,qe=be>>>13,At=0|g[1],nt=8191&At,rt=At>>>13,St=0|g[2],bt=8191&St,Mt=St>>>13,Ft=0|g[3],it=8191&Ft,mt=Ft>>>13,Rr=0|g[4],xt=8191&Rr,It=Rr>>>13,Qr=0|g[5],Tt=8191&Qr,Pt=Qr>>>13,kn=0|g[6],Fe=8191&kn,He=kn>>>13,Ze=0|g[7],Ue=8191&Ze,Ge=Ze>>>13,pt=0|g[8],Xe=8191&pt,dt=pt>>>13,Qt=0|g[9],gt=8191&Qt,wt=Qt>>>13;l.negative=a.negative^f.negative,l.length=19;var Br=(P+(m=Math.imul(L,Me))|0)+((8191&(d=(d=Math.imul(L,qe))+Math.imul(Y,Me)|0))<<13)|0;P=((p=Math.imul(Y,qe))+(d>>>13)|0)+(Br>>>26)|0,Br&=67108863,m=Math.imul(Se,Me),d=(d=Math.imul(Se,qe))+Math.imul(Oe,Me)|0,p=Math.imul(Oe,qe);var Vt=(P+(m=m+Math.imul(L,nt)|0)|0)+((8191&(d=(d=d+Math.imul(L,rt)|0)+Math.imul(Y,nt)|0))<<13)|0;P=((p=p+Math.imul(Y,rt)|0)+(d>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,m=Math.imul(Re,Me),d=(d=Math.imul(Re,qe))+Math.imul(ye,Me)|0,p=Math.imul(ye,qe),m=m+Math.imul(Se,nt)|0,d=(d=d+Math.imul(Se,rt)|0)+Math.imul(Oe,nt)|0,p=p+Math.imul(Oe,rt)|0;var Zt=(P+(m=m+Math.imul(L,bt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Mt)|0)+Math.imul(Y,bt)|0))<<13)|0;P=((p=p+Math.imul(Y,Mt)|0)+(d>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,m=Math.imul(ve,Me),d=(d=Math.imul(ve,qe))+Math.imul(_e,Me)|0,p=Math.imul(_e,qe),m=m+Math.imul(Re,nt)|0,d=(d=d+Math.imul(Re,rt)|0)+Math.imul(ye,nt)|0,p=p+Math.imul(ye,rt)|0,m=m+Math.imul(Se,bt)|0,d=(d=d+Math.imul(Se,Mt)|0)+Math.imul(Oe,bt)|0,p=p+Math.imul(Oe,Mt)|0;var Tr=(P+(m=m+Math.imul(L,it)|0)|0)+((8191&(d=(d=d+Math.imul(L,mt)|0)+Math.imul(Y,it)|0))<<13)|0;P=((p=p+Math.imul(Y,mt)|0)+(d>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,m=Math.imul(se,Me),d=(d=Math.imul(se,qe))+Math.imul(re,Me)|0,p=Math.imul(re,qe),m=m+Math.imul(ve,nt)|0,d=(d=d+Math.imul(ve,rt)|0)+Math.imul(_e,nt)|0,p=p+Math.imul(_e,rt)|0,m=m+Math.imul(Re,bt)|0,d=(d=d+Math.imul(Re,Mt)|0)+Math.imul(ye,bt)|0,p=p+Math.imul(ye,Mt)|0,m=m+Math.imul(Se,it)|0,d=(d=d+Math.imul(Se,mt)|0)+Math.imul(Oe,it)|0,p=p+Math.imul(Oe,mt)|0;var dr=(P+(m=m+Math.imul(L,xt)|0)|0)+((8191&(d=(d=d+Math.imul(L,It)|0)+Math.imul(Y,xt)|0))<<13)|0;P=((p=p+Math.imul(Y,It)|0)+(d>>>13)|0)+(dr>>>26)|0,dr&=67108863,m=Math.imul(ue,Me),d=(d=Math.imul(ue,qe))+Math.imul(ge,Me)|0,p=Math.imul(ge,qe),m=m+Math.imul(se,nt)|0,d=(d=d+Math.imul(se,rt)|0)+Math.imul(re,nt)|0,p=p+Math.imul(re,rt)|0,m=m+Math.imul(ve,bt)|0,d=(d=d+Math.imul(ve,Mt)|0)+Math.imul(_e,bt)|0,p=p+Math.imul(_e,Mt)|0,m=m+Math.imul(Re,it)|0,d=(d=d+Math.imul(Re,mt)|0)+Math.imul(ye,it)|0,p=p+Math.imul(ye,mt)|0,m=m+Math.imul(Se,xt)|0,d=(d=d+Math.imul(Se,It)|0)+Math.imul(Oe,xt)|0,p=p+Math.imul(Oe,It)|0;var or=(P+(m=m+Math.imul(L,Tt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Pt)|0)+Math.imul(Y,Tt)|0))<<13)|0;P=((p=p+Math.imul(Y,Pt)|0)+(d>>>13)|0)+(or>>>26)|0,or&=67108863,m=Math.imul(Be,Me),d=(d=Math.imul(Be,qe))+Math.imul(De,Me)|0,p=Math.imul(De,qe),m=m+Math.imul(ue,nt)|0,d=(d=d+Math.imul(ue,rt)|0)+Math.imul(ge,nt)|0,p=p+Math.imul(ge,rt)|0,m=m+Math.imul(se,bt)|0,d=(d=d+Math.imul(se,Mt)|0)+Math.imul(re,bt)|0,p=p+Math.imul(re,Mt)|0,m=m+Math.imul(ve,it)|0,d=(d=d+Math.imul(ve,mt)|0)+Math.imul(_e,it)|0,p=p+Math.imul(_e,mt)|0,m=m+Math.imul(Re,xt)|0,d=(d=d+Math.imul(Re,It)|0)+Math.imul(ye,xt)|0,p=p+Math.imul(ye,It)|0,m=m+Math.imul(Se,Tt)|0,d=(d=d+Math.imul(Se,Pt)|0)+Math.imul(Oe,Tt)|0,p=p+Math.imul(Oe,Pt)|0;var mr=(P+(m=m+Math.imul(L,Fe)|0)|0)+((8191&(d=(d=d+Math.imul(L,He)|0)+Math.imul(Y,Fe)|0))<<13)|0;P=((p=p+Math.imul(Y,He)|0)+(d>>>13)|0)+(mr>>>26)|0,mr&=67108863,m=Math.imul(Ke,Me),d=(d=Math.imul(Ke,qe))+Math.imul(We,Me)|0,p=Math.imul(We,qe),m=m+Math.imul(Be,nt)|0,d=(d=d+Math.imul(Be,rt)|0)+Math.imul(De,nt)|0,p=p+Math.imul(De,rt)|0,m=m+Math.imul(ue,bt)|0,d=(d=d+Math.imul(ue,Mt)|0)+Math.imul(ge,bt)|0,p=p+Math.imul(ge,Mt)|0,m=m+Math.imul(se,it)|0,d=(d=d+Math.imul(se,mt)|0)+Math.imul(re,it)|0,p=p+Math.imul(re,mt)|0,m=m+Math.imul(ve,xt)|0,d=(d=d+Math.imul(ve,It)|0)+Math.imul(_e,xt)|0,p=p+Math.imul(_e,It)|0,m=m+Math.imul(Re,Tt)|0,d=(d=d+Math.imul(Re,Pt)|0)+Math.imul(ye,Tt)|0,p=p+Math.imul(ye,Pt)|0,m=m+Math.imul(Se,Fe)|0,d=(d=d+Math.imul(Se,He)|0)+Math.imul(Oe,Fe)|0,p=p+Math.imul(Oe,He)|0;var ar=(P+(m=m+Math.imul(L,Ue)|0)|0)+((8191&(d=(d=d+Math.imul(L,Ge)|0)+Math.imul(Y,Ue)|0))<<13)|0;P=((p=p+Math.imul(Y,Ge)|0)+(d>>>13)|0)+(ar>>>26)|0,ar&=67108863,m=Math.imul(U,Me),d=(d=Math.imul(U,qe))+Math.imul(w,Me)|0,p=Math.imul(w,qe),m=m+Math.imul(Ke,nt)|0,d=(d=d+Math.imul(Ke,rt)|0)+Math.imul(We,nt)|0,p=p+Math.imul(We,rt)|0,m=m+Math.imul(Be,bt)|0,d=(d=d+Math.imul(Be,Mt)|0)+Math.imul(De,bt)|0,p=p+Math.imul(De,Mt)|0,m=m+Math.imul(ue,it)|0,d=(d=d+Math.imul(ue,mt)|0)+Math.imul(ge,it)|0,p=p+Math.imul(ge,mt)|0,m=m+Math.imul(se,xt)|0,d=(d=d+Math.imul(se,It)|0)+Math.imul(re,xt)|0,p=p+Math.imul(re,It)|0,m=m+Math.imul(ve,Tt)|0,d=(d=d+Math.imul(ve,Pt)|0)+Math.imul(_e,Tt)|0,p=p+Math.imul(_e,Pt)|0,m=m+Math.imul(Re,Fe)|0,d=(d=d+Math.imul(Re,He)|0)+Math.imul(ye,Fe)|0,p=p+Math.imul(ye,He)|0,m=m+Math.imul(Se,Ue)|0,d=(d=d+Math.imul(Se,Ge)|0)+Math.imul(Oe,Ue)|0,p=p+Math.imul(Oe,Ge)|0;var en=(P+(m=m+Math.imul(L,Xe)|0)|0)+((8191&(d=(d=d+Math.imul(L,dt)|0)+Math.imul(Y,Xe)|0))<<13)|0;P=((p=p+Math.imul(Y,dt)|0)+(d>>>13)|0)+(en>>>26)|0,en&=67108863,m=Math.imul(z,Me),d=(d=Math.imul(z,qe))+Math.imul(ie,Me)|0,p=Math.imul(ie,qe),m=m+Math.imul(U,nt)|0,d=(d=d+Math.imul(U,rt)|0)+Math.imul(w,nt)|0,p=p+Math.imul(w,rt)|0,m=m+Math.imul(Ke,bt)|0,d=(d=d+Math.imul(Ke,Mt)|0)+Math.imul(We,bt)|0,p=p+Math.imul(We,Mt)|0,m=m+Math.imul(Be,it)|0,d=(d=d+Math.imul(Be,mt)|0)+Math.imul(De,it)|0,p=p+Math.imul(De,mt)|0,m=m+Math.imul(ue,xt)|0,d=(d=d+Math.imul(ue,It)|0)+Math.imul(ge,xt)|0,p=p+Math.imul(ge,It)|0,m=m+Math.imul(se,Tt)|0,d=(d=d+Math.imul(se,Pt)|0)+Math.imul(re,Tt)|0,p=p+Math.imul(re,Pt)|0,m=m+Math.imul(ve,Fe)|0,d=(d=d+Math.imul(ve,He)|0)+Math.imul(_e,Fe)|0,p=p+Math.imul(_e,He)|0,m=m+Math.imul(Re,Ue)|0,d=(d=d+Math.imul(Re,Ge)|0)+Math.imul(ye,Ue)|0,p=p+Math.imul(ye,Ge)|0,m=m+Math.imul(Se,Xe)|0,d=(d=d+Math.imul(Se,dt)|0)+Math.imul(Oe,Xe)|0,p=p+Math.imul(Oe,dt)|0;var zr=(P+(m=m+Math.imul(L,gt)|0)|0)+((8191&(d=(d=d+Math.imul(L,wt)|0)+Math.imul(Y,gt)|0))<<13)|0;P=((p=p+Math.imul(Y,wt)|0)+(d>>>13)|0)+(zr>>>26)|0,zr&=67108863,m=Math.imul(z,nt),d=(d=Math.imul(z,rt))+Math.imul(ie,nt)|0,p=Math.imul(ie,rt),m=m+Math.imul(U,bt)|0,d=(d=d+Math.imul(U,Mt)|0)+Math.imul(w,bt)|0,p=p+Math.imul(w,Mt)|0,m=m+Math.imul(Ke,it)|0,d=(d=d+Math.imul(Ke,mt)|0)+Math.imul(We,it)|0,p=p+Math.imul(We,mt)|0,m=m+Math.imul(Be,xt)|0,d=(d=d+Math.imul(Be,It)|0)+Math.imul(De,xt)|0,p=p+Math.imul(De,It)|0,m=m+Math.imul(ue,Tt)|0,d=(d=d+Math.imul(ue,Pt)|0)+Math.imul(ge,Tt)|0,p=p+Math.imul(ge,Pt)|0,m=m+Math.imul(se,Fe)|0,d=(d=d+Math.imul(se,He)|0)+Math.imul(re,Fe)|0,p=p+Math.imul(re,He)|0,m=m+Math.imul(ve,Ue)|0,d=(d=d+Math.imul(ve,Ge)|0)+Math.imul(_e,Ue)|0,p=p+Math.imul(_e,Ge)|0,m=m+Math.imul(Re,Xe)|0,d=(d=d+Math.imul(Re,dt)|0)+Math.imul(ye,Xe)|0,p=p+Math.imul(ye,dt)|0;var Wr=(P+(m=m+Math.imul(Se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Se,wt)|0)+Math.imul(Oe,gt)|0))<<13)|0;P=((p=p+Math.imul(Oe,wt)|0)+(d>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,m=Math.imul(z,bt),d=(d=Math.imul(z,Mt))+Math.imul(ie,bt)|0,p=Math.imul(ie,Mt),m=m+Math.imul(U,it)|0,d=(d=d+Math.imul(U,mt)|0)+Math.imul(w,it)|0,p=p+Math.imul(w,mt)|0,m=m+Math.imul(Ke,xt)|0,d=(d=d+Math.imul(Ke,It)|0)+Math.imul(We,xt)|0,p=p+Math.imul(We,It)|0,m=m+Math.imul(Be,Tt)|0,d=(d=d+Math.imul(Be,Pt)|0)+Math.imul(De,Tt)|0,p=p+Math.imul(De,Pt)|0,m=m+Math.imul(ue,Fe)|0,d=(d=d+Math.imul(ue,He)|0)+Math.imul(ge,Fe)|0,p=p+Math.imul(ge,He)|0,m=m+Math.imul(se,Ue)|0,d=(d=d+Math.imul(se,Ge)|0)+Math.imul(re,Ue)|0,p=p+Math.imul(re,Ge)|0,m=m+Math.imul(ve,Xe)|0,d=(d=d+Math.imul(ve,dt)|0)+Math.imul(_e,Xe)|0,p=p+Math.imul(_e,dt)|0;var _r=(P+(m=m+Math.imul(Re,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Re,wt)|0)+Math.imul(ye,gt)|0))<<13)|0;P=((p=p+Math.imul(ye,wt)|0)+(d>>>13)|0)+(_r>>>26)|0,_r&=67108863,m=Math.imul(z,it),d=(d=Math.imul(z,mt))+Math.imul(ie,it)|0,p=Math.imul(ie,mt),m=m+Math.imul(U,xt)|0,d=(d=d+Math.imul(U,It)|0)+Math.imul(w,xt)|0,p=p+Math.imul(w,It)|0,m=m+Math.imul(Ke,Tt)|0,d=(d=d+Math.imul(Ke,Pt)|0)+Math.imul(We,Tt)|0,p=p+Math.imul(We,Pt)|0,m=m+Math.imul(Be,Fe)|0,d=(d=d+Math.imul(Be,He)|0)+Math.imul(De,Fe)|0,p=p+Math.imul(De,He)|0,m=m+Math.imul(ue,Ue)|0,d=(d=d+Math.imul(ue,Ge)|0)+Math.imul(ge,Ue)|0,p=p+Math.imul(ge,Ge)|0,m=m+Math.imul(se,Xe)|0,d=(d=d+Math.imul(se,dt)|0)+Math.imul(re,Xe)|0,p=p+Math.imul(re,dt)|0;var Gr=(P+(m=m+Math.imul(ve,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ve,wt)|0)+Math.imul(_e,gt)|0))<<13)|0;P=((p=p+Math.imul(_e,wt)|0)+(d>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,m=Math.imul(z,xt),d=(d=Math.imul(z,It))+Math.imul(ie,xt)|0,p=Math.imul(ie,It),m=m+Math.imul(U,Tt)|0,d=(d=d+Math.imul(U,Pt)|0)+Math.imul(w,Tt)|0,p=p+Math.imul(w,Pt)|0,m=m+Math.imul(Ke,Fe)|0,d=(d=d+Math.imul(Ke,He)|0)+Math.imul(We,Fe)|0,p=p+Math.imul(We,He)|0,m=m+Math.imul(Be,Ue)|0,d=(d=d+Math.imul(Be,Ge)|0)+Math.imul(De,Ue)|0,p=p+Math.imul(De,Ge)|0,m=m+Math.imul(ue,Xe)|0,d=(d=d+Math.imul(ue,dt)|0)+Math.imul(ge,Xe)|0,p=p+Math.imul(ge,dt)|0;var qr=(P+(m=m+Math.imul(se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(se,wt)|0)+Math.imul(re,gt)|0))<<13)|0;P=((p=p+Math.imul(re,wt)|0)+(d>>>13)|0)+(qr>>>26)|0,qr&=67108863,m=Math.imul(z,Tt),d=(d=Math.imul(z,Pt))+Math.imul(ie,Tt)|0,p=Math.imul(ie,Pt),m=m+Math.imul(U,Fe)|0,d=(d=d+Math.imul(U,He)|0)+Math.imul(w,Fe)|0,p=p+Math.imul(w,He)|0,m=m+Math.imul(Ke,Ue)|0,d=(d=d+Math.imul(Ke,Ge)|0)+Math.imul(We,Ue)|0,p=p+Math.imul(We,Ge)|0,m=m+Math.imul(Be,Xe)|0,d=(d=d+Math.imul(Be,dt)|0)+Math.imul(De,Xe)|0,p=p+Math.imul(De,dt)|0;var Yr=(P+(m=m+Math.imul(ue,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ue,wt)|0)+Math.imul(ge,gt)|0))<<13)|0;P=((p=p+Math.imul(ge,wt)|0)+(d>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,m=Math.imul(z,Fe),d=(d=Math.imul(z,He))+Math.imul(ie,Fe)|0,p=Math.imul(ie,He),m=m+Math.imul(U,Ue)|0,d=(d=d+Math.imul(U,Ge)|0)+Math.imul(w,Ue)|0,p=p+Math.imul(w,Ge)|0,m=m+Math.imul(Ke,Xe)|0,d=(d=d+Math.imul(Ke,dt)|0)+Math.imul(We,Xe)|0,p=p+Math.imul(We,dt)|0;var mn=(P+(m=m+Math.imul(Be,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Be,wt)|0)+Math.imul(De,gt)|0))<<13)|0;P=((p=p+Math.imul(De,wt)|0)+(d>>>13)|0)+(mn>>>26)|0,mn&=67108863,m=Math.imul(z,Ue),d=(d=Math.imul(z,Ge))+Math.imul(ie,Ue)|0,p=Math.imul(ie,Ge),m=m+Math.imul(U,Xe)|0,d=(d=d+Math.imul(U,dt)|0)+Math.imul(w,Xe)|0,p=p+Math.imul(w,dt)|0;var un=(P+(m=m+Math.imul(Ke,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Ke,wt)|0)+Math.imul(We,gt)|0))<<13)|0;P=((p=p+Math.imul(We,wt)|0)+(d>>>13)|0)+(un>>>26)|0,un&=67108863,m=Math.imul(z,Xe),d=(d=Math.imul(z,dt))+Math.imul(ie,Xe)|0,p=Math.imul(ie,dt);var fn=(P+(m=m+Math.imul(U,gt)|0)|0)+((8191&(d=(d=d+Math.imul(U,wt)|0)+Math.imul(w,gt)|0))<<13)|0;P=((p=p+Math.imul(w,wt)|0)+(d>>>13)|0)+(fn>>>26)|0,fn&=67108863;var xn=(P+(m=Math.imul(z,gt))|0)+((8191&(d=(d=Math.imul(z,wt))+Math.imul(ie,gt)|0))<<13)|0;return P=((p=Math.imul(ie,wt))+(d>>>13)|0)+(xn>>>26)|0,xn&=67108863,x[0]=Br,x[1]=Vt,x[2]=Zt,x[3]=Tr,x[4]=dr,x[5]=or,x[6]=mr,x[7]=ar,x[8]=en,x[9]=zr,x[10]=Wr,x[11]=_r,x[12]=Gr,x[13]=qr,x[14]=Yr,x[15]=mn,x[16]=un,x[17]=fn,x[18]=xn,0!==P&&(x[19]=P,l.length++),l};function W(E,a,f){return(new K).mulp(E,a,f)}function K(E,a){this.x=E,this.y=a}Math.imul||(Z=j),v.prototype.mulTo=function(a,f){var l,h=this.length+a.length;return l=10===this.length&&10===a.length?Z(this,a,f):h<63?j(this,a,f):h<1024?function q(E,a,f){f.negative=a.negative^E.negative,f.length=E.length+a.length;for(var l=0,h=0,g=0;g<f.length-1;g++){var x=h;h=0;for(var P=67108863&l,m=Math.min(g,a.length-1),d=Math.max(0,g-E.length+1);d<=m;d++){var Y=(0|E.words[g-d])*(0|a.words[d]),le=67108863&Y;P=67108863&(le=le+P|0),h+=(x=(x=x+(Y/67108864|0)|0)+(le>>>26)|0)>>>26,x&=67108863}f.words[g]=P,l=x,x=h}return 0!==l?f.words[g]=l:f.length--,f.strip()}(this,a,f):W(this,a,f),l},K.prototype.makeRBT=function(a){for(var f=new Array(a),l=v.prototype._countBits(a)-1,h=0;h<a;h++)f[h]=this.revBin(h,l,a);return f},K.prototype.revBin=function(a,f,l){if(0===a||a===l-1)return a;for(var h=0,g=0;g<f;g++)h|=(1&a)<<f-g-1,a>>=1;return h},K.prototype.permute=function(a,f,l,h,g,x){for(var P=0;P<x;P++)h[P]=f[a[P]],g[P]=l[a[P]]},K.prototype.transform=function(a,f,l,h,g,x){this.permute(x,a,f,l,h,g);for(var P=1;P<g;P<<=1)for(var m=P<<1,d=Math.cos(2*Math.PI/m),p=Math.sin(2*Math.PI/m),V=0;V<g;V+=m)for(var L=d,Y=p,le=0;le<P;le++){var Se=l[V+le],Oe=h[V+le],Ve=l[V+le+P],Re=h[V+le+P],ye=L*Ve-Y*Re;Re=L*Re+Y*Ve,l[V+le]=Se+(Ve=ye),h[V+le]=Oe+Re,l[V+le+P]=Se-Ve,h[V+le+P]=Oe-Re,le!==m&&(ye=d*L-p*Y,Y=d*Y+p*L,L=ye)}},K.prototype.guessLen13b=function(a,f){var l=1|Math.max(f,a),h=1&l,g=0;for(l=l/2|0;l;l>>>=1)g++;return 1<<g+1+h},K.prototype.conjugate=function(a,f,l){if(!(l<=1))for(var h=0;h<l/2;h++){var g=a[h];a[h]=a[l-h-1],a[l-h-1]=g,g=f[h],f[h]=-f[l-h-1],f[l-h-1]=-g}},K.prototype.normalize13b=function(a,f){for(var l=0,h=0;h<f/2;h++){var g=8192*Math.round(a[2*h+1]/f)+Math.round(a[2*h]/f)+l;a[h]=67108863&g,l=g<67108864?0:g/67108864|0}return a},K.prototype.convert13b=function(a,f,l,h){for(var g=0,x=0;x<f;x++)l[2*x]=8191&(g+=0|a[x]),l[2*x+1]=8191&(g>>>=13),g>>>=13;for(x=2*f;x<h;++x)l[x]=0;N(0===g),N(!(-8192&g))},K.prototype.stub=function(a){for(var f=new Array(a),l=0;l<a;l++)f[l]=0;return f},K.prototype.mulp=function(a,f,l){var h=2*this.guessLen13b(a.length,f.length),g=this.makeRBT(h),x=this.stub(h),P=new Array(h),m=new Array(h),d=new Array(h),p=new Array(h),V=new Array(h),L=new Array(h),Y=l.words;Y.length=h,this.convert13b(a.words,a.length,P,h),this.convert13b(f.words,f.length,p,h),this.transform(P,x,m,d,h,g),this.transform(p,x,V,L,h,g);for(var le=0;le<h;le++){var Se=m[le]*V[le]-d[le]*L[le];d[le]=m[le]*L[le]+d[le]*V[le],m[le]=Se}return this.conjugate(m,d,h),this.transform(m,d,Y,x,h,g),this.conjugate(Y,x,h),this.normalize13b(Y,h),l.negative=a.negative^f.negative,l.length=a.length+f.length,l.strip()},v.prototype.mul=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},v.prototype.mulf=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),W(this,a,f)},v.prototype.imul=function(a){return this.clone().mulTo(a,this)},v.prototype.imuln=function(a){N("number"==typeof a),N(a<67108864);for(var f=0,l=0;l<this.length;l++){var h=(0|this.words[l])*a,g=(67108863&h)+(67108863&f);f>>=26,f+=h/67108864|0,f+=g>>>26,this.words[l]=67108863&g}return 0!==f&&(this.words[l]=f,this.length++),this},v.prototype.muln=function(a){return this.clone().imuln(a)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(a){var f=function k(E){for(var a=new Array(E.bitLength()),f=0;f<a.length;f++){var h=f%26;a[f]=(E.words[f/26|0]&1<<h)>>>h}return a}(a);if(0===f.length)return new v(1);for(var l=this,h=0;h<f.length&&0===f[h];h++,l=l.sqr());if(++h<f.length)for(var g=l.sqr();h<f.length;h++,g=g.sqr())0!==f[h]&&(l=l.mul(g));return l},v.prototype.iushln=function(a){N("number"==typeof a&&a>=0);var g,f=a%26,l=(a-f)/26,h=67108863>>>26-f<<26-f;if(0!==f){var x=0;for(g=0;g<this.length;g++){var P=this.words[g]&h;this.words[g]=(0|this.words[g])-P<<f|x,x=P>>>26-f}x&&(this.words[g]=x,this.length++)}if(0!==l){for(g=this.length-1;g>=0;g--)this.words[g+l]=this.words[g];for(g=0;g<l;g++)this.words[g]=0;this.length+=l}return this.strip()},v.prototype.ishln=function(a){return N(0===this.negative),this.iushln(a)},v.prototype.iushrn=function(a,f,l){var h;N("number"==typeof a&&a>=0),h=f?(f-f%26)/26:0;var g=a%26,x=Math.min((a-g)/26,this.length),P=67108863^67108863>>>g<<g,m=l;if(h-=x,h=Math.max(0,h),m){for(var d=0;d<x;d++)m.words[d]=this.words[d];m.length=x}if(0!==x)if(this.length>x)for(this.length-=x,d=0;d<this.length;d++)this.words[d]=this.words[d+x];else this.words[0]=0,this.length=1;var p=0;for(d=this.length-1;d>=0&&(0!==p||d>=h);d--){var V=0|this.words[d];this.words[d]=p<<26-g|V>>>g,p=V&P}return m&&0!==p&&(m.words[m.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(a,f,l){return N(0===this.negative),this.iushrn(a,f,l)},v.prototype.shln=function(a){return this.clone().ishln(a)},v.prototype.ushln=function(a){return this.clone().iushln(a)},v.prototype.shrn=function(a){return this.clone().ishrn(a)},v.prototype.ushrn=function(a){return this.clone().iushrn(a)},v.prototype.testn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return!(this.length<=l||!(this.words[l]&1<<f))},v.prototype.imaskn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return N(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==f&&l++,this.length=Math.min(l,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this.strip())},v.prototype.maskn=function(a){return this.clone().imaskn(a)},v.prototype.iaddn=function(a){return N("number"==typeof a),N(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},v.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},v.prototype.isubn=function(a){if(N("number"==typeof a),N(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},v.prototype.addn=function(a){return this.clone().iaddn(a)},v.prototype.subn=function(a){return this.clone().isubn(a)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(a,f,l){var g;this._expand(a.length+l);var x,P=0;for(g=0;g<a.length;g++){x=(0|this.words[g+l])+P;var m=(0|a.words[g])*f;P=((x-=67108863&m)>>26)-(m/67108864|0),this.words[g+l]=67108863&x}for(;g<this.length-l;g++)P=(x=(0|this.words[g+l])+P)>>26,this.words[g+l]=67108863&x;if(0===P)return this.strip();for(N(-1===P),P=0,g=0;g<this.length;g++)P=(x=-(0|this.words[g])+P)>>26,this.words[g]=67108863&x;return this.negative=1,this.strip()},v.prototype._wordDiv=function(a,f){var l,h=this.clone(),g=a,x=0|g.words[g.length-1];0!=(l=26-this._countBits(x))&&(g=g.ushln(l),h.iushln(l),x=0|g.words[g.length-1]);var d,m=h.length-g.length;if("mod"!==f){(d=new v(null)).length=m+1,d.words=new Array(d.length);for(var p=0;p<d.length;p++)d.words[p]=0}var V=h.clone()._ishlnsubmul(g,1,m);0===V.negative&&(h=V,d&&(d.words[m]=1));for(var L=m-1;L>=0;L--){var Y=67108864*(0|h.words[g.length+L])+(0|h.words[g.length+L-1]);for(Y=Math.min(Y/x|0,67108863),h._ishlnsubmul(g,Y,L);0!==h.negative;)Y--,h.negative=0,h._ishlnsubmul(g,1,L),h.isZero()||(h.negative^=1);d&&(d.words[L]=Y)}return d&&d.strip(),h.strip(),"div"!==f&&0!==l&&h.iushrn(l),{div:d||null,mod:h}},v.prototype.divmod=function(a,f,l){return N(!a.isZero()),this.isZero()?{div:new v(0),mod:new v(0)}:0!==this.negative&&0===a.negative?(x=this.neg().divmod(a,f),"mod"!==f&&(h=x.div.neg()),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.iadd(a)),{div:h,mod:g}):0===this.negative&&0!==a.negative?(x=this.divmod(a.neg(),f),"mod"!==f&&(h=x.div.neg()),{div:h,mod:x.mod}):this.negative&a.negative?(x=this.neg().divmod(a.neg(),f),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.isub(a)),{div:x.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new v(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new v(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new v(this.modn(a.words[0]))}:this._wordDiv(a,f);var h,g,x},v.prototype.div=function(a){return this.divmod(a,"div",!1).div},v.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},v.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},v.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var l=0!==f.div.negative?f.mod.isub(a):f.mod,h=a.ushrn(1),g=a.andln(1),x=l.cmp(h);return x<0||1===g&&0===x?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},v.prototype.modn=function(a){N(a<=67108863);for(var f=(1<<26)%a,l=0,h=this.length-1;h>=0;h--)l=(f*l+(0|this.words[h]))%a;return l},v.prototype.idivn=function(a){N(a<=67108863);for(var f=0,l=this.length-1;l>=0;l--){var h=(0|this.words[l])+67108864*f;this.words[l]=h/a|0,f=h%a}return this.strip()},v.prototype.divn=function(a){return this.clone().idivn(a)},v.prototype.egcd=function(a){N(0===a.negative),N(!a.isZero());var f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=new v(0),P=new v(1),m=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++m;for(var d=l.clone(),p=f.clone();!f.isZero();){for(var V=0,L=1;!(f.words[0]&L)&&V<26;++V,L<<=1);if(V>0)for(f.iushrn(V);V-- >0;)(h.isOdd()||g.isOdd())&&(h.iadd(d),g.isub(p)),h.iushrn(1),g.iushrn(1);for(var Y=0,le=1;!(l.words[0]&le)&&Y<26;++Y,le<<=1);if(Y>0)for(l.iushrn(Y);Y-- >0;)(x.isOdd()||P.isOdd())&&(x.iadd(d),P.isub(p)),x.iushrn(1),P.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(x),g.isub(P)):(l.isub(f),x.isub(h),P.isub(g))}return{a:x,b:P,gcd:l.iushln(m)}},v.prototype._invmp=function(a){N(0===a.negative),N(!a.isZero());var V,f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var P=0,m=1;!(f.words[0]&m)&&P<26;++P,m<<=1);if(P>0)for(f.iushrn(P);P-- >0;)h.isOdd()&&h.iadd(x),h.iushrn(1);for(var d=0,p=1;!(l.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(l.iushrn(d);d-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(g)):(l.isub(f),g.isub(h))}return(V=0===f.cmpn(1)?h:g).cmpn(0)<0&&V.iadd(a),V},v.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),l=a.clone();f.negative=0,l.negative=0;for(var h=0;f.isEven()&&l.isEven();h++)f.iushrn(1),l.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var g=f.cmp(l);if(g<0){var x=f;f=l,l=x}else if(0===g||0===l.cmpn(1))break;f.isub(l)}return l.iushln(h)},v.prototype.invm=function(a){return this.egcd(a).a.umod(a)},v.prototype.isEven=function(){return!(1&this.words[0])},v.prototype.isOdd=function(){return!(1&~this.words[0])},v.prototype.andln=function(a){return this.words[0]&a},v.prototype.bincn=function(a){N("number"==typeof a);var f=a%26,l=(a-f)/26,h=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var g=h,x=l;0!==g&&x<this.length;x++){var P=0|this.words[x];g=(P+=g)>>>26,this.words[x]=P&=67108863}return 0!==g&&(this.words[x]=g,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(a){var l,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this.strip(),this.length>1)l=1;else{f&&(a=-a),N(a<=67108863,"Number is too big");var h=0|this.words[0];l=h===a?0:h<a?-1:1}return 0!==this.negative?0|-l:l},v.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},v.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var h=0|this.words[l],g=0|a.words[l];if(h!==g){h<g?f=-1:h>g&&(f=1);break}}return f},v.prototype.gtn=function(a){return 1===this.cmpn(a)},v.prototype.gt=function(a){return 1===this.cmp(a)},v.prototype.gten=function(a){return this.cmpn(a)>=0},v.prototype.gte=function(a){return this.cmp(a)>=0},v.prototype.ltn=function(a){return-1===this.cmpn(a)},v.prototype.lt=function(a){return-1===this.cmp(a)},v.prototype.lten=function(a){return this.cmpn(a)<=0},v.prototype.lte=function(a){return this.cmp(a)<=0},v.prototype.eqn=function(a){return 0===this.cmpn(a)},v.prototype.eq=function(a){return 0===this.cmp(a)},v.red=function(a){return new pe(a)},v.prototype.toRed=function(a){return N(!this.red,"Already a number in reduction context"),N(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},v.prototype.fromRed=function(){return N(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},v.prototype._forceRed=function(a){return this.red=a,this},v.prototype.forceRed=function(a){return N(!this.red,"Already a number in reduction context"),this._forceRed(a)},v.prototype.redAdd=function(a){return N(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},v.prototype.redIAdd=function(a){return N(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},v.prototype.redSub=function(a){return N(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},v.prototype.redISub=function(a){return N(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},v.prototype.redShl=function(a){return N(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},v.prototype.redMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},v.prototype.redIMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},v.prototype.redSqr=function(){return N(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return N(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return N(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return N(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return N(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(a){return N(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var J={k256:null,p224:null,p192:null,p25519:null};function X(E,a){this.name=E,this.p=new v(a,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Q(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function oe(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ne(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function me(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function pe(E){if("string"==typeof E){var a=v._prime(E);this.m=a.p,this.prime=a}else N(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}function Ie(E){pe.call(this,E),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}X.prototype._tmp=function(){var a=new v(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var l,f=a;do{this.split(f,this.tmp),l=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(l>this.n);var h=l<this.n?-1:f.ucmp(this.p);return 0===h?(f.words[0]=0,f.length=1):h>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},X.prototype.split=function(a,f){a.iushrn(this.n,0,f)},X.prototype.imulK=function(a){return a.imul(this.k)},G(Q,X),Q.prototype.split=function(a,f){for(var l=4194303,h=Math.min(a.length,9),g=0;g<h;g++)f.words[g]=a.words[g];if(f.length=h,a.length<=9)return a.words[0]=0,void(a.length=1);var x=a.words[9];for(f.words[f.length++]=x&l,g=10;g<a.length;g++){var P=0|a.words[g];a.words[g-10]=(P&l)<<4|x>>>22,x=P}a.words[g-10]=x>>>=22,a.length-=0===x&&a.length>10?10:9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,l=0;l<a.length;l++){var h=0|a.words[l];a.words[l]=67108863&(f+=977*h),f=64*h+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},G(oe,X),G(ne,X),G(me,X),me.prototype.imulK=function(a){for(var f=0,l=0;l<a.length;l++){var h=19*(0|a.words[l])+f,g=67108863&h;h>>>=26,a.words[l]=g,f=h}return 0!==f&&(a.words[a.length++]=f),a},v._prime=function(a){if(J[a])return J[a];var f;if("k256"===a)f=new Q;else if("p224"===a)f=new oe;else if("p192"===a)f=new ne;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new me}return J[a]=f,f},pe.prototype._verify1=function(a){N(0===a.negative,"red works only with positives"),N(a.red,"red works only with red numbers")},pe.prototype._verify2=function(a,f){N(!(a.negative|f.negative),"red works only with positives"),N(a.red&&a.red===f.red,"red works only with red numbers")},pe.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},pe.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},pe.prototype.add=function(a,f){this._verify2(a,f);var l=a.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},pe.prototype.iadd=function(a,f){this._verify2(a,f);var l=a.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},pe.prototype.sub=function(a,f){this._verify2(a,f);var l=a.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},pe.prototype.isub=function(a,f){this._verify2(a,f);var l=a.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},pe.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},pe.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},pe.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},pe.prototype.isqr=function(a){return this.imul(a,a.clone())},pe.prototype.sqr=function(a){return this.mul(a,a)},pe.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(N(f%2==1),3===f){var l=this.m.add(new v(1)).iushrn(2);return this.pow(a,l)}for(var h=this.m.subn(1),g=0;!h.isZero()&&0===h.andln(1);)g++,h.iushrn(1);N(!h.isZero());var x=new v(1).toRed(this),P=x.redNeg(),m=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new v(2*d*d).toRed(this);0!==this.pow(d,m).cmp(P);)d.redIAdd(P);for(var p=this.pow(d,h),V=this.pow(a,h.addn(1).iushrn(1)),L=this.pow(a,h),Y=g;0!==L.cmp(x);){for(var le=L,Se=0;0!==le.cmp(x);Se++)le=le.redSqr();N(Se<Y);var Oe=this.pow(p,new v(1).iushln(Y-Se-1));V=V.redMul(Oe),p=Oe.redSqr(),L=L.redMul(p),Y=Se}return V},pe.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},pe.prototype.pow=function(a,f){if(f.isZero())return new v(1).toRed(this);if(0===f.cmpn(1))return a.clone();var h=new Array(16);h[0]=new v(1).toRed(this),h[1]=a;for(var g=2;g<h.length;g++)h[g]=this.mul(h[g-1],a);var x=h[0],P=0,m=0,d=f.bitLength()%26;for(0===d&&(d=26),g=f.length-1;g>=0;g--){for(var p=f.words[g],V=d-1;V>=0;V--){var L=p>>V&1;x!==h[0]&&(x=this.sqr(x)),0!==L||0!==P?(P<<=1,P|=L,(4==++m||0===g&&0===V)&&(x=this.mul(x,h[P]),m=0,P=0)):m=0}d=26}return x},pe.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},pe.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},v.mont=function(a){return new Ie(a)},G(Ie,pe),Ie.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Ie.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},Ie.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new v(0)._forceRed(this);var l=a.mul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(xe=I.nmd(xe),this)},39210:xe=>{function O(I,C){if(!I)throw new Error(C||"Assertion failed")}xe.exports=O,O.equal=function(C,H,N){if(C!=H)throw new Error(N||"Assertion failed: "+C+" != "+H)}},21832:(xe,O)=>{"use strict";var I=O;function H(G){return 1===G.length?"0"+G:G}function N(G){for(var v="",B=0;B<G.length;B++)v+=H(G[B].toString(16));return v}I.toArray=function C(G,v){if(Array.isArray(G))return G.slice();if(!G)return[];var B=[];if("string"!=typeof G){for(var _=0;_<G.length;_++)B[_]=0|G[_];return B}if("hex"===v)for((G=G.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(G="0"+G),_=0;_<G.length;_+=2)B.push(parseInt(G[_]+G[_+1],16));else for(_=0;_<G.length;_++){var T=G.charCodeAt(_),D=T>>8,$=255&T;D?B.push(D,$):B.push($)}return B},I.zero2=H,I.toHex=N,I.encode=function(v,B){return"hex"===B?N(v):v}},61747:xe=>{"use strict";xe.exports=class extends Error{constructor(I,C){super(I||""),"object"==typeof C&&null!==C&&(C.code&&(this.code=String(C.code)),C.expected&&(this.expected=!0),C.transient&&(this.transient=!0),C.cause&&(this.cause=C.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},13026:(xe,O,I)=>{xe.exports=I(3116)},3116:function(xe,O){!function(I,C){"use strict";var H={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function N(k){if(!Array.isArray(k)&&!ArrayBuffer.isView(k))return!1;for(var j=0;j<k.length;j++)if(!Number.isInteger(k[j])||k[j]<0||k[j]>255)return!1;return!0}function G(k,j){return(65535&k)*j+(((k>>>16)*j&65535)<<16)}function v(k,j){return k<<j|k>>>32-j}function B(k){return k=G(k^=k>>>16,2246822507),(k=G(k^=k>>>13,3266489909))^k>>>16}function _(k,j){var Z=[0,0,0,0];return Z[3]+=(k=[k[0]>>>16,65535&k[0],k[1]>>>16,65535&k[1]])[3]+(j=[j[0]>>>16,65535&j[0],j[1]>>>16,65535&j[1]])[3],Z[2]+=Z[3]>>>16,Z[3]&=65535,Z[2]+=k[2]+j[2],Z[1]+=Z[2]>>>16,Z[2]&=65535,Z[1]+=k[1]+j[1],Z[0]+=Z[1]>>>16,Z[1]&=65535,Z[0]+=k[0]+j[0],Z[0]&=65535,[Z[0]<<16|Z[1],Z[2]<<16|Z[3]]}function T(k,j){var Z=[0,0,0,0];return Z[3]+=(k=[k[0]>>>16,65535&k[0],k[1]>>>16,65535&k[1]])[3]*(j=[j[0]>>>16,65535&j[0],j[1]>>>16,65535&j[1]])[3],Z[2]+=Z[3]>>>16,Z[3]&=65535,Z[2]+=k[2]*j[3],Z[1]+=Z[2]>>>16,Z[2]&=65535,Z[2]+=k[3]*j[2],Z[1]+=Z[2]>>>16,Z[2]&=65535,Z[1]+=k[1]*j[3],Z[0]+=Z[1]>>>16,Z[1]&=65535,Z[1]+=k[2]*j[2],Z[0]+=Z[1]>>>16,Z[1]&=65535,Z[1]+=k[3]*j[1],Z[0]+=Z[1]>>>16,Z[1]&=65535,Z[0]+=k[0]*j[3]+k[1]*j[2]+k[2]*j[1]+k[3]*j[0],Z[0]&=65535,[Z[0]<<16|Z[1],Z[2]<<16|Z[3]]}function D(k,j){return 32==(j%=64)?[k[1],k[0]]:j<32?[k[0]<<j|k[1]>>>32-j,k[1]<<j|k[0]>>>32-j]:[k[1]<<(j-=32)|k[0]>>>32-j,k[0]<<j|k[1]>>>32-j]}function $(k,j){return 0==(j%=64)?k:j<32?[k[0]<<j|k[1]>>>32-j,k[1]<<j]:[k[1]<<j-32,0]}function M(k,j){return[k[0]^j[0],k[1]^j[1]]}function F(k){return k=M(k,[0,k[0]>>>1]),k=M(k=T(k,[4283543511,3981806797]),[0,k[0]>>>1]),M(k=T(k,[3301882366,444984403]),[0,k[0]>>>1])}H.x86.hash32=function(k,j){if(H.inputValidation&&!N(k))return C;for(var Z=k.length%4,q=k.length-Z,W=j=j||0,K=0,J=3432918353,X=461845907,Q=0;Q<q;Q+=4)K=G(K=k[Q]|k[Q+1]<<8|k[Q+2]<<16|k[Q+3]<<24,J),K=G(K=v(K,15),X),W=G(W=v(W^=K,13),5)+3864292196;switch(K=0,Z){case 3:K^=k[Q+2]<<16;case 2:K^=k[Q+1]<<8;case 1:K=G(K^=k[Q],J),W^=K=G(K=v(K,15),X)}return(W=B(W^=k.length))>>>0},H.x86.hash128=function(k,j){if(H.inputValidation&&!N(k))return C;for(var Z=k.length%16,q=k.length-Z,W=j=j||0,K=j,J=j,X=j,Q=0,oe=0,ne=0,me=0,pe=597399067,Ie=2869860233,E=951274213,a=2716044179,f=0;f<q;f+=16)oe=k[f+4]|k[f+5]<<8|k[f+6]<<16|k[f+7]<<24,ne=k[f+8]|k[f+9]<<8|k[f+10]<<16|k[f+11]<<24,me=k[f+12]|k[f+13]<<8|k[f+14]<<16|k[f+15]<<24,Q=v(Q=G(Q=k[f]|k[f+1]<<8|k[f+2]<<16|k[f+3]<<24,pe),15),W=v(W^=Q=G(Q,Ie),19),W=G(W+=K,5)+1444728091,oe=v(oe=G(oe,Ie),16),K=v(K^=oe=G(oe,E),17),K=G(K+=J,5)+197830471,ne=v(ne=G(ne,E),17),J=v(J^=ne=G(ne,a),15),J=G(J+=X,5)+2530024501,me=v(me=G(me,a),18),X=v(X^=me=G(me,pe),13),X=G(X+=W,5)+850148119;switch(Q=0,oe=0,ne=0,me=0,Z){case 15:me^=k[f+14]<<16;case 14:me^=k[f+13]<<8;case 13:me=G(me^=k[f+12],a),X^=me=G(me=v(me,18),pe);case 12:ne^=k[f+11]<<24;case 11:ne^=k[f+10]<<16;case 10:ne^=k[f+9]<<8;case 9:ne=G(ne^=k[f+8],E),J^=ne=G(ne=v(ne,17),a);case 8:oe^=k[f+7]<<24;case 7:oe^=k[f+6]<<16;case 6:oe^=k[f+5]<<8;case 5:oe=G(oe^=k[f+4],Ie),K^=oe=G(oe=v(oe,16),E);case 4:Q^=k[f+3]<<24;case 3:Q^=k[f+2]<<16;case 2:Q^=k[f+1]<<8;case 1:Q=G(Q^=k[f],pe),W^=Q=G(Q=v(Q,15),Ie)}return W^=k.length,W+=K^=k.length,W+=J^=k.length,K+=W+=X^=k.length,J+=W,X+=W,W=B(W),W+=K=B(K),W+=J=B(J),K+=W+=X=B(X),J+=W,X+=W,("00000000"+(W>>>0).toString(16)).slice(-8)+("00000000"+(K>>>0).toString(16)).slice(-8)+("00000000"+(J>>>0).toString(16)).slice(-8)+("00000000"+(X>>>0).toString(16)).slice(-8)},H.x64.hash128=function(k,j){if(H.inputValidation&&!N(k))return C;for(var Z=k.length%16,q=k.length-Z,W=[0,j=j||0],K=[0,j],J=[0,0],X=[0,0],Q=[2277735313,289559509],oe=[1291169091,658871167],ne=0;ne<q;ne+=16)X=[k[ne+12]|k[ne+13]<<8|k[ne+14]<<16|k[ne+15]<<24,k[ne+8]|k[ne+9]<<8|k[ne+10]<<16|k[ne+11]<<24],J=D(J=T(J=[k[ne+4]|k[ne+5]<<8|k[ne+6]<<16|k[ne+7]<<24,k[ne]|k[ne+1]<<8|k[ne+2]<<16|k[ne+3]<<24],Q),31),W=_(W=D(W=M(W,J=T(J,oe)),27),K),W=_(T(W,[0,5]),[0,1390208809]),X=D(X=T(X,oe),33),K=_(K=D(K=M(K,X=T(X,Q)),31),W),K=_(T(K,[0,5]),[0,944331445]);switch(J=[0,0],X=[0,0],Z){case 15:X=M(X,$([0,k[ne+14]],48));case 14:X=M(X,$([0,k[ne+13]],40));case 13:X=M(X,$([0,k[ne+12]],32));case 12:X=M(X,$([0,k[ne+11]],24));case 11:X=M(X,$([0,k[ne+10]],16));case 10:X=M(X,$([0,k[ne+9]],8));case 9:X=T(X=M(X,[0,k[ne+8]]),oe),K=M(K,X=T(X=D(X,33),Q));case 8:J=M(J,$([0,k[ne+7]],56));case 7:J=M(J,$([0,k[ne+6]],48));case 6:J=M(J,$([0,k[ne+5]],40));case 5:J=M(J,$([0,k[ne+4]],32));case 4:J=M(J,$([0,k[ne+3]],24));case 3:J=M(J,$([0,k[ne+2]],16));case 2:J=M(J,$([0,k[ne+1]],8));case 1:J=T(J=M(J,[0,k[ne]]),Q),W=M(W,J=T(J=D(J,31),oe))}return W=_(W=M(W,[0,k.length]),K=M(K,[0,k.length])),K=_(K,W),W=_(W=F(W),K=F(K)),K=_(K,W),("00000000"+(W[0]>>>0).toString(16)).slice(-8)+("00000000"+(W[1]>>>0).toString(16)).slice(-8)+("00000000"+(K[0]>>>0).toString(16)).slice(-8)+("00000000"+(K[1]>>>0).toString(16)).slice(-8)},xe.exports&&(O=xe.exports=H),O.murmurHash3=H}()},50233:xe=>{"use strict";var O=Object.prototype.hasOwnProperty,I="~";function C(){}function H(B,_,T){this.fn=B,this.context=_,this.once=T||!1}function N(B,_,T,D,$){if("function"!=typeof T)throw new TypeError("The listener must be a function");var M=new H(T,D||B,$),F=I?I+_:_;return B._events[F]?B._events[F].fn?B._events[F]=[B._events[F],M]:B._events[F].push(M):(B._events[F]=M,B._eventsCount++),B}function G(B,_){0==--B._eventsCount?B._events=new C:delete B._events[_]}function v(){this._events=new C,this._eventsCount=0}Object.create&&(C.prototype=Object.create(null),(new C).__proto__||(I=!1)),v.prototype.eventNames=function(){var T,D,_=[];if(0===this._eventsCount)return _;for(D in T=this._events)O.call(T,D)&&_.push(I?D.slice(1):D);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(T)):_},v.prototype.listeners=function(_){var D=this._events[I?I+_:_];if(!D)return[];if(D.fn)return[D.fn];for(var $=0,M=D.length,F=new Array(M);$<M;$++)F[$]=D[$].fn;return F},v.prototype.listenerCount=function(_){var D=this._events[I?I+_:_];return D?D.fn?1:D.length:0},v.prototype.emit=function(_,T,D,$,M,F){var k=I?I+_:_;if(!this._events[k])return!1;var q,W,j=this._events[k],Z=arguments.length;if(j.fn){switch(j.once&&this.removeListener(_,j.fn,void 0,!0),Z){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,T),!0;case 3:return j.fn.call(j.context,T,D),!0;case 4:return j.fn.call(j.context,T,D,$),!0;case 5:return j.fn.call(j.context,T,D,$,M),!0;case 6:return j.fn.call(j.context,T,D,$,M,F),!0}for(W=1,q=new Array(Z-1);W<Z;W++)q[W-1]=arguments[W];j.fn.apply(j.context,q)}else{var J,K=j.length;for(W=0;W<K;W++)switch(j[W].once&&this.removeListener(_,j[W].fn,void 0,!0),Z){case 1:j[W].fn.call(j[W].context);break;case 2:j[W].fn.call(j[W].context,T);break;case 3:j[W].fn.call(j[W].context,T,D);break;case 4:j[W].fn.call(j[W].context,T,D,$);break;default:if(!q)for(J=1,q=new Array(Z-1);J<Z;J++)q[J-1]=arguments[J];j[W].fn.apply(j[W].context,q)}}return!0},v.prototype.on=function(_,T,D){return N(this,_,T,D,!1)},v.prototype.once=function(_,T,D){return N(this,_,T,D,!0)},v.prototype.removeListener=function(_,T,D,$){var M=I?I+_:_;if(!this._events[M])return this;if(!T)return G(this,M),this;var F=this._events[M];if(F.fn)F.fn===T&&(!$||F.once)&&(!D||F.context===D)&&G(this,M);else{for(var k=0,j=[],Z=F.length;k<Z;k++)(F[k].fn!==T||$&&!F[k].once||D&&F[k].context!==D)&&j.push(F[k]);j.length?this._events[M]=1===j.length?j[0]:j:G(this,M)}return this},v.prototype.removeAllListeners=function(_){var T;return _?this._events[T=I?I+_:_]&&G(this,T):(this._events=new C,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=I,v.EventEmitter=v,xe.exports=v},83138:(xe,O,I)=>{"use strict";var C=I(49609);O.certificate=I(94772);var H=C.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});O.RSAPrivateKey=H;var N=C.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});O.RSAPublicKey=N;var G=C.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),v=C.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(G),this.key("subjectPublicKey").bitstr())});O.PublicKey=v;var B=C.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(G),this.key("subjectPrivateKey").octstr())});O.PrivateKey=B;var _=C.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});O.EncryptedPrivateKey=_;var T=C.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});O.DSAPrivateKey=T,O.DSAparam=C.define("DSAparam",function(){this.int()});var D=C.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),$=C.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(D),this.key("publicKey").optional().explicit(1).bitstr())});O.ECPrivateKey=$,O.signature=C.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},94772:(xe,O,I)=>{"use strict";var C=I(49609),H=C.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),N=C.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),G=C.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),v=C.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(G),this.key("subjectPublicKey").bitstr())}),B=C.define("RelativeDistinguishedName",function(){this.setof(N)}),_=C.define("RDNSequence",function(){this.seqof(B)}),T=C.define("Name",function(){this.choice({rdnSequence:this.use(_)})}),D=C.define("Validity",function(){this.seq().obj(this.key("notBefore").use(H),this.key("notAfter").use(H))}),$=C.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),M=C.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(G),this.key("issuer").use(T),this.key("validity").use(D),this.key("subject").use(T),this.key("subjectPublicKeyInfo").use(v),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof($).optional())}),F=C.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(M),this.key("signatureAlgorithm").use(G),this.key("signatureValue").bitstr())});xe.exports=F},89472:(xe,O,I)=>{"use strict";var C=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,H=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,N=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,G=I(18211),v=I(43388),B=I(27054).Buffer;xe.exports=function(_,T){var M,D=_.toString(),$=D.match(C);if($){var k="aes"+$[1],j=B.from($[2],"hex"),Z=B.from($[3].replace(/[\r\n]/g,""),"base64"),q=G(T,j.slice(0,8),parseInt($[1],10)).key,W=[],K=v.createDecipheriv(k,q,j);W.push(K.update(Z)),W.push(K.final()),M=B.concat(W)}else{var F=D.match(N);M=B.from(F[2].replace(/[\r\n]/g,""),"base64")}return{tag:D.match(H)[1],data:M}}},65667:(xe,O,I)=>{"use strict";var C=I(83138),H=I(15579),N=I(89472),G=I(43388),v=I(93397),B=I(27054).Buffer;function T(D){var $;"object"==typeof D&&!B.isBuffer(D)&&($=D.passphrase,D=D.key),"string"==typeof D&&(D=B.from(D));var j,Z,M=N(D,$),F=M.tag,k=M.data;switch(F){case"CERTIFICATE":Z=C.certificate.decode(k,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(Z||(Z=C.PublicKey.decode(k,"der")),j=Z.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return C.RSAPublicKey.decode(Z.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return Z.subjectPrivateKey=Z.subjectPublicKey,{type:"ec",data:Z};case"1.2.840.10040.4.1":return Z.algorithm.params.pub_key=C.DSAparam.decode(Z.subjectPublicKey.data,"der"),{type:"dsa",data:Z.algorithm.params};default:throw new Error("unknown key id "+j)}case"ENCRYPTED PRIVATE KEY":k=function _(D,$){var M=D.algorithm.decrypt.kde.kdeparams.salt,F=parseInt(D.algorithm.decrypt.kde.kdeparams.iters.toString(),10),k=H[D.algorithm.decrypt.cipher.algo.join(".")],j=D.algorithm.decrypt.cipher.iv,Z=D.subjectPrivateKey,q=parseInt(k.split("-")[1],10)/8,W=v.pbkdf2Sync($,M,F,q,"sha1"),K=G.createDecipheriv(k,W,j),J=[];return J.push(K.update(Z)),J.push(K.final()),B.concat(J)}(k=C.EncryptedPrivateKey.decode(k,"der"),$);case"PRIVATE KEY":switch(j=(Z=C.PrivateKey.decode(k,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return C.RSAPrivateKey.decode(Z.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:Z.algorithm.curve,privateKey:C.ECPrivateKey.decode(Z.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return Z.algorithm.params.priv_key=C.DSAparam.decode(Z.subjectPrivateKey,"der"),{type:"dsa",params:Z.algorithm.params};default:throw new Error("unknown key id "+j)}case"RSA PUBLIC KEY":return C.RSAPublicKey.decode(k,"der");case"RSA PRIVATE KEY":return C.RSAPrivateKey.decode(k,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:C.DSAPrivateKey.decode(k,"der")};case"EC PRIVATE KEY":return{curve:(k=C.ECPrivateKey.decode(k,"der")).parameters.value,privateKey:k.privateKey};default:throw new Error("unknown key type "+F)}}T.signature=C.signature,xe.exports=T},93397:(xe,O,I)=>{O.pbkdf2=I(82685),O.pbkdf2Sync=I(59111)},82685:(xe,O,I)=>{var B,M,C=I(27054).Buffer,H=I(86111),N=I(45392),G=I(59111),v=I(76643),_=globalThis.crypto&&globalThis.crypto.subtle,T={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},D=[];function F(){return M||(M=globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.queueMicrotask?globalThis.queueMicrotask:globalThis.setImmediate?globalThis.setImmediate:globalThis.setTimeout)}function k(Z,q,W,K,J){return _.importKey("raw",Z,{name:"PBKDF2"},!1,["deriveBits"]).then(function(X){return _.deriveBits({name:"PBKDF2",salt:q,iterations:W,hash:{name:J}},X,K<<3)}).then(function(X){return C.from(X)})}xe.exports=function(Z,q,W,K,J,X){"function"==typeof J&&(X=J,J=void 0);var Q=T[(J=J||"sha1").toLowerCase()];if(Q&&"function"==typeof globalThis.Promise){if(H(W,K),Z=v(Z,N,"Password"),q=v(q,N,"Salt"),"function"!=typeof X)throw new Error("No callback provided to pbkdf2");!function j(Z,q){Z.then(function(W){F()(function(){q(null,W)})},function(W){F()(function(){q(W)})})}(function $(Z){if(globalThis.process&&!globalThis.process.browser||!_||!_.importKey||!_.deriveBits)return Promise.resolve(!1);if(void 0!==D[Z])return D[Z];var q=k(B=B||C.alloc(8),B,10,128,Z).then(function(){return!0}).catch(function(){return!1});return D[Z]=q,q}(Q).then(function(oe){return oe?k(Z,q,W,K,Q):G(Z,q,W,K,J)}),X)}else F()(function(){var oe;try{oe=G(Z,q,W,K,J)}catch(ne){return X(ne)}X(null,oe)})}},45392:(xe,O,I)=>{var H,C=I(40573);H=globalThis.process&&globalThis.process.browser?"utf-8":globalThis.process&&globalThis.process.version?parseInt(C.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",xe.exports=H},86111:xe=>{var O=Math.pow(2,30)-1;xe.exports=function(I,C){if("number"!=typeof I)throw new TypeError("Iterations not a number");if(I<0)throw new TypeError("Bad iterations");if("number"!=typeof C)throw new TypeError("Key length not a number");if(C<0||C>O||C!=C)throw new TypeError("Bad key length")}},59111:(xe,O,I)=>{var C=I(83407),H=I(36636),N=I(25443),G=I(27054).Buffer,v=I(86111),B=I(45392),_=I(76643),T=G.alloc(128),D={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function $(k,j,Z){var q=function M(k){return"rmd160"===k||"ripemd160"===k?function Z(q){return(new H).update(q).digest()}:"md5"===k?C:function j(q){return N(k).update(q).digest()}}(k),W="sha512"===k||"sha384"===k?128:64;j.length>W?j=q(j):j.length<W&&(j=G.concat([j,T],W));for(var K=G.allocUnsafe(W+D[k]),J=G.allocUnsafe(W+D[k]),X=0;X<W;X++)K[X]=54^j[X],J[X]=92^j[X];var Q=G.allocUnsafe(W+Z+4);K.copy(Q,0,0,W),this.ipad1=Q,this.ipad2=K,this.opad=J,this.alg=k,this.blocksize=W,this.hash=q,this.size=D[k]}$.prototype.run=function(k,j){return k.copy(j,this.blocksize),this.hash(j).copy(this.opad,this.blocksize),this.hash(this.opad)},xe.exports=function F(k,j,Z,q,W){v(Z,q);var K=new $(W=W||"sha1",k=_(k,B,"Password"),(j=_(j,B,"Salt")).length),J=G.allocUnsafe(q),X=G.allocUnsafe(j.length+4);j.copy(X,0,0,j.length);for(var Q=0,oe=D[W],ne=Math.ceil(q/oe),me=1;me<=ne;me++){X.writeUInt32BE(me,j.length);for(var pe=K.run(X,K.ipad1),Ie=pe,E=1;E<Z;E++){Ie=K.run(Ie,K.ipad2);for(var a=0;a<oe;a++)pe[a]^=Ie[a]}pe.copy(J,Q),Q+=oe}return J}},76643:(xe,O,I)=>{var C=I(27054).Buffer;xe.exports=function(H,N,G){if(C.isBuffer(H))return H;if("string"==typeof H)return C.from(H,N);if(ArrayBuffer.isView(H))return C.from(H.buffer);throw new TypeError(G+" must be a string, a Buffer, a typed array or a DataView")}},9656:(xe,O,I)=>{"use strict";var C=I(40573);xe.exports=typeof C>"u"||!C.version||0===C.version.indexOf("v0.")||0===C.version.indexOf("v1.")&&0!==C.version.indexOf("v1.8.")?{nextTick:function H(N,G,v,B){if("function"!=typeof N)throw new TypeError('"callback" argument must be a function');var T,D,_=arguments.length;switch(_){case 0:case 1:return C.nextTick(N);case 2:return C.nextTick(function(){N.call(null,G)});case 3:return C.nextTick(function(){N.call(null,G,v)});case 4:return C.nextTick(function(){N.call(null,G,v,B)});default:for(T=new Array(_-1),D=0;D<T.length;)T[D++]=arguments[D];return C.nextTick(function(){N.apply(null,T)})}}}:C},40573:xe=>{var I,C,O=xe.exports={};function H(){throw new Error("setTimeout has not been defined")}function N(){throw new Error("clearTimeout has not been defined")}function G(j){if(I===setTimeout)return setTimeout(j,0);if((I===H||!I)&&setTimeout)return I=setTimeout,setTimeout(j,0);try{return I(j,0)}catch{try{return I.call(null,j,0)}catch{return I.call(this,j,0)}}}!function(){try{I="function"==typeof setTimeout?setTimeout:H}catch{I=H}try{C="function"==typeof clearTimeout?clearTimeout:N}catch{C=N}}();var T,B=[],_=!1,D=-1;function $(){!_||!T||(_=!1,T.length?B=T.concat(B):D=-1,B.length&&M())}function M(){if(!_){var j=G($);_=!0;for(var Z=B.length;Z;){for(T=B,B=[];++D<Z;)T&&T[D].run();D=-1,Z=B.length}T=null,_=!1,function v(j){if(C===clearTimeout)return clearTimeout(j);if((C===N||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(j);try{return C(j)}catch{try{return C.call(null,j)}catch{return C.call(this,j)}}}(j)}}function F(j,Z){this.fun=j,this.array=Z}function k(){}O.nextTick=function(j){var Z=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)Z[q-1]=arguments[q];B.push(new F(j,Z)),1===B.length&&!_&&G(M)},F.prototype.run=function(){this.fun.apply(null,this.array)},O.title="browser",O.browser=!0,O.env={},O.argv=[],O.version="",O.versions={},O.on=k,O.addListener=k,O.once=k,O.off=k,O.removeListener=k,O.removeAllListeners=k,O.emit=k,O.prependListener=k,O.prependOnceListener=k,O.listeners=function(j){return[]},O.binding=function(j){throw new Error("process.binding is not supported")},O.cwd=function(){return"/"},O.chdir=function(j){throw new Error("process.chdir is not supported")},O.umask=function(){return 0}},52965:(xe,O,I)=>{O.publicEncrypt=I(87267),O.privateDecrypt=I(98613),O.privateEncrypt=function(H,N){return O.publicEncrypt(H,N,!0)},O.publicDecrypt=function(H,N){return O.privateDecrypt(H,N,!0)}},30715:(xe,O,I)=>{var C=I(67211),H=I(27054).Buffer;function N(G){var v=H.allocUnsafe(4);return v.writeUInt32BE(G,0),v}xe.exports=function(G,v){for(var T,B=H.alloc(0),_=0;B.length<v;)T=N(_++),B=H.concat([B,C("sha1").update(G).update(T).digest()]);return B.slice(0,v)}},16508:function(xe,O,I){!function(C,H){"use strict";function N(E,a){if(!E)throw new Error(a||"Assertion failed")}function G(E,a){E.super_=a;var f=function(){};f.prototype=a.prototype,E.prototype=new f,E.prototype.constructor=E}function v(E,a,f){if(v.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,null!==E&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(E||0,a||10,f||"be"))}var B;"object"==typeof C?C.exports=v:H.BN=v,v.BN=v,v.wordSize=26;try{B=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:I(51069).Buffer}catch{}function _(E,a){var f=E.charCodeAt(a);return f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:f-48&15}function T(E,a,f){var l=_(E,f);return f-1>=a&&(l|=_(E,f-1)<<4),l}function D(E,a,f,l){for(var h=0,g=Math.min(E.length,f),x=a;x<g;x++){var P=E.charCodeAt(x)-48;h*=l,h+=P>=49?P-49+10:P>=17?P-17+10:P}return h}v.isBN=function(a){return a instanceof v||null!==a&&"object"==typeof a&&a.constructor.wordSize===v.wordSize&&Array.isArray(a.words)},v.max=function(a,f){return a.cmp(f)>0?a:f},v.min=function(a,f){return a.cmp(f)<0?a:f},v.prototype._init=function(a,f,l){if("number"==typeof a)return this._initNumber(a,f,l);if("object"==typeof a)return this._initArray(a,f,l);"hex"===f&&(f=16),N(f===(0|f)&&f>=2&&f<=36);var h=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(h++,this.negative=1),h<a.length&&(16===f?this._parseHex(a,h,l):(this._parseBase(a,f,h),"le"===l&&this._initArray(this.toArray(),f,l)))},v.prototype._initNumber=function(a,f,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(N(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),f,l)},v.prototype._initArray=function(a,f,l){if(N("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var g,x,P=0;if("be"===l)for(h=a.length-1,g=0;h>=0;h-=3)this.words[g]|=(x=a[h]|a[h-1]<<8|a[h-2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);else if("le"===l)for(h=0,g=0;h<a.length;h+=3)this.words[g]|=(x=a[h]|a[h+1]<<8|a[h+2]<<16)<<P&67108863,this.words[g+1]=x>>>26-P&67108863,(P+=24)>=26&&(P-=26,g++);return this.strip()},v.prototype._parseHex=function(a,f,l){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var P,g=0,x=0;if("be"===l)for(h=a.length-1;h>=f;h-=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;else for(h=(a.length-f)%2==0?f+1:f;h<a.length;h+=2)P=T(a,f,h)<<g,this.words[x]|=67108863&P,g>=18?(g-=18,this.words[x+=1]|=P>>>26):g+=8;this.strip()},v.prototype._parseBase=function(a,f,l){this.words=[0],this.length=1;for(var h=0,g=1;g<=67108863;g*=f)h++;h--,g=g/f|0;for(var x=a.length-l,P=x%h,m=Math.min(x,x-P)+l,d=0,p=l;p<m;p+=h)d=D(a,p,p+h,f),this.imuln(g),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(0!==P){var V=1;for(d=D(a,p,a.length,f),p=0;p<P;p++)V*=f;this.imuln(V),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},v.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},v.prototype.clone=function(){var a=new v(null);return this.copy(a),a},v.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},v.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},v.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},v.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var $=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function j(E,a,f){f.negative=a.negative^E.negative;var l=E.length+a.length|0;f.length=l,l=l-1|0;var h=0|E.words[0],g=0|a.words[0],x=h*g,m=x/67108864|0;f.words[0]=67108863&x;for(var d=1;d<l;d++){for(var p=m>>>26,V=67108863&m,L=Math.min(d,a.length-1),Y=Math.max(0,d-E.length+1);Y<=L;Y++)p+=(x=(h=0|E.words[d-Y|0])*(g=0|a.words[Y])+V)/67108864|0,V=67108863&x;f.words[d]=0|V,m=0|p}return 0!==m?f.words[d]=0|m:f.length--,f.strip()}v.prototype.toString=function(a,f){var l;if(f=0|f||1,16===(a=a||10)||"hex"===a){l="";for(var h=0,g=0,x=0;x<this.length;x++){var P=this.words[x],m=(16777215&(P<<h|g)).toString(16);l=0!=(g=P>>>24-h&16777215)||x!==this.length-1?$[6-m.length]+m+l:m+l,(h+=2)>=26&&(h-=26,x--)}for(0!==g&&(l=g.toString(16)+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(a===(0|a)&&a>=2&&a<=36){var d=M[a],p=F[a];l="";var V=this.clone();for(V.negative=0;!V.isZero();){var L=V.modn(p).toString(a);l=(V=V.idivn(p)).isZero()?L+l:$[d-L.length]+L+l}for(this.isZero()&&(l="0"+l);l.length%f!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}N(!1,"Base should be between 2 and 36")},v.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&N(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},v.prototype.toJSON=function(){return this.toString(16)},v.prototype.toBuffer=function(a,f){return N(typeof B<"u"),this.toArrayLike(B,a,f)},v.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},v.prototype.toArrayLike=function(a,f,l){var h=this.byteLength(),g=l||Math.max(1,h);N(h<=g,"byte array longer than desired length"),N(g>0,"Requested array length <= 0"),this.strip();var m,d,x="le"===f,P=new a(g),p=this.clone();if(x){for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[d]=m;for(;d<g;d++)P[d]=0}else{for(d=0;d<g-h;d++)P[d]=0;for(d=0;!p.isZero();d++)m=p.andln(255),p.iushrn(8),P[g-d-1]=m}return P},v.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,l=0;return f>=4096&&(l+=13,f>>>=13),f>=64&&(l+=7,f>>>=7),f>=8&&(l+=4,f>>>=4),f>=2&&(l+=2,f>>>=2),l+f},v.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,l=0;return 8191&f||(l+=13,f>>>=13),127&f||(l+=7,f>>>=7),15&f||(l+=4,f>>>=4),3&f||(l+=2,f>>>=2),1&f||l++,l},v.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},v.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var l=this._zeroBits(this.words[f]);if(a+=l,26!==l)break}return a},v.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},v.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},v.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},v.prototype.isNeg=function(){return 0!==this.negative},v.prototype.neg=function(){return this.clone().ineg()},v.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},v.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this.strip()},v.prototype.ior=function(a){return N(!(this.negative|a.negative)),this.iuor(a)},v.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},v.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},v.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=f.length,this.strip()},v.prototype.iand=function(a){return N(!(this.negative|a.negative)),this.iuand(a)},v.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},v.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},v.prototype.iuxor=function(a){var f,l;this.length>a.length?(f=this,l=a):(f=a,l=this);for(var h=0;h<l.length;h++)this.words[h]=f.words[h]^l.words[h];if(this!==f)for(;h<f.length;h++)this.words[h]=f.words[h];return this.length=f.length,this.strip()},v.prototype.ixor=function(a){return N(!(this.negative|a.negative)),this.iuxor(a)},v.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},v.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},v.prototype.inotn=function(a){N("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),l=a%26;this._expand(f),l>0&&f--;for(var h=0;h<f;h++)this.words[h]=67108863&~this.words[h];return l>0&&(this.words[h]=~this.words[h]&67108863>>26-l),this.strip()},v.prototype.notn=function(a){return this.clone().inotn(a)},v.prototype.setn=function(a,f){N("number"==typeof a&&a>=0);var l=a/26|0,h=a%26;return this._expand(l+1),this.words[l]=f?this.words[l]|1<<h:this.words[l]&~(1<<h),this.strip()},v.prototype.iadd=function(a){var f,l,h;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(l=this,h=a):(l=a,h=this);for(var g=0,x=0;x<h.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+(0|h.words[x])+g),g=f>>>26;for(;0!==g&&x<l.length;x++)this.words[x]=67108863&(f=(0|l.words[x])+g),g=f>>>26;if(this.length=l.length,0!==g)this.words[this.length]=g,this.length++;else if(l!==this)for(;x<l.length;x++)this.words[x]=l.words[x];return this},v.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},v.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h,g,l=this.cmp(a);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(h=this,g=a):(h=a,g=this);for(var x=0,P=0;P<g.length;P++)x=(f=(0|h.words[P])-(0|g.words[P])+x)>>26,this.words[P]=67108863&f;for(;0!==x&&P<h.length;P++)x=(f=(0|h.words[P])+x)>>26,this.words[P]=67108863&f;if(0===x&&P<h.length&&h!==this)for(;P<h.length;P++)this.words[P]=h.words[P];return this.length=Math.max(this.length,P),h!==this&&(this.negative=1),this.strip()},v.prototype.sub=function(a){return this.clone().isub(a)};var Z=function(a,f,l){var m,d,p,h=a.words,g=f.words,x=l.words,P=0,V=0|h[0],L=8191&V,Y=V>>>13,le=0|h[1],Se=8191&le,Oe=le>>>13,Ve=0|h[2],Re=8191&Ve,ye=Ve>>>13,ke=0|h[3],ve=8191&ke,_e=ke>>>13,de=0|h[4],se=8191&de,re=de>>>13,ce=0|h[5],ue=8191&ce,ge=ce>>>13,Ee=0|h[6],Be=8191&Ee,De=Ee>>>13,et=0|h[7],Ke=8191&et,We=et>>>13,_t=0|h[8],U=8191&_t,w=_t>>>13,b=0|h[9],z=8191&b,ie=b>>>13,be=0|g[0],Me=8191&be,qe=be>>>13,At=0|g[1],nt=8191&At,rt=At>>>13,St=0|g[2],bt=8191&St,Mt=St>>>13,Ft=0|g[3],it=8191&Ft,mt=Ft>>>13,Rr=0|g[4],xt=8191&Rr,It=Rr>>>13,Qr=0|g[5],Tt=8191&Qr,Pt=Qr>>>13,kn=0|g[6],Fe=8191&kn,He=kn>>>13,Ze=0|g[7],Ue=8191&Ze,Ge=Ze>>>13,pt=0|g[8],Xe=8191&pt,dt=pt>>>13,Qt=0|g[9],gt=8191&Qt,wt=Qt>>>13;l.negative=a.negative^f.negative,l.length=19;var Br=(P+(m=Math.imul(L,Me))|0)+((8191&(d=(d=Math.imul(L,qe))+Math.imul(Y,Me)|0))<<13)|0;P=((p=Math.imul(Y,qe))+(d>>>13)|0)+(Br>>>26)|0,Br&=67108863,m=Math.imul(Se,Me),d=(d=Math.imul(Se,qe))+Math.imul(Oe,Me)|0,p=Math.imul(Oe,qe);var Vt=(P+(m=m+Math.imul(L,nt)|0)|0)+((8191&(d=(d=d+Math.imul(L,rt)|0)+Math.imul(Y,nt)|0))<<13)|0;P=((p=p+Math.imul(Y,rt)|0)+(d>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,m=Math.imul(Re,Me),d=(d=Math.imul(Re,qe))+Math.imul(ye,Me)|0,p=Math.imul(ye,qe),m=m+Math.imul(Se,nt)|0,d=(d=d+Math.imul(Se,rt)|0)+Math.imul(Oe,nt)|0,p=p+Math.imul(Oe,rt)|0;var Zt=(P+(m=m+Math.imul(L,bt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Mt)|0)+Math.imul(Y,bt)|0))<<13)|0;P=((p=p+Math.imul(Y,Mt)|0)+(d>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,m=Math.imul(ve,Me),d=(d=Math.imul(ve,qe))+Math.imul(_e,Me)|0,p=Math.imul(_e,qe),m=m+Math.imul(Re,nt)|0,d=(d=d+Math.imul(Re,rt)|0)+Math.imul(ye,nt)|0,p=p+Math.imul(ye,rt)|0,m=m+Math.imul(Se,bt)|0,d=(d=d+Math.imul(Se,Mt)|0)+Math.imul(Oe,bt)|0,p=p+Math.imul(Oe,Mt)|0;var Tr=(P+(m=m+Math.imul(L,it)|0)|0)+((8191&(d=(d=d+Math.imul(L,mt)|0)+Math.imul(Y,it)|0))<<13)|0;P=((p=p+Math.imul(Y,mt)|0)+(d>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,m=Math.imul(se,Me),d=(d=Math.imul(se,qe))+Math.imul(re,Me)|0,p=Math.imul(re,qe),m=m+Math.imul(ve,nt)|0,d=(d=d+Math.imul(ve,rt)|0)+Math.imul(_e,nt)|0,p=p+Math.imul(_e,rt)|0,m=m+Math.imul(Re,bt)|0,d=(d=d+Math.imul(Re,Mt)|0)+Math.imul(ye,bt)|0,p=p+Math.imul(ye,Mt)|0,m=m+Math.imul(Se,it)|0,d=(d=d+Math.imul(Se,mt)|0)+Math.imul(Oe,it)|0,p=p+Math.imul(Oe,mt)|0;var dr=(P+(m=m+Math.imul(L,xt)|0)|0)+((8191&(d=(d=d+Math.imul(L,It)|0)+Math.imul(Y,xt)|0))<<13)|0;P=((p=p+Math.imul(Y,It)|0)+(d>>>13)|0)+(dr>>>26)|0,dr&=67108863,m=Math.imul(ue,Me),d=(d=Math.imul(ue,qe))+Math.imul(ge,Me)|0,p=Math.imul(ge,qe),m=m+Math.imul(se,nt)|0,d=(d=d+Math.imul(se,rt)|0)+Math.imul(re,nt)|0,p=p+Math.imul(re,rt)|0,m=m+Math.imul(ve,bt)|0,d=(d=d+Math.imul(ve,Mt)|0)+Math.imul(_e,bt)|0,p=p+Math.imul(_e,Mt)|0,m=m+Math.imul(Re,it)|0,d=(d=d+Math.imul(Re,mt)|0)+Math.imul(ye,it)|0,p=p+Math.imul(ye,mt)|0,m=m+Math.imul(Se,xt)|0,d=(d=d+Math.imul(Se,It)|0)+Math.imul(Oe,xt)|0,p=p+Math.imul(Oe,It)|0;var or=(P+(m=m+Math.imul(L,Tt)|0)|0)+((8191&(d=(d=d+Math.imul(L,Pt)|0)+Math.imul(Y,Tt)|0))<<13)|0;P=((p=p+Math.imul(Y,Pt)|0)+(d>>>13)|0)+(or>>>26)|0,or&=67108863,m=Math.imul(Be,Me),d=(d=Math.imul(Be,qe))+Math.imul(De,Me)|0,p=Math.imul(De,qe),m=m+Math.imul(ue,nt)|0,d=(d=d+Math.imul(ue,rt)|0)+Math.imul(ge,nt)|0,p=p+Math.imul(ge,rt)|0,m=m+Math.imul(se,bt)|0,d=(d=d+Math.imul(se,Mt)|0)+Math.imul(re,bt)|0,p=p+Math.imul(re,Mt)|0,m=m+Math.imul(ve,it)|0,d=(d=d+Math.imul(ve,mt)|0)+Math.imul(_e,it)|0,p=p+Math.imul(_e,mt)|0,m=m+Math.imul(Re,xt)|0,d=(d=d+Math.imul(Re,It)|0)+Math.imul(ye,xt)|0,p=p+Math.imul(ye,It)|0,m=m+Math.imul(Se,Tt)|0,d=(d=d+Math.imul(Se,Pt)|0)+Math.imul(Oe,Tt)|0,p=p+Math.imul(Oe,Pt)|0;var mr=(P+(m=m+Math.imul(L,Fe)|0)|0)+((8191&(d=(d=d+Math.imul(L,He)|0)+Math.imul(Y,Fe)|0))<<13)|0;P=((p=p+Math.imul(Y,He)|0)+(d>>>13)|0)+(mr>>>26)|0,mr&=67108863,m=Math.imul(Ke,Me),d=(d=Math.imul(Ke,qe))+Math.imul(We,Me)|0,p=Math.imul(We,qe),m=m+Math.imul(Be,nt)|0,d=(d=d+Math.imul(Be,rt)|0)+Math.imul(De,nt)|0,p=p+Math.imul(De,rt)|0,m=m+Math.imul(ue,bt)|0,d=(d=d+Math.imul(ue,Mt)|0)+Math.imul(ge,bt)|0,p=p+Math.imul(ge,Mt)|0,m=m+Math.imul(se,it)|0,d=(d=d+Math.imul(se,mt)|0)+Math.imul(re,it)|0,p=p+Math.imul(re,mt)|0,m=m+Math.imul(ve,xt)|0,d=(d=d+Math.imul(ve,It)|0)+Math.imul(_e,xt)|0,p=p+Math.imul(_e,It)|0,m=m+Math.imul(Re,Tt)|0,d=(d=d+Math.imul(Re,Pt)|0)+Math.imul(ye,Tt)|0,p=p+Math.imul(ye,Pt)|0,m=m+Math.imul(Se,Fe)|0,d=(d=d+Math.imul(Se,He)|0)+Math.imul(Oe,Fe)|0,p=p+Math.imul(Oe,He)|0;var ar=(P+(m=m+Math.imul(L,Ue)|0)|0)+((8191&(d=(d=d+Math.imul(L,Ge)|0)+Math.imul(Y,Ue)|0))<<13)|0;P=((p=p+Math.imul(Y,Ge)|0)+(d>>>13)|0)+(ar>>>26)|0,ar&=67108863,m=Math.imul(U,Me),d=(d=Math.imul(U,qe))+Math.imul(w,Me)|0,p=Math.imul(w,qe),m=m+Math.imul(Ke,nt)|0,d=(d=d+Math.imul(Ke,rt)|0)+Math.imul(We,nt)|0,p=p+Math.imul(We,rt)|0,m=m+Math.imul(Be,bt)|0,d=(d=d+Math.imul(Be,Mt)|0)+Math.imul(De,bt)|0,p=p+Math.imul(De,Mt)|0,m=m+Math.imul(ue,it)|0,d=(d=d+Math.imul(ue,mt)|0)+Math.imul(ge,it)|0,p=p+Math.imul(ge,mt)|0,m=m+Math.imul(se,xt)|0,d=(d=d+Math.imul(se,It)|0)+Math.imul(re,xt)|0,p=p+Math.imul(re,It)|0,m=m+Math.imul(ve,Tt)|0,d=(d=d+Math.imul(ve,Pt)|0)+Math.imul(_e,Tt)|0,p=p+Math.imul(_e,Pt)|0,m=m+Math.imul(Re,Fe)|0,d=(d=d+Math.imul(Re,He)|0)+Math.imul(ye,Fe)|0,p=p+Math.imul(ye,He)|0,m=m+Math.imul(Se,Ue)|0,d=(d=d+Math.imul(Se,Ge)|0)+Math.imul(Oe,Ue)|0,p=p+Math.imul(Oe,Ge)|0;var en=(P+(m=m+Math.imul(L,Xe)|0)|0)+((8191&(d=(d=d+Math.imul(L,dt)|0)+Math.imul(Y,Xe)|0))<<13)|0;P=((p=p+Math.imul(Y,dt)|0)+(d>>>13)|0)+(en>>>26)|0,en&=67108863,m=Math.imul(z,Me),d=(d=Math.imul(z,qe))+Math.imul(ie,Me)|0,p=Math.imul(ie,qe),m=m+Math.imul(U,nt)|0,d=(d=d+Math.imul(U,rt)|0)+Math.imul(w,nt)|0,p=p+Math.imul(w,rt)|0,m=m+Math.imul(Ke,bt)|0,d=(d=d+Math.imul(Ke,Mt)|0)+Math.imul(We,bt)|0,p=p+Math.imul(We,Mt)|0,m=m+Math.imul(Be,it)|0,d=(d=d+Math.imul(Be,mt)|0)+Math.imul(De,it)|0,p=p+Math.imul(De,mt)|0,m=m+Math.imul(ue,xt)|0,d=(d=d+Math.imul(ue,It)|0)+Math.imul(ge,xt)|0,p=p+Math.imul(ge,It)|0,m=m+Math.imul(se,Tt)|0,d=(d=d+Math.imul(se,Pt)|0)+Math.imul(re,Tt)|0,p=p+Math.imul(re,Pt)|0,m=m+Math.imul(ve,Fe)|0,d=(d=d+Math.imul(ve,He)|0)+Math.imul(_e,Fe)|0,p=p+Math.imul(_e,He)|0,m=m+Math.imul(Re,Ue)|0,d=(d=d+Math.imul(Re,Ge)|0)+Math.imul(ye,Ue)|0,p=p+Math.imul(ye,Ge)|0,m=m+Math.imul(Se,Xe)|0,d=(d=d+Math.imul(Se,dt)|0)+Math.imul(Oe,Xe)|0,p=p+Math.imul(Oe,dt)|0;var zr=(P+(m=m+Math.imul(L,gt)|0)|0)+((8191&(d=(d=d+Math.imul(L,wt)|0)+Math.imul(Y,gt)|0))<<13)|0;P=((p=p+Math.imul(Y,wt)|0)+(d>>>13)|0)+(zr>>>26)|0,zr&=67108863,m=Math.imul(z,nt),d=(d=Math.imul(z,rt))+Math.imul(ie,nt)|0,p=Math.imul(ie,rt),m=m+Math.imul(U,bt)|0,d=(d=d+Math.imul(U,Mt)|0)+Math.imul(w,bt)|0,p=p+Math.imul(w,Mt)|0,m=m+Math.imul(Ke,it)|0,d=(d=d+Math.imul(Ke,mt)|0)+Math.imul(We,it)|0,p=p+Math.imul(We,mt)|0,m=m+Math.imul(Be,xt)|0,d=(d=d+Math.imul(Be,It)|0)+Math.imul(De,xt)|0,p=p+Math.imul(De,It)|0,m=m+Math.imul(ue,Tt)|0,d=(d=d+Math.imul(ue,Pt)|0)+Math.imul(ge,Tt)|0,p=p+Math.imul(ge,Pt)|0,m=m+Math.imul(se,Fe)|0,d=(d=d+Math.imul(se,He)|0)+Math.imul(re,Fe)|0,p=p+Math.imul(re,He)|0,m=m+Math.imul(ve,Ue)|0,d=(d=d+Math.imul(ve,Ge)|0)+Math.imul(_e,Ue)|0,p=p+Math.imul(_e,Ge)|0,m=m+Math.imul(Re,Xe)|0,d=(d=d+Math.imul(Re,dt)|0)+Math.imul(ye,Xe)|0,p=p+Math.imul(ye,dt)|0;var Wr=(P+(m=m+Math.imul(Se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Se,wt)|0)+Math.imul(Oe,gt)|0))<<13)|0;P=((p=p+Math.imul(Oe,wt)|0)+(d>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,m=Math.imul(z,bt),d=(d=Math.imul(z,Mt))+Math.imul(ie,bt)|0,p=Math.imul(ie,Mt),m=m+Math.imul(U,it)|0,d=(d=d+Math.imul(U,mt)|0)+Math.imul(w,it)|0,p=p+Math.imul(w,mt)|0,m=m+Math.imul(Ke,xt)|0,d=(d=d+Math.imul(Ke,It)|0)+Math.imul(We,xt)|0,p=p+Math.imul(We,It)|0,m=m+Math.imul(Be,Tt)|0,d=(d=d+Math.imul(Be,Pt)|0)+Math.imul(De,Tt)|0,p=p+Math.imul(De,Pt)|0,m=m+Math.imul(ue,Fe)|0,d=(d=d+Math.imul(ue,He)|0)+Math.imul(ge,Fe)|0,p=p+Math.imul(ge,He)|0,m=m+Math.imul(se,Ue)|0,d=(d=d+Math.imul(se,Ge)|0)+Math.imul(re,Ue)|0,p=p+Math.imul(re,Ge)|0,m=m+Math.imul(ve,Xe)|0,d=(d=d+Math.imul(ve,dt)|0)+Math.imul(_e,Xe)|0,p=p+Math.imul(_e,dt)|0;var _r=(P+(m=m+Math.imul(Re,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Re,wt)|0)+Math.imul(ye,gt)|0))<<13)|0;P=((p=p+Math.imul(ye,wt)|0)+(d>>>13)|0)+(_r>>>26)|0,_r&=67108863,m=Math.imul(z,it),d=(d=Math.imul(z,mt))+Math.imul(ie,it)|0,p=Math.imul(ie,mt),m=m+Math.imul(U,xt)|0,d=(d=d+Math.imul(U,It)|0)+Math.imul(w,xt)|0,p=p+Math.imul(w,It)|0,m=m+Math.imul(Ke,Tt)|0,d=(d=d+Math.imul(Ke,Pt)|0)+Math.imul(We,Tt)|0,p=p+Math.imul(We,Pt)|0,m=m+Math.imul(Be,Fe)|0,d=(d=d+Math.imul(Be,He)|0)+Math.imul(De,Fe)|0,p=p+Math.imul(De,He)|0,m=m+Math.imul(ue,Ue)|0,d=(d=d+Math.imul(ue,Ge)|0)+Math.imul(ge,Ue)|0,p=p+Math.imul(ge,Ge)|0,m=m+Math.imul(se,Xe)|0,d=(d=d+Math.imul(se,dt)|0)+Math.imul(re,Xe)|0,p=p+Math.imul(re,dt)|0;var Gr=(P+(m=m+Math.imul(ve,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ve,wt)|0)+Math.imul(_e,gt)|0))<<13)|0;P=((p=p+Math.imul(_e,wt)|0)+(d>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,m=Math.imul(z,xt),d=(d=Math.imul(z,It))+Math.imul(ie,xt)|0,p=Math.imul(ie,It),m=m+Math.imul(U,Tt)|0,d=(d=d+Math.imul(U,Pt)|0)+Math.imul(w,Tt)|0,p=p+Math.imul(w,Pt)|0,m=m+Math.imul(Ke,Fe)|0,d=(d=d+Math.imul(Ke,He)|0)+Math.imul(We,Fe)|0,p=p+Math.imul(We,He)|0,m=m+Math.imul(Be,Ue)|0,d=(d=d+Math.imul(Be,Ge)|0)+Math.imul(De,Ue)|0,p=p+Math.imul(De,Ge)|0,m=m+Math.imul(ue,Xe)|0,d=(d=d+Math.imul(ue,dt)|0)+Math.imul(ge,Xe)|0,p=p+Math.imul(ge,dt)|0;var qr=(P+(m=m+Math.imul(se,gt)|0)|0)+((8191&(d=(d=d+Math.imul(se,wt)|0)+Math.imul(re,gt)|0))<<13)|0;P=((p=p+Math.imul(re,wt)|0)+(d>>>13)|0)+(qr>>>26)|0,qr&=67108863,m=Math.imul(z,Tt),d=(d=Math.imul(z,Pt))+Math.imul(ie,Tt)|0,p=Math.imul(ie,Pt),m=m+Math.imul(U,Fe)|0,d=(d=d+Math.imul(U,He)|0)+Math.imul(w,Fe)|0,p=p+Math.imul(w,He)|0,m=m+Math.imul(Ke,Ue)|0,d=(d=d+Math.imul(Ke,Ge)|0)+Math.imul(We,Ue)|0,p=p+Math.imul(We,Ge)|0,m=m+Math.imul(Be,Xe)|0,d=(d=d+Math.imul(Be,dt)|0)+Math.imul(De,Xe)|0,p=p+Math.imul(De,dt)|0;var Yr=(P+(m=m+Math.imul(ue,gt)|0)|0)+((8191&(d=(d=d+Math.imul(ue,wt)|0)+Math.imul(ge,gt)|0))<<13)|0;P=((p=p+Math.imul(ge,wt)|0)+(d>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,m=Math.imul(z,Fe),d=(d=Math.imul(z,He))+Math.imul(ie,Fe)|0,p=Math.imul(ie,He),m=m+Math.imul(U,Ue)|0,d=(d=d+Math.imul(U,Ge)|0)+Math.imul(w,Ue)|0,p=p+Math.imul(w,Ge)|0,m=m+Math.imul(Ke,Xe)|0,d=(d=d+Math.imul(Ke,dt)|0)+Math.imul(We,Xe)|0,p=p+Math.imul(We,dt)|0;var mn=(P+(m=m+Math.imul(Be,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Be,wt)|0)+Math.imul(De,gt)|0))<<13)|0;P=((p=p+Math.imul(De,wt)|0)+(d>>>13)|0)+(mn>>>26)|0,mn&=67108863,m=Math.imul(z,Ue),d=(d=Math.imul(z,Ge))+Math.imul(ie,Ue)|0,p=Math.imul(ie,Ge),m=m+Math.imul(U,Xe)|0,d=(d=d+Math.imul(U,dt)|0)+Math.imul(w,Xe)|0,p=p+Math.imul(w,dt)|0;var un=(P+(m=m+Math.imul(Ke,gt)|0)|0)+((8191&(d=(d=d+Math.imul(Ke,wt)|0)+Math.imul(We,gt)|0))<<13)|0;P=((p=p+Math.imul(We,wt)|0)+(d>>>13)|0)+(un>>>26)|0,un&=67108863,m=Math.imul(z,Xe),d=(d=Math.imul(z,dt))+Math.imul(ie,Xe)|0,p=Math.imul(ie,dt);var fn=(P+(m=m+Math.imul(U,gt)|0)|0)+((8191&(d=(d=d+Math.imul(U,wt)|0)+Math.imul(w,gt)|0))<<13)|0;P=((p=p+Math.imul(w,wt)|0)+(d>>>13)|0)+(fn>>>26)|0,fn&=67108863;var xn=(P+(m=Math.imul(z,gt))|0)+((8191&(d=(d=Math.imul(z,wt))+Math.imul(ie,gt)|0))<<13)|0;return P=((p=Math.imul(ie,wt))+(d>>>13)|0)+(xn>>>26)|0,xn&=67108863,x[0]=Br,x[1]=Vt,x[2]=Zt,x[3]=Tr,x[4]=dr,x[5]=or,x[6]=mr,x[7]=ar,x[8]=en,x[9]=zr,x[10]=Wr,x[11]=_r,x[12]=Gr,x[13]=qr,x[14]=Yr,x[15]=mn,x[16]=un,x[17]=fn,x[18]=xn,0!==P&&(x[19]=P,l.length++),l};function W(E,a,f){return(new K).mulp(E,a,f)}function K(E,a){this.x=E,this.y=a}Math.imul||(Z=j),v.prototype.mulTo=function(a,f){var l,h=this.length+a.length;return l=10===this.length&&10===a.length?Z(this,a,f):h<63?j(this,a,f):h<1024?function q(E,a,f){f.negative=a.negative^E.negative,f.length=E.length+a.length;for(var l=0,h=0,g=0;g<f.length-1;g++){var x=h;h=0;for(var P=67108863&l,m=Math.min(g,a.length-1),d=Math.max(0,g-E.length+1);d<=m;d++){var Y=(0|E.words[g-d])*(0|a.words[d]),le=67108863&Y;P=67108863&(le=le+P|0),h+=(x=(x=x+(Y/67108864|0)|0)+(le>>>26)|0)>>>26,x&=67108863}f.words[g]=P,l=x,x=h}return 0!==l?f.words[g]=l:f.length--,f.strip()}(this,a,f):W(this,a,f),l},K.prototype.makeRBT=function(a){for(var f=new Array(a),l=v.prototype._countBits(a)-1,h=0;h<a;h++)f[h]=this.revBin(h,l,a);return f},K.prototype.revBin=function(a,f,l){if(0===a||a===l-1)return a;for(var h=0,g=0;g<f;g++)h|=(1&a)<<f-g-1,a>>=1;return h},K.prototype.permute=function(a,f,l,h,g,x){for(var P=0;P<x;P++)h[P]=f[a[P]],g[P]=l[a[P]]},K.prototype.transform=function(a,f,l,h,g,x){this.permute(x,a,f,l,h,g);for(var P=1;P<g;P<<=1)for(var m=P<<1,d=Math.cos(2*Math.PI/m),p=Math.sin(2*Math.PI/m),V=0;V<g;V+=m)for(var L=d,Y=p,le=0;le<P;le++){var Se=l[V+le],Oe=h[V+le],Ve=l[V+le+P],Re=h[V+le+P],ye=L*Ve-Y*Re;Re=L*Re+Y*Ve,l[V+le]=Se+(Ve=ye),h[V+le]=Oe+Re,l[V+le+P]=Se-Ve,h[V+le+P]=Oe-Re,le!==m&&(ye=d*L-p*Y,Y=d*Y+p*L,L=ye)}},K.prototype.guessLen13b=function(a,f){var l=1|Math.max(f,a),h=1&l,g=0;for(l=l/2|0;l;l>>>=1)g++;return 1<<g+1+h},K.prototype.conjugate=function(a,f,l){if(!(l<=1))for(var h=0;h<l/2;h++){var g=a[h];a[h]=a[l-h-1],a[l-h-1]=g,g=f[h],f[h]=-f[l-h-1],f[l-h-1]=-g}},K.prototype.normalize13b=function(a,f){for(var l=0,h=0;h<f/2;h++){var g=8192*Math.round(a[2*h+1]/f)+Math.round(a[2*h]/f)+l;a[h]=67108863&g,l=g<67108864?0:g/67108864|0}return a},K.prototype.convert13b=function(a,f,l,h){for(var g=0,x=0;x<f;x++)l[2*x]=8191&(g+=0|a[x]),l[2*x+1]=8191&(g>>>=13),g>>>=13;for(x=2*f;x<h;++x)l[x]=0;N(0===g),N(!(-8192&g))},K.prototype.stub=function(a){for(var f=new Array(a),l=0;l<a;l++)f[l]=0;return f},K.prototype.mulp=function(a,f,l){var h=2*this.guessLen13b(a.length,f.length),g=this.makeRBT(h),x=this.stub(h),P=new Array(h),m=new Array(h),d=new Array(h),p=new Array(h),V=new Array(h),L=new Array(h),Y=l.words;Y.length=h,this.convert13b(a.words,a.length,P,h),this.convert13b(f.words,f.length,p,h),this.transform(P,x,m,d,h,g),this.transform(p,x,V,L,h,g);for(var le=0;le<h;le++){var Se=m[le]*V[le]-d[le]*L[le];d[le]=m[le]*L[le]+d[le]*V[le],m[le]=Se}return this.conjugate(m,d,h),this.transform(m,d,Y,x,h,g),this.conjugate(Y,x,h),this.normalize13b(Y,h),l.negative=a.negative^f.negative,l.length=a.length+f.length,l.strip()},v.prototype.mul=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},v.prototype.mulf=function(a){var f=new v(null);return f.words=new Array(this.length+a.length),W(this,a,f)},v.prototype.imul=function(a){return this.clone().mulTo(a,this)},v.prototype.imuln=function(a){N("number"==typeof a),N(a<67108864);for(var f=0,l=0;l<this.length;l++){var h=(0|this.words[l])*a,g=(67108863&h)+(67108863&f);f>>=26,f+=h/67108864|0,f+=g>>>26,this.words[l]=67108863&g}return 0!==f&&(this.words[l]=f,this.length++),this},v.prototype.muln=function(a){return this.clone().imuln(a)},v.prototype.sqr=function(){return this.mul(this)},v.prototype.isqr=function(){return this.imul(this.clone())},v.prototype.pow=function(a){var f=function k(E){for(var a=new Array(E.bitLength()),f=0;f<a.length;f++){var h=f%26;a[f]=(E.words[f/26|0]&1<<h)>>>h}return a}(a);if(0===f.length)return new v(1);for(var l=this,h=0;h<f.length&&0===f[h];h++,l=l.sqr());if(++h<f.length)for(var g=l.sqr();h<f.length;h++,g=g.sqr())0!==f[h]&&(l=l.mul(g));return l},v.prototype.iushln=function(a){N("number"==typeof a&&a>=0);var g,f=a%26,l=(a-f)/26,h=67108863>>>26-f<<26-f;if(0!==f){var x=0;for(g=0;g<this.length;g++){var P=this.words[g]&h;this.words[g]=(0|this.words[g])-P<<f|x,x=P>>>26-f}x&&(this.words[g]=x,this.length++)}if(0!==l){for(g=this.length-1;g>=0;g--)this.words[g+l]=this.words[g];for(g=0;g<l;g++)this.words[g]=0;this.length+=l}return this.strip()},v.prototype.ishln=function(a){return N(0===this.negative),this.iushln(a)},v.prototype.iushrn=function(a,f,l){var h;N("number"==typeof a&&a>=0),h=f?(f-f%26)/26:0;var g=a%26,x=Math.min((a-g)/26,this.length),P=67108863^67108863>>>g<<g,m=l;if(h-=x,h=Math.max(0,h),m){for(var d=0;d<x;d++)m.words[d]=this.words[d];m.length=x}if(0!==x)if(this.length>x)for(this.length-=x,d=0;d<this.length;d++)this.words[d]=this.words[d+x];else this.words[0]=0,this.length=1;var p=0;for(d=this.length-1;d>=0&&(0!==p||d>=h);d--){var V=0|this.words[d];this.words[d]=p<<26-g|V>>>g,p=V&P}return m&&0!==p&&(m.words[m.length++]=p),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},v.prototype.ishrn=function(a,f,l){return N(0===this.negative),this.iushrn(a,f,l)},v.prototype.shln=function(a){return this.clone().ishln(a)},v.prototype.ushln=function(a){return this.clone().iushln(a)},v.prototype.shrn=function(a){return this.clone().ishrn(a)},v.prototype.ushrn=function(a){return this.clone().iushrn(a)},v.prototype.testn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return!(this.length<=l||!(this.words[l]&1<<f))},v.prototype.imaskn=function(a){N("number"==typeof a&&a>=0);var f=a%26,l=(a-f)/26;return N(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==f&&l++,this.length=Math.min(l,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this.strip())},v.prototype.maskn=function(a){return this.clone().imaskn(a)},v.prototype.iaddn=function(a){return N("number"==typeof a),N(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},v.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},v.prototype.isubn=function(a){if(N("number"==typeof a),N(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this.strip()},v.prototype.addn=function(a){return this.clone().iaddn(a)},v.prototype.subn=function(a){return this.clone().isubn(a)},v.prototype.iabs=function(){return this.negative=0,this},v.prototype.abs=function(){return this.clone().iabs()},v.prototype._ishlnsubmul=function(a,f,l){var g;this._expand(a.length+l);var x,P=0;for(g=0;g<a.length;g++){x=(0|this.words[g+l])+P;var m=(0|a.words[g])*f;P=((x-=67108863&m)>>26)-(m/67108864|0),this.words[g+l]=67108863&x}for(;g<this.length-l;g++)P=(x=(0|this.words[g+l])+P)>>26,this.words[g+l]=67108863&x;if(0===P)return this.strip();for(N(-1===P),P=0,g=0;g<this.length;g++)P=(x=-(0|this.words[g])+P)>>26,this.words[g]=67108863&x;return this.negative=1,this.strip()},v.prototype._wordDiv=function(a,f){var l,h=this.clone(),g=a,x=0|g.words[g.length-1];0!=(l=26-this._countBits(x))&&(g=g.ushln(l),h.iushln(l),x=0|g.words[g.length-1]);var d,m=h.length-g.length;if("mod"!==f){(d=new v(null)).length=m+1,d.words=new Array(d.length);for(var p=0;p<d.length;p++)d.words[p]=0}var V=h.clone()._ishlnsubmul(g,1,m);0===V.negative&&(h=V,d&&(d.words[m]=1));for(var L=m-1;L>=0;L--){var Y=67108864*(0|h.words[g.length+L])+(0|h.words[g.length+L-1]);for(Y=Math.min(Y/x|0,67108863),h._ishlnsubmul(g,Y,L);0!==h.negative;)Y--,h.negative=0,h._ishlnsubmul(g,1,L),h.isZero()||(h.negative^=1);d&&(d.words[L]=Y)}return d&&d.strip(),h.strip(),"div"!==f&&0!==l&&h.iushrn(l),{div:d||null,mod:h}},v.prototype.divmod=function(a,f,l){return N(!a.isZero()),this.isZero()?{div:new v(0),mod:new v(0)}:0!==this.negative&&0===a.negative?(x=this.neg().divmod(a,f),"mod"!==f&&(h=x.div.neg()),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.iadd(a)),{div:h,mod:g}):0===this.negative&&0!==a.negative?(x=this.divmod(a.neg(),f),"mod"!==f&&(h=x.div.neg()),{div:h,mod:x.mod}):this.negative&a.negative?(x=this.neg().divmod(a.neg(),f),"div"!==f&&(g=x.mod.neg(),l&&0!==g.negative&&g.isub(a)),{div:x.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new v(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new v(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new v(this.modn(a.words[0]))}:this._wordDiv(a,f);var h,g,x},v.prototype.div=function(a){return this.divmod(a,"div",!1).div},v.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},v.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},v.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var l=0!==f.div.negative?f.mod.isub(a):f.mod,h=a.ushrn(1),g=a.andln(1),x=l.cmp(h);return x<0||1===g&&0===x?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},v.prototype.modn=function(a){N(a<=67108863);for(var f=(1<<26)%a,l=0,h=this.length-1;h>=0;h--)l=(f*l+(0|this.words[h]))%a;return l},v.prototype.idivn=function(a){N(a<=67108863);for(var f=0,l=this.length-1;l>=0;l--){var h=(0|this.words[l])+67108864*f;this.words[l]=h/a|0,f=h%a}return this.strip()},v.prototype.divn=function(a){return this.clone().idivn(a)},v.prototype.egcd=function(a){N(0===a.negative),N(!a.isZero());var f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=new v(0),P=new v(1),m=0;f.isEven()&&l.isEven();)f.iushrn(1),l.iushrn(1),++m;for(var d=l.clone(),p=f.clone();!f.isZero();){for(var V=0,L=1;!(f.words[0]&L)&&V<26;++V,L<<=1);if(V>0)for(f.iushrn(V);V-- >0;)(h.isOdd()||g.isOdd())&&(h.iadd(d),g.isub(p)),h.iushrn(1),g.iushrn(1);for(var Y=0,le=1;!(l.words[0]&le)&&Y<26;++Y,le<<=1);if(Y>0)for(l.iushrn(Y);Y-- >0;)(x.isOdd()||P.isOdd())&&(x.iadd(d),P.isub(p)),x.iushrn(1),P.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(x),g.isub(P)):(l.isub(f),x.isub(h),P.isub(g))}return{a:x,b:P,gcd:l.iushln(m)}},v.prototype._invmp=function(a){N(0===a.negative),N(!a.isZero());var V,f=this,l=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var h=new v(1),g=new v(0),x=l.clone();f.cmpn(1)>0&&l.cmpn(1)>0;){for(var P=0,m=1;!(f.words[0]&m)&&P<26;++P,m<<=1);if(P>0)for(f.iushrn(P);P-- >0;)h.isOdd()&&h.iadd(x),h.iushrn(1);for(var d=0,p=1;!(l.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(l.iushrn(d);d-- >0;)g.isOdd()&&g.iadd(x),g.iushrn(1);f.cmp(l)>=0?(f.isub(l),h.isub(g)):(l.isub(f),g.isub(h))}return(V=0===f.cmpn(1)?h:g).cmpn(0)<0&&V.iadd(a),V},v.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),l=a.clone();f.negative=0,l.negative=0;for(var h=0;f.isEven()&&l.isEven();h++)f.iushrn(1),l.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;l.isEven();)l.iushrn(1);var g=f.cmp(l);if(g<0){var x=f;f=l,l=x}else if(0===g||0===l.cmpn(1))break;f.isub(l)}return l.iushln(h)},v.prototype.invm=function(a){return this.egcd(a).a.umod(a)},v.prototype.isEven=function(){return!(1&this.words[0])},v.prototype.isOdd=function(){return!(1&~this.words[0])},v.prototype.andln=function(a){return this.words[0]&a},v.prototype.bincn=function(a){N("number"==typeof a);var f=a%26,l=(a-f)/26,h=1<<f;if(this.length<=l)return this._expand(l+1),this.words[l]|=h,this;for(var g=h,x=l;0!==g&&x<this.length;x++){var P=0|this.words[x];g=(P+=g)>>>26,this.words[x]=P&=67108863}return 0!==g&&(this.words[x]=g,this.length++),this},v.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},v.prototype.cmpn=function(a){var l,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this.strip(),this.length>1)l=1;else{f&&(a=-a),N(a<=67108863,"Number is too big");var h=0|this.words[0];l=h===a?0:h<a?-1:1}return 0!==this.negative?0|-l:l},v.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},v.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,l=this.length-1;l>=0;l--){var h=0|this.words[l],g=0|a.words[l];if(h!==g){h<g?f=-1:h>g&&(f=1);break}}return f},v.prototype.gtn=function(a){return 1===this.cmpn(a)},v.prototype.gt=function(a){return 1===this.cmp(a)},v.prototype.gten=function(a){return this.cmpn(a)>=0},v.prototype.gte=function(a){return this.cmp(a)>=0},v.prototype.ltn=function(a){return-1===this.cmpn(a)},v.prototype.lt=function(a){return-1===this.cmp(a)},v.prototype.lten=function(a){return this.cmpn(a)<=0},v.prototype.lte=function(a){return this.cmp(a)<=0},v.prototype.eqn=function(a){return 0===this.cmpn(a)},v.prototype.eq=function(a){return 0===this.cmp(a)},v.red=function(a){return new pe(a)},v.prototype.toRed=function(a){return N(!this.red,"Already a number in reduction context"),N(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},v.prototype.fromRed=function(){return N(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},v.prototype._forceRed=function(a){return this.red=a,this},v.prototype.forceRed=function(a){return N(!this.red,"Already a number in reduction context"),this._forceRed(a)},v.prototype.redAdd=function(a){return N(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},v.prototype.redIAdd=function(a){return N(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},v.prototype.redSub=function(a){return N(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},v.prototype.redISub=function(a){return N(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},v.prototype.redShl=function(a){return N(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},v.prototype.redMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},v.prototype.redIMul=function(a){return N(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},v.prototype.redSqr=function(){return N(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},v.prototype.redISqr=function(){return N(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},v.prototype.redSqrt=function(){return N(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},v.prototype.redInvm=function(){return N(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},v.prototype.redNeg=function(){return N(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},v.prototype.redPow=function(a){return N(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var J={k256:null,p224:null,p192:null,p25519:null};function X(E,a){this.name=E,this.p=new v(a,16),this.n=this.p.bitLength(),this.k=new v(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Q(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function oe(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ne(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function me(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function pe(E){if("string"==typeof E){var a=v._prime(E);this.m=a.p,this.prime=a}else N(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}function Ie(E){pe.call(this,E),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new v(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}X.prototype._tmp=function(){var a=new v(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var l,f=a;do{this.split(f,this.tmp),l=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(l>this.n);var h=l<this.n?-1:f.ucmp(this.p);return 0===h?(f.words[0]=0,f.length=1):h>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},X.prototype.split=function(a,f){a.iushrn(this.n,0,f)},X.prototype.imulK=function(a){return a.imul(this.k)},G(Q,X),Q.prototype.split=function(a,f){for(var l=4194303,h=Math.min(a.length,9),g=0;g<h;g++)f.words[g]=a.words[g];if(f.length=h,a.length<=9)return a.words[0]=0,void(a.length=1);var x=a.words[9];for(f.words[f.length++]=x&l,g=10;g<a.length;g++){var P=0|a.words[g];a.words[g-10]=(P&l)<<4|x>>>22,x=P}a.words[g-10]=x>>>=22,a.length-=0===x&&a.length>10?10:9},Q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,l=0;l<a.length;l++){var h=0|a.words[l];a.words[l]=67108863&(f+=977*h),f=64*h+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},G(oe,X),G(ne,X),G(me,X),me.prototype.imulK=function(a){for(var f=0,l=0;l<a.length;l++){var h=19*(0|a.words[l])+f,g=67108863&h;h>>>=26,a.words[l]=g,f=h}return 0!==f&&(a.words[a.length++]=f),a},v._prime=function(a){if(J[a])return J[a];var f;if("k256"===a)f=new Q;else if("p224"===a)f=new oe;else if("p192"===a)f=new ne;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new me}return J[a]=f,f},pe.prototype._verify1=function(a){N(0===a.negative,"red works only with positives"),N(a.red,"red works only with red numbers")},pe.prototype._verify2=function(a,f){N(!(a.negative|f.negative),"red works only with positives"),N(a.red&&a.red===f.red,"red works only with red numbers")},pe.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},pe.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},pe.prototype.add=function(a,f){this._verify2(a,f);var l=a.add(f);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},pe.prototype.iadd=function(a,f){this._verify2(a,f);var l=a.iadd(f);return l.cmp(this.m)>=0&&l.isub(this.m),l},pe.prototype.sub=function(a,f){this._verify2(a,f);var l=a.sub(f);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},pe.prototype.isub=function(a,f){this._verify2(a,f);var l=a.isub(f);return l.cmpn(0)<0&&l.iadd(this.m),l},pe.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},pe.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},pe.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},pe.prototype.isqr=function(a){return this.imul(a,a.clone())},pe.prototype.sqr=function(a){return this.mul(a,a)},pe.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(N(f%2==1),3===f){var l=this.m.add(new v(1)).iushrn(2);return this.pow(a,l)}for(var h=this.m.subn(1),g=0;!h.isZero()&&0===h.andln(1);)g++,h.iushrn(1);N(!h.isZero());var x=new v(1).toRed(this),P=x.redNeg(),m=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new v(2*d*d).toRed(this);0!==this.pow(d,m).cmp(P);)d.redIAdd(P);for(var p=this.pow(d,h),V=this.pow(a,h.addn(1).iushrn(1)),L=this.pow(a,h),Y=g;0!==L.cmp(x);){for(var le=L,Se=0;0!==le.cmp(x);Se++)le=le.redSqr();N(Se<Y);var Oe=this.pow(p,new v(1).iushln(Y-Se-1));V=V.redMul(Oe),p=Oe.redSqr(),L=L.redMul(p),Y=Se}return V},pe.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},pe.prototype.pow=function(a,f){if(f.isZero())return new v(1).toRed(this);if(0===f.cmpn(1))return a.clone();var h=new Array(16);h[0]=new v(1).toRed(this),h[1]=a;for(var g=2;g<h.length;g++)h[g]=this.mul(h[g-1],a);var x=h[0],P=0,m=0,d=f.bitLength()%26;for(0===d&&(d=26),g=f.length-1;g>=0;g--){for(var p=f.words[g],V=d-1;V>=0;V--){var L=p>>V&1;x!==h[0]&&(x=this.sqr(x)),0!==L||0!==P?(P<<=1,P|=L,(4==++m||0===g&&0===V)&&(x=this.mul(x,h[P]),m=0,P=0)):m=0}d=26}return x},pe.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},pe.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},v.mont=function(a){return new Ie(a)},G(Ie,pe),Ie.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Ie.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},Ie.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new v(0)._forceRed(this);var l=a.mul(f),h=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(h).iushrn(this.shift),x=g;return g.cmp(this.m)>=0?x=g.isub(this.m):g.cmpn(0)<0&&(x=g.iadd(this.m)),x._forceRed(this)},Ie.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(xe=I.nmd(xe),this)},98613:(xe,O,I)=>{var C=I(65667),H=I(30715),N=I(37196),G=I(16508),v=I(14105),B=I(67211),_=I(10568),T=I(27054).Buffer;xe.exports=function(k,j,Z){var q;q=k.padding?k.padding:Z?1:4;var J,W=C(k),K=W.modulus.byteLength();if(j.length>K||new G(j).cmp(W.modulus)>=0)throw new Error("decryption error");J=Z?_(new G(j),W):v(j,W);var X=T.alloc(K-J.length);if(J=T.concat([X,J],K),4===q)return function D(F,k){var j=F.modulus.byteLength(),Z=B("sha1").update(T.alloc(0)).digest(),q=Z.length;if(0!==k[0])throw new Error("decryption error");var W=k.slice(1,q+1),K=k.slice(q+1),J=N(W,H(K,q)),X=N(K,H(J,j-q-1));if(function M(F,k){F=T.from(F),k=T.from(k);var j=0,Z=F.length;F.length!==k.length&&(j++,Z=Math.min(F.length,k.length));for(var q=-1;++q<Z;)j+=F[q]^k[q];return j}(Z,X.slice(0,q)))throw new Error("decryption error");for(var Q=q;0===X[Q];)Q++;if(1!==X[Q++])throw new Error("decryption error");return X.slice(Q)}(W,J);if(1===q)return function $(F,k,j){for(var Z=k.slice(0,2),q=2,W=0;0!==k[q++];)if(q>=k.length){W++;break}var K=k.slice(2,q-1);if(("0002"!==Z.toString("hex")&&!j||"0001"!==Z.toString("hex")&&j)&&W++,K.length<8&&W++,W)throw new Error("decryption error");return k.slice(q)}(0,J,Z);if(3===q)return J;throw new Error("unknown padding")}},87267:(xe,O,I)=>{var C=I(65667),H=I(3342),N=I(67211),G=I(30715),v=I(37196),B=I(16508),_=I(10568),T=I(14105),D=I(27054).Buffer;xe.exports=function(j,Z,q){var W;W=j.padding?j.padding:q?1:4;var J,K=C(j);if(4===W)J=function $(k,j){var Z=k.modulus.byteLength(),q=j.length,W=N("sha1").update(D.alloc(0)).digest(),K=W.length,J=2*K;if(q>Z-J-2)throw new Error("message too long");var X=D.alloc(Z-q-J-2),Q=Z-K-1,oe=H(K),ne=v(D.concat([W,X,D.alloc(1,1),j],Q),G(oe,Q)),me=v(oe,G(ne,K));return new B(D.concat([D.alloc(1),me,ne],Z))}(K,Z);else if(1===W)J=function M(k,j,Z){var K,q=j.length,W=k.modulus.byteLength();if(q>W-11)throw new Error("message too long");return K=Z?D.alloc(W-q-3,255):function F(k){for(var K,j=D.allocUnsafe(k),Z=0,q=H(2*k),W=0;Z<k;)W===q.length&&(q=H(2*k),W=0),(K=q[W++])&&(j[Z++]=K);return j}(W-q-3),new B(D.concat([D.from([0,Z?1:2]),K,D.alloc(1),j],W))}(K,Z,q);else{if(3!==W)throw new Error("unknown padding");if((J=new B(Z)).cmp(K.modulus)>=0)throw new Error("data too long for modulus")}return q?T(J,K):_(J,K)}},10568:(xe,O,I)=>{var C=I(16508),H=I(27054).Buffer;xe.exports=function N(G,v){return H.from(G.toRed(C.mont(v.modulus)).redPow(new C(v.publicExponent)).fromRed().toArray())}},37196:xe=>{xe.exports=function(I,C){for(var H=I.length,N=-1;++N<H;)I[N]^=C[N];return I}},24515:xe=>{let O;xe.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:globalThis):I=>(O||(O=Promise.resolve())).then(I).catch(C=>setTimeout(()=>{throw C},0))},3342:(xe,O,I)=>{"use strict";var C=I(40573),H=65536,v=I(27054).Buffer,B=globalThis.crypto||globalThis.msCrypto;xe.exports=B&&B.getRandomValues?function _(T,D){if(T>4294967295)throw new RangeError("requested too many random bytes");var $=v.allocUnsafe(T);if(T>0)if(T>H)for(var M=0;M<T;M+=H)B.getRandomValues($.slice(M,M+H));else B.getRandomValues($);return"function"==typeof D?C.nextTick(function(){D(null,$)}):$}:function G(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},9682:(xe,O,I)=>{"use strict";var C=I(40573);function H(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var N=I(27054),G=I(3342),v=N.Buffer,B=N.kMaxLength,_=globalThis.crypto||globalThis.msCrypto,T=Math.pow(2,32)-1;function D(j,Z){if("number"!=typeof j||j!=j)throw new TypeError("offset must be a number");if(j>T||j<0)throw new TypeError("offset must be a uint32");if(j>B||j>Z)throw new RangeError("offset out of range")}function $(j,Z,q){if("number"!=typeof j||j!=j)throw new TypeError("size must be a number");if(j>T||j<0)throw new TypeError("size must be a uint32");if(j+Z>q||j>B)throw new RangeError("buffer too small")}function F(j,Z,q,W){if(C.browser){var J=new Uint8Array(j.buffer,Z,q);return _.getRandomValues(J),W?void C.nextTick(function(){W(null,j)}):j}if(!W)return G(q).copy(j,Z),j;G(q,function(Q,oe){if(Q)return W(Q);oe.copy(j,Z),W(null,j)})}_&&_.getRandomValues||!C.browser?(O.randomFill=function M(j,Z,q,W){if(!(v.isBuffer(j)||j instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof Z)W=Z,Z=0,q=j.length;else if("function"==typeof q)W=q,q=j.length-Z;else if("function"!=typeof W)throw new TypeError('"cb" argument must be a function');return D(Z,j.length),$(q,Z,j.length),F(j,Z,q,W)},O.randomFillSync=function k(j,Z,q){if(typeof Z>"u"&&(Z=0),!(v.isBuffer(j)||j instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return D(Z,j.length),void 0===q&&(q=j.length-Z),$(q,Z,j.length),F(j,Z,q)}):(O.randomFill=H,O.randomFillSync=H)},26113:xe=>{"use strict";var I={};function C(B,_,T){T||(T=Error);var $=function(M){function F(k,j,Z){return M.call(this,function D(M,F,k){return"string"==typeof _?_:_(M,F,k)}(k,j,Z))||this}return function O(B,_){B.prototype=Object.create(_.prototype),B.prototype.constructor=B,B.__proto__=_}(F,M),F}(T);$.prototype.name=T.name,$.prototype.code=B,I[B]=$}function H(B,_){if(Array.isArray(B)){var T=B.length;return B=B.map(function(D){return String(D)}),T>2?"one of ".concat(_," ").concat(B.slice(0,T-1).join(", "),", or ")+B[T-1]:2===T?"one of ".concat(_," ").concat(B[0]," or ").concat(B[1]):"of ".concat(_," ").concat(B[0])}return"of ".concat(_," ").concat(String(B))}C("ERR_INVALID_OPT_VALUE",function(B,_){return'The value "'+_+'" is invalid for option "'+B+'"'},TypeError),C("ERR_INVALID_ARG_TYPE",function(B,_,T){var D,$;if("string"==typeof _&&function N(B,_,T){return B.substr(!T||T<0?0:+T,_.length)===_}(_,"not ")?(D="must not be",_=_.replace(/^not /,"")):D="must be",function G(B,_,T){return(void 0===T||T>B.length)&&(T=B.length),B.substring(T-_.length,T)===_}(B," argument"))$="The ".concat(B," ").concat(D," ").concat(H(_,"type"));else{var M=function v(B,_,T){return"number"!=typeof T&&(T=0),!(T+_.length>B.length)&&-1!==B.indexOf(_,T)}(B,".")?"property":"argument";$='The "'.concat(B,'" ').concat(M," ").concat(D," ").concat(H(_,"type"))}return $+". Received type ".concat(typeof T)},TypeError),C("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),C("ERR_METHOD_NOT_IMPLEMENTED",function(B){return"The "+B+" method is not implemented"}),C("ERR_STREAM_PREMATURE_CLOSE","Premature close"),C("ERR_STREAM_DESTROYED",function(B){return"Cannot call "+B+" after a stream was destroyed"}),C("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),C("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),C("ERR_STREAM_WRITE_AFTER_END","write after end"),C("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),C("ERR_UNKNOWN_ENCODING",function(B){return"Unknown encoding: "+B},TypeError),C("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),xe.exports.F=I},74075:(xe,O,I)=>{"use strict";var C=I(40573),H=Object.keys||function(M){var F=[];for(var k in M)F.push(k);return F};xe.exports=T;var N=I(19609),G=I(47849);I(71993)(T,N);for(var v=H(G.prototype),B=0;B<v.length;B++){var _=v[B];T.prototype[_]||(T.prototype[_]=G.prototype[_])}function T(M){if(!(this instanceof T))return new T(M);N.call(this,M),G.call(this,M),this.allowHalfOpen=!0,M&&(!1===M.readable&&(this.readable=!1),!1===M.writable&&(this.writable=!1),!1===M.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",D)))}function D(){this._writableState.ended||C.nextTick($,this)}function $(M){M.end()}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(F){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=F,this._writableState.destroyed=F)}})},18823:(xe,O,I)=>{"use strict";xe.exports=H;var C=I(2909);function H(N){if(!(this instanceof H))return new H(N);C.call(this,N)}I(71993)(H,C),H.prototype._transform=function(N,G,v){v(null,N)}},19609:(xe,O,I)=>{"use strict";var H,C=I(40573);xe.exports=a,a.ReadableState=E,I(44356);var M,G=function(se,re){return se.listeners(re).length},v=I(18342),B=I(83838).Buffer,_=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},$=I(79838);M=$&&$.debuglog?$.debuglog("stream"):function(){};var Q,oe,ne,F=I(19588),k=I(21509),Z=I(42934).getHighWaterMark,q=I(26113).F,W=q.ERR_INVALID_ARG_TYPE,K=q.ERR_STREAM_PUSH_AFTER_EOF,J=q.ERR_METHOD_NOT_IMPLEMENTED,X=q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;I(71993)(a,v);var me=k.errorOrDestroy,pe=["error","close","destroy","pause","resume"];function E(de,se,re){H=H||I(74075),"boolean"!=typeof re&&(re=se instanceof H),this.objectMode=!!(de=de||{}).objectMode,re&&(this.objectMode=this.objectMode||!!de.readableObjectMode),this.highWaterMark=Z(this,de,"readableHighWaterMark",re),this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==de.emitClose,this.autoDestroy=!!de.autoDestroy,this.destroyed=!1,this.defaultEncoding=de.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,de.encoding&&(Q||(Q=I(78454).StringDecoder),this.decoder=new Q(de.encoding),this.encoding=de.encoding)}function a(de){if(H=H||I(74075),!(this instanceof a))return new a(de);this._readableState=new E(de,this,this instanceof H),this.readable=!0,de&&("function"==typeof de.read&&(this._read=de.read),"function"==typeof de.destroy&&(this._destroy=de.destroy)),v.call(this)}function f(de,se,re,ce,ue){M("readableAddChunk",se);var Ee,ge=de._readableState;if(null===se)ge.reading=!1,function m(de,se){if(M("onEofChunk"),!se.ended){if(se.decoder){var re=se.decoder.end();re&&re.length&&(se.buffer.push(re),se.length+=se.objectMode?1:re.length)}se.ended=!0,se.sync?d(de):(se.needReadable=!1,se.emittedReadable||(se.emittedReadable=!0,p(de)))}}(de,ge);else if(ue||(Ee=function h(de,se){var re;return!function D(de){return B.isBuffer(de)||de instanceof _}(se)&&"string"!=typeof se&&void 0!==se&&!de.objectMode&&(re=new W("chunk",["string","Buffer","Uint8Array"],se)),re}(ge,se)),Ee)me(de,Ee);else if(ge.objectMode||se&&se.length>0)if("string"!=typeof se&&!ge.objectMode&&Object.getPrototypeOf(se)!==B.prototype&&(se=function T(de){return B.from(de)}(se)),ce)ge.endEmitted?me(de,new X):l(de,ge,se,!0);else if(ge.ended)me(de,new K);else{if(ge.destroyed)return!1;ge.reading=!1,ge.decoder&&!re?(se=ge.decoder.write(se),ge.objectMode||0!==se.length?l(de,ge,se,!1):V(de,ge)):l(de,ge,se,!1)}else ce||(ge.reading=!1,V(de,ge));return!ge.ended&&(ge.length<ge.highWaterMark||0===ge.length)}function l(de,se,re,ce){se.flowing&&0===se.length&&!se.sync?(se.awaitDrain=0,de.emit("data",re)):(se.length+=se.objectMode?1:re.length,ce?se.buffer.unshift(re):se.buffer.push(re),se.needReadable&&d(de)),V(de,se)}Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(se){this._readableState&&(this._readableState.destroyed=se)}}),a.prototype.destroy=k.destroy,a.prototype._undestroy=k.undestroy,a.prototype._destroy=function(de,se){se(de)},a.prototype.push=function(de,se){var ce,re=this._readableState;return re.objectMode?ce=!0:"string"==typeof de&&((se=se||re.defaultEncoding)!==re.encoding&&(de=B.from(de,se),se=""),ce=!0),f(this,de,se,!1,ce)},a.prototype.unshift=function(de){return f(this,de,null,!0,!1)},a.prototype.isPaused=function(){return!1===this._readableState.flowing},a.prototype.setEncoding=function(de){Q||(Q=I(78454).StringDecoder);var se=new Q(de);this._readableState.decoder=se,this._readableState.encoding=this._readableState.decoder.encoding;for(var re=this._readableState.buffer.head,ce="";null!==re;)ce+=se.write(re.data),re=re.next;return this._readableState.buffer.clear(),""!==ce&&this._readableState.buffer.push(ce),this._readableState.length=ce.length,this};var g=1073741824;function P(de,se){return de<=0||0===se.length&&se.ended?0:se.objectMode?1:de!=de?se.flowing&&se.length?se.buffer.head.data.length:se.length:(de>se.highWaterMark&&(se.highWaterMark=function x(de){return de>=g?de=g:(de--,de|=de>>>1,de|=de>>>2,de|=de>>>4,de|=de>>>8,de|=de>>>16,de++),de}(de)),de<=se.length?de:se.ended?se.length:(se.needReadable=!0,0))}function d(de){var se=de._readableState;M("emitReadable",se.needReadable,se.emittedReadable),se.needReadable=!1,se.emittedReadable||(M("emitReadable",se.flowing),se.emittedReadable=!0,C.nextTick(p,de))}function p(de){var se=de._readableState;M("emitReadable_",se.destroyed,se.length,se.ended),!se.destroyed&&(se.length||se.ended)&&(de.emit("readable"),se.emittedReadable=!1),se.needReadable=!se.flowing&&!se.ended&&se.length<=se.highWaterMark,Re(de)}function V(de,se){se.readingMore||(se.readingMore=!0,C.nextTick(L,de,se))}function L(de,se){for(;!se.reading&&!se.ended&&(se.length<se.highWaterMark||se.flowing&&0===se.length);){var re=se.length;if(M("maybeReadMore read 0"),de.read(0),re===se.length)break}se.readingMore=!1}function le(de){var se=de._readableState;se.readableListening=de.listenerCount("readable")>0,se.resumeScheduled&&!se.paused?se.flowing=!0:de.listenerCount("data")>0&&de.resume()}function Se(de){M("readable nexttick read 0"),de.read(0)}function Ve(de,se){M("resume",se.reading),se.reading||de.read(0),se.resumeScheduled=!1,de.emit("resume"),Re(de),se.flowing&&!se.reading&&de.read(0)}function Re(de){var se=de._readableState;for(M("flow",se.flowing);se.flowing&&null!==de.read(););}function ye(de,se){return 0===se.length?null:(se.objectMode?re=se.buffer.shift():!de||de>=se.length?(re=se.decoder?se.buffer.join(""):1===se.buffer.length?se.buffer.first():se.buffer.concat(se.length),se.buffer.clear()):re=se.buffer.consume(de,se.decoder),re);var re}function ke(de){var se=de._readableState;M("endReadable",se.endEmitted),se.endEmitted||(se.ended=!0,C.nextTick(ve,se,de))}function ve(de,se){if(M("endReadableNT",de.endEmitted,de.length),!de.endEmitted&&0===de.length&&(de.endEmitted=!0,se.readable=!1,se.emit("end"),de.autoDestroy)){var re=se._writableState;(!re||re.autoDestroy&&re.finished)&&se.destroy()}}function _e(de,se){for(var re=0,ce=de.length;re<ce;re++)if(de[re]===se)return re;return-1}a.prototype.read=function(de){M("read",de),de=parseInt(de,10);var se=this._readableState,re=de;if(0!==de&&(se.emittedReadable=!1),0===de&&se.needReadable&&((0!==se.highWaterMark?se.length>=se.highWaterMark:se.length>0)||se.ended))return M("read: emitReadable",se.length,se.ended),0===se.length&&se.ended?ke(this):d(this),null;if(0===(de=P(de,se))&&se.ended)return 0===se.length&&ke(this),null;var ue,ce=se.needReadable;return M("need readable",ce),(0===se.length||se.length-de<se.highWaterMark)&&M("length less than watermark",ce=!0),se.ended||se.reading?M("reading or ended",ce=!1):ce&&(M("do read"),se.reading=!0,se.sync=!0,0===se.length&&(se.needReadable=!0),this._read(se.highWaterMark),se.sync=!1,se.reading||(de=P(re,se))),null===(ue=de>0?ye(de,se):null)?(se.needReadable=se.length<=se.highWaterMark,de=0):(se.length-=de,se.awaitDrain=0),0===se.length&&(se.ended||(se.needReadable=!0),re!==de&&se.ended&&ke(this)),null!==ue&&this.emit("data",ue),ue},a.prototype._read=function(de){me(this,new J("_read()"))},a.prototype.pipe=function(de,se){var re=this,ce=this._readableState;switch(ce.pipesCount){case 0:ce.pipes=de;break;case 1:ce.pipes=[ce.pipes,de];break;default:ce.pipes.push(de)}ce.pipesCount+=1,M("pipe count=%d opts=%j",ce.pipesCount,se);var ge=se&&!1===se.end||de===C.stdout||de===C.stderr?b:Be;function Be(){M("onend"),de.end()}ce.endEmitted?C.nextTick(ge):re.once("end",ge),de.on("unpipe",function Ee(z,ie){M("onunpipe"),z===re&&ie&&!1===ie.hasUnpiped&&(ie.hasUnpiped=!0,function Ke(){M("cleanup"),de.removeListener("close",U),de.removeListener("finish",w),de.removeListener("drain",De),de.removeListener("error",_t),de.removeListener("unpipe",Ee),re.removeListener("end",Be),re.removeListener("end",b),re.removeListener("data",We),et=!0,ce.awaitDrain&&(!de._writableState||de._writableState.needDrain)&&De()}())});var De=function Y(de){return function(){var re=de._readableState;M("pipeOnDrain",re.awaitDrain),re.awaitDrain&&re.awaitDrain--,0===re.awaitDrain&&G(de,"data")&&(re.flowing=!0,Re(de))}}(re);de.on("drain",De);var et=!1;function We(z){M("ondata");var ie=de.write(z);M("dest.write",ie),!1===ie&&((1===ce.pipesCount&&ce.pipes===de||ce.pipesCount>1&&-1!==_e(ce.pipes,de))&&!et&&(M("false write response, pause",ce.awaitDrain),ce.awaitDrain++),re.pause())}function _t(z){M("onerror",z),b(),de.removeListener("error",_t),0===G(de,"error")&&me(de,z)}function U(){de.removeListener("finish",w),b()}function w(){M("onfinish"),de.removeListener("close",U),b()}function b(){M("unpipe"),re.unpipe(de)}return re.on("data",We),function Ie(de,se,re){if("function"==typeof de.prependListener)return de.prependListener(se,re);de._events&&de._events[se]?Array.isArray(de._events[se])?de._events[se].unshift(re):de._events[se]=[re,de._events[se]]:de.on(se,re)}(de,"error",_t),de.once("close",U),de.once("finish",w),de.emit("pipe",re),ce.flowing||(M("pipe resume"),re.resume()),de},a.prototype.unpipe=function(de){var se=this._readableState,re={hasUnpiped:!1};if(0===se.pipesCount)return this;if(1===se.pipesCount)return de&&de!==se.pipes||(de||(de=se.pipes),se.pipes=null,se.pipesCount=0,se.flowing=!1,de&&de.emit("unpipe",this,re)),this;if(!de){var ce=se.pipes,ue=se.pipesCount;se.pipes=null,se.pipesCount=0,se.flowing=!1;for(var ge=0;ge<ue;ge++)ce[ge].emit("unpipe",this,{hasUnpiped:!1});return this}var Ee=_e(se.pipes,de);return-1===Ee||(se.pipes.splice(Ee,1),se.pipesCount-=1,1===se.pipesCount&&(se.pipes=se.pipes[0]),de.emit("unpipe",this,re)),this},a.prototype.addListener=a.prototype.on=function(de,se){var re=v.prototype.on.call(this,de,se),ce=this._readableState;return"data"===de?(ce.readableListening=this.listenerCount("readable")>0,!1!==ce.flowing&&this.resume()):"readable"===de&&!ce.endEmitted&&!ce.readableListening&&(ce.readableListening=ce.needReadable=!0,ce.flowing=!1,ce.emittedReadable=!1,M("on readable",ce.length,ce.reading),ce.length?d(this):ce.reading||C.nextTick(Se,this)),re},a.prototype.removeListener=function(de,se){var re=v.prototype.removeListener.call(this,de,se);return"readable"===de&&C.nextTick(le,this),re},a.prototype.removeAllListeners=function(de){var se=v.prototype.removeAllListeners.apply(this,arguments);return("readable"===de||void 0===de)&&C.nextTick(le,this),se},a.prototype.resume=function(){var de=this._readableState;return de.flowing||(M("resume"),de.flowing=!de.readableListening,function Oe(de,se){se.resumeScheduled||(se.resumeScheduled=!0,C.nextTick(Ve,de,se))}(this,de)),de.paused=!1,this},a.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},a.prototype.wrap=function(de){var se=this,re=this._readableState,ce=!1;for(var ue in de.on("end",function(){if(M("wrapped end"),re.decoder&&!re.ended){var Ee=re.decoder.end();Ee&&Ee.length&&se.push(Ee)}se.push(null)}),de.on("data",function(Ee){M("wrapped data"),re.decoder&&(Ee=re.decoder.write(Ee)),re.objectMode&&null==Ee||!(re.objectMode||Ee&&Ee.length)||se.push(Ee)||(ce=!0,de.pause())}),de)void 0===this[ue]&&"function"==typeof de[ue]&&(this[ue]=function(Be){return function(){return de[Be].apply(de,arguments)}}(ue));for(var ge=0;ge<pe.length;ge++)de.on(pe[ge],this.emit.bind(this,pe[ge]));return this._read=function(Ee){M("wrapped _read",Ee),ce&&(ce=!1,de.resume())},this},"function"==typeof Symbol&&(a.prototype[Symbol.asyncIterator]=function(){return void 0===oe&&(oe=I(6320)),oe(this)}),Object.defineProperty(a.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(a.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(a.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(se){this._readableState&&(this._readableState.flowing=se)}}),a._fromList=ye,Object.defineProperty(a.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(a.from=function(de,se){return void 0===ne&&(ne=I(87654)),ne(a,de,se)})},2909:(xe,O,I)=>{"use strict";xe.exports=T;var C=I(26113).F,H=C.ERR_METHOD_NOT_IMPLEMENTED,N=C.ERR_MULTIPLE_CALLBACK,G=C.ERR_TRANSFORM_ALREADY_TRANSFORMING,v=C.ERR_TRANSFORM_WITH_LENGTH_0,B=I(74075);function _(M,F){var k=this._transformState;k.transforming=!1;var j=k.writecb;if(null===j)return this.emit("error",new N);k.writechunk=null,k.writecb=null,null!=F&&this.push(F),j(M);var Z=this._readableState;Z.reading=!1,(Z.needReadable||Z.length<Z.highWaterMark)&&this._read(Z.highWaterMark)}function T(M){if(!(this instanceof T))return new T(M);B.call(this,M),this._transformState={afterTransform:_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,M&&("function"==typeof M.transform&&(this._transform=M.transform),"function"==typeof M.flush&&(this._flush=M.flush)),this.on("prefinish",D)}function D(){var M=this;"function"!=typeof this._flush||this._readableState.destroyed?$(this,null,null):this._flush(function(F,k){$(M,F,k)})}function $(M,F,k){if(F)return M.emit("error",F);if(null!=k&&M.push(k),M._writableState.length)throw new v;if(M._transformState.transforming)throw new G;return M.push(null)}I(71993)(T,B),T.prototype.push=function(M,F){return this._transformState.needTransform=!1,B.prototype.push.call(this,M,F)},T.prototype._transform=function(M,F,k){k(new H("_transform()"))},T.prototype._write=function(M,F,k){var j=this._transformState;if(j.writecb=k,j.writechunk=M,j.writeencoding=F,!j.transforming){var Z=this._readableState;(j.needTransform||Z.needReadable||Z.length<Z.highWaterMark)&&this._read(Z.highWaterMark)}},T.prototype._read=function(M){var F=this._transformState;null===F.writechunk||F.transforming?F.needTransform=!0:(F.transforming=!0,this._transform(F.writechunk,F.writeencoding,F.afterTransform))},T.prototype._destroy=function(M,F){B.prototype._destroy.call(this,M,function(k){F(k)})}},47849:(xe,O,I)=>{"use strict";var G,C=I(40573);function N(Re){var ye=this;this.next=null,this.entry=null,this.finish=function(){!function Ve(Re,ye,ke){var ve=Re.entry;for(Re.entry=null;ve;){var _e=ve.callback;ye.pendingcb--,_e(ke),ve=ve.next}ye.corkedRequestsFree.next=Re}(ye,Re)}}xe.exports=E,E.WritableState=pe;var Ie,v={deprecate:I(3398)},B=I(18342),_=I(83838).Buffer,T=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},M=I(21509),k=I(42934).getHighWaterMark,j=I(26113).F,Z=j.ERR_INVALID_ARG_TYPE,q=j.ERR_METHOD_NOT_IMPLEMENTED,W=j.ERR_MULTIPLE_CALLBACK,K=j.ERR_STREAM_CANNOT_PIPE,J=j.ERR_STREAM_DESTROYED,X=j.ERR_STREAM_NULL_VALUES,Q=j.ERR_STREAM_WRITE_AFTER_END,oe=j.ERR_UNKNOWN_ENCODING,ne=M.errorOrDestroy;function me(){}function pe(Re,ye,ke){G=G||I(74075),"boolean"!=typeof ke&&(ke=ye instanceof G),this.objectMode=!!(Re=Re||{}).objectMode,ke&&(this.objectMode=this.objectMode||!!Re.writableObjectMode),this.highWaterMark=k(this,Re,"writableHighWaterMark",ke),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Re.decodeStrings),this.defaultEncoding=Re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(_e){!function m(Re,ye){var ke=Re._writableState,ve=ke.sync,_e=ke.writecb;if("function"!=typeof _e)throw new W;if(function P(Re){Re.writing=!1,Re.writecb=null,Re.length-=Re.writelen,Re.writelen=0}(ke),ye)!function x(Re,ye,ke,ve,_e){--ye.pendingcb,ke?(C.nextTick(_e,ve),C.nextTick(Se,Re,ye),Re._writableState.errorEmitted=!0,ne(Re,ve)):(_e(ve),Re._writableState.errorEmitted=!0,ne(Re,ve),Se(Re,ye))}(Re,ke,ve,ye,_e);else{var de=L(ke)||Re.destroyed;!de&&!ke.corked&&!ke.bufferProcessing&&ke.bufferedRequest&&V(Re,ke),ve?C.nextTick(d,Re,ke,de,_e):d(Re,ke,de,_e)}}(ye,_e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==Re.emitClose,this.autoDestroy=!!Re.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new N(this)}function E(Re){var ye=this instanceof(G=G||I(74075));if(!ye&&!Ie.call(E,this))return new E(Re);this._writableState=new pe(Re,this,ye),this.writable=!0,Re&&("function"==typeof Re.write&&(this._write=Re.write),"function"==typeof Re.writev&&(this._writev=Re.writev),"function"==typeof Re.destroy&&(this._destroy=Re.destroy),"function"==typeof Re.final&&(this._final=Re.final)),B.call(this)}function g(Re,ye,ke,ve,_e,de,se){ye.writelen=ve,ye.writecb=se,ye.writing=!0,ye.sync=!0,ye.destroyed?ye.onwrite(new J("write")):ke?Re._writev(_e,ye.onwrite):Re._write(_e,de,ye.onwrite),ye.sync=!1}function d(Re,ye,ke,ve){ke||function p(Re,ye){0===ye.length&&ye.needDrain&&(ye.needDrain=!1,Re.emit("drain"))}(Re,ye),ye.pendingcb--,ve(),Se(Re,ye)}function V(Re,ye){ye.bufferProcessing=!0;var ke=ye.bufferedRequest;if(Re._writev&&ke&&ke.next){var _e=new Array(ye.bufferedRequestCount),de=ye.corkedRequestsFree;de.entry=ke;for(var se=0,re=!0;ke;)_e[se]=ke,ke.isBuf||(re=!1),ke=ke.next,se+=1;_e.allBuffers=re,g(Re,ye,!0,ye.length,_e,"",de.finish),ye.pendingcb++,ye.lastBufferedRequest=null,de.next?(ye.corkedRequestsFree=de.next,de.next=null):ye.corkedRequestsFree=new N(ye),ye.bufferedRequestCount=0}else{for(;ke;){var ce=ke.chunk;if(g(Re,ye,!1,ye.objectMode?1:ce.length,ce,ke.encoding,ke.callback),ke=ke.next,ye.bufferedRequestCount--,ye.writing)break}null===ke&&(ye.lastBufferedRequest=null)}ye.bufferedRequest=ke,ye.bufferProcessing=!1}function L(Re){return Re.ending&&0===Re.length&&null===Re.bufferedRequest&&!Re.finished&&!Re.writing}function Y(Re,ye){Re._final(function(ke){ye.pendingcb--,ke&&ne(Re,ke),ye.prefinished=!0,Re.emit("prefinish"),Se(Re,ye)})}function Se(Re,ye){var ke=L(ye);if(ke&&(function le(Re,ye){!ye.prefinished&&!ye.finalCalled&&("function"!=typeof Re._final||ye.destroyed?(ye.prefinished=!0,Re.emit("prefinish")):(ye.pendingcb++,ye.finalCalled=!0,C.nextTick(Y,Re,ye)))}(Re,ye),0===ye.pendingcb&&(ye.finished=!0,Re.emit("finish"),ye.autoDestroy))){var ve=Re._readableState;(!ve||ve.autoDestroy&&ve.endEmitted)&&Re.destroy()}return ke}I(71993)(E,B),pe.prototype.getBuffer=function(){for(var ye=this.bufferedRequest,ke=[];ye;)ke.push(ye),ye=ye.next;return ke},function(){try{Object.defineProperty(pe.prototype,"buffer",{get:v.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Ie=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(ye){return!!Ie.call(this,ye)||this===E&&ye&&ye._writableState instanceof pe}})):Ie=function(ye){return ye instanceof this},E.prototype.pipe=function(){ne(this,new K)},E.prototype.write=function(Re,ye,ke){var ve=this._writableState,_e=!1,de=!ve.objectMode&&function $(Re){return _.isBuffer(Re)||Re instanceof T}(Re);return de&&!_.isBuffer(Re)&&(Re=function D(Re){return _.from(Re)}(Re)),"function"==typeof ye&&(ke=ye,ye=null),de?ye="buffer":ye||(ye=ve.defaultEncoding),"function"!=typeof ke&&(ke=me),ve.ending?function a(Re,ye){var ke=new Q;ne(Re,ke),C.nextTick(ye,ke)}(this,ke):(de||function f(Re,ye,ke,ve){var _e;return null===ke?_e=new X:"string"!=typeof ke&&!ye.objectMode&&(_e=new Z("chunk",["string","Buffer"],ke)),!_e||(ne(Re,_e),C.nextTick(ve,_e),!1)}(this,ve,Re,ke))&&(ve.pendingcb++,_e=function h(Re,ye,ke,ve,_e,de){if(!ke){var se=function l(Re,ye,ke){return!Re.objectMode&&!1!==Re.decodeStrings&&"string"==typeof ye&&(ye=_.from(ye,ke)),ye}(ye,ve,_e);ve!==se&&(ke=!0,_e="buffer",ve=se)}var re=ye.objectMode?1:ve.length;ye.length+=re;var ce=ye.length<ye.highWaterMark;if(ce||(ye.needDrain=!0),ye.writing||ye.corked){var ue=ye.lastBufferedRequest;ye.lastBufferedRequest={chunk:ve,encoding:_e,isBuf:ke,callback:de,next:null},ue?ue.next=ye.lastBufferedRequest:ye.bufferedRequest=ye.lastBufferedRequest,ye.bufferedRequestCount+=1}else g(Re,ye,!1,re,ve,_e,de);return ce}(this,ve,de,Re,ye,ke)),_e},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var Re=this._writableState;Re.corked&&(Re.corked--,!Re.writing&&!Re.corked&&!Re.bufferProcessing&&Re.bufferedRequest&&V(this,Re))},E.prototype.setDefaultEncoding=function(ye){if("string"==typeof ye&&(ye=ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ye+"").toLowerCase())>-1))throw new oe(ye);return this._writableState.defaultEncoding=ye,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(Re,ye,ke){ke(new q("_write()"))},E.prototype._writev=null,E.prototype.end=function(Re,ye,ke){var ve=this._writableState;return"function"==typeof Re?(ke=Re,Re=null,ye=null):"function"==typeof ye&&(ke=ye,ye=null),null!=Re&&this.write(Re,ye),ve.corked&&(ve.corked=1,this.uncork()),ve.ending||function Oe(Re,ye,ke){ye.ending=!0,Se(Re,ye),ke&&(ye.finished?C.nextTick(ke):Re.once("finish",ke)),ye.ended=!0,Re.writable=!1}(this,ve,ke),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ye){this._writableState&&(this._writableState.destroyed=ye)}}),E.prototype.destroy=M.destroy,E.prototype._undestroy=M.undestroy,E.prototype._destroy=function(Re,ye){ye(Re)}},6320:(xe,O,I)=>{"use strict";var H,C=I(40573);function N(Q,oe,ne){return oe=function G(Q){var oe=function v(Q,oe){if("object"!=typeof Q||null===Q)return Q;var ne=Q[Symbol.toPrimitive];if(void 0!==ne){var me=ne.call(Q,oe||"default");if("object"!=typeof me)return me;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===oe?String:Number)(Q)}(Q,"string");return"symbol"==typeof oe?oe:String(oe)}(oe),oe in Q?Object.defineProperty(Q,oe,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Q[oe]=ne,Q}var B=I(33139),_=Symbol("lastResolve"),T=Symbol("lastReject"),D=Symbol("error"),$=Symbol("ended"),M=Symbol("lastPromise"),F=Symbol("handlePromise"),k=Symbol("stream");function j(Q,oe){return{value:Q,done:oe}}function Z(Q){var oe=Q[_];if(null!==oe){var ne=Q[k].read();null!==ne&&(Q[M]=null,Q[_]=null,Q[T]=null,oe(j(ne,!1)))}}function q(Q){C.nextTick(Z,Q)}var K=Object.getPrototypeOf(function(){}),J=Object.setPrototypeOf((N(H={get stream(){return this[k]},next:function(){var oe=this,ne=this[D];if(null!==ne)return Promise.reject(ne);if(this[$])return Promise.resolve(j(void 0,!0));if(this[k].destroyed)return new Promise(function(E,a){C.nextTick(function(){oe[D]?a(oe[D]):E(j(void 0,!0))})});var pe,me=this[M];if(me)pe=new Promise(function W(Q,oe){return function(ne,me){Q.then(function(){oe[$]?ne(j(void 0,!0)):oe[F](ne,me)},me)}}(me,this));else{var Ie=this[k].read();if(null!==Ie)return Promise.resolve(j(Ie,!1));pe=new Promise(this[F])}return this[M]=pe,pe}},Symbol.asyncIterator,function(){return this}),N(H,"return",function(){var oe=this;return new Promise(function(ne,me){oe[k].destroy(null,function(pe){pe?me(pe):ne(j(void 0,!0))})})}),H),K);xe.exports=function(oe){var ne,me=Object.create(J,(N(ne={},k,{value:oe,writable:!0}),N(ne,_,{value:null,writable:!0}),N(ne,T,{value:null,writable:!0}),N(ne,D,{value:null,writable:!0}),N(ne,$,{value:oe._readableState.endEmitted,writable:!0}),N(ne,F,{value:function(Ie,E){var a=me[k].read();a?(me[M]=null,me[_]=null,me[T]=null,Ie(j(a,!1))):(me[_]=Ie,me[T]=E)},writable:!0}),ne));return me[M]=null,B(oe,function(pe){if(pe&&"ERR_STREAM_PREMATURE_CLOSE"!==pe.code){var Ie=me[T];return null!==Ie&&(me[M]=null,me[_]=null,me[T]=null,Ie(pe)),void(me[D]=pe)}var E=me[_];null!==E&&(me[M]=null,me[_]=null,me[T]=null,E(j(void 0,!0))),me[$]=!0}),oe.on("readable",q.bind(null,me)),me}},19588:(xe,O,I)=>{"use strict";function C(Z,q){var W=Object.keys(Z);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(Z);q&&(K=K.filter(function(J){return Object.getOwnPropertyDescriptor(Z,J).enumerable})),W.push.apply(W,K)}return W}function H(Z){for(var q=1;q<arguments.length;q++){var W=null!=arguments[q]?arguments[q]:{};q%2?C(Object(W),!0).forEach(function(K){N(Z,K,W[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(W)):C(Object(W)).forEach(function(K){Object.defineProperty(Z,K,Object.getOwnPropertyDescriptor(W,K))})}return Z}function N(Z,q,W){return(q=_(q))in Z?Object.defineProperty(Z,q,{value:W,enumerable:!0,configurable:!0,writable:!0}):Z[q]=W,Z}function v(Z,q){for(var W=0;W<q.length;W++){var K=q[W];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(Z,_(K.key),K)}}function _(Z){var q=function T(Z,q){if("object"!=typeof Z||null===Z)return Z;var W=Z[Symbol.toPrimitive];if(void 0!==W){var K=W.call(Z,q||"default");if("object"!=typeof K)return K;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===q?String:Number)(Z)}(Z,"string");return"symbol"==typeof q?q:String(q)}var $=I(83838).Buffer,F=I(15340).inspect,k=F&&F.custom||"inspect";function j(Z,q,W){$.prototype.copy.call(Z,q,W)}xe.exports=function(){function Z(){(function G(Z,q){if(!(Z instanceof q))throw new TypeError("Cannot call a class as a function")})(this,Z),this.head=null,this.tail=null,this.length=0}return function B(Z,q,W){q&&v(Z.prototype,q),W&&v(Z,W),Object.defineProperty(Z,"prototype",{writable:!1})}(Z,[{key:"push",value:function(W){var K={data:W,next:null};this.length>0?this.tail.next=K:this.head=K,this.tail=K,++this.length}},{key:"unshift",value:function(W){var K={data:W,next:this.head};0===this.length&&(this.tail=K),this.head=K,++this.length}},{key:"shift",value:function(){if(0!==this.length){var W=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,W}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(W){if(0===this.length)return"";for(var K=this.head,J=""+K.data;K=K.next;)J+=W+K.data;return J}},{key:"concat",value:function(W){if(0===this.length)return $.alloc(0);for(var K=$.allocUnsafe(W>>>0),J=this.head,X=0;J;)j(J.data,K,X),X+=J.data.length,J=J.next;return K}},{key:"consume",value:function(W,K){var J;return W<this.head.data.length?(J=this.head.data.slice(0,W),this.head.data=this.head.data.slice(W)):J=W===this.head.data.length?this.shift():K?this._getString(W):this._getBuffer(W),J}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(W){var K=this.head,J=1,X=K.data;for(W-=X.length;K=K.next;){var Q=K.data,oe=W>Q.length?Q.length:W;if(X+=oe===Q.length?Q:Q.slice(0,W),0==(W-=oe)){oe===Q.length?(++J,this.head=K.next?K.next:this.tail=null):(this.head=K,K.data=Q.slice(oe));break}++J}return this.length-=J,X}},{key:"_getBuffer",value:function(W){var K=$.allocUnsafe(W),J=this.head,X=1;for(J.data.copy(K),W-=J.data.length;J=J.next;){var Q=J.data,oe=W>Q.length?Q.length:W;if(Q.copy(K,K.length-W,0,oe),0==(W-=oe)){oe===Q.length?(++X,this.head=J.next?J.next:this.tail=null):(this.head=J,J.data=Q.slice(oe));break}++X}return this.length-=X,K}},{key:k,value:function(W,K){return F(this,H(H({},K),{},{depth:0,customInspect:!1}))}}]),Z}()},21509:(xe,O,I)=>{"use strict";var C=I(40573);function N(T,D){B(T,D),G(T)}function G(T){T._writableState&&!T._writableState.emitClose||T._readableState&&!T._readableState.emitClose||T.emit("close")}function B(T,D){T.emit("error",D)}xe.exports={destroy:function H(T,D){var $=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(D?D(T):T&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,C.nextTick(B,this,T)):C.nextTick(B,this,T)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(T||null,function(k){!D&&k?$._writableState?$._writableState.errorEmitted?C.nextTick(G,$):($._writableState.errorEmitted=!0,C.nextTick(N,$,k)):C.nextTick(N,$,k):D?(C.nextTick(G,$),D(k)):C.nextTick(G,$)}),this)},undestroy:function v(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function _(T,D){var $=T._readableState,M=T._writableState;$&&$.autoDestroy||M&&M.autoDestroy?T.destroy(D):T.emit("error",D)}}},33139:(xe,O,I)=>{"use strict";var C=I(26113).F.ERR_STREAM_PREMATURE_CLOSE;function N(){}xe.exports=function v(B,_,T){if("function"==typeof _)return v(B,null,_);_||(_={}),T=function H(B){var _=!1;return function(){if(!_){_=!0;for(var T=arguments.length,D=new Array(T),$=0;$<T;$++)D[$]=arguments[$];B.apply(this,D)}}}(T||N);var D=_.readable||!1!==_.readable&&B.readable,$=_.writable||!1!==_.writable&&B.writable,M=function(){B.writable||k()},F=B._writableState&&B._writableState.finished,k=function(){$=!1,F=!0,D||T.call(B)},j=B._readableState&&B._readableState.endEmitted,Z=function(){D=!1,j=!0,$||T.call(B)},q=function(X){T.call(B,X)},W=function(){var X;return D&&!j?((!B._readableState||!B._readableState.ended)&&(X=new C),T.call(B,X)):$&&!F?((!B._writableState||!B._writableState.ended)&&(X=new C),T.call(B,X)):void 0},K=function(){B.req.on("finish",k)};return function G(B){return B.setHeader&&"function"==typeof B.abort}(B)?(B.on("complete",k),B.on("abort",W),B.req?K():B.on("request",K)):$&&!B._writableState&&(B.on("end",M),B.on("close",M)),B.on("end",Z),B.on("finish",k),!1!==_.error&&B.on("error",q),B.on("close",W),function(){B.removeListener("complete",k),B.removeListener("abort",W),B.removeListener("request",K),B.req&&B.req.removeListener("finish",k),B.removeListener("end",M),B.removeListener("close",M),B.removeListener("finish",k),B.removeListener("end",Z),B.removeListener("error",q),B.removeListener("close",W)}}},87654:xe=>{xe.exports=function(){throw new Error("Readable.from is not available in the browser")}},96249:(xe,O,I)=>{"use strict";var C,N=I(26113).F,G=N.ERR_MISSING_ARGS,v=N.ERR_STREAM_DESTROYED;function B(k){if(k)throw k}function D(k){k()}function $(k,j){return k.pipe(j)}xe.exports=function F(){for(var k=arguments.length,j=new Array(k),Z=0;Z<k;Z++)j[Z]=arguments[Z];var q=function M(k){return k.length&&"function"==typeof k[k.length-1]?k.pop():B}(j);if(Array.isArray(j[0])&&(j=j[0]),j.length<2)throw new G("streams");var W,K=j.map(function(J,X){var Q=X<j.length-1;return function T(k,j,Z,q){q=function H(k){var j=!1;return function(){j||(j=!0,k.apply(void 0,arguments))}}(q);var W=!1;k.on("close",function(){W=!0}),void 0===C&&(C=I(33139)),C(k,{readable:j,writable:Z},function(J){if(J)return q(J);W=!0,q()});var K=!1;return function(J){if(!W&&!K){if(K=!0,function _(k){return k.setHeader&&"function"==typeof k.abort}(k))return k.abort();if("function"==typeof k.destroy)return k.destroy();q(J||new v("pipe"))}}}(J,Q,X>0,function(ne){W||(W=ne),ne&&K.forEach(D),!Q&&(K.forEach(D),q(W))})});return j.reduce($)}},42934:(xe,O,I)=>{"use strict";var C=I(26113).F.ERR_INVALID_OPT_VALUE;xe.exports={getHighWaterMark:function N(G,v,B,_){var T=function H(G,v,B){return null!=G.highWaterMark?G.highWaterMark:v?G[B]:null}(v,_,B);if(null!=T){if(!isFinite(T)||Math.floor(T)!==T||T<0)throw new C(_?B:"highWaterMark",T);return Math.floor(T)}return G.objectMode?16:16384}}},18342:(xe,O,I)=>{xe.exports=I(44356).EventEmitter},5942:(xe,O,I)=>{(O=xe.exports=I(19609)).Stream=O,O.Readable=O,O.Writable=I(47849),O.Duplex=I(74075),O.Transform=I(2909),O.PassThrough=I(18823),O.finished=I(33139),O.pipeline=I(96249)},85493:(xe,O,I)=>{"use strict";var H=I(29293).default;O.s=void 0;const N=I(5942);O.s=class G extends N.Readable{constructor(B){super(),this.bytesRead=0,this.released=!1,this.reader=B.getReader()}_read(){var B=this;return H(function*(){if(B.released)return void B.push(null);B.pendingRead=B.reader.read();const _=yield B.pendingRead;delete B.pendingRead,_.done||B.released?B.push(null):(B.bytesRead+=_.value.length,B.push(_.value))})()}waitForReadToComplete(){var B=this;return H(function*(){B.pendingRead&&(yield B.pendingRead)})()}close(){var B=this;return H(function*(){yield B.syncAndRelease()})()}syncAndRelease(){var B=this;return H(function*(){B.released=!0,yield B.waitForReadToComplete(),yield B.reader.releaseLock()})()}}},36636:(xe,O,I)=>{"use strict";var C=I(83838).Buffer,H=I(71993),N=I(13686),G=new Array(16),v=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],B=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],T=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],D=[0,1518500249,1859775393,2400959708,2840853838],$=[1352829926,1548603684,1836072691,2053994217,0];function M(){N.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function F(K,J){return K<<J|K>>>32-J}function k(K,J,X,Q,oe,ne,me,pe){return F(K+(J^X^Q)+ne+me|0,pe)+oe|0}function j(K,J,X,Q,oe,ne,me,pe){return F(K+(J&X|~J&Q)+ne+me|0,pe)+oe|0}function Z(K,J,X,Q,oe,ne,me,pe){return F(K+((J|~X)^Q)+ne+me|0,pe)+oe|0}function q(K,J,X,Q,oe,ne,me,pe){return F(K+(J&Q|X&~Q)+ne+me|0,pe)+oe|0}function W(K,J,X,Q,oe,ne,me,pe){return F(K+(J^(X|~Q))+ne+me|0,pe)+oe|0}H(M,N),M.prototype._update=function(){for(var K=G,J=0;J<16;++J)K[J]=this._block.readInt32LE(4*J);for(var X=0|this._a,Q=0|this._b,oe=0|this._c,ne=0|this._d,me=0|this._e,pe=0|this._a,Ie=0|this._b,E=0|this._c,a=0|this._d,f=0|this._e,l=0;l<80;l+=1){var h,g;l<16?(h=k(X,Q,oe,ne,me,K[v[l]],D[0],_[l]),g=W(pe,Ie,E,a,f,K[B[l]],$[0],T[l])):l<32?(h=j(X,Q,oe,ne,me,K[v[l]],D[1],_[l]),g=q(pe,Ie,E,a,f,K[B[l]],$[1],T[l])):l<48?(h=Z(X,Q,oe,ne,me,K[v[l]],D[2],_[l]),g=Z(pe,Ie,E,a,f,K[B[l]],$[2],T[l])):l<64?(h=q(X,Q,oe,ne,me,K[v[l]],D[3],_[l]),g=j(pe,Ie,E,a,f,K[B[l]],$[3],T[l])):(h=W(X,Q,oe,ne,me,K[v[l]],D[4],_[l]),g=k(pe,Ie,E,a,f,K[B[l]],$[4],T[l])),X=me,me=ne,ne=F(oe,10),oe=Q,Q=h,pe=f,f=a,a=F(E,10),E=Ie,Ie=g}var x=this._b+oe+a|0;this._b=this._c+ne+f|0,this._c=this._d+me+pe|0,this._d=this._e+X+Ie|0,this._e=this._a+Q+E|0,this._a=x},M.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var K=C.alloc?C.alloc(20):new C(20);return K.writeInt32LE(this._a,0),K.writeInt32LE(this._b,4),K.writeInt32LE(this._c,8),K.writeInt32LE(this._d,12),K.writeInt32LE(this._e,16),K},xe.exports=M},81725:(xe,O,I)=>{xe.exports=function H(N,G,v){if("number"!=typeof G)throw new Error("second argument must be a Number");let B,_,T,D,$,F,M=!0;function k(Z){function q(){v&&v(Z,B),v=null}M?C(q):q()}function j(Z,q,W){if(B[Z]=W,q&&($=!0),0==--T||q)k(q);else if(!$&&F<_){let K;D?(K=D[F],F+=1,N[K](function(J,X){j(K,J,X)})):(K=F,F+=1,N[K](function(J,X){j(K,J,X)}))}}Array.isArray(N)?(B=[],T=_=N.length):(D=Object.keys(N),B={},T=_=D.length),F=G,T?D?D.some(function(Z,q){return N[Z](function(W,K){j(Z,W,K)}),q===G-1}):N.some(function(Z,q){return Z(function(W,K){j(q,W,K)}),q===G-1}):k(null),M=!1};const C=I(24515)},27054:(xe,O,I)=>{var C=I(83838),H=C.Buffer;function N(v,B){for(var _ in v)B[_]=v[_]}function G(v,B,_){return H(v,B,_)}H.from&&H.alloc&&H.allocUnsafe&&H.allocUnsafeSlow?xe.exports=C:(N(C,O),O.Buffer=G),G.prototype=Object.create(H.prototype),N(H,G),G.from=function(v,B,_){if("number"==typeof v)throw new TypeError("Argument must not be a number");return H(v,B,_)},G.alloc=function(v,B,_){if("number"!=typeof v)throw new TypeError("Argument must be a number");var T=H(v);return void 0!==B?"string"==typeof _?T.fill(B,_):T.fill(B):T.fill(0),T},G.allocUnsafe=function(v){if("number"!=typeof v)throw new TypeError("Argument must be a number");return H(v)},G.allocUnsafeSlow=function(v){if("number"!=typeof v)throw new TypeError("Argument must be a number");return C.SlowBuffer(v)}},70463:(xe,O,I)=>{var C=I(27054).Buffer;function H(N,G){this._block=C.alloc(N),this._finalSize=G,this._blockSize=N,this._len=0}H.prototype.update=function(N,G){"string"==typeof N&&(N=C.from(N,G=G||"utf8"));for(var v=this._block,B=this._blockSize,_=N.length,T=this._len,D=0;D<_;){for(var $=T%B,M=Math.min(_-D,B-$),F=0;F<M;F++)v[$+F]=N[D+F];D+=M,(T+=M)%B==0&&this._update(v)}return this._len+=_,this},H.prototype.digest=function(N){var G=this._len%this._blockSize;this._block[G]=128,this._block.fill(0,G+1),G>=this._finalSize&&(this._update(this._block),this._block.fill(0));var v=8*this._len;if(v<=4294967295)this._block.writeUInt32BE(v,this._blockSize-4);else{var B=(4294967295&v)>>>0;this._block.writeUInt32BE((v-B)/4294967296,this._blockSize-8),this._block.writeUInt32BE(B,this._blockSize-4)}this._update(this._block);var T=this._hash();return N?T.toString(N):T},H.prototype._update=function(){throw new Error("_update must be implemented by subclass")},xe.exports=H},25443:(xe,O,I)=>{var C=xe.exports=function(N){N=N.toLowerCase();var G=C[N];if(!G)throw new Error(N+" is not supported (we accept pull requests)");return new G};C.sha=I(48585),C.sha1=I(21270),C.sha224=I(42709),C.sha256=I(32148),C.sha384=I(51856),C.sha512=I(3121)},48585:(xe,O,I)=>{var C=I(71993),H=I(70463),N=I(27054).Buffer,G=[1518500249,1859775393,-1894007588,-899497514],v=new Array(80);function B(){this.init(),this._w=v,H.call(this,64,56)}function _($){return $<<5|$>>>27}function T($){return $<<30|$>>>2}function D($,M,F,k){return 0===$?M&F|~M&k:2===$?M&F|M&k|F&k:M^F^k}C(B,H),B.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},B.prototype._update=function($){for(var M=this._w,F=0|this._a,k=0|this._b,j=0|this._c,Z=0|this._d,q=0|this._e,W=0;W<16;++W)M[W]=$.readInt32BE(4*W);for(;W<80;++W)M[W]=M[W-3]^M[W-8]^M[W-14]^M[W-16];for(var K=0;K<80;++K){var J=~~(K/20),X=_(F)+D(J,k,j,Z)+q+M[K]+G[J]|0;q=Z,Z=j,j=T(k),k=F,F=X}this._a=F+this._a|0,this._b=k+this._b|0,this._c=j+this._c|0,this._d=Z+this._d|0,this._e=q+this._e|0},B.prototype._hash=function(){var $=N.allocUnsafe(20);return $.writeInt32BE(0|this._a,0),$.writeInt32BE(0|this._b,4),$.writeInt32BE(0|this._c,8),$.writeInt32BE(0|this._d,12),$.writeInt32BE(0|this._e,16),$},xe.exports=B},21270:(xe,O,I)=>{var C=I(71993),H=I(70463),N=I(27054).Buffer,G=[1518500249,1859775393,-1894007588,-899497514],v=new Array(80);function B(){this.init(),this._w=v,H.call(this,64,56)}function _(M){return M<<1|M>>>31}function T(M){return M<<5|M>>>27}function D(M){return M<<30|M>>>2}function $(M,F,k,j){return 0===M?F&k|~F&j:2===M?F&k|F&j|k&j:F^k^j}C(B,H),B.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},B.prototype._update=function(M){for(var F=this._w,k=0|this._a,j=0|this._b,Z=0|this._c,q=0|this._d,W=0|this._e,K=0;K<16;++K)F[K]=M.readInt32BE(4*K);for(;K<80;++K)F[K]=_(F[K-3]^F[K-8]^F[K-14]^F[K-16]);for(var J=0;J<80;++J){var X=~~(J/20),Q=T(k)+$(X,j,Z,q)+W+F[J]+G[X]|0;W=q,q=Z,Z=D(j),j=k,k=Q}this._a=k+this._a|0,this._b=j+this._b|0,this._c=Z+this._c|0,this._d=q+this._d|0,this._e=W+this._e|0},B.prototype._hash=function(){var M=N.allocUnsafe(20);return M.writeInt32BE(0|this._a,0),M.writeInt32BE(0|this._b,4),M.writeInt32BE(0|this._c,8),M.writeInt32BE(0|this._d,12),M.writeInt32BE(0|this._e,16),M},xe.exports=B},42709:(xe,O,I)=>{var C=I(71993),H=I(32148),N=I(70463),G=I(27054).Buffer,v=new Array(64);function B(){this.init(),this._w=v,N.call(this,64,56)}C(B,H),B.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},B.prototype._hash=function(){var _=G.allocUnsafe(28);return _.writeInt32BE(this._a,0),_.writeInt32BE(this._b,4),_.writeInt32BE(this._c,8),_.writeInt32BE(this._d,12),_.writeInt32BE(this._e,16),_.writeInt32BE(this._f,20),_.writeInt32BE(this._g,24),_},xe.exports=B},32148:(xe,O,I)=>{var C=I(71993),H=I(70463),N=I(27054).Buffer,G=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],v=new Array(64);function B(){this.init(),this._w=v,H.call(this,64,56)}function _(k,j,Z){return Z^k&(j^Z)}function T(k,j,Z){return k&j|Z&(k|j)}function D(k){return(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10)}function $(k){return(k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7)}function M(k){return(k>>>7|k<<25)^(k>>>18|k<<14)^k>>>3}function F(k){return(k>>>17|k<<15)^(k>>>19|k<<13)^k>>>10}C(B,H),B.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},B.prototype._update=function(k){for(var j=this._w,Z=0|this._a,q=0|this._b,W=0|this._c,K=0|this._d,J=0|this._e,X=0|this._f,Q=0|this._g,oe=0|this._h,ne=0;ne<16;++ne)j[ne]=k.readInt32BE(4*ne);for(;ne<64;++ne)j[ne]=F(j[ne-2])+j[ne-7]+M(j[ne-15])+j[ne-16]|0;for(var me=0;me<64;++me){var pe=oe+$(J)+_(J,X,Q)+G[me]+j[me]|0,Ie=D(Z)+T(Z,q,W)|0;oe=Q,Q=X,X=J,J=K+pe|0,K=W,W=q,q=Z,Z=pe+Ie|0}this._a=Z+this._a|0,this._b=q+this._b|0,this._c=W+this._c|0,this._d=K+this._d|0,this._e=J+this._e|0,this._f=X+this._f|0,this._g=Q+this._g|0,this._h=oe+this._h|0},B.prototype._hash=function(){var k=N.allocUnsafe(32);return k.writeInt32BE(this._a,0),k.writeInt32BE(this._b,4),k.writeInt32BE(this._c,8),k.writeInt32BE(this._d,12),k.writeInt32BE(this._e,16),k.writeInt32BE(this._f,20),k.writeInt32BE(this._g,24),k.writeInt32BE(this._h,28),k},xe.exports=B},51856:(xe,O,I)=>{var C=I(71993),H=I(3121),N=I(70463),G=I(27054).Buffer,v=new Array(160);function B(){this.init(),this._w=v,N.call(this,128,112)}C(B,H),B.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},B.prototype._hash=function(){var _=G.allocUnsafe(48);function T(D,$,M){_.writeInt32BE(D,M),_.writeInt32BE($,M+4)}return T(this._ah,this._al,0),T(this._bh,this._bl,8),T(this._ch,this._cl,16),T(this._dh,this._dl,24),T(this._eh,this._el,32),T(this._fh,this._fl,40),_},xe.exports=B},3121:(xe,O,I)=>{var C=I(71993),H=I(70463),N=I(27054).Buffer,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],v=new Array(160);function B(){this.init(),this._w=v,H.call(this,128,112)}function _(q,W,K){return K^q&(W^K)}function T(q,W,K){return q&W|K&(q|W)}function D(q,W){return(q>>>28|W<<4)^(W>>>2|q<<30)^(W>>>7|q<<25)}function $(q,W){return(q>>>14|W<<18)^(q>>>18|W<<14)^(W>>>9|q<<23)}function M(q,W){return(q>>>1|W<<31)^(q>>>8|W<<24)^q>>>7}function F(q,W){return(q>>>1|W<<31)^(q>>>8|W<<24)^(q>>>7|W<<25)}function k(q,W){return(q>>>19|W<<13)^(W>>>29|q<<3)^q>>>6}function j(q,W){return(q>>>19|W<<13)^(W>>>29|q<<3)^(q>>>6|W<<26)}function Z(q,W){return q>>>0<W>>>0?1:0}C(B,H),B.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},B.prototype._update=function(q){for(var W=this._w,K=0|this._ah,J=0|this._bh,X=0|this._ch,Q=0|this._dh,oe=0|this._eh,ne=0|this._fh,me=0|this._gh,pe=0|this._hh,Ie=0|this._al,E=0|this._bl,a=0|this._cl,f=0|this._dl,l=0|this._el,h=0|this._fl,g=0|this._gl,x=0|this._hl,P=0;P<32;P+=2)W[P]=q.readInt32BE(4*P),W[P+1]=q.readInt32BE(4*P+4);for(;P<160;P+=2){var m=W[P-30],d=W[P-30+1],p=M(m,d),V=F(d,m),L=k(m=W[P-4],d=W[P-4+1]),Y=j(d,m),Oe=W[P-32],Ve=W[P-32+1],Re=V+W[P-14+1]|0,ye=p+W[P-14]+Z(Re,V)|0;ye=(ye=ye+L+Z(Re=Re+Y|0,Y)|0)+Oe+Z(Re=Re+Ve|0,Ve)|0,W[P]=ye,W[P+1]=Re}for(var ke=0;ke<160;ke+=2){ye=W[ke],Re=W[ke+1];var ve=T(K,J,X),_e=T(Ie,E,a),de=D(K,Ie),se=D(Ie,K),re=$(oe,l),ce=$(l,oe),ue=G[ke],ge=G[ke+1],Ee=_(oe,ne,me),Be=_(l,h,g),De=x+ce|0,et=pe+re+Z(De,x)|0;et=(et=(et=et+Ee+Z(De=De+Be|0,Be)|0)+ue+Z(De=De+ge|0,ge)|0)+ye+Z(De=De+Re|0,Re)|0;var Ke=se+_e|0,We=de+ve+Z(Ke,se)|0;pe=me,x=g,me=ne,g=h,ne=oe,h=l,oe=Q+et+Z(l=f+De|0,f)|0,Q=X,f=a,X=J,a=E,J=K,E=Ie,K=et+We+Z(Ie=De+Ke|0,De)|0}this._al=this._al+Ie|0,this._bl=this._bl+E|0,this._cl=this._cl+a|0,this._dl=this._dl+f|0,this._el=this._el+l|0,this._fl=this._fl+h|0,this._gl=this._gl+g|0,this._hl=this._hl+x|0,this._ah=this._ah+K+Z(this._al,Ie)|0,this._bh=this._bh+J+Z(this._bl,E)|0,this._ch=this._ch+X+Z(this._cl,a)|0,this._dh=this._dh+Q+Z(this._dl,f)|0,this._eh=this._eh+oe+Z(this._el,l)|0,this._fh=this._fh+ne+Z(this._fl,h)|0,this._gh=this._gh+me+Z(this._gl,g)|0,this._hh=this._hh+pe+Z(this._hl,x)|0},B.prototype._hash=function(){var q=N.allocUnsafe(64);function W(K,J,X){q.writeInt32BE(K,X),q.writeInt32BE(J,X+4)}return W(this._ah,this._al,0),W(this._bh,this._bl,8),W(this._ch,this._cl,16),W(this._dh,this._dl,24),W(this._eh,this._el,32),W(this._fh,this._fl,40),W(this._gh,this._gl,48),W(this._hh,this._hl,56),q},xe.exports=B},18876:xe=>{"use strict";function I(G,v){return G+C(v)}function C(G){let v=G;return v-=v>>1&1431655765,v=(858993459&v)+(v>>2&858993459),16843009*(v+(v>>4)&252645135)>>24}function H(G,v){return G[0]-v[0]}function N(G){return G[1]}xe.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(v,B){let _=this._internalPositionFor(v,!1);if(void 0===B)-1!==_&&(this._unsetInternalPos(_),this._unsetBit(v),this._changedLength=!0,this._changedData=!0);else{let T=!1;-1===_?(_=this._data.length,this._setBit(v),this._changedData=!0):T=!0,this._setInternalPos(_,v,B,T),this._changedLength=!0}}unset(v){this.set(v,void 0)}get(v){this._sortData();const B=this._internalPositionFor(v,!0);if(-1!==B)return this._data[B][1]}push(v){return this.set(this.length,v),this.length}get length(){if(this._sortData(),this._changedLength){const v=this._data[this._data.length-1];this._length=v?v[0]+1:0,this._changedLength=!1}return this._length}forEach(v){let B=0;for(;B<this.length;)v(this.get(B),B,this),B++}map(v){let B=0,_=new Array(this.length);for(;B<this.length;)_[B]=v(this.get(B),B,this),B++;return _}reduce(v,B){let _=0,T=B;for(;_<this.length;)T=v(T,this.get(_),_),_++;return T}find(v){let _,T,B=0;for(;B<this.length&&!_;)T=this.get(B),_=v(T),B++;return _?T:void 0}_internalPositionFor(v,B){const _=this._bytePosFor(v,B);if(_>=this._bitArrays.length)return-1;const T=this._bitArrays[_],D=v-7*_;return(T&1<<D)>0?this._bitArrays.slice(0,_).reduce(I,0)+C(T&~(4294967295<<D+1))-1:-1}_bytePosFor(v,B){const _=Math.floor(v/7),T=_+1;for(;!B&&this._bitArrays.length<T;)this._bitArrays.push(0);return _}_setBit(v){const B=this._bytePosFor(v,!1);this._bitArrays[B]|=1<<v-7*B}_unsetBit(v){const B=this._bytePosFor(v,!1);this._bitArrays[B]&=~(1<<v-7*B)}_setInternalPos(v,B,_,T){const D=this._data,$=[B,_];if(T)this._sortData(),D[v]=$;else{if(D.length)if(D[D.length-1][0]>=B)D.push($);else if(D[0][0]<=B)D.unshift($);else{const M=Math.round(D.length/2);this._data=D.slice(0,M).concat($).concat(D.slice(M))}else this._data.push($);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(v){this._data.splice(v,1)}_sortData(){this._changedData&&this._data.sort(H),this._changedData=!1}bitField(){const v=[];let D,B=8,_=0,T=0;const $=this._bitArrays.slice();for(;$.length||_;){0===_&&(D=$.shift(),_=7);const F=Math.min(_,B);T|=(D&~(255<<F))<<8-B,D>>>=F,_-=F,B-=F,(!B||!_&&!$.length)&&(v.push(T),T=0,B=8)}for(var M=v.length-1;M>0&&0===v[M];M--)v.pop();return v}compactArray(){return this._sortData(),this._data.map(N)}}},7045:(xe,O,I)=>{xe.exports=N;var C=I(44356).EventEmitter;function N(){C.call(this)}I(71993)(N,C),N.Readable=I(19609),N.Writable=I(47849),N.Duplex=I(74075),N.Transform=I(2909),N.PassThrough=I(18823),N.finished=I(33139),N.pipeline=I(96249),N.Stream=N,N.prototype.pipe=function(G,v){var B=this;function _(j){G.writable&&!1===G.write(j)&&B.pause&&B.pause()}function T(){B.readable&&B.resume&&B.resume()}B.on("data",_),G.on("drain",T),!G._isStdio&&(!v||!1!==v.end)&&(B.on("end",$),B.on("close",M));var D=!1;function $(){D||(D=!0,G.end())}function M(){D||(D=!0,"function"==typeof G.destroy&&G.destroy())}function F(j){if(k(),0===C.listenerCount(this,"error"))throw j}function k(){B.removeListener("data",_),G.removeListener("drain",T),B.removeListener("end",$),B.removeListener("close",M),B.removeListener("error",F),G.removeListener("error",F),B.removeListener("end",k),B.removeListener("close",k),G.removeListener("close",k)}return B.on("error",F),G.on("error",F),B.on("end",k),B.on("close",k),G.on("close",k),G.emit("pipe",B),G}},78454:(xe,O,I)=>{"use strict";var C=I(27054).Buffer,H=C.isEncoding||function(K){switch((K=""+K)&&K.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function v(K){var J;switch(this.encoding=function G(K){var J=function N(K){if(!K)return"utf8";for(var J;;)switch(K){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return K;default:if(J)return;K=(""+K).toLowerCase(),J=!0}}(K);if("string"!=typeof J&&(C.isEncoding===H||!H(K)))throw new Error("Unknown encoding: "+K);return J||K}(K),this.encoding){case"utf16le":this.text=F,this.end=k,J=4;break;case"utf8":this.fillLast=D,J=4;break;case"base64":this.text=j,this.end=Z,J=3;break;default:return this.write=q,void(this.end=W)}this.lastNeed=0,this.lastTotal=0,this.lastChar=C.allocUnsafe(J)}function B(K){return K<=127?0:K>>5==6?2:K>>4==14?3:K>>3==30?4:K>>6==2?-1:-2}function D(K){var J=this.lastTotal-this.lastNeed,X=function T(K,J,X){if(128!=(192&J[0]))return K.lastNeed=0,"\ufffd";if(K.lastNeed>1&&J.length>1){if(128!=(192&J[1]))return K.lastNeed=1,"\ufffd";if(K.lastNeed>2&&J.length>2&&128!=(192&J[2]))return K.lastNeed=2,"\ufffd"}}(this,K);return void 0!==X?X:this.lastNeed<=K.length?(K.copy(this.lastChar,J,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(K.copy(this.lastChar,J,0,K.length),void(this.lastNeed-=K.length))}function F(K,J){if((K.length-J)%2==0){var X=K.toString("utf16le",J);if(X){var Q=X.charCodeAt(X.length-1);if(Q>=55296&&Q<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=K[K.length-2],this.lastChar[1]=K[K.length-1],X.slice(0,-1)}return X}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=K[K.length-1],K.toString("utf16le",J,K.length-1)}function k(K){var J=K&&K.length?this.write(K):"";return this.lastNeed?J+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):J}function j(K,J){var X=(K.length-J)%3;return 0===X?K.toString("base64",J):(this.lastNeed=3-X,this.lastTotal=3,1===X?this.lastChar[0]=K[K.length-1]:(this.lastChar[0]=K[K.length-2],this.lastChar[1]=K[K.length-1]),K.toString("base64",J,K.length-X))}function Z(K){var J=K&&K.length?this.write(K):"";return this.lastNeed?J+this.lastChar.toString("base64",0,3-this.lastNeed):J}function q(K){return K.toString(this.encoding)}function W(K){return K&&K.length?this.write(K):""}O.StringDecoder=v,v.prototype.write=function(K){if(0===K.length)return"";var J,X;if(this.lastNeed){if(void 0===(J=this.fillLast(K)))return"";X=this.lastNeed,this.lastNeed=0}else X=0;return X<K.length?J?J+this.text(K,X):this.text(K,X):J||""},v.prototype.end=function M(K){var J=K&&K.length?this.write(K):"";return this.lastNeed?J+"\ufffd":J},v.prototype.text=function $(K,J){var X=function _(K,J,X){var Q=J.length-1;if(Q<X)return 0;var oe=B(J[Q]);return oe>=0?(oe>0&&(K.lastNeed=oe-1),oe):--Q<X||-2===oe?0:(oe=B(J[Q]))>=0?(oe>0&&(K.lastNeed=oe-2),oe):--Q<X||-2===oe?0:(oe=B(J[Q]))>=0?(oe>0&&(2===oe?oe=0:K.lastNeed=oe-3),oe):0}(this,K,J);if(!this.lastNeed)return K.toString("utf8",J);this.lastTotal=X;var Q=K.length-(X-this.lastNeed);return K.copy(this.lastChar,0,Q),K.toString("utf8",J,Q)},v.prototype.fillLast=function(K){if(this.lastNeed<=K.length)return K.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);K.copy(this.lastChar,this.lastTotal-this.lastNeed,0,K.length),this.lastNeed-=K.length}},95568:function(xe,O){!function(I){"use strict";function C(){for(var Ze=arguments.length,Ue=Array(Ze),Ge=0;Ge<Ze;Ge++)Ue[Ge]=arguments[Ge];if(Ue.length>1){Ue[0]=Ue[0].slice(0,-1);for(var pt=Ue.length-1,Xe=1;Xe<pt;++Xe)Ue[Xe]=Ue[Xe].slice(1,-1);return Ue[pt]=Ue[pt].slice(1),Ue.join("")}return Ue[0]}function H(Ze){return"(?:"+Ze+")"}function N(Ze){return void 0===Ze?"undefined":null===Ze?"null":Object.prototype.toString.call(Ze).split(" ").pop().split("]").shift().toLowerCase()}function G(Ze){return Ze.toUpperCase()}function _(Ze){var Ue="[A-Za-z]",pt="[0-9]",dt=C(pt,"[A-Fa-f]"),wt=H(H("%[EFef]"+dt+"%"+dt+dt+"%"+dt+dt)+"|"+H("%[89A-Fa-f]"+dt+"%"+dt+dt)+"|"+H("%"+dt+dt)),Vt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Zt=C("[\\:\\/\\?\\#\\[\\]\\@]",Vt),dr=Ze?"[\\uE000-\\uF8FF]":"[]",or=C(Ue,pt,"[\\-\\.\\_\\~]",Ze?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),mr=H(Ue+C(Ue,pt,"[\\+\\-\\.]")+"*"),ar=H(H(wt+"|"+C(or,Vt,"[\\:]"))+"*"),zr=(H(H("25[0-5]")+"|"+H("2[0-4]"+pt)+"|"+H("1"+pt+pt)+"|"+H("[1-9]"+pt)+"|"+pt),H(H("25[0-5]")+"|"+H("2[0-4]"+pt)+"|"+H("1"+pt+pt)+"|"+H("0?[1-9]"+pt)+"|0?0?"+pt)),Wr=H(zr+"\\."+zr+"\\."+zr+"\\."+zr),_r=H(dt+"{1,4}"),Gr=H(H(_r+"\\:"+_r)+"|"+Wr),qr=H(H(_r+"\\:")+"{6}"+Gr),Yr=H("\\:\\:"+H(_r+"\\:")+"{5}"+Gr),mn=H(H(_r)+"?\\:\\:"+H(_r+"\\:")+"{4}"+Gr),un=H(H(H(_r+"\\:")+"{0,1}"+_r)+"?\\:\\:"+H(_r+"\\:")+"{3}"+Gr),fn=H(H(H(_r+"\\:")+"{0,2}"+_r)+"?\\:\\:"+H(_r+"\\:")+"{2}"+Gr),xn=H(H(H(_r+"\\:")+"{0,3}"+_r)+"?\\:\\:"+_r+"\\:"+Gr),Fa=H(H(H(_r+"\\:")+"{0,4}"+_r)+"?\\:\\:"+Gr),ya=H(H(H(_r+"\\:")+"{0,5}"+_r)+"?\\:\\:"+_r),xo=H(H(H(_r+"\\:")+"{0,6}"+_r)+"?\\:\\:"),ma=H([qr,Yr,mn,un,fn,xn,Fa,ya,xo].join("|")),ou=H(H(or+"|"+wt)+"+"),ga=(H(ma+"\\%25"+ou),H(ma+H("\\%25|\\%(?!"+dt+"{2})")+ou)),zg=H("[vV]"+dt+"+\\."+C(or,Vt,"[\\:]")+"+"),Ec=H("\\["+H(ga+"|"+ma+"|"+zg)+"\\]"),hp=H(H(wt+"|"+C(or,Vt))+"*"),au=H(Ec+"|"+Wr+"(?!"+hp+")|"+hp),Ot=H(pt+"*"),Rt=H(H(ar+"@")+"?"+au+H("\\:"+Ot)+"?"),Ka=H(wt+"|"+C(or,Vt,"[\\:\\@]")),pp=H(Ka+"*"),Cl=H(Ka+"+"),Vg=H(H(wt+"|"+C(or,Vt,"[\\@]"))+"+"),Eo=H(H("\\/"+pp)+"*"),Js=H("\\/"+H(Cl+Eo)+"?"),pi=H(Vg+Eo),cu=H(Cl+Eo),Sc="(?!"+Ka+")",yi=(H(Eo+"|"+Js+"|"+pi+"|"+cu+"|"+Sc),H(H(Ka+"|"+C("[\\/\\?]",dr))+"*")),dd=H(H(Ka+"|[\\/\\?]")+"*"),On=H(H("\\/\\/"+Rt+Eo)+"|"+Js+"|"+cu+"|"+Sc),ff=H(mr+"\\:"+On+H("\\?"+yi)+"?"+H("\\#"+dd)+"?"),yp=H(H("\\/\\/"+Rt+Eo)+"|"+Js+"|"+pi+"|"+Sc),Dl=H(yp+H("\\?"+yi)+"?"+H("\\#"+dd)+"?");return H(ff+"|"+Dl),H(mr+"\\:"+On+H("\\?"+yi)+"?"),H(H("\\/\\/("+H("("+ar+")@")+"?("+au+")"+H("\\:("+Ot+")")+"?)")+"?("+Eo+"|"+Js+"|"+cu+"|"+Sc+")"),H("\\?("+yi+")"),H("\\#("+dd+")"),H(H("\\/\\/("+H("("+ar+")@")+"?("+au+")"+H("\\:("+Ot+")")+"?)")+"?("+Eo+"|"+Js+"|"+pi+"|"+Sc+")"),H("\\?("+yi+")"),H("\\#("+dd+")"),H(H("\\/\\/("+H("("+ar+")@")+"?("+au+")"+H("\\:("+Ot+")")+"?)")+"?("+Eo+"|"+Js+"|"+cu+"|"+Sc+")"),H("\\?("+yi+")"),H("\\#("+dd+")"),H("("+ar+")@"),H("\\:("+Ot+")"),{NOT_SCHEME:new RegExp(C("[^]",Ue,pt,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(C("[^\\%\\:]",or,Vt),"g"),NOT_HOST:new RegExp(C("[^\\%\\[\\]\\:]",or,Vt),"g"),NOT_PATH:new RegExp(C("[^\\%\\/\\:\\@]",or,Vt),"g"),NOT_PATH_NOSCHEME:new RegExp(C("[^\\%\\/\\@]",or,Vt),"g"),NOT_QUERY:new RegExp(C("[^\\%]",or,Vt,"[\\:\\@\\/\\?]",dr),"g"),NOT_FRAGMENT:new RegExp(C("[^\\%]",or,Vt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(C("[^]",or,Vt),"g"),UNRESERVED:new RegExp(or,"g"),OTHER_CHARS:new RegExp(C("[^\\%]",or,Zt),"g"),PCT_ENCODED:new RegExp(wt,"g"),IPV4ADDRESS:new RegExp("^("+Wr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+ma+")"+H(H("\\%25|\\%(?!"+dt+"{2})")+"("+ou+")")+"?\\]?$")}}var T=_(!1),D=_(!0),$=function(){return function(Ue,Ge){if(Array.isArray(Ue))return Ue;if(Symbol.iterator in Object(Ue))return function Ze(Ue,Ge){var pt=[],Xe=!0,dt=!1,Qt=void 0;try{for(var wt,gt=Ue[Symbol.iterator]();!(Xe=(wt=gt.next()).done)&&(pt.push(wt.value),!Ge||pt.length!==Ge);Xe=!0);}catch(Br){dt=!0,Qt=Br}finally{try{!Xe&&gt.return&&gt.return()}finally{if(dt)throw Qt}}return pt}(Ue,Ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),F=2147483647,k=36,Q=/^xn--/,oe=/[^\0-\x7E]/,ne=/[\x2E\u3002\uFF0E\uFF61]/g,me={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ie=Math.floor,E=String.fromCharCode;function a(Ze){throw new RangeError(me[Ze])}function l(Ze,Ue){var Ge=Ze.split("@"),pt="";return Ge.length>1&&(pt=Ge[0]+"@",Ze=Ge[1]),pt+function f(Ze,Ue){for(var Ge=[],pt=Ze.length;pt--;)Ge[pt]=Ue(Ze[pt]);return Ge}((Ze=Ze.replace(ne,".")).split("."),Ue).join(".")}function h(Ze){for(var Ue=[],Ge=0,pt=Ze.length;Ge<pt;){var Xe=Ze.charCodeAt(Ge++);if(Xe>=55296&&Xe<=56319&&Ge<pt){var dt=Ze.charCodeAt(Ge++);56320==(64512&dt)?Ue.push(((1023&Xe)<<10)+(1023&dt)+65536):(Ue.push(Xe),Ge--)}else Ue.push(Xe)}return Ue}var x=function(Ue){return Ue-48<10?Ue-22:Ue-65<26?Ue-65:Ue-97<26?Ue-97:k},P=function(Ue,Ge){return Ue+22+75*(Ue<26)-((0!=Ge)<<5)},m=function(Ue,Ge,pt){var Xe=0;for(Ue=pt?Ie(Ue/700):Ue>>1,Ue+=Ie(Ue/Ge);Ue>455;Xe+=k)Ue=Ie(Ue/35);return Ie(Xe+36*Ue/(Ue+38))},d=function(Ue){var Ge=[],pt=Ue.length,Xe=0,dt=128,Qt=72,gt=Ue.lastIndexOf("-");gt<0&&(gt=0);for(var wt=0;wt<gt;++wt)Ue.charCodeAt(wt)>=128&&a("not-basic"),Ge.push(Ue.charCodeAt(wt));for(var Br=gt>0?gt+1:0;Br<pt;){for(var Vt=Xe,Zt=1,Tr=k;;Tr+=k){Br>=pt&&a("invalid-input");var dr=x(Ue.charCodeAt(Br++));(dr>=k||dr>Ie((F-Xe)/Zt))&&a("overflow"),Xe+=dr*Zt;var or=Tr<=Qt?1:Tr>=Qt+26?26:Tr-Qt;if(dr<or)break;var mr=k-or;Zt>Ie(F/mr)&&a("overflow"),Zt*=mr}var ar=Ge.length+1;Qt=m(Xe-Vt,ar,0==Vt),Ie(Xe/ar)>F-dt&&a("overflow"),dt+=Ie(Xe/ar),Xe%=ar,Ge.splice(Xe++,0,dt)}return String.fromCodePoint.apply(String,Ge)},p=function(Ue){var Ge=[],pt=(Ue=h(Ue)).length,Xe=128,dt=0,Qt=72,gt=!0,wt=!1,Br=void 0;try{for(var Zt,Vt=Ue[Symbol.iterator]();!(gt=(Zt=Vt.next()).done);gt=!0){var Tr=Zt.value;Tr<128&&Ge.push(E(Tr))}}catch(ga){wt=!0,Br=ga}finally{try{!gt&&Vt.return&&Vt.return()}finally{if(wt)throw Br}}var dr=Ge.length,or=dr;for(dr&&Ge.push("-");or<pt;){var mr=F,ar=!0,en=!1,zr=void 0;try{for(var _r,Wr=Ue[Symbol.iterator]();!(ar=(_r=Wr.next()).done);ar=!0){var Gr=_r.value;Gr>=Xe&&Gr<mr&&(mr=Gr)}}catch(ga){en=!0,zr=ga}finally{try{!ar&&Wr.return&&Wr.return()}finally{if(en)throw zr}}var qr=or+1;mr-Xe>Ie((F-dt)/qr)&&a("overflow"),dt+=(mr-Xe)*qr,Xe=mr;var Yr=!0,mn=!1,un=void 0;try{for(var xn,fn=Ue[Symbol.iterator]();!(Yr=(xn=fn.next()).done);Yr=!0){var Fa=xn.value;if(Fa<Xe&&++dt>F&&a("overflow"),Fa==Xe){for(var ya=dt,xo=k;;xo+=k){var ma=xo<=Qt?1:xo>=Qt+26?26:xo-Qt;if(ya<ma)break;var ou=ya-ma,uf=k-ma;Ge.push(E(P(ma+ou%uf,0))),ya=Ie(ou/uf)}Ge.push(E(P(ya,0))),Qt=m(dt,qr,or==dr),dt=0,++or}}}catch(ga){mn=!0,un=ga}finally{try{!Yr&&fn.return&&fn.return()}finally{if(mn)throw un}}++dt,++Xe}return Ge.join("")},Y={version:"2.1.0",ucs2:{decode:h,encode:function(Ue){return String.fromCodePoint.apply(String,function(Ze){if(Array.isArray(Ze)){for(var Ue=0,Ge=Array(Ze.length);Ue<Ze.length;Ue++)Ge[Ue]=Ze[Ue];return Ge}return Array.from(Ze)}(Ue))}},decode:d,encode:p,toASCII:function(Ue){return l(Ue,function(Ge){return oe.test(Ge)?"xn--"+p(Ge):Ge})},toUnicode:function(Ue){return l(Ue,function(Ge){return Q.test(Ge)?d(Ge.slice(4).toLowerCase()):Ge})}},le={};function Se(Ze){var Ue=Ze.charCodeAt(0);return Ue<16?"%0"+Ue.toString(16).toUpperCase():Ue<128?"%"+Ue.toString(16).toUpperCase():Ue<2048?"%"+(Ue>>6|192).toString(16).toUpperCase()+"%"+(63&Ue|128).toString(16).toUpperCase():"%"+(Ue>>12|224).toString(16).toUpperCase()+"%"+(Ue>>6&63|128).toString(16).toUpperCase()+"%"+(63&Ue|128).toString(16).toUpperCase()}function Oe(Ze){for(var Ue="",Ge=0,pt=Ze.length;Ge<pt;){var Xe=parseInt(Ze.substr(Ge+1,2),16);if(Xe<128)Ue+=String.fromCharCode(Xe),Ge+=3;else if(Xe>=194&&Xe<224){if(pt-Ge>=6){var dt=parseInt(Ze.substr(Ge+4,2),16);Ue+=String.fromCharCode((31&Xe)<<6|63&dt)}else Ue+=Ze.substr(Ge,6);Ge+=6}else if(Xe>=224){if(pt-Ge>=9){var Qt=parseInt(Ze.substr(Ge+4,2),16),gt=parseInt(Ze.substr(Ge+7,2),16);Ue+=String.fromCharCode((15&Xe)<<12|(63&Qt)<<6|63&gt)}else Ue+=Ze.substr(Ge,9);Ge+=9}else Ue+=Ze.substr(Ge,3),Ge+=3}return Ue}function Ve(Ze,Ue){function Ge(pt){var Xe=Oe(pt);return Xe.match(Ue.UNRESERVED)?Xe:pt}return Ze.scheme&&(Ze.scheme=String(Ze.scheme).replace(Ue.PCT_ENCODED,Ge).toLowerCase().replace(Ue.NOT_SCHEME,"")),void 0!==Ze.userinfo&&(Ze.userinfo=String(Ze.userinfo).replace(Ue.PCT_ENCODED,Ge).replace(Ue.NOT_USERINFO,Se).replace(Ue.PCT_ENCODED,G)),void 0!==Ze.host&&(Ze.host=String(Ze.host).replace(Ue.PCT_ENCODED,Ge).toLowerCase().replace(Ue.NOT_HOST,Se).replace(Ue.PCT_ENCODED,G)),void 0!==Ze.path&&(Ze.path=String(Ze.path).replace(Ue.PCT_ENCODED,Ge).replace(Ze.scheme?Ue.NOT_PATH:Ue.NOT_PATH_NOSCHEME,Se).replace(Ue.PCT_ENCODED,G)),void 0!==Ze.query&&(Ze.query=String(Ze.query).replace(Ue.PCT_ENCODED,Ge).replace(Ue.NOT_QUERY,Se).replace(Ue.PCT_ENCODED,G)),void 0!==Ze.fragment&&(Ze.fragment=String(Ze.fragment).replace(Ue.PCT_ENCODED,Ge).replace(Ue.NOT_FRAGMENT,Se).replace(Ue.PCT_ENCODED,G)),Ze}function Re(Ze){return Ze.replace(/^0*(.*)/,"$1")||"0"}function ye(Ze,Ue){var Ge=Ze.match(Ue.IPV4ADDRESS)||[],Xe=$(Ge,2)[1];return Xe?Xe.split(".").map(Re).join("."):Ze}function ke(Ze,Ue){var Ge=Ze.match(Ue.IPV6ADDRESS)||[],pt=$(Ge,3),Xe=pt[1],dt=pt[2];if(Xe){for(var Qt=Xe.toLowerCase().split("::").reverse(),gt=$(Qt,2),wt=gt[0],Br=gt[1],Vt=Br?Br.split(":").map(Re):[],Zt=wt.split(":").map(Re),Tr=Ue.IPV4ADDRESS.test(Zt[Zt.length-1]),dr=Tr?7:8,or=Zt.length-dr,mr=Array(dr),ar=0;ar<dr;++ar)mr[ar]=Vt[ar]||Zt[or+ar]||"";Tr&&(mr[dr-1]=ye(mr[dr-1],Ue));var zr=mr.reduce(function(qr,Yr,mn){if(!Yr||"0"===Yr){var un=qr[qr.length-1];un&&un.index+un.length===mn?un.length++:qr.push({index:mn,length:1})}return qr},[]).sort(function(qr,Yr){return Yr.length-qr.length})[0],Wr=void 0;if(zr&&zr.length>1){var _r=mr.slice(0,zr.index),Gr=mr.slice(zr.index+zr.length);Wr=_r.join(":")+"::"+Gr.join(":")}else Wr=mr.join(":");return dt&&(Wr+="%"+dt),Wr}return Ze}var ve=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,_e=void 0==="".match(/(){0}/)[1];function de(Ze){var Ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Ge={},pt=!1!==Ue.iri?D:T;"suffix"===Ue.reference&&(Ze=(Ue.scheme?Ue.scheme+":":"")+"//"+Ze);var Xe=Ze.match(ve);if(Xe){_e?(Ge.scheme=Xe[1],Ge.userinfo=Xe[3],Ge.host=Xe[4],Ge.port=parseInt(Xe[5],10),Ge.path=Xe[6]||"",Ge.query=Xe[7],Ge.fragment=Xe[8],isNaN(Ge.port)&&(Ge.port=Xe[5])):(Ge.scheme=Xe[1]||void 0,Ge.userinfo=-1!==Ze.indexOf("@")?Xe[3]:void 0,Ge.host=-1!==Ze.indexOf("//")?Xe[4]:void 0,Ge.port=parseInt(Xe[5],10),Ge.path=Xe[6]||"",Ge.query=-1!==Ze.indexOf("?")?Xe[7]:void 0,Ge.fragment=-1!==Ze.indexOf("#")?Xe[8]:void 0,isNaN(Ge.port)&&(Ge.port=Ze.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Xe[4]:void 0)),Ge.host&&(Ge.host=ke(ye(Ge.host,pt),pt)),Ge.reference=void 0!==Ge.scheme||void 0!==Ge.userinfo||void 0!==Ge.host||void 0!==Ge.port||Ge.path||void 0!==Ge.query?void 0===Ge.scheme?"relative":void 0===Ge.fragment?"absolute":"uri":"same-document",Ue.reference&&"suffix"!==Ue.reference&&Ue.reference!==Ge.reference&&(Ge.error=Ge.error||"URI is not a "+Ue.reference+" reference.");var dt=le[(Ue.scheme||Ge.scheme||"").toLowerCase()];if(Ue.unicodeSupport||dt&&dt.unicodeSupport)Ve(Ge,pt);else{if(Ge.host&&(Ue.domainHost||dt&&dt.domainHost))try{Ge.host=Y.toASCII(Ge.host.replace(pt.PCT_ENCODED,Oe).toLowerCase())}catch(Qt){Ge.error=Ge.error||"Host's domain name can not be converted to ASCII via punycode: "+Qt}Ve(Ge,T)}dt&&dt.parse&&dt.parse(Ge,Ue)}else Ge.error=Ge.error||"URI can not be parsed.";return Ge}var re=/^\.\.?\//,ce=/^\/\.(\/|$)/,ue=/^\/\.\.(\/|$)/,ge=/^\/?(?:.|\n)*?(?=\/|$)/;function Ee(Ze){for(var Ue=[];Ze.length;)if(Ze.match(re))Ze=Ze.replace(re,"");else if(Ze.match(ce))Ze=Ze.replace(ce,"/");else if(Ze.match(ue))Ze=Ze.replace(ue,"/"),Ue.pop();else if("."===Ze||".."===Ze)Ze="";else{var Ge=Ze.match(ge);if(!Ge)throw new Error("Unexpected dot segment condition");var pt=Ge[0];Ze=Ze.slice(pt.length),Ue.push(pt)}return Ue.join("")}function Be(Ze){var Ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Ge=Ue.iri?D:T,pt=[],Xe=le[(Ue.scheme||Ze.scheme||"").toLowerCase()];if(Xe&&Xe.serialize&&Xe.serialize(Ze,Ue),Ze.host&&!Ge.IPV6ADDRESS.test(Ze.host)&&(Ue.domainHost||Xe&&Xe.domainHost))try{Ze.host=Ue.iri?Y.toUnicode(Ze.host):Y.toASCII(Ze.host.replace(Ge.PCT_ENCODED,Oe).toLowerCase())}catch(gt){Ze.error=Ze.error||"Host's domain name can not be converted to "+(Ue.iri?"Unicode":"ASCII")+" via punycode: "+gt}Ve(Ze,Ge),"suffix"!==Ue.reference&&Ze.scheme&&(pt.push(Ze.scheme),pt.push(":"));var dt=function se(Ze,Ue){var Ge=!1!==Ue.iri?D:T,pt=[];return void 0!==Ze.userinfo&&(pt.push(Ze.userinfo),pt.push("@")),void 0!==Ze.host&&pt.push(ke(ye(String(Ze.host),Ge),Ge).replace(Ge.IPV6ADDRESS,function(Xe,dt,Qt){return"["+dt+(Qt?"%25"+Qt:"")+"]"})),("number"==typeof Ze.port||"string"==typeof Ze.port)&&(pt.push(":"),pt.push(String(Ze.port))),pt.length?pt.join(""):void 0}(Ze,Ue);if(void 0!==dt&&("suffix"!==Ue.reference&&pt.push("//"),pt.push(dt),Ze.path&&"/"!==Ze.path.charAt(0)&&pt.push("/")),void 0!==Ze.path){var Qt=Ze.path;!Ue.absolutePath&&(!Xe||!Xe.absolutePath)&&(Qt=Ee(Qt)),void 0===dt&&(Qt=Qt.replace(/^\/\//,"/%2F")),pt.push(Qt)}return void 0!==Ze.query&&(pt.push("?"),pt.push(Ze.query)),void 0!==Ze.fragment&&(pt.push("#"),pt.push(Ze.fragment)),pt.join("")}function De(Ze,Ue){var Ge=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Xe={};return arguments[3]||(Ze=de(Be(Ze,Ge),Ge),Ue=de(Be(Ue,Ge),Ge)),!(Ge=Ge||{}).tolerant&&Ue.scheme?(Xe.scheme=Ue.scheme,Xe.userinfo=Ue.userinfo,Xe.host=Ue.host,Xe.port=Ue.port,Xe.path=Ee(Ue.path||""),Xe.query=Ue.query):(void 0!==Ue.userinfo||void 0!==Ue.host||void 0!==Ue.port?(Xe.userinfo=Ue.userinfo,Xe.host=Ue.host,Xe.port=Ue.port,Xe.path=Ee(Ue.path||""),Xe.query=Ue.query):(Ue.path?("/"===Ue.path.charAt(0)?Xe.path=Ee(Ue.path):(Xe.path=void 0===Ze.userinfo&&void 0===Ze.host&&void 0===Ze.port||Ze.path?Ze.path?Ze.path.slice(0,Ze.path.lastIndexOf("/")+1)+Ue.path:Ue.path:"/"+Ue.path,Xe.path=Ee(Xe.path)),Xe.query=Ue.query):(Xe.path=Ze.path,Xe.query=void 0!==Ue.query?Ue.query:Ze.query),Xe.userinfo=Ze.userinfo,Xe.host=Ze.host,Xe.port=Ze.port),Xe.scheme=Ze.scheme),Xe.fragment=Ue.fragment,Xe}function U(Ze,Ue){return Ze&&Ze.toString().replace(Ue&&Ue.iri?D.PCT_ENCODED:T.PCT_ENCODED,Oe)}var w={scheme:"http",domainHost:!0,parse:function(Ue,Ge){return Ue.host||(Ue.error=Ue.error||"HTTP URIs must have a host."),Ue},serialize:function(Ue,Ge){var pt="https"===String(Ue.scheme).toLowerCase();return(Ue.port===(pt?443:80)||""===Ue.port)&&(Ue.port=void 0),Ue.path||(Ue.path="/"),Ue}},b={scheme:"https",domainHost:w.domainHost,parse:w.parse,serialize:w.serialize};function z(Ze){return"boolean"==typeof Ze.secure?Ze.secure:"wss"===String(Ze.scheme).toLowerCase()}var ie={scheme:"ws",domainHost:!0,parse:function(Ue,Ge){var pt=Ue;return pt.secure=z(pt),pt.resourceName=(pt.path||"/")+(pt.query?"?"+pt.query:""),pt.path=void 0,pt.query=void 0,pt},serialize:function(Ue,Ge){if((Ue.port===(z(Ue)?443:80)||""===Ue.port)&&(Ue.port=void 0),"boolean"==typeof Ue.secure&&(Ue.scheme=Ue.secure?"wss":"ws",Ue.secure=void 0),Ue.resourceName){var pt=Ue.resourceName.split("?"),Xe=$(pt,2),dt=Xe[0],Qt=Xe[1];Ue.path=dt&&"/"!==dt?dt:void 0,Ue.query=Qt,Ue.resourceName=void 0}return Ue.fragment=void 0,Ue}},be={scheme:"wss",domainHost:ie.domainHost,parse:ie.parse,serialize:ie.serialize},Me={},At="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nt="[0-9A-Fa-f]",rt=H(H("%[EFef]"+nt+"%"+nt+nt+"%"+nt+nt)+"|"+H("%[89A-Fa-f]"+nt+"%"+nt+nt)+"|"+H("%"+nt+nt)),Mt=C("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),it=new RegExp(At,"g"),mt=new RegExp(rt,"g"),Rr=new RegExp(C("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Mt),"g"),xt=new RegExp(C("[^]",At,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),It=xt;function Qr(Ze){var Ue=Oe(Ze);return Ue.match(it)?Ue:Ze}var Tt={scheme:"mailto",parse:function(Ue,Ge){var pt=Ue,Xe=pt.to=pt.path?pt.path.split(","):[];if(pt.path=void 0,pt.query){for(var dt=!1,Qt={},gt=pt.query.split("&"),wt=0,Br=gt.length;wt<Br;++wt){var Vt=gt[wt].split("=");switch(Vt[0]){case"to":for(var Zt=Vt[1].split(","),Tr=0,dr=Zt.length;Tr<dr;++Tr)Xe.push(Zt[Tr]);break;case"subject":pt.subject=U(Vt[1],Ge);break;case"body":pt.body=U(Vt[1],Ge);break;default:dt=!0,Qt[U(Vt[0],Ge)]=U(Vt[1],Ge)}}dt&&(pt.headers=Qt)}pt.query=void 0;for(var or=0,mr=Xe.length;or<mr;++or){var ar=Xe[or].split("@");if(ar[0]=U(ar[0]),Ge.unicodeSupport)ar[1]=U(ar[1],Ge).toLowerCase();else try{ar[1]=Y.toASCII(U(ar[1],Ge).toLowerCase())}catch(en){pt.error=pt.error||"Email address's domain name can not be converted to ASCII via punycode: "+en}Xe[or]=ar.join("@")}return pt},serialize:function(Ue,Ge){var pt=Ue,Xe=function v(Ze){return null!=Ze?Ze instanceof Array?Ze:"number"!=typeof Ze.length||Ze.split||Ze.setInterval||Ze.call?[Ze]:Array.prototype.slice.call(Ze):[]}(Ue.to);if(Xe){for(var dt=0,Qt=Xe.length;dt<Qt;++dt){var gt=String(Xe[dt]),wt=gt.lastIndexOf("@"),Br=gt.slice(0,wt).replace(mt,Qr).replace(mt,G).replace(Rr,Se),Vt=gt.slice(wt+1);try{Vt=Ge.iri?Y.toUnicode(Vt):Y.toASCII(U(Vt,Ge).toLowerCase())}catch(or){pt.error=pt.error||"Email address's domain name can not be converted to "+(Ge.iri?"Unicode":"ASCII")+" via punycode: "+or}Xe[dt]=Br+"@"+Vt}pt.path=Xe.join(",")}var Zt=Ue.headers=Ue.headers||{};Ue.subject&&(Zt.subject=Ue.subject),Ue.body&&(Zt.body=Ue.body);var Tr=[];for(var dr in Zt)Zt[dr]!==Me[dr]&&Tr.push(dr.replace(mt,Qr).replace(mt,G).replace(xt,Se)+"="+Zt[dr].replace(mt,Qr).replace(mt,G).replace(It,Se));return Tr.length&&(pt.query=Tr.join("&")),pt}},Pt=/^([^\:]+)\:(.*)/,kn={scheme:"urn",parse:function(Ue,Ge){var pt=Ue.path&&Ue.path.match(Pt),Xe=Ue;if(pt){var dt=Ge.scheme||Xe.scheme||"urn",Qt=pt[1].toLowerCase(),gt=pt[2],Br=le[dt+":"+(Ge.nid||Qt)];Xe.nid=Qt,Xe.nss=gt,Xe.path=void 0,Br&&(Xe=Br.parse(Xe,Ge))}else Xe.error=Xe.error||"URN can not be parsed.";return Xe},serialize:function(Ue,Ge){var Xe=Ue.nid,Qt=le[(Ge.scheme||Ue.scheme||"urn")+":"+(Ge.nid||Xe)];Qt&&(Ue=Qt.serialize(Ue,Ge));var gt=Ue;return gt.path=(Xe||Ge.nid)+":"+Ue.nss,gt}},Fe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,He={scheme:"urn:uuid",parse:function(Ue,Ge){var pt=Ue;return pt.uuid=pt.nss,pt.nss=void 0,!Ge.tolerant&&(!pt.uuid||!pt.uuid.match(Fe))&&(pt.error=pt.error||"UUID is not valid."),pt},serialize:function(Ue,Ge){var pt=Ue;return pt.nss=(Ue.uuid||"").toLowerCase(),pt}};le[w.scheme]=w,le[b.scheme]=b,le[ie.scheme]=ie,le[be.scheme]=be,le[Tt.scheme]=Tt,le[kn.scheme]=kn,le[He.scheme]=He,I.SCHEMES=le,I.pctEncChar=Se,I.pctDecChars=Oe,I.parse=de,I.removeDotSegments=Ee,I.serialize=Be,I.resolveComponents=De,I.resolve=function et(Ze,Ue,Ge){var pt=function B(Ze,Ue){var Ge=Ze;if(Ue)for(var pt in Ue)Ge[pt]=Ue[pt];return Ge}({scheme:"null"},Ge);return Be(De(de(Ze,pt),de(Ue,pt),pt,!0),pt)},I.normalize=function Ke(Ze,Ue){return"string"==typeof Ze?Ze=Be(de(Ze,Ue),Ue):"object"===N(Ze)&&(Ze=de(Be(Ze,Ue),Ue)),Ze},I.equal=function We(Ze,Ue,Ge){return"string"==typeof Ze?Ze=Be(de(Ze,Ge),Ge):"object"===N(Ze)&&(Ze=Be(Ze,Ge)),"string"==typeof Ue?Ue=Be(de(Ue,Ge),Ge):"object"===N(Ue)&&(Ue=Be(Ue,Ge)),Ze===Ue},I.escapeComponent=function _t(Ze,Ue){return Ze&&Ze.toString().replace(Ue&&Ue.iri?D.ESCAPE:T.ESCAPE,Se)},I.unescapeComponent=U,Object.defineProperty(I,"__esModule",{value:!0})}(O)},3398:xe=>{function I(C){try{if(!globalThis.localStorage)return!1}catch{return!1}var H=globalThis.localStorage[C];return null!=H&&"true"===String(H).toLowerCase()}xe.exports=function O(C,H){if(I("noDeprecation"))return C;var N=!1;return function G(){if(!N){if(I("throwDeprecation"))throw new Error(H);I("traceDeprecation")?console.trace(H):console.warn(H),N=!0}return C.apply(this,arguments)}}},78982:()=>{},47790:()=>{},21638:()=>{},92668:()=>{},77965:()=>{},66089:()=>{},79368:()=>{},64688:()=>{},51069:()=>{},15340:()=>{},79838:()=>{},67490:(xe,O,I)=>{var C=I(25172);function H(N){var G,v;function B(T,D){try{var $=N[T](D),M=$.value,F=M instanceof C;Promise.resolve(F?M.v:M).then(function(k){if(F){var j="return"===T?"return":"next";if(!M.k||k.done)return B(j,k);k=N[j](k).value}_($.done?"return":"normal",k)},function(k){B("throw",k)})}catch(k){_("throw",k)}}function _(T,D){switch(T){case"return":G.resolve({value:D,done:!0});break;case"throw":G.reject(D);break;default:G.resolve({value:D,done:!1})}(G=G.next)?B(G.key,G.arg):v=null}this._invoke=function(T,D){return new Promise(function($,M){var F={key:T,arg:D,resolve:$,reject:M,next:null};v?v=v.next=F:(G=v=F,B(T,D))})},"function"!=typeof N.return&&(this.return=void 0)}H.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},H.prototype.next=function(N){return this._invoke("next",N)},H.prototype.throw=function(N){return this._invoke("throw",N)},H.prototype.return=function(N){return this._invoke("return",N)},xe.exports=H,xe.exports.__esModule=!0,xe.exports.default=xe.exports},25172:xe=>{xe.exports=function O(I,C){this.v=I,this.k=C},xe.exports.__esModule=!0,xe.exports.default=xe.exports},93513:(xe,O,I)=>{var C=I(25172);xe.exports=function H(N){var G={},v=!1;function B(_,T){return v=!0,T=new Promise(function(D){D(N[_](T))}),{done:!1,value:new C(T,1)}}return G[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},G.next=function(_){return v?(v=!1,_):B("next",_)},"function"==typeof N.throw&&(G.throw=function(_){if(v)throw v=!1,_;return B("throw",_)}),"function"==typeof N.return&&(G.return=function(_){return v?(v=!1,_):B("return",_)}),G},xe.exports.__esModule=!0,xe.exports.default=xe.exports},82881:xe=>{function I(C){function H(N){if(Object(N)!==N)return Promise.reject(new TypeError(N+" is not an object."));var G=N.done;return Promise.resolve(N.value).then(function(v){return{value:v,done:G}})}return(I=function(G){this.s=G,this.n=G.next}).prototype={s:null,n:null,next:function(){return H(this.n.apply(this.s,arguments))},return:function(G){var v=this.s.return;return void 0===v?Promise.resolve({value:G,done:!0}):H(v.apply(this.s,arguments))},throw:function(G){var v=this.s.return;return void 0===v?Promise.reject(G):H(v.apply(this.s,arguments))}},new I(C)}xe.exports=function O(C){var H,N,G,v=2;for(typeof Symbol<"u"&&(N=Symbol.asyncIterator,G=Symbol.iterator);v--;){if(N&&null!=(H=C[N]))return H.call(C);if(G&&null!=(H=C[G]))return new I(H.call(C));N="@@asyncIterator",G="@@iterator"}throw new TypeError("Object is not async iterable")},xe.exports.__esModule=!0,xe.exports.default=xe.exports},29293:xe=>{function O(C,H,N,G,v,B,_){try{var T=C[B](_),D=T.value}catch($){return void N($)}T.done?H(D):Promise.resolve(D).then(G,v)}xe.exports=function I(C){return function(){var H=this,N=arguments;return new Promise(function(G,v){var B=C.apply(H,N);function _(D){O(B,G,v,_,T,"next",D)}function T(D){O(B,G,v,_,T,"throw",D)}_(void 0)})}},xe.exports.__esModule=!0,xe.exports.default=xe.exports},53344:(xe,O,I)=>{var C=I(25172);xe.exports=function H(N){return new C(N,0)},xe.exports.__esModule=!0,xe.exports.default=xe.exports},42958:(xe,O,I)=>{var C=I(67490);xe.exports=function H(N){return function(){return new C(N.apply(this,arguments))}},xe.exports.__esModule=!0,xe.exports.default=xe.exports},10467:(xe,O,I)=>{"use strict";function C(N,G,v,B,_,T,D){try{var $=N[T](D),M=$.value}catch(F){return void v(F)}$.done?G(M):Promise.resolve(M).then(B,_)}function H(N){return function(){var G=this,v=arguments;return new Promise(function(B,_){var T=N.apply(G,v);function D(M){C(T,B,_,D,$,"next",M)}function $(M){C(T,B,_,D,$,"throw",M)}D(void 0)})}}I.d(O,{A:()=>H})},83813:xe=>{"use strict";xe.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},59608:xe=>{"use strict";xe.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json-schema.org/draft/2020-12/meta/applicator","$vocabulary":{"https://json-schema.org/draft/2020-12/vocab/applicator":true},"$dynamicAnchor":"meta","title":"Applicator vocabulary meta-schema","type":["object","boolean"],"properties":{"prefixItems":{"$ref":"#/$defs/schemaArray"},"items":{"$dynamicRef":"#meta"},"contains":{"$dynamicRef":"#meta"},"additionalProperties":{"$dynamicRef":"#meta"},"properties":{"type":"object","additionalProperties":{"$dynamicRef":"#meta"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$dynamicRef":"#meta"},"propertyNames":{"format":"regex"},"default":{}},"dependentSchemas":{"type":"object","additionalProperties":{"$dynamicRef":"#meta"},"default":{}},"propertyNames":{"$dynamicRef":"#meta"},"if":{"$dynamicRef":"#meta"},"then":{"$dynamicRef":"#meta"},"else":{"$dynamicRef":"#meta"},"allOf":{"$ref":"#/$defs/schemaArray"},"anyOf":{"$ref":"#/$defs/schemaArray"},"oneOf":{"$ref":"#/$defs/schemaArray"},"not":{"$dynamicRef":"#meta"}},"$defs":{"schemaArray":{"type":"array","minItems":1,"items":{"$dynamicRef":"#meta"}}}}')},11082:xe=>{"use strict";xe.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json-schema.org/draft/2020-12/meta/content","$vocabulary":{"https://json-schema.org/draft/2020-12/vocab/content":true},"$dynamicAnchor":"meta","title":"Content vocabulary meta-schema","type":["object","boolean"],"properties":{"contentEncoding":{"type":"string"},"contentMediaType":{"type":"string"},"contentSchema":{"$dynamicRef":"#meta"}}}')},93406:xe=>{"use strict";xe.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json-schema.org/draft/2020-12/meta/core","$vocabulary":{"https://json-schema.org/draft/2020-12/vocab/core":true},"$dynamicAnchor":"meta","title":"Core vocabulary meta-schema","type":["object","boolean"],"properties":{"$id":{"$ref":"#/$defs/uriReferenceString","$comment":"Non-empty fragments not allowed.","pattern":"^[^#]*#?$"},"$schema":{"$ref":"#/$defs/uriString"},"$ref":{"$ref":"#/$defs/uriReferenceString"},"$anchor":{"$ref":"#/$defs/anchorString"},"$dynamicRef":{"$ref":"#/$defs/uriReferenceString"},"$dynamicAnchor":{"$ref":"#/$defs/anchorString"},"$vocabulary":{"type":"object","propertyNames":{"$ref":"#/$defs/uriString"},"additionalProperties":{"type":"boolean"}},"$comment":{"type":"string"},"$defs":{"type":"object","additionalProperties":{"$dynamicRef":"#meta"}}},"$defs":{"anchorString":{"type":"string","pattern":"^[A-Za-z_][-A-Za-z0-9._]*$"},"uriString":{"type":"string","format":"uri"},"uriReferenceString":{"type":"string","format":"uri-reference"}}}')},14516:xe=>{"use strict";xe.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json-schema.org/draft/2020-12/meta/format-annotation","$vocabulary":{"https://json-schema.org/draft/2020-12/vocab/format-annotation":true},"$dynamicAnchor":"meta","title":"Format vocabulary meta-schema for annotation results","type":["object","boolean"],"properties":{"format":{"type":"string"}}}')},3059:xe=>{"use strict";xe.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json-schema.org/draft/2020-12/meta/meta-data","$vocabulary":{"https://json-schema.org/draft/2020-12/vocab/meta-data":true},"$dynamicAnchor":"meta","title":"Meta-data vocabulary meta-schema","type":["object","boolean"],"properties":{"title":{"type":"string"},"description":{"type":"string"},"default":true,"deprecated":{"type":"boolean","default":false},"readOnly":{"type":"boolean","default":false},"writeOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true}}}')},8307:xe=>{"use strict";xe.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json-schema.org/draft/2020-12/meta/unevaluated","$vocabulary":{"https://json-schema.org/draft/2020-12/vocab/unevaluated":true},"$dynamicAnchor":"meta","title":"Unevaluated applicator vocabulary meta-schema","type":["object","boolean"],"properties":{"unevaluatedItems":{"$dynamicRef":"#meta"},"unevaluatedProperties":{"$dynamicRef":"#meta"}}}')},18738:xe=>{"use strict";xe.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json-schema.org/draft/2020-12/meta/validation","$vocabulary":{"https://json-schema.org/draft/2020-12/vocab/validation":true},"$dynamicAnchor":"meta","title":"Validation vocabulary meta-schema","type":["object","boolean"],"properties":{"type":{"anyOf":[{"$ref":"#/$defs/simpleTypes"},{"type":"array","items":{"$ref":"#/$defs/simpleTypes"},"minItems":1,"uniqueItems":true}]},"const":true,"enum":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/$defs/nonNegativeInteger"},"minLength":{"$ref":"#/$defs/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"maxItems":{"$ref":"#/$defs/nonNegativeInteger"},"minItems":{"$ref":"#/$defs/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxContains":{"$ref":"#/$defs/nonNegativeInteger"},"minContains":{"$ref":"#/$defs/nonNegativeInteger","default":1},"maxProperties":{"$ref":"#/$defs/nonNegativeInteger"},"minProperties":{"$ref":"#/$defs/nonNegativeIntegerDefault0"},"required":{"$ref":"#/$defs/stringArray"},"dependentRequired":{"type":"object","additionalProperties":{"$ref":"#/$defs/stringArray"}}},"$defs":{"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"$ref":"#/$defs/nonNegativeInteger","default":0},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}}}')},6438:xe=>{"use strict";xe.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://json-schema.org/draft/2020-12/schema","$vocabulary":{"https://json-schema.org/draft/2020-12/vocab/core":true,"https://json-schema.org/draft/2020-12/vocab/applicator":true,"https://json-schema.org/draft/2020-12/vocab/unevaluated":true,"https://json-schema.org/draft/2020-12/vocab/validation":true,"https://json-schema.org/draft/2020-12/vocab/meta-data":true,"https://json-schema.org/draft/2020-12/vocab/format-annotation":true,"https://json-schema.org/draft/2020-12/vocab/content":true},"$dynamicAnchor":"meta","title":"Core and Validation specifications meta-schema","allOf":[{"$ref":"meta/core"},{"$ref":"meta/applicator"},{"$ref":"meta/unevaluated"},{"$ref":"meta/validation"},{"$ref":"meta/meta-data"},{"$ref":"meta/format-annotation"},{"$ref":"meta/content"}],"type":["object","boolean"],"$comment":"This meta-schema also defines keywords that have appeared in previous drafts in order to prevent incompatible extensions as they remain in common use.","properties":{"definitions":{"$comment":"\\"definitions\\" has been replaced by \\"$defs\\".","type":"object","additionalProperties":{"$dynamicRef":"#meta"},"deprecated":true,"default":{}},"dependencies":{"$comment":"\\"dependencies\\" has been split and replaced by \\"dependentSchemas\\" and \\"dependentRequired\\" in order to serve their differing semantics.","type":"object","additionalProperties":{"anyOf":[{"$dynamicRef":"#meta"},{"$ref":"meta/validation#/$defs/stringArray"}]},"deprecated":true,"default":{}},"$recursiveAnchor":{"$comment":"\\"$recursiveAnchor\\" has been replaced by \\"$dynamicAnchor\\".","$ref":"meta/core#/$defs/anchorString","deprecated":true},"$recursiveRef":{"$comment":"\\"$recursiveRef\\" has been replaced by \\"$dynamicRef\\".","$ref":"meta/core#/$defs/uriReferenceString","deprecated":true}}}')},3219:xe=>{"use strict";xe.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},62951:xe=>{"use strict";xe.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},64589:xe=>{"use strict";xe.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},23241:xe=>{"use strict";xe.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},1636:xe=>{"use strict";xe.exports={rE:"6.5.5"}},15579:xe=>{"use strict";xe.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}}]);