"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7660],{47660:(A,u,a)=>{a.r(u),a.d(u,{RolesComponent:()=>D});var p=a(10467),t=a(93953),C=a(60385),f=a(98703),O=a(60177),s=a(25596),E=a(88834),g=a(99213),P=a(30046),M=a(50296),d=a(34635),m=a(50963);function R(_,h){if(1&_&&(t.j41(0,"p"),t.EFF(1),t.nrm(2,"br"),t.EFF(3),t.nrm(4,"br"),t.EFF(5),t.nI1(6,"ago"),t.k0s(),t.nrm(7,"app-profile-header",2)),2&_){const i=h.$implicit;t.R7$(),t.SpI(" App: ",i.record.protocol,""),t.R7$(2),t.SpI(" Role: ",i.record.protocolPath,""),t.R7$(2),t.SpI(" Assigned: ",t.bMT(6,4,i.record.dateCreated),"\n"),t.R7$(2),t.Y8G("did",i.record.recipient)}}function v(_,h){1&_&&t.EFF(0," No roles found. ")}let D=(()=>{class _{constructor(){var i=this;this.app=(0,t.WQX)(M.d),this.identity=(0,t.WQX)(d.K),this.roles=(0,t.vPA)([]),(0,t.QZP)((0,p.A)(function*(){i.app.initialized()&&(yield i.loadRoles())}))}loadRoles(){var i=this;return(0,p.A)(function*(){const e=[],{records:l}=yield i.identity.web5.dwn.records.query({message:{filter:{tags:{role:!0}}}});for(let n of l){const o=yield n.data.json();e.push({record:n,data:o,id:n.id})}return console.log(e),i.roles.set(e),e})()}assignRole(){var i=this;return(0,p.A)(function*(){const e="did:dht:9omof8aypjcx33rkuk9akug8j7sr4n7u4s69c1hxj8ocmwj8pf1y",{record:o,status:r}=yield i.identity.web5.dwn.records.create({data:{},message:{tags:{role:!0},recipient:e,protocol:m.Q.protocol,protocolPath:"collaborator",schema:m.Q.types.collaborator.schema,dataFormat:m.Q.types.collaborator.dataFormats[0]}});o?.send(e),console.log("Status:",r),console.log("Record:",o)})()}static#t=this.\u0275fac=function(e){return new(e||_)};static#e=this.\u0275cmp=t.VBU({type:_,selectors:[["app-roles"]],standalone:!0,features:[t.aNF],decls:20,vars:1,consts:[[1,"notifications-card"],["mat-button","",3,"click"],[3,"did"]],template:function(e,l){1&e&&(t.j41(0,"h1"),t.EFF(1,"Roles Management"),t.k0s(),t.j41(2,"mat-card")(3,"mat-card-content"),t.EFF(4,"Manage all the roles in every app that you have assigned other users on Ariton."),t.k0s()(),t.nrm(5,"br"),t.j41(6,"mat-card",0)(7,"mat-card-header")(8,"mat-card-title"),t.EFF(9,"Roles"),t.k0s()(),t.j41(10,"mat-card-content")(11,"p"),t.Z7z(12,R,8,6,null,null,t.fX1,!1,v,1,0),t.k0s()()(),t.nrm(15,"br"),t.j41(16,"mat-card")(17,"mat-card-content")(18,"button",1),t.bIt("click",function(){return l.assignRole()}),t.EFF(19,"Assign Role"),t.k0s()()()),2&e&&(t.R7$(12),t.Dyx(l.roles()))},dependencies:[C.w,f.g,O.MD,s.Hu,s.RN,s.m2,s.MM,s.dh,E.Hl,E.$z,g.m_,P.iI],styles:[".card-icon[_ngcontent-%COMP%]{font-size:3em}.card-notification[_ngcontent-%COMP%]{margin-bottom:1em}.notifications-title[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}.notifications-card[_ngcontent-%COMP%]{max-width:600px;width:100%}.card-notification[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.notification-description[_ngcontent-%COMP%]{margin-bottom:1em}"]})}return _})()},60385:(A,u,a)=>{a.d(u,{w:()=>i});var p=a(10467),t=a(93953),C=a(34635),f=a(25596),O=a(39434),s=a(345),E=a(78013),g=a(33347),P=a(14823),M=a(30046);const d=e=>["/profile",e];function m(e,l){if(1&e&&(t.nrm(0,"img",0),t.nI1(1,"safeResourceUrl")),2&e){let n;const o=t.XpG();t.Y8G("routerLink",t.eq3(4,d,null==(n=o.data().profile)?null:n.did))("src",t.bMT(1,2,o.data().avatar),t.B4B)}}function R(e,l){if(1&e&&t.nrm(0,"img",1),2&e){let n;const o=t.XpG();t.Y8G("routerLink",t.eq3(2,d,null==(n=o.data().profile)?null:n.did))("src","/avatar-placeholder.png",t.B4B)}}function v(e,l){if(1&e&&t.EFF(0),2&e){let n;const o=t.XpG(2);t.SpI(" (",null==(n=o.data().profile)?null:n.title,") ")}}function D(e,l){if(1&e&&(t.j41(0,"a",3),t.EFF(1),t.DNE(2,v,1,1),t.k0s()),2&e){let n,o,r;const c=t.XpG();t.Y8G("routerLink",t.eq3(3,d,null==(n=c.data().profile)?null:n.did)),t.R7$(),t.SpI("",null==(o=c.data().profile)?null:o.name," "),t.R7$(),t.vxM(null!=(r=c.data().profile)&&r.title?2:-1)}}function _(e,l){if(1&e&&t.EFF(0),2&e){let n;const o=t.XpG(2);t.SpI(" (",null==(n=o.data().profile)?null:n.title,") ")}}function h(e,l){if(1&e&&(t.j41(0,"em")(1,"a",3),t.EFF(2,"No name set "),t.DNE(3,_,1,1),t.k0s()()),2&e){let n,o;const r=t.XpG();t.R7$(),t.Y8G("routerLink",t.eq3(2,d,null==(n=r.data().profile)?null:n.did)),t.R7$(2),t.vxM(null!=(o=r.data().profile)&&o.title?3:-1)}}let i=(()=>{class e{constructor(){this.identity=(0,t.WQX)(C.K),this.profile=(0,t.WQX)(O.p),this.sanitizer=(0,t.WQX)(s.up),this.did=t.hFB.required(),this.data=(0,t.vPA)({})}ngAfterViewInit(){var n=this;return(0,p.A)(function*(){if(n.did()){const o=yield n.profile.loadProfile(n.did());console.log(o),n.data.set(o)}})()}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-profile-header"]],inputs:{did:[1,"did"]},standalone:!0,features:[t.aNF],decls:10,vars:9,consts:[["mat-card-avatar","","onerror","this.src='/avatar-placeholder.png';this.onerror='';",1,"profile-thumbnail",3,"routerLink","src"],["mat-card-avatar","",1,"profile-thumbnail",3,"routerLink","src"],[1,"profile-header-title"],[3,"routerLink"],[1,"profile-header-subtitle"],[3,"routerLink","matTooltip"]],template:function(o,r){if(1&o&&(t.DNE(0,m,2,6,"img",0)(1,R,1,4,"img",1),t.j41(2,"div")(3,"div",2),t.DNE(4,D,3,5,"a",3)(5,h,4,4,"em"),t.k0s(),t.j41(6,"div",4)(7,"a",5),t.EFF(8),t.nI1(9,"did"),t.k0s()()()),2&o){let c,T,F,I;t.vxM(r.data().avatar?0:1),t.R7$(4),t.vxM(null!=(c=r.data().profile)&&c.name?4:5),t.R7$(3),t.Y8G("routerLink",t.eq3(7,d,null==(T=r.data().profile)?null:T.did))("matTooltip",null==(F=r.data().profile)?null:F.did),t.R7$(),t.JRh(t.bMT(9,5,null==(I=r.data().profile)?null:I.did))}},dependencies:[M.iI,M.Wk,P.uc,P.oV,f.Hu,f.QG,E.d,g.k],styles:[".profile-thumbnail[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;margin-right:1em}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]{display:flex}.profile-header-title[_ngcontent-%COMP%]{font-size:1.4em}.profile-header-subtitle[_ngcontent-%COMP%]{font-size:1em}"]})}return e})()}}]);