"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[495],{53474:(O,v,t)=>{t.r(v),t.d(v,{DataViewComponent:()=>p});var _=t(10467),e=t(93953),h=t(99213),b=t(96850),E=t(88834),m=t(3902),y=t(60177),u=t(18498),f=t(27413);const a=i=>["view",i];function c(i,D){if(1&i&&(e.j41(0,"div"),e.EFF(1," Data: "),e.nrm(2,"br"),e.EFF(3),e.k0s()),2&i){const r=e.XpG(2);e.R7$(3),e.SpI(" ",r.recordData()," ")}}function d(i,D){if(1&i&&(e.j41(0,"div"),e.EFF(1," Data: "),e.nrm(2,"br"),e.EFF(3),e.k0s()),2&i){const r=e.XpG(2);e.R7$(3),e.SpI(" ",r.recordData()," ")}}function l(i,D){if(1&i&&(e.j41(0,"div",0)(1,"span",1),e.EFF(2,"ID: "),e.j41(3,"a",2),e.EFF(4),e.k0s()(),e.j41(5,"span"),e.EFF(6),e.nrm(7,"br"),e.EFF(8),e.nrm(9,"br"),e.EFF(10),e.nrm(11,"br"),e.EFF(12),e.nrm(13,"br"),e.EFF(14),e.nrm(15,"br"),e.EFF(16),e.nrm(17,"br"),e.k0s()(),e.DNE(18,c,4,1,"div")(19,d,4,1,"div")),2&i){const r=e.XpG();e.R7$(3),e.Y8G("routerLink",e.eq3(10,a,r.record().id)),e.R7$(),e.JRh(r.record().id),e.R7$(2),e.SpI("Author: ",r.record().author,""),e.R7$(2),e.SpI(" Format: ",r.record().dataFormat,""),e.R7$(2),e.SpI(" Size: ",r.record().dataSize,""),e.R7$(2),e.SpI(" Created: ",r.record().dateCreated,""),e.R7$(2),e.SpI(" Published: ",r.record().published,""),e.R7$(2),e.SpI(" Date Published: ",r.record().datePublished,""),e.R7$(2),e.vxM("text/plain"==r.record().dataFormat?18:-1),e.R7$(),e.vxM("application/json"==r.record().dataFormat?19:-1)}}let p=(()=>{class i{constructor(r,o){this.identityService=r,this.route=o,this.record=(0,e.vPA)(null),this.records=(0,e.vPA)([]),this.recordId="",this.recordData=(0,e.vPA)(""),(0,e.QZP)(()=>{console.log("WEB5 INITIALIZED!!! ",this.identityService.initialized()),this.openRecord(this.recordId)}),this.route.params.subscribe(s=>{const n=s.id;this.recordId=n,this.openRecord(n)})}openRecord(r){var o=this;return(0,_.A)(function*(){if(!r||!o.identityService.initialized())return;const{record:s}=yield o.identityService.web5.dwn.records.read({message:{filter:{recordId:r}}});if(o.record.set(s),console.log(s),console.log(s.dataFormat),"application/json"===s.dataFormat){var n=yield s.data.json();console.log(n),o.recordData.set(JSON.stringify(n,null,2))}else if("text/plain"===s.dataFormat){var g=yield s.data.text();console.log(g),o.recordData.set(g)}})()}load(){var r=this;return(0,_.A)(function*(){const{protocols:o}=yield r.identityService.web5.dwn.protocols.query({message:{filter:{protocol:"https://music.org/protocol"}}});console.log(o);var{records:n}=yield r.identityService.web5.dwn.records.query({message:{filter:{dataFormat:"application/json"}}});console.log("All records:"),console.log(n),n&&r.records.set(n);var{records:n}=yield r.identityService.web5.dwn.records.query({from:r.identityService.did,message:{filter:{schema:"https://schema.org/Playlist",dataFormat:"application/json"}}});console.log(n);const s=yield r.identityService.web5.dwn.records.query({message:{filter:{parentId:"bafyreianzpmhbgcgam5mys722vnsiuwn7y4ek6kjeyjptttquasw4hge2m"}}});console.log(s.records);var{records:n}=yield r.identityService.web5.dwn.records.query({message:{filter:{protocol:"https://playlist.org/protocol",protocolPath:"playlist/video"}}});console.log(n)})()}createRecord(r){var o=this;return(0,_.A)(function*(){var{record:s}=yield o.identityService.web5.dwn.records.create({data:{content:"Hello Web5",description:"Keep Building!",tags:["web5","ariton","did"]},message:{dataFormat:"application/json",published:r}});console.log(s);var{record:s}=yield o.identityService.web5.dwn.records.create({data:"this record will be written to the local DWN",message:{dataFormat:"text/plain"}});console.log(s)})()}updateRecord(){return(0,_.A)(function*(){})()}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(f.K),e.rXU(u.nX))};static#r=this.\u0275cmp=e.VBU({type:i,selectors:[["app-data-view"]],standalone:!0,features:[e.aNF],decls:2,vars:1,consts:[[1,"record-line"],["matListItemTitle",""],[3,"routerLink"]],template:function(o,s){1&o&&(e.nrm(0,"br"),e.DNE(1,l,20,12)),2&o&&(e.R7$(),e.vxM(s.record()?1:-1))},dependencies:[u.Wk,y.MD,b.RI,h.m_,E.Hl,m.Fg,m.yE],styles:[".record-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #e0e0e0}"]})}return i})()},98170:(O,v,t)=>{t.d(v,{a:()=>f});var _=t(93953),e=t(21413),h=t(71985),b=t(5964),E=t(44668),m=t(56977);class u{constructor(c){this._box=c,this._destroyed=new e.B,this._resizeSubject=new e.B,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(d=>this._resizeSubject.next(d)))}observe(c){return this._elementObservables.has(c)||this._elementObservables.set(c,new h.c(d=>{const l=this._resizeSubject.subscribe(d);return this._resizeObserver?.observe(c,{box:this._box}),()=>{this._resizeObserver?.unobserve(c),l.unsubscribe(),this._elementObservables.delete(c)}}).pipe((0,b.p)(d=>d.some(l=>l.target===c)),(0,E.t)({bufferSize:1,refCount:!0}),(0,m.Q)(this._destroyed))),this._elementObservables.get(c)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let f=(()=>{class a{constructor(){this._observers=new Map,this._ngZone=(0,_.WQX)(_.SKi)}ngOnDestroy(){for(const[,d]of this._observers)d.destroy();this._observers.clear()}observe(d,l){const p=l?.box||"content-box";return this._observers.has(p)||this._observers.set(p,new u(p)),this._observers.get(p).observe(d)}static#e=this.\u0275fac=function(l){return new(l||a)};static#r=this.\u0275prov=_.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);