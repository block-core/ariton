"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2228],{92228:(O,l,o)=>{o.r(l),o.d(l,{NotificationsComponent:()=>v});var s=o(10467),t=o(93953),_=o(88834),u=o(36815),c=o(25596),m=o(82546),f=o(99213),p=o(98703),E=o(27276),h=o(59115),g=o(18498),F=o(14339);function N(e,d){if(1&e&&(t.j41(0,"app-profile-card",6)(1,"button",7),t.EFF(2,"CONFIRM"),t.k0s(),t.j41(3,"button",8),t.EFF(4,"DELETE"),t.k0s()()),2&e){const i=t.XpG().$implicit;t.Y8G("did",i.record.author)}}function M(e,d){if(1&e&&(t.j41(0,"mat-card",3)(1,"mat-card-header")(2,"mat-icon",5),t.EFF(3),t.k0s(),t.j41(4,"mat-card-title"),t.EFF(5),t.k0s(),t.j41(6,"mat-card-subtitle"),t.EFF(7),t.nI1(8,"ago"),t.k0s()(),t.j41(9,"mat-card-content"),t.DNE(10,N,5,1,"app-profile-card",6),t.k0s()()),2&e){const i=d.$implicit;t.R7$(3),t.JRh(i.data.icon),t.R7$(2),t.JRh(i.data.title),t.R7$(2),t.Lme("",i.data.app," (",t.bMT(8,5,"2024-08-22 12:00"),")"),t.R7$(3),t.vxM("Friends"===i.data.app?10:-1)}}let v=(()=>{class e{constructor(){var i=this;this.layout=(0,t.WQX)(u.Y),this.notification=(0,t.WQX)(m.J),this.app=(0,t.WQX)(E.d),this.notifications=(0,t.vPA)([]),this.layout.resetActions(),(0,t.QZP)((0,s.A)(function*(){i.app.initialized()&&(yield i.loadNotifications())}))}generateNotification(){var i=this;return(0,s.A)(function*(){const n=yield i.notification.create({title:"Incoming friend request",app:"Friends",icon:"people"});i.notifications.update(a=>[...a,n])})()}loadNotifications(){var i=this;return(0,s.A)(function*(){const n=yield i.notification.load();i.notifications.set(n)})()}enableNotifications(){var i=this;return(0,s.A)(function*(){console.log("Notifications enabled"),i.sendNotification("Hello World")})()}disableNotifications(){return(0,s.A)(function*(){console.log("Notifications disabled")})()}ngOnInit(){var i=this;return(0,s.A)(function*(){console.log("Notifications component loaded"),i.registration=yield navigator.serviceWorker.getRegistration()})()}sendNotification(i){var n=this;return(0,s.A)(function*(){console.log("Sending notification"),"granted"===Notification.permission?(console.log("Notifications enabled!!!!"),n.showNotification(i)):(console.error("Notifications not enabled"),"denied"!==Notification.permission&&"granted"===(yield Notification.requestPermission())&&n.showNotification("Hello World"))})()}showNotification(i){var n=this;return(0,s.A)(function*(){var a="Ariton says hi!";const r={body:i};console.log("Showing notification"),n.registration&&"showNotification"in n.registration?(console.log("Using service worker"),n.registration.showNotification(a,r)):(console.log("Using new notification"),new Notification(a,r))})()}static#t=this.\u0275fac=function(n){return new(n||e)};static#i=this.\u0275cmp=t.VBU({type:e,selectors:[["app-notifications"]],standalone:!0,features:[t.aNF],decls:32,vars:0,consts:[[1,"toolbar-actions","margin-bottom"],["type","button","mat-button",""],[1,"notifications-card"],["appearance","outlined",1,"card-notification"],["mat-flat-button","",3,"click"],["inline","true","mat-card-avatar","",1,"card-icon"],[3,"did"],["mat-flat-button",""],["mat-button",""]],template:function(n,a){1&n&&(t.j41(0,"mat-card",0)(1,"mat-card-content")(2,"h1"),t.EFF(3,"Notifications"),t.k0s(),t.j41(4,"button",1)(5,"mat-icon"),t.EFF(6,"check"),t.k0s(),t.j41(7,"span"),t.EFF(8,"Mark all as read"),t.k0s()(),t.j41(9,"button",1)(10,"mat-icon"),t.EFF(11,"settings"),t.k0s(),t.j41(12,"span"),t.EFF(13,"Notification Settings"),t.k0s()()()(),t.j41(14,"mat-card",2),t.nrm(15,"mat-card-header"),t.j41(16,"mat-card-content"),t.Z7z(17,M,11,7,"mat-card",3,t.fX1),t.k0s()(),t.j41(19,"p"),t.EFF(20,"TODO: This notification should use the modern support for browser vendor based infrastructure for notifications."),t.k0s(),t.j41(21,"button",4),t.bIt("click",function(){return a.generateNotification()}),t.EFF(22,"Create a sample notification"),t.k0s(),t.EFF(23,"\n\xa0\n"),t.j41(24,"button",4),t.bIt("click",function(){return a.enableNotifications()}),t.EFF(25,"Enable Device Notifications"),t.k0s(),t.EFF(26,"\n\xa0\n"),t.j41(27,"button",4),t.bIt("click",function(){return a.disableNotifications()}),t.EFF(28,"Disable Device Notifications"),t.k0s(),t.EFF(29,"\n\xa0\n"),t.j41(30,"button",4),t.bIt("click",function(){return a.sendNotification("Welcome to Ariton!")}),t.EFF(31,"Trigger notification"),t.k0s()),2&n&&(t.R7$(17),t.Dyx(a.notifications()))},dependencies:[F.$,_.Hl,_.$z,c.Hu,c.RN,c.QG,c.m2,c.MM,c.Lc,c.dh,f.m_,f.An,h.Cn,g.iI,p.g],styles:[".card-icon[_ngcontent-%COMP%]{font-size:3em}.card-notification[_ngcontent-%COMP%]{margin-bottom:1em}.notifications-title[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}.notifications-card[_ngcontent-%COMP%]{max-width:600px}"]})}return e})()}}]);