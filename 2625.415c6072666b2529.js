"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2625],{32625:(L,p,a)=>{a.r(p),a.d(p,{NotificationsComponent:()=>H});var r=a(10467),t=a(93953),u=a(88834),v=a(36815),c=a(25596),g=a(82546),m=a(99213),C=a(98703),N=a(27276),E=a(59115),f=a(18498),b=a(14339),k=a(34635),_=a(39434),y=a(345),M=a(78013),P=a(33347),T=a(14823);const d=n=>["/profile",n];function j(n,l){if(1&n&&(t.nrm(0,"img",0),t.nI1(1,"safeResourceUrl")),2&n){let i;const o=t.XpG();t.Y8G("routerLink",t.eq3(4,d,null==(i=o.data().profile)?null:i.did))("src",t.bMT(1,2,o.data().avatar),t.B4B)}}function R(n,l){if(1&n&&t.nrm(0,"img",1),2&n){let i;const o=t.XpG();t.Y8G("routerLink",t.eq3(2,d,null==(i=o.data().profile)?null:i.did))("src","/avatar-placeholder.png",t.B4B)}}function O(n,l){if(1&n&&t.EFF(0),2&n){let i;const o=t.XpG(2);t.SpI(" (",null==(i=o.data().profile)?null:i.title,") ")}}function x(n,l){if(1&n&&(t.j41(0,"a",3),t.EFF(1),t.DNE(2,O,1,1),t.k0s()),2&n){let i,o,e;const s=t.XpG();t.Y8G("routerLink",t.eq3(3,d,null==(i=s.data().profile)?null:i.did)),t.R7$(),t.SpI("",null==(o=s.data().profile)?null:o.name," "),t.R7$(),t.vxM(null!=(e=s.data().profile)&&e.title?2:-1)}}function A(n,l){if(1&n&&t.EFF(0),2&n){let i;const o=t.XpG(2);t.SpI(" (",null==(i=o.data().profile)?null:i.title,") ")}}function $(n,l){if(1&n&&(t.j41(0,"em")(1,"a",3),t.EFF(2,"No name set "),t.DNE(3,A,1,1),t.k0s()()),2&n){let i,o;const e=t.XpG();t.R7$(),t.Y8G("routerLink",t.eq3(2,d,null==(i=e.data().profile)?null:i.did)),t.R7$(2),t.vxM(null!=(o=e.data().profile)&&o.title?3:-1)}}let G=(()=>{class n{constructor(){this.identity=(0,t.WQX)(k.K),this.profile=(0,t.WQX)(_.p),this.sanitizer=(0,t.WQX)(y.up),this.did=t.hFB.required(),this.data=(0,t.vPA)({})}ngAfterViewInit(){var i=this;return(0,r.A)(function*(){if(i.did()){const o=yield i.profile.loadProfile(i.did());console.log(o),i.data.set(o)}})()}static#t=this.\u0275fac=function(o){return new(o||n)};static#i=this.\u0275cmp=t.VBU({type:n,selectors:[["app-profile-header"]],inputs:{did:[1,"did"]},standalone:!0,features:[t.aNF],decls:10,vars:8,consts:[["mat-card-avatar","","onerror","this.src='/avatar-placeholder.png';this.onerror='';",1,"profile-thumbnail",3,"routerLink","src"],["mat-card-avatar","",1,"profile-thumbnail",3,"routerLink","src"],[1,"profile-header-title"],[3,"routerLink"],[1,"profile-header-subtitle"]],template:function(o,e){if(1&o&&(t.DNE(0,j,2,6,"img",0)(1,R,1,4,"img",1),t.j41(2,"div")(3,"div",2),t.DNE(4,x,3,5,"a",3)(5,$,4,4,"em"),t.k0s(),t.j41(6,"div",4)(7,"a",3),t.EFF(8),t.nI1(9,"did"),t.k0s()()()),2&o){let s,h,F;t.vxM(e.data().avatar?0:1),t.R7$(4),t.vxM(null!=(s=e.data().profile)&&s.name?4:5),t.R7$(3),t.Y8G("routerLink",t.eq3(6,d,null==(h=e.data().profile)?null:h.did)),t.R7$(),t.JRh(t.bMT(9,4,null==(F=e.data().profile)?null:F.did))}},dependencies:[f.iI,f.Wk,T.uc,c.Hu,c.QG,M.d,P.k],styles:[".profile-thumbnail[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;margin-right:1em}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]{display:flex}.profile-header-title[_ngcontent-%COMP%]{font-size:1.4em}.profile-header-subtitle[_ngcontent-%COMP%]{font-size:1em}"]})}return n})();function I(n,l){if(1&n&&(t.j41(0,"app-profile-card",6)(1,"button",7),t.EFF(2,"CONFIRM"),t.k0s(),t.j41(3,"button",8),t.EFF(4,"DELETE"),t.k0s()()),2&n){const i=t.XpG().$implicit;t.Y8G("did",i.record.author)}}function X(n,l){if(1&n&&(t.j41(0,"div",9),t.EFF(1),t.k0s(),t.j41(2,"app-profile-header",6)(3,"button",7),t.EFF(4,"CONFIRM"),t.k0s(),t.j41(5,"button",8),t.EFF(6,"DELETE"),t.k0s()()),2&n){const i=t.XpG().$implicit;t.R7$(),t.JRh(i.data.description),t.R7$(),t.Y8G("did",i.record.author)}}function D(n,l){if(1&n&&(t.j41(0,"mat-card",3)(1,"mat-card-header")(2,"mat-icon",5),t.EFF(3),t.k0s(),t.j41(4,"mat-card-title"),t.EFF(5),t.k0s(),t.j41(6,"mat-card-subtitle"),t.EFF(7),t.nI1(8,"ago"),t.k0s()(),t.j41(9,"mat-card-content"),t.DNE(10,I,5,1,"app-profile-card",6)(11,X,7,2),t.k0s(),t.j41(12,"mat-card-actions")(13,"button",7),t.EFF(14,"CONFIRM"),t.k0s(),t.j41(15,"button",8),t.EFF(16,"DELETE"),t.k0s()()()),2&n){const i=l.$implicit;t.R7$(3),t.JRh(i.data.icon),t.R7$(2),t.JRh(i.data.title),t.R7$(2),t.Lme("",i.data.app," (",t.bMT(8,5,"2024-08-22 12:00"),")"),t.R7$(3),t.vxM("Friends"===i.data.app?10:"Connect"===i.data.app?11:-1)}}let H=(()=>{class n{constructor(){var i=this;this.layout=(0,t.WQX)(v.Y),this.notification=(0,t.WQX)(g.J),this.app=(0,t.WQX)(N.d),this.notifications=(0,t.vPA)([]),this.layout.resetActions(),(0,t.QZP)((0,r.A)(function*(){i.app.initialized()&&(yield i.loadNotifications())}))}generateNotification(){var i=this;return(0,r.A)(function*(){const o=yield i.notification.create({title:"Incoming friend request",app:"Friends",icon:"people"});i.notifications.update(s=>[...s,o]);const e=yield i.notification.create({title:"Accept connect request",description:"This user wants to connect with you, you have to accept an initial connect request to be able to receive other sharing requests, such as shared Tasks, collabrative apps and more. Only accept this request if you know the user. This is to avoid spam messages.",app:"Connect",icon:"connect_without_contact"});i.notifications.update(s=>[...s,e])})()}loadNotifications(){var i=this;return(0,r.A)(function*(){const o=yield i.notification.load();i.notifications.set(o)})()}enableNotifications(){var i=this;return(0,r.A)(function*(){console.log("Notifications enabled"),i.sendNotification("Hello World")})()}disableNotifications(){return(0,r.A)(function*(){console.log("Notifications disabled")})()}ngOnInit(){var i=this;return(0,r.A)(function*(){console.log("Notifications component loaded"),i.registration=yield navigator.serviceWorker.getRegistration()})()}sendNotification(i){var o=this;return(0,r.A)(function*(){console.log("Sending notification"),"granted"===Notification.permission?(console.log("Notifications enabled!!!!"),o.showNotification(i)):(console.error("Notifications not enabled"),"denied"!==Notification.permission&&"granted"===(yield Notification.requestPermission())&&o.showNotification("Hello World"))})()}showNotification(i){var o=this;return(0,r.A)(function*(){var e="Ariton says hi!";const s={body:i};console.log("Showing notification"),o.registration&&"showNotification"in o.registration?(console.log("Using service worker"),o.registration.showNotification(e,s)):(console.log("Using new notification"),new Notification(e,s))})()}static#t=this.\u0275fac=function(o){return new(o||n)};static#i=this.\u0275cmp=t.VBU({type:n,selectors:[["app-notifications"]],standalone:!0,features:[t.aNF],decls:32,vars:0,consts:[[1,"toolbar-actions","margin-bottom","notifications-card"],["type","button","mat-button",""],[1,"notifications-card"],["appearance","outlined",1,"card-notification"],["mat-flat-button","",3,"click"],["inline","true","mat-card-avatar","",1,"card-icon"],[3,"did"],["mat-flat-button",""],["mat-button",""],[1,"notification-description"]],template:function(o,e){1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-content")(2,"h1"),t.EFF(3,"Notifications"),t.k0s(),t.j41(4,"button",1)(5,"mat-icon"),t.EFF(6,"check"),t.k0s(),t.j41(7,"span"),t.EFF(8,"Mark all as read"),t.k0s()(),t.j41(9,"button",1)(10,"mat-icon"),t.EFF(11,"settings"),t.k0s(),t.j41(12,"span"),t.EFF(13,"Notification Settings"),t.k0s()()()(),t.j41(14,"mat-card",2),t.nrm(15,"mat-card-header"),t.j41(16,"mat-card-content"),t.Z7z(17,D,17,7,"mat-card",3,t.fX1),t.k0s()(),t.j41(19,"p"),t.EFF(20,"TODO: This notification should use the modern support for browser vendor based infrastructure for notifications."),t.k0s(),t.j41(21,"button",4),t.bIt("click",function(){return e.generateNotification()}),t.EFF(22,"Create a sample notification"),t.k0s(),t.EFF(23,"\n\xa0\n"),t.j41(24,"button",4),t.bIt("click",function(){return e.enableNotifications()}),t.EFF(25,"Enable Device Notifications"),t.k0s(),t.EFF(26,"\n\xa0\n"),t.j41(27,"button",4),t.bIt("click",function(){return e.disableNotifications()}),t.EFF(28,"Disable Device Notifications"),t.k0s(),t.EFF(29,"\n\xa0\n"),t.j41(30,"button",4),t.bIt("click",function(){return e.sendNotification("Welcome to Ariton!")}),t.EFF(31,"Trigger notification"),t.k0s()),2&o&&(t.R7$(17),t.Dyx(e.notifications()))},dependencies:[G,b.$,u.Hl,u.$z,c.Hu,c.RN,c.YY,c.QG,c.m2,c.MM,c.Lc,c.dh,m.m_,m.An,E.Cn,f.iI,C.g],styles:[".card-icon[_ngcontent-%COMP%]{font-size:3em}.card-notification[_ngcontent-%COMP%]{margin-bottom:1em}.notifications-title[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}.notifications-card[_ngcontent-%COMP%]{max-width:600px;width:100%}.card-notification[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.notification-description[_ngcontent-%COMP%]{margin-bottom:1em}"]})}return n})()}}]);