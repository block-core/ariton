"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1871],{11871:(G,d,c)=>{c.r(d),c.d(d,{ConnectionsComponent:()=>k});var t=c(93953),l=c(81317),p=c(31439),u=c(60177),s=c(25596),r=c(88834),m=c(99213),C=c(30046),f=c(10467),_=c(60385);function h(o,a){if(1&o&&t.nrm(0,"app-profile-header",1),2&o){const n=t.XpG(2);t.Y8G("did",n.entry.record.recipient)}}function g(o,a){if(1&o&&t.nrm(0,"app-profile-header",1),2&o){const n=t.XpG(2);t.Y8G("did",n.entry.record.author)}}function F(o,a){if(1&o){const n=t.RV6();t.j41(0,"button",2),t.EFF(1,"PENDING"),t.k0s(),t.EFF(2,"\xa0 "),t.j41(3,"button",3),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.reject(e.entry))}),t.EFF(4,"CANCEL"),t.k0s()}if(2&o){const n=t.XpG(2);t.Y8G("disabled",!0),t.R7$(3),t.Y8G("disabled",n.entry.loading)}}function y(o,a){if(1&o){const n=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.accept(e.entry))}),t.EFF(1,"ACCEPT"),t.k0s(),t.EFF(2,"\xa0 "),t.j41(3,"button",3),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.reject(e.entry))}),t.EFF(4,"DELETE"),t.k0s(),t.EFF(5,"\xa0 "),t.j41(6,"button",3),t.bIt("click",function(){t.eBV(n);const e=t.XpG(2);return t.Njj(e.block(e.entry))}),t.EFF(7,"BLOCK"),t.k0s()}if(2&o){const n=t.XpG(2);t.Y8G("disabled",n.entry.loading),t.R7$(3),t.Y8G("disabled",n.entry.loading),t.R7$(3),t.Y8G("disabled",n.entry.loading)}}function x(o,a){if(1&o&&(t.j41(0,"mat-card",0)(1,"mat-card-content"),t.DNE(2,h,1,1,"app-profile-header",1)(3,g,1,1,"app-profile-header",1),t.k0s(),t.j41(4,"mat-card-actions"),t.DNE(5,F,5,2)(6,y,8,3),t.k0s()()),2&o){const n=t.XpG();t.R7$(2),t.vxM("out"==n.entry.direction?2:3),t.R7$(3),t.vxM("out"==n.entry.direction?5:6)}}let b=(()=>{class o{constructor(){this.entry=void 0,this.connection=(0,t.WQX)(l.K),this.app=(0,t.WQX)(p.d)}deleteConnection(n){n.loading=!0,this.connection.deleteConnection(n)}accept(n){var i=this;return(0,f.A)(function*(){n.loading=!0,console.log("Accepting connection request",n);const e=n.record.tags.type;yield i.connection.create(n.data,e)})()}block(n){var i=this;return(0,f.A)(function*(){n.loading=!0,console.log("Blocking user",n);const e=yield i.connection.block(n.record.author);console.log("Block result: ",e),yield i.connection.deleteConnections(n.record.author),yield i.connection.deleteRequests(n.record.author)})()}reject(n){n.loading=!0,this.connection.deleteRequest(n)}static#t=this.\u0275fac=function(i){return new(i||o)};static#n=this.\u0275cmp=t.VBU({type:o,selectors:[["app-request"]],inputs:{entry:"entry"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[["appearance","outlined",1,"card-notification"],[3,"did"],["mat-flat-button","",3,"disabled"],["mat-button","",3,"click","disabled"],["mat-flat-button","",3,"click","disabled"]],template:function(i,e){1&i&&t.DNE(0,x,7,2,"mat-card",0),2&i&&t.vxM(e.entry?0:-1)},dependencies:[_.w,u.MD,s.Hu,s.RN,s.YY,s.m2,r.Hl,r.$z,m.m_,C.iI],styles:[".card-icon[_ngcontent-%COMP%]{font-size:3em}.card-notification[_ngcontent-%COMP%]{margin-bottom:1em}.notifications-title[_ngcontent-%COMP%]{display:flex;width:100%}.notifications-card[_ngcontent-%COMP%]{max-width:600px;width:100%}.card-notification[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.notification-description[_ngcontent-%COMP%]{margin-bottom:1em}"]})}return o})();function M(o,a){1&o&&t.nrm(0,"app-request",1),2&o&&t.Y8G("entry",a.$implicit)}function R(o,a){1&o&&t.EFF(0," No requests found. ")}function E(o,a){1&o&&t.nrm(0,"app-request",1),2&o&&t.Y8G("entry",a.$implicit)}function j(o,a){1&o&&t.EFF(0," No connections found. ")}let k=(()=>{class o{constructor(){this.connection=(0,t.WQX)(l.K),this.app=(0,t.WQX)(p.d)}static#t=this.\u0275fac=function(i){return new(i||o)};static#n=this.\u0275cmp=t.VBU({type:o,selectors:[["app-connections"]],standalone:!0,features:[t.aNF],decls:19,vars:2,consts:[[1,"notifications-card"],[3,"entry"]],template:function(i,e){1&i&&(t.j41(0,"h1"),t.EFF(1,"Connections Management"),t.k0s(),t.j41(2,"mat-card",0)(3,"mat-card-header")(4,"mat-card-title"),t.EFF(5,"Requests"),t.k0s()(),t.j41(6,"mat-card-content"),t.Z7z(7,M,1,1,"app-request",1,t.fX1,!1,R,1,0),t.k0s()(),t.nrm(10,"br"),t.j41(11,"mat-card",0)(12,"mat-card-header")(13,"mat-card-title"),t.EFF(14,"Connections"),t.k0s()(),t.j41(15,"mat-card-content"),t.Z7z(16,E,1,1,"app-request",1,t.fX1,!1,j,1,0),t.k0s()()),2&i&&(t.R7$(7),t.Dyx(e.connection.requests()),t.R7$(9),t.Dyx(e.connection.connections()))},dependencies:[b,u.MD,s.Hu,s.RN,s.m2,s.MM,s.dh,r.Hl,m.m_,C.iI],styles:[".card-icon[_ngcontent-%COMP%]{font-size:3em}.card-notification[_ngcontent-%COMP%]{margin-bottom:1em}.notifications-title[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}.notifications-card[_ngcontent-%COMP%]{max-width:600px;width:100%}.card-notification[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.notification-description[_ngcontent-%COMP%]{margin-bottom:1em}"]})}return o})()}}]);