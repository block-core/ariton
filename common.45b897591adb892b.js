"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2076],{69226:(v,_,i)=>{i.d(_,{x:()=>p});var h=i(10467),c=i(93953),d=i(31439);let p=(()=>{class a{constructor(){this.appService=(0,c.WQX)(d.d),this.loaded=(0,c.vPA)(!1),this.bsn={tokens:[],sources:[],accounts:[],tags:[],accounts_filtered:[]},(0,c.QZP)(()=>{this.appService.initialized()&&this.load()})}shorten(s){return s.substring(0,5)+"..."+s.substring(s.length-5)}filter(s){this.bsn.accounts_filtered=s&&0!=s.length?this.bsn.accounts.filter(r=>r.tags.some(o=>s.includes(o.id))):this.bsn.accounts}load(){var s=this;return(0,h.A)(function*(){var r=yield fetch("https://bsn.mtla.me/json");if(r.ok){var o=yield r.json();s.updated=o.createDate;let f=o.knownTokens.map(t=>{const[e,n]=t.split("-");return{id:n,name:e,short:s.shorten(n)}}),b=o.usedSources.map(t=>{const[e,n]=t.split("-");return{id:n,name:e,short:s.shorten(n)}}),u=Object.entries(o.accounts).map(([t,e])=>({id:t,short:s.shorten(t),balances:e.balances,profile:e.profile,tags:e.tags?Object.entries(e.tags).map(([n,m])=>({id:n,value:m})):[]}));s.bsn.tokens=f,s.bsn.sources=b,s.bsn.accounts=u;const l=new Set;u.forEach(t=>{t.tags.forEach(e=>{l.add(e.id)})}),s.bsn.tags=Array.from(l).sort(),s.bsn.accounts_filtered=s.bsn.accounts,s.loaded.set(!0)}})()}static#s=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);