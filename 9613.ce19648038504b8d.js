"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9613],{29613:(W,i,n)=>{n.r(i),n.d(i,{NewComponent:()=>C});var u=n(10467),t=n(54438),s=n(88834),c=n(37064),g=n(30046),l=n(99631),p=n(65571),D=n(82798),O=n(99213),M=n(5951),f=n(25596),e=n(89417),P=n(52778),v=n(80865),m=n(53719);let C=(()=>{class _{constructor(){this.fb=(0,t.WQX)(e.ok),this.identity=(0,t.WQX)(c.K),this.protocol=(0,t.WQX)(v.w),this.app=(0,t.WQX)(P.d),this.router=(0,t.WQX)(g.Ix),this.form=this.fb.group({name:["",e.k0.required]})}ngOnInit(){}onSubmit(){var a=this;return(0,u.A)(function*(){a.form.disable(),console.log("Creating account...");const o=a.identity.activeAgent();console.log("Create...");const d=yield o.identity.create({didOptions:{publish:!0,services:[{id:"dwn",type:"DecentralizedWebNode",serviceEndpoint:["https://dwn.tbddev.org/beta"],enc:"#enc",sig:"#sig"}]},metadata:{name:a.form.controls.name.value}});console.log("Export...");const E=yield d.export();console.log("Manage...");const I=yield o.identity.manage({portableIdentity:E}),y=yield a.identity.registerAccount(I.metadata.uri,a.app.account().password);yield a.protocol.register(y),yield a.identity.changeAccount(E.metadata.uri),a.router.navigate(["/accounts"])})()}static{this.\u0275fac=function(o){return new(o||_)}}static{this.\u0275cmp=t.VBU({type:_,selectors:[["app-new"]],standalone:!0,features:[t.aNF],decls:11,vars:2,consts:[[3,"ngSubmit","formGroup"],["matInput","","formControlName","name","type","text"],["mat-flat-button","",3,"disabled"]],template:function(o,r){1&o&&(t.j41(0,"h1"),t.EFF(1,"Create new account"),t.k0s(),t.j41(2,"form",0),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(3,"p")(4,"mat-form-field")(5,"mat-label"),t.EFF(6,"Enter account name"),t.k0s(),t.nrm(7,"input",1),t.k0s()(),t.j41(8,"p")(9,"button",2),t.EFF(10,"Create account"),t.k0s()()()),2&o&&(t.R7$(2),t.Y8G("formGroup",r.form),t.R7$(7),t.Y8G("disabled",r.form.disabled||r.form.invalid))},dependencies:[l.fS,l.fg,m.rl,m.nJ,s.Hl,s.$z,p.Vg,D.Ve,O.m_,M.Wk,f.Hu,e.X1,e.qT,e.me,e.BC,e.cb,e.j4,e.JD]})}}return _})()}}]);