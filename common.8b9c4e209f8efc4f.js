"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2076],{69226:(T,P,r)=>{r.d(P,{x:()=>s});var M=r(10467),t=r(93953),v=r(27276);let s=(()=>{class m{constructor(){this.appService=(0,t.WQX)(v.d),this.loaded=(0,t.vPA)(!1),this.bsn={tokens:[],sources:[],accounts:[],tags:[],accounts_filtered:[]},(0,t.QZP)(()=>{this.appService.initialized()&&this.load()})}shorten(a){return a.substring(0,5)+"..."+a.substring(a.length-5)}filter(a){this.bsn.accounts_filtered=a&&0!=a.length?this.bsn.accounts.filter(c=>c.tags.some(p=>a.includes(p.id))):this.bsn.accounts}load(){var a=this;return(0,M.A)(function*(){var c=yield fetch("https://bsn.mtla.me/json");if(c.ok){var p=yield c.json();a.updated=p.createDate;let E=p.knownTokens.map(_=>{const[i,d]=_.split("-");return{id:d,name:i,short:a.shorten(d)}}),g=p.usedSources.map(_=>{const[i,d]=_.split("-");return{id:d,name:i,short:a.shorten(d)}}),u=Object.entries(p.accounts).map(([_,i])=>({id:_,short:a.shorten(_),balances:i.balances,profile:i.profile,tags:i.tags?Object.entries(i.tags).map(([d,O])=>({id:d,value:O})):[]}));a.bsn.tokens=E,a.bsn.sources=g,a.bsn.accounts=u;const C=new Set;u.forEach(_=>{_.tags.forEach(i=>{C.add(i.id)})}),a.bsn.tags=Array.from(C).sort(),a.bsn.accounts_filtered=a.bsn.accounts,a.loaded.set(!0)}})()}static#t=this.\u0275fac=function(c){return new(c||m)};static#e=this.\u0275prov=t.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},14339:(T,P,r)=>{r.d(P,{$:()=>k});var M=r(10467),t=r(93953),v=r(34635),s=r(25596),m=r(39434),L=r(345),a=r(78013),c=r(33347),p=r(14823),E=r(18498);const g=["*"],u=e=>["/profile",e];function C(e,f){if(1&e&&t.EFF(0),2&e){let n;const o=t.XpG(2);t.SpI(" (",null==(n=o.data().profile)?null:n.title,") ")}}function _(e,f){if(1&e&&(t.j41(0,"a",0),t.EFF(1),t.DNE(2,C,1,1),t.k0s()),2&e){let n,o,l;const h=t.XpG();t.Y8G("routerLink",t.eq3(3,u,null==(n=h.data().profile)?null:n.did)),t.R7$(),t.SpI("",null==(o=h.data().profile)?null:o.name," "),t.R7$(),t.vxM(null!=(l=h.data().profile)&&l.title?2:-1)}}function i(e,f){if(1&e&&t.EFF(0),2&e){let n;const o=t.XpG(2);t.SpI(" (",null==(n=o.data().profile)?null:n.title,") ")}}function d(e,f){if(1&e&&(t.j41(0,"em")(1,"a",0),t.EFF(2,"No name set "),t.DNE(3,i,1,1),t.k0s()()),2&e){let n,o;const l=t.XpG();t.R7$(),t.Y8G("routerLink",t.eq3(2,u,null==(n=l.data().profile)?null:n.did)),t.R7$(2),t.vxM(null!=(o=l.data().profile)&&o.title?3:-1)}}function O(e,f){if(1&e&&(t.nrm(0,"img",1),t.nI1(1,"safeResourceUrl")),2&e){let n;const o=t.XpG();t.Y8G("routerLink",t.eq3(4,u,null==(n=o.data().profile)?null:n.did))("src",t.bMT(1,2,o.data().avatar),t.B4B)}}function b(e,f){if(1&e&&t.nrm(0,"img",2),2&e){let n;const o=t.XpG();t.Y8G("routerLink",t.eq3(2,u,null==(n=o.data().profile)?null:n.did))("src","/avatar-placeholder.png",t.B4B)}}function I(e,f){if(1&e&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.JRh(n.data().message)}}let k=(()=>{class e{constructor(){this.identity=(0,t.WQX)(v.K),this.profile=(0,t.WQX)(m.p),this.sanitizer=(0,t.WQX)(L.up),this.did=t.hFB.required(),this.data=(0,t.vPA)({})}ngAfterViewInit(){var n=this;return(0,M.A)(function*(){if(n.did()){const o=yield n.profile.loadProfile(n.did());console.log(o),n.data.set(o)}})()}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-profile-card"]],inputs:{did:[1,"did"]},standalone:!0,features:[t.aNF],ngContentSelectors:g,decls:16,vars:9,consts:[[3,"routerLink"],["mat-card-image","","onerror","this.src='/avatar-placeholder.png';this.onerror='';",1,"profile-thumbnail",3,"routerLink","src"],["mat-card-image","",1,"profile-thumbnail",3,"routerLink","src"]],template:function(o,l){if(1&o&&(t.NAR(),t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.DNE(3,_,3,5,"a",0)(4,d,4,4,"em"),t.k0s(),t.j41(5,"mat-card-subtitle")(6,"a",0),t.EFF(7),t.nI1(8,"did"),t.k0s()()(),t.nrm(9,"br"),t.DNE(10,O,2,6,"img",1)(11,b,1,4,"img",2),t.j41(12,"mat-card-content"),t.DNE(13,I,2,1,"p"),t.k0s(),t.j41(14,"mat-card-actions"),t.SdG(15),t.k0s()()),2&o){let h,D,R;t.R7$(3),t.vxM(null!=(h=l.data().profile)&&h.name?3:4),t.R7$(3),t.Y8G("routerLink",t.eq3(7,u,null==(D=l.data().profile)?null:D.did)),t.R7$(),t.JRh(t.bMT(8,5,null==(R=l.data().profile)?null:R.did)),t.R7$(3),t.vxM(l.data().avatar?10:11),t.R7$(3),t.vxM(l.data().message?13:-1)}},dependencies:[E.iI,E.Wk,p.uc,s.Hu,s.RN,s.YY,s.m2,s.MM,s.kF,s.Lc,s.dh,a.d,c.k],styles:[".profile-thumbnail[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]{text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return e})()}}]);