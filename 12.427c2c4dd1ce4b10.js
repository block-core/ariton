"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[12],{88012:(I,u,a)=>{a.r(u),a.d(u,{PasswordComponent:()=>C});var d=a(10467),t=a(93953),_=a(88834),s=a(89417),p=a(9183),i=a(53719),m=a(99631),E=a(99213),l=a(25596),w=a(27413),P=a(18498);function v(o,c){1&o&&t.nrm(0,"mat-spinner",4)}function g(o,c){1&o&&(t.j41(0,"span"),t.EFF(1,"Save new password"),t.k0s())}function h(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Password is "),t.j41(2,"strong"),t.EFF(3,"invalid"),t.k0s()())}let C=(()=>{class o{constructor(n,r){this.identityService=n,this.router=r,this.passwordInputPrevious=new s.MJ("",s.k0.required),this.passwordInput=new s.MJ("",s.k0.required),this.passwordInputRepeat=new s.MJ("",s.k0.required),this.unlocking=(0,t.vPA)(!1),this.invalidPassword=(0,t.vPA)(!1)}changePassword(n,r,e){var f=this;return(0,d.A)(function*(){if(r!=e)throw new Error("Passwords do not match");n||(n="insecure-static-phrase"),yield f.identityService.changePassword(n,r),console.log("Password changed")})()}onSubmit(){var n=this;return(0,d.A)(function*(){if(n.unlocking.set(!0),n.passwordInput.value!==n.passwordInputRepeat.value)throw n.invalidPassword.set(!0),n.unlocking.set(!1),console.error("Passwords do not match"),new Error("Passwords do not match");try{yield n.changePassword(n.passwordInputPrevious.value,n.passwordInput.value,n.passwordInputRepeat.value)}catch(r){return console.error(r),n.invalidPassword.set(!0),void n.unlocking.set(!1)}n.invalidPassword.set(!1),n.unlocking.set(!1),n.router.navigate(["/account","did:dht:umj7apgmkodtrb7mdpjo4h7xinqdnatzgy38j7wi67k9c7sdns1o"])})()}static#t=this.\u0275fac=function(r){return new(r||o)(t.rXU(w.K),t.rXU(P.Ix))};static#n=this.\u0275cmp=t.VBU({type:o,selectors:[["app-password"]],standalone:!0,features:[t.aNF],decls:32,vars:6,consts:[[3,"ngSubmit"],["appearance","outline",1,"full-width"],["matInput","","type","password",3,"formControl"],["mat-flat-button","","type","submit","color","primary",3,"disabled"],["diameter","20"],["appearance","outlined"]],template:function(r,e){1&r&&(t.j41(0,"h1"),t.EFF(1,"Change your password"),t.k0s(),t.j41(2,"form",0),t.bIt("ngSubmit",function(){return e.onSubmit()}),t.j41(3,"mat-form-field",1)(4,"mat-label"),t.EFF(5,"Enter your old password"),t.k0s(),t.nrm(6,"input",2),t.k0s(),t.nrm(7,"br"),t.j41(8,"mat-form-field",1)(9,"mat-label"),t.EFF(10,"Enter your new password"),t.k0s(),t.nrm(11,"input",2),t.k0s(),t.nrm(12,"br"),t.j41(13,"mat-form-field",1)(14,"mat-label"),t.EFF(15,"Repeat your new password"),t.k0s(),t.nrm(16,"input",2),t.k0s(),t.EFF(17," \xa0 "),t.j41(18,"button",3),t.DNE(19,v,1,0,"mat-spinner",4)(20,g,2,0,"span"),t.k0s(),t.j41(21,"p"),t.DNE(22,h,4,0,"mat-error"),t.k0s(),t.j41(23,"mat-card",5)(24,"mat-card-content")(25,"strong"),t.EFF(26,"WARNING:"),t.k0s(),t.EFF(27," If you forget this password, "),t.j41(28,"strong"),t.EFF(29,"your account and all data will be lost."),t.k0s(),t.j41(30,"p"),t.EFF(31," It is impossible for anyone else, even us, to recover your account if you forget your password. We suggest you write it down and store it in a safe place."),t.k0s()()()()),2&r&&(t.R7$(6),t.Y8G("formControl",e.passwordInputPrevious),t.R7$(5),t.Y8G("formControl",e.passwordInput),t.R7$(5),t.Y8G("formControl",e.passwordInputRepeat),t.R7$(2),t.Y8G("disabled",!(e.passwordInput.valid&&!e.unlocking())),t.R7$(),t.vxM(e.unlocking()?19:20),t.R7$(3),t.vxM(e.invalidPassword()?22:-1))},dependencies:[l.Hu,l.RN,l.m2,s.YN,s.qT,s.me,s.BC,s.cb,s.cV,p.D6,p.LG,s.X1,s.l_,i.RG,i.rl,i.nJ,i.TL,m.fS,m.fg,_.Hl,_.$z,E.m_],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]})}return o})()}}]);